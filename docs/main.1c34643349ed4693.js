"use strict";(self.webpackChunkmyApp=self.webpackChunkmyApp||[]).push([[179],{6217:(qt,We,Y)=>{Y.d(We,{nm:()=>Mr});var A=Y(2122);Y(4650),Y(259);var ft=Y(5861),st=Y(9681),rt=Y(4859),Ct=Y(2090),vt=Y(1877);const G=new Map,Xe={activated:!1,tokenObservers:[]},ye={initialized:!1,enabled:!1};function Ce(Ie){return G.get(Ie)||Object.assign({},Xe)}function ke(){return ye}class $t{constructor(be,Ue,Ge,ut,mt){if(this.operation=be,this.retryPolicy=Ue,this.getWaitDuration=Ge,this.lowerBound=ut,this.upperBound=mt,this.pending=null,this.nextErrorWaitInterval=ut,ut>mt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(be){var Ue=this;return(0,ft.Z)(function*(){Ue.stop();try{Ue.pending=new Ct.BH,yield function Dt(Ie){return new Promise(be=>{setTimeout(be,Ie)})}(Ue.getNextRun(be)),Ue.pending.resolve(),yield Ue.pending.promise,Ue.pending=new Ct.BH,yield Ue.operation(),Ue.pending.resolve(),yield Ue.pending.promise,Ue.process(!0).catch(()=>{})}catch(Ge){Ue.retryPolicy(Ge)?Ue.process(!1).catch(()=>{}):Ue.stop()}})()}getNextRun(be){if(be)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ue=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ue}}}const Cn=new Ct.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nn(Ie){if(!Ce(Ie).activated)throw Cn.create("use-before-activation",{appName:Ie.name})}function Ur(Ie,be){return pr.apply(this,arguments)}function pr(){return(pr=(0,ft.Z)(function*({url:Ie,body:be},Ue){const Ge={"Content-Type":"application/json"},ut=Ue.getImmediate({optional:!0});if(ut){const Fi=yield ut.getHeartbeatsHeader();Fi&&(Ge["X-Firebase-Client"]=Fi)}const mt={method:"POST",body:JSON.stringify(be),headers:Ge};let _n,an;try{_n=yield fetch(Ie,mt)}catch(Fi){throw Cn.create("fetch-network-error",{originalErrorMessage:Fi?.message})}if(200!==_n.status)throw Cn.create("fetch-status-error",{httpStatus:_n.status});try{an=yield _n.json()}catch(Fi){throw Cn.create("fetch-parse-error",{originalErrorMessage:Fi?.message})}const nr=an.ttl.match(/^([\d.]+)(s)$/);if(!nr||!nr[2]||isNaN(Number(nr[1])))throw Cn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${an.ttl}`});const ii=1e3*Number(nr[1]),Ci=Date.now();return{token:an.token,expireTimeMillis:Ci+ii,issuedAtTimeMillis:Ci}})).apply(this,arguments)}function en(Ie,be){const{projectId:Ue,appId:Ge,apiKey:ut}=Ie.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Ue}/apps/${Ge}:exchangeDebugToken?key=${ut}`,body:{debug_token:be}}}const ar="firebase-app-check-store";let br=null;function Lt(){return br||(br=new Promise((Ie,be)=>{try{const Ue=indexedDB.open("firebase-app-check-database",1);Ue.onsuccess=Ge=>{Ie(Ge.target.result)},Ue.onerror=Ge=>{var ut;be(Cn.create("storage-open",{originalErrorMessage:null===(ut=Ge.target.error)||void 0===ut?void 0:ut.message}))},Ue.onupgradeneeded=Ge=>{0===Ge.oldVersion&&Ge.target.result.createObjectStore(ar,{keyPath:"compositeKey"})}}catch(Ue){be(Cn.create("storage-open",{originalErrorMessage:Ue?.message}))}}),br)}function Gt(){return(Gt=(0,ft.Z)(function*(Ie,be){const Ge=(yield Lt()).transaction(ar,"readwrite"),mt=Ge.objectStore(ar).put({compositeKey:Ie,value:be});return new Promise((_n,an)=>{mt.onsuccess=nr=>{_n()},Ge.onerror=nr=>{var ii;an(Cn.create("storage-set",{originalErrorMessage:null===(ii=nr.target.error)||void 0===ii?void 0:ii.message}))}})})).apply(this,arguments)}const Kn=new vt.Yd("@firebase/app-check");function gr(Ie,be){return(0,Ct.hl)()?function $i(Ie,be){return function dr(Ie,be){return Gt.apply(this,arguments)}(function us(Ie){return`${Ie.options.appId}-${Ie.name}`}(Ie),be)}(Ie,be).catch(Ue=>{Kn.warn(`Failed to write token to IndexedDB. Error: ${Ue}`)}):Promise.resolve()}function Ii(){return ke().enabled}function yn(){return fn.apply(this,arguments)}function fn(){return(fn=(0,ft.Z)(function*(){const Ie=ke();if(Ie.enabled&&Ie.token)return Ie.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Mt={error:"UNKNOWN_ERROR"};function pt(Ie){return Ct.US.encodeString(JSON.stringify(Ie),!1)}function Pt(Ie){return pn.apply(this,arguments)}function pn(){return(pn=(0,ft.Z)(function*(Ie,be=!1){const Ue=Ie.app;nn(Ue);const Ge=Ce(Ue);let mt,ut=Ge.token;if(ut&&!Ee(ut)&&(Ge.token=void 0,ut=void 0),!ut){const nr=yield Ge.cachedTokenPromise;nr&&(Ee(nr)?ut=nr:yield gr(Ue,void 0))}if(!be&&ut&&Ee(ut))return{token:ut.token};let an,_n=!1;if(Ii()){Ge.exchangeTokenPromise||(Ge.exchangeTokenPromise=Ur(en(Ue,yield yn()),Ie.heartbeatServiceProvider).finally(()=>{Ge.exchangeTokenPromise=void 0}),_n=!0);const nr=yield Ge.exchangeTokenPromise;return yield gr(Ue,nr),Ge.token=nr,{token:nr.token}}try{Ge.exchangeTokenPromise||(Ge.exchangeTokenPromise=Ge.provider.getToken().finally(()=>{Ge.exchangeTokenPromise=void 0}),_n=!0),ut=yield Ce(Ue).exchangeTokenPromise}catch(nr){"appCheck/throttled"===nr.code?Kn.warn(nr.message):Kn.error(nr),mt=nr}return ut?mt?an=Ee(ut)?{token:ut.token,internalError:mt}:nt(mt):(an={token:ut.token},Ge.token=ut,yield gr(Ue,ut)):an=nt(mt),_n&&fe(Ue,an),an})).apply(this,arguments)}function Dn(Ie,be){const Ue=Ce(Ie),Ge=Ue.tokenObservers.filter(ut=>ut.next!==be);0===Ge.length&&Ue.tokenRefresher&&Ue.tokenRefresher.isRunning()&&Ue.tokenRefresher.stop(),Ue.tokenObservers=Ge}function ei(Ie){const{app:be}=Ie,Ue=Ce(be);let Ge=Ue.tokenRefresher;Ge||(Ge=function me(Ie){const{app:be}=Ie;return new $t((0,ft.Z)(function*(){let Ge;if(Ge=Ce(be).token?yield Pt(Ie,!0):yield Pt(Ie),Ge.error)throw Ge.error;if(Ge.internalError)throw Ge.internalError}),()=>!0,()=>{const Ue=Ce(be);if(Ue.token){let Ge=Ue.token.issuedAtTimeMillis+.5*(Ue.token.expireTimeMillis-Ue.token.issuedAtTimeMillis)+3e5;return Ge=Math.min(Ge,Ue.token.expireTimeMillis-3e5),Math.max(0,Ge-Date.now())}return 0},3e4,96e4)}(Ie),Ue.tokenRefresher=Ge),!Ge.isRunning()&&Ue.isTokenAutoRefreshEnabled&&Ge.start()}function fe(Ie,be){const Ue=Ce(Ie).tokenObservers;for(const Ge of Ue)try{"EXTERNAL"===Ge.type&&null!=be.error?Ge.error(be.error):Ge.next(be)}catch{}}function Ee(Ie){return Ie.expireTimeMillis-Date.now()>0}function nt(Ie){return{token:pt(Mt),error:Ie}}class Be{constructor(be,Ue){this.app=be,this.heartbeatServiceProvider=Ue}_delete(){const{tokenObservers:be}=Ce(this.app);for(const Ue of be)Dn(this.app,Ue.next);return Promise.resolve()}}const xn="app-check-internal";!function hr(){(0,st._registerComponent)(new rt.wA("app-check",Ie=>function Ft(Ie,be){return new Be(Ie,be)}(Ie.getProvider("app").getImmediate(),Ie.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ie,be,Ue)=>{Ie.getProvider(xn).initialize()})),(0,st._registerComponent)(new rt.wA(xn,Ie=>function on(Ie){return{getToken:be=>Pt(Ie,be),addTokenListener:be=>function Xt(Ie,be,Ue,Ge){const{app:ut}=Ie,mt=Ce(ut);if(mt.tokenObservers=[...mt.tokenObservers,{next:Ue,error:Ge,type:be}],mt.token&&Ee(mt.token)){const an=mt.token;Promise.resolve().then(()=>{Ue({token:an.token}),ei(Ie)}).catch(()=>{})}mt.cachedTokenPromise.then(()=>ei(Ie))}(Ie,"INTERNAL",be),removeTokenListener:be=>Dn(Ie.app,be)}}(Ie.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,st.registerVersion)("@firebase/app-check","0.6.4")}();class Mr{constructor(){return(0,A.vb)("app-check")}}typeof window<"u"&&window},1205:(qt,We,Y)=>{Y.d(We,{zQ:()=>Ke,ww:()=>Tt,rT:()=>ye,f7:()=>se,L6:()=>G,_Q:()=>Xe,lh:()=>Ce,Qv:()=>vt,nw:()=>ke});var A=Y(4650),y=Y(7579),U=Y(9646),Ae=Y(9751),De=Y(8996),xe=Y(6451),Le=Y(5363),Fe=Y(3900),Ve=Y(4004),ge=Y(6063);class pe extends y.x{constructor(Ot=1/0,dn=1/0,kt=ge.l){super(),this._bufferSize=Ot,this._windowTime=dn,this._timestampProvider=kt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=dn===1/0,this._bufferSize=Math.max(1,Ot),this._windowTime=Math.max(1,dn)}next(Ot){const{isStopped:dn,_buffer:kt,_infiniteTimeWindow:$t,_timestampProvider:Dt,_windowTime:Nt}=this;dn||(kt.push(Ot),!$t&&kt.push(Dt.now()+Nt)),this._trimBuffer(),super.next(Ot)}_subscribe(Ot){this._throwIfClosed(),this._trimBuffer();const dn=this._innerSubscribe(Ot),{_infiniteTimeWindow:kt,_buffer:$t}=this,Dt=$t.slice();for(let Nt=0;Nt<Dt.length&&!Ot.closed;Nt+=kt?1:2)Ot.next(Dt[Nt]);return this._checkFinalizedStatuses(Ot),dn}_trimBuffer(){const{_bufferSize:Ot,_timestampProvider:dn,_buffer:kt,_infiniteTimeWindow:$t}=this,Dt=($t?1:2)*Ot;if(Ot<1/0&&Dt<kt.length&&kt.splice(0,kt.length-Dt),!$t){const Nt=dn.now();let Cn=0;for(let zn=1;zn<kt.length&&kt[zn]<=Nt;zn+=2)Cn=zn;Cn&&kt.splice(0,Cn+1)}}}var Te=Y(3099);function yt(St,Ot,dn){let kt,$t=!1;return St&&"object"==typeof St?({bufferSize:kt=1/0,windowTime:Ot=1/0,refCount:$t=!1,scheduler:dn}=St):kt=St??1/0,(0,Te.B)({connector:()=>new pe(kt,Ot,dn),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:$t})}var ht=Y(590),At=Y(576);function Qt(St,Ot){return(0,At.m)(Ot)?(0,Fe.w)(()=>St,Ot):(0,Fe.w)(()=>St)}var qe=Y(9468),at=Y(9300),ot=Y(2122),Et=Y(2011),ft=Y(6895),st=Y(6217),rt=Y(9260);const vt=new A.OlP("angularfire2.auth.use-emulator"),G=new A.OlP("angularfire2.auth.settings"),Xe=new A.OlP("angularfire2.auth.tenant-id"),ye=new A.OlP("angularfire2.auth.langugage-code"),Ce=new A.OlP("angularfire2.auth.use-device-language"),se=new A.OlP("angularfire.auth.persistence"),ke=(St,Ot,dn,kt,$t,Dt,Nt,Cn)=>(0,Et.cc)(`${St.name}.auth`,"AngularFireAuth",St.name,()=>{const zn=Ot.runOutsideAngular(()=>St.auth());if(dn&&zn.useEmulator(...dn),kt&&(zn.tenantId=kt),zn.languageCode=$t,Dt&&zn.useDeviceLanguage(),Nt)for(const[nn,bn]of Object.entries(Nt))zn.settings[nn]=bn;return Cn&&zn.setPersistence(Cn),zn},[dn,kt,$t,Dt,Nt,Cn]);let Ke=(()=>{class St{constructor(dn,kt,$t,Dt,Nt,Cn,zn,nn,bn,Qr,Ur,pr){const Zn=new y.x,ki=(0,U.of)(void 0).pipe((0,Le.Q)(Nt.outsideAngular),(0,Fe.w)(()=>Dt.runOutsideAngular(()=>Promise.resolve().then(Y.bind(Y,4217)))),(0,Ve.U)(()=>(0,Et.on)(dn,Dt,kt)),(0,Ve.U)(en=>ke(en,Dt,Cn,nn,bn,Qr,zn,Ur)),yt({bufferSize:1,refCount:!1}));if((0,ft.PM)($t))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,U.of)(null);else{ki.pipe((0,ht.P)()).subscribe();const Xr=ki.pipe((0,Fe.w)(Tn=>Tn.getRedirectResult().then(br=>br,()=>null)),ot.iC,yt({bufferSize:1,refCount:!1})),Er=ki.pipe((0,Fe.w)(Tn=>new Ae.y(br=>({unsubscribe:Dt.runOutsideAngular(()=>Tn.onAuthStateChanged(Lt=>br.next(Lt),Lt=>br.error(Lt),()=>br.complete()))})))),ar=ki.pipe((0,Fe.w)(Tn=>new Ae.y(br=>({unsubscribe:Dt.runOutsideAngular(()=>Tn.onIdTokenChanged(Lt=>br.next(Lt),Lt=>br.error(Lt),()=>br.complete()))}))));this.authState=Xr.pipe(Qt(Er),(0,qe.R)(Nt.outsideAngular),(0,Le.Q)(Nt.insideAngular)),this.user=Xr.pipe(Qt(ar),(0,qe.R)(Nt.outsideAngular),(0,Le.Q)(Nt.insideAngular)),this.idToken=this.user.pipe((0,Fe.w)(Tn=>Tn?(0,De.D)(Tn.getIdToken()):(0,U.of)(null))),this.idTokenResult=this.user.pipe((0,Fe.w)(Tn=>Tn?(0,De.D)(Tn.getIdTokenResult()):(0,U.of)(null))),this.credential=(0,xe.T)(Xr,Zn,this.authState.pipe((0,at.h)(Tn=>!Tn))).pipe((0,Ve.U)(Tn=>Tn?.user?Tn:null),(0,qe.R)(Nt.outsideAngular),(0,Le.Q)(Nt.insideAngular))}return(0,Et.pX)(this,ki,Dt,{spy:{apply:(en,Xr,Er)=>{(en.startsWith("signIn")||en.startsWith("createUser"))&&Er.then(ar=>Zn.next(ar))}}})}}return St.\u0275fac=function(dn){return new(dn||St)(A.LFG(Et.Dh),A.LFG(Et.xv,8),A.LFG(A.Lbi),A.LFG(A.R0b),A.LFG(ot.HU),A.LFG(vt,8),A.LFG(G,8),A.LFG(Xe,8),A.LFG(ye,8),A.LFG(Ce,8),A.LFG(se,8),A.LFG(st.nm,8))},St.\u0275prov=A.Yz7({token:St,factory:St.\u0275fac,providedIn:"any"}),St})(),Tt=(()=>{class St{constructor(){rt.Z.registerVersion("angularfire",ot.q4.full,"auth-compat")}}return St.\u0275fac=function(dn){return new(dn||St)},St.\u0275mod=A.oAB({type:St}),St.\u0275inj=A.cJS({providers:[Ke]}),St})()},5197:(qt,We,Y)=>{Y.d(We,{KQ:()=>Qh,JS:()=>Xh});var A=Y(4650),y=Y(4986),U=Y(9751),Ae=Y(9646),De=Y(6451),xe=Y(4004),Le=Y(3099),Fe=Y(3900),Ve=Y(5026),ge=Y(1884),pe=Y(4482),Te=Y(5403),yt=Y(8421),ht=Y(4671),At=Y(5032),Qt=Y(7669),ot=Y(2122),Et=Y(2011),st=(Y(4217),Y(3942)),rt=Y(4859),Ct=Y(5861),vt=Y(9681),G=Y(2090),Xe=Y(1877);const ye="@firebase/database";let se="";function ke(h){se=h}class Ke{constructor(l){this.domStorage_=l,this.prefix_="firebase:"}set(l,c){null==c?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),(0,G.Wl)(c))}get(l){const c=this.domStorage_.getItem(this.prefixedName_(l));return null==c?null:(0,G.cI)(c)}remove(l){this.domStorage_.removeItem(this.prefixedName_(l))}prefixedName_(l){return this.prefix_+l}toString(){return this.domStorage_.toString()}}class Tt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(l,c){null==c?delete this.cache_[l]:this.cache_[l]=c}get(l){return(0,G.r3)(this.cache_,l)?this.cache_[l]:null}remove(l){delete this.cache_[l]}}const St=function(h){try{if(typeof window<"u"&&typeof window[h]<"u"){const l=window[h];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new Ke(l)}}catch{}return new Tt},Ot=St("localStorage"),dn=St("sessionStorage"),kt=new Xe.Yd("@firebase/database"),$t=function(){let h=1;return function(){return h++}}(),Dt=function(h){const l=(0,G.dS)(h),c=new G.gQ;c.update(l);const g=c.digest();return G.US.encodeByteArray(g)},Nt=function(...h){let l="";for(let c=0;c<h.length;c++){const g=h[c];Array.isArray(g)||g&&"object"==typeof g&&"number"==typeof g.length?l+=Nt.apply(null,g):l+="object"==typeof g?(0,G.Wl)(g):g,l+=" "}return l};let Cn=null,zn=!0;const nn=function(h,l){(0,G.hu)(!l||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(kt.logLevel=Xe.in.VERBOSE,Cn=kt.log.bind(kt),l&&dn.set("logging_enabled",!0)):"function"==typeof h?Cn=h:(Cn=null,dn.remove("logging_enabled"))},bn=function(...h){if(!0===zn&&(zn=!1,null===Cn&&!0===dn.get("logging_enabled")&&nn(!0)),Cn){const l=Nt.apply(null,h);Cn(l)}},Qr=function(h){return function(...l){bn(h,...l)}},Ur=function(...h){const l="FIREBASE INTERNAL ERROR: "+Nt(...h);kt.error(l)},pr=function(...h){const l=`FIREBASE FATAL ERROR: ${Nt(...h)}`;throw kt.error(l),new Error(l)},Zn=function(...h){const l="FIREBASE WARNING: "+Nt(...h);kt.warn(l)},en=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},Er="[MIN_NAME]",ar="[MAX_NAME]",Tn=function(h,l){if(h===l)return 0;if(h===Er||l===ar)return-1;if(l===Er||h===ar)return 1;{const c=Gr(h),g=Gr(l);return null!==c?null!==g?c-g==0?h.length-l.length:c-g:-1:null!==g?1:h<l?-1:1}},br=function(h,l){return h===l?0:h<l?-1:1},Lt=function(h,l){if(l&&h in l)return l[h];throw new Error("Missing required key ("+h+") in object: "+(0,G.Wl)(l))},Ai=function(h){if("object"!=typeof h||null===h)return(0,G.Wl)(h);const l=[];for(const g in h)l.push(g);l.sort();let c="{";for(let g=0;g<l.length;g++)0!==g&&(c+=","),c+=(0,G.Wl)(l[g]),c+=":",c+=Ai(h[l[g]]);return c+="}",c},$i=function(h,l){const c=h.length;if(c<=l)return[h];const g=[];for(let T=0;T<c;T+=l)g.push(h.substring(T,T+l>c?c:T+l));return g};function Un(h,l){for(const c in h)h.hasOwnProperty(c)&&l(c,h[c])}const Jr=function(h){(0,G.hu)(!en(h),"Invalid JSON number");const g=1023;let T,k,z,te,oe;0===h?(k=0,z=0,T=1/h==-1/0?1:0):(T=h<0,(h=Math.abs(h))>=Math.pow(2,1-g)?(te=Math.min(Math.floor(Math.log(h)/Math.LN2),g),k=te+g,z=Math.round(h*Math.pow(2,52-te)-Math.pow(2,52))):(k=0,z=Math.round(h/Math.pow(2,-1074))));const _e=[];for(oe=52;oe;oe-=1)_e.push(z%2?1:0),z=Math.floor(z/2);for(oe=11;oe;oe-=1)_e.push(k%2?1:0),k=Math.floor(k/2);_e.push(T?1:0),_e.reverse();const et=_e.join("");let it="";for(oe=0;oe<64;oe+=8){let wt=parseInt(et.substr(oe,8),2).toString(16);1===wt.length&&(wt="0"+wt),it+=wt}return it.toLowerCase()},An=new RegExp("^-?(0*)\\d{1,10}$"),Gr=function(h){if(An.test(h)){const l=Number(h);if(l>=-2147483648&&l<=2147483647)return l}return null},xr=function(h){try{h()}catch(l){setTimeout(()=>{throw Zn("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},Vr=function(h,l){const c=setTimeout(h,l);return"number"==typeof c&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class tr{constructor(l,c){this.appName_=l,this.appCheckProvider=c,this.appCheck=c?.getImmediate({optional:!0}),this.appCheck||c?.get().then(g=>this.appCheck=g)}getToken(l){return this.appCheck?this.appCheck.getToken(l):new Promise((c,g)=>{setTimeout(()=>{this.appCheck?this.getToken(l).then(c,g):c(null)},0)})}addTokenChangeListener(l){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(g=>g.addTokenListener(l))}notifyForInvalidToken(){Zn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Ii{constructor(l,c,g){this.appName_=l,this.firebaseOptions_=c,this.authProvider_=g,this.auth_=null,this.auth_=g.getImmediate({optional:!0}),this.auth_||g.onInit(T=>this.auth_=T)}getToken(l){return this.auth_?this.auth_.getToken(l).catch(c=>c&&"auth/token-not-initialized"===c.code?(bn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,g)=>{setTimeout(()=>{this.auth_?this.getToken(l).then(c,g):c(null)},0)})}addTokenChangeListener(l){this.auth_?this.auth_.addAuthTokenListener(l):this.authProvider_.get().then(c=>c.addAuthTokenListener(l))}removeTokenChangeListener(l){this.authProvider_.get().then(c=>c.removeAuthTokenListener(l))}notifyForInvalidToken(){let l='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';l+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zn(l)}}let yn=(()=>{class h{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const pn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,me="websocket",fe="long_polling";class Ee{constructor(l,c,g,T,k=!1,z="",te=!1,oe=!1){this.secure=c,this.namespace=g,this.webSocketOnly=T,this.nodeAdmin=k,this.persistenceKey=z,this.includeNamespaceInQueryParams=te,this.isUsingEmulator=oe,this._host=l.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ot.get("host:"+l)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&Ot.set("host:"+this._host,this.internalHost))}toString(){let l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Be(h,l,c){let g;if((0,G.hu)("string"==typeof l,"typeof type must == string"),(0,G.hu)("object"==typeof c,"typeof params must == object"),l===me)g=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(l!==fe)throw new Error("Unknown connection type: "+l);g=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function nt(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(c.ns=h.namespace);const T=[];return Un(c,(k,z)=>{T.push(k+"="+z)}),g+T.join("&")}class Ft{constructor(){this.counters_={}}incrementCounter(l,c=1){(0,G.r3)(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=c}get(){return(0,G.p$)(this.counters_)}}const on={},Wn={};function ve(h){const l=h.toString();return on[l]||(on[l]=new Ft),on[l]}class ae{constructor(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(l,c){this.closeAfterResponse=l,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(l,c){for(this.pendingResponses[l]=c;this.pendingResponses[this.currentResponseNum];){const g=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let T=0;T<g.length;++T)g[T]&&xr(()=>{this.onMessage_(g[T])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class kn{constructor(l,c,g,T,k,z,te){this.connId=l,this.repoInfo=c,this.applicationId=g,this.appCheckToken=T,this.authToken=k,this.transportSessionId=z,this.lastSessionId=te,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qr(l),this.stats_=ve(c),this.urlFn=oe=>(this.appCheckToken&&(oe.ac=this.appCheckToken),Be(c,fe,oe))}open(l,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new ae(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,G.Yr)()||"complete"===document.readyState)h();else{let l=!1;const c=function(){document.body?l||(l=!0,h()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vr((...k)=>{const[z,te,oe,_e,et]=k;if(this.incrementIncomingBytes_(k),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===z)this.id=te,this.password=oe;else{if("close"!==z)throw new Error("Unrecognized command received: "+z);te?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(te,()=>{this.onClosed_()})):this.onClosed_()}},(...k)=>{const[z,te]=k;this.incrementIncomingBytes_(k),this.myPacketOrderer.handleResponse(z,te)},()=>{this.onClosed_()},this.urlFn);const g={start:"t"};g.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(g.cb=this.scriptTagHolder.uniqueCallbackIdentifier),g.v="5",this.transportSessionId&&(g.s=this.transportSessionId),this.lastSessionId&&(g.ls=this.lastSessionId),this.applicationId&&(g.p=this.applicationId),this.appCheckToken&&(g.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&pn.test(location.hostname)&&(g.r="f");const T=this.urlFn(g);this.log_("Connecting via long-poll to "+T),this.scriptTagHolder.addTag(T,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){kn.forceAllow_=!0}static forceDisallow(){kn.forceDisallow_=!0}static isAvailable(){return!((0,G.Yr)()||!kn.forceAllow_&&(kn.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(l){const c=(0,G.Wl)(l);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const g=(0,G.h$)(c),T=$i(g,1840);for(let k=0;k<T.length;k++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,T.length,T[k]),this.curSegmentNum++}addDisconnectPingFrame(l,c){if((0,G.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const g={dframe:"t"};g.id=l,g.pw=c,this.myDisconnFrame.src=this.urlFn(g),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(l){const c=(0,G.Wl)(l).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class vr{constructor(l,c,g,T){if(this.onDisconnect=g,this.urlFn=T,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,G.Yr)())this.commandCB=l,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=$t(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=vr.createIFrame_();let k="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(k='<script>document.domain="'+document.domain+'";<\/script>');const z="<html><body>"+k+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(z),this.myIFrame.doc.close()}catch(te){bn("frame writing exception"),te.stack&&bn(te.stack),bn(te)}}}static createIFrame_(){const l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||bn("No IE domain setting required")}catch{const g=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+g+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const l=this.onDisconnect;l&&(this.onDisconnect=null,l())}startLongPoll(l,c){for(this.myID=l,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;let c=this.urlFn(l),g="",T=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+g.length<=1870;){const z=this.pendingSegs.shift();g=g+"&seg"+T+"="+z.seg+"&ts"+T+"="+z.ts+"&d"+T+"="+z.d,T++}return c+=g,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(l,c,g){this.pendingSegs.push({seg:l,ts:c,d:g}),this.alive&&this.newRequest_()}addLongPollTag_(l,c){this.outstandingRequests.add(c);const g=()=>{this.outstandingRequests.delete(c),this.newRequest_()},T=setTimeout(g,Math.floor(25e3));this.addTag(l,()=>{clearTimeout(T),g()})}addTag(l,c){(0,G.Yr)()?this.doNodeLongPoll(l,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const g=this.myIFrame.doc.createElement("script");g.type="text/javascript",g.async=!0,g.src=l,g.onload=g.onreadystatechange=function(){const T=g.readyState;(!T||"loaded"===T||"complete"===T)&&(g.onload=g.onreadystatechange=null,g.parentNode&&g.parentNode.removeChild(g),c())},g.onerror=()=>{bn("Long-poll script failed to load: "+l),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(g)}catch{}},Math.floor(1))}}let xn=null;typeof MozWebSocket<"u"?xn=MozWebSocket:typeof WebSocket<"u"&&(xn=WebSocket);let hr=(()=>{class h{constructor(c,g,T,k,z,te,oe){this.connId=c,this.applicationId=T,this.appCheckToken=k,this.authToken=z,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qr(this.connId),this.stats_=ve(g),this.connURL=h.connectionURL_(g,te,oe,k,T),this.nodeAdmin=g.nodeAdmin}static connectionURL_(c,g,T,k,z){const te={v:"5"};return!(0,G.Yr)()&&typeof location<"u"&&location.hostname&&pn.test(location.hostname)&&(te.r="f"),g&&(te.s=g),T&&(te.ls=T),k&&(te.ac=k),z&&(te.p=z),Be(c,me,te)}open(c,g){this.onDisconnect=g,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ot.set("previous_websocket_failure",!0);try{let T;if((0,G.Yr)()){T={headers:{"User-Agent":`Firebase/5/${se}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(T.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(T.headers["X-Firebase-AppCheck"]=this.appCheckToken);const z=process.env,te=0===this.connURL.indexOf("wss://")?z.HTTPS_PROXY||z.https_proxy:z.HTTP_PROXY||z.http_proxy;te&&(T.proxy={origin:te})}this.mySock=new xn(this.connURL,[],T)}catch(T){this.log_("Error instantiating WebSocket.");const k=T.message||T.data;return k&&this.log_(k),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=T=>{this.handleIncomingFrame(T)},this.mySock.onerror=T=>{this.log_("WebSocket error.  Closing connection.");const k=T.message||T.data;k&&this.log_(k),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let c=!1;if(typeof navigator<"u"&&navigator.userAgent){const T=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);T&&T.length>1&&parseFloat(T[1])<4.4&&(c=!0)}return!c&&null!==xn&&!h.forceDisallow_}static previouslyFailed(){return Ot.isInMemoryStorage||!0===Ot.get("previous_websocket_failure")}markConnectionHealthy(){Ot.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const g=this.frames.join("");this.frames=null;const T=(0,G.cI)(g);this.onMessage(T)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,G.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const g=Number(c);if(!isNaN(g))return this.handleNewFrameCount_(g),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const g=c.data;if(this.bytesReceived+=g.length,this.stats_.incrementCounter("bytes_received",g.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(g);else{const T=this.extractFrameCount_(g);null!==T&&this.appendFrame_(T)}}send(c){this.resetKeepAlive();const g=(0,G.Wl)(c);this.bytesSent+=g.length,this.stats_.incrementCounter("bytes_sent",g.length);const T=$i(g,16384);T.length>1&&this.sendString_(String(T.length));for(let k=0;k<T.length;k++)this.sendString_(T[k])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(g){this.log_("Exception thrown from WebSocket.send():",g.message||g.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),Tr=(()=>{class h{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[kn,hr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const g=hr&&hr.isAvailable();let T=g&&!hr.previouslyFailed();if(c.webSocketOnly&&(g||Zn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),T=!0),T)this.transports_=[hr];else{const k=this.transports_=[];for(const z of h.ALL_TRANSPORTS)z&&z.isAvailable()&&k.push(z);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class ts{constructor(l,c,g,T,k,z,te,oe,_e,et){this.id=l,this.repoInfo_=c,this.applicationId_=g,this.appCheckToken_=T,this.authToken_=k,this.onMessage_=z,this.onReady_=te,this.onDisconnect_=oe,this.onKill_=_e,this.lastSessionId=et,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qr("c:"+this.id+":"),this.transportManager_=new Tr(c),this.log_("Connection created"),this.start_()}start_(){const l=this.transportManager_.initialTransport();this.conn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),g=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,g)},Math.floor(0));const T=l.healthyTimeout||0;T>0&&(this.healthyTimeout_=Vr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(T)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(l){return c=>{l===this.conn_?this.onConnectionLost_(c):l===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(l){return c=>{2!==this.state_&&(l===this.rx_?this.onPrimaryMessageReceived_(c):l===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(l){this.sendData_({t:"d",d:l})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(l){if("t"in l){const c=l.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(l){const c=Lt("t",l),g=Lt("d",l);if("c"===c)this.onSecondaryControl_(g);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(g)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(l){const c=Lt("t",l),g=Lt("d",l);"c"===c?this.onControl_(g):"d"===c&&this.onDataMessage_(g)}onDataMessage_(l){this.onPrimaryResponse_(),this.onMessage_(l)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(l){const c=Lt("t",l);if("d"in l){const g=l.d;if("h"===c){const T=Object.assign({},g);this.repoInfo_.isUsingEmulator&&(T.h=this.repoInfo_.host),this.onHandshake_(T)}else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let T=0;T<this.pendingDataMessages.length;++T)this.onDataMessage_(this.pendingDataMessages[T]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(g):"r"===c?this.onReset_(g):"e"===c?Ur("Server Error: "+g):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ur("Unknown control packet command: "+c)}}onHandshake_(l){const c=l.ts,g=l.v,T=l.h;this.sessionId=l.s,this.repoInfo_.host=T,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==g&&Zn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)}startUpgrade_(l){this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),g=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,g),Vr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.host=l,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(l,c){this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()}onConnectionLost_(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ot.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class fs{put(l,c,g,T){}merge(l,c,g,T){}refreshAuthToken(l){}refreshAppCheckToken(l){}onDisconnectPut(l,c,g){}onDisconnectMerge(l,c,g){}onDisconnectCancel(l,c){}reportStats(l){}}class Ss{constructor(l){this.allowedEvents_=l,this.listeners_={},(0,G.hu)(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}trigger(l,...c){if(Array.isArray(this.listeners_[l])){const g=[...this.listeners_[l]];for(let T=0;T<g.length;T++)g[T].callback.apply(g[T].context,c)}}on(l,c,g){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:c,context:g});const T=this.getInitialEvent(l);T&&c.apply(g,T)}off(l,c,g){this.validateEventType_(l);const T=this.listeners_[l]||[];for(let k=0;k<T.length;k++)if(T[k].callback===c&&(!g||g===T[k].context))return void T.splice(k,1)}validateEventType_(l){(0,G.hu)(this.allowedEvents_.find(c=>c===l),"Unknown event: "+l)}}class Ie extends Ss{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,G.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ie}getInitialEvent(l){return(0,G.hu)("online"===l,"Unknown event type: "+l),[this.online_]}currentlyOnline(){return this.online_}}class Ge{constructor(l,c){if(void 0===c){this.pieces_=l.split("/");let g=0;for(let T=0;T<this.pieces_.length;T++)this.pieces_[T].length>0&&(this.pieces_[g]=this.pieces_[T],g++);this.pieces_.length=g,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=c}toString(){let l="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(l+="/"+this.pieces_[c]);return l||"/"}}function ut(){return new Ge("")}function mt(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function _n(h){return h.pieces_.length-h.pieceNum_}function an(h){let l=h.pieceNum_;return l<h.pieces_.length&&l++,new Ge(h.pieces_,l)}function nr(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function Ci(h,l=0){return h.pieces_.slice(h.pieceNum_+l)}function Fi(h){if(h.pieceNum_>=h.pieces_.length)return null;const l=[];for(let c=h.pieceNum_;c<h.pieces_.length-1;c++)l.push(h.pieces_[c]);return new Ge(l,0)}function Fn(h,l){const c=[];for(let g=h.pieceNum_;g<h.pieces_.length;g++)c.push(h.pieces_[g]);if(l instanceof Ge)for(let g=l.pieceNum_;g<l.pieces_.length;g++)c.push(l.pieces_[g]);else{const g=l.split("/");for(let T=0;T<g.length;T++)g[T].length>0&&c.push(g[T])}return new Ge(c,0)}function Bn(h){return h.pieceNum_>=h.pieces_.length}function Zr(h,l){const c=mt(h),g=mt(l);if(null===c)return l;if(c===g)return Zr(an(h),an(l));throw new Error("INTERNAL ERROR: innerPath ("+l+") is not within outerPath ("+h+")")}function au(h,l){const c=Ci(h,0),g=Ci(l,0);for(let T=0;T<c.length&&T<g.length;T++){const k=Tn(c[T],g[T]);if(0!==k)return k}return c.length===g.length?0:c.length<g.length?-1:1}function Ha(h,l){if(_n(h)!==_n(l))return!1;for(let c=h.pieceNum_,g=l.pieceNum_;c<=h.pieces_.length;c++,g++)if(h.pieces_[c]!==l.pieces_[g])return!1;return!0}function Yi(h,l){let c=h.pieceNum_,g=l.pieceNum_;if(_n(h)>_n(l))return!1;for(;c<h.pieces_.length;){if(h.pieces_[c]!==l.pieces_[g])return!1;++c,++g}return!0}class hi{constructor(l,c){this.errorPrefix_=c,this.parts_=Ci(l,0),this.byteLength_=Math.max(1,this.parts_.length);for(let g=0;g<this.parts_.length;g++)this.byteLength_+=(0,G.ug)(this.parts_[g]);uo(this)}}function uo(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Bs(h))}function Bs(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class ba extends Ss{constructor(){let l,c;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(c="visibilitychange",l="hidden"):typeof document.mozHidden<"u"?(c="mozvisibilitychange",l="mozHidden"):typeof document.msHidden<"u"?(c="msvisibilitychange",l="msHidden"):typeof document.webkitHidden<"u"&&(c="webkitvisibilitychange",l="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const g=!document[l];g!==this.visible_&&(this.visible_=g,this.trigger("visible",g))},!1)}static getInstance(){return new ba}getInitialEvent(l){return(0,G.hu)("visible"===l,"Unknown event type: "+l),[this.visible_]}}const lo=1e3;let Ho,si=(()=>{class h extends fs{constructor(c,g,T,k,z,te,oe,_e){if(super(),this.repoInfo_=c,this.applicationId_=g,this.onDataUpdate_=T,this.onConnectStatus_=k,this.onServerInfoUpdate_=z,this.authTokenProvider_=te,this.appCheckTokenProvider_=oe,this.authOverride_=_e,this.id=h.nextPersistentConnectionId_++,this.log_=Qr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=lo,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_e&&!(0,G.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ba.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&Ie.getInstance().on("online",this.onOnline_,this)}sendRequest(c,g,T){const k=++this.requestNumber_,z={r:k,a:c,b:g};this.log_((0,G.Wl)(z)),(0,G.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(z),T&&(this.requestCBHash_[k]=T)}get(c){this.initConnection_();const g=new G.BH,k={action:"g",request:{p:c._path.toString(),q:c._queryObject},onComplete:te=>{const oe=te.d;"ok"===te.s?g.resolve(oe):g.reject(oe)}};return this.outstandingGets_.push(k),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),g.promise}listen(c,g,T,k){this.initConnection_();const z=c._queryIdentifier,te=c._path.toString();this.log_("Listen called for "+te+" "+z),this.listens.has(te)||this.listens.set(te,new Map),(0,G.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,G.hu)(!this.listens.get(te).has(z),"listen() called twice for same path/queryId.");const oe={onComplete:k,hashFn:g,query:c,tag:T};this.listens.get(te).set(z,oe),this.connected_&&this.sendListen_(oe)}sendGet_(c){const g=this.outstandingGets_[c];this.sendRequest("g",g.request,T=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),g.onComplete&&g.onComplete(T)})}sendListen_(c){const g=c.query,T=g._path.toString(),k=g._queryIdentifier;this.log_("Listen on "+T+" for "+k);const z={p:T};c.tag&&(z.q=g._queryObject,z.t=c.tag),z.h=c.hashFn(),this.sendRequest("q",z,oe=>{const _e=oe.d,et=oe.s;h.warnOnListenWarnings_(_e,g),(this.listens.get(T)&&this.listens.get(T).get(k))===c&&(this.log_("listen response",oe),"ok"!==et&&this.removeListen_(T,k),c.onComplete&&c.onComplete(et,_e))})}static warnOnListenWarnings_(c,g){if(c&&"object"==typeof c&&(0,G.r3)(c,"w")){const T=(0,G.DV)(c,"w");if(Array.isArray(T)&&~T.indexOf("no_index")){const k='".indexOn": "'+g._queryParams.getIndex().toString()+'"',z=g._path.toString();Zn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${k} at ${z} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,G.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,g=(0,G.w9)(c)?"auth":"gauth",T={cred:c};null===this.authOverride_?T.noauth=!0:"object"==typeof this.authOverride_&&(T.authvar=this.authOverride_),this.sendRequest(g,T,k=>{const z=k.s,te=k.d||"error";this.authToken_===c&&("ok"===z?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(z,te))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const g=c.s,T=c.d||"error";"ok"===g?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(g,T)})}unlisten(c,g){const T=c._path.toString(),k=c._queryIdentifier;this.log_("Unlisten called for "+T+" "+k),(0,G.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(T,k)&&this.connected_&&this.sendUnlisten_(T,k,c._queryObject,g)}sendUnlisten_(c,g,T,k){this.log_("Unlisten on "+c+" for "+g);const z={p:c};k&&(z.q=T,z.t=k),this.sendRequest("n",z)}onDisconnectPut(c,g,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,g,T):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:g,onComplete:T})}onDisconnectMerge(c,g,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,g,T):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:g,onComplete:T})}onDisconnectCancel(c,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,g):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:g})}sendOnDisconnect_(c,g,T,k){const z={p:g,d:T};this.log_("onDisconnect "+c,z),this.sendRequest(c,z,te=>{k&&setTimeout(()=>{k(te.s,te.d)},Math.floor(0))})}put(c,g,T,k){this.putInternal("p",c,g,T,k)}merge(c,g,T,k){this.putInternal("m",c,g,T,k)}putInternal(c,g,T,k,z){this.initConnection_();const te={p:g,d:T};void 0!==z&&(te.h=z),this.outstandingPuts_.push({action:c,request:te,onComplete:k}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+g)}sendPut_(c){const g=this.outstandingPuts_[c].action,T=this.outstandingPuts_[c].request,k=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(g,T,z=>{this.log_(g+" response",z),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),k&&k(z.s,z.d)})}reportStats(c){if(this.connected_){const g={c};this.log_("reportStats",g),this.sendRequest("s",g,T=>{"ok"!==T.s&&this.log_("reportStats","Error sending stats: "+T.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,G.Wl)(c));const g=c.r,T=this.requestCBHash_[g];T&&(delete this.requestCBHash_[g],T(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,g){this.log_("handleServerMessage",c,g),"d"===c?this.onDataUpdate_(g.p,g.d,!1,g.t):"m"===c?this.onDataUpdate_(g.p,g.d,!0,g.t):"c"===c?this.onListenRevoked_(g.p,g.q):"ac"===c?this.onAuthRevoked_(g.s,g.d):"apc"===c?this.onAppCheckRevoked_(g.s,g.d):"sd"===c?this.onSecurityDebugPacket_(g):Ur("Unrecognized action received from server: "+(0,G.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,g){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=g,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,G.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lo,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=lo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=lo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let g=Math.max(0,this.reconnectDelay_-c);g=Math.random()*g,this.log_("Trying to reconnect in "+g+"ms"),this.scheduleConnect_(g),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,Ct.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const g=c.onDataMessage_.bind(c),T=c.onReady_.bind(c),k=c.onRealtimeDisconnect_.bind(c),z=c.id+":"+h.nextConnectionId_++,te=c.lastSessionId;let oe=!1,_e=null;const et=function(){_e?_e.close():(oe=!0,k())};c.realtime_={close:et,sendRequest:function(Wt){(0,G.hu)(_e,"sendRequest call when we're not connected not allowed."),_e.sendRequest(Wt)}};const wt=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[Wt,Nn]=yield Promise.all([c.authTokenProvider_.getToken(wt),c.appCheckTokenProvider_.getToken(wt)]);oe?bn("getToken() completed but was canceled"):(bn("getToken() completed. Creating connection."),c.authToken_=Wt&&Wt.accessToken,c.appCheckToken_=Nn&&Nn.token,_e=new ts(z,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,g,T,k,jn=>{Zn(jn+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},te))}catch(Wt){c.log_("Failed to get token: "+Wt),oe||(c.repoInfo_.nodeAdmin&&Zn(Wt),et())}}})()}interrupt(c){bn("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){bn("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,G.xb)(this.interruptReasons_)&&(this.reconnectDelay_=lo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const g=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:g})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const g=this.outstandingPuts_[c];g&&"h"in g.request&&g.queued&&(g.onComplete&&g.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,g){let T;T=g?g.map(z=>Ai(z)).join("$"):"default";const k=this.removeListen_(c,T);k&&k.onComplete&&k.onComplete("permission_denied")}removeListen_(c,g){const T=new Ge(c).toString();let k;if(this.listens.has(T)){const z=this.listens.get(T);k=z.get(g),z.delete(g),0===z.size&&this.listens.delete(T)}else k=void 0;return k}onAuthRevoked_(c,g){bn("Auth token revoked: "+c+"/"+g),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,g){bn("App check token revoked: "+c+"/"+g),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const g of c.values())this.sendListen_(g);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let g="js";(0,G.Yr)()&&(g=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+g+"."+se.replace(/\./g,"-")]=1,(0,G.uI)()?c["framework.cordova"]=1:(0,G.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=Ie.getInstance().currentlyOnline();return(0,G.xb)(this.interruptReasons_)&&c}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class $n{constructor(l,c){this.name=l,this.node=c}static Wrap(l,c){return new $n(l,c)}}class uu{getCompare(){return this.compare.bind(this)}indexedValueChanged(l,c){const g=new $n(Er,l),T=new $n(Er,c);return 0!==this.compare(g,T)}minPost(){return $n.MIN}}class ia extends uu{static get __EMPTY_NODE(){return Ho}static set __EMPTY_NODE(l){Ho=l}compare(l,c){return Tn(l.name,c.name)}isDefinedOn(l){throw(0,G.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(l,c){return!1}minPost(){return $n.MIN}maxPost(){return new $n(ar,Ho)}makePost(l,c){return(0,G.hu)("string"==typeof l,"KeyIndex indexValue must always be a string."),new $n(l,Ho)}toString(){return".key"}}const ns=new ia;class js{constructor(l,c,g,T,k=null){this.isReverse_=T,this.resultGenerator_=k,this.nodeStack_=[];let z=1;for(;!l.isEmpty();)if(z=c?g(l.key,c):1,T&&(z*=-1),z<0)l=this.isReverse_?l.left:l.right;else{if(0===z){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,l=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}}}let Ao,Gi=(()=>{class h{constructor(c,g,T,k,z){this.key=c,this.value=g,this.color=T??h.RED,this.left=k??bi.EMPTY_NODE,this.right=z??bi.EMPTY_NODE}copy(c,g,T,k,z){return new h(c??this.key,g??this.value,T??this.color,k??this.left,z??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,g,T){let k=this;const z=T(c,k.key);return k=z<0?k.copy(null,null,null,k.left.insert(c,g,T),null):0===z?k.copy(null,g,null,null,null):k.copy(null,null,null,null,k.right.insert(c,g,T)),k.fixUp_()}removeMin_(){if(this.left.isEmpty())return bi.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,g){let T,k;if(T=this,g(c,T.key)<0)!T.left.isEmpty()&&!T.left.isRed_()&&!T.left.left.isRed_()&&(T=T.moveRedLeft_()),T=T.copy(null,null,null,T.left.remove(c,g),null);else{if(T.left.isRed_()&&(T=T.rotateRight_()),!T.right.isEmpty()&&!T.right.isRed_()&&!T.right.left.isRed_()&&(T=T.moveRedRight_()),0===g(c,T.key)){if(T.right.isEmpty())return bi.EMPTY_NODE;k=T.right.min_(),T=T.copy(k.key,k.value,null,null,T.right.removeMin_())}T=T.copy(null,null,null,null,T.right.remove(c,g))}return T.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),g=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,g)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class bi{constructor(l,c=bi.EMPTY_NODE){this.comparator_=l,this.root_=c}insert(l,c){return new bi(this.comparator_,this.root_.insert(l,c,this.comparator_).copy(null,null,Gi.BLACK,null,null))}remove(l){return new bi(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,Gi.BLACK,null,null))}get(l){let c,g=this.root_;for(;!g.isEmpty();){if(c=this.comparator_(l,g.key),0===c)return g.value;c<0?g=g.left:c>0&&(g=g.right)}return null}getPredecessorKey(l){let c,g=this.root_,T=null;for(;!g.isEmpty();){if(c=this.comparator_(l,g.key),0===c){if(g.left.isEmpty())return T?T.key:null;for(g=g.left;!g.right.isEmpty();)g=g.right;return g.key}c<0?g=g.left:c>0&&(T=g,g=g.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(l){return this.root_.inorderTraversal(l)}reverseTraversal(l){return this.root_.reverseTraversal(l)}getIterator(l){return new js(this.root_,null,this.comparator_,!1,l)}getIteratorFrom(l,c){return new js(this.root_,l,this.comparator_,!1,c)}getReverseIteratorFrom(l,c){return new js(this.root_,l,this.comparator_,!0,c)}getReverseIterator(l){return new js(this.root_,null,this.comparator_,!0,l)}}function ho(h,l){return Tn(h.name,l.name)}function fo(h,l){return Tn(h,l)}bi.EMPTY_NODE=new class So{copy(l,c,g,T,k){return this}insert(l,c,g){return new Gi(l,c,null)}remove(l,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const $s=function(h){return"number"==typeof h?"number:"+Jr(h):"string:"+h},xo=function(h){if(h.isLeafNode()){const l=h.val();(0,G.hu)("string"==typeof l||"number"==typeof l||"object"==typeof l&&(0,G.r3)(l,".sv"),"Priority must be a string or number.")}else(0,G.hu)(h===Ao||h.isEmpty(),"priority of unexpected type.");(0,G.hu)(h===Ao||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let rs,po,Mi,Dr=(()=>{class h{constructor(c,g=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=g,this.lazyHash_=null,(0,G.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),xo(this.priorityNode_)}static set __childrenNodeConstructor(c){rs=c}static get __childrenNodeConstructor(){return rs}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new h(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return Bn(c)?this:".priority"===mt(c)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,g){return null}updateImmediateChild(c,g){return".priority"===c?this.updatePriority(g):g.isEmpty()&&".priority"!==c?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,g).updatePriority(this.priorityNode_)}updateChild(c,g){const T=mt(c);return null===T?g:g.isEmpty()&&".priority"!==T?this:((0,G.hu)(".priority"!==T||1===_n(c),".priority must be the last token in a path"),this.updateImmediateChild(T,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(an(c),g)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,g){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+$s(this.priorityNode_.val())+":");const g=typeof this.value_;c+=g+":",c+="number"===g?Jr(this.value_):this.value_,this.lazyHash_=Dt(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===h.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof h.__childrenNodeConstructor?-1:((0,G.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const g=typeof c.value_,T=typeof this.value_,k=h.VALUE_TYPE_ORDER.indexOf(g),z=h.VALUE_TYPE_ORDER.indexOf(T);return(0,G.hu)(k>=0,"Unknown leaf type: "+g),(0,G.hu)(z>=0,"Unknown leaf type: "+T),k===z?"object"===T?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:z-k}withIndex(){return this}isIndexed(){return!0}equals(c){return c===this||!!c.isLeafNode()&&(this.value_===c.value_&&this.priorityNode_.equals(c.priorityNode_))}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const Sr=new class Li extends uu{compare(l,c){const g=l.node.getPriority(),T=c.node.getPriority(),k=g.compareTo(T);return 0===k?Tn(l.name,c.name):k}isDefinedOn(l){return!l.getPriority().isEmpty()}indexedValueChanged(l,c){return!l.getPriority().equals(c.getPriority())}minPost(){return $n.MIN}maxPost(){return new $n(ar,new Dr("[PRIORITY-POST]",Mi))}makePost(l,c){const g=po(l);return new $n(c,new Dr("[PRIORITY-POST]",g))}toString(){return".priority"}},cu=Math.log(2);class oa{constructor(l){this.count=parseInt(Math.log(l+1)/cu,10),this.current_=this.count-1;const T=(k=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=l+1&T}nextBitIsOne(){const l=!(this.bits_&1<<this.current_);return this.current_--,l}}const Ri=function(h,l,c,g){h.sort(l);const T=function(oe,_e){const et=_e-oe;let it,wt;if(0===et)return null;if(1===et)return it=h[oe],wt=c?c(it):it,new Gi(wt,it.node,Gi.BLACK,null,null);{const Wt=parseInt(et/2,10)+oe,Nn=T(oe,Wt),jn=T(Wt+1,_e);return it=h[Wt],wt=c?c(it):it,new Gi(wt,it.node,Gi.BLACK,Nn,jn)}},te=function(oe){let _e=null,et=null,it=h.length;const wt=function(Nn,jn){const Qs=it-Nn,Ji=it;it-=Nn;const jr=T(Qs+1,Ji),Gc=h[Qs],zc=c?c(Gc):Gc;Wt(new Gi(zc,Gc.node,jn,null,jr))},Wt=function(Nn){_e?(_e.left=Nn,_e=Nn):(et=Nn,_e=Nn)};for(let Nn=0;Nn<oe.count;++Nn){const jn=oe.nextBitIsOne(),Qs=Math.pow(2,oe.count-(Nn+1));jn?wt(Qs,Gi.BLACK):(wt(Qs,Gi.BLACK),wt(Qs,Gi.RED))}return et}(new oa(h.length));return new bi(g||l,te)};let Mo;const fi={};class gs{constructor(l,c){this.indexes_=l,this.indexSet_=c}static get Default(){return(0,G.hu)(fi&&Sr,"ChildrenNode.ts has not been loaded"),Mo=Mo||new gs({".priority":fi},{".priority":Sr}),Mo}get(l){const c=(0,G.DV)(this.indexes_,l);if(!c)throw new Error("No index defined for "+l);return c instanceof bi?c:null}hasIndex(l){return(0,G.r3)(this.indexSet_,l.toString())}addIndex(l,c){(0,G.hu)(l!==ns,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const g=[];let T=!1;const k=c.getIterator($n.Wrap);let te,z=k.getNext();for(;z;)T=T||l.isDefinedOn(z.node),g.push(z),z=k.getNext();te=T?Ri(g,l.getCompare()):fi;const oe=l.toString(),_e=Object.assign({},this.indexSet_);_e[oe]=l;const et=Object.assign({},this.indexes_);return et[oe]=te,new gs(et,_e)}addToIndexes(l,c){const g=(0,G.UI)(this.indexes_,(T,k)=>{const z=(0,G.DV)(this.indexSet_,k);if((0,G.hu)(z,"Missing index implementation for "+k),T===fi){if(z.isDefinedOn(l.node)){const te=[],oe=c.getIterator($n.Wrap);let _e=oe.getNext();for(;_e;)_e.name!==l.name&&te.push(_e),_e=oe.getNext();return te.push(l),Ri(te,z.getCompare())}return fi}{const te=c.get(l.name);let oe=T;return te&&(oe=oe.remove(new $n(l.name,te))),oe.insert(l,l.node)}});return new gs(g,this.indexSet_)}removeFromIndexes(l,c){const g=(0,G.UI)(this.indexes_,T=>{if(T===fi)return T;{const k=c.get(l.name);return k?T.remove(new $n(l.name,k)):T}});return new gs(g,this.indexSet_)}}let yi,On=(()=>{class h{constructor(c,g,T){this.children_=c,this.priorityNode_=g,this.indexMap_=T,this.lazyHash_=null,this.priorityNode_&&xo(this.priorityNode_),this.children_.isEmpty()&&(0,G.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yi||(yi=new h(new bi(fo),null,gs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yi}updatePriority(c){return this.children_.isEmpty()?this:new h(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const g=this.children_.get(c);return null===g?yi:g}}getChild(c){const g=mt(c);return null===g?this:this.getImmediateChild(g).getChild(an(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,g){if((0,G.hu)(g,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(g);{const T=new $n(c,g);let k,z;g.isEmpty()?(k=this.children_.remove(c),z=this.indexMap_.removeFromIndexes(T,this.children_)):(k=this.children_.insert(c,g),z=this.indexMap_.addToIndexes(T,this.children_));const te=k.isEmpty()?yi:this.priorityNode_;return new h(k,te,z)}}updateChild(c,g){const T=mt(c);if(null===T)return g;{(0,G.hu)(".priority"!==mt(c)||1===_n(c),".priority must be the last token in a path");const k=this.getImmediateChild(T).updateChild(an(c),g);return this.updateImmediateChild(T,k)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const g={};let T=0,k=0,z=!0;if(this.forEachChild(Sr,(te,oe)=>{g[te]=oe.val(c),T++,z&&h.INTEGER_REGEXP_.test(te)?k=Math.max(k,Number(te)):z=!1}),!c&&z&&k<2*T){const te=[];for(const oe in g)te[oe]=g[oe];return te}return c&&!this.getPriority().isEmpty()&&(g[".priority"]=this.getPriority().val()),g}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+$s(this.getPriority().val())+":"),this.forEachChild(Sr,(g,T)=>{const k=T.hash();""!==k&&(c+=":"+g+":"+k)}),this.lazyHash_=""===c?"":Dt(c)}return this.lazyHash_}getPredecessorChildName(c,g,T){const k=this.resolveIndex_(T);if(k){const z=k.getPredecessorKey(new $n(c,g));return z?z.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const g=this.resolveIndex_(c);if(g){const T=g.minKey();return T&&T.name}return this.children_.minKey()}getFirstChild(c){const g=this.getFirstChildName(c);return g?new $n(g,this.children_.get(g)):null}getLastChildName(c){const g=this.resolveIndex_(c);if(g){const T=g.maxKey();return T&&T.name}return this.children_.maxKey()}getLastChild(c){const g=this.getLastChildName(c);return g?new $n(g,this.children_.get(g)):null}forEachChild(c,g){const T=this.resolveIndex_(c);return T?T.inorderTraversal(k=>g(k.name,k.node)):this.children_.inorderTraversal(g)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,g){const T=this.resolveIndex_(g);if(T)return T.getIteratorFrom(c,k=>k);{const k=this.children_.getIteratorFrom(c.name,$n.Wrap);let z=k.peek();for(;null!=z&&g.compare(z,c)<0;)k.getNext(),z=k.peek();return k}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,g){const T=this.resolveIndex_(g);if(T)return T.getReverseIteratorFrom(c,k=>k);{const k=this.children_.getReverseIteratorFrom(c.name,$n.Wrap);let z=k.peek();for(;null!=z&&g.compare(z,c)>0;)k.getNext(),z=k.peek();return k}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===gn?-1:0}withIndex(c){if(c===ns||this.indexMap_.hasIndex(c))return this;{const g=this.indexMap_.addIndex(c,this.children_);return new h(this.children_,this.priorityNode_,g)}}isIndexed(c){return c===ns||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const g=c;if(this.getPriority().equals(g.getPriority())){if(this.children_.count()===g.children_.count()){const T=this.getIterator(Sr),k=g.getIterator(Sr);let z=T.getNext(),te=k.getNext();for(;z&&te;){if(z.name!==te.name||!z.node.equals(te.node))return!1;z=T.getNext(),te=k.getNext()}return null===z&&null===te}return!1}return!1}}resolveIndex_(c){return c===ns?null:this.indexMap_.get(c.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const gn=new class Da extends On{constructor(){super(new bi(fo),On.EMPTY_NODE,gs.Default)}compareTo(l){return l===this?0:1}equals(l){return l===this}getPriority(){return this}getImmediateChild(l){return On.EMPTY_NODE}isEmpty(){return!1}};function ti(h,l=null){if(null===h)return On.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(l=h[".priority"]),(0,G.hu)(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new Dr(h,ti(l));if(h instanceof Array){let c=On.EMPTY_NODE;return Un(h,(g,T)=>{if((0,G.r3)(h,g)&&"."!==g.substring(0,1)){const k=ti(T);(k.isLeafNode()||!k.isEmpty())&&(c=c.updateImmediateChild(g,k))}}),c.updatePriority(ti(l))}{const c=[];let g=!1;if(Un(h,(z,te)=>{if("."!==z.substring(0,1)){const oe=ti(te);oe.isEmpty()||(g=g||!oe.getPriority().isEmpty(),c.push(new $n(z,oe)))}}),0===c.length)return On.EMPTY_NODE;const k=Ri(c,ho,z=>z.name,fo);if(g){const z=Ri(c,Sr.getCompare());return new On(k,ti(l),new gs({".priority":z},{".priority":Sr}))}return new On(k,ti(l),gs.Default)}}Object.defineProperties($n,{MIN:{value:new $n(Er,On.EMPTY_NODE)},MAX:{value:new $n(ar,gn)}}),ia.__EMPTY_NODE=On.EMPTY_NODE,Dr.__childrenNodeConstructor=On,function lu(h){Ao=h}(gn),function sa(h){Mi=h}(gn),function Iu(h){po=h}(ti);class aa extends uu{constructor(l){super(),this.indexPath_=l,(0,G.hu)(!Bn(l)&&".priority"!==mt(l),"Can't create PathIndex with empty path or .priority key")}extractChild(l){return l.getChild(this.indexPath_)}isDefinedOn(l){return!l.getChild(this.indexPath_).isEmpty()}compare(l,c){const g=this.extractChild(l.node),T=this.extractChild(c.node),k=g.compareTo(T);return 0===k?Tn(l.name,c.name):k}makePost(l,c){const g=ti(l),T=On.EMPTY_NODE.updateChild(this.indexPath_,g);return new $n(c,T)}maxPost(){const l=On.EMPTY_NODE.updateChild(this.indexPath_,gn);return new $n(ar,l)}toString(){return Ci(this.indexPath_,0).join("/")}}const go=new class zo extends uu{compare(l,c){const g=l.node.compareTo(c.node);return 0===g?Tn(l.name,c.name):g}isDefinedOn(l){return!0}indexedValueChanged(l,c){return!l.equals(c)}minPost(){return $n.MIN}maxPost(){return $n.MAX}makePost(l,c){const g=ti(l);return new $n(c,g)}toString(){return".value"}};function za(h){return{type:"value",snapshotNode:h}}function ua(h,l){return{type:"child_added",snapshotNode:l,childName:h}}function ms(h,l){return{type:"child_removed",snapshotNode:l,childName:h}}function Je(h,l,c){return{type:"child_changed",snapshotNode:l,childName:h,oldSnap:c}}class Sa{constructor(l){this.index_=l}updateChild(l,c,g,T,k,z){(0,G.hu)(l.isIndexed(this.index_),"A node must be indexed if only a child is updated");const te=l.getImmediateChild(c);return te.getChild(T).equals(g.getChild(T))&&te.isEmpty()===g.isEmpty()||(null!=z&&(g.isEmpty()?l.hasChild(c)?z.trackChildChange(ms(c,te)):(0,G.hu)(l.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):te.isEmpty()?z.trackChildChange(ua(c,g)):z.trackChildChange(Je(c,g,te))),l.isLeafNode()&&g.isEmpty())?l:l.updateImmediateChild(c,g).withIndex(this.index_)}updateFullNode(l,c,g){return null!=g&&(l.isLeafNode()||l.forEachChild(Sr,(T,k)=>{c.hasChild(T)||g.trackChildChange(ms(T,k))}),c.isLeafNode()||c.forEachChild(Sr,(T,k)=>{if(l.hasChild(T)){const z=l.getImmediateChild(T);z.equals(k)||g.trackChildChange(Je(T,k,z))}else g.trackChildChange(ua(T,k))})),c.withIndex(this.index_)}updatePriority(l,c){return l.isEmpty()?On.EMPTY_NODE:l.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ms{constructor(l){this.indexedFilter_=new Sa(l.getIndex()),this.index_=l.getIndex(),this.startPost_=Ms.getStartPost_(l),this.endPost_=Ms.getEndPost_(l),this.startIsInclusive_=!l.startAfterSet_,this.endIsInclusive_=!l.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(l){const c=this.startIsInclusive_?this.index_.compare(this.getStartPost(),l)<=0:this.index_.compare(this.getStartPost(),l)<0,g=this.endIsInclusive_?this.index_.compare(l,this.getEndPost())<=0:this.index_.compare(l,this.getEndPost())<0;return c&&g}updateChild(l,c,g,T,k,z){return this.matches(new $n(c,g))||(g=On.EMPTY_NODE),this.indexedFilter_.updateChild(l,c,g,T,k,z)}updateFullNode(l,c,g){c.isLeafNode()&&(c=On.EMPTY_NODE);let T=c.withIndex(this.index_);T=T.updatePriority(On.EMPTY_NODE);const k=this;return c.forEachChild(Sr,(z,te)=>{k.matches(new $n(z,te))||(T=T.updateImmediateChild(z,On.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(l,T,g)}updatePriority(l,c){return l}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(l){if(l.hasStart()){const c=l.getIndexStartName();return l.getIndex().makePost(l.getIndexStartValue(),c)}return l.getIndex().minPost()}static getEndPost_(l){if(l.hasEnd()){const c=l.getIndexEndName();return l.getIndex().makePost(l.getIndexEndValue(),c)}return l.getIndex().maxPost()}}class Qi{constructor(l){this.withinDirectionalStart=c=>this.reverse_?this.withinEndPost(c):this.withinStartPost(c),this.withinDirectionalEnd=c=>this.reverse_?this.withinStartPost(c):this.withinEndPost(c),this.withinStartPost=c=>{const g=this.index_.compare(this.rangedFilter_.getStartPost(),c);return this.startIsInclusive_?g<=0:g<0},this.withinEndPost=c=>{const g=this.index_.compare(c,this.rangedFilter_.getEndPost());return this.endIsInclusive_?g<=0:g<0},this.rangedFilter_=new Ms(l),this.index_=l.getIndex(),this.limit_=l.getLimit(),this.reverse_=!l.isViewFromLeft(),this.startIsInclusive_=!l.startAfterSet_,this.endIsInclusive_=!l.endBeforeSet_}updateChild(l,c,g,T,k,z){return this.rangedFilter_.matches(new $n(c,g))||(g=On.EMPTY_NODE),l.getImmediateChild(c).equals(g)?l:l.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(l,c,g,T,k,z):this.fullLimitUpdateChild_(l,c,g,k,z)}updateFullNode(l,c,g){let T;if(c.isLeafNode()||c.isEmpty())T=On.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let k;T=On.EMPTY_NODE.withIndex(this.index_),k=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let z=0;for(;k.hasNext()&&z<this.limit_;){const te=k.getNext();if(this.withinDirectionalStart(te)){if(!this.withinDirectionalEnd(te))break;T=T.updateImmediateChild(te.name,te.node),z++}}}else{let k;T=c.withIndex(this.index_),T=T.updatePriority(On.EMPTY_NODE),k=this.reverse_?T.getReverseIterator(this.index_):T.getIterator(this.index_);let z=0;for(;k.hasNext();){const te=k.getNext();z<this.limit_&&this.withinDirectionalStart(te)&&this.withinDirectionalEnd(te)?z++:T=T.updateImmediateChild(te.name,On.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(l,T,g)}updatePriority(l,c){return l}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(l,c,g,T,k){let z;if(this.reverse_){const it=this.index_.getCompare();z=(wt,Wt)=>it(Wt,wt)}else z=this.index_.getCompare();const te=l;(0,G.hu)(te.numChildren()===this.limit_,"");const oe=new $n(c,g),_e=this.reverse_?te.getFirstChild(this.index_):te.getLastChild(this.index_),et=this.rangedFilter_.matches(oe);if(te.hasChild(c)){const it=te.getImmediateChild(c);let wt=T.getChildAfterChild(this.index_,_e,this.reverse_);for(;null!=wt&&(wt.name===c||te.hasChild(wt.name));)wt=T.getChildAfterChild(this.index_,wt,this.reverse_);const Wt=null==wt?1:z(wt,oe);if(et&&!g.isEmpty()&&Wt>=0)return k?.trackChildChange(Je(c,g,it)),te.updateImmediateChild(c,g);{k?.trackChildChange(ms(c,it));const jn=te.updateImmediateChild(c,On.EMPTY_NODE);return null!=wt&&this.rangedFilter_.matches(wt)?(k?.trackChildChange(ua(wt.name,wt.node)),jn.updateImmediateChild(wt.name,wt.node)):jn}}return g.isEmpty()?l:et&&z(_e,oe)>=0?(null!=k&&(k.trackChildChange(ms(_e.name,_e.node)),k.trackChildChange(ua(c,g))),te.updateImmediateChild(c,g).updateImmediateChild(_e.name,On.EMPTY_NODE)):l}}class mo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Sr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,G.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,G.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Er}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,G.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,G.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ar}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,G.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Sr}copy(){const l=new mo;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.startAfterSet_=this.startAfterSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.endBeforeSet_=this.endBeforeSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l}}function la(h,l,c){const g=h.copy();return g.startSet_=!0,void 0===l&&(l=null),g.indexStartValue_=l,null!=c?(g.startNameSet_=!0,g.indexStartName_=c):(g.startNameSet_=!1,g.indexStartName_=""),g}function _o(h,l,c){const g=h.copy();return g.endSet_=!0,void 0===l&&(l=null),g.indexEndValue_=l,void 0!==c?(g.endNameSet_=!0,g.indexEndName_=c):(g.endNameSet_=!1,g.indexEndName_=""),g}function oi(h,l){const c=h.copy();return c.index_=l,c}function Ui(h){const l={};if(h.isDefault())return l;let c;if(h.index_===Sr?c="$priority":h.index_===go?c="$value":h.index_===ns?c="$key":((0,G.hu)(h.index_ instanceof aa,"Unrecognized index type!"),c=h.index_.toString()),l.orderBy=(0,G.Wl)(c),h.startSet_){const g=h.startAfterSet_?"startAfter":"startAt";l[g]=(0,G.Wl)(h.indexStartValue_),h.startNameSet_&&(l[g]+=","+(0,G.Wl)(h.indexStartName_))}if(h.endSet_){const g=h.endBeforeSet_?"endBefore":"endAt";l[g]=(0,G.Wl)(h.indexEndValue_),h.endNameSet_&&(l[g]+=","+(0,G.Wl)(h.indexEndName_))}return h.limitSet_&&(h.isViewFromLeft()?l.limitToFirst=h.limit_:l.limitToLast=h.limit_),l}function Ro(h){const l={};if(h.startSet_&&(l.sp=h.indexStartValue_,h.startNameSet_&&(l.sn=h.indexStartName_),l.sin=!h.startAfterSet_),h.endSet_&&(l.ep=h.indexEndValue_,h.endNameSet_&&(l.en=h.indexEndName_),l.ein=!h.endBeforeSet_),h.limitSet_){l.l=h.limit_;let c=h.viewFrom_;""===c&&(c=h.isViewFromLeft()?"l":"r"),l.vf=c}return h.index_!==Sr&&(l.i=h.index_.toString()),l}class to extends fs{constructor(l,c,g,T){super(),this.repoInfo_=l,this.onDataUpdate_=c,this.authTokenProvider_=g,this.appCheckTokenProvider_=T,this.log_=Qr("p:rest:"),this.listens_={}}reportStats(l){throw new Error("Method not implemented.")}static getListenId_(l,c){return void 0!==c?"tag$"+c:((0,G.hu)(l._queryParams.isDefault(),"should have a tag if it's not a default query."),l._path.toString())}listen(l,c,g,T){const k=l._path.toString();this.log_("Listen called for "+k+" "+l._queryIdentifier);const z=to.getListenId_(l,g),te={};this.listens_[z]=te;const oe=Ui(l._queryParams);this.restRequest_(k+".json",oe,(_e,et)=>{let it=et;if(404===_e&&(it=null,_e=null),null===_e&&this.onDataUpdate_(k,it,!1,g),(0,G.DV)(this.listens_,z)===te){let wt;wt=_e?401===_e?"permission_denied":"rest_error:"+_e:"ok",T(wt,null)}})}unlisten(l,c){const g=to.getListenId_(l,c);delete this.listens_[g]}get(l){const c=Ui(l._queryParams),g=l._path.toString(),T=new G.BH;return this.restRequest_(g+".json",c,(k,z)=>{let te=z;404===k&&(te=null,k=null),null===k?(this.onDataUpdate_(g,te,!1,null),T.resolve(te)):T.reject(new Error(te))}),T.promise}refreshAuthToken(l){}restRequest_(l,c={},g){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([T,k])=>{T&&T.accessToken&&(c.auth=T.accessToken),k&&k.token&&(c.ac=k.token);const z=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+l+"?ns="+this.repoInfo_.namespace+(0,G.xO)(c);this.log_("Sending REST request for "+z);const te=new XMLHttpRequest;te.onreadystatechange=()=>{if(g&&4===te.readyState){this.log_("REST Response for "+z+" received. status:",te.status,"response:",te.responseText);let oe=null;if(te.status>=200&&te.status<300){try{oe=(0,G.cI)(te.responseText)}catch{Zn("Failed to parse JSON response for "+z+": "+te.responseText)}g(null,oe)}else 401!==te.status&&404!==te.status&&Zn("Got unsuccessful REST response for "+z+" Status: "+te.status),g(te.status);g=null}},te.open("GET",z,!0),te.send()})}}class yo{constructor(){this.rootNode_=On.EMPTY_NODE}getNode(l){return this.rootNode_.getChild(l)}updateSnapshot(l,c){this.rootNode_=this.rootNode_.updateChild(l,c)}}function no(){return{value:null,children:new Map}}function No(h,l,c){if(Bn(l))h.value=c,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(l,c);else{const g=mt(l);h.children.has(g)||h.children.set(g,no()),No(h.children.get(g),l=an(l),c)}}function ys(h,l){if(Bn(l))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const c=h.value;return h.value=null,c.forEachChild(Sr,(g,T)=>{No(h,new Ge(g),T)}),ys(h,l)}}if(h.children.size>0){const c=mt(l);return l=an(l),h.children.has(c)&&ys(h.children.get(c),l)&&h.children.delete(c),0===h.children.size}return!0}function rn(h,l,c){null!==h.value?c(l,h.value):function Aa(h,l){h.children.forEach((c,g)=>{l(g,c)})}(h,(g,T)=>{rn(T,new Ge(l.toString()+"/"+g),c)})}class vn{constructor(l){this.collection_=l,this.last_=null}get(){const l=this.collection_.get(),c=Object.assign({},l);return this.last_&&Un(this.last_,(g,T)=>{c[g]=c[g]-T}),this.last_=l,c}}class Wu{constructor(l,c){this.server_=c,this.statsToReport_={},this.statsListener_=new vn(l);const g=1e4+2e4*Math.random();Vr(this.reportStats_.bind(this),Math.floor(g))}reportStats_(){const l=this.statsListener_.get(),c={};let g=!1;Un(l,(T,k)=>{k>0&&(0,G.r3)(this.statsToReport_,T)&&(c[T]=k,g=!0)}),g&&this.server_.reportStats(c),Vr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Vi=(()=>{return(h=Vi||(Vi={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Vi;var h})();function Po(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class ai{constructor(l,c,g){this.path=l,this.affectedTree=c,this.revert=g,this.type=Vi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(l){if(Bn(this.path)){if(null!=this.affectedTree.value)return(0,G.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new Ge(l));return new ai(ut(),c,this.revert)}}return(0,G.hu)(mt(this.path)===l,"operationForChild called for unrelated child."),new ai(an(this.path),this.affectedTree,this.revert)}}class Zo{constructor(l,c){this.source=l,this.path=c,this.type=Vi.LISTEN_COMPLETE}operationForChild(l){return Bn(this.path)?new Zo(this.source,ut()):new Zo(this.source,an(this.path))}}class Kr{constructor(l,c,g){this.source=l,this.path=c,this.snap=g,this.type=Vi.OVERWRITE}operationForChild(l){return Bn(this.path)?new Kr(this.source,ut(),this.snap.getImmediateChild(l)):new Kr(this.source,an(this.path),this.snap)}}class zi{constructor(l,c,g){this.source=l,this.path=c,this.children=g,this.type=Vi.MERGE}operationForChild(l){if(Bn(this.path)){const c=this.children.subtree(new Ge(l));return c.isEmpty()?null:c.value?new Kr(this.source,ut(),c.value):new zi(this.source,ut(),c)}return(0,G.hu)(mt(this.path)===l,"Can't get a merge for a child not on the path of the operation"),new zi(this.source,an(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ui{constructor(l,c,g){this.node_=l,this.fullyInitialized_=c,this.filtered_=g}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(l){if(Bn(l))return this.isFullyInitialized()&&!this.filtered_;const c=mt(l);return this.isCompleteForChild(c)}isCompleteForChild(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)}getNode(){return this.node_}}class ro{constructor(l){this.query_=l,this.index_=this.query_._queryParams.getIndex()}}function io(h,l,c,g,T,k){const z=g.filter(te=>te.type===c);z.sort((te,oe)=>function is(h,l,c){if(null==l.childName||null==c.childName)throw(0,G.g5)("Should only compare child_ events.");const g=new $n(l.childName,l.snapshotNode),T=new $n(c.childName,c.snapshotNode);return h.index_.compare(g,T)}(h,te,oe)),z.forEach(te=>{const oe=function Ni(h,l,c){return"value"===l.type||"child_removed"===l.type||(l.prevName=c.getPredecessorChildName(l.childName,l.snapshotNode,h.index_)),l}(h,te,k);T.forEach(_e=>{_e.respondsTo(te.type)&&l.push(_e.createEvent(oe,h.query_))})})}function xa(h,l){return{eventCache:h,serverCache:l}}function hu(h,l,c,g){return xa(new ui(l,c,g),h.serverCache)}function qa(h,l,c,g){return xa(h.eventCache,new ui(l,c,g))}function Hs(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function O(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let K;class Q{constructor(l,c=(()=>(K||(K=new bi(br)),K))()){this.value=l,this.children=c}static fromObject(l){let c=new Q(null);return Un(l,(g,T)=>{c=c.set(new Ge(g),T)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(l,c){if(null!=this.value&&c(this.value))return{path:ut(),value:this.value};if(Bn(l))return null;{const g=mt(l),T=this.children.get(g);if(null!==T){const k=T.findRootMostMatchingPathAndValue(an(l),c);return null!=k?{path:Fn(new Ge(g),k.path),value:k.value}:null}return null}}findRootMostValueAndPath(l){return this.findRootMostMatchingPathAndValue(l,()=>!0)}subtree(l){if(Bn(l))return this;{const c=mt(l),g=this.children.get(c);return null!==g?g.subtree(an(l)):new Q(null)}}set(l,c){if(Bn(l))return new Q(c,this.children);{const g=mt(l),k=(this.children.get(g)||new Q(null)).set(an(l),c),z=this.children.insert(g,k);return new Q(this.value,z)}}remove(l){if(Bn(l))return this.children.isEmpty()?new Q(null):new Q(null,this.children);{const c=mt(l),g=this.children.get(c);if(g){const T=g.remove(an(l));let k;return k=T.isEmpty()?this.children.remove(c):this.children.insert(c,T),null===this.value&&k.isEmpty()?new Q(null):new Q(this.value,k)}return this}}get(l){if(Bn(l))return this.value;{const c=mt(l),g=this.children.get(c);return g?g.get(an(l)):null}}setTree(l,c){if(Bn(l))return c;{const g=mt(l),k=(this.children.get(g)||new Q(null)).setTree(an(l),c);let z;return z=k.isEmpty()?this.children.remove(g):this.children.insert(g,k),new Q(this.value,z)}}fold(l){return this.fold_(ut(),l)}fold_(l,c){const g={};return this.children.inorderTraversal((T,k)=>{g[T]=k.fold_(Fn(l,T),c)}),c(l,this.value,g)}findOnPath(l,c){return this.findOnPath_(l,ut(),c)}findOnPath_(l,c,g){const T=!!this.value&&g(c,this.value);if(T)return T;if(Bn(l))return null;{const k=mt(l),z=this.children.get(k);return z?z.findOnPath_(an(l),Fn(c,k),g):null}}foreachOnPath(l,c){return this.foreachOnPath_(l,ut(),c)}foreachOnPath_(l,c,g){if(Bn(l))return this;{this.value&&g(c,this.value);const T=mt(l),k=this.children.get(T);return k?k.foreachOnPath_(an(l),Fn(c,T),g):new Q(null)}}foreach(l){this.foreach_(ut(),l)}foreach_(l,c){this.children.inorderTraversal((g,T)=>{T.foreach_(Fn(l,g),c)}),this.value&&c(l,this.value)}foreachChild(l){this.children.inorderTraversal((c,g)=>{g.value&&l(c,g.value)})}}class ce{constructor(l){this.writeTree_=l}static empty(){return new ce(new Q(null))}}function He(h,l,c){if(Bn(l))return new ce(new Q(c));{const g=h.writeTree_.findRootMostValueAndPath(l);if(null!=g){const T=g.path;let k=g.value;const z=Zr(T,l);return k=k.updateChild(z,c),new ce(h.writeTree_.set(T,k))}{const T=new Q(c),k=h.writeTree_.setTree(l,T);return new ce(k)}}}function ct(h,l,c){let g=h;return Un(c,(T,k)=>{g=He(g,Fn(l,T),k)}),g}function Bt(h,l){if(Bn(l))return ce.empty();{const c=h.writeTree_.setTree(l,new Q(null));return new ce(c)}}function lr(h,l){return null!=Qn(h,l)}function Qn(h,l){const c=h.writeTree_.findRootMostValueAndPath(l);return null!=c?h.writeTree_.get(c.path).getChild(Zr(c.path,l)):null}function Xn(h){const l=[],c=h.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(Sr,(g,T)=>{l.push(new $n(g,T))}):h.writeTree_.children.inorderTraversal((g,T)=>{null!=T.value&&l.push(new $n(g,T.value))}),l}function Ln(h,l){if(Bn(l))return h;{const c=Qn(h,l);return new ce(null!=c?new Q(c):h.writeTree_.subtree(l))}}function ni(h){return h.writeTree_.isEmpty()}function or(h,l){return Pi(ut(),h.writeTree_,l)}function Pi(h,l,c){if(null!=l.value)return c.updateChild(h,l.value);{let g=null;return l.children.inorderTraversal((T,k)=>{".priority"===T?((0,G.hu)(null!==k.value,"Priority writes must always be leaf nodes"),g=k.value):c=Pi(Fn(h,T),k,c)}),!c.getChild(h).isEmpty()&&null!==g&&(c=c.updateChild(Fn(h,".priority"),g)),c}}function Cr(h,l){return pa(l,h)}function Ma(h,l){if(h.snap)return Yi(h.path,l);for(const c in h.children)if(h.children.hasOwnProperty(c)&&Yi(Fn(h.path,c),l))return!0;return!1}function Ru(h){return h.visible}function da(h,l,c){let g=ce.empty();for(let T=0;T<h.length;++T){const k=h[T];if(l(k)){const z=k.path;let te;if(k.snap)Yi(c,z)?(te=Zr(c,z),g=He(g,te,k.snap)):Yi(z,c)&&(te=Zr(z,c),g=He(g,ut(),k.snap.getChild(te)));else{if(!k.children)throw(0,G.g5)("WriteRecord should have .snap or .children");if(Yi(c,z))te=Zr(c,z),g=ct(g,te,k.children);else if(Yi(z,c))if(te=Zr(z,c),Bn(te))g=ct(g,ut(),k.children);else{const oe=(0,G.DV)(k.children,mt(te));if(oe){const _e=oe.getChild(an(te));g=He(g,ut(),_e)}}}}}return g}function zs(h,l,c,g,T){if(g||T){const k=Ln(h.visibleWrites,l);return!T&&ni(k)?c:T||null!=c||lr(k,ut())?or(da(h.allWrites,function(_e){return(_e.visible||T)&&(!g||!~g.indexOf(_e.writeId))&&(Yi(_e.path,l)||Yi(l,_e.path))},l),c||On.EMPTY_NODE):null}{const k=Qn(h.visibleWrites,l);if(null!=k)return k;{const z=Ln(h.visibleWrites,l);return ni(z)?c:null!=c||lr(z,ut())?or(z,c||On.EMPTY_NODE):null}}}function Na(h,l,c,g){return zs(h.writeTree,h.treePath,l,c,g)}function Ko(h,l){return function ha(h,l,c){let g=On.EMPTY_NODE;const T=Qn(h.visibleWrites,l);if(T)return T.isLeafNode()||T.forEachChild(Sr,(k,z)=>{g=g.updateImmediateChild(k,z)}),g;if(c){const k=Ln(h.visibleWrites,l);return c.forEachChild(Sr,(z,te)=>{const oe=or(Ln(k,new Ge(z)),te);g=g.updateImmediateChild(z,oe)}),Xn(k).forEach(z=>{g=g.updateImmediateChild(z.name,z.node)}),g}return Xn(Ln(h.visibleWrites,l)).forEach(z=>{g=g.updateImmediateChild(z.name,z.node)}),g}(h.writeTree,h.treePath,l)}function Yo(h,l,c,g){return function Ra(h,l,c,g,T){(0,G.hu)(g||T,"Either existingEventSnap or existingServerSnap must exist");const k=Fn(l,c);if(lr(h.visibleWrites,k))return null;{const z=Ln(h.visibleWrites,k);return ni(z)?T.getChild(c):or(z,T.getChild(c))}}(h.writeTree,h.treePath,l,c,g)}function Pa(h,l){return function Ns(h,l){return Qn(h.visibleWrites,l)}(h.writeTree,Fn(h.treePath,l))}function Oa(h,l,c){return function fa(h,l,c,g){const T=Fn(l,c),k=Qn(h.visibleWrites,T);return null!=k?k:g.isCompleteForChild(c)?or(Ln(h.visibleWrites,T),g.getNode().getImmediateChild(c)):null}(h.writeTree,h.treePath,l,c)}function ka(h,l){return pa(Fn(h.treePath,l),h.writeTree)}function pa(h,l){return{treePath:h,writeTree:l}}class Ka{constructor(){this.changeMap=new Map}trackChildChange(l){const c=l.type,g=l.childName;(0,G.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,G.hu)(".priority"!==g,"Only non-priority child changes can be tracked.");const T=this.changeMap.get(g);if(T){const k=T.type;if("child_added"===c&&"child_removed"===k)this.changeMap.set(g,Je(g,l.snapshotNode,T.snapshotNode));else if("child_removed"===c&&"child_added"===k)this.changeMap.delete(g);else if("child_removed"===c&&"child_changed"===k)this.changeMap.set(g,ms(g,T.oldSnap));else if("child_changed"===c&&"child_added"===k)this.changeMap.set(g,ua(g,l.snapshotNode));else{if("child_changed"!==c||"child_changed"!==k)throw(0,G.g5)("Illegal combination of changes: "+l+" occurred after "+T);this.changeMap.set(g,Je(g,l.snapshotNode,T.oldSnap))}}else this.changeMap.set(g,l)}getChanges(){return Array.from(this.changeMap.values())}}const ko=new class Zu{getCompleteChild(l){return null}getChildAfterChild(l,c,g){return null}};class Fa{constructor(l,c,g=null){this.writes_=l,this.viewCache_=c,this.optCompleteServerCache_=g}getCompleteChild(l){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(l))return c.getNode().getImmediateChild(l);{const g=null!=this.optCompleteServerCache_?new ui(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Oa(this.writes_,l,g)}}getChildAfterChild(l,c,g){const T=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:O(this.viewCache_),k=function bu(h,l,c,g,T,k){return function Za(h,l,c,g,T,k,z){let te;const oe=Ln(h.visibleWrites,l),_e=Qn(oe,ut());if(null!=_e)te=_e;else{if(null==c)return[];te=or(oe,c)}if(te=te.withIndex(z),te.isEmpty()||te.isLeafNode())return[];{const et=[],it=z.getCompare(),wt=k?te.getReverseIteratorFrom(g,z):te.getIteratorFrom(g,z);let Wt=wt.getNext();for(;Wt&&et.length<T;)0!==it(Wt,g)&&et.push(Wt),Wt=wt.getNext();return et}}(h.writeTree,h.treePath,l,c,g,T,k)}(this.writes_,T,c,1,g,l);return 0===k.length?null:k[0]}}function Ps(h,l,c,g,T,k){const z=l.eventCache;if(null!=Pa(g,c))return l;{let te,oe;if(Bn(c))if((0,G.hu)(l.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),l.serverCache.isFiltered()){const _e=O(l),it=Ko(g,_e instanceof On?_e:On.EMPTY_NODE);te=h.filter.updateFullNode(l.eventCache.getNode(),it,k)}else{const _e=Na(g,O(l));te=h.filter.updateFullNode(l.eventCache.getNode(),_e,k)}else{const _e=mt(c);if(".priority"===_e){(0,G.hu)(1===_n(c),"Can't have a priority with additional path components");const et=z.getNode();oe=l.serverCache.getNode();const it=Yo(g,c,et,oe);te=null!=it?h.filter.updatePriority(et,it):z.getNode()}else{const et=an(c);let it;if(z.isCompleteForChild(_e)){oe=l.serverCache.getNode();const wt=Yo(g,c,z.getNode(),oe);it=null!=wt?z.getNode().getImmediateChild(_e).updateChild(et,wt):z.getNode().getImmediateChild(_e)}else it=Oa(g,_e,l.serverCache);te=null!=it?h.filter.updateChild(z.getNode(),_e,it,et,T,k):z.getNode()}}return hu(l,te,z.isFullyInitialized()||Bn(c),h.filter.filtersNodes())}}function Es(h,l,c,g,T,k,z,te){const oe=l.serverCache;let _e;const et=z?h.filter:h.filter.getIndexedFilter();if(Bn(c))_e=et.updateFullNode(oe.getNode(),g,null);else if(et.filtersNodes()&&!oe.isFiltered()){const Wt=oe.getNode().updateChild(c,g);_e=et.updateFullNode(oe.getNode(),Wt,null)}else{const Wt=mt(c);if(!oe.isCompleteForPath(c)&&_n(c)>1)return l;const Nn=an(c),Qs=oe.getNode().getImmediateChild(Wt).updateChild(Nn,g);_e=".priority"===Wt?et.updatePriority(oe.getNode(),Qs):et.updateChild(oe.getNode(),Wt,Qs,Nn,ko,null)}const it=qa(l,_e,oe.isFullyInitialized()||Bn(c),et.filtersNodes());return Ps(h,it,c,T,new Fa(T,it,k),te)}function Ku(h,l,c,g,T,k,z){const te=l.eventCache;let oe,_e;const et=new Fa(T,l,k);if(Bn(c))_e=h.filter.updateFullNode(l.eventCache.getNode(),g,z),oe=hu(l,_e,!0,h.filter.filtersNodes());else{const it=mt(c);if(".priority"===it)_e=h.filter.updatePriority(l.eventCache.getNode(),g),oe=hu(l,_e,te.isFullyInitialized(),te.isFiltered());else{const wt=an(c),Wt=te.getNode().getImmediateChild(it);let Nn;if(Bn(wt))Nn=g;else{const jn=et.getCompleteChild(it);Nn=null!=jn?".priority"===nr(wt)&&jn.getChild(Fi(wt)).isEmpty()?jn:jn.updateChild(wt,g):On.EMPTY_NODE}oe=Wt.equals(Nn)?l:hu(l,h.filter.updateChild(te.getNode(),it,Nn,wt,et,z),te.isFullyInitialized(),h.filter.filtersNodes())}}return oe}function rl(h,l){return h.eventCache.isCompleteForChild(l)}function Qa(h,l,c){return c.foreach((g,T)=>{l=l.updateChild(g,T)}),l}function fu(h,l,c,g,T,k,z,te){if(l.serverCache.getNode().isEmpty()&&!l.serverCache.isFullyInitialized())return l;let _e,oe=l;_e=Bn(c)?g:new Q(null).setTree(c,g);const et=l.serverCache.getNode();return _e.children.inorderTraversal((it,wt)=>{if(et.hasChild(it)){const Nn=Qa(0,l.serverCache.getNode().getImmediateChild(it),wt);oe=Es(h,oe,new Ge(it),Nn,T,k,z,te)}}),_e.children.inorderTraversal((it,wt)=>{const Wt=!l.serverCache.isCompleteForChild(it)&&null===wt.value;if(!et.hasChild(it)&&!Wt){const jn=Qa(0,l.serverCache.getNode().getImmediateChild(it),wt);oe=Es(h,oe,new Ge(it),jn,T,k,z,te)}}),oe}class D{constructor(l,c){this.query_=l,this.eventRegistrations_=[];const g=this.query_._queryParams,T=new Sa(g.getIndex()),k=function du(h){return h.loadsAllData()?new Sa(h.getIndex()):h.hasLimit()?new Qi(h):new Ms(h)}(g);this.processor_=function Ya(h){return{filter:h}}(k);const z=c.serverCache,te=c.eventCache,oe=T.updateFullNode(On.EMPTY_NODE,z.getNode(),null),_e=k.updateFullNode(On.EMPTY_NODE,te.getNode(),null),et=new ui(oe,z.isFullyInitialized(),T.filtersNodes()),it=new ui(_e,te.isFullyInitialized(),k.filtersNodes());this.viewCache_=xa(it,et),this.eventGenerator_=new ro(this.query_)}get query(){return this.query_}}function de(h,l){const c=O(h.viewCache_);return c&&(h.query._queryParams.loadsAllData()||!Bn(l)&&!c.getImmediateChild(mt(l)).isEmpty())?c.getChild(l):null}function Ze(h){return 0===h.eventRegistrations_.length}function un(h,l,c){const g=[];if(c){(0,G.hu)(null==l,"A cancel should cancel all event registrations.");const T=h.query._path;h.eventRegistrations_.forEach(k=>{const z=k.createCancelEvent(c,T);z&&g.push(z)})}if(l){let T=[];for(let k=0;k<h.eventRegistrations_.length;++k){const z=h.eventRegistrations_[k];if(z.matches(l)){if(l.hasAnyCallback()){T=T.concat(h.eventRegistrations_.slice(k+1));break}}else T.push(z)}h.eventRegistrations_=T}else h.eventRegistrations_=[];return g}function Yr(h,l,c,g){l.type===Vi.MERGE&&null!==l.source.queryId&&((0,G.hu)(O(h.viewCache_),"We should always have a full cache before handling merges"),(0,G.hu)(Hs(h.viewCache_),"Missing event cache, even though we have a server cache"));const T=h.viewCache_,k=function pi(h,l,c,g,T){const k=new Ka;let z,te;if(c.type===Vi.OVERWRITE){const _e=c;_e.source.fromUser?z=Ku(h,l,_e.path,_e.snap,g,T,k):((0,G.hu)(_e.source.fromServer,"Unknown source."),te=_e.source.tagged||l.serverCache.isFiltered()&&!Bn(_e.path),z=Es(h,l,_e.path,_e.snap,g,T,te,k))}else if(c.type===Vi.MERGE){const _e=c;_e.source.fromUser?z=function Yu(h,l,c,g,T,k,z){let te=l;return g.foreach((oe,_e)=>{const et=Fn(c,oe);rl(l,mt(et))&&(te=Ku(h,te,et,_e,T,k,z))}),g.foreach((oe,_e)=>{const et=Fn(c,oe);rl(l,mt(et))||(te=Ku(h,te,et,_e,T,k,z))}),te}(h,l,_e.path,_e.children,g,T,k):((0,G.hu)(_e.source.fromServer,"Unknown source."),te=_e.source.tagged||l.serverCache.isFiltered(),z=fu(h,l,_e.path,_e.children,g,T,te,k))}else if(c.type===Vi.ACK_USER_WRITE){const _e=c;z=_e.revert?function R(h,l,c,g,T,k){let z;if(null!=Pa(g,c))return l;{const te=new Fa(g,l,T),oe=l.eventCache.getNode();let _e;if(Bn(c)||".priority"===mt(c)){let et;if(l.serverCache.isFullyInitialized())et=Na(g,O(l));else{const it=l.serverCache.getNode();(0,G.hu)(it instanceof On,"serverChildren would be complete if leaf node"),et=Ko(g,it)}_e=h.filter.updateFullNode(oe,et,k)}else{const et=mt(c);let it=Oa(g,et,l.serverCache);null==it&&l.serverCache.isCompleteForChild(et)&&(it=oe.getImmediateChild(et)),_e=null!=it?h.filter.updateChild(oe,et,it,an(c),te,k):l.eventCache.getNode().hasChild(et)?h.filter.updateChild(oe,et,On.EMPTY_NODE,an(c),te,k):oe,_e.isEmpty()&&l.serverCache.isFullyInitialized()&&(z=Na(g,O(l)),z.isLeafNode()&&(_e=h.filter.updateFullNode(_e,z,k)))}return z=l.serverCache.isFullyInitialized()||null!=Pa(g,ut()),hu(l,_e,z,h.filter.filtersNodes())}}(h,l,_e.path,g,T,k):function Qo(h,l,c,g,T,k,z){if(null!=Pa(T,c))return l;const te=l.serverCache.isFiltered(),oe=l.serverCache;if(null!=g.value){if(Bn(c)&&oe.isFullyInitialized()||oe.isCompleteForPath(c))return Es(h,l,c,oe.getNode().getChild(c),T,k,te,z);if(Bn(c)){let _e=new Q(null);return oe.getNode().forEachChild(ns,(et,it)=>{_e=_e.set(new Ge(et),it)}),fu(h,l,c,_e,T,k,te,z)}return l}{let _e=new Q(null);return g.foreach((et,it)=>{const wt=Fn(c,et);oe.isCompleteForPath(wt)&&(_e=_e.set(et,oe.getNode().getChild(wt)))}),fu(h,l,c,_e,T,k,te,z)}}(h,l,_e.path,_e.affectedTree,g,T,k)}else{if(c.type!==Vi.LISTEN_COMPLETE)throw(0,G.g5)("Unknown operation type: "+c.type);z=function Bi(h,l,c,g,T){const k=l.serverCache;return Ps(h,qa(l,k.getNode(),k.isFullyInitialized()||Bn(c),k.isFiltered()),c,g,ko,T)}(h,l,c.path,g,k)}const oe=k.getChanges();return function Ti(h,l,c){const g=l.eventCache;if(g.isFullyInitialized()){const T=g.getNode().isLeafNode()||g.getNode().isEmpty(),k=Hs(h);(c.length>0||!h.eventCache.isFullyInitialized()||T&&!g.getNode().equals(k)||!g.getNode().getPriority().equals(k.getPriority()))&&c.push(za(Hs(l)))}}(l,z,oe),{viewCache:z,changes:oe}}(h.processor_,T,l,c,g);return function Nr(h,l){(0,G.hu)(l.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,G.hu)(l.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,k.viewCache),(0,G.hu)(k.viewCache.serverCache.isFullyInitialized()||!T.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=k.viewCache,Xi(h,k.changes,k.viewCache.eventCache.getNode(),null)}function Xi(h,l,c,g){return function Rr(h,l,c,g){const T=[],k=[];return l.forEach(z=>{"child_changed"===z.type&&h.index_.indexedValueChanged(z.oldSnap,z.snapshotNode)&&k.push(function cr(h,l){return{type:"child_moved",snapshotNode:l,childName:h}}(z.childName,z.snapshotNode))}),io(h,T,"child_removed",l,g,c),io(h,T,"child_added",l,g,c),io(h,T,"child_moved",k,g,c),io(h,T,"child_changed",l,g,c),io(h,T,"value",l,g,c),T}(h.eventGenerator_,l,c,g?[g]:h.eventRegistrations_)}let os,ma;class Fo{constructor(){this.views=new Map}}function wo(h,l,c,g){const T=l.source.queryId;if(null!==T){const k=h.views.get(T);return(0,G.hu)(null!=k,"SyncTree gave us an op for an invalid query."),Yr(k,l,c,g)}{let k=[];for(const z of h.views.values())k=k.concat(Yr(z,l,c,g));return k}}function ga(h,l,c,g,T){const z=h.views.get(l._queryIdentifier);if(!z){let te=Na(c,T?g:null),oe=!1;te?oe=!0:g instanceof On?(te=Ko(c,g),oe=!1):(te=On.EMPTY_NODE,oe=!1);const _e=xa(new ui(te,oe,!1),new ui(g,T,!1));return new D(l,_e)}return z}function Tu(h){const l=[];for(const c of h.views.values())c.query._queryParams.loadsAllData()||l.push(c);return l}function Lo(h,l){let c=null;for(const g of h.views.values())c=c||de(g,l);return c}function qs(h,l){return l._queryParams.loadsAllData()?Oi(h):h.views.get(l._queryIdentifier)}function Zs(h,l){return null!=qs(h,l)}function Uo(h){return null!=Oi(h)}function Oi(h){for(const l of h.views.values())if(l.query._queryParams.loadsAllData())return l;return null}let bl=1;class wc{constructor(l){this.listenProvider_=l,this.syncPointTree_=new Q(null),this.pendingWriteTree_=function vi(){return{visibleWrites:ce.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function b(h,l,c,g,T){return function ss(h,l,c,g,T){(0,G.hu)(g>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===T&&(T=!0),h.allWrites.push({path:l,snap:c,writeId:g,visible:T}),T&&(h.visibleWrites=He(h.visibleWrites,l,c)),h.lastWriteId=g}(h.pendingWriteTree_,l,c,g,T),T?Ks(h,new Kr({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,c)):[]}function I(h,l,c=!1){const g=function vs(h,l){for(let c=0;c<h.allWrites.length;c++){const g=h.allWrites[c];if(g.writeId===l)return g}return null}(h.pendingWriteTree_,l);if(function ws(h,l){const c=h.allWrites.findIndex(te=>te.writeId===l);(0,G.hu)(c>=0,"removeWrite called with nonexistent writeId.");const g=h.allWrites[c];h.allWrites.splice(c,1);let T=g.visible,k=!1,z=h.allWrites.length-1;for(;T&&z>=0;){const te=h.allWrites[z];te.visible&&(z>=c&&Ma(te,g.path)?T=!1:Yi(g.path,te.path)&&(k=!0)),z--}return!!T&&(k?(function Oo(h){h.visibleWrites=da(h.allWrites,Ru,ut()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(g.snap?h.visibleWrites=Bt(h.visibleWrites,g.path):Un(g.children,oe=>{h.visibleWrites=Bt(h.visibleWrites,Fn(g.path,oe))}),!0))}(h.pendingWriteTree_,l)){let k=new Q(null);return null!=g.snap?k=k.set(ut(),!0):Un(g.children,z=>{k=k.set(new Ge(z),!0)}),Ks(h,new ai(g.path,k,c))}return[]}function P(h,l,c){return Ks(h,new Kr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,c))}function Me(h,l,c,g,T=!1){const k=l._path,z=h.syncPointTree_.get(k);let te=[];if(z&&("default"===l._queryIdentifier||Zs(z,l))){const oe=function Xo(h,l,c,g){const T=l._queryIdentifier,k=[];let z=[];const te=Uo(h);if("default"===T)for(const[oe,_e]of h.views.entries())z=z.concat(un(_e,c,g)),Ze(_e)&&(h.views.delete(oe),_e.query._queryParams.loadsAllData()||k.push(_e.query));else{const oe=h.views.get(T);oe&&(z=z.concat(un(oe,c,g)),Ze(oe)&&(h.views.delete(T),oe.query._queryParams.loadsAllData()||k.push(oe.query)))}return te&&!Uo(h)&&k.push(new(function pu(){return(0,G.hu)(os,"Reference.ts has not been loaded"),os}())(l._repo,l._path)),{removed:k,events:z}}(z,l,c,g);(function Xa(h){return 0===h.views.size})(z)&&(h.syncPointTree_=h.syncPointTree_.remove(k));const _e=oe.removed;if(te=oe.events,!T){const et=-1!==_e.findIndex(wt=>wt._queryParams.loadsAllData()),it=h.syncPointTree_.findOnPath(k,(wt,Wt)=>Uo(Wt));if(et&&!it){const wt=h.syncPointTree_.subtree(k);if(!wt.isEmpty()){const Wt=function mn(h){return h.fold((l,c,g)=>{if(c&&Uo(c))return[Oi(c)];{let T=[];return c&&(T=Tu(c)),Un(g,(k,z)=>{T=T.concat(z)}),T}})}(wt);for(let Nn=0;Nn<Wt.length;++Nn){const jn=Wt[Nn],Qs=jn.query,Ji=H(h,jn);h.listenProvider_.startListening(wn(Qs),J(h,Qs),Ji.hashFn,Ji.onComplete)}}}!it&&_e.length>0&&!g&&(et?h.listenProvider_.stopListening(wn(l),null):_e.forEach(wt=>{const Wt=h.queryToTagMap.get(he(wt));h.listenProvider_.stopListening(wn(wt),Wt)}))}!function Sn(h,l){for(let c=0;c<l.length;++c){const g=l[c];if(!g._queryParams.loadsAllData()){const T=he(g),k=h.queryToTagMap.get(T);h.queryToTagMap.delete(T),h.tagToQueryMap.delete(k)}}}(h,_e)}return te}function lt(h,l,c,g){const T=Pe(h,g);if(null!=T){const k=je(T),z=k.path,te=k.queryId,oe=Zr(z,l);return It(h,z,new Kr(Po(te),oe,c))}return[]}function Kt(h,l,c,g=!1){const T=l._path;let k=null,z=!1;h.syncPointTree_.foreachOnPath(T,(wt,Wt)=>{const Nn=Zr(wt,T);k=k||Lo(Wt,Nn),z=z||Uo(Wt)});let oe,te=h.syncPointTree_.get(T);te?(z=z||Uo(te),k=k||Lo(te,ut())):(te=new Fo,h.syncPointTree_=h.syncPointTree_.set(T,te)),null!=k?oe=!0:(oe=!1,k=On.EMPTY_NODE,h.syncPointTree_.subtree(T).foreachChild((Wt,Nn)=>{const jn=Lo(Nn,ut());jn&&(k=k.updateImmediateChild(Wt,jn))}));const _e=Zs(te,l);if(!_e&&!l._queryParams.loadsAllData()){const wt=he(l);(0,G.hu)(!h.queryToTagMap.has(wt),"View does not exist, but we have a tag");const Wt=function ir(){return bl++}();h.queryToTagMap.set(wt,Wt),h.tagToQueryMap.set(Wt,wt)}let it=function wi(h,l,c,g,T,k){const z=ga(h,l,g,T,k);return h.views.has(l._queryIdentifier)||h.views.set(l._queryIdentifier,z),function tn(h,l){h.eventRegistrations_.push(l)}(z,c),function gi(h,l){const c=h.viewCache_.eventCache,g=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(Sr,(k,z)=>{g.push(ua(k,z))}),c.isFullyInitialized()&&g.push(za(c.getNode())),Xi(h,g,c.getNode(),l)}(z,c)}(te,l,c,Cr(h.pendingWriteTree_,T),k,oe);if(!_e&&!z&&!g){const wt=qs(te,l);it=it.concat(function qn(h,l,c){const g=l._path,T=J(h,l),k=H(h,c),z=h.listenProvider_.startListening(wn(l),T,k.hashFn,k.onComplete),te=h.syncPointTree_.subtree(g);if(T)(0,G.hu)(!Uo(te.value),"If we're adding a query, it shouldn't be shadowed");else{const oe=te.fold((_e,et,it)=>{if(!Bn(_e)&&et&&Uo(et))return[Oi(et).query];{let wt=[];return et&&(wt=wt.concat(Tu(et).map(Wt=>Wt.query))),Un(it,(Wt,Nn)=>{wt=wt.concat(Nn)}),wt}});for(let _e=0;_e<oe.length;++_e){const et=oe[_e];h.listenProvider_.stopListening(wn(et),J(h,et))}}return z}(h,l,wt))}return it}function rr(h,l,c){const T=h.pendingWriteTree_,k=h.syncPointTree_.findOnPath(l,(z,te)=>{const _e=Lo(te,Zr(z,l));if(_e)return _e});return zs(T,l,k,c,!0)}function Ks(h,l){return Eo(l,h.syncPointTree_,null,Cr(h.pendingWriteTree_,ut()))}function Eo(h,l,c,g){if(Bn(h.path))return L(h,l,c,g);{const T=l.get(ut());null==c&&null!=T&&(c=Lo(T,ut()));let k=[];const z=mt(h.path),te=h.operationForChild(z),oe=l.children.get(z);if(oe&&te){const _e=c?c.getImmediateChild(z):null,et=ka(g,z);k=k.concat(Eo(te,oe,_e,et))}return T&&(k=k.concat(wo(T,h,g,c))),k}}function L(h,l,c,g){const T=l.get(ut());null==c&&null!=T&&(c=Lo(T,ut()));let k=[];return l.children.inorderTraversal((z,te)=>{const oe=c?c.getImmediateChild(z):null,_e=ka(g,z),et=h.operationForChild(z);et&&(k=k.concat(L(et,te,oe,_e)))}),T&&(k=k.concat(wo(T,h,g,c))),k}function H(h,l){const c=l.query,g=J(h,c);return{hashFn:()=>(function w(h){return h.viewCache_.serverCache.getNode()}(l)||On.EMPTY_NODE).hash(),onComplete:T=>{if("ok"===T)return g?function ne(h,l,c){const g=Pe(h,c);if(g){const T=je(g),k=T.path,z=T.queryId,te=Zr(k,l);return It(h,k,new Zo(Po(z),te))}return[]}(h,c._path,g):function X(h,l){return Ks(h,new Zo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l))}(h,c._path);{const k=function hn(h,l){let c="Unknown Error";"too_big"===h?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?c="Client doesn't have permission to access the desired data.":"unavailable"===h&&(c="The service is unavailable");const g=new Error(h+" at "+l._path.toString()+": "+c);return g.code=h.toUpperCase(),g}(T,c);return Me(h,c,null,k)}}}}function J(h,l){const c=he(l);return h.queryToTagMap.get(c)}function he(h){return h._path.toString()+"$"+h._queryIdentifier}function Pe(h,l){return h.tagToQueryMap.get(l)}function je(h){const l=h.indexOf("$");return(0,G.hu)(-1!==l&&l<h.length-1,"Bad queryKey."),{queryId:h.substr(l+1),path:new Ge(h.substr(0,l))}}function It(h,l,c){const g=h.syncPointTree_.get(l);return(0,G.hu)(g,"Missing sync point for query tag that we're tracking"),wo(g,c,Cr(h.pendingWriteTree_,l),null)}function wn(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function Cl(){return(0,G.hu)(ma,"Reference.ts has not been loaded"),ma}())(h._repo,h._path):h}class Vo{constructor(l){this.node_=l}getImmediateChild(l){const c=this.node_.getImmediateChild(l);return new Vo(c)}node(){return this.node_}}class Si{constructor(l,c){this.syncTree_=l,this.path_=c}getImmediateChild(l){const c=Fn(this.path_,l);return new Si(this.syncTree_,c)}node(){return rr(this.syncTree_,this.path_)}}const Qu=function(h,l,c){return h&&"object"==typeof h?((0,G.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?Du(h[".sv"],l,c):"object"==typeof h[".sv"]?La(h[".sv"],l):void(0,G.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},Du=function(h,l,c){if("timestamp"===h)return c.timestamp;(0,G.hu)(!1,"Unexpected server value: "+h)},La=function(h,l,c){h.hasOwnProperty("increment")||(0,G.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const g=h.increment;"number"!=typeof g&&(0,G.hu)(!1,"Unexpected increment value: "+g);const T=l.node();if((0,G.hu)(null!==T&&typeof T<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!T.isLeafNode())return g;const z=T.getValue();return"number"!=typeof z?g:z+g},Fr=function(h,l,c,g){return il(l,new Si(c,h),g)},Ua=function(h,l,c){return il(h,new Vo(l),c)};function il(h,l,c){const g=h.getPriority().val(),T=Qu(g,l.getImmediateChild(".priority"),c);let k;if(h.isLeafNode()){const z=h,te=Qu(z.getValue(),l,c);return te!==z.getValue()||T!==z.getPriority().val()?new Dr(te,ti(T)):h}{const z=h;return k=z,T!==z.getPriority().val()&&(k=k.updatePriority(new Dr(T))),z.forEachChild(Sr,(te,oe)=>{const _e=il(oe,l.getImmediateChild(te),c);_e!==oe&&(k=k.updateImmediateChild(te,_e))}),k}}class Tl{constructor(l="",c=null,g={children:{},childCount:0}){this.name=l,this.parent=c,this.node=g}}function Ec(h,l){let c=l instanceof Ge?l:new Ge(l),g=h,T=mt(c);for(;null!==T;){const k=(0,G.DV)(g.node.children,T)||{children:{},childCount:0};g=new Tl(T,g,k),c=an(c),T=mt(c)}return g}function Xu(h){return h.node.value}function od(h,l){h.node.value=l,zl(h)}function Nf(h){return h.node.childCount>0}function ad(h,l){Un(h.node.children,(c,g)=>{l(new Tl(c,h,g))})}function Su(h,l,c,g){c&&!g&&l(h),ad(h,T=>{Su(T,l,!0,g)}),c&&g&&l(h)}function Ic(h){return new Ge(null===h.parent?h.name:Ic(h.parent)+"/"+h.name)}function zl(h){null!==h.parent&&function Pf(h,l,c){const g=function Vh(h){return void 0===Xu(h)&&!Nf(h)}(c),T=(0,G.r3)(h.node.children,l);g&&T?(delete h.node.children[l],h.node.childCount--,zl(h)):!g&&!T&&(h.node.children[l]=c.node,h.node.childCount++,zl(h))}(h.parent,h.name,h)}const Cc=/[\[\].#$\/\u0000-\u001F\u007F]/,jp=/[\[\].#$\u0000-\u001F\u007F]/,Bh=10485760,ud=function(h){return"string"==typeof h&&0!==h.length&&!Cc.test(h)},ld=function(h){return"string"==typeof h&&0!==h.length&&!jp.test(h)},sl=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!en(h)||h&&"object"==typeof h&&(0,G.r3)(h,".sv")},eu=function(h,l,c,g){g&&void 0===l||ol((0,G.gK)(h,"value"),l,c)},ol=function(h,l,c){const g=c instanceof Ge?new hi(c,h):c;if(void 0===l)throw new Error(h+"contains undefined "+Bs(g));if("function"==typeof l)throw new Error(h+"contains a function "+Bs(g)+" with contents = "+l.toString());if(en(l))throw new Error(h+"contains "+l.toString()+" "+Bs(g));if("string"==typeof l&&l.length>Bh/3&&(0,G.ug)(l)>Bh)throw new Error(h+"contains a string greater than "+Bh+" utf8 bytes "+Bs(g)+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){let T=!1,k=!1;if(Un(l,(z,te)=>{if(".value"===z)T=!0;else if(".priority"!==z&&".sv"!==z&&(k=!0,!ud(z)))throw new Error(h+" contains an invalid key ("+z+") "+Bs(g)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Hi(h,l){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(l),h.byteLength_+=(0,G.ug)(l),uo(h)})(g,z),ol(h,te,g),function As(h){const l=h.parts_.pop();h.byteLength_-=(0,G.ug)(l),h.parts_.length>0&&(h.byteLength_-=1)}(g)}),T&&k)throw new Error(h+' contains ".value" child '+Bs(g)+" in addition to actual children.")}},tu=function(h,l,c,g){if(g&&void 0===l)return;const T=(0,G.gK)(h,"values");if(!l||"object"!=typeof l||Array.isArray(l))throw new Error(T+" must be an object containing the children to replace.");const k=[];Un(l,(z,te)=>{const oe=new Ge(z);if(ol(T,te,Fn(c,oe)),".priority"===nr(oe)&&!sl(te))throw new Error(T+"contains an invalid value for '"+oe.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");k.push(oe)}),function(h,l){let c,g;for(c=0;c<l.length;c++){g=l[c];const k=Ci(g);for(let z=0;z<k.length;z++)if((".priority"!==k[z]||z!==k.length-1)&&!ud(k[z]))throw new Error(h+"contains an invalid key ("+k[z]+") in path "+g.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}l.sort(au);let T=null;for(c=0;c<l.length;c++){if(g=l[c],null!==T&&Yi(T,g))throw new Error(h+"contains a path "+T.toString()+" that is ancestor of another path "+g.toString());T=g}}(T,k)},bc=function(h,l,c){if(!c||void 0!==l){if(en(l))throw new Error((0,G.gK)(h,"priority")+"is "+l.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!sl(l))throw new Error((0,G.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Tc=function(h,l,c,g){if(!(g&&void 0===c||ud(c)))throw new Error((0,G.gK)(h,l)+'was an invalid key = "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Dc=function(h,l,c,g){if(!(g&&void 0===c||ld(c)))throw new Error((0,G.gK)(h,l)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},so=function(h,l){if(".info"===mt(l))throw new Error(h+" failed = Can't modify data under /.info/")},Wl=function(h,l){const c=l.path.toString();if("string"!=typeof l.repoInfo.host||0===l.repoInfo.host.length||!ud(l.repoInfo.namespace)&&"localhost"!==l.repoInfo.host.split(":")[0]||0!==c.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),ld(h)}(c))throw new Error((0,G.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ql{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Zl(h,l){let c=null;for(let g=0;g<l.length;g++){const T=l[g],k=T.getPath();null!==c&&!Ha(k,c.path)&&(h.eventLists_.push(c),c=null),null===c&&(c={events:[],path:k}),c.events.push(T)}c&&h.eventLists_.push(c)}function Sc(h,l,c){Zl(h,c),al(h,g=>Ha(g,l))}function Bo(h,l,c){Zl(h,c),al(h,g=>Yi(g,l)||Yi(l,g))}function al(h,l){h.recursionDepth_++;let c=!0;for(let g=0;g<h.eventLists_.length;g++){const T=h.eventLists_[g];T&&(l(T.path)?(Va(h.eventLists_[g]),h.eventLists_[g]=null):c=!1)}c&&(h.eventLists_=[]),h.recursionDepth_--}function Va(h){for(let l=0;l<h.events.length;l++){const c=h.events[l];if(null!==c){h.events[l]=null;const g=c.getEventRunner();Cn&&bn("event: "+c.toString()),xr(g)}}}const ji="repo_interrupt";class jd{constructor(l,c,g,T){this.repoInfo_=l,this.forceRestClient_=c,this.authTokenProvider_=g,this.appCheckProvider_=T,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ql,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=no(),this.transactionQueueTree_=new Tl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Kl(h){const c=h.infoData_.getNode(new Ge(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function Sl(h){return function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h}({timestamp:Kl(h)})}function dd(h,l,c,g,T){h.dataUpdateCount++;const k=new Ge(l);c=h.interceptServerDataCallback_?h.interceptServerDataCallback_(l,c):c;let z=[];if(T)if(g){const oe=(0,G.UI)(c,_e=>ti(_e));z=function sn(h,l,c,g){const T=Pe(h,g);if(T){const k=je(T),z=k.path,te=k.queryId,oe=Zr(z,l),_e=Q.fromObject(c);return It(h,z,new zi(Po(te),oe,_e))}return[]}(h.serverSyncTree_,k,oe,T)}else{const oe=ti(c);z=lt(h.serverSyncTree_,k,oe,T)}else if(g){const oe=(0,G.UI)(c,_e=>ti(_e));z=function $(h,l,c){const g=Q.fromObject(c);return Ks(h,new zi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,g))}(h.serverSyncTree_,k,oe)}else{const oe=ti(c);z=P(h.serverSyncTree_,k,oe)}let te=k;z.length>0&&(te=Ml(h,k)),Bo(h.eventQueue_,te,z)}function hd(h,l){$d(h,"connected",l),!1===l&&function Rc(h){ll(h,"onDisconnectEvents");const l=Sl(h),c=no();rn(h.onDisconnect_,ut(),(T,k)=>{const z=Fr(T,k,h.serverSyncTree_,l);No(c,T,z)});let g=[];rn(c,ut(),(T,k)=>{g=g.concat(P(h.serverSyncTree_,T,k));const z=dl(h,T);Ml(h,z)}),h.onDisconnect_=no(),Bo(h.eventQueue_,ut(),g)}(h)}function $d(h,l,c){const g=new Ge("/.info/"+l),T=ti(c);h.infoData_.updateSnapshot(g,T);const k=P(h.infoSyncTree_,g,T);Bo(h.eventQueue_,g,k)}function oo(h){return h.nextWriteId_++}function xc(h,l,c,g,T){ll(h,"set",{path:l.toString(),value:c,priority:g});const k=Sl(h),z=ti(c,g),te=rr(h.serverSyncTree_,l),oe=Ua(z,te,k),_e=oo(h),et=b(h.serverSyncTree_,l,oe,_e,!0);Zl(h.eventQueue_,et),h.server_.put(l.toString(),z.val(!0),(wt,Wt)=>{const Nn="ok"===wt;Nn||Zn("set at "+l+" failed: "+wt);const jn=I(h.serverSyncTree_,_e,!Nn);Bo(h.eventQueue_,l,jn),Ba(0,T,wt,Wt)});const it=dl(h,l);Ml(h,it),Bo(h.eventQueue_,it,[])}function Yl(h,l,c){h.server_.onDisconnectCancel(l.toString(),(g,T)=>{"ok"===g&&ys(h.onDisconnect_,l),Ba(0,c,g,T)})}function Ql(h,l,c,g){const T=ti(c);h.server_.onDisconnectPut(l.toString(),T.val(!0),(k,z)=>{"ok"===k&&No(h.onDisconnect_,l,T),Ba(0,g,k,z)})}function Hd(h,l,c){let g;g=".info"===mt(l._path)?Me(h.infoSyncTree_,l,c):Me(h.serverSyncTree_,l,c),Sc(h.eventQueue_,l._path,g)}function Al(h){h.persistentConnection_&&h.persistentConnection_.interrupt(ji)}function ll(h,...l){let c="";h.persistentConnection_&&(c=h.persistentConnection_.id+":"),bn(c,...l)}function Ba(h,l,c,g){l&&xr(()=>{if("ok"===c)l(null);else{const T=(c||"error").toUpperCase();let k=T;g&&(k+=": "+g);const z=new Error(k);z.code=T,l(z)}})}function Xl(h,l,c){return rr(h.serverSyncTree_,l,c)||On.EMPTY_NODE}function Jl(h,l=h.transactionQueueTree_){if(l||Oc(h,l),Xu(l)){const c=Pc(h,l);(0,G.hu)(c.length>0,"Sending zero length transaction queue"),c.every(T=>0===T.status)&&function cl(h,l,c){const g=c.map(_e=>_e.currentWriteId),T=Xl(h,l,g);let k=T;const z=T.hash();for(let _e=0;_e<c.length;_e++){const et=c[_e];(0,G.hu)(0===et.status,"tryToSendTransactionQueue_: items in queue should all be run."),et.status=1,et.retryCount++;const it=Zr(l,et.path);k=k.updateChild(it,et.currentOutputSnapshotRaw)}const te=k.val(!0),oe=l;h.server_.put(oe.toString(),te,_e=>{ll(h,"transaction put response",{path:oe.toString(),status:_e});let et=[];if("ok"===_e){const it=[];for(let wt=0;wt<c.length;wt++)c[wt].status=2,et=et.concat(I(h.serverSyncTree_,c[wt].currentWriteId)),c[wt].onComplete&&it.push(()=>c[wt].onComplete(null,!0,c[wt].currentOutputSnapshotResolved)),c[wt].unwatcher();Oc(h,Ec(h.transactionQueueTree_,l)),Jl(h,h.transactionQueueTree_),Bo(h.eventQueue_,l,et);for(let wt=0;wt<it.length;wt++)xr(it[wt])}else{if("datastale"===_e)for(let it=0;it<c.length;it++)c[it].status=3===c[it].status?4:0;else{Zn("transaction at "+oe.toString()+" failed: "+_e);for(let it=0;it<c.length;it++)c[it].status=4,c[it].abortReason=_e}Ml(h,l)}},z)}(h,Ic(l),c)}else Nf(l)&&ad(l,c=>{Jl(h,c)})}function Ml(h,l){const c=Nu(h,l),g=Ic(c);return function Hh(h,l,c){if(0===l.length)return;const g=[];let T=[];const z=l.filter(te=>0===te.status).map(te=>te.currentWriteId);for(let te=0;te<l.length;te++){const oe=l[te],_e=Zr(c,oe.path);let it,et=!1;if((0,G.hu)(null!==_e,"rerunTransactionsUnderNode_: relativePath should not be null."),4===oe.status)et=!0,it=oe.abortReason,T=T.concat(I(h.serverSyncTree_,oe.currentWriteId,!0));else if(0===oe.status)if(oe.retryCount>=25)et=!0,it="maxretry",T=T.concat(I(h.serverSyncTree_,oe.currentWriteId,!0));else{const wt=Xl(h,oe.path,z);oe.currentInputSnapshot=wt;const Wt=l[te].update(wt.val());if(void 0!==Wt){ol("transaction failed: Data returned ",Wt,oe.path);let Nn=ti(Wt);"object"==typeof Wt&&null!=Wt&&(0,G.r3)(Wt,".priority")||(Nn=Nn.updatePriority(wt.getPriority()));const Qs=oe.currentWriteId,Ji=Sl(h),jr=Ua(Nn,wt,Ji);oe.currentOutputSnapshotRaw=Nn,oe.currentOutputSnapshotResolved=jr,oe.currentWriteId=oo(h),z.splice(z.indexOf(Qs),1),T=T.concat(b(h.serverSyncTree_,oe.path,jr,oe.currentWriteId,oe.applyLocally)),T=T.concat(I(h.serverSyncTree_,Qs,!0))}else et=!0,it="nodata",T=T.concat(I(h.serverSyncTree_,oe.currentWriteId,!0))}Bo(h.eventQueue_,c,T),T=[],et&&(l[te].status=2,setTimeout(l[te].unwatcher,Math.floor(0)),l[te].onComplete&&g.push("nodata"===it?()=>l[te].onComplete(null,!1,l[te].currentInputSnapshot):()=>l[te].onComplete(new Error(it),!1,null)))}Oc(h,h.transactionQueueTree_);for(let te=0;te<g.length;te++)xr(g[te]);Jl(h,h.transactionQueueTree_)}(h,Pc(h,c),g),g}function Nu(h,l){let c,g=h.transactionQueueTree_;for(c=mt(l);null!==c&&void 0===Xu(g);)g=Ec(g,c),c=mt(l=an(l));return g}function Pc(h,l){const c=[];return Gd(h,l,c),c.sort((g,T)=>g.order-T.order),c}function Gd(h,l,c){const g=Xu(l);if(g)for(let T=0;T<g.length;T++)c.push(g[T]);ad(l,T=>{Gd(h,T,c)})}function Oc(h,l){const c=Xu(l);if(c){let g=0;for(let T=0;T<c.length;T++)2!==c[T].status&&(c[g]=c[T],g++);c.length=g,od(l,c.length>0?c:void 0)}ad(l,g=>{Oc(h,g)})}function dl(h,l){const c=Ic(Nu(h,l)),g=Ec(h.transactionQueueTree_,l);return function Dl(h,l,c){let g=c?h:h.parent;for(;null!==g;){if(l(g))return!0;g=g.parent}}(g,T=>{hl(h,T)}),hl(h,g),Su(g,T=>{hl(h,T)}),c}function hl(h,l){const c=Xu(l);if(c){const g=[];let T=[],k=-1;for(let z=0;z<c.length;z++)3===c[z].status||(1===c[z].status?((0,G.hu)(k===z-1,"All SENT items should be at beginning of queue."),k=z,c[z].status=3,c[z].abortReason="set"):((0,G.hu)(0===c[z].status,"Unexpected transaction status in abort"),c[z].unwatcher(),T=T.concat(I(h.serverSyncTree_,c[z].currentWriteId,!0)),c[z].onComplete&&g.push(c[z].onComplete.bind(null,new Error("set"),!1,null))));-1===k?od(l,void 0):c.length=k+1,Bo(h.eventQueue_,Ic(l),T);for(let z=0;z<g.length;z++)xr(g[z])}}const kc=function(h,l){const c=ec(h),g=c.namespace;return"firebase.com"===c.domain&&pr(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!g||"undefined"===g)&&"localhost"!==c.domain&&pr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Zn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ee(c.host,c.secure,g,"ws"===c.scheme||"wss"===c.scheme,l,"",g!==c.subdomain),path:new Ge(c.pathString)}},ec=function(h){let l="",c="",g="",T="",k="",z=!0,te="https",oe=443;if("string"==typeof h){let _e=h.indexOf("//");_e>=0&&(te=h.substring(0,_e-1),h=h.substring(_e+2));let et=h.indexOf("/");-1===et&&(et=h.length);let it=h.indexOf("?");-1===it&&(it=h.length),l=h.substring(0,Math.min(et,it)),et<it&&(T=function ja(h){let l="";const c=h.split("/");for(let g=0;g<c.length;g++)if(c[g].length>0){let T=c[g];try{T=decodeURIComponent(T.replace(/\+/g," "))}catch{}l+="/"+T}return l}(h.substring(et,it)));const wt=function gd(h){const l={};"?"===h.charAt(0)&&(h=h.substring(1));for(const c of h.split("&")){if(0===c.length)continue;const g=c.split("=");2===g.length?l[decodeURIComponent(g[0])]=decodeURIComponent(g[1]):Zn(`Invalid query segment '${c}' in query '${h}'`)}return l}(h.substring(Math.min(h.length,it)));_e=l.indexOf(":"),_e>=0?(z="https"===te||"wss"===te,oe=parseInt(l.substring(_e+1),10)):_e=l.length;const Wt=l.slice(0,_e);if("localhost"===Wt.toLowerCase())c="localhost";else if(Wt.split(".").length<=2)c=Wt;else{const Nn=l.indexOf(".");g=l.substring(0,Nn).toLowerCase(),c=l.substring(Nn+1),k=g}"ns"in wt&&(k=wt.ns)}return{host:l,port:oe,domain:c,subdomain:g,secure:z,scheme:te,pathString:T,namespace:k}},zd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Gh=function(){let h=0;const l=[];return function(c){const g=c===h;let T;h=c;const k=new Array(8);for(T=7;T>=0;T--)k[T]=zd.charAt(c%64),c=Math.floor(c/64);(0,G.hu)(0===c,"Cannot push at time == 0");let z=k.join("");if(g){for(T=11;T>=0&&63===l[T];T--)l[T]=0;l[T]++}else for(T=0;T<12;T++)l[T]=Math.floor(64*Math.random());for(T=0;T<12;T++)z+=zd.charAt(l[T]);return(0,G.hu)(20===z.length,"nextPushId: Length should be 20."),z}}();class Pu{constructor(l,c,g,T){this.eventType=l,this.eventRegistration=c,this.snapshot=g,this.prevName=T}getPath(){const l=this.snapshot.ref;return"value"===this.eventType?l._path:l.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,G.Wl)(this.snapshot.exportVal())}}class Rl{constructor(l,c,g){this.eventRegistration=l,this.error=c,this.path=g}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class md{constructor(l,c){this.snapshotCallback=l,this.cancelCallback=c}onValue(l,c){this.snapshotCallback.call(null,l,c)}onCancel(l){return(0,G.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,l)}get hasCancelCallback(){return!!this.cancelCallback}matches(l){return this.snapshotCallback===l.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===l.snapshotCallback.userCallback&&this.snapshotCallback.context===l.snapshotCallback.context}}class _d{constructor(l,c){this._repo=l,this._path=c}cancel(){const l=new G.BH;return Yl(this._repo,this._path,l.wrapCallback(()=>{})),l.promise}remove(){so("OnDisconnect.remove",this._path);const l=new G.BH;return Ql(this._repo,this._path,null,l.wrapCallback(()=>{})),l.promise}set(l){so("OnDisconnect.set",this._path),eu("OnDisconnect.set",l,this._path,!1);const c=new G.BH;return Ql(this._repo,this._path,l,c.wrapCallback(()=>{})),c.promise}setWithPriority(l,c){so("OnDisconnect.setWithPriority",this._path),eu("OnDisconnect.setWithPriority",l,this._path,!1),bc("OnDisconnect.setWithPriority",c,!1);const g=new G.BH;return function fd(h,l,c,g,T){const k=ti(c,g);h.server_.onDisconnectPut(l.toString(),k.val(!0),(z,te)=>{"ok"===z&&No(h.onDisconnect_,l,k),Ba(0,T,z,te)})}(this._repo,this._path,l,c,g.wrapCallback(()=>{})),g.promise}update(l){so("OnDisconnect.update",this._path),tu("OnDisconnect.update",l,this._path,!1);const c=new G.BH;return function ul(h,l,c,g){if((0,G.xb)(c))return bn("onDisconnect().update() called with empty data.  Don't do anything."),void Ba(0,g,"ok",void 0);h.server_.onDisconnectMerge(l.toString(),c,(T,k)=>{"ok"===T&&Un(c,(z,te)=>{const oe=ti(te);No(h.onDisconnect_,Fn(l,z),oe)}),Ba(0,g,T,k)})}(this._repo,this._path,l,c.wrapCallback(()=>{})),c.promise}}class nu{constructor(l,c,g,T){this._repo=l,this._path=c,this._queryParams=g,this._orderByCalled=T}get key(){return Bn(this._path)?null:nr(this._path)}get ref(){return new li(this._repo,this._path)}get _queryIdentifier(){const l=Ro(this._queryParams),c=Ai(l);return"{}"===c?"default":c}get _queryObject(){return Ro(this._queryParams)}isEqual(l){if(!((l=(0,G.m9)(l))instanceof nu))return!1;const c=this._repo===l._repo,g=Ha(this._path,l._path);return c&&g&&this._queryIdentifier===l._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ii(h){let l="";for(let c=h.pieceNum_;c<h.pieces_.length;c++)""!==h.pieces_[c]&&(l+="/"+encodeURIComponent(String(h.pieces_[c])));return l||"/"}(this._path)}}function Ou(h,l){if(!0===h._orderByCalled)throw new Error(l+": You can't combine multiple orderBy calls.")}function fl(h){let l=null,c=null;if(h.hasStart()&&(l=h.getIndexStartValue()),h.hasEnd()&&(c=h.getIndexEndValue()),h.getIndex()===ns){const g="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",T="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==Er)throw new Error(g);if("string"!=typeof l)throw new Error(T)}if(h.hasEnd()){if(h.getIndexEndName()!==ar)throw new Error(g);if("string"!=typeof c)throw new Error(T)}}else if(h.getIndex()===Sr){if(null!=l&&!sl(l)||null!=c&&!sl(c))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,G.hu)(h.getIndex()instanceof aa||h.getIndex()===go,"unknown index type."),null!=l&&"object"==typeof l||null!=c&&"object"==typeof c)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function tc(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class li extends nu{constructor(l,c){super(l,c,new mo,!1)}get parent(){const l=Fi(this._path);return null===l?null:new li(this._repo,l)}get root(){let l=this;for(;null!==l.parent;)l=l.parent;return l}}class ya{constructor(l,c,g){this._node=l,this.ref=c,this._index=g}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(l){const c=new Ge(l),g=ku(this.ref,l);return new ya(this._node.getChild(c),g,Sr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(l){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(g,T)=>l(new ya(T,ku(this.ref,g),Sr)))}hasChild(l){const c=new Ge(l);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ru(h,l){return(h=(0,G.m9)(h))._checkNotDeleted("ref"),void 0!==l?ku(h._root,l):h._root}function nc(h,l){(h=(0,G.m9)(h))._checkNotDeleted("refFromURL");const c=kc(l,h._repo.repoInfo_.nodeAdmin);Wl("refFromURL",c);const g=c.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&g.host!==h._repo.repoInfo_.host&&pr("refFromURL: Host name does not match the current database: (found "+g.host+" but expected "+h._repo.repoInfo_.host+")"),ru(h,c.path.toString())}function ku(h,l){return null===mt((h=(0,G.m9)(h))._path)?((c=l)&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Dc("child","path",c,!1)):Dc("child","path",l,!1),new li(h._repo,Fn(h._path,l));var c}function Au(h,l){h=(0,G.m9)(h),so("set",h._path),eu("set",l,h._path,!1);const c=new G.BH;return xc(h._repo,h._path,l,null,c.wrapCallback(()=>{})),c.promise}function Wd(h,l){tu("update",l,h._path,!1);const c=new G.BH;return function Mc(h,l,c,g){ll(h,"update",{path:l.toString(),value:c});let T=!0;const k=Sl(h),z={};if(Un(c,(te,oe)=>{T=!1,z[te]=Fr(Fn(l,te),ti(oe),h.serverSyncTree_,k)}),T)bn("update() called with empty data.  Don't do anything."),Ba(0,g,"ok",void 0);else{const te=oo(h),oe=function x(h,l,c,g){!function Gs(h,l,c,g){(0,G.hu)(g>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:l,children:c,writeId:g,visible:!0}),h.visibleWrites=ct(h.visibleWrites,l,c),h.lastWriteId=g}(h.pendingWriteTree_,l,c,g);const T=Q.fromObject(c);return Ks(h,new zi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,T))}(h.serverSyncTree_,l,z,te);Zl(h.eventQueue_,oe),h.server_.merge(l.toString(),c,(_e,et)=>{const it="ok"===_e;it||Zn("update at "+l+" failed: "+_e);const wt=I(h.serverSyncTree_,te,!it),Wt=wt.length>0?Ml(h,l):l;Bo(h.eventQueue_,Wt,wt),Ba(0,g,_e,et)}),Un(c,_e=>{const et=dl(h,Fn(l,_e));Ml(h,et)}),Bo(h.eventQueue_,l,[])}}(h._repo,h._path,l,c.wrapCallback(()=>{})),c.promise}function zt(h){h=(0,G.m9)(h);const l=new md(()=>{}),c=new Ye(l);return function $h(h,l,c){const g=function Di(h,l){const c=l._path;let g=null;h.syncPointTree_.foreachOnPath(c,(_e,et)=>{const it=Zr(_e,c);g=g||Lo(et,it)});let T=h.syncPointTree_.get(c);T?g=g||Lo(T,ut()):(T=new Fo,h.syncPointTree_=h.syncPointTree_.set(c,T));const k=null!=g,z=k?new ui(g,!0,!1):null;return function j(h){return Hs(h.viewCache_)}(ga(T,l,Cr(h.pendingWriteTree_,l._path),k?z.getNode():On.EMPTY_NODE,k))}(h.serverSyncTree_,l);return null!=g?Promise.resolve(g):h.server_.get(l).then(T=>{const k=ti(T).withIndex(l._queryParams.getIndex());let z;if(Kt(h.serverSyncTree_,l,c,!0),l._queryParams.loadsAllData())z=P(h.serverSyncTree_,l._path,k);else{const te=J(h.serverSyncTree_,l);z=lt(h.serverSyncTree_,l._path,k,te)}return Bo(h.eventQueue_,l._path,z),Me(h.serverSyncTree_,l,c,null,!0),k},T=>(ll(h,"get for query "+(0,G.Wl)(l)+" failed: "+T),Promise.reject(new Error(T))))}(h._repo,h,c).then(g=>new ya(g,new li(h._repo,h._path),h._queryParams.getIndex()))}class Ye{constructor(l){this.callbackContext=l}respondsTo(l){return"value"===l}createEvent(l,c){const g=c._queryParams.getIndex();return new Pu("value",this,new ya(l.snapshotNode,new li(c._repo,c._path),g))}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,null)}createCancelEvent(l,c){return this.callbackContext.hasCancelCallback?new Rl(this,l,c):null}matches(l){return l instanceof Ye&&(!l.callbackContext||!this.callbackContext||l.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class bt{constructor(l,c){this.eventType=l,this.callbackContext=c}respondsTo(l){let c="children_added"===l?"child_added":l;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(l,c){return this.callbackContext.hasCancelCallback?new Rl(this,l,c):null}createEvent(l,c){(0,G.hu)(null!=l.childName,"Child events should have a childName.");const g=ku(new li(c._repo,c._path),l.childName),T=c._queryParams.getIndex();return new Pu(l.type,this,new ya(l.snapshotNode,g,T),l.prevName)}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,l.prevName)}matches(l){return l instanceof bt&&this.eventType===l.eventType&&(!this.callbackContext||!l.callbackContext||this.callbackContext.matches(l.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function as(h,l,c,g,T){let k;if("object"==typeof g&&(k=void 0,T=g),"function"==typeof g&&(k=g),T&&T.onlyOnce){const oe=c,_e=(et,it)=>{Hd(h._repo,h,te),oe(et,it)};_e.userCallback=c.userCallback,_e.context=c.context,c=_e}const z=new md(c,k||void 0),te="value"===l?new Ye(z):new bt(l,z);return function pd(h,l,c){let g;g=".info"===mt(l._path)?Kt(h.infoSyncTree_,l,c):Kt(h.serverSyncTree_,l,c),Sc(h.eventQueue_,l._path,g)}(h._repo,h,te),()=>Hd(h._repo,h,te)}function gu(h,l,c,g){return as(h,"value",l,c,g)}function yd(h,l,c,g){return as(h,"child_added",l,c,g)}function Fc(h,l,c,g){return as(h,"child_changed",l,c,g)}function vd(h,l,c,g){return as(h,"child_moved",l,c,g)}function pl(h,l,c,g){return as(h,"child_removed",l,c,g)}function qd(h,l,c){let g=null;const T=c?new md(c):null;"value"===l?g=new Ye(T):l&&(g=new bt(l,T)),Hd(h._repo,h,g)}class Wi{}class Zd extends Wi{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){eu("endAt",this._value,l._path,!0);const c=_o(l._queryParams,this._value,this._key);if(tc(c),fl(c),l._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new nu(l._repo,l._path,c,l._orderByCalled)}}class Kd extends Wi{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){eu("endBefore",this._value,l._path,!1);const c=function ca(h,l,c){let g;return g=_o(h,l,h.index_===ns||c?c:Er),g.endBeforeSet_=!0,g}(l._queryParams,this._value,this._key);if(tc(c),fl(c),l._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new nu(l._repo,l._path,c,l._orderByCalled)}}class Hn extends Wi{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){eu("startAt",this._value,l._path,!0);const c=la(l._queryParams,this._value,this._key);if(tc(c),fl(c),l._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new nu(l._repo,l._path,c,l._orderByCalled)}}class Lc extends Wi{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){eu("startAfter",this._value,l._path,!1);const c=function Wo(h,l,c){let g;return g=la(h,l,h.index_===ns||c?c:ar),g.startAfterSet_=!0,g}(l._queryParams,this._value,this._key);if(tc(c),fl(c),l._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new nu(l._repo,l._path,c,l._orderByCalled)}}class Mn extends Wi{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new nu(l._repo,l._path,function _s(h,l){const c=h.copy();return c.limitSet_=!0,c.limit_=l,c.viewFrom_="l",c}(l._queryParams,this._limit),l._orderByCalled)}}class _r extends Wi{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new nu(l._repo,l._path,function Wa(h,l){const c=h.copy();return c.limitSet_=!0,c.limit_=l,c.viewFrom_="r",c}(l._queryParams,this._limit),l._orderByCalled)}}class Cs extends Wi{constructor(l){super(),this._path=l}_apply(l){Ou(l,"orderByChild");const c=new Ge(this._path);if(Bn(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const g=new aa(c),T=oi(l._queryParams,g);return fl(T),new nu(l._repo,l._path,T,!0)}}class p extends Wi{_apply(l){Ou(l,"orderByKey");const c=oi(l._queryParams,ns);return fl(c),new nu(l._repo,l._path,c,!0)}}class S extends Wi{_apply(l){Ou(l,"orderByPriority");const c=oi(l._queryParams,Sr);return fl(c),new nu(l._repo,l._path,c,!0)}}class ie extends Wi{_apply(l){Ou(l,"orderByValue");const c=oi(l._queryParams,go);return fl(c),new nu(l._repo,l._path,c,!0)}}class tt extends Wi{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){if(eu("equalTo",this._value,l._path,!1),l._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(l._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Zd(this._value,this._key)._apply(new Hn(this._value,this._key)._apply(l))}}function Yt(h,...l){let c=(0,G.m9)(h);for(const g of l)c=g._apply(c);return c}(function Ws(h){(0,G.hu)(!os,"__referenceConstructor has already been defined"),os=h})(li),function Ja(h){(0,G.hu)(!ma,"__referenceConstructor has already been defined"),ma=h}(li);const Rn={};function _u(h,l,c,g,T){let k=g||h.options.databaseURL;void 0===k&&(h.options.projectId||pr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bn("Using default host for project ",h.options.projectId),k=`${h.options.projectId}-default-rtdb.firebaseio.com`);let oe,_e,z=kc(k,T),te=z.repoInfo;typeof process<"u"&&process.env&&(_e=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_e?(oe=!0,k=`http://${_e}?ns=${te.namespace}`,z=kc(k,T),te=z.repoInfo):oe=!z.repoInfo.secure;const et=T&&oe?new yn(yn.OWNER):new Ii(h.name,h.options,l);Wl("Invalid Firebase Database URL",z),Bn(z.path)||pr("Database URL must point to the root of a Firebase Database (not including a child path).");const it=function ze(h,l,c,g){let T=Rn[l.name];T||(T={},Rn[l.name]=T);let k=T[h.toURLString()];return k&&pr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),k=new jd(h,false,c,g),T[h.toURLString()]=k,k}(te,h,et,new tr(h.name,c));return new ea(it,h)}class ea{constructor(l,c){this._repoInternal=l,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Jo(h,l,c){if(h.stats_=ve(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new to(h.repoInfo_,(g,T,k,z)=>{dd(h,g,T,k,z)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>hd(h,!0),0);else{if(typeof c<"u"&&null!==c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,G.Wl)(c)}catch(g){throw new Error("Invalid authOverride provided: "+g)}}h.persistentConnection_=new si(h.repoInfo_,l,(g,T,k,z)=>{dd(h,g,T,k,z)},g=>{hd(h,g)},g=>{!function Ac(h,l){Un(l,(c,g)=>{$d(h,c,g)})}(h,g)},h.authTokenProvider_,h.appCheckProvider_,c),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(g=>{h.server_.refreshAuthToken(g)}),h.appCheckProvider_.addTokenChangeListener(g=>{h.server_.refreshAppCheckToken(g.token)}),h.statsReporter_=function we(h,l){const c=h.toString();return Wn[c]||(Wn[c]=l()),Wn[c]}(h.repoInfo_,()=>new Wu(h.stats_,h.server_)),h.infoData_=new yo,h.infoSyncTree_=new wc({startListening:(g,T,k,z)=>{let te=[];const oe=h.infoData_.getNode(g._path);return oe.isEmpty()||(te=P(h.infoSyncTree_,g._path,oe),setTimeout(()=>{z("ok")},0)),te},stopListening:()=>{}}),$d(h,"connected",!1),h.serverSyncTree_=new wc({startListening:(g,T,k,z)=>(h.server_.listen(g,k,T,(te,oe)=>{const _e=z(te,oe);Bo(h.eventQueue_,g._path,_e)}),[]),stopListening:(g,T)=>{h.server_.unlisten(g,T)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new li(this._repo,ut())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function wd(h,l){const c=Rn[l];(!c||c[h.key]!==h)&&pr(`Database ${l}(${h.repoInfo_}) has already been deleted.`),Al(h),delete c[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(l){null===this._rootInternal&&pr("Cannot call "+l+" on a deleted database.")}}function Uc(){Tr.IS_TRANSPORT_INITIALIZED&&Zn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Nl(){Uc(),kn.forceDisallow()}function Uu(){Uc(),hr.forceDisallow(),kn.forceAllow()}function Yd(h,l){nn(h,l)}const Vu={".sv":"timestamp"};class ym{constructor(l,c){this.committed=l,this.snapshot=c}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}si.prototype.simpleListen=function(h,l){this.sendRequest("q",{p:h},l)},si.prototype.echo=function(h,l){this.sendRequest("echo",{d:h},l)},function Ay(h){ke(vt.SDK_VERSION),(0,vt._registerComponent)(new rt.wA("database",(l,{instanceIdentifier:c})=>_u(l.getProvider("app").getImmediate(),l.getProvider("auth-internal"),l.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,vt.registerVersion)(ye,"0.14.4",h),(0,vt.registerVersion)(ye,"0.14.4","esm2017")}();const Bc=new Xe.Yd("@firebase/database-compat"),Ed=function(h){Bc.warn("FIREBASE WARNING: "+h)};class wm{constructor(l){this._delegate=l}cancel(l){(0,G.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,G.Wj)("OnDisconnect.cancel","onComplete",l,!0);const c=this._delegate.cancel();return l&&c.then(()=>l(null),g=>l(g)),c}remove(l){(0,G.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,G.Wj)("OnDisconnect.remove","onComplete",l,!0);const c=this._delegate.remove();return l&&c.then(()=>l(null),g=>l(g)),c}set(l,c){(0,G.Dv)("OnDisconnect.set",1,2,arguments.length),(0,G.Wj)("OnDisconnect.set","onComplete",c,!0);const g=this._delegate.set(l);return c&&g.then(()=>c(null),T=>c(T)),g}setWithPriority(l,c,g){(0,G.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,G.Wj)("OnDisconnect.setWithPriority","onComplete",g,!0);const T=this._delegate.setWithPriority(l,c);return g&&T.then(()=>g(null),k=>g(k)),T}update(l,c){if((0,G.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(l)){const T={};for(let k=0;k<l.length;++k)T[""+k]=l[k];l=T,Ed("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,G.Wj)("OnDisconnect.update","onComplete",c,!0);const g=this._delegate.update(l);return c&&g.then(()=>c(null),T=>c(T)),g}}class Io{constructor(l,c){this.committed=l,this.snapshot=c}toJSON(){return(0,G.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ol{constructor(l,c){this._database=l,this._delegate=c}val(){return(0,G.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,G.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,G.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,G.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(l){return(0,G.Dv)("DataSnapshot.child",0,1,arguments.length),l=String(l),Dc("DataSnapshot.child","path",l,!1),new Ol(this._database,this._delegate.child(l))}hasChild(l){return(0,G.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Dc("DataSnapshot.hasChild","path",l,!1),this._delegate.hasChild(l)}getPriority(){return(0,G.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(l){return(0,G.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,G.Wj)("DataSnapshot.forEach","action",l,!1),this._delegate.forEach(c=>l(new Ol(this._database,c)))}hasChildren(){return(0,G.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,G.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,G.Dv)("DataSnapshot.ref",0,0,arguments.length),new ri(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class bs{constructor(l,c){this.database=l,this._delegate=c}on(l,c,g,T){var k;(0,G.Dv)("Query.on",2,4,arguments.length),(0,G.Wj)("Query.on","callback",c,!1);const z=bs.getCancelAndContextArgs_("Query.on",g,T),te=(_e,et)=>{c.call(z.context,new Ol(this.database,_e),et)};te.userCallback=c,te.context=z.context;const oe=null===(k=z.cancel)||void 0===k?void 0:k.bind(z.context);switch(l){case"value":return gu(this._delegate,te,oe),c;case"child_added":return yd(this._delegate,te,oe),c;case"child_removed":return pl(this._delegate,te,oe),c;case"child_changed":return Fc(this._delegate,te,oe),c;case"child_moved":return vd(this._delegate,te,oe),c;default:throw new Error((0,G.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(l,c,g){if((0,G.Dv)("Query.off",0,3,arguments.length),function(h,l,c){if(void 0!==l)switch(l){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,G.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,l),(0,G.Wj)("Query.off","callback",c,!0),(0,G.lb)("Query.off","context",g,!0),c){const T=()=>{};T.userCallback=c,T.context=g,qd(this._delegate,l,T)}else qd(this._delegate,l)}get(){return zt(this._delegate).then(l=>new Ol(this.database,l))}once(l,c,g,T){(0,G.Dv)("Query.once",1,4,arguments.length),(0,G.Wj)("Query.once","callback",c,!0);const k=bs.getCancelAndContextArgs_("Query.once",g,T),z=new G.BH,te=(_e,et)=>{const it=new Ol(this.database,_e);c&&c.call(k.context,it,et),z.resolve(it)};te.userCallback=c,te.context=k.context;const oe=_e=>{k.cancel&&k.cancel.call(k.context,_e),z.reject(_e)};switch(l){case"value":gu(this._delegate,te,oe,{onlyOnce:!0});break;case"child_added":yd(this._delegate,te,oe,{onlyOnce:!0});break;case"child_removed":pl(this._delegate,te,oe,{onlyOnce:!0});break;case"child_changed":Fc(this._delegate,te,oe,{onlyOnce:!0});break;case"child_moved":vd(this._delegate,te,oe,{onlyOnce:!0});break;default:throw new Error((0,G.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return z.promise}limitToFirst(l){return(0,G.Dv)("Query.limitToFirst",1,1,arguments.length),new bs(this.database,Yt(this._delegate,function rc(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Mn(h)}(l)))}limitToLast(l){return(0,G.Dv)("Query.limitToLast",1,1,arguments.length),new bs(this.database,Yt(this._delegate,function Of(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new _r(h)}(l)))}orderByChild(l){return(0,G.Dv)("Query.orderByChild",1,1,arguments.length),new bs(this.database,Yt(this._delegate,function E(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Dc("orderByChild","path",h,!1),new Cs(h)}(l)))}orderByKey(){return(0,G.Dv)("Query.orderByKey",0,0,arguments.length),new bs(this.database,Yt(this._delegate,function _(){return new p}()))}orderByPriority(){return(0,G.Dv)("Query.orderByPriority",0,0,arguments.length),new bs(this.database,Yt(this._delegate,function Z(){return new S}()))}orderByValue(){return(0,G.Dv)("Query.orderByValue",0,0,arguments.length),new bs(this.database,Yt(this._delegate,function Ne(){return new ie}()))}startAt(l=null,c){return(0,G.Dv)("Query.startAt",0,2,arguments.length),new bs(this.database,Yt(this._delegate,function Lu(h=null,l){return Tc("startAt","key",l,!0),new Hn(h,l)}(l,c)))}startAfter(l=null,c){return(0,G.Dv)("Query.startAfter",0,2,arguments.length),new bs(this.database,Yt(this._delegate,function qi(h,l){return Tc("startAfter","key",l,!0),new Lc(h,l)}(l,c)))}endAt(l=null,c){return(0,G.Dv)("Query.endAt",0,2,arguments.length),new bs(this.database,Yt(this._delegate,function zh(h,l){return Tc("endAt","key",l,!0),new Zd(h,l)}(l,c)))}endBefore(l=null,c){return(0,G.Dv)("Query.endBefore",0,2,arguments.length),new bs(this.database,Yt(this._delegate,function Fu(h,l){return Tc("endBefore","key",l,!0),new Kd(h,l)}(l,c)))}equalTo(l,c){return(0,G.Dv)("Query.equalTo",1,2,arguments.length),new bs(this.database,Yt(this._delegate,function Ut(h,l){return Tc("equalTo","key",l,!0),new tt(h,l)}(l,c)))}toString(){return(0,G.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,G.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(l){if((0,G.Dv)("Query.isEqual",1,1,arguments.length),!(l instanceof bs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(l._delegate)}static getCancelAndContextArgs_(l,c,g){const T={cancel:void 0,context:void 0};if(c&&g)T.cancel=c,(0,G.Wj)(l,"cancel",T.cancel,!0),T.context=g,(0,G.lb)(l,"context",T.context,!0);else if(c)if("object"==typeof c&&null!==c)T.context=c;else{if("function"!=typeof c)throw new Error((0,G.gK)(l,"cancelOrContext")+" must either be a cancel callback or a context object.");T.cancel=c}return T}get ref(){return new ri(this.database,new li(this._delegate._repo,this._delegate._path))}}class ri extends bs{constructor(l,c){super(l,new nu(c._repo,c._path,new mo,!1)),this.database=l,this._delegate=c}getKey(){return(0,G.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(l){return(0,G.Dv)("Reference.child",1,1,arguments.length),"number"==typeof l&&(l=String(l)),new ri(this.database,ku(this._delegate,l))}getParent(){(0,G.Dv)("Reference.parent",0,0,arguments.length);const l=this._delegate.parent;return l?new ri(this.database,l):null}getRoot(){return(0,G.Dv)("Reference.root",0,0,arguments.length),new ri(this.database,this._delegate.root)}set(l,c){(0,G.Dv)("Reference.set",1,2,arguments.length),(0,G.Wj)("Reference.set","onComplete",c,!0);const g=Au(this._delegate,l);return c&&g.then(()=>c(null),T=>c(T)),g}update(l,c){if((0,G.Dv)("Reference.update",1,2,arguments.length),Array.isArray(l)){const T={};for(let k=0;k<l.length;++k)T[""+k]=l[k];l=T,Ed("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}so("Reference.update",this._delegate._path),(0,G.Wj)("Reference.update","onComplete",c,!0);const g=Wd(this._delegate,l);return c&&g.then(()=>c(null),T=>c(T)),g}setWithPriority(l,c,g){(0,G.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,G.Wj)("Reference.setWithPriority","onComplete",g,!0);const T=function En(h,l,c){if(so("setWithPriority",h._path),eu("setWithPriority",l,h._path,!1),bc("setWithPriority",c,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const g=new G.BH;return xc(h._repo,h._path,l,c,g.wrapCallback(()=>{})),g.promise}(this._delegate,l,c);return g&&T.then(()=>g(null),k=>g(k)),T}remove(l){(0,G.Dv)("Reference.remove",0,1,arguments.length),(0,G.Wj)("Reference.remove","onComplete",l,!0);const c=function Os(h){return so("remove",h._path),Au(h,null)}(this._delegate);return l&&c.then(()=>l(null),g=>l(g)),c}transaction(l,c,g){(0,G.Dv)("Reference.transaction",1,3,arguments.length),(0,G.Wj)("Reference.transaction","transactionUpdate",l,!1),(0,G.Wj)("Reference.transaction","onComplete",c,!0),function(h,l,c,g){if(void 0!==c&&"boolean"!=typeof c)throw new Error((0,G.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,g);const T=function vm(h,l,c){var g;if(h=(0,G.m9)(h),so("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const T=null===(g=c?.applyLocally)||void 0===g||g,k=new G.BH,te=gu(h,()=>{});return function Nc(h,l,c,g,T,k){ll(h,"transaction on "+l);const z={path:l,update:c,onComplete:g,status:null,order:$t(),applyLocally:k,retryCount:0,unwatcher:T,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},te=Xl(h,l,void 0);z.currentInputSnapshot=te;const oe=z.update(te.val());if(void 0===oe)z.unwatcher(),z.currentOutputSnapshotRaw=null,z.currentOutputSnapshotResolved=null,z.onComplete&&z.onComplete(null,!1,z.currentInputSnapshot);else{ol("transaction failed: Data returned ",oe,z.path),z.status=0;const _e=Ec(h.transactionQueueTree_,l),et=Xu(_e)||[];let it;et.push(z),od(_e,et),"object"==typeof oe&&null!==oe&&(0,G.r3)(oe,".priority")?(it=(0,G.DV)(oe,".priority"),(0,G.hu)(sl(it),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):it=(rr(h.serverSyncTree_,l)||On.EMPTY_NODE).getPriority().val();const wt=Sl(h),Wt=ti(oe,it),Nn=Ua(Wt,te,wt);z.currentOutputSnapshotRaw=Wt,z.currentOutputSnapshotResolved=Nn,z.currentWriteId=oo(h);const jn=b(h.serverSyncTree_,l,Nn,z.currentWriteId,z.applyLocally);Bo(h.eventQueue_,l,jn),Jl(h,h.transactionQueueTree_)}}(h._repo,h._path,l,(oe,_e,et)=>{let it=null;oe?k.reject(oe):(it=new ya(et,new li(h._repo,h._path),Sr),k.resolve(new ym(_e,it)))},te,T),k.promise}(this._delegate,l,{applyLocally:g}).then(k=>new Io(k.committed,new Ol(this.database,k.snapshot)));return c&&T.then(k=>c(null,k.committed,k.snapshot),k=>c(k,!1,null)),T}setPriority(l,c){(0,G.Dv)("Reference.setPriority",1,2,arguments.length),(0,G.Wj)("Reference.setPriority","onComplete",c,!0);const g=function ln(h,l){h=(0,G.m9)(h),so("setPriority",h._path),bc("setPriority",l,!1);const c=new G.BH;return xc(h._repo,Fn(h._path,".priority"),l,null,c.wrapCallback(()=>{})),c.promise}(this._delegate,l);return c&&g.then(()=>c(null),T=>c(T)),g}push(l,c){(0,G.Dv)("Reference.push",0,2,arguments.length),(0,G.Wj)("Reference.push","onComplete",c,!0);const g=function Is(h,l){h=(0,G.m9)(h),so("push",h._path),eu("push",l,h._path,!0);const c=Kl(h._repo),g=Gh(c),T=ku(h,g),k=ku(h,g);let z;return z=null!=l?Au(k,l).then(()=>k):Promise.resolve(k),T.then=z.then.bind(z),T.catch=z.then.bind(z,void 0),T}(this._delegate,l),T=g.then(z=>new ri(this.database,z));c&&T.then(()=>c(null),z=>c(z));const k=new ri(this.database,g);return k.then=T.then.bind(T),k.catch=T.catch.bind(T,void 0),k}onDisconnect(){return so("Reference.onDisconnect",this._delegate._path),new wm(new _d(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Ju{constructor(l,c){this._delegate=l,this.app=c,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Nl,forceLongPolling:Uu}}useEmulator(l,c,g={}){!function gl(h,l,c,g={}){(h=(0,G.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&pr("Cannot call useEmulator() after instance has already been initialized.");const T=h._repoInternal;let k;if(T.repoInfo_.nodeAdmin)g.mockUserToken&&pr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),k=new yn(yn.OWNER);else if(g.mockUserToken){const z="string"==typeof g.mockUserToken?g.mockUserToken:(0,G.Sg)(g.mockUserToken,h.app.options.projectId);k=new yn(z)}!function mu(h,l,c,g){h.repoInfo_=new Ee(`${l}:${c}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams,!0),g&&(h.authTokenProvider_=g)}(T,l,c,k)}(this._delegate,l,c,g)}ref(l){if((0,G.Dv)("database.ref",0,1,arguments.length),l instanceof ri){const c=nc(this._delegate,l.toString());return new ri(this,c)}{const c=ru(this._delegate,l);return new ri(this,c)}}refFromURL(l){(0,G.Dv)("database.refFromURL",1,1,arguments.length);const g=nc(this._delegate,l);return new ri(this,g)}goOffline(){return(0,G.Dv)("database.goOffline",0,0,arguments.length),function Ff(h){(h=(0,G.m9)(h))._checkNotDeleted("goOffline"),Al(h._repo)}(this._delegate)}goOnline(){return(0,G.Dv)("database.goOnline",0,0,arguments.length),function Pl(h){(h=(0,G.m9)(h))._checkNotDeleted("goOnline"),function xl(h){h.persistentConnection_&&h.persistentConnection_.resume(ji)}(h._repo)}(this._delegate)}}Ju.ServerValue={TIMESTAMP:function $p(){return Vu}(),increment:h=>function Lf(h){return{".sv":{increment:h}}}(h)};var Bf=Object.freeze({__proto__:null,initStandalone:function Vf({app:h,url:l,version:c,customAuthImpl:g,namespace:T,nodeAdmin:k=!1}){ke(c);const z=new rt.zt("auth-internal",new rt.H0("database-standalone"));return z.setComponent(new rt.wA("auth-internal",()=>g,"PRIVATE")),{instance:new Ju(_u(h,z,void 0,l,k),h),namespace:T}}});const Wh=Ju.ServerValue;!function jc(h){h.INTERNAL.registerComponent(new rt.wA("database-compat",(l,{instanceIdentifier:c})=>{const g=l.getProvider("app-compat").getImmediate(),T=l.getProvider("database").getImmediate({identifier:c});return new Ju(T,g)},"PUBLIC").setServiceProps({Reference:ri,Query:bs,Database:Ju,DataSnapshot:Ol,enableLogging:Yd,INTERNAL:Bf,ServerValue:Wh}).setMultipleInstances(!0)),h.registerVersion("@firebase/database-compat","0.3.4")}(st.Z);var su=Y(1205),kl=Y(6217),el=Y(9260);function zp(h){return null==h}function $c(h){return"function"==typeof h.set}function Qd(h,l){return $c(l)?l:h.ref(l)}function Ll(h,l){if(function Id(h){return"string"==typeof h}(h))return l.stringCase();if($c(h))return l.firebaseCase();if(function Fl(h){return"function"==typeof h.exportVal}(h))return l.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof h)}function Ul(h,l,c="on",g=y.z){return new U.y(T=>{let k=null;return k=h[c](l,(z,te)=>{g.schedule(()=>{T.next({snapshot:z,prevKey:te})}),"once"===c&&g.schedule(()=>T.complete())},z=>{g.schedule(()=>T.error(z))}),"on"===c?{unsubscribe(){null!=k&&h.off(l,k)}}:{unsubscribe(){}}}).pipe((0,xe.U)(T=>{const{snapshot:k,prevKey:z}=T;let te=null;return k.exists()&&(te=k.key),{type:l,payload:k,prevKey:z,key:te}}),(0,Le.B)())}function Xd(h,l){const c=h.length;for(let g=0;g<c;g++)if(h[g].payload.key===l)return g;return-1}function Cd(h,l){const{payload:c,prevKey:g,key:T}=l,k=Xd(h,T),z=function Wp(h,l){if(zp(l))return 0;{const c=Xd(h,l);return-1===c?h.length:c+1}}(h,g);switch(l.type){case"value":if(l.payload&&l.payload.exists()){let te=null;l.payload.forEach(oe=>{const _e={payload:oe,type:"value",prevKey:te,key:oe.key};return te=oe.key,h=[...h,_e],!1})}return h;case"child_added":if(k>-1){const te=h[k-1];(te&&te.key||null)!==g&&(h=h.filter(oe=>oe.payload.key!==c.key)).splice(z,0,l)}else{if(null==g)return[l,...h];(h=h.slice()).splice(z,0,l)}return h;case"child_removed":return h.filter(te=>te.payload.key!==c.key);case"child_changed":return h.map(te=>te.payload.key===T?l:te);case"child_moved":if(k>-1){const te=h.splice(k,1)[0];return(h=h.slice()).splice(z,0,te),h}return h;default:return h}}function Hc(h){return(zp(h)||0===h.length)&&(h=["child_added","child_removed","child_changed","child_moved"]),h}function Zh(h,l,c){return function qh(h,l,c){return Ul(h,"value","once",c).pipe((0,Fe.w)(g=>{const T=[(0,Ae.of)(g)];return l.forEach(k=>T.push(Ul(h,k,"on",c))),(0,De.T)(...T).pipe((0,Ve.R)(Cd,[]))}),(0,ge.x)())}(h,l=Hc(l),c)}function ic(h,l,c){const g=(l=Hc(l)).map(T=>Ul(h,T,"on",c));return(0,De.T)(...g)}function Vl(h,l){return function(g,T){return Ll(g,{stringCase:()=>h.child(g)[l](T),firebaseCase:()=>g[l](T),snapshotCase:()=>g.ref[l](T)})}}function Yh(h){return function(c){return c?Ll(c,{stringCase:()=>h.child(c).remove(),firebaseCase:()=>c.remove(),snapshotCase:()=>c.ref.remove()}):h.remove()}}function Bl(h,l){return function(){return Ul(h,"value","on",l)}}const Ei=new A.OlP("angularfire2.realtimeDatabaseURL"),bd=new A.OlP("angularfire2.database.use-emulator");let Qh=(()=>{class h{constructor(c,g,T,k,z,te,oe,_e,et,it,wt,Wt,Nn,jn,Qs){this.schedulers=te;const Ji=oe,jr=(0,Et.on)(c,z,g);_e&&(0,su.nw)(jr,z,et,wt,Wt,Nn,it,jn),this.database=(0,Et.cc)(`${jr.name}.database.${T}`,"AngularFireDatabase",jr.name,()=>{const Gc=z.runOutsideAngular(()=>jr.database(T||void 0));return Ji&&Gc.useEmulator(...Ji),Gc},[Ji])}list(c,g){const T=this.schedulers.ngZone.runOutsideAngular(()=>Qd(this.database,c));let k=T;return g&&(k=g(T)),function eh(h,l){const c=l.schedulers.outsideAngular,g=l.schedulers.ngZone.run(()=>h.ref);return{query:h,update:Vl(g,"update"),set:Vl(g,"set"),push:T=>g.push(T),remove:Yh(g),snapshotChanges:T=>Zh(h,T,c).pipe(ot.iC),stateChanges:T=>ic(h,T,c).pipe(ot.iC),auditTrail:T=>function Em(h,l,c){return function Jd(h,l,c){return function Kh(h,l){return Ul(h,"value","on",l).pipe((0,xe.U)(c=>{let g;return c.payload.forEach(T=>(g=T.key,!1)),{data:c,lastKeyToLoad:g}}))}(h,c).pipe(function qe(...h){const l=(0,Qt.jO)(h);return(0,pe.e)((c,g)=>{const T=h.length,k=new Array(T);let z=h.map(()=>!1),te=!1;for(let oe=0;oe<T;oe++)(0,yt.Xf)(h[oe]).subscribe((0,Te.x)(g,_e=>{k[oe]=_e,!te&&!z[oe]&&(z[oe]=!0,(te=z.every(ht.y))&&(z=null))},At.Z));c.subscribe((0,Te.x)(g,oe=>{if(te){const _e=[oe,...k];g.next(l?l(..._e):_e)}}))})}(l),(0,xe.U)(([T,k])=>{const z=T.lastKeyToLoad,te=k.map(oe=>oe.key);return{actions:k,lastKeyToLoad:z,loadedKeys:te}}),function at(h){return(0,pe.e)((l,c)=>{let g=!1,T=0;l.subscribe((0,Te.x)(c,k=>(g||(g=!h(k,T++)))&&c.next(k)))})}(T=>-1===T.loadedKeys.indexOf(T.lastKeyToLoad)),(0,xe.U)(T=>T.actions))}(h,ic(h,l).pipe((0,Ve.R)((T,k)=>[...T,k],[])),c)}(h,T,c).pipe(ot.iC),valueChanges:(T,k)=>Zh(h,T,c).pipe((0,xe.U)(te=>te.map(oe=>k&&k.idField?Object.assign(Object.assign({},oe.payload.val()),{[k.idField]:oe.key}):oe.payload.val())),ot.iC)}}(k,this)}object(c){return function Lr(h,l){return{query:h,snapshotChanges:()=>Bl(h,l.schedulers.outsideAngular)().pipe(ot.iC),update:c=>h.ref.update(c),set:c=>h.ref.set(c),remove:()=>h.ref.remove(),valueChanges:()=>Bl(h,l.schedulers.outsideAngular)().pipe(ot.iC,(0,xe.U)(g=>g.payload.exists()?g.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Qd(this.database,c)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return h.\u0275fac=function(c){return new(c||h)(A.LFG(Et.Dh),A.LFG(Et.xv,8),A.LFG(Ei,8),A.LFG(A.Lbi),A.LFG(A.R0b),A.LFG(ot.HU),A.LFG(bd,8),A.LFG(su.zQ,8),A.LFG(su.Qv,8),A.LFG(su.L6,8),A.LFG(su._Q,8),A.LFG(su.rT,8),A.LFG(su.lh,8),A.LFG(su.f7,8),A.LFG(kl.nm,8))},h.\u0275prov=A.Yz7({token:h,factory:h.\u0275fac,providedIn:"any"}),h})(),Xh=(()=>{class h{constructor(){el.Z.registerVersion("angularfire",ot.q4.full,"rtdb-compat")}}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=A.oAB({type:h}),h.\u0275inj=A.cJS({providers:[Qh]}),h})()},2011:(qt,We,Y)=>{Y.d(We,{Dh:()=>Fe,GT:()=>xe,cc:()=>ht,hO:()=>yt,on:()=>ge,pX:()=>De,xv:()=>Ve});var A=Y(4650),y=Y(9260),U=Y(2122);qt=Y.hmd(qt);const Ae=["ngOnDestroy"],De=(at,ot,Et,ft={})=>new Proxy(at,{get:(st,rt)=>Et.runOutsideAngular(()=>{var Ct;if(at[rt])return!(null===(Ct=ft?.spy)||void 0===Ct)&&Ct.get&&ft.spy.get(rt,at[rt]),at[rt];if(Ae.indexOf(rt)>-1)return()=>{};const vt=ot.toPromise().then(G=>{const Xe=G&&G[rt];return"function"==typeof Xe?Xe.bind(G):Xe&&Xe.then?Xe.then(ye=>Et.run(()=>ye)):Et.run(()=>Xe)});return new Proxy(()=>{},{get:(G,Xe)=>vt[Xe],apply:(G,Xe,ye)=>vt.then(Ce=>{var se;const ke=Ce&&Ce(...ye);return!(null===(se=ft?.spy)||void 0===se)&&se.apply&&ft.spy.apply(rt,ye,ke),ke})})})}),xe=(at,ot)=>{ot.forEach(Et=>{Object.getOwnPropertyNames(Et.prototype||Et).forEach(ft=>{Object.defineProperty(at.prototype,ft,Object.getOwnPropertyDescriptor(Et.prototype||Et,ft))})})};class Le{constructor(ot){return ot}}const Fe=new A.OlP("angularfire2.app.options"),Ve=new A.OlP("angularfire2.app.name");function ge(at,ot,Et){const st="object"==typeof Et&&Et||{};st.name=st.name||"string"==typeof Et&&Et||"[DEFAULT]";const Ct=y.Z.apps.filter(vt=>vt&&vt.name===st.name)[0]||ot.runOutsideAngular(()=>y.Z.initializeApp(at,st));try{JSON.stringify(at)!==JSON.stringify(Ct.options)&&pe("error",`${Ct.name} Firebase App already initialized with different options${qt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Le(Ct)}const pe=(at,...ot)=>{(0,A.X6Q)()&&typeof console<"u"&&console[at](...ot)},Te={provide:Le,useFactory:ge,deps:[Fe,A.R0b,[new A.FiY,Ve]]};let yt=(()=>{class at{constructor(Et){y.Z.registerVersion("angularfire",U.q4.full,"core"),y.Z.registerVersion("angularfire",U.q4.full,"app-compat"),y.Z.registerVersion("angular",A.q4F.full,Et.toString())}static initializeApp(Et,ft){return{ngModule:at,providers:[{provide:Fe,useValue:Et},{provide:Ve,useValue:ft}]}}}return at.\u0275fac=function(Et){return new(Et||at)(A.LFG(A.Lbi))},at.\u0275mod=A.oAB({type:at}),at.\u0275inj=A.cJS({providers:[Te]}),at})();function ht(at,ot,Et,ft,st){const[,rt,Ct]=globalThis.\u0275AngularfireInstanceCache.find(vt=>vt[0]===at)||[];if(rt)return function At(at,ot){try{return at.toString()===ot.toString()}catch{return at===ot}}(st,Ct)||(qe("error",`${ot} was already initialized on the ${Et} Firebase App with different settings.${Qt?" You may need to reload as Firebase is not HMR aware.":""}`),qe("warn",{is:st,was:Ct})),rt;{const vt=ft();return globalThis.\u0275AngularfireInstanceCache.push([at,vt,st]),vt}}const Qt=!!qt.hot,qe=(at,...ot)=>{(0,A.X6Q)()&&typeof console<"u"&&console[at](...ot)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(qt,We,Y)=>{Y.d(We,{q4:()=>Tu,iC:()=>rr,fc:()=>sn,HU:()=>X,vb:()=>x,JM:()=>b});var A=Y(4650),y=Y(259),U=Y(5861),Ae=Y(9681),De=Y(2090),xe=Y(4859),Le=Y(1877),Fe=Y(8766);const Ve="@firebase/installations",ge="0.6.4",Te=`w:${ge}`,yt="FIS_v2",ot=new De.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Et(L){return L instanceof De.ZR&&L.code.includes("request-failed")}function ft({projectId:L}){return`https://firebaseinstallations.googleapis.com/v1/projects/${L}/installations`}function st(L){return{token:L.token,requestStatus:2,expiresIn:Ce(L.expiresIn),creationTime:Date.now()}}function rt(L,H){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,U.Z)(function*(L,H){const he=(yield H.json()).error;return ot.create("request-failed",{requestName:L,serverCode:he.code,serverMessage:he.message,serverStatus:he.status})})).apply(this,arguments)}function vt({apiKey:L}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":L})}function G(L,{refreshToken:H}){const J=vt(L);return J.append("Authorization",function se(L){return`${yt} ${L}`}(H)),J}function Xe(L){return ye.apply(this,arguments)}function ye(){return(ye=(0,U.Z)(function*(L){const H=yield L();return H.status>=500&&H.status<600?L():H})).apply(this,arguments)}function Ce(L){return Number(L.replace("s","000"))}function ke(L,H){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,U.Z)(function*({appConfig:L,heartbeatServiceProvider:H},{fid:J}){const he=ft(L),Pe=vt(L),je=H.getImmediate({optional:!0});if(je){const Sn=yield je.getHeartbeatsHeader();Sn&&Pe.append("x-firebase-client",Sn)}const mn={method:"POST",headers:Pe,body:JSON.stringify({fid:J,authVersion:yt,appId:L.appId,sdkVersion:Te})},wn=yield Xe(()=>fetch(he,mn));if(wn.ok){const Sn=yield wn.json();return{fid:Sn.fid||J,registrationStatus:2,refreshToken:Sn.refreshToken,authToken:st(Sn.authToken)}}throw yield rt("Create Installation",wn)})).apply(this,arguments)}function Tt(L){return new Promise(H=>{setTimeout(H,L)})}const Ot=/^[cdef][\w-]{21}$/;function kt(){try{const L=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(L),L[0]=112+L[0]%16;const J=function $t(L){return function St(L){return btoa(String.fromCharCode(...L)).replace(/\+/g,"-").replace(/\//g,"_")}(L).substr(0,22)}(L);return Ot.test(J)?J:""}catch{return""}}function Dt(L){return`${L.appName}!${L.appId}`}const Nt=new Map;function Cn(L,H){const J=Dt(L);bn(J,H),function Qr(L,H){const J=function pr(){return!Ur&&"BroadcastChannel"in self&&(Ur=new BroadcastChannel("[Firebase] FID Change"),Ur.onmessage=L=>{bn(L.data.key,L.data.fid)}),Ur}();J&&J.postMessage({key:L,fid:H}),function Zn(){0===Nt.size&&Ur&&(Ur.close(),Ur=null)}()}(J,H)}function bn(L,H){const J=Nt.get(L);if(J)for(const he of J)he(H)}let Ur=null;const Xr="firebase-installations-store";let Er=null;function ar(){return Er||(Er=(0,Fe.X3)("firebase-installations-database",1,{upgrade:(L,H)=>{0===H&&L.createObjectStore(Xr)}})),Er}function Tn(L,H){return br.apply(this,arguments)}function br(){return(br=(0,U.Z)(function*(L,H){const J=Dt(L),Pe=(yield ar()).transaction(Xr,"readwrite"),je=Pe.objectStore(Xr),It=yield je.get(J);return yield je.put(H,J),yield Pe.done,(!It||It.fid!==H.fid)&&Cn(L,H.fid),H})).apply(this,arguments)}function Lt(L){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,U.Z)(function*(L){const H=Dt(L),he=(yield ar()).transaction(Xr,"readwrite");yield he.objectStore(Xr).delete(H),yield he.done})).apply(this,arguments)}function $i(L,H){return Un.apply(this,arguments)}function Un(){return(Un=(0,U.Z)(function*(L,H){const J=Dt(L),Pe=(yield ar()).transaction(Xr,"readwrite"),je=Pe.objectStore(Xr),It=yield je.get(J),mn=H(It);return void 0===mn?yield je.delete(J):yield je.put(mn,J),yield Pe.done,mn&&(!It||It.fid!==mn.fid)&&Cn(L,mn.fid),mn})).apply(this,arguments)}function Jr(L){return dr.apply(this,arguments)}function dr(){return(dr=(0,U.Z)(function*(L){let H;const J=yield $i(L.appConfig,he=>{const Pe=Gt(he),je=hn(L,Pe);return H=je.registrationPromise,je.installationEntry});return""===J.fid?{installationEntry:yield H}:{installationEntry:J,registrationPromise:H}})).apply(this,arguments)}function Gt(L){return gr(L||{fid:kt(),registrationStatus:0})}function hn(L,H){if(0===H.registrationStatus){if(!navigator.onLine)return{installationEntry:H,registrationPromise:Promise.reject(ot.create("app-offline"))};const J={fid:H.fid,registrationStatus:1,registrationTime:Date.now()},he=function An(L,H){return us.apply(this,arguments)}(L,J);return{installationEntry:J,registrationPromise:he}}return 1===H.registrationStatus?{installationEntry:H,registrationPromise:Kn(L)}:{installationEntry:H}}function us(){return(us=(0,U.Z)(function*(L,H){try{const J=yield ke(L,H);return Tn(L.appConfig,J)}catch(J){throw Et(J)&&409===J.customData.serverCode?yield Lt(L.appConfig):yield Tn(L.appConfig,{fid:H.fid,registrationStatus:0}),J}})).apply(this,arguments)}function Kn(L){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,U.Z)(function*(L){let H=yield xr(L.appConfig);for(;1===H.registrationStatus;)yield Tt(100),H=yield xr(L.appConfig);if(0===H.registrationStatus){const{installationEntry:J,registrationPromise:he}=yield Jr(L);return he||J}return H})).apply(this,arguments)}function xr(L){return $i(L,H=>{if(!H)throw ot.create("installation-not-found");return gr(H)})}function gr(L){return function Vr(L){return 1===L.registrationStatus&&L.registrationTime+1e4<Date.now()}(L)?{fid:L.fid,registrationStatus:0}:L}function tr(L,H){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,U.Z)(function*({appConfig:L,heartbeatServiceProvider:H},J){const he=yn(L,J),Pe=G(L,J),je=H.getImmediate({optional:!0});if(je){const Sn=yield je.getHeartbeatsHeader();Sn&&Pe.append("x-firebase-client",Sn)}const mn={method:"POST",headers:Pe,body:JSON.stringify({installation:{sdkVersion:Te,appId:L.appId}})},wn=yield Xe(()=>fetch(he,mn));if(wn.ok)return st(yield wn.json());throw yield rt("Generate Auth Token",wn)})).apply(this,arguments)}function yn(L,{fid:H}){return`${ft(L)}/${H}/authTokens:generate`}function fn(L){return zr.apply(this,arguments)}function zr(){return(zr=(0,U.Z)(function*(L,H=!1){let J;const he=yield $i(L.appConfig,je=>{if(!Dn(je))throw ot.create("not-registered");const It=je.authToken;if(!H&&ei(It))return je;if(1===It.requestStatus)return J=Mt(L,H),je;{if(!navigator.onLine)throw ot.create("app-offline");const mn=fe(je);return J=pn(L,mn),mn}});return J?yield J:he.authToken})).apply(this,arguments)}function Mt(L,H){return pt.apply(this,arguments)}function pt(){return(pt=(0,U.Z)(function*(L,H){let J=yield Pt(L.appConfig);for(;1===J.authToken.requestStatus;)yield Tt(100),J=yield Pt(L.appConfig);const he=J.authToken;return 0===he.requestStatus?fn(L,H):he})).apply(this,arguments)}function Pt(L){return $i(L,H=>{if(!Dn(H))throw ot.create("not-registered");return function Ee(L){return 1===L.requestStatus&&L.requestTime+1e4<Date.now()}(H.authToken)?Object.assign(Object.assign({},H),{authToken:{requestStatus:0}}):H})}function pn(L,H){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,U.Z)(function*(L,H){try{const J=yield tr(L,H),he=Object.assign(Object.assign({},H),{authToken:J});return yield Tn(L.appConfig,he),J}catch(J){if(!Et(J)||401!==J.customData.serverCode&&404!==J.customData.serverCode){const he=Object.assign(Object.assign({},H),{authToken:{requestStatus:0}});yield Tn(L.appConfig,he)}else yield Lt(L.appConfig);throw J}})).apply(this,arguments)}function Dn(L){return void 0!==L&&2===L.registrationStatus}function ei(L){return 2===L.requestStatus&&!function me(L){const H=Date.now();return H<L.creationTime||L.creationTime+L.expiresIn<H+36e5}(L)}function fe(L){const H={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},L),{authToken:H})}function Be(){return(Be=(0,U.Z)(function*(L){const H=L,{installationEntry:J,registrationPromise:he}=yield Jr(H);return he?he.catch(console.error):fn(H).catch(console.error),J.fid})).apply(this,arguments)}function on(){return(on=(0,U.Z)(function*(L,H=!1){const J=L;return yield Wn(J),(yield fn(J,H)).token})).apply(this,arguments)}function Wn(L){return ve.apply(this,arguments)}function ve(){return(ve=(0,U.Z)(function*(L){const{registrationPromise:H}=yield Jr(L);H&&(yield H)})).apply(this,arguments)}function ls(L){return ot.create("missing-app-config-values",{valueName:L})}const Vs="installations",mr=L=>{const H=L.getProvider("app").getImmediate(),J=function Br(L){if(!L||!L.options)throw ls("App Configuration");if(!L.name)throw ls("App Name");const H=["projectId","apiKey","appId"];for(const J of H)if(!L.options[J])throw ls(J);return{appName:L.name,projectId:L.options.projectId,apiKey:L.options.apiKey,appId:L.options.appId}}(H);return{app:H,appConfig:J,heartbeatServiceProvider:(0,Ae._getProvider)(H,"heartbeat"),_delete:()=>Promise.resolve()}},di=L=>{const H=L.getProvider("app").getImmediate(),J=(0,Ae._getProvider)(H,Vs).getImmediate();return{getId:()=>function nt(L){return Be.apply(this,arguments)}(J),getToken:Pe=>function Ft(L){return on.apply(this,arguments)}(J,Pe)}};(function Do(){(0,Ae._registerComponent)(new xe.wA(Vs,mr,"PUBLIC")),(0,Ae._registerComponent)(new xe.wA("installations-internal",di,"PRIVATE"))})(),(0,Ae.registerVersion)(Ve,ge),(0,Ae.registerVersion)(Ve,ge,"esm2017");const Js="@firebase/remote-config",kn=new De.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ds{constructor(H,J,he,Pe){this.client=H,this.storage=J,this.storageCache=he,this.logger=Pe}isCachedDataFresh(H,J){if(!J)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const he=Date.now()-J,Pe=he<=H;return this.logger.debug(`Config fetch cache check. Cache age millis: ${he}. Cache max age millis (minimumFetchIntervalMillis setting): ${H}. Is cache hit: ${Pe}.`),Pe}fetch(H){var J=this;return(0,U.Z)(function*(){const[he,Pe]=yield Promise.all([J.storage.getLastSuccessfulFetchTimestampMillis(),J.storage.getLastSuccessfulFetchResponse()]);if(Pe&&J.isCachedDataFresh(H.cacheMaxAgeMillis,he))return Pe;H.eTag=Pe&&Pe.eTag;const je=yield J.client.fetch(H),It=[J.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===je.status&&It.push(J.storage.setLastSuccessfulFetchResponse(je)),yield Promise.all(It),je})()}}function ts(L=navigator){return L.languages&&L.languages[0]||L.language}class fs{constructor(H,J,he,Pe,je,It){this.firebaseInstallations=H,this.sdkVersion=J,this.namespace=he,this.projectId=Pe,this.apiKey=je,this.appId=It}fetch(H){var J=this;return(0,U.Z)(function*(){const[he,Pe]=yield Promise.all([J.firebaseInstallations.getId(),J.firebaseInstallations.getToken()]),It=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${J.projectId}/namespaces/${J.namespace}:fetch?key=${J.apiKey}`,mn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":H.eTag||"*"},wn={sdk_version:J.sdkVersion,app_instance_id:he,app_instance_id_token:Pe,app_id:J.appId,language_code:ts()},Sn={method:"POST",headers:mn,body:JSON.stringify(wn)},ir=fetch(It,Sn),qn=new Promise((La,Fr)=>{H.signal.addEventListener(()=>{const Ua=new Error("The operation was aborted.");Ua.name="AbortError",Fr(Ua)})});let Vo;try{yield Promise.race([ir,qn]),Vo=yield ir}catch(La){let Fr="fetch-client-network";throw"AbortError"===La?.name&&(Fr="fetch-timeout"),kn.create(Fr,{originalErrorMessage:La?.message})}let Si=Vo.status;const _a=Vo.headers.get("ETag")||void 0;let Qu,Du;if(200===Vo.status){let La;try{La=yield Vo.json()}catch(Fr){throw kn.create("fetch-client-parse",{originalErrorMessage:Fr?.message})}Qu=La.entries,Du=La.state}if("INSTANCE_STATE_UNSPECIFIED"===Du?Si=500:"NO_CHANGE"===Du?Si=304:("NO_TEMPLATE"===Du||"EMPTY_CONFIG"===Du)&&(Qu={}),304!==Si&&200!==Si)throw kn.create("fetch-status",{httpStatus:Si});return{status:Si,eTag:_a,config:Qu}})()}}class be{constructor(H,J){this.client=H,this.storage=J}fetch(H){var J=this;return(0,U.Z)(function*(){const he=(yield J.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return J.attemptFetch(H,he)})()}attemptFetch(H,{throttleEndTimeMillis:J,backoffCount:he}){var Pe=this;return(0,U.Z)(function*(){yield function Ss(L,H){return new Promise((J,he)=>{const Pe=Math.max(H-Date.now(),0),je=setTimeout(J,Pe);L.addEventListener(()=>{clearTimeout(je),he(kn.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}(H.signal,J);try{const je=yield Pe.client.fetch(H);return yield Pe.storage.deleteThrottleMetadata(),je}catch(je){if(!function Ie(L){if(!(L instanceof De.ZR&&L.customData))return!1;const H=Number(L.customData.httpStatus);return 429===H||500===H||503===H||504===H}(je))throw je;const It={throttleEndTimeMillis:Date.now()+(0,De.$s)(he),backoffCount:he+1};return yield Pe.storage.setThrottleMetadata(It),Pe.attemptFetch(H,It)}})()}}class ut{constructor(H,J,he,Pe,je){this.app=H,this._client=J,this._storageCache=he,this._storage=Pe,this._logger=je,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function mt(L,H){const J=L.target.error||void 0;return kn.create(H,{originalErrorMessage:J&&J?.message})}const _n="app_namespace_store";class Ci{constructor(H,J,he,Pe=function ii(){return new Promise((L,H)=>{try{const J=indexedDB.open("firebase_remote_config",1);J.onerror=he=>{H(mt(he,"storage-open"))},J.onsuccess=he=>{L(he.target.result)},J.onupgradeneeded=he=>{0===he.oldVersion&&he.target.result.createObjectStore(_n,{keyPath:"compositeKey"})}}catch(J){H(kn.create("storage-open",{originalErrorMessage:J?.message}))}})}()){this.appId=H,this.appName=J,this.namespace=he,this.openDbPromise=Pe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(H){return this.set("last_fetch_status",H)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(H){return this.set("last_successful_fetch_timestamp_millis",H)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(H){return this.set("last_successful_fetch_response",H)}getActiveConfig(){return this.get("active_config")}setActiveConfig(H){return this.set("active_config",H)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(H){return this.set("active_config_etag",H)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(H){return this.set("throttle_metadata",H)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(H){var J=this;return(0,U.Z)(function*(){const he=yield J.openDbPromise;return new Promise((Pe,je)=>{const mn=he.transaction([_n],"readonly").objectStore(_n),wn=J.createCompositeKey(H);try{const Sn=mn.get(wn);Sn.onerror=ir=>{je(mt(ir,"storage-get"))},Sn.onsuccess=ir=>{const qn=ir.target.result;Pe(qn?qn.value:void 0)}}catch(Sn){je(kn.create("storage-get",{originalErrorMessage:Sn?.message}))}})})()}set(H,J){var he=this;return(0,U.Z)(function*(){const Pe=yield he.openDbPromise;return new Promise((je,It)=>{const wn=Pe.transaction([_n],"readwrite").objectStore(_n),Sn=he.createCompositeKey(H);try{const ir=wn.put({compositeKey:Sn,value:J});ir.onerror=qn=>{It(mt(qn,"storage-set"))},ir.onsuccess=()=>{je()}}catch(ir){It(kn.create("storage-set",{originalErrorMessage:ir?.message}))}})})()}delete(H){var J=this;return(0,U.Z)(function*(){const he=yield J.openDbPromise;return new Promise((Pe,je)=>{const mn=he.transaction([_n],"readwrite").objectStore(_n),wn=J.createCompositeKey(H);try{const Sn=mn.delete(wn);Sn.onerror=ir=>{je(mt(ir,"storage-delete"))},Sn.onsuccess=()=>{Pe()}}catch(Sn){je(kn.create("storage-delete",{originalErrorMessage:Sn?.message}))}})})()}createCompositeKey(H){return[this.appId,this.appName,this.namespace,H].join()}}class Fi{constructor(H){this.storage=H}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var H=this;return(0,U.Z)(function*(){const J=H.storage.getLastFetchStatus(),he=H.storage.getLastSuccessfulFetchTimestampMillis(),Pe=H.storage.getActiveConfig(),je=yield J;je&&(H.lastFetchStatus=je);const It=yield he;It&&(H.lastSuccessfulFetchTimestampMillis=It);const mn=yield Pe;mn&&(H.activeConfig=mn)})()}setLastFetchStatus(H){return this.lastFetchStatus=H,this.storage.setLastFetchStatus(H)}setLastSuccessfulFetchTimestampMillis(H){return this.lastSuccessfulFetchTimestampMillis=H,this.storage.setLastSuccessfulFetchTimestampMillis(H)}setActiveConfig(H){return this.activeConfig=H,this.storage.setActiveConfig(H)}}function au(){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,U.Z)(function*(){if(!(0,De.hl)())return!1;try{return yield(0,De.eu)()}catch{return!1}})).apply(this,arguments)}!function Fn(){(0,Ae._registerComponent)(new xe.wA("remote-config",function L(H,{instanceIdentifier:J}){const he=H.getProvider("app").getImmediate(),Pe=H.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw kn.create("registration-window");if(!(0,De.hl)())throw kn.create("indexed-db-unavailable");const{projectId:je,apiKey:It,appId:mn}=he.options;if(!je)throw kn.create("registration-project-id");if(!It)throw kn.create("registration-api-key");if(!mn)throw kn.create("registration-app-id");const wn=new Ci(mn,he.name,J=J||"firebase"),Sn=new Fi(wn),ir=new Le.Yd(Js);ir.logLevel=Le.in.ERROR;const qn=new fs(Pe,Ae.SDK_VERSION,J,je,It,mn),Vo=new be(qn,wn),Si=new Ds(Vo,wn,Sn,ir),_a=new ut(he,Si,Sn,wn,ir);return function fr(L){const H=(0,De.m9)(L);H._initializePromise||(H._initializePromise=H._storageCache.loadFromStorage().then(()=>{H._isInitializationComplete=!0}))}(_a),_a},"PUBLIC").setMultipleInstances(!0)),(0,Ae.registerVersion)(Js,"0.4.4"),(0,Ae.registerVersion)(Js,"0.4.4","esm2017")}();const Yi="/firebase-messaging-sw.js",hi="/firebase-cloud-messaging-push-scope",Hi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",uo="google.c.a.c_id",Bs="google.c.a.c_l",ba="google.c.a.ts",lo="google.c.a.e";var xs=(()=>{return(L=xs||(xs={})).PUSH_RECEIVED="push-received",L.NOTIFICATION_CLICKED="notification-clicked",xs;var L})();function ps(L){const H=new Uint8Array(L);return btoa(String.fromCharCode(...H)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zu(L){const J=(L+"=".repeat((4-L.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),he=atob(J),Pe=new Uint8Array(he.length);for(let je=0;je<he.length;++je)Pe[je]=he.charCodeAt(je);return Pe}const Ta="fcm_token_details_db",si="fcm_token_object_Store";function $n(L){return uu.apply(this,arguments)}function uu(){return uu=(0,U.Z)(function*(L){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(je=>je.name).includes(Ta))return null;let H=null;return(yield(0,Fe.X3)(Ta,5,{upgrade:(he=(0,U.Z)(function*(Pe,je,It,mn){var wn;if(je<2||!Pe.objectStoreNames.contains(si))return;const Sn=mn.objectStore(si),ir=yield Sn.index("fcmSenderId").get(L);if(yield Sn.clear(),ir)if(2===je){const qn=ir;if(!qn.auth||!qn.p256dh||!qn.endpoint)return;H={token:qn.fcmToken,createTime:null!==(wn=qn.createTime)&&void 0!==wn?wn:Date.now(),subscriptionOptions:{auth:qn.auth,p256dh:qn.p256dh,endpoint:qn.endpoint,swScope:qn.swScope,vapidKey:"string"==typeof qn.vapidKey?qn.vapidKey:ps(qn.vapidKey)}}}else if(3===je){const qn=ir;H={token:qn.fcmToken,createTime:qn.createTime,subscriptionOptions:{auth:ps(qn.auth),p256dh:ps(qn.p256dh),endpoint:qn.endpoint,swScope:qn.swScope,vapidKey:ps(qn.vapidKey)}}}else if(4===je){const qn=ir;H={token:qn.fcmToken,createTime:qn.createTime,subscriptionOptions:{auth:ps(qn.auth),p256dh:ps(qn.p256dh),endpoint:qn.endpoint,swScope:qn.swScope,vapidKey:ps(qn.vapidKey)}}}}),function(je,It,mn,wn){return he.apply(this,arguments)})})).close(),yield(0,Fe.Lj)(Ta),yield(0,Fe.Lj)("fcm_vapid_details_db"),yield(0,Fe.Lj)("undefined"),Ho(H)?H:null;var he}),uu.apply(this,arguments)}function Ho(L){if(!L||!L.subscriptionOptions)return!1;const{subscriptionOptions:H}=L;return"number"==typeof L.createTime&&L.createTime>0&&"string"==typeof L.token&&L.token.length>0&&"string"==typeof H.auth&&H.auth.length>0&&"string"==typeof H.p256dh&&H.p256dh.length>0&&"string"==typeof H.endpoint&&H.endpoint.length>0&&"string"==typeof H.swScope&&H.swScope.length>0&&"string"==typeof H.vapidKey&&H.vapidKey.length>0}const js="firebase-messaging-store";let Gi=null;function So(){return Gi||(Gi=(0,Fe.X3)("firebase-messaging-database",1,{upgrade:(L,H)=>{0===H&&L.createObjectStore(js)}})),Gi}function bi(L){return ho.apply(this,arguments)}function ho(){return(ho=(0,U.Z)(function*(L){const H=xo(L),he=yield(yield So()).transaction(js).objectStore(js).get(H);if(he)return he;{const Pe=yield $n(L.appConfig.senderId);if(Pe)return yield fo(L,Pe),Pe}})).apply(this,arguments)}function fo(L,H){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,U.Z)(function*(L,H){const J=xo(L),Pe=(yield So()).transaction(js,"readwrite");return yield Pe.objectStore(js).put(H,J),yield Pe.done,H})).apply(this,arguments)}function lu(L){return $s.apply(this,arguments)}function $s(){return($s=(0,U.Z)(function*(L){const H=xo(L),he=(yield So()).transaction(js,"readwrite");yield he.objectStore(js).delete(H),yield he.done})).apply(this,arguments)}function xo({appConfig:L}){return L.appId}const Dr=new De.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function po(L,H){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,U.Z)(function*(L,H){const J=yield oa(L),he=Mo(H),Pe={method:"POST",headers:J,body:JSON.stringify(he)};let je;try{je=yield(yield fetch(cu(L.appConfig),Pe)).json()}catch(It){throw Dr.create("token-subscribe-failed",{errorInfo:It?.toString()})}if(je.error)throw Dr.create("token-subscribe-failed",{errorInfo:je.error.message});if(!je.token)throw Dr.create("token-subscribe-no-token");return je.token})).apply(this,arguments)}function Iu(L,H){return sa.apply(this,arguments)}function sa(){return(sa=(0,U.Z)(function*(L,H){const J=yield oa(L),he=Mo(H.subscriptionOptions),Pe={method:"PATCH",headers:J,body:JSON.stringify(he)};let je;try{je=yield(yield fetch(`${cu(L.appConfig)}/${H.token}`,Pe)).json()}catch(It){throw Dr.create("token-update-failed",{errorInfo:It?.toString()})}if(je.error)throw Dr.create("token-update-failed",{errorInfo:je.error.message});if(!je.token)throw Dr.create("token-update-no-token");return je.token})).apply(this,arguments)}function Li(L,H){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,U.Z)(function*(L,H){const he={method:"DELETE",headers:yield oa(L)};try{const je=yield(yield fetch(`${cu(L.appConfig)}/${H}`,he)).json();if(je.error)throw Dr.create("token-unsubscribe-failed",{errorInfo:je.error.message})}catch(Pe){throw Dr.create("token-unsubscribe-failed",{errorInfo:Pe?.toString()})}})).apply(this,arguments)}function cu({projectId:L}){return`https://fcmregistrations.googleapis.com/v1/projects/${L}/registrations`}function oa(L){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,U.Z)(function*({appConfig:L,installations:H}){const J=yield H.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":L.apiKey,"x-goog-firebase-installations-auth":`FIS ${J}`})})).apply(this,arguments)}function Mo({p256dh:L,auth:H,endpoint:J,vapidKey:he}){const Pe={web:{endpoint:J,auth:H,p256dh:L}};return he!==Hi&&(Pe.web.applicationPubKey=he),Pe}const fi=6048e5;function gs(L){return yi.apply(this,arguments)}function yi(){return(yi=(0,U.Z)(function*(L){const H=yield zo(L.swRegistration,L.vapidKey),J={vapidKey:L.vapidKey,swScope:L.swRegistration.scope,endpoint:H.endpoint,auth:ps(H.getKey("auth")),p256dh:ps(H.getKey("p256dh"))},he=yield bi(L.firebaseDependencies);if(he){if(za(he.subscriptionOptions,J))return Date.now()>=he.createTime+fi?gn(L,{token:he.token,createTime:Date.now(),subscriptionOptions:J}):he.token;try{yield Li(L.firebaseDependencies,he.token)}catch(Pe){console.warn(Pe)}return ti(L.firebaseDependencies,J)}return ti(L.firebaseDependencies,J)})).apply(this,arguments)}function On(L){return Da.apply(this,arguments)}function Da(){return(Da=(0,U.Z)(function*(L){const H=yield bi(L.firebaseDependencies);H&&(yield Li(L.firebaseDependencies,H.token),yield lu(L.firebaseDependencies));const J=yield L.swRegistration.pushManager.getSubscription();return!J||J.unsubscribe()})).apply(this,arguments)}function gn(L,H){return Go.apply(this,arguments)}function Go(){return(Go=(0,U.Z)(function*(L,H){try{const J=yield Iu(L.firebaseDependencies,H),he=Object.assign(Object.assign({},H),{token:J,createTime:Date.now()});return yield fo(L.firebaseDependencies,he),J}catch(J){throw yield On(L),J}})).apply(this,arguments)}function ti(L,H){return aa.apply(this,arguments)}function aa(){return(aa=(0,U.Z)(function*(L,H){const he={token:yield po(L,H),createTime:Date.now(),subscriptionOptions:H};return yield fo(L,he),he.token})).apply(this,arguments)}function zo(L,H){return go.apply(this,arguments)}function go(){return(go=(0,U.Z)(function*(L,H){return(yield L.pushManager.getSubscription())||L.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zu(H)})})).apply(this,arguments)}function za(L,H){return H.vapidKey===L.vapidKey&&H.endpoint===L.endpoint&&H.auth===L.auth&&H.p256dh===L.p256dh}function ua(L){const H={from:L.from,collapseKey:L.collapse_key,messageId:L.fcmMessageId};return function ms(L,H){if(!H.notification)return;L.notification={};const J=H.notification.title;J&&(L.notification.title=J);const he=H.notification.body;he&&(L.notification.body=he);const Pe=H.notification.image;Pe&&(L.notification.image=Pe);const je=H.notification.icon;je&&(L.notification.icon=je)}(H,L),function Je(L,H){H.data&&(L.data=H.data)}(H,L),function cr(L,H){var J,he,Pe,je,It;if(!(H.fcmOptions||null!==(J=H.notification)&&void 0!==J&&J.click_action))return;L.fcmOptions={};const mn=null!==(Pe=null===(he=H.fcmOptions)||void 0===he?void 0:he.link)&&void 0!==Pe?Pe:null===(je=H.notification)||void 0===je?void 0:je.click_action;mn&&(L.fcmOptions.link=mn);const wn=null===(It=H.fcmOptions)||void 0===It?void 0:It.analytics_label;wn&&(L.fcmOptions.analyticsLabel=wn)}(H,L),H}function Sa(L){return"object"==typeof L&&!!L&&uo in L}function Ms(L,H){const J=[];for(let he=0;he<L.length;he++)J.push(L.charAt(he)),he<H.length&&J.push(H.charAt(he));return J.join("")}function mo(L){return Dr.create("missing-app-config-values",{valueName:L})}Ms("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ms("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class du{constructor(H,J,he){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Pe=function Qi(L){if(!L||!L.options)throw mo("App Configuration Object");if(!L.name)throw mo("App Name");const H=["projectId","apiKey","appId","messagingSenderId"],{options:J}=L;for(const he of H)if(!J[he])throw mo(he);return{appName:L.name,projectId:J.projectId,apiKey:J.apiKey,appId:J.appId,senderId:J.messagingSenderId}}(H);this.firebaseDependencies={app:H,appConfig:Pe,installations:J,analyticsProvider:he}}_delete(){return Promise.resolve()}}function _s(L){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,U.Z)(function*(L){try{L.swRegistration=yield navigator.serviceWorker.register(Yi,{scope:hi}),L.swRegistration.update().catch(()=>{})}catch(H){throw Dr.create("failed-service-worker-registration",{browserErrorMessage:H?.message})}})).apply(this,arguments)}function la(L,H){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,U.Z)(function*(L,H){if(!H&&!L.swRegistration&&(yield _s(L)),H||!L.swRegistration){if(!(H instanceof ServiceWorkerRegistration))throw Dr.create("invalid-sw-registration");L.swRegistration=H}})).apply(this,arguments)}function _o(L,H){return ca.apply(this,arguments)}function ca(){return(ca=(0,U.Z)(function*(L,H){H?L.vapidKey=H:L.vapidKey||(L.vapidKey=Hi)})).apply(this,arguments)}function Ui(){return(Ui=(0,U.Z)(function*(L,H){if(!navigator)throw Dr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dr.create("permission-blocked");return yield _o(L,H?.vapidKey),yield la(L,H?.serviceWorkerRegistration),gs(L)})).apply(this,arguments)}function Ro(L,H,J){return to.apply(this,arguments)}function to(){return(to=(0,U.Z)(function*(L,H,J){const he=yo(H);(yield L.firebaseDependencies.analyticsProvider.get()).logEvent(he,{message_id:J[uo],message_name:J[Bs],message_time:J[ba],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function yo(L){switch(L){case xs.NOTIFICATION_CLICKED:return"notification_open";case xs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function No(){return(No=(0,U.Z)(function*(L,H){const J=H.data;if(!J.isFirebaseMessaging)return;L.onMessageHandler&&J.messageType===xs.PUSH_RECEIVED&&("function"==typeof L.onMessageHandler?L.onMessageHandler(ua(J)):L.onMessageHandler.next(ua(J)));const he=J.data;Sa(he)&&"1"===he[lo]&&(yield Ro(L,J.messageType,he))})).apply(this,arguments)}const ys="@firebase/messaging",Aa=L=>{const H=new du(L.getProvider("app").getImmediate(),L.getProvider("installations-internal").getImmediate(),L.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",J=>function no(L,H){return No.apply(this,arguments)}(H,J)),H},vn=L=>{const H=L.getProvider("messaging").getImmediate();return{getToken:he=>function oi(L,H){return Ui.apply(this,arguments)}(H,he)}};function qo(){return vo.apply(this,arguments)}function vo(){return(vo=(0,U.Z)(function*(){try{yield(0,De.eu)()}catch{return!1}return typeof window<"u"&&(0,De.hl)()&&(0,De.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Rs(){(0,Ae._registerComponent)(new xe.wA("messaging",Aa,"PUBLIC")),(0,Ae._registerComponent)(new xe.wA("messaging-internal",vn,"PRIVATE")),(0,Ae.registerVersion)(ys,"0.12.4"),(0,Ae.registerVersion)(ys,"0.12.4","esm2017")}();const zi="analytics",ui="firebase_id",io="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ni="https://www.googletagmanager.com/gtag/js",is=new Le.Yd("@firebase/analytics");function xa(L){return Promise.all(L.map(H=>H.catch(J=>J)))}function hu(L,H){const J=document.createElement("script");J.src=`${Ni}?l=${L}&id=${H}`,J.async=!0,document.head.appendChild(J)}function Hs(L,H,J,he,Pe,je){return O.apply(this,arguments)}function O(){return(O=(0,U.Z)(function*(L,H,J,he,Pe,je){const It=he[Pe];try{if(It)yield H[It];else{const wn=(yield xa(J)).find(Sn=>Sn.measurementId===Pe);wn&&(yield H[wn.appId])}}catch(mn){is.error(mn)}L("config",Pe,je)})).apply(this,arguments)}function K(L,H,J,he,Pe){return V.apply(this,arguments)}function V(){return(V=(0,U.Z)(function*(L,H,J,he,Pe){try{let je=[];if(Pe&&Pe.send_to){let It=Pe.send_to;Array.isArray(It)||(It=[It]);const mn=yield xa(J);for(const wn of It){const Sn=mn.find(qn=>qn.measurementId===wn),ir=Sn&&H[Sn.appId];if(!ir){je=[];break}je.push(ir)}}0===je.length&&(je=Object.values(H)),yield Promise.all(je),L("event",he,Pe||{})}catch(je){is.error(je)}})).apply(this,arguments)}function He(L){const H=window.document.getElementsByTagName("script");for(const J of Object.values(H))if(J.src&&J.src.includes(Ni)&&J.src.includes(L))return J;return null}const Bt=new De.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ln=new class Xn{constructor(H={},J=1e3){this.throttleMetadata=H,this.intervalMillis=J}getThrottleMetadata(H){return this.throttleMetadata[H]}setThrottleMetadata(H,J){this.throttleMetadata[H]=J}deleteThrottleMetadata(H){delete this.throttleMetadata[H]}};function ni(L){return new Headers({Accept:"application/json","x-goog-api-key":L})}function or(L){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,U.Z)(function*(L){var H;const{appId:J,apiKey:he}=L,Pe={method:"GET",headers:ni(he)},je=io.replace("{app-id}",J),It=yield fetch(je,Pe);if(200!==It.status&&304!==It.status){let mn="";try{const wn=yield It.json();null!==(H=wn.error)&&void 0!==H&&H.message&&(mn=wn.error.message)}catch{}throw Bt.create("config-fetch-failed",{httpStatus:It.status,responseMessage:mn})}return It.json()})).apply(this,arguments)}function Cr(L){return ss.apply(this,arguments)}function ss(){return(ss=(0,U.Z)(function*(L,H=Ln,J){const{appId:he,apiKey:Pe,measurementId:je}=L.options;if(!he)throw Bt.create("no-app-id");if(!Pe){if(je)return{measurementId:je,appId:he};throw Bt.create("no-api-key")}const It=H.getThrottleMetadata(he)||{backoffCount:0,throttleEndTimeMillis:Date.now()},mn=new Oo;return setTimeout((0,U.Z)(function*(){mn.abort()}),void 0!==J?J:6e4),Gs({appId:he,apiKey:Pe,measurementId:je},It,mn,H)})).apply(this,arguments)}function Gs(L,H,J){return vs.apply(this,arguments)}function vs(){return(vs=(0,U.Z)(function*(L,{throttleEndTimeMillis:H,backoffCount:J},he,Pe=Ln){var je;const{appId:It,measurementId:mn}=L;try{yield ws(he,H)}catch(wn){if(mn)return is.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mn} provided in the "measurementId" field in the local Firebase config. [${wn?.message}]`),{appId:It,measurementId:mn};throw wn}try{const wn=yield or(L);return Pe.deleteThrottleMetadata(It),wn}catch(wn){const Sn=wn;if(!Ma(Sn)){if(Pe.deleteThrottleMetadata(It),mn)return is.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mn} provided in the "measurementId" field in the local Firebase config. [${Sn?.message}]`),{appId:It,measurementId:mn};throw wn}const ir=503===Number(null===(je=Sn?.customData)||void 0===je?void 0:je.httpStatus)?(0,De.$s)(J,Pe.intervalMillis,30):(0,De.$s)(J,Pe.intervalMillis),qn={throttleEndTimeMillis:Date.now()+ir,backoffCount:J+1};return Pe.setThrottleMetadata(It,qn),is.debug(`Calling attemptFetch again in ${ir} millis`),Gs(L,qn,he,Pe)}})).apply(this,arguments)}function ws(L,H){return new Promise((J,he)=>{const Pe=Math.max(H-Date.now(),0),je=setTimeout(J,Pe);L.addEventListener(()=>{clearTimeout(je),he(Bt.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}function Ma(L){if(!(L instanceof De.ZR&&L.customData))return!1;const H=Number(L.customData.httpStatus);return 429===H||500===H||503===H||504===H}class Oo{constructor(){this.listeners=[]}addEventListener(H){this.listeners.push(H)}abort(){this.listeners.forEach(H=>H())}}let Ru,Yo;function zs(){return(zs=(0,U.Z)(function*(L,H,J,he,Pe){if(Pe&&Pe.global)L("event",J,he);else{const je=yield H;L("event",J,Object.assign(Object.assign({},he),{send_to:je}))}})).apply(this,arguments)}function Pa(L){Yo=L}function bu(L){Ru=L}function Oa(){return ka.apply(this,arguments)}function ka(){return(ka=(0,U.Z)(function*(){if(!(0,De.hl)())return is.warn(Bt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,De.eu)()}catch(L){return is.warn(Bt.create("indexeddb-unavailable",{errorInfo:L?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ka(){return(Ka=(0,U.Z)(function*(L,H,J,he,Pe,je,It){var mn;const wn=Cr(L);wn.then(Si=>{J[Si.measurementId]=Si.appId,L.options.measurementId&&Si.measurementId!==L.options.measurementId&&is.warn(`The measurement ID in the local Firebase config (${L.options.measurementId}) does not match the measurement ID fetched from the server (${Si.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Si=>is.error(Si)),H.push(wn);const Sn=Oa().then(Si=>{if(Si)return he.getId()}),[ir,qn]=yield Promise.all([wn,Sn]);He(je)||hu(je,ir.measurementId),Yo&&(Pe("consent","default",Yo),Pa(void 0)),Pe("js",new Date);const Vo=null!==(mn=It?.config)&&void 0!==mn?mn:{};return Vo.origin="firebase",Vo.update=!0,null!=qn&&(Vo[ui]=qn),Pe("config",ir.measurementId,Vo),Ru&&(Pe("set",Ru),bu(void 0)),ir.measurementId})).apply(this,arguments)}class Zu{constructor(H){this.app=H}_delete(){return delete ko[this.app.options.appId],Promise.resolve()}}let ko={},Fa=[];const Ya={};let Ti,Ps,Nr="dataLayer",Es=!1;function Yu(L,H,J){!function rl(){const L=[];if((0,De.ru)()&&L.push("This is a browser extension environment."),(0,De.zI)()||L.push("Cookies are not available."),L.length>0){const H=L.map((he,Pe)=>`(${Pe+1}) ${he}`).join(" "),J=Bt.create("invalid-analytics-context",{errorInfo:H});is.warn(J.message)}}();const he=L.options.appId;if(!he)throw Bt.create("no-app-id");if(!L.options.apiKey){if(!L.options.measurementId)throw Bt.create("no-api-key");is.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${L.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ko[he])throw Bt.create("already-exists",{id:he});if(!Es){!function qa(L){let H=[];Array.isArray(window[L])?H=window[L]:window[L]=H}(Nr);const{wrappedGtag:je,gtagCore:It}=function ce(L,H,J,he,Pe){let je=function(...It){window[he].push(arguments)};return window[Pe]&&"function"==typeof window[Pe]&&(je=window[Pe]),window[Pe]=function Q(L,H,J,he){function je(){return(je=(0,U.Z)(function*(It,mn,wn){try{"event"===It?yield K(L,H,J,mn,wn):"config"===It?yield Hs(L,H,J,he,mn,wn):"consent"===It?L("consent","update",wn):L("set",mn)}catch(Sn){is.error(Sn)}})).apply(this,arguments)}return function Pe(It,mn,wn){return je.apply(this,arguments)}}(je,L,H,J),{gtagCore:je,wrappedGtag:window[Pe]}}(ko,Fa,Ya,Nr,"gtag");Ps=je,Ti=It,Es=!0}return ko[he]=function pa(L,H,J,he,Pe,je,It){return Ka.apply(this,arguments)}(L,Fa,Ya,H,Ti,Nr,J),new Zu(L)}function Qo(){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,U.Z)(function*(){if((0,De.ru)()||!(0,De.zI)()||!(0,De.hl)())return!1;try{return yield(0,De.eu)()}catch{return!1}})).apply(this,arguments)}const un="@firebase/analytics";!function gi(){(0,Ae._registerComponent)(new xe.wA(zi,(H,{options:J})=>Yu(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),J),"PUBLIC")),(0,Ae._registerComponent)(new xe.wA("analytics-internal",function L(H){try{const J=H.getProvider(zi).getImmediate();return{logEvent:(he,Pe,je)=>function Ze(L,H,J,he){L=(0,De.m9)(L),function da(L,H,J,he,Pe){return zs.apply(this,arguments)}(Ps,ko[L.app.options.appId],H,J,he).catch(Pe=>is.error(Pe))}(J,he,Pe,je)}}catch(J){throw Bt.create("interop-component-reg-failed",{reason:J})}},"PRIVATE")),(0,Ae.registerVersion)(un,"0.9.4"),(0,Ae.registerVersion)(un,"0.9.4","esm2017")}();var Xi=Y(4408),Fo=Y(7565);const pu=new class Ws extends Fo.v{}(class os extends Xi.o{constructor(H,J){super(H,J),this.scheduler=H,this.work=J}schedule(H,J=0){return J>0?super.schedule(H,J):(this.delay=J,this.state=H,this.scheduler.flush(this),this)}execute(H,J){return J>0||this.closed?super.execute(H,J):this._execute(H,J)}requestAsyncId(H,J,he=0){return null!=he&&he>0||null==he&&this.delay>0?super.requestAsyncId(H,J,he):(H.flush(this),0)}});var wo=Y(4986),ga=Y(8505),wi=Y(5363),Xo=Y(9468);const Tu=new A.GfV("7.5.0"),Lo="__angularfire_symbol__analyticsIsSupportedValue",qs="__angularfire_symbol__analyticsIsSupported",Zs="__angularfire_symbol__remoteConfigIsSupportedValue",Uo="__angularfire_symbol__remoteConfigIsSupported",Oi="__angularfire_symbol__messagingIsSupportedValue",ma="__angularfire_symbol__messagingIsSupported";function b(L,H,J){if(H){if(1===H.length)return H[0];const je=H.filter(It=>It.app===J);if(1===je.length)return je[0]}return J.container.getProvider(L).getImmediate({optional:!0})}globalThis[qs]||(globalThis[qs]=Qo().then(L=>globalThis[Lo]=L).catch(()=>globalThis[Lo]=!1)),globalThis[ma]||(globalThis[ma]=qo().then(L=>globalThis[Oi]=L).catch(()=>globalThis[Oi]=!1)),globalThis[Uo]||(globalThis[Uo]=au().then(L=>globalThis[Zs]=L).catch(()=>globalThis[Zs]=!1));const x=(L,H)=>{const J=H?[H]:(0,y.C6)(),he=[];return J.forEach(Pe=>{Pe.container.getProvider(L).instances.forEach(It=>{he.includes(It)||he.push(It)})}),he};function I(){}class P{constructor(H,J=pu){this.zone=H,this.delegate=J}now(){return this.delegate.now()}schedule(H,J,he){const Pe=this.zone;return this.delegate.schedule(function(It){Pe.runGuarded(()=>{H.apply(this,[It])})},J,he)}}class ${constructor(H){this.zone=H,this.task=null}call(H,J){const he=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",I,{},I,I)),J.pipe((0,ga.b)({next:he,complete:he,error:he})).subscribe(H).add(he)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let X=(()=>{class L{constructor(J){this.ngZone=J,this.outsideAngular=J.runOutsideAngular(()=>new P(Zone.current)),this.insideAngular=J.run(()=>new P(Zone.current,wo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return L.\u0275fac=function(J){return new(J||L)(A.LFG(A.R0b))},L.\u0275prov=A.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();function ne(){const L=globalThis.\u0275AngularFireScheduler;if(!L)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return L}function sn(L){return L.pipe((0,wi.Q)(ne().outsideAngular))}function rr(L){return ne(),function Di(L){return function(J){return(J=J.lift(new $(L.ngZone))).pipe((0,Xo.R)(L.outsideAngular),(0,wi.Q)(L.insideAngular))}}(ne())(L)}},2090:(qt,We,Y)=>{Y.d(We,{$s:()=>pn,BH:()=>rt,DV:()=>Er,Dv:()=>Gr,G6:()=>Ot,GJ:()=>en,L:()=>Ve,LL:()=>Cn,Pz:()=>st,Sg:()=>Ct,UG:()=>Xe,UI:()=>Tn,US:()=>xe,Wj:()=>Vr,Wl:()=>Qr,Yr:()=>St,ZB:()=>Te,ZR:()=>Nt,aH:()=>ft,b$:()=>se,cI:()=>bn,dS:()=>Ii,eu:()=>kt,g5:()=>U,gK:()=>xr,gQ:()=>dr,h$:()=>Fe,hl:()=>dn,hu:()=>y,jU:()=>ye,lb:()=>tr,m9:()=>ei,ne:()=>Gt,p$:()=>pe,pd:()=>Jr,r3:()=>Xr,ru:()=>Ce,tV:()=>ge,uI:()=>G,ug:()=>yn,vZ:()=>br,w1:()=>Ke,w9:()=>ki,xO:()=>$i,xb:()=>ar,z$:()=>vt,zI:()=>$t,zd:()=>Un});const y=function(me,fe){if(!me)throw U(fe)},U=function(me){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+me)},Ae=function(me){const fe=[];let Ee=0;for(let nt=0;nt<me.length;nt++){let Be=me.charCodeAt(nt);Be<128?fe[Ee++]=Be:Be<2048?(fe[Ee++]=Be>>6|192,fe[Ee++]=63&Be|128):55296==(64512&Be)&&nt+1<me.length&&56320==(64512&me.charCodeAt(nt+1))?(Be=65536+((1023&Be)<<10)+(1023&me.charCodeAt(++nt)),fe[Ee++]=Be>>18|240,fe[Ee++]=Be>>12&63|128,fe[Ee++]=Be>>6&63|128,fe[Ee++]=63&Be|128):(fe[Ee++]=Be>>12|224,fe[Ee++]=Be>>6&63|128,fe[Ee++]=63&Be|128)}return fe},xe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(me,fe){if(!Array.isArray(me))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ee=fe?this.byteToCharMapWebSafe_:this.byteToCharMap_,nt=[];for(let Be=0;Be<me.length;Be+=3){const Ft=me[Be],on=Be+1<me.length,Wn=on?me[Be+1]:0,ve=Be+2<me.length,we=ve?me[Be+2]:0;let gt=(15&Wn)<<2|we>>6,Zt=63&we;ve||(Zt=64,on||(gt=64)),nt.push(Ee[Ft>>2],Ee[(3&Ft)<<4|Wn>>4],Ee[gt],Ee[Zt])}return nt.join("")},encodeString(me,fe){return this.HAS_NATIVE_SUPPORT&&!fe?btoa(me):this.encodeByteArray(Ae(me),fe)},decodeString(me,fe){return this.HAS_NATIVE_SUPPORT&&!fe?atob(me):function(me){const fe=[];let Ee=0,nt=0;for(;Ee<me.length;){const Be=me[Ee++];if(Be<128)fe[nt++]=String.fromCharCode(Be);else if(Be>191&&Be<224){const Ft=me[Ee++];fe[nt++]=String.fromCharCode((31&Be)<<6|63&Ft)}else if(Be>239&&Be<365){const ve=((7&Be)<<18|(63&me[Ee++])<<12|(63&me[Ee++])<<6|63&me[Ee++])-65536;fe[nt++]=String.fromCharCode(55296+(ve>>10)),fe[nt++]=String.fromCharCode(56320+(1023&ve))}else{const Ft=me[Ee++],on=me[Ee++];fe[nt++]=String.fromCharCode((15&Be)<<12|(63&Ft)<<6|63&on)}}return fe.join("")}(this.decodeStringToByteArray(me,fe))},decodeStringToByteArray(me,fe){this.init_();const Ee=fe?this.charToByteMapWebSafe_:this.charToByteMap_,nt=[];for(let Be=0;Be<me.length;){const Ft=Ee[me.charAt(Be++)],Wn=Be<me.length?Ee[me.charAt(Be)]:0;++Be;const we=Be<me.length?Ee[me.charAt(Be)]:64;++Be;const Se=Be<me.length?Ee[me.charAt(Be)]:64;if(++Be,null==Ft||null==Wn||null==we||null==Se)throw new Le;nt.push(Ft<<2|Wn>>4),64!==we&&(nt.push(Wn<<4&240|we>>2),64!==Se&&nt.push(we<<6&192|Se))}return nt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let me=0;me<this.ENCODED_VALS.length;me++)this.byteToCharMap_[me]=this.ENCODED_VALS.charAt(me),this.charToByteMap_[this.byteToCharMap_[me]]=me,this.byteToCharMapWebSafe_[me]=this.ENCODED_VALS_WEBSAFE.charAt(me),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[me]]=me,me>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(me)]=me,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(me)]=me)}}};class Le extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(me){const fe=Ae(me);return xe.encodeByteArray(fe,!0)},Ve=function(me){return Fe(me).replace(/\./g,"")},ge=function(me){try{return xe.decodeString(me,!0)}catch(fe){console.error("base64Decode failed: ",fe)}return null};function pe(me){return Te(void 0,me)}function Te(me,fe){if(!(fe instanceof Object))return fe;switch(fe.constructor){case Date:return new Date(fe.getTime());case Object:void 0===me&&(me={});break;case Array:me=[];break;default:return fe}for(const Ee in fe)!fe.hasOwnProperty(Ee)||!yt(Ee)||(me[Ee]=Te(me[Ee],fe[Ee]));return me}function yt(me){return"__proto__"!==me}const at=()=>{try{return function ht(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const me=process.env.__FIREBASE_DEFAULTS__;return me?JSON.parse(me):void 0})()||(()=>{if(typeof document>"u")return;let me;try{me=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const fe=me&&ge(me[1]);return fe&&JSON.parse(fe)})()}catch(me){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${me}`)}},ft=()=>{var me;return null===(me=at())||void 0===me?void 0:me.config},st=me=>{var fe;return null===(fe=at())||void 0===fe?void 0:fe[`_${me}`]};class rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((fe,Ee)=>{this.resolve=fe,this.reject=Ee})}wrapCallback(fe){return(Ee,nt)=>{Ee?this.reject(Ee):this.resolve(nt),"function"==typeof fe&&(this.promise.catch(()=>{}),1===fe.length?fe(Ee):fe(Ee,nt))}}}function Ct(me,fe){if(me.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const nt=fe||"demo-project",Be=me.iat||0,Ft=me.sub||me.user_id;if(!Ft)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const on=Object.assign({iss:`https://securetoken.google.com/${nt}`,aud:nt,iat:Be,exp:Be+3600,auth_time:Be,sub:Ft,user_id:Ft,firebase:{sign_in_provider:"custom",identities:{}}},me);return[Ve(JSON.stringify({alg:"none",type:"JWT"})),Ve(JSON.stringify(on)),""].join(".")}function vt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function G(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function Xe(){var me;const fe=null===(me=at())||void 0===me?void 0:me.forceEnvironment;if("node"===fe)return!0;if("browser"===fe)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ye(){return"object"==typeof self&&self.self===self}function Ce(){const me="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof me&&void 0!==me.id}function se(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ke(){const me=vt();return me.indexOf("MSIE ")>=0||me.indexOf("Trident/")>=0}function St(){return!1}function Ot(){return!Xe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dn(){try{return"object"==typeof indexedDB}catch{return!1}}function kt(){return new Promise((me,fe)=>{try{let Ee=!0;const nt="validate-browser-context-for-indexeddb-analytics-module",Be=self.indexedDB.open(nt);Be.onsuccess=()=>{Be.result.close(),Ee||self.indexedDB.deleteDatabase(nt),me(!0)},Be.onupgradeneeded=()=>{Ee=!1},Be.onerror=()=>{var Ft;fe((null===(Ft=Be.error)||void 0===Ft?void 0:Ft.message)||"")}}catch(Ee){fe(Ee)}})}function $t(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Nt extends Error{constructor(fe,Ee,nt){super(Ee),this.code=fe,this.customData=nt,this.name="FirebaseError",Object.setPrototypeOf(this,Nt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cn.prototype.create)}}class Cn{constructor(fe,Ee,nt){this.service=fe,this.serviceName=Ee,this.errors=nt}create(fe,...Ee){const nt=Ee[0]||{},Be=`${this.service}/${fe}`,Ft=this.errors[fe],on=Ft?function zn(me,fe){return me.replace(nn,(Ee,nt)=>{const Be=fe[nt];return null!=Be?String(Be):`<${nt}?>`})}(Ft,nt):"Error";return new Nt(Be,`${this.serviceName}: ${on} (${Be}).`,nt)}}const nn=/\{\$([^}]+)}/g;function bn(me){return JSON.parse(me)}function Qr(me){return JSON.stringify(me)}const Ur=function(me){let fe={},Ee={},nt={},Be="";try{const Ft=me.split(".");fe=bn(ge(Ft[0])||""),Ee=bn(ge(Ft[1])||""),Be=Ft[2],nt=Ee.d||{},delete Ee.d}catch{}return{header:fe,claims:Ee,data:nt,signature:Be}},ki=function(me){const Ee=Ur(me).claims;return!!Ee&&"object"==typeof Ee&&Ee.hasOwnProperty("iat")},en=function(me){const fe=Ur(me).claims;return"object"==typeof fe&&!0===fe.admin};function Xr(me,fe){return Object.prototype.hasOwnProperty.call(me,fe)}function Er(me,fe){if(Object.prototype.hasOwnProperty.call(me,fe))return me[fe]}function ar(me){for(const fe in me)if(Object.prototype.hasOwnProperty.call(me,fe))return!1;return!0}function Tn(me,fe,Ee){const nt={};for(const Be in me)Object.prototype.hasOwnProperty.call(me,Be)&&(nt[Be]=fe.call(Ee,me[Be],Be,me));return nt}function br(me,fe){if(me===fe)return!0;const Ee=Object.keys(me),nt=Object.keys(fe);for(const Be of Ee){if(!nt.includes(Be))return!1;const Ft=me[Be],on=fe[Be];if(Lt(Ft)&&Lt(on)){if(!br(Ft,on))return!1}else if(Ft!==on)return!1}for(const Be of nt)if(!Ee.includes(Be))return!1;return!0}function Lt(me){return null!==me&&"object"==typeof me}function $i(me){const fe=[];for(const[Ee,nt]of Object.entries(me))Array.isArray(nt)?nt.forEach(Be=>{fe.push(encodeURIComponent(Ee)+"="+encodeURIComponent(Be))}):fe.push(encodeURIComponent(Ee)+"="+encodeURIComponent(nt));return fe.length?"&"+fe.join("&"):""}function Un(me){const fe={};return me.replace(/^\?/,"").split("&").forEach(nt=>{if(nt){const[Be,Ft]=nt.split("=");fe[decodeURIComponent(Be)]=decodeURIComponent(Ft)}}),fe}function Jr(me){const fe=me.indexOf("?");if(!fe)return"";const Ee=me.indexOf("#",fe);return me.substring(fe,Ee>0?Ee:void 0)}class dr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let fe=1;fe<this.blockSize;++fe)this.pad_[fe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(fe,Ee){Ee||(Ee=0);const nt=this.W_;if("string"==typeof fe)for(let Se=0;Se<16;Se++)nt[Se]=fe.charCodeAt(Ee)<<24|fe.charCodeAt(Ee+1)<<16|fe.charCodeAt(Ee+2)<<8|fe.charCodeAt(Ee+3),Ee+=4;else for(let Se=0;Se<16;Se++)nt[Se]=fe[Ee]<<24|fe[Ee+1]<<16|fe[Ee+2]<<8|fe[Ee+3],Ee+=4;for(let Se=16;Se<80;Se++){const gt=nt[Se-3]^nt[Se-8]^nt[Se-14]^nt[Se-16];nt[Se]=4294967295&(gt<<1|gt>>>31)}let we,ae,Be=this.chain_[0],Ft=this.chain_[1],on=this.chain_[2],Wn=this.chain_[3],ve=this.chain_[4];for(let Se=0;Se<80;Se++){Se<40?Se<20?(we=Wn^Ft&(on^Wn),ae=1518500249):(we=Ft^on^Wn,ae=1859775393):Se<60?(we=Ft&on|Wn&(Ft|on),ae=2400959708):(we=Ft^on^Wn,ae=3395469782);const gt=(Be<<5|Be>>>27)+we+ve+ae+nt[Se]&4294967295;ve=Wn,Wn=on,on=4294967295&(Ft<<30|Ft>>>2),Ft=Be,Be=gt}this.chain_[0]=this.chain_[0]+Be&4294967295,this.chain_[1]=this.chain_[1]+Ft&4294967295,this.chain_[2]=this.chain_[2]+on&4294967295,this.chain_[3]=this.chain_[3]+Wn&4294967295,this.chain_[4]=this.chain_[4]+ve&4294967295}update(fe,Ee){if(null==fe)return;void 0===Ee&&(Ee=fe.length);const nt=Ee-this.blockSize;let Be=0;const Ft=this.buf_;let on=this.inbuf_;for(;Be<Ee;){if(0===on)for(;Be<=nt;)this.compress_(fe,Be),Be+=this.blockSize;if("string"==typeof fe){for(;Be<Ee;)if(Ft[on]=fe.charCodeAt(Be),++on,++Be,on===this.blockSize){this.compress_(Ft),on=0;break}}else for(;Be<Ee;)if(Ft[on]=fe[Be],++on,++Be,on===this.blockSize){this.compress_(Ft),on=0;break}}this.inbuf_=on,this.total_+=Ee}digest(){const fe=[];let Ee=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Be=this.blockSize-1;Be>=56;Be--)this.buf_[Be]=255&Ee,Ee/=256;this.compress_(this.buf_);let nt=0;for(let Be=0;Be<5;Be++)for(let Ft=24;Ft>=0;Ft-=8)fe[nt]=this.chain_[Be]>>Ft&255,++nt;return fe}}function Gt(me,fe){const Ee=new hn(me,fe);return Ee.subscribe.bind(Ee)}class hn{constructor(fe,Ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ee,this.task.then(()=>{fe(this)}).catch(nt=>{this.error(nt)})}next(fe){this.forEachObserver(Ee=>{Ee.next(fe)})}error(fe){this.forEachObserver(Ee=>{Ee.error(fe)}),this.close(fe)}complete(){this.forEachObserver(fe=>{fe.complete()}),this.close()}subscribe(fe,Ee,nt){let Be;if(void 0===fe&&void 0===Ee&&void 0===nt)throw new Error("Missing Observer.");Be=function us(me,fe){if("object"!=typeof me||null===me)return!1;for(const Ee of fe)if(Ee in me&&"function"==typeof me[Ee])return!0;return!1}(fe,["next","error","complete"])?fe:{next:fe,error:Ee,complete:nt},void 0===Be.next&&(Be.next=Kn),void 0===Be.error&&(Be.error=Kn),void 0===Be.complete&&(Be.complete=Kn);const Ft=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Be.error(this.finalError):Be.complete()}catch{}}),this.observers.push(Be),Ft}unsubscribeOne(fe){void 0===this.observers||void 0===this.observers[fe]||(delete this.observers[fe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(fe){if(!this.finalized)for(let Ee=0;Ee<this.observers.length;Ee++)this.sendOne(Ee,fe)}sendOne(fe,Ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[fe])try{Ee(this.observers[fe])}catch(nt){typeof console<"u"&&console.error&&console.error(nt)}})}close(fe){this.finalized||(this.finalized=!0,void 0!==fe&&(this.finalError=fe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kn(){}const Gr=function(me,fe,Ee,nt){let Be;if(nt<fe?Be="at least "+fe:nt>Ee&&(Be=0===Ee?"none":"no more than "+Ee),Be)throw new Error(me+" failed: Was called with "+nt+(1===nt?" argument.":" arguments.")+" Expects "+Be+".")};function xr(me,fe){return`${me} failed: ${fe} argument `}function Vr(me,fe,Ee,nt){if((!nt||Ee)&&"function"!=typeof Ee)throw new Error(xr(me,fe)+"must be a valid function.")}function tr(me,fe,Ee,nt){if((!nt||Ee)&&("object"!=typeof Ee||null===Ee))throw new Error(xr(me,fe)+"must be a valid context object.")}const Ii=function(me){const fe=[];let Ee=0;for(let nt=0;nt<me.length;nt++){let Be=me.charCodeAt(nt);if(Be>=55296&&Be<=56319){const Ft=Be-55296;nt++,y(nt<me.length,"Surrogate pair missing trail surrogate."),Be=65536+(Ft<<10)+(me.charCodeAt(nt)-56320)}Be<128?fe[Ee++]=Be:Be<2048?(fe[Ee++]=Be>>6|192,fe[Ee++]=63&Be|128):Be<65536?(fe[Ee++]=Be>>12|224,fe[Ee++]=Be>>6&63|128,fe[Ee++]=63&Be|128):(fe[Ee++]=Be>>18|240,fe[Ee++]=Be>>12&63|128,fe[Ee++]=Be>>6&63|128,fe[Ee++]=63&Be|128)}return fe},yn=function(me){let fe=0;for(let Ee=0;Ee<me.length;Ee++){const nt=me.charCodeAt(Ee);nt<128?fe++:nt<2048?fe+=2:nt>=55296&&nt<=56319?(fe+=4,Ee++):fe+=3}return fe};function pn(me,fe=1e3,Ee=2){const nt=fe*Math.pow(Ee,me),Be=Math.round(.5*nt*(Math.random()-.5)*2);return Math.min(144e5,nt+Be)}function ei(me){return me&&me._delegate?me._delegate:me}},3494:(qt,We,Y)=>{Y.r(We),Y.d(We,{InfoBlinkModule:()=>Bi});var A=Y(6895),y=Y(4650);function xe(R,D){return{type:7,name:R,definitions:D,options:{}}}function Le(R,D=null){return{type:4,styles:D,timings:R}}function ge(R){return{type:6,styles:R,offset:null}}function pe(R,D,w){return{type:0,name:R,styles:D,options:w}}function yt(R,D,w=null){return{type:1,expr:R,animation:D,options:w}}var rt=Y(7579),Ct=Y(1481);const vt=["toast-component",""];function G(R,D){if(1&R){const w=y.EpF();y.TgZ(0,"button",5),y.NdJ("click",function(){y.CHM(w);const de=y.oxw();return y.KtG(de.remove())}),y.TgZ(1,"span",6),y._uU(2,"\xd7"),y.qZA()()}}function Xe(R,D){if(1&R&&(y.ynx(0),y._uU(1),y.BQk()),2&R){const w=y.oxw(2);y.xp6(1),y.hij("[",w.duplicatesCount+1,"]")}}function ye(R,D){if(1&R&&(y.TgZ(0,"div"),y._uU(1),y.YNc(2,Xe,2,1,"ng-container",4),y.qZA()),2&R){const w=y.oxw();y.Tol(w.options.titleClass),y.uIk("aria-label",w.title),y.xp6(1),y.hij(" ",w.title," "),y.xp6(1),y.Q6J("ngIf",w.duplicatesCount)}}function Ce(R,D){if(1&R&&y._UZ(0,"div",7),2&R){const w=y.oxw();y.Tol(w.options.messageClass),y.Q6J("innerHTML",w.message,y.oJD)}}function se(R,D){if(1&R&&(y.TgZ(0,"div",8),y._uU(1),y.qZA()),2&R){const w=y.oxw();y.Tol(w.options.messageClass),y.uIk("aria-label",w.message),y.xp6(1),y.hij(" ",w.message," ")}}function ke(R,D){if(1&R&&(y.TgZ(0,"div"),y._UZ(1,"div",9),y.qZA()),2&R){const w=y.oxw();y.xp6(1),y.Udp("width",w.width+"%")}}class Nt{constructor(D,w){this.component=D,this.injector=w}attach(D,w){return this._attachedHost=D,D.attach(this,w)}detach(){const D=this._attachedHost;if(D)return this._attachedHost=void 0,D.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(D){this._attachedHost=D}}class Cn{attach(D,w){return this._attachedPortal=D,this.attachComponentPortal(D,w)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(D){this._disposeFn=D}}class zn{constructor(D){this._overlayRef=D,this.duplicatesCount=0,this._afterClosed=new rt.x,this._activate=new rt.x,this._manualClose=new rt.x,this._resetTimeout=new rt.x,this._countDuplicate=new rt.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(D,w){D&&this._resetTimeout.next(),w&&this._countDuplicate.next(++this.duplicatesCount)}}class nn{constructor(D,w,j,de,Ze,tn){this.toastId=D,this.config=w,this.message=j,this.title=de,this.toastType=Ze,this.toastRef=tn,this._onTap=new rt.x,this._onAction=new rt.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(D){this._onAction.next(D)}onAction(){return this._onAction.asObservable()}}const Qr=new y.OlP("ToastConfig");class Ur extends Cn{constructor(D,w,j){super(),this._hostDomElement=D,this._componentFactoryResolver=w,this._appRef=j}attachComponentPortal(D,w){const j=this._componentFactoryResolver.resolveComponentFactory(D.component);let de;return de=j.create(D.injector),this._appRef.attachView(de.hostView),this.setDisposeFn(()=>{this._appRef.detachView(de.hostView),de.destroy()}),w?this._hostDomElement.insertBefore(this._getComponentRootNode(de),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(de)),de}_getComponentRootNode(D){return D.hostView.rootNodes[0]}}class pr{constructor(D){this._portalHost=D}attach(D,w=!0){return this._portalHost.attach(D,w)}detach(){return this._portalHost.detach()}}let Zn=(()=>{class R{constructor(w){this._document=w}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const w=this._document.createElement("div");w.classList.add("overlay-container"),w.setAttribute("aria-live","polite"),this._document.body.appendChild(w),this._containerElement=w}}return R.\u0275fac=function(w){return new(w||R)(y.LFG(A.K0))},R.\u0275prov=y.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),ki=(()=>{class R{constructor(w,j,de,Ze){this._overlayContainer=w,this._componentFactoryResolver=j,this._appRef=de,this._document=Ze,this._paneElements=new Map}create(w,j){return this._createOverlayRef(this.getPaneElement(w,j))}getPaneElement(w="",j){return this._paneElements.get(j)||this._paneElements.set(j,{}),this._paneElements.get(j)[w]||(this._paneElements.get(j)[w]=this._createPaneElement(w,j)),this._paneElements.get(j)[w]}_createPaneElement(w,j){const de=this._document.createElement("div");return de.id="toast-container",de.classList.add(w),de.classList.add("toast-container"),j?j.getContainerElement().appendChild(de):this._overlayContainer.getContainerElement().appendChild(de),de}_createPortalHost(w){return new Ur(w,this._componentFactoryResolver,this._appRef)}_createOverlayRef(w){return new pr(this._createPortalHost(w))}}return R.\u0275fac=function(w){return new(w||R)(y.LFG(Zn),y.LFG(y._Vd),y.LFG(y.z2F),y.LFG(A.K0))},R.\u0275prov=y.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),en=(()=>{class R{constructor(w,j,de,Ze,tn){this.overlay=j,this._injector=de,this.sanitizer=Ze,this.ngZone=tn,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...w.default,...w.config},w.config.iconClasses&&(this.toastrConfig.iconClasses={...w.default.iconClasses,...w.config.iconClasses})}show(w,j,de={},Ze=""){return this._preBuildNotification(Ze,w,j,this.applyConfig(de))}success(w,j,de={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",w,j,this.applyConfig(de))}error(w,j,de={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",w,j,this.applyConfig(de))}info(w,j,de={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",w,j,this.applyConfig(de))}warning(w,j,de={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",w,j,this.applyConfig(de))}clear(w){for(const j of this.toasts)if(void 0!==w){if(j.toastId===w)return void j.toastRef.manualClose()}else j.toastRef.manualClose()}remove(w){const j=this._findToast(w);if(!j||(j.activeToast.toastRef.close(),this.toasts.splice(j.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const de=this.toasts[this.currentlyActive].toastRef;de.isInactive()||(this.currentlyActive=this.currentlyActive+1,de.activate())}return!0}findDuplicate(w="",j="",de,Ze){const{includeTitleDuplicates:tn}=this.toastrConfig;for(const un of this.toasts)if((!tn||tn&&un.title===w)&&un.message===j)return un.toastRef.onDuplicate(de,Ze),un;return null}applyConfig(w={}){return{...this.toastrConfig,...w}}_findToast(w){for(let j=0;j<this.toasts.length;j++)if(this.toasts[j].toastId===w)return{index:j,activeToast:this.toasts[j]};return null}_preBuildNotification(w,j,de,Ze){return Ze.onActivateTick?this.ngZone.run(()=>this._buildNotification(w,j,de,Ze)):this._buildNotification(w,j,de,Ze)}_buildNotification(w,j,de,Ze){if(!Ze.toastComponent)throw new Error("toastComponent required");const tn=this.findDuplicate(de,j,this.toastrConfig.resetTimeoutOnDuplicate&&Ze.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&de||j)&&this.toastrConfig.preventDuplicates&&null!==tn)return tn;this.previousToastMessage=j;let un=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(un=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const Yr=this.overlay.create(Ze.positionClass,this.overlayContainer);this.index=this.index+1;let gi=j;j&&Ze.enableHtml&&(gi=this.sanitizer.sanitize(y.q3G.HTML,j));const Xi=new zn(Yr),os=new nn(this.index,Ze,gi,de,w,Xi),Ws=y.zs3.create({providers:[{provide:nn,useValue:os}],parent:this._injector}),pu=new Nt(Ze.toastComponent,Ws),Xa=Yr.attach(pu,Ze.newestOnTop);Xi.componentInstance=Xa.instance;const wo={toastId:this.index,title:de||"",message:j||"",toastRef:Xi,onShown:Xi.afterActivate(),onHidden:Xi.afterClosed(),onTap:os.onTap(),onAction:os.onAction(),portal:Xa};return un||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{wo.toastRef.activate()})),this.toasts.push(wo),wo}}return R.\u0275fac=function(w){return new(w||R)(y.LFG(Qr),y.LFG(ki),y.LFG(y.zs3),y.LFG(Ct.H7),y.LFG(y.R0b))},R.\u0275prov=y.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();const Er={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class R{constructor(w,j,de){this.toastrService=w,this.toastPackage=j,this.ngZone=de,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=j.message,this.title=j.title,this.options=j.config,this.originalTimeout=j.config.timeOut,this.toastClasses=`${j.toastType} ${j.config.toastClass}`,this.sub=j.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=j.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=j.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=j.toastRef.countDuplicate().subscribe(Ze=>{this.duplicatesCount=Ze})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const w=(new Date).getTime();this.width=(this.hideTime-w)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(w,j){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(w),j)):this.timeout=setTimeout(()=>w(),j)}outsideInterval(w,j){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(w),j)):this.intervalId=setInterval(()=>w(),j)}runInsideAngular(w){this.ngZone?this.ngZone.run(()=>w()):w()}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(en),y.Y36(nn),y.Y36(y.R0b))},R.\u0275cmp=y.Xpm({type:R,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(w,j){1&w&&y.NdJ("click",function(){return j.tapToast()})("mouseenter",function(){return j.stickAround()})("mouseleave",function(){return j.delayedHideToast()}),2&w&&(y.d8E("@flyInOut",j.state),y.Tol(j.toastClasses),y.Udp("display",j.displayStyle))},attrs:vt,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(w,j){1&w&&(y.YNc(0,G,3,0,"button",0),y.YNc(1,ye,3,5,"div",1),y.YNc(2,Ce,1,3,"div",2),y.YNc(3,se,2,4,"div",3),y.YNc(4,ke,2,2,"div",4)),2&w&&(y.Q6J("ngIf",j.options.closeButton),y.xp6(1),y.Q6J("ngIf",j.title),y.xp6(1),y.Q6J("ngIf",j.message&&j.options.enableHtml),y.xp6(1),y.Q6J("ngIf",j.message&&!j.options.enableHtml),y.xp6(1),y.Q6J("ngIf",j.options.progressBar))},dependencies:[A.O5],encapsulation:2,data:{animation:[xe("flyInOut",[pe("inactive",ge({opacity:0})),pe("active",ge({opacity:1})),pe("removed",ge({opacity:0})),yt("inactive => active",Le("{{ easeTime }}ms {{ easing }}")),yt("active => removed",Le("{{ easeTime }}ms {{ easing }}"))])]}}),R})()};let ar=(()=>{class R{static forRoot(w={}){return{ngModule:R,providers:[{provide:Qr,useValue:{default:Er,config:w}}]}}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275mod=y.oAB({type:R}),R.\u0275inj=y.cJS({imports:[A.ez]}),R})();var $i=Y(8996),Un=Y(9751),Jr=Y(4742),dr=Y(8421),Gt=Y(7669),hn=Y(5403),An=Y(3268),us=Y(1810),Gr=Y(4004);let xr=(()=>{class R{constructor(w,j){this._renderer=w,this._elementRef=j,this.onChange=de=>{},this.onTouched=()=>{}}setProperty(w,j){this._renderer.setProperty(this._elementRef.nativeElement,w,j)}registerOnTouched(w){this.onTouched=w}registerOnChange(w){this.onChange=w}setDisabledState(w){this.setProperty("disabled",w)}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(y.Qsj),y.Y36(y.SBq))},R.\u0275dir=y.lG2({type:R}),R})(),gr=(()=>{class R extends xr{}return R.\u0275fac=function(){let D;return function(j){return(D||(D=y.n5z(R)))(j||R)}}(),R.\u0275dir=y.lG2({type:R,features:[y.qOj]}),R})();const Vr=new y.OlP("NgValueAccessor"),yn={provide:Vr,useExisting:(0,y.Gpc)(()=>Mt),multi:!0},zr=new y.OlP("CompositionEventMode");let Mt=(()=>{class R extends xr{constructor(w,j,de){super(w,j),this._compositionMode=de,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function fn(){const R=(0,A.q)()?(0,A.q)().getUserAgent():"";return/android (\d+)/.test(R.toLowerCase())}())}writeValue(w){this.setProperty("value",w??"")}_handleInput(w){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(w)}_compositionStart(){this._composing=!0}_compositionEnd(w){this._composing=!1,this._compositionMode&&this.onChange(w)}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(zr,8))},R.\u0275dir=y.lG2({type:R,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(w,j){1&w&&y.NdJ("input",function(Ze){return j._handleInput(Ze.target.value)})("blur",function(){return j.onTouched()})("compositionstart",function(){return j._compositionStart()})("compositionend",function(Ze){return j._compositionEnd(Ze.target.value)})},features:[y._Bn([yn]),y.qOj]}),R})();function Pt(R){return null==R||("string"==typeof R||Array.isArray(R))&&0===R.length}function pn(R){return null!=R&&"number"==typeof R.length}const Xt=new y.OlP("NgValidators"),Dn=new y.OlP("NgAsyncValidators"),ei=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class me{static min(D){return function fe(R){return D=>{if(Pt(D.value)||Pt(R))return null;const w=parseFloat(D.value);return!isNaN(w)&&w<R?{min:{min:R,actual:D.value}}:null}}(D)}static max(D){return function Ee(R){return D=>{if(Pt(D.value)||Pt(R))return null;const w=parseFloat(D.value);return!isNaN(w)&&w>R?{max:{max:R,actual:D.value}}:null}}(D)}static required(D){return nt(D)}static requiredTrue(D){return function Be(R){return!0===R.value?null:{required:!0}}(D)}static email(D){return function Ft(R){return Pt(R.value)||ei.test(R.value)?null:{email:!0}}(D)}static minLength(D){return function on(R){return D=>Pt(D.value)||!pn(D.value)?null:D.value.length<R?{minlength:{requiredLength:R,actualLength:D.value.length}}:null}(D)}static maxLength(D){return function Wn(R){return D=>pn(D.value)&&D.value.length>R?{maxlength:{requiredLength:R,actualLength:D.value.length}}:null}(D)}static pattern(D){return function ve(R){if(!R)return we;let D,w;return"string"==typeof R?(w="","^"!==R.charAt(0)&&(w+="^"),w+=R,"$"!==R.charAt(R.length-1)&&(w+="$"),D=new RegExp(w)):(w=R.toString(),D=R),j=>{if(Pt(j.value))return null;const de=j.value;return D.test(de)?null:{pattern:{requiredPattern:w,actualValue:de}}}}(D)}static nullValidator(D){return null}static compose(D){return Br(D)}static composeAsync(D){return Vs(D)}}function nt(R){return Pt(R.value)?{required:!0}:null}function we(R){return null}function ae(R){return null!=R}function Se(R){return(0,y.QGY)(R)?(0,$i.D)(R):R}function gt(R){let D={};return R.forEach(w=>{D=null!=w?{...D,...w}:D}),0===Object.keys(D).length?null:D}function Zt(R,D){return D.map(w=>w(R))}function Ir(R){return R.map(D=>function Vn(R){return!R.validate}(D)?D:w=>D.validate(w))}function Br(R){if(!R)return null;const D=R.filter(ae);return 0==D.length?null:function(w){return gt(Zt(w,D))}}function ls(R){return null!=R?Br(Ir(R)):null}function Vs(R){if(!R)return null;const D=R.filter(ae);return 0==D.length?null:function(w){return function Kn(...R){const D=(0,Gt.jO)(R),{args:w,keys:j}=(0,Jr.D)(R),de=new Un.y(Ze=>{const{length:tn}=w;if(!tn)return void Ze.complete();const un=new Array(tn);let Yr=tn,gi=tn;for(let Xi=0;Xi<tn;Xi++){let os=!1;(0,dr.Xf)(w[Xi]).subscribe((0,hn.x)(Ze,Fo=>{os||(os=!0,gi--),un[Xi]=Fo},()=>Yr--,void 0,()=>{(!Yr||!os)&&(gi||Ze.next(j?(0,us.n)(j,un):un),Ze.complete())}))}});return D?de.pipe((0,An.Z)(D)):de}(Zt(w,D).map(Se)).pipe((0,Gr.U)(gt))}}function ra(R){return null!=R?Vs(Ir(R)):null}function mr(R,D){return null===R?[D]:Array.isArray(R)?[...R,D]:[R,D]}function di(R){return R._rawValidators}function Do(R){return R._rawAsyncValidators}function Js(R){return R?Array.isArray(R)?R:[R]:[]}function Zi(R,D){return Array.isArray(R)?R.includes(D):R===D}function ur(R,D){const w=Js(D);return Js(R).forEach(de=>{Zi(w,de)||w.push(de)}),w}function Wr(R,D){return Js(D).filter(w=>!Zi(R,w))}class kr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(D){this._rawValidators=D||[],this._composedValidatorFn=ls(this._rawValidators)}_setAsyncValidators(D){this._rawAsyncValidators=D||[],this._composedAsyncValidatorFn=ra(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(D){this._onDestroyCallbacks.push(D)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(D=>D()),this._onDestroyCallbacks=[]}reset(D){this.control&&this.control.reset(D)}hasError(D,w){return!!this.control&&this.control.hasError(D,w)}getError(D,w){return this.control?this.control.getError(D,w):null}}class kn extends kr{get formDirective(){return null}get path(){return null}}class vr extends kr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ki{constructor(D){this._cd=D}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let hr=(()=>{class R extends Ki{constructor(w){super(w)}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(vr,2))},R.\u0275dir=y.lG2({type:R,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(w,j){2&w&&y.ekj("ng-untouched",j.isUntouched)("ng-touched",j.isTouched)("ng-pristine",j.isPristine)("ng-dirty",j.isDirty)("ng-valid",j.isValid)("ng-invalid",j.isInvalid)("ng-pending",j.isPending)},features:[y.qOj]}),R})(),Tr=(()=>{class R extends Ki{constructor(w){super(w)}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(kn,10))},R.\u0275dir=y.lG2({type:R,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(w,j){2&w&&y.ekj("ng-untouched",j.isUntouched)("ng-touched",j.isTouched)("ng-pristine",j.isPristine)("ng-dirty",j.isDirty)("ng-valid",j.isValid)("ng-invalid",j.isInvalid)("ng-pending",j.isPending)("ng-submitted",j.isSubmitted)},features:[y.qOj]}),R})();const be="VALID",Ue="INVALID",Ge="PENDING",ut="DISABLED";function mt(R){return(ii(R)?R.validators:R)||null}function an(R,D){return(ii(D)?D.asyncValidators:R)||null}function ii(R){return null!=R&&!Array.isArray(R)&&"object"==typeof R}function Ci(R,D,w){const j=R.controls;if(!(D?Object.keys(j):j).length)throw new y.vHH(1e3,"");if(!j[w])throw new y.vHH(1001,"")}function Fi(R,D,w){R._forEachChild((j,de)=>{if(void 0===w[de])throw new y.vHH(1002,"")})}class Fn{constructor(D,w){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(D),this._assignAsyncValidators(w)}get validator(){return this._composedValidatorFn}set validator(D){this._rawValidators=this._composedValidatorFn=D}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(D){this._rawAsyncValidators=this._composedAsyncValidatorFn=D}get parent(){return this._parent}get valid(){return this.status===be}get invalid(){return this.status===Ue}get pending(){return this.status==Ge}get disabled(){return this.status===ut}get enabled(){return this.status!==ut}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(D){this._assignValidators(D)}setAsyncValidators(D){this._assignAsyncValidators(D)}addValidators(D){this.setValidators(ur(D,this._rawValidators))}addAsyncValidators(D){this.setAsyncValidators(ur(D,this._rawAsyncValidators))}removeValidators(D){this.setValidators(Wr(D,this._rawValidators))}removeAsyncValidators(D){this.setAsyncValidators(Wr(D,this._rawAsyncValidators))}hasValidator(D){return Zi(this._rawValidators,D)}hasAsyncValidator(D){return Zi(this._rawAsyncValidators,D)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(D={}){this.touched=!0,this._parent&&!D.onlySelf&&this._parent.markAsTouched(D)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(D=>D.markAllAsTouched())}markAsUntouched(D={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(w=>{w.markAsUntouched({onlySelf:!0})}),this._parent&&!D.onlySelf&&this._parent._updateTouched(D)}markAsDirty(D={}){this.pristine=!1,this._parent&&!D.onlySelf&&this._parent.markAsDirty(D)}markAsPristine(D={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(w=>{w.markAsPristine({onlySelf:!0})}),this._parent&&!D.onlySelf&&this._parent._updatePristine(D)}markAsPending(D={}){this.status=Ge,!1!==D.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!D.onlySelf&&this._parent.markAsPending(D)}disable(D={}){const w=this._parentMarkedDirty(D.onlySelf);this.status=ut,this.errors=null,this._forEachChild(j=>{j.disable({...D,onlySelf:!0})}),this._updateValue(),!1!==D.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...D,skipPristineCheck:w}),this._onDisabledChange.forEach(j=>j(!0))}enable(D={}){const w=this._parentMarkedDirty(D.onlySelf);this.status=be,this._forEachChild(j=>{j.enable({...D,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:D.emitEvent}),this._updateAncestors({...D,skipPristineCheck:w}),this._onDisabledChange.forEach(j=>j(!1))}_updateAncestors(D){this._parent&&!D.onlySelf&&(this._parent.updateValueAndValidity(D),D.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(D){this._parent=D}getRawValue(){return this.value}updateValueAndValidity(D={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===be||this.status===Ge)&&this._runAsyncValidator(D.emitEvent)),!1!==D.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!D.onlySelf&&this._parent.updateValueAndValidity(D)}_updateTreeValidity(D={emitEvent:!0}){this._forEachChild(w=>w._updateTreeValidity(D)),this.updateValueAndValidity({onlySelf:!0,emitEvent:D.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ut:be}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(D){if(this.asyncValidator){this.status=Ge,this._hasOwnPendingAsyncValidator=!0;const w=Se(this.asyncValidator(this));this._asyncValidationSubscription=w.subscribe(j=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(j,{emitEvent:D})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(D,w={}){this.errors=D,this._updateControlsErrors(!1!==w.emitEvent)}get(D){let w=D;return null==w||(Array.isArray(w)||(w=w.split(".")),0===w.length)?null:w.reduce((j,de)=>j&&j._find(de),this)}getError(D,w){const j=w?this.get(w):this;return j&&j.errors?j.errors[D]:null}hasError(D,w){return!!this.getError(D,w)}get root(){let D=this;for(;D._parent;)D=D._parent;return D}_updateControlsErrors(D){this.status=this._calculateStatus(),D&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(D)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?ut:this.errors?Ue:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ge)?Ge:this._anyControlsHaveStatus(Ue)?Ue:be}_anyControlsHaveStatus(D){return this._anyControls(w=>w.status===D)}_anyControlsDirty(){return this._anyControls(D=>D.dirty)}_anyControlsTouched(){return this._anyControls(D=>D.touched)}_updatePristine(D={}){this.pristine=!this._anyControlsDirty(),this._parent&&!D.onlySelf&&this._parent._updatePristine(D)}_updateTouched(D={}){this.touched=this._anyControlsTouched(),this._parent&&!D.onlySelf&&this._parent._updateTouched(D)}_registerOnCollectionChange(D){this._onCollectionChange=D}_setUpdateStrategy(D){ii(D)&&null!=D.updateOn&&(this._updateOn=D.updateOn)}_parentMarkedDirty(D){return!D&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(D){return null}_assignValidators(D){this._rawValidators=Array.isArray(D)?D.slice():D,this._composedValidatorFn=function _n(R){return Array.isArray(R)?ls(R):R||null}(this._rawValidators)}_assignAsyncValidators(D){this._rawAsyncValidators=Array.isArray(D)?D.slice():D,this._composedAsyncValidatorFn=function nr(R){return Array.isArray(R)?ra(R):R||null}(this._rawAsyncValidators)}}class Bn extends Fn{constructor(D,w,j){super(mt(w),an(j,w)),this.controls=D,this._initObservables(),this._setUpdateStrategy(w),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(D,w){return this.controls[D]?this.controls[D]:(this.controls[D]=w,w.setParent(this),w._registerOnCollectionChange(this._onCollectionChange),w)}addControl(D,w,j={}){this.registerControl(D,w),this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}removeControl(D,w={}){this.controls[D]&&this.controls[D]._registerOnCollectionChange(()=>{}),delete this.controls[D],this.updateValueAndValidity({emitEvent:w.emitEvent}),this._onCollectionChange()}setControl(D,w,j={}){this.controls[D]&&this.controls[D]._registerOnCollectionChange(()=>{}),delete this.controls[D],w&&this.registerControl(D,w),this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}contains(D){return this.controls.hasOwnProperty(D)&&this.controls[D].enabled}setValue(D,w={}){Fi(this,0,D),Object.keys(D).forEach(j=>{Ci(this,!0,j),this.controls[j].setValue(D[j],{onlySelf:!0,emitEvent:w.emitEvent})}),this.updateValueAndValidity(w)}patchValue(D,w={}){null!=D&&(Object.keys(D).forEach(j=>{const de=this.controls[j];de&&de.patchValue(D[j],{onlySelf:!0,emitEvent:w.emitEvent})}),this.updateValueAndValidity(w))}reset(D={},w={}){this._forEachChild((j,de)=>{j.reset(D[de],{onlySelf:!0,emitEvent:w.emitEvent})}),this._updatePristine(w),this._updateTouched(w),this.updateValueAndValidity(w)}getRawValue(){return this._reduceChildren({},(D,w,j)=>(D[j]=w.getRawValue(),D))}_syncPendingControls(){let D=this._reduceChildren(!1,(w,j)=>!!j._syncPendingControls()||w);return D&&this.updateValueAndValidity({onlySelf:!0}),D}_forEachChild(D){Object.keys(this.controls).forEach(w=>{const j=this.controls[w];j&&D(j,w)})}_setUpControls(){this._forEachChild(D=>{D.setParent(this),D._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(D){for(const[w,j]of Object.entries(this.controls))if(this.contains(w)&&D(j))return!0;return!1}_reduceValue(){return this._reduceChildren({},(w,j,de)=>((j.enabled||this.disabled)&&(w[de]=j.value),w))}_reduceChildren(D,w){let j=D;return this._forEachChild((de,Ze)=>{j=w(j,de,Ze)}),j}_allControlsDisabled(){for(const D of Object.keys(this.controls))if(this.controls[D].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(D){return this.controls.hasOwnProperty(D)?this.controls[D]:null}}class Ha extends Bn{}const hi=new y.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Hi}),Hi="always";function uo(R,D,w=Hi){co(R,D),D.valueAccessor.writeValue(R.value),(R.disabled||"always"===w)&&D.valueAccessor.setDisabledState?.(R.disabled),function ps(R,D){D.valueAccessor.registerOnChange(w=>{R._pendingValue=w,R._pendingChange=!0,R._pendingDirty=!0,"change"===R.updateOn&&Ta(R,D)})}(R,D),function Ga(R,D){const w=(j,de)=>{D.valueAccessor.writeValue(j),de&&D.viewToModelUpdate(j)};R.registerOnChange(w),D._registerOnDestroy(()=>{R._unregisterOnChange(w)})}(R,D),function zu(R,D){D.valueAccessor.registerOnTouched(()=>{R._pendingTouched=!0,"blur"===R.updateOn&&R._pendingChange&&Ta(R,D),"submit"!==R.updateOn&&R.markAsTouched()})}(R,D),function lo(R,D){if(D.valueAccessor.setDisabledState){const w=j=>{D.valueAccessor.setDisabledState(j)};R.registerOnDisabledChange(w),D._registerOnDestroy(()=>{R._unregisterOnDisabledChange(w)})}}(R,D)}function Bs(R,D,w=!0){const j=()=>{};D.valueAccessor&&(D.valueAccessor.registerOnChange(j),D.valueAccessor.registerOnTouched(j)),xs(R,D),R&&(D._invokeOnDestroyCallbacks(),R._registerOnCollectionChange(()=>{}))}function ba(R,D){R.forEach(w=>{w.registerOnValidatorChange&&w.registerOnValidatorChange(D)})}function co(R,D){const w=di(R);null!==D.validator?R.setValidators(mr(w,D.validator)):"function"==typeof w&&R.setValidators([w]);const j=Do(R);null!==D.asyncValidator?R.setAsyncValidators(mr(j,D.asyncValidator)):"function"==typeof j&&R.setAsyncValidators([j]);const de=()=>R.updateValueAndValidity();ba(D._rawValidators,de),ba(D._rawAsyncValidators,de)}function xs(R,D){let w=!1;if(null!==R){if(null!==D.validator){const de=di(R);if(Array.isArray(de)&&de.length>0){const Ze=de.filter(tn=>tn!==D.validator);Ze.length!==de.length&&(w=!0,R.setValidators(Ze))}}if(null!==D.asyncValidator){const de=Do(R);if(Array.isArray(de)&&de.length>0){const Ze=de.filter(tn=>tn!==D.asyncValidator);Ze.length!==de.length&&(w=!0,R.setAsyncValidators(Ze))}}}const j=()=>{};return ba(D._rawValidators,j),ba(D._rawAsyncValidators,j),w}function Ta(R,D){R._pendingDirty&&R.markAsDirty(),R.setValue(R._pendingValue,{emitModelToViewChange:!1}),D.viewToModelUpdate(R._pendingValue),R._pendingChange=!1}function rs(R,D){const w=R.indexOf(D);w>-1&&R.splice(w,1)}function Dr(R){return"object"==typeof R&&null!==R&&2===Object.keys(R).length&&"value"in R&&"disabled"in R}const po=class extends Fn{constructor(D=null,w,j){super(mt(w),an(j,w)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(D),this._setUpdateStrategy(w),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ii(w)&&(w.nonNullable||w.initialValueIsDefault)&&(this.defaultValue=Dr(D)?D.value:D)}setValue(D,w={}){this.value=this._pendingValue=D,this._onChange.length&&!1!==w.emitModelToViewChange&&this._onChange.forEach(j=>j(this.value,!1!==w.emitViewToModelChange)),this.updateValueAndValidity(w)}patchValue(D,w={}){this.setValue(D,w)}reset(D=this.defaultValue,w={}){this._applyFormState(D),this.markAsPristine(w),this.markAsUntouched(w),this.setValue(this.value,w),this._pendingChange=!1}_updateValue(){}_anyControls(D){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(D){this._onChange.push(D)}_unregisterOnChange(D){rs(this._onChange,D)}registerOnDisabledChange(D){this._onDisabledChange.push(D)}_unregisterOnDisabledChange(D){rs(this._onDisabledChange,D)}_forEachChild(D){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(D){Dr(D)?(this.value=this._pendingValue=D.value,D.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=D}};let On=(()=>{class R{}return R.\u0275fac=function(w){return new(w||R)},R.\u0275dir=y.lG2({type:R,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),R})(),aa=(()=>{class R{}return R.\u0275fac=function(w){return new(w||R)},R.\u0275mod=y.oAB({type:R}),R.\u0275inj=y.cJS({}),R})();const ms=new y.OlP("NgModelWithFormControlWarning"),Sa={provide:kn,useExisting:(0,y.Gpc)(()=>Ms)};let Ms=(()=>{class R extends kn{constructor(w,j,de){super(),this.callSetDisabledState=de,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(w),this._setAsyncValidators(j)}ngOnChanges(w){this._checkFormPresent(),w.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xs(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(w){const j=this.form.get(w.path);return uo(j,w,this.callSetDisabledState),j.updateValueAndValidity({emitEvent:!1}),this.directives.push(w),j}getControl(w){return this.form.get(w.path)}removeControl(w){Bs(w.control||null,w,!1),function fo(R,D){const w=R.indexOf(D);w>-1&&R.splice(w,1)}(this.directives,w)}addFormGroup(w){this._setUpFormContainer(w)}removeFormGroup(w){this._cleanUpFormContainer(w)}getFormGroup(w){return this.form.get(w.path)}addFormArray(w){this._setUpFormContainer(w)}removeFormArray(w){this._cleanUpFormContainer(w)}getFormArray(w){return this.form.get(w.path)}updateModel(w,j){this.form.get(w.path).setValue(j)}onSubmit(w){return this.submitted=!0,function bi(R,D){R._syncPendingControls(),D.forEach(w=>{const j=w.control;"submit"===j.updateOn&&j._pendingChange&&(w.viewToModelUpdate(j._pendingValue),j._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(w),"dialog"===w?.target?.method}onReset(){this.resetForm()}resetForm(w){this.form.reset(w),this.submitted=!1}_updateDomValue(){this.directives.forEach(w=>{const j=w.control,de=this.form.get(w.path);j!==de&&(Bs(j||null,w),(R=>R instanceof po)(de)&&(uo(de,w,this.callSetDisabledState),w.control=de))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(w){const j=this.form.get(w.path);(function si(R,D){co(R,D)})(j,w),j.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(w){if(this.form){const j=this.form.get(w.path);j&&function $n(R,D){return xs(R,D)}(j,w)&&j.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){co(this.form,this),this._oldForm&&xs(this._oldForm,this)}_checkFormPresent(){}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(Xt,10),y.Y36(Dn,10),y.Y36(hi,8))},R.\u0275dir=y.lG2({type:R,selectors:[["","formGroup",""]],hostBindings:function(w,j){1&w&&y.NdJ("submit",function(Ze){return j.onSubmit(Ze)})("reset",function(){return j.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([Sa]),y.qOj,y.TTD]}),R})();const la={provide:vr,useExisting:(0,y.Gpc)(()=>Wo)};let Wo=(()=>{class R extends vr{set isDisabled(w){}constructor(w,j,de,Ze,tn){super(),this._ngModelWarningConfig=tn,this._added=!1,this.update=new y.vpe,this._ngModelWarningSent=!1,this._parent=w,this._setValidators(j),this._setAsyncValidators(de),this.valueAccessor=function ho(R,D){if(!D)return null;let w,j,de;return Array.isArray(D),D.forEach(Ze=>{Ze.constructor===Mt?w=Ze:function So(R){return Object.getPrototypeOf(R.constructor)===gr}(Ze)?j=Ze:de=Ze}),de||j||w||null}(0,Ze)}ngOnChanges(w){this._added||this._setUpControl(),function Gi(R,D){if(!R.hasOwnProperty("model"))return!1;const w=R.model;return!!w.isFirstChange()||!Object.is(D,w.currentValue)}(w,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(w){this.viewModel=w,this.update.emit(w)}get path(){return function As(R,D){return[...D.path,R]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return R._ngModelWarningSentOnce=!1,R.\u0275fac=function(w){return new(w||R)(y.Y36(kn,13),y.Y36(Xt,10),y.Y36(Dn,10),y.Y36(Vr,10),y.Y36(ms,8))},R.\u0275dir=y.lG2({type:R,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[y._Bn([la]),y.qOj,y.TTD]}),R})(),Rs=(()=>{class R{constructor(){this._validator=we}ngOnChanges(w){if(this.inputName in w){const j=this.normalizeInput(w[this.inputName].currentValue);this._enabled=this.enabled(j),this._validator=this._enabled?this.createValidator(j):we,this._onChange&&this._onChange()}}validate(w){return this._validator(w)}registerOnValidatorChange(w){this._onChange=w}enabled(w){return null!=w}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275dir=y.lG2({type:R,features:[y.TTD]}),R})();const Cu={provide:Xt,useExisting:(0,y.Gpc)(()=>Po),multi:!0};let Po=(()=>{class R extends Rs{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=y.D6c,this.createValidator=w=>nt}enabled(w){return w}}return R.\u0275fac=function(){let D;return function(j){return(D||(D=y.n5z(R)))(j||R)}}(),R.\u0275dir=y.lG2({type:R,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(w,j){2&w&&y.uIk("required",j._enabled?"":null)},inputs:{required:"required"},features:[y._Bn([Cu]),y.qOj]}),R})(),qa=(()=>{class R{}return R.\u0275fac=function(w){return new(w||R)},R.\u0275mod=y.oAB({type:R}),R.\u0275inj=y.cJS({imports:[aa]}),R})();class Hs extends Fn{constructor(D,w,j){super(mt(w),an(j,w)),this.controls=D,this._initObservables(),this._setUpdateStrategy(w),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(D){return this.controls[this._adjustIndex(D)]}push(D,w={}){this.controls.push(D),this._registerControl(D),this.updateValueAndValidity({emitEvent:w.emitEvent}),this._onCollectionChange()}insert(D,w,j={}){this.controls.splice(D,0,w),this._registerControl(w),this.updateValueAndValidity({emitEvent:j.emitEvent})}removeAt(D,w={}){let j=this._adjustIndex(D);j<0&&(j=0),this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),this.controls.splice(j,1),this.updateValueAndValidity({emitEvent:w.emitEvent})}setControl(D,w,j={}){let de=this._adjustIndex(D);de<0&&(de=0),this.controls[de]&&this.controls[de]._registerOnCollectionChange(()=>{}),this.controls.splice(de,1),w&&(this.controls.splice(de,0,w),this._registerControl(w)),this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(D,w={}){Fi(this,0,D),D.forEach((j,de)=>{Ci(this,!1,de),this.at(de).setValue(j,{onlySelf:!0,emitEvent:w.emitEvent})}),this.updateValueAndValidity(w)}patchValue(D,w={}){null!=D&&(D.forEach((j,de)=>{this.at(de)&&this.at(de).patchValue(j,{onlySelf:!0,emitEvent:w.emitEvent})}),this.updateValueAndValidity(w))}reset(D=[],w={}){this._forEachChild((j,de)=>{j.reset(D[de],{onlySelf:!0,emitEvent:w.emitEvent})}),this._updatePristine(w),this._updateTouched(w),this.updateValueAndValidity(w)}getRawValue(){return this.controls.map(D=>D.getRawValue())}clear(D={}){this.controls.length<1||(this._forEachChild(w=>w._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:D.emitEvent}))}_adjustIndex(D){return D<0?D+this.length:D}_syncPendingControls(){let D=this.controls.reduce((w,j)=>!!j._syncPendingControls()||w,!1);return D&&this.updateValueAndValidity({onlySelf:!0}),D}_forEachChild(D){this.controls.forEach((w,j)=>{D(w,j)})}_updateValue(){this.value=this.controls.filter(D=>D.enabled||this.disabled).map(D=>D.value)}_anyControls(D){return this.controls.some(w=>w.enabled&&D(w))}_setUpControls(){this._forEachChild(D=>this._registerControl(D))}_allControlsDisabled(){for(const D of this.controls)if(D.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(D){D.setParent(this),D._registerOnCollectionChange(this._onCollectionChange)}_find(D){return this.at(D)??null}}function V(R){return!!R&&(void 0!==R.asyncValidators||void 0!==R.validators||void 0!==R.updateOn)}let Q=(()=>{class R{constructor(){this.useNonNullable=!1}get nonNullable(){const w=new R;return w.useNonNullable=!0,w}group(w,j=null){const de=this._reduceControls(w);let Ze={};return V(j)?Ze=j:null!==j&&(Ze.validators=j.validator,Ze.asyncValidators=j.asyncValidator),new Bn(de,Ze)}record(w,j=null){const de=this._reduceControls(w);return new Ha(de,j)}control(w,j,de){let Ze={};return this.useNonNullable?(V(j)?Ze=j:(Ze.validators=j,Ze.asyncValidators=de),new po(w,{...Ze,nonNullable:!0})):new po(w,j,de)}array(w,j,de){const Ze=w.map(tn=>this._createControl(tn));return new Hs(Ze,j,de)}_reduceControls(w){const j={};return Object.keys(w).forEach(de=>{j[de]=this._createControl(w[de])}),j}_createControl(w){return w instanceof po||w instanceof Fn?w:Array.isArray(w)?this.control(w[0],w.length>1?w[1]:null,w.length>2?w[2]:null):this.control(w)}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275prov=y.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),Bt=(()=>{class R{static withConfig(w){return{ngModule:R,providers:[{provide:hi,useValue:w.callSetDisabledState??Hi}]}}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275mod=y.oAB({type:R}),R.\u0275inj=y.cJS({imports:[qa]}),R})(),lr=(()=>{class R{static withConfig(w){return{ngModule:R,providers:[{provide:ms,useValue:w.warnOnNgModelWithFormControl??"always"},{provide:hi,useValue:w.callSetDisabledState??Hi}]}}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275mod=y.oAB({type:R}),R.\u0275inj=y.cJS({imports:[qa]}),R})();function Qn(R,D){if(1&R){const w=y.EpF();y.TgZ(0,"a",12),y.NdJ("keyup.enter",function(){y.CHM(w),y.oxw(3);const de=y.MAs(1);return y.KtG(de.previous())})("click",function(){y.CHM(w),y.oxw(3);const de=y.MAs(1);return y.KtG(de.previous())}),y._uU(1),y.TgZ(2,"span",13),y._uU(3),y.qZA()()}if(2&R){const w=y.oxw(3);y.xp6(1),y.hij(" ",w.previousLabel," "),y.xp6(2),y.Oqu(w.screenReaderPageLabel)}}function Xn(R,D){if(1&R&&(y.TgZ(0,"span",14),y._uU(1),y.TgZ(2,"span",13),y._uU(3),y.qZA()()),2&R){const w=y.oxw(3);y.xp6(1),y.hij(" ",w.previousLabel," "),y.xp6(2),y.Oqu(w.screenReaderPageLabel)}}function Ln(R,D){if(1&R&&(y.TgZ(0,"li",9),y.YNc(1,Qn,4,2,"a",10),y.YNc(2,Xn,4,2,"span",11),y.qZA()),2&R){y.oxw(2);const w=y.MAs(1);y.ekj("disabled",w.isFirstPage()),y.xp6(1),y.Q6J("ngIf",1<w.getCurrent()),y.xp6(1),y.Q6J("ngIf",w.isFirstPage())}}function ni(R,D){if(1&R){const w=y.EpF();y.TgZ(0,"a",12),y.NdJ("keyup.enter",function(){y.CHM(w);const de=y.oxw().$implicit;y.oxw(2);const Ze=y.MAs(1);return y.KtG(Ze.setCurrent(de.value))})("click",function(){y.CHM(w);const de=y.oxw().$implicit;y.oxw(2);const Ze=y.MAs(1);return y.KtG(Ze.setCurrent(de.value))}),y.TgZ(1,"span",13),y._uU(2),y.qZA(),y.TgZ(3,"span"),y._uU(4),y.ALo(5,"number"),y.qZA()()}if(2&R){const w=y.oxw().$implicit,j=y.oxw(2);y.xp6(2),y.hij("",j.screenReaderPageLabel," "),y.xp6(2),y.Oqu("..."===w.label?w.label:y.xi3(5,2,w.label,""))}}function or(R,D){if(1&R&&(y.ynx(0),y.TgZ(1,"span",16)(2,"span",13),y._uU(3),y.qZA(),y.TgZ(4,"span"),y._uU(5),y.ALo(6,"number"),y.qZA()(),y.BQk()),2&R){const w=y.oxw().$implicit,j=y.oxw(2);y.xp6(3),y.hij("",j.screenReaderCurrentLabel," "),y.xp6(2),y.Oqu("..."===w.label?w.label:y.xi3(6,2,w.label,""))}}function Pi(R,D){if(1&R&&(y.TgZ(0,"li"),y.YNc(1,ni,6,5,"a",10),y.YNc(2,or,7,5,"ng-container",15),y.qZA()),2&R){const w=D.$implicit;y.oxw(2);const j=y.MAs(1);y.ekj("current",j.getCurrent()===w.value)("ellipsis","..."===w.label),y.xp6(1),y.Q6J("ngIf",j.getCurrent()!==w.value),y.xp6(1),y.Q6J("ngIf",j.getCurrent()===w.value)}}function Cr(R,D){if(1&R){const w=y.EpF();y.TgZ(0,"a",12),y.NdJ("keyup.enter",function(){y.CHM(w),y.oxw(3);const de=y.MAs(1);return y.KtG(de.next())})("click",function(){y.CHM(w),y.oxw(3);const de=y.MAs(1);return y.KtG(de.next())}),y._uU(1),y.TgZ(2,"span",13),y._uU(3),y.qZA()()}if(2&R){const w=y.oxw(3);y.xp6(1),y.hij(" ",w.nextLabel," "),y.xp6(2),y.Oqu(w.screenReaderPageLabel)}}function ss(R,D){if(1&R&&(y.TgZ(0,"span",14),y._uU(1),y.TgZ(2,"span",13),y._uU(3),y.qZA()()),2&R){const w=y.oxw(3);y.xp6(1),y.hij(" ",w.nextLabel," "),y.xp6(2),y.Oqu(w.screenReaderPageLabel)}}function Gs(R,D){if(1&R&&(y.TgZ(0,"li",17),y.YNc(1,Cr,4,2,"a",10),y.YNc(2,ss,4,2,"span",11),y.qZA()),2&R){y.oxw(2);const w=y.MAs(1);y.ekj("disabled",w.isLastPage()),y.xp6(1),y.Q6J("ngIf",!w.isLastPage()),y.xp6(1),y.Q6J("ngIf",w.isLastPage())}}function vs(R,D){if(1&R&&(y.TgZ(0,"ul",4),y.YNc(1,Ln,3,4,"li",5),y.TgZ(2,"li",6),y._uU(3),y.qZA(),y.YNc(4,Pi,3,6,"li",7),y.YNc(5,Gs,3,4,"li",8),y.qZA()),2&R){const w=y.oxw(),j=y.MAs(1);y.ekj("responsive",w.responsive),y.xp6(1),y.Q6J("ngIf",w.directionLinks),y.xp6(2),y.AsE(" ",j.getCurrent()," / ",j.getLastPage()," "),y.xp6(1),y.Q6J("ngForOf",j.pages)("ngForTrackBy",w.trackByIndex),y.xp6(1),y.Q6J("ngIf",w.directionLinks)}}class ws{constructor(){this.change=new y.vpe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(D){return null==D.id&&(D.id=this.DEFAULT_ID),this.instances[D.id]?this.updateInstance(D):(this.instances[D.id]=D,!0)}updateInstance(D){let w=!1;for(let j in this.instances[D.id])D[j]!==this.instances[D.id][j]&&(this.instances[D.id][j]=D[j],w=!0);return w}getCurrentPage(D){return this.instances[D]?this.instances[D].currentPage:1}setCurrentPage(D,w){if(this.instances[D]){let j=this.instances[D];w<=Math.ceil(j.totalItems/j.itemsPerPage)&&1<=w&&(this.instances[D].currentPage=w,this.change.emit(D))}}setTotalItems(D,w){this.instances[D]&&0<=w&&(this.instances[D].totalItems=w,this.change.emit(D))}setItemsPerPage(D,w){this.instances[D]&&(this.instances[D].itemsPerPage=w,this.change.emit(D))}getInstance(D=this.DEFAULT_ID){return this.instances[D]?this.clone(this.instances[D]):{}}clone(D){var w={};for(var j in D)D.hasOwnProperty(j)&&(w[j]=D[j]);return w}}const Ma=Number.MAX_SAFE_INTEGER;let Oo=(()=>{class R{constructor(w){this.service=w,this.state={}}transform(w,j){if(!(w instanceof Array)){let os=j.id||this.service.defaultId();return this.state[os]?this.state[os].slice:w}let un,Yr,de=j.totalItems&&j.totalItems!==w.length,Ze=this.createInstance(w,j),tn=Ze.id,gi=Ze.itemsPerPage,Xi=this.service.register(Ze);if(!de&&w instanceof Array){if(gi=+gi||Ma,un=(Ze.currentPage-1)*gi,Yr=un+gi,this.stateIsIdentical(tn,w,un,Yr))return this.state[tn].slice;{let Fo=w.slice(un,Yr);return this.saveState(tn,w,Fo,un,Yr),this.service.change.emit(tn),Fo}}return Xi&&this.service.change.emit(tn),this.saveState(tn,w,w,un,Yr),w}createInstance(w,j){return this.checkConfig(j),{id:null!=j.id?j.id:this.service.defaultId(),itemsPerPage:+j.itemsPerPage||0,currentPage:+j.currentPage||1,totalItems:+j.totalItems||w.length}}checkConfig(w){const de=["itemsPerPage","currentPage"].filter(Ze=>!(Ze in w));if(0<de.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${de.join(", ")}`)}saveState(w,j,de,Ze,tn){this.state[w]={collection:j,size:j.length,slice:de,start:Ze,end:tn}}stateIsIdentical(w,j,de,Ze){let tn=this.state[w];return!(!tn||tn.size!==j.length||tn.start!==de||tn.end!==Ze)&&tn.slice.every((Yr,gi)=>Yr===j[de+gi])}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(ws,16))},R.\u0275pipe=y.Yjl({name:"paginate",type:R,pure:!1}),R})(),zs=(()=>{class R{constructor(w,j){this.service=w,this.changeDetectorRef=j,this.maxSize=7,this.pageChange=new y.vpe,this.pageBoundsCorrection=new y.vpe,this.pages=[],this.changeSub=this.service.change.subscribe(de=>{this.id===de&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(w){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return 1===this.getCurrent()}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(w){this.pageChange.emit(w)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let w=this.service.getInstance(this.id);return w.totalItems<1?1:Math.ceil(w.totalItems/w.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){null==this.service.getInstance(this.id).id&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let w=this.service.getInstance(this.id);const j=this.outOfBoundCorrection(w);j!==w.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(j),this.pages=this.createPageArray(w.currentPage,w.itemsPerPage,w.totalItems,this.maxSize)}):this.pages=this.createPageArray(w.currentPage,w.itemsPerPage,w.totalItems,this.maxSize)}outOfBoundCorrection(w){const j=Math.ceil(w.totalItems/w.itemsPerPage);return j<w.currentPage&&0<j?j:w.currentPage<1?1:w.currentPage}createPageArray(w,j,de,Ze){Ze=+Ze;let tn=[];const un=Math.max(Math.ceil(de/j),1),Yr=Math.ceil(Ze/2),gi=w<=Yr,Xi=un-Yr<w,os=!gi&&!Xi;let Fo=Ze<un,Ws=1;for(;Ws<=un&&Ws<=Ze;){let pu,Xa=this.calculatePageNumber(Ws,w,Ze,un);pu=Fo&&(2===Ws&&(os||Xi)||Ws===Ze-1&&(os||gi))?"...":Xa,tn.push({label:pu,value:Xa}),Ws++}return tn}calculatePageNumber(w,j,de,Ze){let tn=Math.ceil(de/2);return w===de?Ze:1===w?w:de<Ze?Ze-tn<j?Ze-de+w:tn<j?j-tn+w:w:w}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(ws),y.Y36(y.sBO))},R.\u0275dir=y.lG2({type:R,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[y.TTD]}),R})();function ha(R){return!!R&&"false"!==R}let Ra=(()=>{class R{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new y.vpe,this.pageBoundsCorrection=new y.vpe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(w){this._directionLinks=ha(w)}get autoHide(){return this._autoHide}set autoHide(w){this._autoHide=ha(w)}get responsive(){return this._responsive}set responsive(w){this._responsive=ha(w)}trackByIndex(w){return w}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275cmp=y.Xpm({type:R,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(w,j){if(1&w&&(y.TgZ(0,"pagination-template",0,1),y.NdJ("pageChange",function(Ze){return j.pageChange.emit(Ze)})("pageBoundsCorrection",function(Ze){return j.pageBoundsCorrection.emit(Ze)}),y.TgZ(2,"nav",2),y.YNc(3,vs,6,8,"ul",3),y.qZA()()),2&w){const de=y.MAs(1);y.Q6J("id",j.id)("maxSize",j.maxSize),y.xp6(2),y.uIk("aria-label",j.screenReaderPaginationLabel),y.xp6(1),y.Q6J("ngIf",!(j.autoHide&&de.pages.length<=1))}},dependencies:[zs,A.O5,A.sg,A.JJ],styles:['.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}\n'],encapsulation:2,changeDetection:0}),R})(),fa=(()=>{class R{}return R.\u0275fac=function(w){return new(w||R)},R.\u0275mod=y.oAB({type:R}),R.\u0275inj=y.cJS({providers:[ws],imports:[[A.ez]]}),R})();var Ns=Y(9051),Za=Y(5197);class vi{constructor(D){this.db=D}AddStudent(D){this.studentsRef.push({firstName:D.firstName,lastName:D.lastName,email:D.email,mobileNumber:D.mobileNumber})}GetStudent(D){return this.studentRef=this.db.object("students-list/"+D),this.studentRef}GetStudentsList(){return this.studentsRef=this.db.list("students-list"),this.studentsRef}UpdateStudent(D){this.studentRef.update({firstName:D.firstName,lastName:D.lastName,email:D.email,mobileNumber:D.mobileNumber})}DeleteStudent(D){this.studentRef=this.db.object("students-list/"+D),this.studentRef.remove()}}function Na(R,D){1&R&&(y.TgZ(0,"p",14)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please enter atleast first name "),y.qZA())}function Ko(R,D){1&R&&(y.TgZ(0,"p",14)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Name shouldn't be less than 2 words "),y.qZA())}function Yo(R,D){1&R&&(y.TgZ(0,"p",14)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please provide email "),y.qZA())}function Pa(R,D){1&R&&(y.TgZ(0,"p",14)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please enter correct email "),y.qZA())}function bu(R,D){1&R&&(y.TgZ(0,"p",14)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please provide contact number "),y.qZA())}function Oa(R,D){1&R&&(y.TgZ(0,"p",14)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Use numbers only number "),y.qZA())}vi.\u0275fac=function(D){return new(D||vi)(y.LFG(Za.KQ))},vi.\u0275prov=y.Yz7({token:vi,factory:vi.\u0275fac,providedIn:"root"});class ka{constructor(D,w,j){this.crudApi=D,this.fb=w,this.toastr=j}ngOnInit(){this.crudApi.GetStudentsList(),this.studenForm()}studenForm(){this.studentForm=this.fb.group({firstName:["",[me.required,me.minLength(2)]],lastName:[""],email:["",[me.required,me.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],mobileNumber:["",[me.required,me.pattern("^[0-9]+$")]]})}get firstName(){return this.studentForm.get("firstName")}get lastName(){return this.studentForm.get("lastName")}get email(){return this.studentForm.get("email")}get mobileNumber(){return this.studentForm.get("mobileNumber")}ResetForm(){this.studentForm.reset()}submitStudentData(){this.crudApi.AddStudent(this.studentForm.value),this.toastr.success(this.studentForm.controls.firstName.value+" successfully added!"),this.ResetForm()}}function pa(R,D){1&R&&(y.TgZ(0,"p",18)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please enter firstname "),y.qZA())}function Ka(R,D){1&R&&(y.TgZ(0,"p",18)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Name shouldn't be less than 2 words "),y.qZA())}function Zu(R,D){1&R&&(y.TgZ(0,"p",18)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please provide email "),y.qZA())}function ko(R,D){1&R&&(y.TgZ(0,"p",18)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please enter correct email "),y.qZA())}function Fa(R,D){1&R&&(y.TgZ(0,"p",18)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please provide contact number "),y.qZA())}function Ya(R,D){1&R&&(y.TgZ(0,"p",18)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Use numbers only number "),y.qZA())}ka.\u0275fac=function(D){return new(D||ka)(y.Y36(vi),y.Y36(Q),y.Y36(en))},ka.\u0275cmp=y.Xpm({type:ka,selectors:[["app-add-student"]],decls:35,vars:8,consts:[[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2","first-text"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","firstName","required","",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["type","text","formControlName","mobileNumber","required","",1,"form-control"],[1,"form-group","text-right"],["type","button",1,"btn","btn-secondary","gap-right",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"error"]],template:function(D,w){1&D&&(y.TgZ(0,"div",0)(1,"h2",1),y._uU(2,"Add Member"),y.qZA()(),y.TgZ(3,"form",2),y.NdJ("ngSubmit",function(){return w.submitStudentData()}),y.TgZ(4,"div",3)(5,"div",4)(6,"div",3)(7,"div",5)(8,"label"),y._uU(9,"First name"),y.qZA(),y._UZ(10,"input",6),y.YNc(11,Na,4,0,"p",7),y.YNc(12,Ko,4,0,"p",7),y.qZA(),y.TgZ(13,"div",5)(14,"label"),y._uU(15,"Last name"),y.qZA(),y._UZ(16,"input",8),y.qZA()(),y.TgZ(17,"div",3)(18,"div",5)(19,"label"),y._uU(20,"Email"),y.qZA(),y._UZ(21,"input",9),y.YNc(22,Yo,4,0,"p",7),y.YNc(23,Pa,4,0,"p",7),y.qZA(),y.TgZ(24,"div",5)(25,"label"),y._uU(26,"Mobile number"),y.qZA(),y._UZ(27,"input",10),y.YNc(28,bu,4,0,"p",7),y.YNc(29,Oa,4,0,"p",7),y.qZA()(),y.TgZ(30,"div",11)(31,"button",12),y.NdJ("click",function(){return w.ResetForm()}),y._uU(32," Reset "),y.qZA(),y.TgZ(33,"button",13),y._uU(34," Add Member "),y.qZA()()()()()),2&D&&(y.xp6(3),y.Q6J("formGroup",w.studentForm),y.xp6(8),y.Q6J("ngIf",w.firstName.touched&&w.firstName.invalid),y.xp6(1),y.Q6J("ngIf",null==w.firstName.errors?null:w.firstName.errors.minlength),y.xp6(10),y.Q6J("ngIf",w.email.touched&&w.email.invalid),y.xp6(1),y.Q6J("ngIf",null==w.email.errors?null:w.email.errors.pattern),y.xp6(5),y.Q6J("ngIf",w.mobileNumber.touched&&w.mobileNumber.invalid),y.xp6(1),y.Q6J("ngIf",null==w.mobileNumber.errors?null:w.mobileNumber.errors.pattern),y.xp6(4),y.Q6J("disabled",!w.studentForm.valid))},dependencies:[A.O5,On,Mt,hr,Tr,Po,Ms,Wo],styles:[".first-text[_ngcontent-%COMP%]{font-family:Lucida Sans Regular;font-size:26px}"]});class Nr{constructor(D,w,j,de,Ze,tn){this.crudApi=D,this.fb=w,this.location=j,this.actRoute=de,this.router=Ze,this.toastr=tn}ngOnInit(){this.updateStudentData();const D=this.actRoute.snapshot.paramMap.get("id");this.crudApi.GetStudent(D).valueChanges().subscribe(w=>{this.editForm.setValue(w)})}get firstName(){return this.editForm.get("firstName")}get lastName(){return this.editForm.get("lastName")}get email(){return this.editForm.get("email")}get mobileNumber(){return this.editForm.get("mobileNumber")}updateStudentData(){this.editForm=this.fb.group({firstName:["",[me.required,me.minLength(2)]],lastName:[""],email:["",[me.required,me.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],mobileNumber:["",[me.required,me.pattern("^[0-9]+$")]]})}goBack(){this.location.back()}updateForm(){this.crudApi.UpdateStudent(this.editForm.value),this.toastr.success(this.editForm.controls.firstName.value+" updated successfully"),this.router.navigate(["view-students"])}}Nr.\u0275fac=function(D){return new(D||Nr)(y.Y36(vi),y.Y36(Q),y.Y36(A.Ye),y.Y36(Ns.gz),y.Y36(Ns.F0),y.Y36(en))},Nr.\u0275cmp=y.Xpm({type:Nr,selectors:[["app-edit-student"]],decls:40,vars:8,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],[1,"btn-toolbar","mb-2","mb-md-0"],[1,"btn-group"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"row"],[1,"col-lg-12"],[1,"pricing-header","form-block","mx-auto"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","firstName","required","",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["type","text","formControlName","mobileNumber","required","",1,"form-control"],[1,"form-group","text-right"],["type","submit",1,"btn","btn-success","btn-block",3,"disabled"],[1,"error"]],template:function(D,w){1&D&&(y.TgZ(0,"div",0)(1,"h1",1),y._uU(2,"Edit Student Details"),y.qZA(),y.TgZ(3,"div",2)(4,"div",3)(5,"button",4),y.NdJ("click",function(){return w.goBack()}),y._uU(6," Go Back "),y.qZA()()()(),y.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"form",8),y.NdJ("ngSubmit",function(){return w.updateForm()}),y.TgZ(11,"div",5)(12,"div",9)(13,"div",5)(14,"div",10)(15,"label"),y._uU(16,"First name"),y.qZA(),y._UZ(17,"input",11),y.YNc(18,pa,4,0,"p",12),y.YNc(19,Ka,4,0,"p",12),y.qZA(),y.TgZ(20,"div",10)(21,"label"),y._uU(22,"Last name"),y.qZA(),y._UZ(23,"input",13),y.qZA()(),y.TgZ(24,"div",5)(25,"div",10)(26,"label"),y._uU(27,"Email"),y.qZA(),y._UZ(28,"input",14),y.YNc(29,Zu,4,0,"p",12),y.YNc(30,ko,4,0,"p",12),y.qZA(),y.TgZ(31,"div",10)(32,"label"),y._uU(33,"Mobile number"),y.qZA(),y._UZ(34,"input",15),y.YNc(35,Fa,4,0,"p",12),y.YNc(36,Ya,4,0,"p",12),y.qZA()(),y.TgZ(37,"div",16)(38,"button",17),y._uU(39," Update Student "),y.qZA()()()()()()()()),2&D&&(y.xp6(10),y.Q6J("formGroup",w.editForm),y.xp6(8),y.Q6J("ngIf",w.firstName.touched&&w.firstName.invalid),y.xp6(1),y.Q6J("ngIf",null==w.firstName.errors?null:w.firstName.errors.minlength),y.xp6(10),y.Q6J("ngIf",w.email.touched&&w.email.invalid),y.xp6(1),y.Q6J("ngIf",null==w.email.errors?null:w.email.errors.pattern),y.xp6(5),y.Q6J("ngIf",w.mobileNumber.touched&&w.mobileNumber.invalid),y.xp6(1),y.Q6J("ngIf",null==w.mobileNumber.errors?null:w.mobileNumber.errors.pattern),y.xp6(2),y.Q6J("disabled",!w.editForm.valid))},dependencies:[A.O5,On,Mt,hr,Tr,Po,Ms,Wo]});class pi{constructor(){this.title="myApp"}}function Ti(R,D){1&R&&(y.TgZ(0,"a",7),y._uU(1," Add Member "),y.qZA())}function Ps(R,D){1&R&&(y.TgZ(0,"div",8),y._UZ(1,"img",9),y.qZA())}function Es(R,D){1&R&&(y.TgZ(0,"div",8),y._UZ(1,"img",10),y.TgZ(2,"p",11),y._uU(3,"No Member added yet!"),y.qZA(),y.TgZ(4,"a",7),y._uU(5," Add Member "),y.qZA()())}function Ku(R,D){if(1&R){const w=y.EpF();y.TgZ(0,"tr")(1,"th",17),y._uU(2),y.qZA(),y.TgZ(3,"td"),y._uU(4),y.qZA(),y.TgZ(5,"td"),y._uU(6),y.qZA(),y.TgZ(7,"td"),y._uU(8),y.qZA(),y.TgZ(9,"td",18)(10,"span",19),y._uU(11,"Edit"),y.qZA(),y.TgZ(12,"span",20),y.NdJ("click",function(){const Ze=y.CHM(w).$implicit,tn=y.oxw(2);return y.KtG(tn.deleteStudent(Ze))}),y._uU(13,"Delete"),y.qZA()()()}if(2&R){const w=D.$implicit,j=D.index;y.xp6(2),y.Oqu(j),y.xp6(2),y.AsE("",w.firstName," ",w.lastName,""),y.xp6(2),y.Oqu(w.email),y.xp6(2),y.Oqu(w.mobileNumber),y.xp6(2),y.MGl("routerLink","/edit-student/",w.$key,"")}}pi.\u0275fac=function(D){return new(D||pi)},pi.\u0275cmp=y.Xpm({type:pi,selectors:[["app-infoblink"]],decls:25,vars:0,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],["routerLink","/documentation",1,"navbar-brand","col-sm-3","col-md-2","mr-0"],[1,"dasboard-text","first-text"],[1,"navbar-nav","px-3"],[1,"nav-item","text-nowrap"],["routerLink","/register-student",1,"nav-link","second-text"],[1,"user-image",2,"background-image","url('assets/user1.png')"],[1,"container-fluid"],[1,"row"],[1,"col-2","col-lg-2","col-mg-2"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item","third-text"],["routerLink","/register-student","routerLinkActive","active",1,"nav-link"],["routerLink","/view-students","routerLinkActive","active",1,"nav-link"],[1,"col-10","col-lg-10","col-mg-10"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"]],template:function(D,w){1&D&&(y.TgZ(0,"nav",0)(1,"a",1)(2,"span",2),y._uU(3,"InfoBlink"),y.qZA()(),y.TgZ(4,"ul",3)(5,"li",4)(6,"a",5),y._UZ(7,"span",6),y._uU(8," Hello Rupam "),y.qZA()()()(),y.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"nav",10)(13,"div",11)(14,"ul",12)(15,"li",13)(16,"a",14),y._uU(17," Add Member "),y.qZA()(),y.TgZ(18,"li",13)(19,"a",15),y._uU(20," Members List "),y.qZA()()()()()(),y.TgZ(21,"div",16)(22,"main",17)(23,"div",18),y._UZ(24,"router-outlet"),y.qZA()()()()())},dependencies:[Ns.lC,Ns.rH,Ns.Od],styles:[".first-text[_ngcontent-%COMP%]{color:#fff;font-family:Lucida Sans;font-size:26px}.second-text[_ngcontent-%COMP%]{color:#fff;font-family:Lucida Sans Regular;font-size:16px}.third-text[_ngcontent-%COMP%]{font-family:Lucida Sans Regular;font-size:18px;margin-top:18px;margin-bottom:18px}"]});const rl=function(R){return{itemsPerPage:8,currentPage:R}};function Yu(R,D){if(1&R&&(y.TgZ(0,"div",12)(1,"table",13)(2,"thead")(3,"tr")(4,"th",14),y._uU(5,"Member Id"),y.qZA(),y.TgZ(6,"th",14),y._uU(7,"Member name"),y.qZA(),y.TgZ(8,"th",14),y._uU(9,"Email"),y.qZA(),y.TgZ(10,"th",14),y._uU(11,"Mobile number"),y.qZA(),y.TgZ(12,"th",15),y._uU(13,"Edit"),y.qZA()()(),y.TgZ(14,"tbody"),y.YNc(15,Ku,14,6,"tr",16),y.ALo(16,"paginate"),y.qZA()()()),2&R){const w=y.oxw();y.xp6(15),y.Q6J("ngForOf",y.xi3(16,1,w.Student,y.VKq(4,rl,w.p)))}}class Qa{constructor(D,w){this.crudApi=D,this.toastr=w,this.p=1,this.hideWhenNoStudent=!1,this.noData=!1,this.preLoader=!0}ngOnInit(){this.dataState(),this.crudApi.GetStudentsList().snapshotChanges().subscribe(w=>{this.Student=[],w.forEach(j=>{let de=j.payload.toJSON();this.Student.push(de)})})}dataState(){this.crudApi.GetStudentsList().valueChanges().subscribe(D=>{this.preLoader=!1,D.length<=0?(this.hideWhenNoStudent=!1,this.noData=!0):(this.hideWhenNoStudent=!0,this.noData=!1)})}deleteStudent(D){window.confirm("Are sure you want to delete this student ?")&&(this.crudApi.DeleteStudent(D.$key),this.toastr.success(D.firstName+" successfully deleted!"))}}Qa.\u0275fac=function(D){return new(D||Qa)(y.Y36(vi),y.Y36(en))},Qa.\u0275cmp=y.Xpm({type:Qa,selectors:[["app-student-list"]],decls:9,vars:4,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2","first-text"],["routerLink","/register-student","class","btn btn-success",4,"ngIf"],[1,"pricing-header","mx-auto"],["class","no-data text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],[3,"pageChange"],["routerLink","/register-student",1,"btn","btn-success"],[1,"no-data","text-center"],["src","assets/preloader.gif","alt","No student",1,"preloader-icon"],["src","assets/no-student.svg","alt","No student",1,"nodata-msg"],[1,"nodata-msg"],[1,"table-responsive"],[1,"table","table-bordered","table-responsive-sm","table-responsive-md","table-responsive-lg"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["scope","row"],[1,"text-center","action-block"],[1,"mr-2","btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm",3,"click"]],template:function(D,w){1&D&&(y.TgZ(0,"div",0)(1,"h2",1),y._uU(2,"Members List"),y.qZA(),y.YNc(3,Ti,2,0,"a",2),y.qZA(),y.TgZ(4,"div",3),y.YNc(5,Ps,2,0,"div",4),y.YNc(6,Es,6,0,"div",4),y.YNc(7,Yu,17,6,"div",5),y.TgZ(8,"pagination-controls",6),y.NdJ("pageChange",function(de){return w.p=de}),y.qZA()()),2&D&&(y.xp6(3),y.Q6J("ngIf",w.hideWhenNoStudent),y.xp6(2),y.Q6J("ngIf",w.preLoader),y.xp6(1),y.Q6J("ngIf",w.noData),y.xp6(1),y.Q6J("ngIf",w.hideWhenNoStudent))},dependencies:[A.sg,A.O5,Ra,Ns.rH,Oo],styles:[".first-text[_ngcontent-%COMP%]{font-family:Lucida Sans Regular;font-size:26px}"]});const fu=[{path:"",component:pi,children:[{path:"register-student",component:ka},{path:"view-students",component:Qa},{path:"edit-student/:id",component:Nr}]}];class Qo{}Qo.\u0275fac=function(D){return new(D||Qo)},Qo.\u0275mod=y.oAB({type:Qo}),Qo.\u0275inj=y.cJS({imports:[Ns.Bz.forChild(fu),Ns.Bz]});class Bi{}Bi.\u0275fac=function(D){return new(D||Bi)},Bi.\u0275mod=y.oAB({type:Bi}),Bi.\u0275inj=y.cJS({imports:[A.ez,ar.forRoot(),lr,Bt,fa,Qo]})},2417:(qt,We,Y)=>{var A=Y(1481),y=Y(9051),U=Y(4650),Ae=Y(6895);function De(n,e){if(1&n&&(U.TgZ(0,"li",24),U._uU(1),U.qZA()),2&n){const t=e.$implicit;U.xp6(1),U.Oqu(t)}}function xe(n,e){if(1&n&&(U.TgZ(0,"li",24),U._uU(1),U.qZA()),2&n){const t=e.$implicit;U.xp6(1),U.Oqu(t)}}function Le(n,e){if(1&n&&(U.TgZ(0,"li",24),U._uU(1),U.qZA()),2&n){const t=e.$implicit;U.xp6(1),U.Oqu(t)}}function Fe(n,e){if(1&n&&(U.TgZ(0,"li",24),U._uU(1),U.qZA()),2&n){const t=e.$implicit;U.xp6(1),U.Oqu(t)}}function Ve(n,e){if(1&n&&(U.TgZ(0,"li",24),U._uU(1),U.qZA()),2&n){const t=e.$implicit;U.xp6(1),U.Oqu(t)}}function ge(n,e){if(1&n&&(U.TgZ(0,"li",24),U._uU(1),U.qZA()),2&n){const t=e.$implicit;U.xp6(1),U.Oqu(t)}}class pe{constructor(){this.PROB_STATEMENT="Team lead is managing a group of team members. Each members sending a daily status report about the work they did at the end of day. Members are using mail to send report. Team lead needs to review the reports and acknowledge it and sent suggestions",this.LEAD_PROBLEM=["Too much emails","High chance for not able to review reports","Unable to filter particular member report","Unable to categories important reports","Much Time consuming","Effect on lead work efficiency","No seperate platform for report","Unable to maintain report for longer time"],this.MEMBER_PROBLEM=[" Use of work mail"," Unaware of report format","Half information remain same","More time consuming","No platform for maintaining static info","less focus on actual content "],this.EXTRACT="Based on understanding the problems of Team Lead and Member, they need a seperate platform instead of work email ie. an application where",this.LEAD_CAN=["Review the report as per his convienence","Able to filter report on member name basis","Able to categorize report importance","Can be able to review report anytime","Able to Store report for longer time","Provide suggestions and comments on report","Analyse the work progress of member based on stored data","No need to use email","Less pressure to acknowledge report on time","Able to set report format"," Able to mention expected information by member"],this.MEMBER_CAN=["Have a particular report format","Auto populate repeated information","Able to create our own profile","No need to use email","Send report to lead in desired format"],this.SOLUTION="A web application needs to be created which will give facility to both Team lead and Member to manage daily reports instead of mail. In this application Members can send reports to TeamLead and TeamLead can provide his comment and suggestions to it.",this.FACILITY=["Reports Storage"," Paricular Report format","Review and analyse report anytime","Maintain members profile","Analyse work progress","Time and Date wise sorting"],this.DEV_IDEA="As this is a web application, its development will be divided in 2 parts.. Frontend and Backend .FrontEnd of application will be designed with Angular framework and for backend will be using Google Firebase..",this.FRONTEND=["HTML","CSS","Bootstrap","Typescript","Angular framework"],this.BACKEND=["Google Firebase noSql cloud data storage"],this.DEPLOY="No any paid services are used for deploying this application. For deploying frontend angular application , we are using Github Pages.. And for Backend apis and database.. we are using google Firebase, its a NoSQL cloud based data storage system"}}pe.\u0275fac=function(e){return new(e||pe)},pe.\u0275cmp=U.Xpm({type:pe,selectors:[["app-document"]],decls:122,vars:11,consts:[[1,"navbar","navbar-dark","bg-primary"],[1,"navcont"],["type","button","routerLink","/app",1,"btn","btn-light","btn-lg",2,"margin-right","120px","color","black"],[1,"container-fluid","padd"],[1,"card","topic"],[1,"texsiz"],[1,"card","cardcont"],[1,"contentsize"],["src","/assets/infoblink.png","alt","Chania",1,"img-responsive","imagecenter"],["class","contentsizec",4,"ngFor","ngForOf"],[1,"texsizc"],[1,"row","padd"],[1,"col-6"],[1,"card",2,"width","400px"],["src","/assets/database.jpg","alt","Card image","width","50","height","200",1,"card-img-top"],[1,"card-body"],[1,"card-title","texsizcd"],[1,"card-text"],["src","/assets/report.png","alt","Card image","width","50","height","200",1,"card-img-top"],["src","/assets/analyse.png","alt","Card image","width","50","height","200",1,"card-img-top"],["src","/assets/profile.png","alt","Card image","width","50","height","200",1,"card-img-top"],["src","/assets/workprog.jpg","alt","Card image","width","50","height","200",1,"card-img-top"],["src","/assets/time.png","alt","Card image","width","50","height","200",1,"card-img-top"],[1,"texsizc",2,"margin-top","15px"],[1,"contentsizec"]],template:function(e,t){1&e&&(U.TgZ(0,"nav",0)(1,"h3",1),U._uU(2,"InfoBlink Documentation"),U.qZA(),U.TgZ(3,"button",2),U._uU(4,"App"),U.qZA()(),U.TgZ(5,"div",3)(6,"div",4)(7,"h5",5),U._uU(8,"Problem Statement"),U.qZA()(),U.TgZ(9,"div",6)(10,"p",7),U._uU(11),U.qZA(),U._UZ(12,"img",8),U.qZA(),U.TgZ(13,"div",4)(14,"h5",5),U._uU(15,"Problem with Team Lead"),U.qZA()(),U.TgZ(16,"div",6)(17,"ul"),U.YNc(18,De,2,1,"li",9),U.qZA()(),U.TgZ(19,"div",4)(20,"h5",5),U._uU(21,"Problem with Members"),U.qZA()(),U.TgZ(22,"div",6)(23,"ul"),U.YNc(24,xe,2,1,"li",9),U.qZA()(),U.TgZ(25,"div",4)(26,"h5",5),U._uU(27,"Problem Extract"),U.qZA()(),U.TgZ(28,"div",6)(29,"p",7),U._uU(30),U.qZA(),U.TgZ(31,"span",10),U._uU(32,"Lead can"),U.qZA(),U.TgZ(33,"ul"),U.YNc(34,Le,2,1,"li",9),U.qZA(),U.TgZ(35,"span",10),U._uU(36,"Member can"),U.qZA(),U.TgZ(37,"ul"),U.YNc(38,Fe,2,1,"li",9),U.qZA()(),U.TgZ(39,"div",4)(40,"h5",5),U._uU(41,"Solution"),U.qZA()(),U.TgZ(42,"div",6)(43,"p",7),U._uU(44),U.qZA(),U.TgZ(45,"span",10),U._uU(46,"Facilities"),U.qZA(),U.TgZ(47,"div",11)(48,"div",12)(49,"div",13),U._UZ(50,"img",14),U.TgZ(51,"div",15)(52,"h4",16),U._uU(53,"Storage"),U.qZA(),U.TgZ(54,"p",17),U._uU(55,"Reports will be stored in Database"),U.qZA()()()(),U.TgZ(56,"div",12)(57,"div",13),U._UZ(58,"img",18),U.TgZ(59,"div",15)(60,"h4",16),U._uU(61,"Format"),U.qZA(),U.TgZ(62,"p",17),U._uU(63,"Report format will be set by lead"),U.qZA()()()()(),U.TgZ(64,"div",11)(65,"div",12)(66,"div",13),U._UZ(67,"img",19),U.TgZ(68,"div",15)(69,"h4",16),U._uU(70,"Analyse"),U.qZA(),U.TgZ(71,"p",17),U._uU(72,"Review and analyse report anytime"),U.qZA()()()(),U.TgZ(73,"div",12)(74,"div",13),U._UZ(75,"img",20),U.TgZ(76,"div",15)(77,"h4",16),U._uU(78,"Profile"),U.qZA(),U.TgZ(79,"p",17),U._uU(80,"Member can maintain their profile"),U.qZA()()()()(),U.TgZ(81,"div",11)(82,"div",12)(83,"div",13),U._UZ(84,"img",21),U.TgZ(85,"div",15)(86,"h4",16),U._uU(87,"Work Progress"),U.qZA(),U.TgZ(88,"p",17),U._uU(89,"Member working progress can be easily observed"),U.qZA()()()(),U.TgZ(90,"div",12)(91,"div",13),U._UZ(92,"img",22),U.TgZ(93,"div",15)(94,"h4",16),U._uU(95,"Time & Date"),U.qZA(),U.TgZ(96,"p",17),U._uU(97,"Reports will be stored based on time and date"),U.qZA()()()()()(),U.TgZ(98,"div",4)(99,"h5",5),U._uU(100,"Development Idea"),U.qZA()(),U.TgZ(101,"div",6)(102,"p",7),U._uU(103),U.qZA()(),U.TgZ(104,"div",4)(105,"h5",5),U._uU(106,"Tools and Technologies"),U.qZA()(),U.TgZ(107,"div",6)(108,"span",23),U._uU(109,"FrontEnd"),U.qZA(),U.TgZ(110,"ul"),U.YNc(111,Ve,2,1,"li",9),U.qZA(),U.TgZ(112,"span",10),U._uU(113,"BackEnd & Database"),U.qZA(),U.TgZ(114,"ul"),U.YNc(115,ge,2,1,"li",9),U.qZA()(),U.TgZ(116,"div",4)(117,"h5",5),U._uU(118,"Deployment/Live"),U.qZA()(),U.TgZ(119,"div",6)(120,"p",7),U._uU(121),U.qZA()()()),2&e&&(U.xp6(11),U.Oqu(t.PROB_STATEMENT),U.xp6(7),U.Q6J("ngForOf",t.LEAD_PROBLEM),U.xp6(6),U.Q6J("ngForOf",t.MEMBER_PROBLEM),U.xp6(6),U.Oqu(t.EXTRACT),U.xp6(4),U.Q6J("ngForOf",t.LEAD_CAN),U.xp6(4),U.Q6J("ngForOf",t.MEMBER_CAN),U.xp6(6),U.Oqu(t.SOLUTION),U.xp6(59),U.Oqu(t.DEV_IDEA),U.xp6(8),U.Q6J("ngForOf",t.FRONTEND),U.xp6(4),U.Q6J("ngForOf",t.BACKEND),U.xp6(6),U.Oqu(t.DEPLOY))},dependencies:[Ae.sg,y.rH],styles:[".padd[_ngcontent-%COMP%]{padding:40px}.cardcont[_ngcontent-%COMP%]{background-color:#fff;margin-bottom:30px;box-shadow:10px 10px 5px 5px #add8e6}.imagecenter[_ngcontent-%COMP%]{height:540px;width:-moz-fit-content;width:fit-content}.topic[_ngcontent-%COMP%]{box-shadow:10px 10px 5px 5px #add8e6;width:25%;margin-bottom:20px}.texsiz[_ngcontent-%COMP%]{font-family:Gill Sans;padding-left:10px;font-weight:700;padding-top:5px;font-size:22px}.texsizc[_ngcontent-%COMP%]{font-family:Gill Sans;padding-left:50px;font-weight:700;font-size:18px}.texsizcd[_ngcontent-%COMP%]{font-family:Gill Sans;padding-left:5px;font-weight:700;font-size:18px}.contentsize[_ngcontent-%COMP%]{font-family:Georgia;padding-left:50px;padding-right:100px;padding-top:40px;font-weight:100;font-size:18px}.contentsizec[_ngcontent-%COMP%]{font-family:Georgia;padding-left:50px;padding-right:100px;font-weight:100;font-size:18px;padding-top:4px}.navcont[_ngcontent-%COMP%]{color:#fff;font-family:Georgia;padding-left:40px;padding-top:30px;padding-bottom:30px}"]});const yt=[{path:"",redirectTo:"/documentation",pathMatch:"full"},{path:"documentation",component:pe},{path:"app",loadChildren:()=>Promise.resolve().then(Y.bind(Y,3494)).then(n=>n.InfoBlinkModule)}];class ht{}ht.\u0275fac=function(e){return new(e||ht)},ht.\u0275mod=U.oAB({type:ht}),ht.\u0275inj=U.cJS({imports:[y.Bz.forRoot(yt),y.Bz]});class At{constructor(){this.title="myApp"}}At.\u0275fac=function(e){return new(e||At)},At.\u0275cmp=U.Xpm({type:At,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&U._UZ(0,"router-outlet")},dependencies:[y.lC],styles:[".navcont[_ngcontent-%COMP%]{color:#fff;font-family:Georgia;padding-left:40px;padding-top:30px;padding-bottom:30px}"]});var Qt=Y(3494),qe=Y(2011),at=Y(1205),ot=Y(9751),Et=Y(9646),ft=Y(8996),st=Y(4986),rt=Y(4482),Ct=Y(5403),G=Y(4004),Xe=Y(3900),ye=Y(2122),Ce=Y(3942),se=Y(5861),ke=Y(9681),Ke=Y(2090),Tt=Y(4859);const St="firebasestorage.googleapis.com",Ot="storageBucket";class Dt extends Ke.ZR{constructor(e,t,s=0){super(Cn(e),`Firebase Storage: ${t} (${Cn(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cn(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Nt=(()=>{return(n=Nt||(Nt={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Nt;var n})();function Cn(n){return"storage/"+n}function zn(){return new Dt(Nt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Zn(){return new Dt(Nt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ki(){return new Dt(Nt.CANCELED,"User canceled the upload/download.")}function ar(){return new Dt(Nt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ai(n){return new Dt(Nt.INVALID_ARGUMENT,n)}function $i(){return new Dt(Nt.APP_DELETED,"The Firebase app was deleted.")}function Un(n){return new Dt(Nt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jr(n,e){return new Dt(Nt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function dr(n){throw new Dt(Nt.INTERNAL_ERROR,"Internal error: "+n)}class Gt{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Gt.makeFromUrl(e,t)}catch{return new Gt(e,"")}if(""===s.path)return s;throw function Xr(n){return new Dt(Nt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let s=null;const a="([A-Za-z0-9.\\-_]+)",M=new RegExp("^gs://"+a+"(/(.*))?$","i");function W(Ar){Ar.path_=decodeURIComponent(Ar.path)}const le=t.replace(/[.]/g,"\\."),er=[{regex:M,indices:{bucket:1,path:3},postModify:function f(Ar){"/"===Ar.path.charAt(Ar.path.length-1)&&(Ar.path_=Ar.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${le}/v[A-Za-z0-9_]+/b/${a}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:W},{regex:new RegExp(`^https?://${t===St?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${a}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:W}];for(let Ar=0;Ar<er.length;Ar++){const Pr=er[Ar],Or=Pr.regex.exec(e);if(Or){let nl=Or[Pr.indices.path];nl||(nl=""),s=new Gt(Or[Pr.indices.bucket],nl),Pr.postModify(s);break}}if(null==s)throw function en(n){return new Dt(Nt.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return s}}class hn{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function gr(n){return"string"==typeof n||n instanceof String}function Vr(n){return tr()&&n instanceof Blob}function tr(){return typeof Blob<"u"&&!(0,Ke.UG)()}function Ii(n,e,t,s){if(s<e)throw Ai(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw Ai(`Invalid value for '${n}'. Expected ${t} or less.`)}function yn(n,e,t){let s=e;return null==t&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function fn(n){const e=encodeURIComponent;let t="?";for(const s in n)n.hasOwnProperty(s)&&(t=t+(e(s)+"=")+e(n[s])+"&");return t=t.slice(0,-1),t}var zr=(()=>{return(n=zr||(zr={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",zr;var n})();function Mt(n,e){const t=n>=500&&n<600,a=-1!==[408,429].indexOf(n),f=-1!==e.indexOf(n);return t||a||f}class pt{constructor(e,t,s,a,f,v,M,B,W,ee,le,Oe=!0){this.url_=e,this.method_=t,this.headers_=s,this.body_=a,this.successCodes_=f,this.additionalRetryCodes_=v,this.callback_=M,this.errorCallback_=B,this.timeout_=W,this.progressCallback_=ee,this.connectionFactory_=le,this.retry=Oe,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Qe,dt)=>{this.resolve_=Qe,this.reject_=dt,this.start_()})}start_(){const t=(s,a)=>{const f=this.resolve_,v=this.reject_,M=a.connection;if(a.wasSuccessCode)try{const B=this.callback_(M,M.getResponse());!function Kn(n){return void 0!==n}(B)?f():f(B)}catch(B){v(B)}else if(null!==M){const B=zn();B.serverResponse=M.getErrorText(),v(this.errorCallback_?this.errorCallback_(M,B):B)}else v(a.canceled?this.appDelete_?$i():ki():Zn())};this.canceled_?t(0,new Pt(!1,null,!0)):this.backoffId_=function An(n,e,t){let s=1,a=null,f=null,v=!1,M=0;function B(){return 2===M}let W=!1;function ee(...Jt){W||(W=!0,e.apply(null,Jt))}function le(Jt){a=setTimeout(()=>{a=null,n(Qe,B())},Jt)}function Oe(){f&&clearTimeout(f)}function Qe(Jt,...Hr){if(W)return void Oe();if(Jt)return Oe(),void ee.call(null,Jt,...Hr);if(B()||v)return Oe(),void ee.call(null,Jt,...Hr);let er;s<64&&(s*=2),1===M?(M=2,er=0):er=1e3*(s+Math.random()),le(er)}let dt=!1;function jt(Jt){dt||(dt=!0,Oe(),!W&&(null!==a?(Jt||(M=2),clearTimeout(a),le(0)):Jt||(M=1)))}return le(0),f=setTimeout(()=>{v=!0,jt(!0)},t),jt}((s,a)=>{if(a)return void s(!1,new Pt(!1,null,!0));const f=this.connectionFactory_();this.pendingConnection_=f;const v=M=>{null!==this.progressCallback_&&this.progressCallback_(M.loaded,M.lengthComputable?M.total:-1)};null!==this.progressCallback_&&f.addUploadProgressListener(v),f.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&f.removeUploadProgressListener(v),this.pendingConnection_=null;const M=f.getErrorCode()===zr.NO_ERROR,B=f.getStatus();if(!M||Mt(B,this.additionalRetryCodes_)&&this.retry){const ee=f.getErrorCode()===zr.ABORT;return void s(!1,new Pt(!1,null,ee))}const W=-1!==this.successCodes_.indexOf(B);s(!0,new Pt(W,f))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function us(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Pt{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function Ee(...n){const e=function fe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}if(tr())return new Blob(n);throw new Dt(Nt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ft={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class on{constructor(e,t){this.data=e,this.contentType=t||null}}function Wn(n,e){switch(n){case Ft.RAW:return new on(ve(e));case Ft.BASE64:case Ft.BASE64URL:return new on(ae(n,e));case Ft.DATA_URL:return new on(function gt(n){const e=new Se(n);return e.base64?ae(Ft.BASE64,e.rest):function we(n){let e;try{e=decodeURIComponent(n)}catch{throw Jr(Ft.DATA_URL,"Malformed data URL.")}return ve(e)}(e.rest)}(e),function Zt(n){return new Se(n).contentType}(e))}throw zn()}function ve(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);s<=127?e.push(s):s<=2047?e.push(192|s>>6,128|63&s):55296==(64512&s)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(s=65536|(1023&s)<<10|1023&n.charCodeAt(++t),e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s)):e.push(239,191,189):56320==(64512&s)?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|63&s)}return new Uint8Array(e)}function ae(n,e){switch(n){case Ft.BASE64:{const a=-1!==e.indexOf("-"),f=-1!==e.indexOf("_");if(a||f)throw Jr(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Ft.BASE64URL:{const a=-1!==e.indexOf("+"),f=-1!==e.indexOf("/");if(a||f)throw Jr(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Be(n){if(typeof atob>"u")throw function Lt(n){return new Dt(Nt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(a){throw a.message.includes("polyfill")?a:Jr(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}class Se{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Jr(Ft.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;null!=s&&(this.base64=function Vn(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}class Ir{constructor(e,t){let s=0,a="";Vr(e)?(this.data_=e,s=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(Vr(this.data_)){const a=function nt(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===a?null:new Ir(a)}{const s=new Uint8Array(this.data_.buffer,e,t-e);return new Ir(s,!0)}}static getBlob(...e){if(tr()){const t=e.map(s=>s instanceof Ir?s.data_:s);return new Ir(Ee.apply(null,t))}{const t=e.map(v=>gr(v)?Wn(Ft.RAW,v).data:v.data_);let s=0;t.forEach(v=>{s+=v.byteLength});const a=new Uint8Array(s);let f=0;return t.forEach(v=>{for(let M=0;M<v.length;M++)a[f++]=v[M]}),new Ir(a,!0)}}uploadData(){return this.data_}}function Br(n){let e;try{e=JSON.parse(n)}catch{return null}return function xr(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function ra(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function mr(n,e){return e}class di{constructor(e,t,s,a){this.server=e,this.local=t||e,this.writable=!!s,this.xform=a||mr}}let Do=null;function Zi(){if(Do)return Do;const n=[];n.push(new di("bucket")),n.push(new di("generation")),n.push(new di("metageneration")),n.push(new di("name","fullPath",!0));const t=new di("name");t.xform=function e(f,v){return function Js(n){return!gr(n)||n.length<2?n:ra(n)}(v)},n.push(t);const a=new di("size");return a.xform=function s(f,v){return void 0!==v?Number(v):v},n.push(a),n.push(new di("timeCreated")),n.push(new di("updated")),n.push(new di("md5Hash",null,!0)),n.push(new di("cacheControl",null,!0)),n.push(new di("contentDisposition",null,!0)),n.push(new di("contentEncoding",null,!0)),n.push(new di("contentLanguage",null,!0)),n.push(new di("contentType",null,!0)),n.push(new di("metadata","customMetadata",!0)),Do=n,Do}function kr(n,e,t){const s=Br(e);return null===s?null:function Wr(n,e,t){const s={type:"file"},a=t.length;for(let f=0;f<a;f++){const v=t[f];s[v.local]=v.xform(s,e[v.server])}return function ur(n,e){Object.defineProperty(n,"ref",{get:function t(){const f=new Gt(n.bucket,n.fullPath);return e._makeStorageReference(f)}})}(s,n),s}(n,s,t)}function vr(n,e){const t={},s=e.length;for(let a=0;a<s;a++){const f=e[a];f.writable&&(t[f.server]=n[f.local])}return JSON.stringify(t)}const Ki="prefixes";class Tr{constructor(e,t,s,a){this.url=e,this.method=t,this.handler=s,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function qr(n){if(!n)throw zn()}function Mr(n,e){return function t(s,a){const f=kr(n,a,e);return qr(null!==f),f}}function ds(n){return function e(t,s){let a;return a=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Ur(){return new Dt(Nt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Qr(){return new Dt(Nt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function bn(n){return new Dt(Nt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function pr(n){return new Dt(Nt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):s,a.status=t.getStatus(),a.serverResponse=s.serverResponse,a}}function es(n){const e=ds(n);return function t(s,a){let f=e(s,a);return 404===s.getStatus()&&(f=function nn(n){return new Dt(Nt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),f.serverResponse=a.serverResponse,f}}function Gn(n,e,t){const a=yn(e.fullServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,M=new Tr(a,"GET",Mr(n,t),v);return M.errorHandler=es(e),M}function Ca(n,e,t,s,a){const f={};f.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(f.delimiter=t),s&&(f.pageToken=s),a&&(f.maxResults=a);const M=yn(e.bucketOnlyServerUrl(),n.host,n._protocol),W=n.maxOperationRetryTime,ee=new Tr(M,"GET",function cs(n,e){return function t(s,a){const f=function hr(n,e,t){const s=Br(t);return null===s?null:function xn(n,e,t){const s={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Ki])for(const a of t[Ki]){const f=a.replace(/\/$/,""),v=n._makeStorageReference(new Gt(e,f));s.prefixes.push(v)}if(t.items)for(const a of t.items){const f=n._makeStorageReference(new Gt(e,a.name));s.items.push(f)}return s}(n,e,s)}(n,e,a);return qr(null!==f),f}}(n,e.bucket),W);return ee.urlParams=f,ee.errorHandler=ds(e),ee}function Ds(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=function hs(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),s}class fs{constructor(e,t,s,a){this.current=e,this.total=t,this.finalized=!!s,this.metadata=a||null}}function Ss(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{qr(!1)}return qr(!!t&&-1!==(e||["active"]).indexOf(t)),t}const ut={STATE_CHANGED:"state_changed"},mt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _n(n){switch(n){case"running":case"pausing":case"canceling":return mt.RUNNING;case"paused":return mt.PAUSED;case"success":return mt.SUCCESS;case"canceled":return mt.CANCELED;default:return mt.ERROR}}class an{constructor(e,t,s){if(function Gr(n){return"function"==typeof n}(e)||null!=t||null!=s)this.next=e,this.error=t??void 0,this.complete=s??void 0;else{const f=e;this.next=f.next,this.error=f.error,this.complete=f.complete}}}function nr(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Ci{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,a){if(this.sent_)throw dr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==a)for(const f in a)a.hasOwnProperty(f)&&this.xhr_.setRequestHeader(f,a[f].toString());return void 0!==s?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dr("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw dr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Fi extends Ci{initXhr(){this.xhr_.responseType="text"}}function Fn(){return new Fi}class Yi{constructor(e,t,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=s,this._mappings=Zi(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(Nt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const f=this.isExponentialBackoffExpired();if(Mt(a.status,[])){if(!f)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();a=Zn()}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(Nt.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,f)=>{this._resolve=a,this._reject=f,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,s])=>{switch(this._state){case"running":e(t,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const s=function Ie(n,e,t,s,a){const f=e.bucketOnlyServerUrl(),v=Ds(e,s,a),M={name:v.fullPath},B=yn(f,n.host,n._protocol),ee={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":v.contentType,"Content-Type":"application/json; charset=utf-8"},le=vr(v,t),dt=new Tr(B,"POST",function Qe(jt){let Jt;Ss(jt);try{Jt=jt.getResponseHeader("X-Goog-Upload-URL")}catch{qr(!1)}return qr(gr(Jt)),Jt},n.maxUploadRetryTime);return dt.urlParams=M,dt.headers=ee,dt.body=le,dt.errorHandler=ds(e),dt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(s,Fn,e,t);this._request=a,a.getPromise().then(f=>{this._request=void 0,this._uploadUrl=f,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,s)=>{const a=function be(n,e,t,s){const B=new Tr(t,"POST",function f(W){const ee=Ss(W,["active","final"]);let le=null;try{le=W.getResponseHeader("X-Goog-Upload-Size-Received")}catch{qr(!1)}le||qr(!1);const Oe=Number(le);return qr(!isNaN(Oe)),new fs(Oe,s.size(),"final"===ee)},n.maxUploadRetryTime);return B.headers={"X-Goog-Upload-Command":"query"},B.errorHandler=ds(e),B}(this._ref.storage,this._ref._location,e,this._blob),f=this._ref.storage._makeRequest(a,Fn,t,s);this._request=f,f.getPromise().then(v=>{this._request=void 0,this._updateProgress(v.current),this._needToFetchStatus=!1,v.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new fs(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((a,f)=>{let v;try{v=function Ge(n,e,t,s,a,f,v,M){const B=new fs(0,0);if(v?(B.current=v.current,B.total=v.total):(B.current=0,B.total=s.size()),s.size()!==B.total)throw function Tn(){return new Dt(Nt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const W=B.total-B.current;let ee=W;a>0&&(ee=Math.min(ee,a));const le=B.current;let Qe="";Qe=0===ee?"finalize":W===ee?"upload, finalize":"upload";const dt={"X-Goog-Upload-Command":Qe,"X-Goog-Upload-Offset":`${B.current}`},jt=s.slice(le,le+ee);if(null===jt)throw ar();const er=new Tr(t,"POST",function Jt(Ar,Pr){const Or=Ss(Ar,["active","final"]),bo=B.current+ee,nl=s.size();let _m;return _m="final"===Or?Mr(e,f)(Ar,Pr):null,new fs(bo,nl,"final"===Or,_m)},e.maxUploadRetryTime);return er.headers=dt,er.body=jt.uploadData(),er.progressCallback=M||null,er.errorHandler=ds(n),er}(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(B){return this._error=B,void this._transition("error")}const M=this._ref.storage._makeRequest(v,Fn,a,f,!1);this._request=M,M.getPromise().then(B=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(B.current),B.finalized?(this._metadata=B.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const s=Gn(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(s,Fn,e,t);this._request=a,a.getPromise().then(f=>{this._request=void 0,this._metadata=f,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const s=function ts(n,e,t,s,a){const f=e.bucketOnlyServerUrl(),v={"X-Goog-Upload-Protocol":"multipart"},B=function M(){let er="";for(let Ar=0;Ar<2;Ar++)er+=Math.random().toString().slice(2);return er}();v["Content-Type"]="multipart/related; boundary="+B;const W=Ds(e,s,a),ee=vr(W,t),Qe=Ir.getBlob("--"+B+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ee+"\r\n--"+B+"\r\nContent-Type: "+W.contentType+"\r\n\r\n",s,"\r\n--"+B+"--");if(null===Qe)throw ar();const dt={name:W.fullPath},jt=yn(f,n.host,n._protocol),Hr=n.maxUploadRetryTime,ci=new Tr(jt,"POST",Mr(n,t),Hr);return ci.urlParams=dt,ci.headers=v,ci.body=Qe.uploadData(),ci.errorHandler=ds(e),ci}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(s,Fn,e,t);this._request=a,a.getPromise().then(f=>{this._request=void 0,this._metadata=f,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=ki(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=_n(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,s,a){const f=new an(t||void 0,s||void 0,a||void 0);return this._addObserver(f),()=>{this._removeObserver(f)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(_n(this._state)){case mt.SUCCESS:nr(this._resolve.bind(null,this.snapshot))();break;case mt.CANCELED:case mt.ERROR:nr(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(_n(this._state)){case mt.RUNNING:case mt.PAUSED:e.next&&nr(e.next.bind(e,this.snapshot))();break;case mt.SUCCESS:e.complete&&nr(e.complete.bind(e))();break;default:e.error&&nr(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class hi{constructor(e,t){this._service=e,this._location=t instanceof Gt?t:Gt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new hi(e,t)}get root(){const e=new Gt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ra(this._location.path)}get storage(){return this._service}get parent(){const e=function ls(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Gt(this._location.bucket,e);return new hi(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Un(e)}}function co(n,e,t){return xs.apply(this,arguments)}function xs(){return(xs=(0,se.Z)(function*(n,e,t){const a=yield ps(n,{pageToken:t});e.prefixes.push(...a.prefixes),e.items.push(...a.items),null!=a.nextPageToken&&(yield co(n,e,a.nextPageToken))})).apply(this,arguments)}function ps(n,e){null!=e&&"number"==typeof e.maxResults&&Ii("options.maxResults",1,1e3,e.maxResults);const t=e||{},s=Ca(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(s,Fn)}function Ga(n){n._throwIfRoot("getDownloadURL");const e=function $o(n,e,t){const a=yn(e.fullServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,M=new Tr(a,"GET",function fr(n,e){return function t(s,a){const f=kr(n,a,e);return qr(null!==f),function kn(n,e,t,s){const a=Br(e);if(null===a||!gr(a.downloadTokens))return null;const f=a.downloadTokens;if(0===f.length)return null;const v=encodeURIComponent;return f.split(",").map(W=>{const le=n.fullPath;return yn("/b/"+v(n.bucket)+"/o/"+v(le),t,s)+fn({alt:"media",token:W})})[0]}(f,a,n.host,n._protocol)}}(n,t),v);return M.errorHandler=es(e),M}(n.storage,n._location,Zi());return n.storage.makeRequestWithTokens(e,Fn).then(t=>{if(null===t)throw function br(){return new Dt(Nt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function $n(n,e){const t=function Vs(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),s=new Gt(n._location.bucket,t);return new hi(n.storage,s)}function ia(n,e){if(n instanceof So){const t=n;if(null==t._bucket)throw function Er(){return new Dt(Nt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ot+"' property when initializing the app?")}();const s=new hi(t,t._bucket);return null!=e?ia(s,e):s}return void 0!==e?$n(n,e):n}function ns(n,e){if(e&&function uu(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof So)return function Ho(n,e){return new hi(n,e)}(n,e);throw Ai("To use ref(service, url), the first argument must be a Storage instance.")}return ia(n,e)}function js(n,e){const t=e?.[Ot];return null==t?null:Gt.makeFromBucketSpec(t,n)}class So{constructor(e,t,s,a,f){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=a,this._firebaseVersion=f,this._bucket=null,this._host=St,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=a?Gt.makeFromBucketSpec(a,this._host):js(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Gt.makeFromBucketSpec(this._url,e):js(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ii("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ii("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,se.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const s=yield t.getToken();if(null!==s)return s.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,se.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hi(this,e)}_makeRequest(e,t,s,a,f=!0){if(this._deleted)return new hn($i());{const v=function me(n,e,t,s,a,f,v=!0){const M=fn(n.urlParams),B=n.url+M,W=Object.assign({},n.headers);return function Dn(n,e){e&&(n["X-Firebase-GMPID"]=e)}(W,e),function pn(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(W,t),function Xt(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(W,f),function ei(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(W,s),new pt(B,n.method,W,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,v)}(e,this._appId,s,a,t,this._firebaseVersion,f);return this._requests.add(v),v.getPromise().then(()=>this._requests.delete(v),()=>this._requests.delete(v)),v}}makeRequestWithTokens(e,t){var s=this;return(0,se.Z)(function*(){const[a,f]=yield Promise.all([s._getAuthToken(),s._getAppCheckToken()]);return s._makeRequest(e,t,a,f).getPromise()})()}}const bi="@firebase/storage";function Li(n,e){return ns(n=(0,Ke.m9)(n),e)}function fi(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new So(t,s,a,e,ke.SDK_VERSION)}!function gs(){(0,ke._registerComponent)(new Tt.wA("storage",fi,"PUBLIC").setMultipleInstances(!0)),(0,ke.registerVersion)(bi,"0.11.2",""),(0,ke.registerVersion)(bi,"0.11.2","esm2017")}();class yi{constructor(e,t,s){this._delegate=e,this.task=t,this.ref=s}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class On{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new yi(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(s=>{if(e)return e(new yi(s,this,this._ref))},t)}on(e,t,s,a){let f;return t&&(f="function"==typeof t?v=>t(new yi(v,this,this._ref)):{next:t.next?v=>t.next(new yi(v,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,f,s||void 0,a||void 0)}}class Da{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new gn(e,this._service))}get items(){return this._delegate.items.map(e=>new gn(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class gn{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Sr(n,e){return $n(n,e)}(this._delegate,e);return new gn(t,this.storage)}get root(){return new gn(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new gn(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new On(function xo(n,e,t){return function Bs(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Yi(n,new Ir(e),t)}(n=(0,Ke.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ft.RAW,s){this._throwIfRoot("putString");const a=Wn(t,e),f=Object.assign({},s);return null==f.contentType&&null!=a.contentType&&(f.contentType=a.contentType),new On(new Yi(this._delegate,new Ir(a.data,!0),f),this)}listAll(){return function Mi(n){return function lo(n){const e={prefixes:[],items:[]};return co(n,e).then(()=>e)}(n=(0,Ke.m9)(n))}(this._delegate).then(e=>new Da(e,this.storage))}list(e){return function po(n,e){return ps(n=(0,Ke.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Da(t,this.storage))}getMetadata(){return function rs(n){return function zu(n){n._throwIfRoot("getMetadata");const e=Gn(n.storage,n._location,Zi());return n.storage.makeRequestWithTokens(e,Fn)}(n=(0,Ke.m9)(n))}(this._delegate)}updateMetadata(e){return function Dr(n,e){return function Ta(n,e){n._throwIfRoot("updateMetadata");const t=function _i(n,e,t,s){const f=yn(e.fullServerUrl(),n.host,n._protocol),M=vr(t,s),W=n.maxOperationRetryTime,ee=new Tr(f,"PATCH",Mr(n,s),W);return ee.headers={"Content-Type":"application/json; charset=utf-8"},ee.body=M,ee.errorHandler=es(e),ee}(n.storage,n._location,e,Zi());return n.storage.makeRequestWithTokens(t,Fn)}(n=(0,Ke.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Iu(n){return Ga(n=(0,Ke.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function sa(n){return function si(n){n._throwIfRoot("deleteObject");const e=function xi(n,e){const s=yn(e.fullServerUrl(),n.host,n._protocol),M=new Tr(s,"DELETE",function v(B,W){},n.maxOperationRetryTime);return M.successCodes=[200,204],M.errorHandler=es(e),M}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Fn)}(n=(0,Ke.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Un(e)}}class Go{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(ti(e))throw Ai("ref() expected a child path but got a URL, use refFromURL instead.");return new gn(Li(this._delegate,e),this)}refFromURL(e){if(!ti(e))throw Ai("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Gt.makeFromUrl(e,this._delegate.host)}catch{throw Ai("refFromUrl() expected a valid full URL but got an invalid one.")}return new gn(Li(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,s={}){!function oa(n,e,t,s={}){!function Gi(n,e,t,s={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:a}=s;a&&(n._overrideAuthToken="string"==typeof a?a:(0,Ke.Sg)(a,n.app.options.projectId))}(n,e,t,s)}(this._delegate,e,t,s)}}function ti(n){return/^[A-Za-z]+:\/\//.test(n)}function za(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),s=n.getProvider("storage").getImmediate({identifier:e});return new Go(t,s)}!function ua(n){const e={TaskState:mt,TaskEvent:ut,StringFormat:Ft,Storage:Go,Reference:gn};n.INTERNAL.registerComponent(new Tt.wA("storage-compat",za,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Ce.Z);var ms=Y(6217),Je=Y(9260);function Sa(n){const e=function cr(n){return new ot.y(e=>{const t=v=>e.next(v);t(n.snapshot);const f=n.on("state_changed",t);return n.then(v=>{t(v),e.complete()},v=>{t(n.snapshot),(v=>{e.error(v)})(v)}),function(){f()}}).pipe(function vt(n,e=st.z){return(0,rt.e)((t,s)=>{let a=null,f=null,v=null;const M=()=>{if(a){a.unsubscribe(),a=null;const W=f;f=null,s.next(W)}};function B(){const W=v+n,ee=e.now();if(ee<W)return a=this.schedule(void 0,W-ee),void s.add(a);M()}t.subscribe((0,Ct.x)(s,W=>{f=W,v=e.now(),a||(a=e.schedule(B,n),s.add(a))},()=>{M(),s.complete()},void 0,()=>{f=a=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,G.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Ms(n){return{getDownloadURL:()=>(0,Et.of)(void 0).pipe(ye.fc,(0,Xe.w)(()=>n.getDownloadURL()),ye.iC),getMetadata:()=>(0,Et.of)(void 0).pipe(ye.fc,(0,Xe.w)(()=>n.getMetadata()),ye.iC),delete:()=>(0,ft.D)(n.delete()),child:e=>Ms(n.child(e)),updateMetadata:e=>(0,ft.D)(n.updateMetadata(e)),put:(e,t)=>Sa(n.put(e,t)),putString:(e,t,s)=>Sa(n.putString(e,t,s)),list:e=>(0,ft.D)(n.list(e)),listAll:()=>(0,ft.D)(n.listAll())}}const Qi=new U.OlP("angularfire2.storageBucket"),mo=new U.OlP("angularfire2.storage.maxUploadRetryTime"),du=new U.OlP("angularfire2.storage.maxOperationRetryTime"),_s=new U.OlP("angularfire2.storage.use-emulator");let Wa=(()=>{class n{constructor(t,s,a,f,v,M,B,W,ee,le){const Oe=(0,qe.on)(t,v,s);this.storage=(0,qe.cc)(`${Oe.name}.storage.${a}`,"AngularFireStorage",Oe.name,()=>{const Qe=v.runOutsideAngular(()=>Oe.storage(a||void 0)),dt=ee;return dt&&Qe.useEmulator(...dt),B&&Qe.setMaxUploadRetryTime(B),W&&Qe.setMaxOperationRetryTime(W),Qe},[B,W])}ref(t){return Ms(this.storage.ref(t))}refFromURL(t){return Ms(this.storage.refFromURL(t))}upload(t,s,a){return Ms(this.storage.ref(t)).put(s,a)}}return n.\u0275fac=function(t){return new(t||n)(U.LFG(qe.Dh),U.LFG(qe.xv,8),U.LFG(Qi,8),U.LFG(U.Lbi),U.LFG(U.R0b),U.LFG(ye.HU),U.LFG(mo,8),U.LFG(du,8),U.LFG(_s,8),U.LFG(ms.nm,8))},n.\u0275prov=U.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Wo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=U.oAB({type:n}),n.\u0275inj=U.cJS({}),n})(),_o=(()=>{class n{constructor(){Je.Z.registerVersion("angularfire",ye.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=U.oAB({type:n}),n.\u0275inj=U.cJS({providers:[Wa],imports:[Wo]}),n})();var ca=Y(8675);function oi(){return(0,rt.e)((n,e)=>{let t,s=!1;n.subscribe((0,Ct.x)(e,a=>{const f=t;t=a,s&&e.next([f,a]),s=!0}))})}var rn,Ui=Y(5026),Ro=Y(1884),to=Y(9300),no=(Y(4217),Y(1877)),No=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ys={},Aa=Aa||{},vn=No||self;function Rs(){}function qo(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function vo(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Vi="closure_uid_"+(1e9*Math.random()>>>0),Cu=0;function qu(n,e,t){return n.call.apply(n.bind,arguments)}function Po(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function ai(n,e,t){return(ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qu:Po).apply(null,arguments)}function Zo(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function Kr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(s,a,f){for(var v=Array(arguments.length-2),M=2;M<arguments.length;M++)v[M-2]=arguments[M];return e.prototype[a].apply(s,v)}}function zi(){this.s=this.s,this.o=this.o}zi.prototype.s=!1,zi.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Wu(n){Object.prototype.hasOwnProperty.call(n,Vi)&&n[Vi]||(n[Vi]=++Cu)}(this)},zi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ro=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Rr(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function io(n,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(qo(s)){const a=n.length||0,f=s.length||0;n.length=a+f;for(let v=0;v<f;v++)n[a+v]=s[v]}else n.push(s)}}function Ni(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ni.prototype.h=function(){this.defaultPrevented=!0};var is=function(){if(!vn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{vn.addEventListener("test",Rs,e),vn.removeEventListener("test",Rs,e)}catch{}return n}();function xa(n){return/^[\s\xa0]*$/.test(n)}var hu=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function qa(n,e){return n<e?-1:n>e?1:0}function Hs(){var n=vn.navigator;return n&&(n=n.userAgent)?n:""}function O(n){return-1!=Hs().indexOf(n)}function K(n){return K[" "](n),n}K[" "]=Rs;var Xn,n,Q=O("Opera"),ce=O("Trident")||O("MSIE"),He=O("Edge"),ct=He||ce,Bt=O("Gecko")&&!(-1!=Hs().toLowerCase().indexOf("webkit")&&!O("Edge"))&&!(O("Trident")||O("MSIE"))&&!O("Edge"),lr=-1!=Hs().toLowerCase().indexOf("webkit")&&!O("Edge");function Qn(){var n=vn.document;return n?n.documentMode:void 0}e:{var Ln="",ni=(n=Hs(),Bt?/rv:([^\);]+)(\)|;)/.exec(n):He?/Edge\/([\d\.]+)/.exec(n):ce?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):lr?/WebKit\/(\S+)/.exec(n):Q?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ni&&(Ln=ni?ni[1]:""),ce){var or=Qn();if(null!=or&&or>parseFloat(Ln)){Xn=String(or);break e}}Xn=Ln}var Pi={};var vs=vn.document&&ce&&(Qn()||parseInt(Xn,10))||void 0;function ws(n,e){if(Ni.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Bt){e:{try{K(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ma[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ws.X.h.call(this)}}Kr(ws,Ni);var Ma={2:"touch",3:"pen",4:"mouse"};ws.prototype.h=function(){ws.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Oo="closure_listenable_"+(1e6*Math.random()|0),Ru=0;function da(n,e,t,s,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=a,this.key=++Ru,this.ba=this.ea=!1}function zs(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function ha(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function Ra(n){const e={};for(const t in n)e[t]=n[t];return e}const fa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ns(n,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)n[t]=s[t];for(let f=0;f<fa.length;f++)t=fa[f],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function Za(n){this.src=n,this.g={},this.h=0}function vi(n,e){var t=e.type;if(t in n.g){var f,s=n.g[t],a=ro(s,e);(f=0<=a)&&Array.prototype.splice.call(s,a,1),f&&(zs(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Na(n,e,t,s){for(var a=0;a<n.length;++a){var f=n[a];if(!f.ba&&f.listener==e&&f.capture==!!t&&f.ha==s)return a}return-1}Za.prototype.add=function(n,e,t,s,a){var f=n.toString();(n=this.g[f])||(n=this.g[f]=[],this.h++);var v=Na(n,e,s,a);return-1<v?(e=n[v],t||(e.ea=!1)):((e=new da(e,this.src,f,!!s,a)).ea=t,n.push(e)),e};var Ko="closure_lm_"+(1e6*Math.random()|0),Yo={};function Pa(n,e,t,s,a){if(s&&s.once)return ka(n,e,t,s,a);if(Array.isArray(e)){for(var f=0;f<e.length;f++)Pa(n,e[f],t,s,a);return null}return t=Nr(t),n&&n[Oo]?n.N(e,t,vo(s)?!!s.capture:!!s,a):bu(n,e,t,!1,s,a)}function bu(n,e,t,s,a,f){if(!e)throw Error("Invalid event type");var v=vo(a)?!!a.capture:!!a,M=Fa(n);if(M||(n[Ko]=M=new Za(n)),(t=M.add(e,t,s,v,f)).proxy)return t;if(s=function Oa(){const e=ko;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)is||(a=v),void 0===a&&(a=!1),n.addEventListener(e.toString(),s,a);else if(n.attachEvent)n.attachEvent(Zu(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function ka(n,e,t,s,a){if(Array.isArray(e)){for(var f=0;f<e.length;f++)ka(n,e[f],t,s,a);return null}return t=Nr(t),n&&n[Oo]?n.O(e,t,vo(s)?!!s.capture:!!s,a):bu(n,e,t,!0,s,a)}function pa(n,e,t,s,a){if(Array.isArray(e))for(var f=0;f<e.length;f++)pa(n,e[f],t,s,a);else s=vo(s)?!!s.capture:!!s,t=Nr(t),n&&n[Oo]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Na(f=n.g[e],t,s,a))&&(zs(f[t]),Array.prototype.splice.call(f,t,1),0==f.length&&(delete n.g[e],n.h--))):n&&(n=Fa(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Na(e,t,s,a)),(t=-1<n?e[n]:null)&&Ka(t))}function Ka(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Oo])vi(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(Zu(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Fa(e))?(vi(t,n),0==t.h&&(t.src=null,e[Ko]=null)):zs(n)}}}function Zu(n){return n in Yo?Yo[n]:Yo[n]="on"+n}function ko(n,e){if(n.ba)n=!0;else{e=new ws(e,this);var t=n.listener,s=n.ha||n.src;n.ea&&Ka(n),n=t.call(s,e)}return n}function Fa(n){return(n=n[Ko])instanceof Za?n:null}var Ya="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nr(n){return"function"==typeof n?n:(n[Ya]||(n[Ya]=function(e){return n.handleEvent(e)}),n[Ya])}function pi(){zi.call(this),this.i=new Za(this),this.P=this,this.I=null}function Ti(n,e){var t,s=n.I;if(s)for(t=[];s;s=s.I)t.push(s);if(n=n.P,s=e.type||e,"string"==typeof e)e=new Ni(e,n);else if(e instanceof Ni)e.target=e.target||n;else{var a=e;Ns(e=new Ni(s,n),a)}if(a=!0,t)for(var f=t.length-1;0<=f;f--){var v=e.g=t[f];a=Ps(v,s,!0,e)&&a}if(a=Ps(v=e.g=n,s,!0,e)&&a,a=Ps(v,s,!1,e)&&a,t)for(f=0;f<t.length;f++)a=Ps(v=e.g=t[f],s,!1,e)&&a}function Ps(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,f=0;f<e.length;++f){var v=e[f];if(v&&!v.ba&&v.capture==t){var M=v.listener,B=v.ha||v.src;v.ea&&vi(n.i,v),a=!1!==M.call(B,s)&&a}}return a&&!s.defaultPrevented}Kr(pi,zi),pi.prototype[Oo]=!0,pi.prototype.removeEventListener=function(n,e,t,s){pa(this,n,e,t,s)},pi.prototype.M=function(){if(pi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)zs(t[s]);delete n.g[e],n.h--}}this.I=null},pi.prototype.N=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},pi.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var Es=vn.JSON.stringify;function Ku(){var n=w;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Bi,Yu=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Qa,n=>n.reset());class Qa{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function fu(n){vn.setTimeout(()=>{throw n},0)}function Qo(n,e){Bi||function R(){var n=vn.Promise.resolve(void 0);Bi=function(){n.then(j)}}(),D||(Bi(),D=!0),w.add(n,e)}var D=!1,w=new class rl{constructor(){this.h=this.g=null}add(e,t){const s=Yu.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function j(){for(var n;n=Ku();){try{n.h.call(n.g)}catch(t){fu(t)}var e=Yu;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}D=!1}function de(n,e){pi.call(this),this.h=n||1,this.g=e||vn,this.j=ai(this.lb,this),this.l=Date.now()}function Ze(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function tn(n,e,t){if("function"==typeof n)t&&(n=ai(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ai(n.handleEvent,n)}return 2147483647<Number(e)?-1:vn.setTimeout(n,e||0)}function un(n){n.g=tn(()=>{n.g=null,n.i&&(n.i=!1,un(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Kr(de,pi),(rn=de.prototype).ca=!1,rn.R=null,rn.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ti(this,"tick"),this.ca&&(Ze(this),this.start()))}},rn.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rn.M=function(){de.X.M.call(this),Ze(this),delete this.g};class Yr extends zi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:un(this)}M(){super.M(),this.g&&(vn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gi(n){zi.call(this),this.h=n,this.g={}}Kr(gi,zi);var Xi=[];function os(n,e,t,s){Array.isArray(t)||(t&&(Xi[0]=t.toString()),t=Xi);for(var a=0;a<t.length;a++){var f=Pa(e,t[a],s||n.handleEvent,!1,n.h||n);if(!f)break;n.g[f.key]=f}}function Fo(n){ha(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ka(e)},n),n.g={}}function Ws(){this.g=!0}function wo(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function wi(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var f=a[0];if("noop"!=f&&"stop"!=f&&"close"!=f)for(var v=1;v<a.length;v++)a[v]=""}}}return Es(t)}catch{return e}}(n,t)+(s?" "+s:"")})}gi.prototype.M=function(){gi.X.M.call(this),Fo(this)},gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ws.prototype.Aa=function(){this.g=!1},Ws.prototype.info=function(){};var Xo={},Tu=null;function Lo(){return Tu=Tu||new pi}function qs(n){Ni.call(this,Xo.Pa,n)}function Zs(n){const e=Lo();Ti(e,new qs(e))}function Uo(n,e){Ni.call(this,Xo.STAT_EVENT,n),this.stat=e}function Oi(n){const e=Lo();Ti(e,new Uo(e,n))}function ma(n,e){Ni.call(this,Xo.Qa,n),this.size=e}function Ja(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return vn.setTimeout(function(){n()},e)}Xo.Pa="serverreachability",Kr(qs,Ni),Xo.STAT_EVENT="statevent",Kr(Uo,Ni),Xo.Qa="timingevent",Kr(ma,Ni);var Cl={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},bl={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function wc(){}function x(){}wc.prototype.h=null;var X,I={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function P(){Ni.call(this,"d")}function $(){Ni.call(this,"c")}function ne(){}function Me(n,e,t,s){this.l=n,this.j=e,this.m=t,this.U=s||1,this.S=new gi(this),this.O=sn,this.T=new de(n=ct?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new lt}function lt(){this.i=null,this.g="",this.h=!1}Kr(P,Ni),Kr($,Ni),Kr(ne,wc),ne.prototype.g=function(){return new XMLHttpRequest},ne.prototype.i=function(){return{}},X=new ne;var sn=45e3,Kt={},rr={};function Di(n,e,t){n.K=1,n.v=Ua(_a(e)),n.s=t,n.P=!0,Ks(n,null)}function Ks(n,e){n.F=Date.now(),J(n),n.A=_a(n.v);var t=n.A,s=n.U;Array.isArray(s)||(s=[String(s)]),Pf(t.i,"t",s),n.C=0,t=n.l.H,n.h=new lt,n.g=Oc(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Yr(ai(n.La,n,n.g),n.N)),os(n.S,n.g,"readystatechange",n.ib),e=n.H?Ra(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Zs(),function pu(n,e,t,s,a,f){n.info(function(){if(n.g)if(f)for(var v="",M=f.split("&"),B=0;B<M.length;B++){var W=M[B].split("=");if(1<W.length){var ee=W[0];W=W[1];var le=ee.split("_");v=2<=le.length&&"type"==le[1]?v+(ee+"=")+W+"&":v+(ee+"=redacted&")}}else v=null;else v=f;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+v})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Eo(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function L(n,e,t){let a,s=!0;for(;!n.I&&n.C<t.length;){if(a=H(n,t),a==rr){4==e&&(n.o=4,Oi(14),s=!1),wo(n.j,n.m,null,"[Incomplete Response]");break}if(a==Kt){n.o=4,Oi(15),wo(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}wo(n.j,n.m,a,null),mn(n,a)}Eo(n)&&a!=rr&&a!=Kt&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Oi(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Xl(e),e.K=!0,Oi(11))):(wo(n.j,n.m,t,"[Invalid Chunked Response]"),It(n),je(n))}function H(n,e){var t=n.C,s=e.indexOf("\n",t);return-1==s?rr:(t=Number(e.substring(t,s)),isNaN(t)?Kt:(s+=1)+t>e.length?rr:(e=e.substr(s,t),n.C=s+t,e))}function J(n){n.V=Date.now()+n.O,he(n,n.O)}function he(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ja(ai(n.gb,n),e)}function Pe(n){n.B&&(vn.clearTimeout(n.B),n.B=null)}function je(n){0==n.l.G||n.I||Ml(n.l,n)}function It(n){Pe(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ze(n.T),Fo(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function mn(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||eu(t.h,n)))if(!n.J&&eu(t.h,n)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;cl(t),fd(t)}Nc(t),Oi(18)}}else t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=Ja(ai(t.cb,t),6e3));if(1>=sl(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Nu(t,11)}else if((n.J||t.g==n)&&cl(t),!xa(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let W=a[e];if(t.T=W[0],W=W[1],2==t.G)if("c"==W[0]){t.I=W[1],t.ka=W[2];const ee=W[3];null!=ee&&(t.ma=ee,t.j.info("VER="+t.ma));const le=W[4];null!=le&&(t.Ca=le,t.j.info("SVER="+t.Ca));const Oe=W[5];null!=Oe&&"number"==typeof Oe&&0<Oe&&(t.J=s=1.5*Oe,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const Qe=n.g;if(Qe){const dt=Qe.g?Qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dt){var f=s.h;f.g||-1==dt.indexOf("spdy")&&-1==dt.indexOf("quic")&&-1==dt.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(ol(f,f.h),f.h=null))}if(s.D){const jt=Qe.g?Qe.g.getResponseHeader("X-HTTP-Session-Id"):null;jt&&(s.za=jt,Fr(s.F,s.D,jt))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var v=n;if((s=t).sa=Gd(s,s.H?s.ka:null,s.V),v.J){Bd(s.h,v);var M=v,B=s.J;B&&M.setTimeout(B),M.B&&(Pe(M),J(M)),s.g=v}else Ba(s);0<t.i.length&&pd(t)}else"stop"!=W[0]&&"close"!=W[0]||Nu(t,7);else 3==t.G&&("stop"==W[0]||"close"==W[0]?"stop"==W[0]?Nu(t,7):Ql(t):"noop"!=W[0]&&t.l&&t.l.wa(W),t.A=0)}Zs()}catch{}}function ir(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(qo(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Sn(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(qo(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const s in n)e[t++]=s;return e}}}(n),s=function wn(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(qo(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n),a=s.length,f=0;f<a;f++)e.call(void 0,s[f],t&&t[f],n)}(rn=Me.prototype).setTimeout=function(n){this.O=n},rn.ib=function(n){n=n.target;const e=this.L;e&&3==oo(n)?e.l():this.La(n)},rn.La=function(n){try{if(n==this.g)e:{const ee=oo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ee)&&(3!=ee||ct||this.g&&(this.h.h||this.g.fa()||$h(this.g)))){this.I||4!=ee||7==e||Zs(),Pe(this);var t=this.g.aa();this.Y=t;t:if(Eo(this)){var s=$h(this.g);n="";var a=s.length,f=4==oo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){It(this),je(this);var v="";break t}this.h.i=new vn.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:f&&e==a-1});s.splice(0,a),this.h.g+=n,this.C=0,v=this.h.g}else v=this.g.fa();if(this.i=200==t,function Xa(n,e,t,s,a,f,v){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+f+" "+v})}(this.j,this.u,this.A,this.m,this.U,ee,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var M,B=this.g;if((M=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xa(M)){var W=M;break t}}W=null}if(!(t=W)){this.i=!1,this.o=3,Oi(12),It(this),je(this);break e}wo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,mn(this,t)}this.P?(L(this,ee,v),ct&&this.i&&3==ee&&(os(this.S,this.T,"tick",this.hb),this.T.start())):(wo(this.j,this.m,v,null),mn(this,v)),4==ee&&It(this),this.i&&!this.I&&(4==ee?Ml(this.l,this):(this.i=!1,J(this)))}else 400==t&&0<v.indexOf("Unknown SID")?(this.o=3,Oi(12)):(this.o=0,Oi(13)),It(this),je(this)}}}catch{}},rn.hb=function(){if(this.g){var n=oo(this.g),e=this.g.fa();this.C<e.length&&(Pe(this),L(this,n,e),this.i&&4!=n&&J(this))}},rn.cancel=function(){this.I=!0,It(this)},rn.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function ga(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Zs(),Oi(17)),It(this),this.o=2,je(this)):he(this,this.V-n)};var qn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Si(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Si){this.h=void 0!==e?e:n.h,Qu(this,n.j),this.s=n.s,this.g=n.g,Du(this,n.m),this.l=n.l,e=n.i;var t=new Su;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),La(this,t),this.o=n.o}else n&&(t=String(n).match(qn))?(this.h=!!e,Qu(this,t[1]||"",!0),this.s=il(t[2]||""),this.g=il(t[3]||"",!0),Du(this,t[4]),this.l=il(t[5]||"",!0),La(this,t[6]||"",!0),this.o=il(t[7]||"")):(this.h=!!e,this.i=new Su(null,this.h))}function _a(n){return new Si(n)}function Qu(n,e,t){n.j=t?il(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Du(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function La(n,e,t){e instanceof Su?(n.i=e,function jp(n,e){e&&!n.j&&(Dl(n),n.i=null,n.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Ic(this,s),Pf(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Tl(e,Vh)),n.i=new Su(e,n.h))}function Fr(n,e,t){n.i.set(e,t)}function Ua(n){return Fr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function il(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Tl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ec),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ec(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Si.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Tl(e,Xu,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Tl(e,Xu,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Tl(t,"/"==t.charAt(0)?Nf:od,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Tl(t,ad)),n.join("")};var Xu=/[#\/\?@]/g,od=/[#\?:]/g,Nf=/[#\?]/g,Vh=/[#\?@]/g,ad=/#/g;function Su(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Dl(n){n.g||(n.g=new Map,n.h=0,n.i&&function Vo(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),a=null;if(0<=s){var f=n[t].substring(0,s);a=n[t].substring(s+1)}else f=n[t];e(f,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ic(n,e){Dl(n),e=Cc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function zl(n,e){return Dl(n),e=Cc(n,e),n.g.has(e)}function Pf(n,e,t){Ic(n,e),0<t.length&&(n.i=null,n.g.set(Cc(n,e),Rr(t)),n.h+=t.length)}function Cc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ud(n){this.l=n||ld,n=vn.PerformanceNavigationTiming?0<(n=vn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(vn.g&&vn.g.Ga&&vn.g.Ga()&&vn.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rn=Su.prototype).add=function(n,e){Dl(this),this.i=null,n=Cc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rn.forEach=function(n,e){Dl(this),this.g.forEach(function(t,s){t.forEach(function(a){n.call(e,a,s,this)},this)},this)},rn.oa=function(){Dl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=n[s];for(let f=0;f<a.length;f++)t.push(e[s])}return t},rn.W=function(n){Dl(this);let e=[];if("string"==typeof n)zl(this,n)&&(e=e.concat(this.g.get(Cc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},rn.set=function(n,e){return Dl(this),this.i=null,zl(this,n=Cc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rn.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},rn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const f=encodeURIComponent(String(s)),v=this.W(s);for(s=0;s<v.length;s++){var a=f;""!==v[s]&&(a+="="+encodeURIComponent(String(v[s]))),n.push(a)}}return this.i=n.join("&")};var ld=10;function Vd(n){return!!n.h||!!n.g&&n.g.size>=n.j}function sl(n){return n.h?1:n.g?n.g.size:0}function eu(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ol(n,e){n.g?n.g.add(e):n.h=e}function Bd(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function tu(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Rr(n.i)}function bc(){}function Tc(){this.g=new bc}function Dc(n,e,t){const s=t||"";try{ir(n,function(a,f){let v=a;vo(a)&&(v=Es(a)),e.push(s+f+"="+encodeURIComponent(v))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function so(n,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function Wl(n){this.l=n.ac||null,this.j=n.jb||!1}function ql(n,e){pi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Zl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ud.prototype.cancel=function(){if(this.i=tu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},bc.prototype.stringify=function(n){return vn.JSON.stringify(n,void 0)},bc.prototype.parse=function(n){return vn.JSON.parse(n,void 0)},Kr(Wl,wc),Wl.prototype.g=function(){return new ql(this.l,this.j)},Wl.prototype.i=function(n){return function(){return n}}({}),Kr(ql,pi);var Zl=0;function Sc(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Bo(n){n.readyState=4,n.l=null,n.j=null,n.A=null,al(n)}function al(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rn=ql.prototype).open=function(n,e){if(this.readyState!=Zl)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,al(this)},rn.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||vn).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},rn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bo(this)),this.readyState=Zl},rn.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,al(this)),this.g&&(this.readyState=3,al(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof vn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sc(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},rn.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Bo(this):al(this),3==this.readyState&&Sc(this)}},rn.Va=function(n){this.g&&(this.response=this.responseText=n,Bo(this))},rn.Ua=function(n){this.g&&(this.response=n,Bo(this))},rn.ga=function(){this.g&&Bo(this)},rn.setRequestHeader=function(n,e){this.v.append(n,e)},rn.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rn.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ql.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Va=vn.JSON.parse;function ji(n){pi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=cd,this.K=this.L=!1}Kr(ji,pi);var cd="",jd=/^https?$/i,Jo=["POST","PUT"];function Sl(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,dd(n),Ac(n)}function dd(n){n.D||(n.D=!0,Ti(n,"complete"),Ti(n,"error"))}function hd(n){if(n.h&&typeof Aa<"u"&&(!n.C[1]||4!=oo(n)||2!=n.aa()))if(n.v&&4==oo(n))tn(n.Ha,0,n);else if(Ti(n,"readystatechange"),4==oo(n)){n.h=!1;try{const M=n.aa();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===M){var a=String(n.H).match(qn)[1]||null;if(!a&&vn.self&&vn.self.location){var f=vn.self.location.protocol;a=f.substr(0,f.length-1)}s=!jd.test(a?a.toLowerCase():"")}t=s}if(t)Ti(n,"complete"),Ti(n,"success");else{n.m=6;try{var v=2<oo(n)?n.g.statusText:""}catch{v=""}n.j=v+" ["+n.aa()+"]",dd(n)}}finally{Ac(n)}}}function Ac(n,e){if(n.g){$d(n);const t=n.g,s=n.C[0]?Rs:null;n.g=null,n.C=null,e||Ti(n,"ready");try{t.onreadystatechange=s}catch{}}}function $d(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(vn.clearTimeout(n.A),n.A=null)}function oo(n){return n.g?n.g.readyState:0}function $h(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case cd:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function xc(n){let e="";return ha(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Mc(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=xc(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Fr(n,e,t))}function Rc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Yl(n){this.Ca=0,this.i=[],this.j=new Ws,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Rc("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Rc("baseRetryDelayMs",5e3,n),this.bb=Rc("retryDelaySeedMs",1e4,n),this.$a=Rc("forwardChannelMaxRetries",2,n),this.ta=Rc("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new ud(n&&n.concurrentRequestLimit),this.Fa=new Tc,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Ql(n){if(ul(n),3==n.G){var e=n.U++,t=_a(n.F);Fr(t,"SID",n.I),Fr(t,"RID",e),Fr(t,"TYPE","terminate"),xl(n,t),(e=new Me(n,n.j,e,void 0)).K=2,e.v=Ua(_a(t)),t=!1,vn.navigator&&vn.navigator.sendBeacon&&(t=vn.navigator.sendBeacon(e.v.toString(),"")),!t&&vn.Image&&((new Image).src=e.v,t=!0),t||(e.g=Oc(e.l,null),e.g.da(e.v)),e.F=Date.now(),J(e)}Pc(n)}function fd(n){n.g&&(Xl(n),n.g.cancel(),n.g=null)}function ul(n){fd(n),n.u&&(vn.clearTimeout(n.u),n.u=null),cl(n),n.h.cancel(),n.m&&("number"==typeof n.m&&vn.clearTimeout(n.m),n.m=null)}function pd(n){Vd(n.h)||n.m||(n.m=!0,Qo(n.Ja,n),n.C=0)}function Al(n,e){var t;t=e?e.m:n.U++;const s=_a(n.F);Fr(s,"SID",n.I),Fr(s,"RID",t),Fr(s,"AID",n.T),xl(n,s),n.o&&n.s&&Mc(s,n.o,n.s),t=new Me(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=ll(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),ol(n.h,t),Di(t,s,e)}function xl(n,e){n.ia&&ha(n.ia,function(t,s){Fr(e,s,t)}),n.l&&ir({},function(t,s){Fr(e,s,t)})}function ll(n,e,t){t=Math.min(n.i.length,t);var s=n.l?ai(n.l.Ra,n.l,n):null;e:{var a=n.i;let f=-1;for(;;){const v=["count="+t];-1==f?0<t?(f=a[0].h,v.push("ofs="+f)):f=0:v.push("ofs="+f);let M=!0;for(let B=0;B<t;B++){let W=a[B].h;const ee=a[B].g;if(W-=f,0>W)f=Math.max(0,a[B].h-100),M=!1;else try{Dc(ee,v,"req"+W+"_")}catch{s&&s(ee)}}if(M){s=v.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,s}function Ba(n){n.g||n.u||(n.Z=1,Qo(n.Ia,n),n.A=0)}function Nc(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Ja(ai(n.Ia,n),Hh(n,n.A)),n.A++,0))}function Xl(n){null!=n.B&&(vn.clearTimeout(n.B),n.B=null)}function Jl(n){n.g=new Me(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=_a(n.sa);Fr(e,"RID","rpc"),Fr(e,"SID",n.I),Fr(e,"CI",n.L?"0":"1"),Fr(e,"AID",n.T),Fr(e,"TYPE","xmlhttp"),xl(n,e),n.o&&n.s&&Mc(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Ua(_a(e)),t.s=null,t.P=!0,Ks(t,n)}function cl(n){null!=n.v&&(vn.clearTimeout(n.v),n.v=null)}function Ml(n,e){var t=null;if(n.g==e){cl(n),Xl(n),n.g=null;var s=2}else{if(!eu(n.h,e))return;t=e.D,Bd(n.h,e),s=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Ti(s=Lo(),new ma(s,t)),pd(n)}else Ba(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==s&&function Hd(n,e){return!(sl(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Ja(ai(n.Ja,n,e),Hh(n,n.C)),n.C++,0)))}(n,e)||2==s&&Nc(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:Nu(n,5);break;case 4:Nu(n,10);break;case 3:Nu(n,6);break;default:Nu(n,2)}}function Hh(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Nu(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var s=ai(n.kb,n);t||(t=new Si("//www.google.com/images/cleardot.gif"),vn.location&&"http"==vn.location.protocol||Qu(t,"https"),Ua(t)),function jh(n,e){const t=new Ws;if(vn.Image){const s=new Image;s.onload=Zo(so,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Zo(so,t,s,"TestLoadImage: error",!1,e),s.onabort=Zo(so,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Zo(so,t,s,"TestLoadImage: timeout",!1,e),vn.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else Oi(2);n.G=0,n.l&&n.l.va(e),Pc(n),ul(n)}function Pc(n){if(n.G=0,n.la=[],n.l){const e=tu(n.h);(0!=e.length||0!=n.i.length)&&(io(n.la,e),io(n.la,n.i),n.h.i.length=0,Rr(n.i),n.i.length=0),n.l.ua()}}function Gd(n,e,t){var s=t instanceof Si?_a(t):new Si(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),Du(s,s.m);else{var a=vn.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var f=new Si(null,void 0);s&&Qu(f,s),e&&(f.g=e),a&&Du(f,a),t&&(f.l=t),s=f}return e=n.za,(t=n.D)&&e&&Fr(s,t,e),Fr(s,"VER",n.ma),xl(n,s),s}function Oc(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ji(t&&n.Da&&!n.ra?new Wl({jb:!0}):n.ra)).Ka(n.H),e}function dl(){}function hl(){if(ce&&!(10<=Number(vs)))throw Error("Environmental error: no available transport.")}function ja(n,e){pi.call(this),this.g=new Yl(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!xa(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xa(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ec(this)}function gd(n){P.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function kc(){$.call(this),this.status=1}function ec(n){this.g=n}(rn=ji.prototype).Ka=function(n){this.L=n},rn.da=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():X.g(),this.C=function b(n){return n.h||(n.h=n.i())}(this.u?this.u:X),this.g.onreadystatechange=ai(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(f){return void Sl(this,f)}if(n=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const f of s.keys())t.set(f,s.get(f))}s=Array.from(t.keys()).find(f=>"content-type"==f.toLowerCase()),a=vn.FormData&&n instanceof vn.FormData,!(0<=ro(Jo,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[f,v]of t)this.g.setRequestHeader(f,v);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$d(this),0<this.B&&((this.K=function Kl(n){return ce&&function Cr(){return function V(n){var e=Pi;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=hu(String(Xn)).split("."),t=hu("9").split("."),s=Math.max(e.length,t.length);for(let v=0;0==n&&v<s;v++){var a=e[v]||"",f=t[v]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],0==a[0].length&&0==f[0].length)break;n=qa(0==a[1].length?0:parseInt(a[1],10),0==f[1].length?0:parseInt(f[1],10))||qa(0==a[2].length,0==f[2].length)||qa(a[2],f[2]),a=a[3],f=f[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ai(this.qa,this)):this.A=tn(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(f){Sl(this,f)}},rn.qa=function(){typeof Aa<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ti(this,"timeout"),this.abort(8))},rn.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ti(this,"complete"),Ti(this,"abort"),Ac(this))},rn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ac(this,!0)),ji.X.M.call(this)},rn.Ha=function(){this.s||(this.F||this.v||this.l?hd(this):this.fb())},rn.fb=function(){hd(this)},rn.aa=function(){try{return 2<oo(this)?this.g.status:-1}catch{return-1}},rn.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},rn.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Va(e)}},rn.Ea=function(){return this.m},rn.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(rn=Yl.prototype).ma=8,rn.G=1,rn.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new Me(this,this.j,n,void 0);let f=this.s;if(this.S&&(f?(f=Ra(f),Ns(f,this.S)):f=this.S),null!==this.o||this.N||(a.H=f,f=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ll(this,a,e),Fr(t=_a(this.F),"RID",n),Fr(t,"CVER",22),this.D&&Fr(t,"X-HTTP-Session-Id",this.D),xl(this,t),f&&(this.N?e="headers="+encodeURIComponent(String(xc(f)))+"&"+e:this.o&&Mc(t,this.o,f)),ol(this.h,a),this.Ya&&Fr(t,"TYPE","init"),this.O?(Fr(t,"$req",e),Fr(t,"SID","null"),a.Z=!0,Di(a,t,null)):Di(a,t,e),this.G=2}}else 3==this.G&&(n?Al(this,n):0==this.i.length||Vd(this.h)||Al(this))},rn.Ia=function(){if(this.u=null,Jl(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Ja(ai(this.eb,this),n)}},rn.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Oi(10),fd(this),Jl(this))},rn.cb=function(){null!=this.v&&(this.v=null,fd(this),Nc(this),Oi(19))},rn.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Oi(2)):(this.j.info("Failed to ping google.com"),Oi(1))},(rn=dl.prototype).xa=function(){},rn.wa=function(){},rn.va=function(){},rn.ua=function(){},rn.Ra=function(){},hl.prototype.g=function(n,e){return new ja(n,e)},Kr(ja,pi),ja.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Oi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Gd(n,null,n.V),pd(n)},ja.prototype.close=function(){Ql(this.g)},ja.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Es(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&pd(e)},ja.prototype.M=function(){this.g.l=null,delete this.j,Ql(this.g),delete this.g,ja.X.M.call(this)},Kr(gd,P),Kr(kc,$),Kr(ec,dl),ec.prototype.xa=function(){Ti(this.g,"a")},ec.prototype.wa=function(n){Ti(this.g,new gd(n))},ec.prototype.va=function(n){Ti(this.g,new kc)},ec.prototype.ua=function(){Ti(this.g,"b")},hl.prototype.createWebChannel=hl.prototype.g,ja.prototype.send=ja.prototype.u,ja.prototype.open=ja.prototype.m,ja.prototype.close=ja.prototype.close,Cl.NO_ERROR=0,Cl.TIMEOUT=8,Cl.HTTP_ERROR=6,bl.COMPLETE="complete",x.EventType=I,I.OPEN="a",I.CLOSE="b",I.ERROR="c",I.MESSAGE="d",pi.prototype.listen=pi.prototype.N,ji.prototype.listenOnce=ji.prototype.O,ji.prototype.getLastError=ji.prototype.Oa,ji.prototype.getLastErrorCode=ji.prototype.Ea,ji.prototype.getStatus=ji.prototype.aa,ji.prototype.getResponseJson=ji.prototype.Sa,ji.prototype.getResponseText=ji.prototype.fa,ji.prototype.send=ji.prototype.da,ji.prototype.setWithCredentials=ji.prototype.Ka;var zd=ys.createWebChannelTransport=function(){return new hl},Gh=ys.getStatEventTarget=function(){return Lo()},Pu=ys.ErrorCode=Cl,Rl=ys.EventType=bl,md=ys.Event=Xo,_d=ys.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},nu=ys.FetchXmlHttpFactory=Wl,Ou=ys.WebChannel=x,fl=ys.XhrIo=ji;const tc="@firebase/firestore";class li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");let ya="9.17.2";const ru=new no.Yd("@firebase/firestore");function nc(){return ru.logLevel}function xt(n,...e){if(ru.logLevel<=no.in.DEBUG){const t=e.map(Au);ru.debug(`Firestore (${ya}): ${n}`,...t)}}function Is(n,...e){if(ru.logLevel<=no.in.ERROR){const t=e.map(Au);ru.error(`Firestore (${ya}): ${n}`,...t)}}function Os(n,...e){if(ru.logLevel<=no.in.WARN){const t=e.map(Au);ru.warn(`Firestore (${ya}): ${n}`,...t)}}function Au(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ln(n="Unexpected state"){const e=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: `+n;throw Is(e),new Error(e)}function En(n,e){n||ln()}function zt(n,e){return n}const Ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends Ke.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class as{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class gu{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(li.UNAUTHENTICATED))}shutdown(){}}class Fc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vd{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const f=W=>this.i!==a?(a=this.i,t(W)):Promise.resolve();let v=new as;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new as,e.enqueueRetryable(()=>f(this.currentUser))};const M=()=>{const W=v;e.enqueueRetryable((0,se.Z)(function*(){yield W.promise,yield f(s.currentUser)}))},B=W=>{xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=W,this.auth.addAuthTokenListener(this.o),M()};this.t.onInit(W=>B(W)),setTimeout(()=>{if(!this.auth){const W=this.t.getImmediate({optional:!0});W?B(W):(xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new as)}},0),M()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(En("string"==typeof s.accessToken),new gu(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return En(null===e||"string"==typeof e),new li(e)}}class pl{constructor(e,t,s,a){this.h=e,this.l=t,this.m=s,this.g=a,this.type="FirstParty",this.user=li.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(En(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class qd{constructor(e,t,s,a){this.h=e,this.l=t,this.m=s,this.g=a}getToken(){return Promise.resolve(new pl(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zd{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const s=f=>{null!=f.error&&xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const v=f.token!==this.A;return this.A=f.token,xt("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>s(f))};const a=f=>{xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.appCheck.addTokenListener(this.o)};this.T.onInit(f=>a(f)),setTimeout(()=>{if(!this.appCheck){const f=this.T.getImmediate({optional:!0});f?a(f):xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(En("string"==typeof t.token),this.A=t.token,new Wi(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Kd(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}class Fu{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=Kd(40);for(let f=0;f<a.length;++f)s.length<20&&a[f]<t&&(s+=e.charAt(a[f]%e.length))}return s}}function Hn(n,e){return n<e?-1:n>e?1:0}function Lu(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}function Lc(n){return n+"\0"}class qi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new bt(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new bt(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new bt(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bt(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qi.fromMillis(Date.now())}static fromDate(e){return qi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new qi(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Hn(this.nanoseconds,e.nanoseconds):Hn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mn(e)}static min(){return new Mn(new qi(0,0))}static max(){return new Mn(new qi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class rc{constructor(e,t,s){void 0===t?t=0:t>e.length&&ln(),void 0===s?s=e.length-t:s>e.length-t&&ln(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===rc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rc?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const f=e.get(a),v=t.get(a);if(f<v)return-1;if(f>v)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _r extends rc{construct(e,t,s){return new _r(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new bt(Ye.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new _r(t)}static emptyPath(){return new _r([])}}const Of=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cs extends rc{construct(e,t,s){return new Cs(e,t,s)}static isValidIdentifier(e){return Of.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Cs(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const f=()=>{if(0===s.length)throw new bt(Ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let v=!1;for(;a<e.length;){const M=e[a];if("\\"===M){if(a+1===e.length)throw new bt(Ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const B=e[a+1];if("\\"!==B&&"."!==B&&"`"!==B)throw new bt(Ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=B,a+=2}else"`"===M?(v=!v,a++):"."!==M||v?(s+=M,a++):(f(),a++)}if(f(),v)throw new bt(Ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cs(t)}static emptyPath(){return new Cs([])}}class E{constructor(e){this.path=e}static fromPath(e){return new E(_r.fromString(e))}static fromName(e){return new E(_r.fromString(e).popFirst(5))}static empty(){return new E(_r.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_r.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _r.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new E(new _r(e.slice()))}}class p{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function _(n){return n.fields.find(e=>2===e.kind)}function S(n){return n.fields.filter(e=>2!==e.kind)}p.UNKNOWN_ID=-1;class ie{constructor(e,t){this.fieldPath=e,this.kind=t}}class tt{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new tt(0,In.min())}}function Ut(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Mn.fromTimestamp(1e9===s?new qi(t+1,0):new qi(t,s));return new In(a,E.empty(),e)}function Yt(n){return new In(n.readTime,n.key,-1)}class In{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new In(Mn.min(),E.empty(),-1)}static max(){return new In(Mn.max(),E.empty(),-1)}}function Rn(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=E.comparator(n.documentKey,e.documentKey),0!==t?t:Hn(n.largestBatchId,e.largestBatchId))}const ks="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function _u(n){return wd.apply(this,arguments)}function wd(){return wd=(0,se.Z)(function*(n){if(n.code!==Ye.FAILED_PRECONDITION||n.message!==ks)throw n;xt("LocalStore","Unexpectedly lost primary lease")}),wd.apply(this,arguments)}class ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ln(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ze((s,a)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(s,a)},this.catchCallback=f=>{this.wrapFailure(t,f).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ze?t:ze.resolve(t)}catch(t){return ze.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ze.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ze.reject(t)}static resolve(e){return new ze((t,s)=>{t(e)})}static reject(e){return new ze((t,s)=>{s(e)})}static waitFor(e){return new ze((t,s)=>{let a=0,f=0,v=!1;e.forEach(M=>{++a,M.next(()=>{++f,v&&f===a&&t()},B=>s(B))}),v=!0,f===a&&t()})}static or(e){let t=ze.resolve(!1);for(const s of e)t=t.next(a=>a?ze.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,f)=>{s.push(t.call(this,a,f))}),this.waitFor(s)}static mapArray(e,t){return new ze((s,a)=>{const f=e.length,v=new Array(f);let M=0;for(let B=0;B<f;B++){const W=B;t(e[W]).next(ee=>{v[W]=ee,++M,M===f&&s(v)},ee=>a(ee))}})}static doWhile(e,t){return new ze((s,a)=>{const f=()=>{!0===e()?t().next(()=>{f()},a):s()};f()})}}class iu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new as,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Nl(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=Pl(s.target.error);this.v.reject(new Nl(e,a))}}static open(e,t,s,a){try{return new iu(t,e.transaction(a,s))}catch(f){throw new Nl(t,f)}}get P(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(xt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new kf(t)}}class ea{constructor(e,t,s){this.name=e,this.version=t,this.S=s,12.2===ea.D((0,Ke.z$)())&&Is("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xt("SimpleDb","Removing database:",e),gl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ke.hl)())return!1;if(ea.N())return!0;const e=(0,Ke.z$)(),t=ea.D(e),s=0<t&&t<10,a=ea.k(e),f=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||f)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static k(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}F(e){var t=this;return(0,se.Z)(function*(){return t.db||(xt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const f=indexedDB.open(t.name,t.version);f.onsuccess=v=>{s(v.target.result)},f.onblocked=()=>{a(new Nl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},f.onerror=v=>{const M=v.target.error;a("VersionError"===M.name?new bt(Ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===M.name?new bt(Ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+M):new Nl(e,M))},f.onupgradeneeded=v=>{xt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',v.oldVersion),t.S.$(v.target.result,f.transaction,v.oldVersion,t.version).next(()=>{xt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var f=this;return(0,se.Z)(function*(){const v="readonly"===t;let M=0;for(;;){++M;try{f.db=yield f.F(e);const B=iu.open(f.db,e,v?"readonly":"readwrite",s),W=a(B).next(ee=>(B.V(),ee)).catch(ee=>(B.abort(ee),ze.reject(ee))).toPromise();return W.catch(()=>{}),yield B.P,W}catch(B){const W=B,ee="FirebaseError"!==W.name&&M<3;if(xt("SimpleDb","Transaction failed with error:",W.message,"Retrying:",ee),f.close(),!ee)return Promise.reject(W)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Uc{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return gl(this.q.delete())}}class Nl extends bt{constructor(e,t){super(Ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Uu(n){return"IndexedDbTransactionError"===n.name}class kf{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(xt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(xt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),gl(s)}add(e){return xt("SimpleDb","ADD",this.store.name,e,e),gl(this.store.add(e))}get(e){return gl(this.store.get(e)).next(t=>(void 0===t&&(t=null),xt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return xt("SimpleDb","DELETE",this.store.name,e),gl(this.store.delete(e))}count(){return xt("SimpleDb","COUNT",this.store.name),gl(this.store.count())}W(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),f=[];return this.H(a,(v,M)=>{f.push(M)}).next(()=>f)}{const a=this.store.getAll(s.range);return new ze((f,v)=>{a.onerror=M=>{v(M.target.error)},a.onsuccess=M=>{f(M.target.result)}})}}J(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new ze((a,f)=>{s.onerror=v=>{f(v.target.error)},s.onsuccess=v=>{a(v.target.result)}})}Y(e,t){xt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Z=!1;const a=this.cursor(s);return this.H(a,(f,v,M)=>M.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.H(a,t)}tt(e){const t=this.cursor({});return new ze((s,a)=>{t.onerror=f=>{const v=Pl(f.target.error);a(v)},t.onsuccess=f=>{const v=f.target.result;v?e(v.primaryKey,v.value).next(M=>{M?v.continue():s()}):s()}})}H(e,t){const s=[];return new ze((a,f)=>{e.onerror=v=>{f(v.target.error)},e.onsuccess=v=>{const M=v.target.result;if(!M)return void a();const B=new Uc(M),W=t(M.primaryKey,M.value,B);if(W instanceof ze){const ee=W.catch(le=>(B.done(),ze.reject(le)));s.push(ee)}B.isDone?a():null===B.G?M.continue():M.continue(B.G)}}).next(()=>ze.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Z?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gl(n){return new ze((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const a=Pl(s.target.error);t(a)}})}let Ff=!1;function Pl(n){const e=ea.D((0,Ke.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new bt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ff||(Ff=!0,setTimeout(()=>{throw s},0)),s}}return n}class Yd{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;xt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,se.Z)(function*(){t.task=null;try{xt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(s){Uu(s)?xt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield _u(s)}yield t.nt(6e4)}))}}class Ay{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,se.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.it(s,e))})()}it(e,t){const s=new Set;let a=t,f=!0;return ze.doWhile(()=>!0===f&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!s.has(v))return xt("IndexBackiller",`Processing collection: ${v}`),this.rt(e,v,a).next(M=>{a-=M,s.add(v)});f=!1})).next(()=>t-a)}rt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(f=>{const v=f.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.ot(a,f)).next(M=>(xt("IndexBackiller",`Updating offset: ${M}`),this.localStore.indexManager.updateCollectionGroup(e,t,M))).next(()=>v.size)}))}ot(e,t){let s=e;return t.changes.forEach((a,f)=>{const v=Yt(f);Rn(v,s)>0&&(s=v)}),new In(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Vu=(()=>{class n{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ut(a),this.ct=a=>s.writeSequenceNumber(a))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class vm{constructor(e,t,s,a,f,v,M,B){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=f,this.forceLongPolling=v,this.autoDetectLongPolling=M,this.useFetchStreams=B}}class Vc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Vc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Vc&&e.projectId===this.projectId&&e.database===this.database}}function Hp(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ml(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Uf(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Bc(n){return null==n}function Ed(n){return 0===n&&1/n==-1/0}function Ys(n){return"number"==typeof n&&Number.isInteger(n)&&!Ed(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Gp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Io{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw a instanceof DOMException?new Gp("Invalid base64 string: "+a):a}}(e);return new Io(t)}static fromUint8Array(e){const t=function(s){let a="";for(let f=0;f<s.length;++f)a+=String.fromCharCode(s[f]);return a}(e);return new Io(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Hn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Io.EMPTY_BYTE_STRING=new Io("");const Ol=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(n){if(En(!!n),"string"==typeof n){let e=0;const t=Ol.exec(n);if(En(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ri(n.seconds),nanos:ri(n.nanos)}}function ri(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ju(n){return"string"==typeof n?Io.fromBase64String(n):Io.fromUint8Array(n)}function Vf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Bf(n){const e=n.mapValue.fields.__previous_value__;return Vf(e)?Bf(e):e}function Wh(n){const e=bs(n.mapValue.fields.__local_write_time__.timestampValue);return new qi(e.seconds,e.nanos)}const jc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},su={nullValue:"NULL_VALUE"};function kl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vf(n)?4:Zh(n)?9007199254740991:10:ln()}function el(n,e){if(n===e)return!0;const t=kl(n);if(t!==kl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wh(n).isEqual(Wh(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const f=bs(s.timestampValue),v=bs(a.timestampValue);return f.seconds===v.seconds&&f.nanos===v.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Ju(n.bytesValue).isEqual(Ju(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return ri(s.geoPointValue.latitude)===ri(a.geoPointValue.latitude)&&ri(s.geoPointValue.longitude)===ri(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return ri(s.integerValue)===ri(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const f=ri(s.doubleValue),v=ri(a.doubleValue);return f===v?Ed(f)===Ed(v):isNaN(f)&&isNaN(v)}return!1}(n,e);case 9:return Lu(n.arrayValue.values||[],e.arrayValue.values||[],el);case 10:return function(s,a){const f=s.mapValue.fields||{},v=a.mapValue.fields||{};if(Hp(f)!==Hp(v))return!1;for(const M in f)if(f.hasOwnProperty(M)&&(void 0===v[M]||!el(f[M],v[M])))return!1;return!0}(n,e);default:return ln()}var a}function Id(n,e){return void 0!==(n.values||[]).find(t=>el(t,e))}function Fl(n,e){if(n===e)return 0;const t=kl(n),s=kl(e);if(t!==s)return Hn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Hn(n.booleanValue,e.booleanValue);case 2:return function(a,f){const v=ri(a.integerValue||a.doubleValue),M=ri(f.integerValue||f.doubleValue);return v<M?-1:v>M?1:v===M?0:isNaN(v)?isNaN(M)?0:-1:1}(n,e);case 3:return zp(n.timestampValue,e.timestampValue);case 4:return zp(Wh(n),Wh(e));case 5:return Hn(n.stringValue,e.stringValue);case 6:return function(a,f){const v=Ju(a),M=Ju(f);return v.compareTo(M)}(n.bytesValue,e.bytesValue);case 7:return function(a,f){const v=a.split("/"),M=f.split("/");for(let B=0;B<v.length&&B<M.length;B++){const W=Hn(v[B],M[B]);if(0!==W)return W}return Hn(v.length,M.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,f){const v=Hn(ri(a.latitude),ri(f.latitude));return 0!==v?v:Hn(ri(a.longitude),ri(f.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,f){const v=a.values||[],M=f.values||[];for(let B=0;B<v.length&&B<M.length;++B){const W=Fl(v[B],M[B]);if(W)return W}return Hn(v.length,M.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,f){if(a===jc.mapValue&&f===jc.mapValue)return 0;if(a===jc.mapValue)return 1;if(f===jc.mapValue)return-1;const v=a.fields||{},M=Object.keys(v),B=f.fields||{},W=Object.keys(B);M.sort(),W.sort();for(let ee=0;ee<M.length&&ee<W.length;++ee){const le=Hn(M[ee],W[ee]);if(0!==le)return le;const Oe=Fl(v[M[ee]],B[W[ee]]);if(0!==Oe)return Oe}return Hn(M.length,W.length)}(n.mapValue,e.mapValue);default:throw ln()}}function zp(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Hn(n,e);const t=bs(n),s=bs(e),a=Hn(t.seconds,s.seconds);return 0!==a?a:Hn(t.nanos,s.nanos)}function $c(n){return Qd(n)}function Qd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(s){const a=bs(s);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ju(n.bytesValue).toBase64():"referenceValue"in n?E.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(s){let a="[",f=!0;for(const v of s.values||[])f?f=!1:a+=",",a+=Qd(v);return a+"]"}(n.arrayValue):"mapValue"in n?function(s){const a=Object.keys(s.fields||{}).sort();let f="{",v=!0;for(const M of a)v?v=!1:f+=",",f+=`${M}:${Qd(s.fields[M])}`;return f+"}"}(n.mapValue):ln();var e}function Ll(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ul(n){return!!n&&"integerValue"in n}function qh(n){return!!n&&"arrayValue"in n}function Xd(n){return!!n&&"nullValue"in n}function Wp(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Cd(n){return!!n&&"mapValue"in n}function Hc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ml(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Hc(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Zh(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ic(n){return"nullValue"in n?su:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ll(Vc.empty(),E.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ln()}function Em(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ll(Vc.empty(),E.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?jc:ln()}function Kh(n,e){const t=Fl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Jd(n,e){const t=Fl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Vl{constructor(e,t){this.position=e,this.inclusive=t}}function Yh(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const f=e[a],v=n.position[a];if(s=f.field.isKeyField()?E.comparator(E.fromName(v.referenceValue),t.key):Fl(v,t.data.field(f.field)),"desc"===f.dir&&(s*=-1),0!==s)break}return s}function eh(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!el(n.position[t],e.position[t]))return!1;return!0}class Bl{}class Lr extends Bl{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new k(e,t,s):"array-contains"===t?new _e(e,s):"in"===t?new et(e,s):"not-in"===t?new it(e,s):"array-contains-any"===t?new wt(e,s):new Lr(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new z(e,s):new te(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Fl(t,this.value)):null!==t&&kl(this.value)===kl(t)&&this.matchesComparison(Fl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ln()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ei extends Bl{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new Ei(e,t)}matches(e){return bd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function bd(n){return"and"===n.op}function Qh(n){return"or"===n.op}function Xh(n){return h(n)&&bd(n)}function h(n){for(const e of n.filters)if(e instanceof Ei)return!1;return!0}function l(n){if(n instanceof Lr)return n.field.canonicalString()+n.op.toString()+$c(n.value);if(Xh(n))return n.filters.map(e=>l(e)).join(",");{const e=n.filters.map(t=>l(t)).join(",");return`${n.op}(${e})`}}function c(n,e){return n instanceof Lr?(t=n,(s=e)instanceof Lr&&t.op===s.op&&t.field.isEqual(s.field)&&el(t.value,s.value)):n instanceof Ei?function(t,s){return s instanceof Ei&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,f,v)=>a&&c(f,s.filters[v]),!0)}(n,e):void ln();var t,s}function g(n,e){const t=n.filters.concat(e);return Ei.create(t,n.op)}function T(n){return n instanceof Lr?`${(e=n).field.canonicalString()} ${e.op} ${$c(e.value)}`:n instanceof Ei?function(e){return e.op.toString()+" {"+e.getFilters().map(T).join(" ,")+"}"}(n):"Filter";var e}class k extends Lr{constructor(e,t,s){super(e,t,s),this.key=E.fromName(s.referenceValue)}matches(e){const t=E.comparator(e.key,this.key);return this.matchesComparison(t)}}class z extends Lr{constructor(e,t){super(e,"in",t),this.keys=oe(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class te extends Lr{constructor(e,t){super(e,"not-in",t),this.keys=oe(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function oe(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>E.fromName(s.referenceValue))}class _e extends Lr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qh(t)&&Id(t.arrayValue,this.value)}}class et extends Lr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Id(this.value.arrayValue,t)}}class it extends Lr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Id(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Id(this.value.arrayValue,t)}}class wt extends Lr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Id(this.value.arrayValue,s))}}class Wt{constructor(e,t="asc"){this.field=e,this.dir=t}}function Nn(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class jn{constructor(e,t){this.comparator=e,this.root=t||Ji.EMPTY}insert(e,t){return new jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ji.BLACK,null,null))}remove(e){return new jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ji.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qs(this.root,e,this.comparator,!0)}}class Qs{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?s(e.key,t):1,t&&a&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(0===f){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ji{constructor(e,t,s,a,f){this.key=e,this.value=t,this.color=s??Ji.RED,this.left=a??Ji.EMPTY,this.right=f??Ji.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,f){return new Ji(e??this.key,t??this.value,s??this.color,a??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const f=s(e,a.key);return a=f<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===f?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ji.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Ji.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ji.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ji.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ln();const e=this.left.check();if(e!==this.right.check())throw ln();return e+(this.isRed()?0:1)}}Ji.EMPTY=null,Ji.RED=!0,Ji.BLACK=!1,Ji.EMPTY=new class{constructor(){this.size=0}get key(){throw ln()}get value(){throw ln()}get color(){throw ln()}get left(){throw ln()}get right(){throw ln()}copy(n,e,t,s,a){return this}insert(n,e,t){return new Ji(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jr{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gc(this.data.getIterator())}getIteratorFrom(e){return new Gc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof jr)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,f=s.getNext().key;if(0!==this.comparator(a,f))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jr(this.comparator);return t.data=e,t}}class Gc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zc(n){return n.hasNext()?n.getNext():void 0}class xu{constructor(e){this.fields=e,e.sort(Cs.comparator)}static empty(){return new xu([])}unionWith(e){let t=new jr(Cs.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new xu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lu(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class ta{constructor(e){this.value=e}static empty(){return new ta({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Cd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hc(t)}setAll(e){let t=Cs.emptyPath(),s={},a=[];e.forEach((v,M)=>{if(!t.isImmediateParentOf(M)){const B=this.getFieldsMap(t);this.applyChanges(B,s,a),s={},a=[],t=M.popLast()}v?s[M.lastSegment()]=Hc(v):a.push(M.lastSegment())});const f=this.getFieldsMap(t);this.applyChanges(f,s,a)}delete(e){const t=this.field(e.popLast());Cd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return el(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Cd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){ml(t,(a,f)=>e[a]=f);for(const a of s)delete e[a]}clone(){return new ta(Hc(this.value))}}function qp(n){const e=[];return ml(n.fields,(t,s)=>{const a=new Cs([t]);if(Cd(s)){const f=qp(s.mapValue).fields;if(0===f.length)e.push(a);else for(const v of f)e.push(a.child(v))}else e.push(a)}),new xu(e)}class Fs{constructor(e,t,s,a,f,v,M){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=f,this.data=v,this.documentState=M}static newInvalidDocument(e){return new Fs(e,0,Mn.min(),Mn.min(),Mn.min(),ta.empty(),0)}static newFoundDocument(e,t,s,a){return new Fs(e,1,t,Mn.min(),s,a,0)}static newNoDocument(e,t){return new Fs(e,2,t,Mn.min(),Mn.min(),ta.empty(),0)}static newUnknownDocument(e,t){return new Fs(e,3,t,Mn.min(),Mn.min(),ta.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Mn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ta.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ta.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Im{constructor(e,t=null,s=[],a=[],f=null,v=null,M=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=f,this.startAt=v,this.endAt=M,this._t=null}}function th(n,e=null,t=[],s=[],a=null,f=null,v=null){return new Im(n,e,t,s,a,f,v)}function nh(n){const e=zt(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>l(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>$c(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>$c(s)).join(",")),e._t=t}return e._t}function jf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Nn(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!c(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eh(n.startAt,e.startAt)&&eh(n.endAt,e.endAt)}function Zp(n){return E.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Kp(n,e){return n.filters.filter(t=>t instanceof Lr&&t.field.isEqual(e))}function xy(n,e,t){let s=su,a=!0;for(const f of Kp(n,e)){let v=su,M=!0;switch(f.op){case"<":case"<=":v=ic(f.value);break;case"==":case"in":case">=":v=f.value;break;case">":v=f.value,M=!1;break;case"!=":case"not-in":v=su}Kh({value:s,inclusive:a},{value:v,inclusive:M})<0&&(s=v,a=M)}if(null!==t)for(let f=0;f<n.orderBy.length;++f)if(n.orderBy[f].field.isEqual(e)){const v=t.position[f];Kh({value:s,inclusive:a},{value:v,inclusive:t.inclusive})<0&&(s=v,a=t.inclusive);break}return{value:s,inclusive:a}}function My(n,e,t){let s=jc,a=!0;for(const f of Kp(n,e)){let v=jc,M=!0;switch(f.op){case">=":case">":v=Em(f.value),M=!1;break;case"==":case"in":case"<=":v=f.value;break;case"<":v=f.value,M=!1;break;case"!=":case"not-in":v=jc}Jd({value:s,inclusive:a},{value:v,inclusive:M})>0&&(s=v,a=M)}if(null!==t)for(let f=0;f<n.orderBy.length;++f)if(n.orderBy[f].field.isEqual(e)){const v=t.position[f];Jd({value:s,inclusive:a},{value:v,inclusive:t.inclusive})>0&&(s=v,a=t.inclusive);break}return{value:s,inclusive:a}}class Wc{constructor(e,t=null,s=[],a=[],f=null,v="F",M=null,B=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=f,this.limitType=v,this.startAt=M,this.endAt=B,this.wt=null,this.gt=null}}function rh(n,e,t,s,a,f,v,M){return new Wc(n,e,t,s,a,f,v,M)}function Bu(n){return new Wc(n)}function Ry(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Cm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function bm(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Ny(n){return null!==n.collectionGroup}function Td(n){const e=zt(n);if(null===e.wt){e.wt=[];const t=bm(e),s=Cm(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new Wt(t)),e.wt.push(new Wt(Cs.keyField(),"asc"));else{let a=!1;for(const f of e.explicitOrderBy)e.wt.push(f),f.field.isKeyField()&&(a=!0);if(!a){const f=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Wt(Cs.keyField(),f))}}}return e.wt}function ju(n){const e=zt(n);if(!e.gt)if("F"===e.limitType)e.gt=th(e.path,e.collectionGroup,Td(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const f of Td(e))t.push(new Wt(f.field,"desc"===f.dir?"asc":"desc"));const s=e.endAt?new Vl(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Vl(e.startAt.position,e.startAt.inclusive):null;e.gt=th(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e.gt}function Yp(n,e){e.getFirstInequalityField(),bm(n);const t=n.filters.concat([e]);return new Wc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $f(n,e,t){return new Wc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hf(n,e){return jf(ju(n),ju(e))&&n.limitType===e.limitType}function Tm(n){return`${nh(ju(n))}|lt:${n.limitType}`}function Dm(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>T(s)).join(", ")}]`),Bc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>$c(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>$c(s)).join(",")),`Target(${t})`}(ju(n))}; limitType=${n.limitType})`}function Gf(n,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):E.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,s){for(const a of Td(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(n,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(n,e)&&(s=e,!((t=n).startAt&&!function(a,f,v){const M=Yh(a,f,v);return a.inclusive?M<=0:M<0}(t.startAt,Td(t),s)||t.endAt&&!function(a,f,v){const M=Yh(a,f,v);return a.inclusive?M>=0:M>0}(t.endAt,Td(t),s)));var t,s}function _l(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Py(n){return(e,t)=>{let s=!1;for(const a of Td(n)){const f=Oy(a,e,t);if(0!==f)return f;s=s||a.field.isKeyField()}return 0}}function Oy(n,e,t){const s=n.field.isKeyField()?E.comparator(e.key,t.key):function(a,f,v){const M=f.data.field(a),B=v.data.field(a);return null!==M&&null!==B?Fl(M,B):ln()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ln()}}function ky(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ed(e)?"-0":e}}function Fy(n){return{integerValue:""+n}}function Ly(n,e){return Ys(e)?Fy(e):ky(n,e)}class Qp{constructor(){this._=void 0}}function Uy(n,e,t){return n instanceof Jh?function(s,a){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&(f.fields.__previous_value__=a),{mapValue:f}}(t,e):n instanceof Jn?Sm(n,e):n instanceof Dd?Am(n,e):function(s,a){const f=Vy(s,a),v=By(f)+By(s.It);return Ul(f)&&Ul(s.It)?Fy(v):ky(s.Tt,v)}(n,e)}function uw(n,e,t){return n instanceof Jn?Sm(n,e):n instanceof Dd?Am(n,e):t}function Vy(n,e){return n instanceof ef?Ul(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Jh extends Qp{}class Jn extends Qp{constructor(e){super(),this.elements=e}}function Sm(n,e){const t=xm(e);for(const s of n.elements)t.some(a=>el(a,s))||t.push(s);return{arrayValue:{values:t}}}class Dd extends Qp{constructor(e){super(),this.elements=e}}function Am(n,e){let t=xm(e);for(const s of n.elements)t=t.filter(a=>!el(a,s));return{arrayValue:{values:t}}}class ef extends Qp{constructor(e,t){super(),this.Tt=e,this.It=t}}function By(n){return ri(n.integerValue||n.doubleValue)}function xm(n){return qh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zf{constructor(e,t){this.field=e,this.transform=t}}class lw{constructor(e,t){this.version=e,this.transformResults=t}}class Xs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xs}static exists(e){return new Xs(void 0,e)}static updateTime(e){return new Xs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Wf{}function Rm(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new sh(n.key,Xs.none()):new tf(n.key,n.data,Xs.none());{const t=n.data,s=ta.empty();let a=new jr(Cs.comparator);for(let f of e.fields)if(!a.has(f)){let v=t.field(f);null===v&&f.length>1&&(f=f.popLast(),v=t.field(f)),null===v?s.delete(f):s.set(f,v),a=a.add(f)}return new Sd(n.key,s,new xu(a.toArray()),Xs.none())}}function ih(n,e,t){n instanceof tf?function(s,a,f){const v=s.value.clone(),M=dw(s.fieldTransforms,a,f.transformResults);v.setAll(M),a.convertToFoundDocument(f.version,v).setHasCommittedMutations()}(n,e,t):n instanceof Sd?function(s,a,f){if(!Mm(s.precondition,a))return void a.convertToUnknownDocument(f.version);const v=dw(s.fieldTransforms,a,f.transformResults),M=a.data;M.setAll(cw(s)),M.setAll(v),a.convertToFoundDocument(f.version,M).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function qf(n,e,t,s){return n instanceof tf?function(a,f,v,M){if(!Mm(a.precondition,f))return v;const B=a.value.clone(),W=$y(a.fieldTransforms,M,f);return B.setAll(W),f.convertToFoundDocument(f.version,B).setHasLocalMutations(),null}(n,e,t,s):n instanceof Sd?function(a,f,v,M){if(!Mm(a.precondition,f))return v;const B=$y(a.fieldTransforms,M,f),W=f.data;return W.setAll(cw(a)),W.setAll(B),f.convertToFoundDocument(f.version,W).setHasLocalMutations(),null===v?null:v.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(ee=>ee.field))}(n,e,t,s):(v=t,Mm(n.precondition,f=e)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):v);var f,v}function Nm(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),f=Vy(s.transform,a||null);null!=f&&(null===t&&(t=ta.empty()),t.set(s.field,f))}return t||null}function Xp(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===s||t&&s&&Lu(t,s,(a,f)=>function jy(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(t=n.transform)instanceof Jn&&s instanceof Jn||t instanceof Dd&&s instanceof Dd?Lu(t.elements,s.elements,el):t instanceof ef&&s instanceof ef?el(t.It,s.It):t instanceof Jh&&s instanceof Jh);var t,s}(a,f))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,s}class tf extends Wf{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Sd extends Wf{constructor(e,t,s,a,f=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function cw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function dw(n,e,t){const s=new Map;En(n.length===t.length);for(let a=0;a<t.length;a++){const f=n[a],v=f.transform,M=e.data.field(f.field);s.set(f.field,uw(v,M,t[a]))}return s}function $y(n,e,t){const s=new Map;for(const a of n){const f=a.transform,v=t.data.field(a.field);s.set(a.field,Uy(f,v,e))}return s}class sh extends Wf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hy extends Wf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hw{constructor(e){this.count=e}}var Ls,mi;function Pm(n){switch(n){default:return ln();case Ye.CANCELLED:case Ye.UNKNOWN:case Ye.DEADLINE_EXCEEDED:case Ye.RESOURCE_EXHAUSTED:case Ye.INTERNAL:case Ye.UNAVAILABLE:case Ye.UNAUTHENTICATED:return!1;case Ye.INVALID_ARGUMENT:case Ye.NOT_FOUND:case Ye.ALREADY_EXISTS:case Ye.PERMISSION_DENIED:case Ye.FAILED_PRECONDITION:case Ye.ABORTED:case Ye.OUT_OF_RANGE:case Ye.UNIMPLEMENTED:case Ye.DATA_LOSS:return!0}}function Zf(n){if(void 0===n)return Is("GRPC error has no .code"),Ye.UNKNOWN;switch(n){case Ls.OK:return Ye.OK;case Ls.CANCELLED:return Ye.CANCELLED;case Ls.UNKNOWN:return Ye.UNKNOWN;case Ls.DEADLINE_EXCEEDED:return Ye.DEADLINE_EXCEEDED;case Ls.RESOURCE_EXHAUSTED:return Ye.RESOURCE_EXHAUSTED;case Ls.INTERNAL:return Ye.INTERNAL;case Ls.UNAVAILABLE:return Ye.UNAVAILABLE;case Ls.UNAUTHENTICATED:return Ye.UNAUTHENTICATED;case Ls.INVALID_ARGUMENT:return Ye.INVALID_ARGUMENT;case Ls.NOT_FOUND:return Ye.NOT_FOUND;case Ls.ALREADY_EXISTS:return Ye.ALREADY_EXISTS;case Ls.PERMISSION_DENIED:return Ye.PERMISSION_DENIED;case Ls.FAILED_PRECONDITION:return Ye.FAILED_PRECONDITION;case Ls.ABORTED:return Ye.ABORTED;case Ls.OUT_OF_RANGE:return Ye.OUT_OF_RANGE;case Ls.UNIMPLEMENTED:return Ye.UNIMPLEMENTED;case Ls.DATA_LOSS:return Ye.DATA_LOSS;default:return ln()}}(mi=Ls||(Ls={}))[mi.OK=0]="OK",mi[mi.CANCELLED=1]="CANCELLED",mi[mi.UNKNOWN=2]="UNKNOWN",mi[mi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mi[mi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mi[mi.NOT_FOUND=5]="NOT_FOUND",mi[mi.ALREADY_EXISTS=6]="ALREADY_EXISTS",mi[mi.PERMISSION_DENIED=7]="PERMISSION_DENIED",mi[mi.UNAUTHENTICATED=16]="UNAUTHENTICATED",mi[mi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mi[mi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mi[mi.ABORTED=10]="ABORTED",mi[mi.OUT_OF_RANGE=11]="OUT_OF_RANGE",mi[mi.UNIMPLEMENTED=12]="UNIMPLEMENTED",mi[mi.INTERNAL=13]="INTERNAL",mi[mi.UNAVAILABLE=14]="UNAVAILABLE",mi[mi.DATA_LOSS=15]="DATA_LOSS";class Ad{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,f]of s)if(this.equalsFn(a,e))return f}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let f=0;f<a.length;f++)if(this.equalsFn(a[f][0],e))return void(a[f]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ml(this.inner,(t,s)=>{for(const[a,f]of s)e(a,f)})}isEmpty(){return Uf(this.inner)}size(){return this.innerSize}}const Gy=new jn(E.comparator);function $u(){return Gy}const zy=new jn(E.comparator);function Kf(...n){let e=zy;for(const t of n)e=e.insert(t.key,t);return e}function Wy(n){let e=zy;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function sc(){return Yf()}function Om(){return Yf()}function Yf(){return new Ad(n=>n.toString(),(n,e)=>n.isEqual(e))}const qy=new jn(E.comparator),Zy=new jr(E.comparator);function yr(...n){let e=Zy;for(const t of n)e=e.add(t);return e}const qE=new jr(Hn);function nf(){return qE}class Qf{constructor(e,t,s,a,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Jp.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Qf(Mn.min(),a,nf(),$u(),yr())}}class Jp{constructor(e,t,s,a,f){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Jp(s,t,yr(),yr(),yr())}}class qc{constructor(e,t,s,a){this.Et=e,this.removedTargetIds=t,this.key=s,this.At=a}}class km{constructor(e,t){this.targetId=e,this.Rt=t}}class Ky{constructor(e,t,s=Io.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Fm{constructor(){this.bt=0,this.vt=Xf(),this.Pt=Io.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return 0!==this.bt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}Nt(){let e=yr(),t=yr(),s=yr();return this.vt.forEach((a,f)=>{switch(f){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:ln()}}),new Jp(this.Pt,this.Vt,e,t,s)}kt(){this.St=!1,this.vt=Xf()}Ot(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class fw{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=$u(),this.Kt=Yy(),this.Gt=new jr(Hn)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const s=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&s.xt(e.resumeToken);break;case 1:s.$t(),s.Dt||s.kt(),s.xt(e.resumeToken);break;case 2:s.$t(),s.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(s.Bt(),s.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),s.xt(e.resumeToken));break;default:ln()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((s,a)=>{this.Jt(a)&&t(a)})}Zt(e){const t=e.targetId,s=e.Rt.count,a=this.Xt(t);if(a){const f=a.target;if(Zp(f))if(0===s){const v=new E(f.path);this.zt(t,v,Fs.newNoDocument(v,Mn.min()))}else En(1===s);else this.te(t)!==s&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((f,v)=>{const M=this.Xt(v);if(M){if(f.current&&Zp(M.target)){const B=new E(M.target.path);null!==this.Ut.get(B)||this.ne(v,B)||this.zt(v,B,Fs.newNoDocument(B,e))}f.Ct&&(t.set(v,f.Nt()),f.kt())}});let s=yr();this.Kt.forEach((f,v)=>{let M=!0;v.forEachWhile(B=>{const W=this.Xt(B);return!W||2===W.purpose||(M=!1,!1)}),M&&(s=s.add(f))}),this.Ut.forEach((f,v)=>v.setReadTime(e));const a=new Qf(e,t,this.Gt,this.Ut,s);return this.Ut=$u(),this.Kt=Yy(),this.Gt=new jr(Hn),a}jt(e,t){if(!this.Jt(e))return;const s=this.ne(e,t.key)?2:0;this.Ht(e).Ot(t.key,s),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,s){if(!this.Jt(e))return;const a=this.Ht(e);this.ne(e,t)?a.Ot(t,1):a.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),s&&(this.Ut=this.Ut.insert(t,s))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ft(e){this.Ht(e).Ft()}Ht(e){let t=this.qt.get(e);return t||(t=new Fm,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new jr(Hn),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||xt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new Fm),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function Yy(){return new jn(E.comparator)}function Xf(){return new jn(E.comparator)}const rf={asc:"ASCENDING",desc:"DESCENDING"},Lm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jf={and:"AND",or:"OR"};class Um{constructor(e,t){this.databaseId=e,this.yt=t}}function Zc(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vm(n,e){return n.yt?e.toBase64():e.toUint8Array()}function Bm(n,e){return Zc(n,e.toTimestamp())}function ao(n){return En(!!n),Mn.fromTimestamp(function(e){const t=bs(e);return new qi(t.seconds,t.nanos)}(n))}function ep(n,e){return(t=n,new _r(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function jm(n){const e=_r.fromString(n);return En(nv(e)),e}function oh(n,e){return ep(n.databaseId,e.path)}function oc(n,e){const t=jm(e);if(t.get(1)!==n.databaseId.projectId)throw new bt(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new bt(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new E(Gm(t))}function $m(n,e){return ep(n.databaseId,e)}function Hm(n){const e=jm(n);return 4===e.length?_r.emptyPath():Gm(e)}function tp(n){return new _r(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Gm(n){return En(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function zm(n,e,t){return{name:oh(n,e),fields:t.value.mapValue.fields}}function Qy(n,e,t){const s=oc(n,e.name),a=ao(e.updateTime),f=e.createTime?ao(e.createTime):Mn.min(),v=new ta({mapValue:{fields:e.fields}}),M=Fs.newFoundDocument(s,a,f,v);return t&&M.setHasCommittedMutations(),t?M.setHasCommittedMutations():M}function sf(n,e){let t;if(e instanceof tf)t={update:zm(n,e.key,e.value)};else if(e instanceof sh)t={delete:oh(n,e.key)};else if(e instanceof Sd)t={update:zm(n,e.key,e.data),updateMask:yw(e.fieldMask)};else{if(!(e instanceof Hy))return ln();t={verify:oh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,f){const v=f.transform;if(v instanceof Jh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Jn)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Dd)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof ef)return{fieldPath:f.field.canonicalString(),increment:v.It};throw ln()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:Bm(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:ln()),t;var a}function Wm(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Xs.updateTime(ao(a.updateTime)):void 0!==a.exists?Xs.exists(a.exists):Xs.none():Xs.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(f,v){let M=null;"setToServerValue"in v?(En("REQUEST_TIME"===v.setToServerValue),M=new Jh):"appendMissingElements"in v?M=new Jn(v.appendMissingElements.values||[]):"removeAllFromArray"in v?M=new Dd(v.removeAllFromArray.values||[]):"increment"in v?M=new ef(f,v.increment):ln();const B=Cs.fromServerFormat(v.fieldPath);return new zf(B,M)}(n,a)):[];var a;if(e.update){const a=oc(n,e.update.name),f=new ta({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new xu((e.updateMask.fieldPaths||[]).map(W=>Cs.fromServerFormat(W)));return new Sd(a,f,v,t,s)}return new tf(a,f,t,s)}if(e.delete){const a=oc(n,e.delete);return new sh(a,t)}if(e.verify){const a=oc(n,e.verify);return new Hy(a,t)}return ln()}function eg(n,e){return{documents:[$m(n,e.path)]}}function tg(n,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=$m(n,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=$m(n,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(B){if(0!==B.length)return tv(Ei.create(B,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const f=function(B){if(0!==B.length)return B.map(W=>{return{field:ac((ee=W).field),direction:ev(ee.dir)};var ee})}(e.orderBy);f&&(t.structuredQuery.orderBy=f);const v=(W=e.limit,n.yt||Bc(W)?W:{value:W});var W,M,B;return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(M=e.startAt).inclusive,values:M.position}),e.endAt&&(t.structuredQuery.endAt={before:!(B=e.endAt).inclusive,values:B.position}),t}function Xy(n){let e=Hm(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){En(1===s);const ee=t.from[0];ee.allDescendants?a=ee.collectionId:e=e.child(ee.collectionId)}let f=[];t.where&&(f=function(ee){const le=Jy(ee);return le instanceof Ei&&Xh(le)?le.getFilters():[le]}(t.where));let v=[];t.orderBy&&(v=t.orderBy.map(ee=>{return new Wt(af((le=ee).field),function(Oe){switch(Oe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(le.direction));var le}));let M=null;t.limit&&(M=function(ee){let le;return le="object"==typeof ee?ee.value:ee,Bc(le)?null:le}(t.limit));let B=null;var ee;t.startAt&&(B=new Vl((ee=t.startAt).values||[],!!ee.before));let W=null;return t.endAt&&(W=function(ee){return new Vl(ee.values||[],!ee.before)}(t.endAt)),rh(e,a,v,f,M,"F",B,W)}function Jy(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=af(e.unaryFilter.field);return Lr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=af(e.unaryFilter.field);return Lr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=af(e.unaryFilter.field);return Lr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=af(e.unaryFilter.field);return Lr.create(f,"!=",{nullValue:"NULL_VALUE"});default:return ln()}}(n):void 0!==n.fieldFilter?Lr.create(af((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ln()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Ei.create(e.compositeFilter.filters.map(t=>Jy(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ln()}}(e.compositeFilter.op))}(n):ln();var e}function ev(n){return rf[n]}function mw(n){return Lm[n]}function _w(n){return Jf[n]}function ac(n){return{fieldPath:n.canonicalString()}}function af(n){return Cs.fromServerFormat(n.fieldPath)}function tv(n){return n instanceof Lr?function(e){if("=="===e.op){if(Wp(e.value))return{unaryFilter:{field:ac(e.field),op:"IS_NAN"}};if(Xd(e.value))return{unaryFilter:{field:ac(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Wp(e.value))return{unaryFilter:{field:ac(e.field),op:"IS_NOT_NAN"}};if(Xd(e.value))return{unaryFilter:{field:ac(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ac(e.field),op:mw(e.op),value:e.value}}}(n):n instanceof Ei?function(e){const t=e.getFilters().map(s=>tv(s));return 1===t.length?t[0]:{compositeFilter:{op:_w(e.op),filters:t}}}(n):ln()}function yw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Mu(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ng(e)),e=uc(n.get(t),e);return ng(e)}function uc(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const f=n.charAt(a);switch(f){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=f}}return t}function ng(n){return n+"\x01\x01"}function lc(n){const e=n.length;if(En(e>=2),2===e)return En("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),_r.emptyPath();const t=e-2,s=[];let a="";for(let f=0;f<e;){const v=n.indexOf("\x01",f);switch((v<0||v>t)&&ln(),n.charAt(v+1)){case"\x01":const M=n.substring(f,v);let B;0===a.length?B=M:(a+=M,B=a,a=""),s.push(B);break;case"\x10":a+=n.substring(f,v),a+="\0";break;case"\x11":a+=n.substring(f,v+1);break;default:ln()}f=v+2}return new _r(s)}const rv=["userId","batchId"];function np(n,e){return[n,Mu(e)]}function iv(n,e,t){return[n,Mu(e),t]}const vw={},ww=["prefixPath","collectionGroup","readTime","documentId"],qm=["prefixPath","collectionGroup","documentId"],Ew=["collectionGroup","readTime","prefixPath","documentId"],Iw=["canonicalId","targetId"],rg=["targetId","path"],Zm=["path","targetId"],ig=["collectionId","parent"],KE=["indexId","uid"],Km=["uid","sequenceNumber"],YE=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sv=["indexId","uid","orderedDocumentKey"],ov=["userId","collectionPath","documentId"],av=["userId","collectionPath","largestBatchId"],uv=["userId","collectionGroup","largestBatchId"],sg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Kc=[...sg,"documentOverlays"],rp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ip=rp,sp=[...ip,"indexConfiguration","indexState","indexEntries"];class Ym extends mu{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function va(n,e){const t=zt(n);return ea.M(t.re,e)}class og{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const f=this.mutations[a];f.key.isEqual(e.key)&&ih(f,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=qf(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=qf(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Om();return this.mutations.forEach(a=>{const f=e.get(a.key),v=f.overlayedDocument;let M=this.applyToLocalView(v,f.mutatedFields);M=t.has(a.key)?null:M;const B=Rm(v,M);null!==B&&s.set(a.key,B),v.isValidDocument()||v.convertToNoDocument(Mn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yr())}isEqual(e){return this.batchId===e.batchId&&Lu(this.mutations,e.mutations,(t,s)=>Xp(t,s))&&Lu(this.baseMutations,e.baseMutations,(t,s)=>Xp(t,s))}}class Qm{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){En(e.mutations.length===s.length);let a=qy;const f=e.mutations;for(let v=0;v<f.length;v++)a=a.insert(f[v].key,s[v].version);return new Qm(e,t,s,a)}}class Xm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yl{constructor(e,t,s,a,f=Mn.min(),v=Mn.min(),M=Io.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=M}withSequenceNumber(e){return new yl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new yl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new yl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class lv{constructor(e){this.oe=e}}function cv(n,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ag(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:oh(a=n.oe,(f=e).key),fields:f.data.value.mapValue.fields,updateTime:Zc(a,f.version.toTimestamp()),createTime:Zc(a,f.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:ah(e.version)};else{if(!e.isUnknownDocument())return ln();s.unknownDocument={path:t.path.toArray(),version:ah(e.version)}}var a,f;return s}function ag(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ah(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function uh(n){const e=new qi(n.seconds,n.nanoseconds);return Mn.fromTimestamp(e)}function lh(n,e){const t=(e.baseMutations||[]).map(f=>Wm(n.oe,f));for(let f=0;f<e.mutations.length-1;++f)f+1<e.mutations.length&&void 0!==e.mutations[f+1].transform&&(e.mutations[f].updateTransforms=e.mutations[f+1].transform.fieldTransforms,e.mutations.splice(f+1,1),++f);const s=e.mutations.map(f=>Wm(n.oe,f)),a=qi.fromMillis(e.localWriteTimeMs);return new og(e.batchId,a,t,s)}function op(n){const e=uh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?uh(n.lastLimboFreeSnapshotVersion):Mn.min();let s;var a;return void 0!==n.query.documents?(En(1===(a=n.query).documents.length),s=ju(Bu(Hm(a.documents[0])))):s=ju(Xy(n.query)),new yl(s,n.targetId,0,n.lastListenSequenceNumber,e,t,Io.fromBase64String(n.resumeToken))}function dv(n,e){const t=ah(e.snapshotVersion),s=ah(e.lastLimboFreeSnapshotVersion);let a;a=Zp(e.target)?eg(n.oe,e.target):tg(n.oe,e.target);const f=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:nh(e.target),readTime:t,resumeToken:f,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function ug(n){const e=Xy({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?$f(e,e.limit,"L"):e}function ap(n,e){return new Xm(e.largestBatchId,Wm(n.oe,e.overlayMutation))}function hv(n,e){const t=e.path.lastSegment();return[n,Mu(e.path.popLast()),t]}function lg(n,e,t,s){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ah(s.readTime),documentKey:Mu(s.documentKey.path),largestBatchId:s.largestBatchId}}class Cw{getBundleMetadata(e,t){return fv(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:uh(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return fv(e).put({bundleId:(s=t).id,createTime:ah(ao(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return pv(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:ug(a.bundledQuery),readTime:uh(a.readTime)};var a})}saveNamedQuery(e,t){return pv(e).put({name:(s=t).name,readTime:ah(ao(s.readTime)),bundledQuery:s.bundledQuery});var s}}function fv(n){return va(n,"bundles")}function pv(n){return va(n,"namedQueries")}class cg{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new cg(e,t.uid||"")}getOverlay(e,t){return up(e).get(hv(this.userId,t)).next(s=>s?ap(this.Tt,s):null)}getOverlays(e,t){const s=sc();return ze.forEach(t,a=>this.getOverlay(e,a).next(f=>{null!==f&&s.set(a,f)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((f,v)=>{const M=new Xm(t,v);a.push(this.ce(e,M))}),ze.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(v=>a.add(Mu(v.getCollectionPath())));const f=[];return a.forEach(v=>{const M=IDBKeyRange.bound([this.userId,v,s],[this.userId,v,s+1],!1,!0);f.push(up(e).Y("collectionPathOverlayIndex",M))}),ze.waitFor(f)}getOverlaysForCollection(e,t,s){const a=sc(),f=Mu(t),v=IDBKeyRange.bound([this.userId,f,s],[this.userId,f,Number.POSITIVE_INFINITY],!0);return up(e).W("collectionPathOverlayIndex",v).next(M=>{for(const B of M){const W=ap(this.Tt,B);a.set(W.getKey(),W)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const f=sc();let v;const M=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return up(e).X({index:"collectionGroupOverlayIndex",range:M},(B,W,ee)=>{const le=ap(this.Tt,W);f.size()<a||le.largestBatchId===v?(f.set(le.getKey(),le),v=le.largestBatchId):ee.done()}).next(()=>f)}ce(e,t){return up(e).put(function(s,a,f){const[v,M,B]=hv(a,f.mutation.key);return{userId:a,collectionPath:M,documentId:B,collectionGroup:f.mutation.key.getCollectionGroup(),largestBatchId:f.largestBatchId,overlayMutation:sf(s.oe,f.mutation)}}(this.Tt,this.userId,t))}}function up(n){return va(n,"documentOverlays")}class ch{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(ri(e.integerValue));else if("doubleValue"in e){const s=ri(e.doubleValue);isNaN(s)?this.fe(t,13):(this.fe(t,15),Ed(s)?t.de(0):t.de(s))}else if("timestampValue"in e){const s=e.timestampValue;this.fe(t,20),"string"==typeof s?t._e(s):(t._e(`${s.seconds||""}`),t.de(s.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(Ju(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.fe(t,45),t.de(s.latitude||0),t.de(s.longitude||0)}else"mapValue"in e?Zh(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):ln()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const s=e.fields||{};this.fe(t,55);for(const a of Object.keys(s))this.we(a,t),this.he(s[a],t)}Ie(e,t){const s=e.values||[];this.fe(t,50);for(const a of s)this.he(a,t)}ye(e,t){this.fe(t,37),E.fromName(e).path.forEach(s=>{this.fe(t,60),this.Te(s,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function bw(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Jm(n){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const f=bw(255&t[a]);if(s+=f,8!==f)break}return s}(n);return Math.ceil(e/8)}ch.Ee=new ch;class gv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Re(s.value),s=t.next();this.be()}ve(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Pe(s.value),s=t.next();this.Ve()}Se(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Re(s);else if(s<2048)this.Re(960|s>>>6),this.Re(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Re(480|s>>>12),this.Re(128|63&s>>>6),this.Re(128|63&s);else{const a=t.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}this.be()}De(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Pe(s);else if(s<2048)this.Pe(960|s>>>6),this.Pe(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s);else{const a=t.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}this.Ve()}Ce(e){const t=this.xe(e),s=Jm(t);this.Ne(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}ke(e){const t=this.xe(e),s=Jm(t);this.Ne(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Oe(){this.Me(255),this.Me(255)}Fe(){this.$e(255),this.$e(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(a){const f=new DataView(new ArrayBuffer(8));return f.setFloat64(0,a,!1),new Uint8Array(f.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.$e(0),this.$e(255)):255===t?(this.$e(255),this.$e(0)):this.$e(e)}be(){this.Me(0),this.Me(1)}Ve(){this.$e(0),this.$e(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}$e(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class Tw{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.Oe()}}class XE{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Fe()}}class uf{constructor(){this.Le=new gv,this.qe=new Tw(this.Le),this.Ue=new XE(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class cc{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new cc(this.indexId,this.documentKey,this.arrayValue,s)}}function Hu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Dw(n.arrayValue,e.arrayValue),0!==t?t:(t=Dw(n.directionalValue,e.directionalValue),0!==t?t:E.comparator(n.documentKey,e.documentKey)))}function Dw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const s=n[t]-e[t];if(0!==s)return s}return n.length-e.length}class dg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const s=t;s.isInequality()?this.ze=s:this.je.push(s)}}We(e){En(e.collectionGroup===this.collectionId);const t=_(e);if(void 0!==t&&!this.He(t))return!1;const s=S(e);let a=0,f=0;for(;a<s.length&&this.He(s[a]);++a);if(a===s.length)return!0;if(void 0!==this.ze){const v=s[a];if(!this.Je(this.ze,v)||!this.Ye(this.Qe[f++],v))return!1;++a}for(;a<s.length;++a)if(f>=this.Qe.length||!this.Ye(this.Qe[f++],s[a]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function mv(n){var e,t;if(En(n instanceof Lr||n instanceof Ei),n instanceof Lr){if(n instanceof et){const a=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(f=>Lr.create(n.field,"==",f)))||[];return Ei.create(a,"or")}return n}const s=n.filters.map(a=>mv(a));return Ei.create(s,n.op)}function Sw(n){if(0===n.getFilters().length)return[];const e=dh(mv(n));return En(jl(e)),lp(e)||e_(e)?[e]:e.getFilters()}function lp(n){return n instanceof Lr}function e_(n){return n instanceof Ei&&Xh(n)}function jl(n){return lp(n)||e_(n)||function(e){if(e instanceof Ei&&Qh(e)){for(const t of e.getFilters())if(!lp(t)&&!e_(t))return!1;return!0}return!1}(n)}function dh(n){if(En(n instanceof Lr||n instanceof Ei),n instanceof Lr)return n;if(1===n.filters.length)return dh(n.filters[0]);const e=n.filters.map(s=>dh(s));let t=Ei.create(e,n.op);return t=hh(t),jl(t)?t:(En(t instanceof Ei),En(bd(t)),En(t.filters.length>1),t.filters.reduce((s,a)=>$a(s,a)))}function $a(n,e){let t;return En(n instanceof Lr||n instanceof Ei),En(e instanceof Lr||e instanceof Ei),t=n instanceof Lr?e instanceof Lr?Ei.create([n,e],"and"):xd(n,e):e instanceof Lr?xd(e,n):function(s,a){if(En(s.filters.length>0&&a.filters.length>0),bd(s)&&bd(a))return g(s,a.getFilters());const f=Qh(s)?s:a,v=Qh(s)?a:s,M=f.filters.map(B=>$a(B,v));return Ei.create(M,"or")}(n,e),hh(t)}function xd(n,e){if(bd(e))return g(e,n.getFilters());{const t=e.filters.map(s=>$a(n,s));return Ei.create(t,"or")}}function hh(n){if(En(n instanceof Lr||n instanceof Ei),n instanceof Lr)return n;const e=n.getFilters();if(1===e.length)return hh(e[0]);if(h(n))return n;const t=e.map(a=>hh(a)),s=[];return t.forEach(a=>{a instanceof Lr?s.push(a):a instanceof Ei&&(a.op===n.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:Ei.create(s,n.op)}class vl{constructor(){this.Ze=new cp}addToCollectionParentIndex(e,t){return this.Ze.add(t),ze.resolve()}getCollectionParents(e,t){return ze.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return ze.resolve()}deleteFieldIndex(e,t){return ze.resolve()}getDocumentsMatchingTarget(e,t){return ze.resolve(null)}getIndexType(e,t){return ze.resolve(0)}getFieldIndexes(e,t){return ze.resolve([])}getNextCollectionGroupToUpdate(e){return ze.resolve(null)}getMinOffset(e,t){return ze.resolve(In.min())}getMinOffsetFromCollectionGroup(e,t){return ze.resolve(In.min())}updateCollectionGroup(e,t,s){return ze.resolve()}updateIndexEntries(e,t){return ze.resolve()}}class cp{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new jr(_r.comparator),f=!a.has(s);return this.index[t]=a.add(s),f}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new jr(_r.comparator)).toArray()}}const Yc=new Uint8Array(0);class lf{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new cp,this.tn=new Ad(s=>nh(s),(s,a)=>jf(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const f={collectionId:s,parent:Mu(a)};return fh(e).put(f)}return ze.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[Lc(t),""],!1,!0);return fh(e).W(a).next(f=>{for(const v of f){if(v.collectionId!==t)break;s.push(lc(v.parent))}return s})}addFieldIndex(e,t){const s=Qc(e),a={indexId:(v=t).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(M=>[M.fieldPath.canonicalString(),M.kind])};var v;delete a.indexId;const f=s.add(a);if(t.indexState){const v=hc(e);return f.next(M=>{v.put(lg(M,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return f.next()}deleteFieldIndex(e,t){const s=Qc(e),a=hc(e),f=dc(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>f.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=dc(e);let a=!0;const f=new Map;return ze.forEach(this.en(t),v=>this.nn(e,v).next(M=>{a&&(a=!!M),f.set(v,M)})).next(()=>{if(a){let v=yr();const M=[];return ze.forEach(f,(B,W)=>{var ee;xt("IndexedDbIndexManager",`Using index ${ee=B,`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map(er=>`${er.fieldPath}:${er.kind}`).join(",")}`} to execute ${nh(t)}`);const le=function(er,Ar){const Pr=_(Ar);if(void 0===Pr)return null;for(const Or of Kp(er,Pr.fieldPath))switch(Or.op){case"array-contains-any":return Or.value.arrayValue.values||[];case"array-contains":return[Or.value]}return null}(W,B),Oe=function(er,Ar){const Pr=new Map;for(const Or of S(Ar))for(const bo of Kp(er,Or.fieldPath))switch(bo.op){case"==":case"in":Pr.set(Or.fieldPath.canonicalString(),bo.value);break;case"not-in":case"!=":return Pr.set(Or.fieldPath.canonicalString(),bo.value),Array.from(Pr.values())}return null}(W,B),Qe=function(er,Ar){const Pr=[];let Or=!0;for(const bo of S(Ar)){const nl=0===bo.kind?xy(er,bo.fieldPath,er.startAt):My(er,bo.fieldPath,er.startAt);Pr.push(nl.value),Or&&(Or=nl.inclusive)}return new Vl(Pr,Or)}(W,B),dt=function(er,Ar){const Pr=[];let Or=!0;for(const bo of S(Ar)){const nl=0===bo.kind?My(er,bo.fieldPath,er.endAt):xy(er,bo.fieldPath,er.endAt);Pr.push(nl.value),Or&&(Or=nl.inclusive)}return new Vl(Pr,Or)}(W,B),jt=this.sn(B,W,Qe),Jt=this.sn(B,W,dt),Hr=this.rn(B,W,Oe),ci=this.on(B.indexId,le,jt,Qe.inclusive,Jt,dt.inclusive,Hr);return ze.forEach(ci,er=>s.J(er,t.limit).next(Ar=>{Ar.forEach(Pr=>{const Or=E.fromSegments(Pr.documentKey);v.has(Or)||(v=v.add(Or),M.push(Or))})}))}).next(()=>M)}return ze.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:Sw(Ei.create(e.filters,"and")).map(s=>th(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,s,a,f,v,M){const B=(null!=t?t.length:1)*Math.max(s.length,f.length),W=B/(null!=t?t.length:1),ee=[];for(let le=0;le<B;++le){const Oe=t?this.un(t[le/W]):Yc,Qe=this.cn(e,Oe,s[le%W],a),dt=this.an(e,Oe,f[le%W],v),jt=M.map(Jt=>this.cn(e,Oe,Jt,!0));ee.push(...this.createRange(Qe,dt,jt))}return ee}cn(e,t,s,a){const f=new cc(e,E.empty(),t,s);return a?f:f.Ge()}an(e,t,s,a){const f=new cc(e,E.empty(),t,s);return a?f.Ge():f}nn(e,t){const s=new dg(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(f=>{let v=null;for(const M of f)s.We(M)&&(!v||M.fields.length>v.fields.length)&&(v=M);return v})}getIndexType(e,t){let s=2;const a=this.en(t);return ze.forEach(a,f=>this.nn(e,f).next(v=>{v?0!==s&&v.fields.length<function(M){let B=new jr(Cs.comparator),W=!1;for(const ee of M.filters)for(const le of ee.getFlattenedFilters())le.field.isKeyField()||("array-contains"===le.op||"array-contains-any"===le.op?W=!0:B=B.add(le.field));for(const ee of M.orderBy)ee.field.isKeyField()||(B=B.add(ee.field));return B.size+(W?1:0)}(f)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}hn(e,t){const s=new uf;for(const a of S(e)){const f=t.data.field(a.fieldPath);if(null==f)return null;const v=s.Ke(a.kind);ch.Ee.ae(f,v)}return s.Be()}un(e){const t=new uf;return ch.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const s=new uf;return ch.Ee.ae(Ll(this.databaseId,t),s.Ke(function(a){const f=S(a);return 0===f.length?0:f[f.length-1].kind}(e))),s.Be()}rn(e,t,s){if(null===s)return[];let a=[];a.push(new uf);let f=0;for(const v of S(e)){const M=s[f++];for(const B of a)if(this.fn(t,v.fieldPath)&&qh(M))a=this.dn(a,v,M);else{const W=B.Ke(v.kind);ch.Ee.ae(M,W)}}return this._n(a)}sn(e,t,s){return this.rn(e,t,s.position)}_n(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Be();return t}dn(e,t,s){const a=[...e],f=[];for(const v of s.arrayValue.values||[])for(const M of a){const B=new uf;B.seed(M.Be()),ch.Ee.ae(v,B.Ke(t.kind)),f.push(B)}return f}fn(e,t){return!!e.filters.find(s=>s instanceof Lr&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Qc(e),a=hc(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(f=>{const v=[];return ze.forEach(f,M=>a.get([M.indexId,this.uid]).next(B=>{v.push(function(W,ee){const le=ee?new tt(ee.sequenceNumber,new In(uh(ee.readTime),new E(lc(ee.documentKey)),ee.largestBatchId)):tt.empty(),Oe=W.fields.map(([Qe,dt])=>new ie(Cs.fromServerFormat(Qe),dt));return new p(W.indexId,W.collectionGroup,Oe,le)}(M,B))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const f=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==f?f:Hn(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Qc(e),f=hc(e);return this.wn(e).next(v=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(M=>ze.forEach(M,B=>f.put(lg(B.indexId,this.user,v,s)))))}updateIndexEntries(e,t){const s=new Map;return ze.forEach(t,(a,f)=>{const v=s.get(a.collectionGroup);return(v?ze.resolve(v):this.getFieldIndexes(e,a.collectionGroup)).next(M=>(s.set(a.collectionGroup,M),ze.forEach(M,B=>this.mn(e,a,B).next(W=>{const ee=this.gn(f,B);return W.isEqual(ee)?ze.resolve():this.yn(e,f,B,W,ee)}))))})}pn(e,t,s,a){return dc(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.ln(s,t.key),documentKey:t.key.path.toArray()})}In(e,t,s,a){return dc(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.ln(s,t.key),t.key.path.toArray()])}mn(e,t,s){const a=dc(e);let f=new jr(Hu);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.ln(s,t)])},(v,M)=>{f=f.add(new cc(s.indexId,t,M.arrayValue,M.directionalValue))}).next(()=>f)}gn(e,t){let s=new jr(Hu);const a=this.hn(t,e);if(null==a)return s;const f=_(t);if(null!=f){const v=e.data.field(f.fieldPath);if(qh(v))for(const M of v.arrayValue.values||[])s=s.add(new cc(t.indexId,e.key,this.un(M),a))}else s=s.add(new cc(t.indexId,e.key,Yc,a));return s}yn(e,t,s,a,f){xt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const v=[];return function(M,B,W,ee,le){const Oe=M.getIterator(),Qe=B.getIterator();let dt=zc(Oe),jt=zc(Qe);for(;dt||jt;){let Jt=!1,Hr=!1;if(dt&&jt){const ci=W(dt,jt);ci<0?Hr=!0:ci>0&&(Jt=!0)}else null!=dt?Hr=!0:Jt=!0;Jt?(ee(jt),jt=zc(Qe)):Hr?(le(dt),dt=zc(Oe)):(dt=zc(Oe),jt=zc(Qe))}}(a,f,Hu,M=>{v.push(this.pn(e,t,s,M))},M=>{v.push(this.In(e,t,s,M))}),ze.waitFor(v)}wn(e){let t=1;return hc(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,f)=>{f.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((v,M)=>Hu(v,M)).filter((v,M,B)=>!M||0!==Hu(v,B[M-1]));const a=[];a.push(e);for(const v of s){const M=Hu(v,e),B=Hu(v,t);if(0===M)a[0]=e.Ge();else if(M>0&&B<0)a.push(v),a.push(v.Ge());else if(B>0)break}a.push(t);const f=[];for(let v=0;v<a.length;v+=2){if(this.Tn(a[v],a[v+1]))return[];f.push(IDBKeyRange.bound([a[v].indexId,this.uid,a[v].arrayValue,a[v].directionalValue,Yc,[]],[a[v+1].indexId,this.uid,a[v+1].arrayValue,a[v+1].directionalValue,Yc,[]]))}return f}Tn(e,t){return Hu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ph)}getMinOffset(e,t){return ze.mapArray(this.en(t),s=>this.nn(e,s).next(a=>a||ln())).next(ph)}}function fh(n){return va(n,"collectionParents")}function dc(n){return va(n,"indexEntries")}function Qc(n){return va(n,"indexConfiguration")}function hc(n){return va(n,"indexState")}function ph(n){En(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<n.length;s++){const a=n[s].indexState.offset;Rn(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new In(e.readTime,e.documentKey,t)}const gh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wa{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new wa(e,wa.DEFAULT_COLLECTION_PERCENTILE,wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function t_(n,e,t){const s=n.store("mutations"),a=n.store("documentMutations"),f=[],v=IDBKeyRange.only(t.batchId);let M=0;const B=s.X({range:v},(ee,le,Oe)=>(M++,Oe.delete()));f.push(B.next(()=>{En(1===M)}));const W=[];for(const ee of t.mutations){const le=iv(e,ee.key.path,t.batchId);f.push(a.delete(le)),W.push(ee.key)}return ze.waitFor(f).next(()=>W)}function dp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ln();e=n.noDocument}return JSON.stringify(e).length}wa.DEFAULT_COLLECTION_PERCENTILE=10,wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wa.DEFAULT=new wa(41943040,wa.DEFAULT_COLLECTION_PERCENTILE,wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wa.DISABLED=new wa(-1,0,0);class hp{constructor(e,t,s,a){this.userId=e,this.Tt=t,this.indexManager=s,this.referenceDelegate=a,this.En={}}static ue(e,t,s,a){En(""!==e.uid);const f=e.isAuthenticated()?e.uid:"";return new hp(f,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xc(e).X({index:"userMutationsIndex",range:s},(a,f,v)=>{t=!1,v.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const f=mh(e),v=Xc(e);return v.add({}).next(M=>{En("number"==typeof M);const B=new og(M,t,s,a),W=function(Oe,Qe,dt){const jt=dt.baseMutations.map(Hr=>sf(Oe.oe,Hr)),Jt=dt.mutations.map(Hr=>sf(Oe.oe,Hr));return{userId:Qe,batchId:dt.batchId,localWriteTimeMs:dt.localWriteTime.toMillis(),baseMutations:jt,mutations:Jt}}(this.Tt,this.userId,B),ee=[];let le=new jr((Oe,Qe)=>Hn(Oe.canonicalString(),Qe.canonicalString()));for(const Oe of a){const Qe=iv(this.userId,Oe.key.path,M);le=le.add(Oe.key.path.popLast()),ee.push(v.put(W)),ee.push(f.put(Qe,vw))}return le.forEach(Oe=>{ee.push(this.indexManager.addToCollectionParentIndex(e,Oe))}),e.addOnCommittedListener(()=>{this.En[M]=B.keys()}),ze.waitFor(ee).next(()=>B)})}lookupMutationBatch(e,t){return Xc(e).get(t).next(s=>s?(En(s.userId===this.userId),lh(this.Tt,s)):null)}An(e,t){return this.En[t]?ze.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.En[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let f=null;return Xc(e).X({index:"userMutationsIndex",range:a},(v,M,B)=>{M.userId===this.userId&&(En(M.batchId>=s),f=lh(this.Tt,M)),B.done()}).next(()=>f)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Xc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,f,v)=>{s=f.batchId,v.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xc(e).W("userMutationsIndex",t).next(s=>s.map(a=>lh(this.Tt,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=np(this.userId,t.path),a=IDBKeyRange.lowerBound(s),f=[];return mh(e).X({range:a},(v,M,B)=>{const[W,ee,le]=v,Oe=lc(ee);if(W===this.userId&&t.path.isEqual(Oe))return Xc(e).get(le).next(Qe=>{if(!Qe)throw ln();En(Qe.userId===this.userId),f.push(lh(this.Tt,Qe))});B.done()}).next(()=>f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new jr(Hn);const a=[];return t.forEach(f=>{const v=np(this.userId,f.path),M=IDBKeyRange.lowerBound(v),B=mh(e).X({range:M},(W,ee,le)=>{const[Oe,Qe,dt]=W,jt=lc(Qe);Oe===this.userId&&f.path.isEqual(jt)?s=s.add(dt):le.done()});a.push(B)}),ze.waitFor(a).next(()=>this.Rn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,f=np(this.userId,s),v=IDBKeyRange.lowerBound(f);let M=new jr(Hn);return mh(e).X({range:v},(B,W,ee)=>{const[le,Oe,Qe]=B,dt=lc(Oe);le===this.userId&&s.isPrefixOf(dt)?dt.length===a&&(M=M.add(Qe)):ee.done()}).next(()=>this.Rn(e,M))}Rn(e,t){const s=[],a=[];return t.forEach(f=>{a.push(Xc(e).get(f).next(v=>{if(null===v)throw ln();En(v.userId===this.userId),s.push(lh(this.Tt,v))}))}),ze.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return t_(e.re,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.bn(t.batchId)}),ze.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}bn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ze.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return mh(e).X({range:s},(f,v,M)=>{if(f[0]===this.userId){const B=lc(f[1]);a.push(B)}else M.done()}).next(()=>{En(0===a.length)})})}containsKey(e,t){return n_(e,this.userId,t)}vn(e){return r_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function n_(n,e,t){const s=np(e,t.path),a=s[1],f=IDBKeyRange.lowerBound(s);let v=!1;return mh(n).X({range:f,Z:!0},(M,B,W)=>{const[ee,le,Oe]=M;ee===e&&le===a&&(v=!0),W.done()}).next(()=>v)}function Xc(n){return va(n,"mutations")}function mh(n){return va(n,"documentMutations")}function r_(n){return va(n,"mutationQueues")}class Md{constructor(e){this.Pn=e}next(){return this.Pn+=2,this.Pn}static Vn(){return new Md(0)}static Sn(){return new Md(-1)}}class _v{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const s=new Md(t.highestTargetId);return t.highestTargetId=s.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>Mn.fromTimestamp(new qi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Dn(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Cn(e,a)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(s=>(s.targetCount+=1,this.Nn(t,s),this.Cn(e,s))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>cf(e).delete(t.targetId)).next(()=>this.Dn(e)).next(s=>(En(s.targetCount>0),s.targetCount-=1,this.Cn(e,s)))}removeTargets(e,t,s){let a=0;const f=[];return cf(e).X((v,M)=>{const B=op(M);B.sequenceNumber<=t&&null===s.get(B.targetId)&&(a++,f.push(this.removeTargetData(e,B)))}).next(()=>ze.waitFor(f)).next(()=>a)}forEachTarget(e,t){return cf(e).X((s,a)=>{const f=op(a);t(f)})}Dn(e){return yv(e).get("targetGlobalKey").next(t=>(En(null!==t),t))}Cn(e,t){return yv(e).put("targetGlobalKey",t)}xn(e,t){return cf(e).put(dv(this.Tt,t))}Nn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=nh(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let f=null;return cf(e).X({range:a,index:"queryTargetsIndex"},(v,M,B)=>{const W=op(M);jf(t,W.target)&&(f=W,B.done())}).next(()=>f)}addMatchingKeys(e,t,s){const a=[],f=Jc(e);return t.forEach(v=>{const M=Mu(v.path);a.push(f.put({targetId:s,path:M})),a.push(this.referenceDelegate.addReference(e,s,v))}),ze.waitFor(a)}removeMatchingKeys(e,t,s){const a=Jc(e);return ze.forEach(t,f=>{const v=Mu(f.path);return ze.waitFor([a.delete([s,v]),this.referenceDelegate.removeReference(e,s,f)])})}removeMatchingKeysForTargetId(e,t){const s=Jc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Jc(e);let f=yr();return a.X({range:s,Z:!0},(v,M,B)=>{const W=lc(v[1]),ee=new E(W);f=f.add(ee)}).next(()=>f)}containsKey(e,t){const s=Mu(t.path),a=IDBKeyRange.bound([s],[Lc(s)],!1,!0);let f=0;return Jc(e).X({index:"documentTargetsIndex",Z:!0,range:a},([v,M],B,W)=>{0!==v&&(f++,W.done())}).next(()=>f>0)}ie(e,t){return cf(e).get(t).next(s=>s?op(s):null)}}function cf(n){return va(n,"targets")}function yv(n){return va(n,"targetGlobal")}function Jc(n){return va(n,"targetDocuments")}function vv([n,e],[t,s]){const a=Hn(n,t);return 0===a?Hn(e,s):a}class wv{constructor(e){this.kn=e,this.buffer=new jr(vv),this.On=0}Mn(){return++this.On}Fn(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();vv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class i_{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.$n=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.$n&&(this.$n.cancel(),this.$n=null)}get started(){return null!==this.$n}Bn(e){var t=this;xt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.$n=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,se.Z)(function*(){t.$n=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Uu(s)?xt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield _u(s)}yield t.Bn(3e5)}))}}class s_{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return ze.resolve(Vu.at);const s=new wv(t);return this.Ln.forEachTarget(e,a=>s.Fn(a.sequenceNumber)).next(()=>this.Ln.Un(e,a=>s.Fn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Ln.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xt("LruGarbageCollector","Garbage collection skipped; disabled"),ze.resolve(gh)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(xt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gh):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let s,a,f,v,M,B,W;const ee=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(le=>(le>this.params.maximumSequenceNumbersToCollect?(xt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${le}`),a=this.params.maximumSequenceNumbersToCollect):a=le,v=Date.now(),this.nthSequenceNumber(e,a))).next(le=>(s=le,M=Date.now(),this.removeTargets(e,s,t))).next(le=>(f=le,B=Date.now(),this.removeOrphanedDocuments(e,s))).next(le=>(W=Date.now(),nc()<=no.in.DEBUG&&xt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-ee}ms\n\tDetermined least recently used ${a} in `+(M-v)+`ms\n\tRemoved ${f} targets in `+(B-M)+`ms\n\tRemoved ${le} documents in `+(W-B)+`ms\nTotal Duration: ${W-ee}ms`),ze.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:f,documentsRemoved:le})))}}class Aw{constructor(e,t){this.db=e,this.garbageCollector=new s_(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Gn(e){let t=0;return this.Un(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(s,a)=>t(a))}addReference(e,t,s){return _h(e,s)}removeReference(e,t,s){return _h(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return _h(e,t)}jn(e,t){return function(s,a){let f=!1;return r_(s).tt(v=>n_(s,v,a).next(M=>(M&&(f=!0),ze.resolve(!M)))).next(()=>f)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let f=0;return this.Qn(e,(v,M)=>{if(M<=t){const B=this.jn(e,v).next(W=>{if(!W)return f++,s.getEntry(e,v).next(()=>(s.removeEntry(v,Mn.min()),Jc(e).delete([0,Mu(v.path)])))});a.push(B)}}).next(()=>ze.waitFor(a)).next(()=>s.apply(e)).next(()=>f)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return _h(e,t)}Qn(e,t){const s=Jc(e);let a,f=Vu.at;return s.X({index:"documentTargetsIndex"},([v,M],{path:B,sequenceNumber:W})=>{0===v?(f!==Vu.at&&t(new E(lc(a)),f),f=W,a=B):f=Vu.at}).next(()=>{f!==Vu.at&&t(new E(lc(a)),f)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _h(n,e){return Jc(n).put((s=n.currentSequenceNumber,{targetId:0,path:Mu(e.path),sequenceNumber:s}));var s}class fp{constructor(){this.changes=new Ad(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?ze.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class o_{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Rd(e).put(s)}removeEntry(e,t,s){return Rd(e).delete(function(a,f){const v=a.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],ag(f),v[v.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.zn(e,s)))}getEntry(e,t){let s=Fs.newInvalidDocument(t);return Rd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(df(t))},(a,f)=>{s=this.Wn(t,f)}).next(()=>s)}Hn(e,t){let s={size:0,document:Fs.newInvalidDocument(t)};return Rd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(df(t))},(a,f)=>{s={document:this.Wn(t,f),size:dp(f)}}).next(()=>s)}getEntries(e,t){let s=$u();return this.Jn(e,t,(a,f)=>{const v=this.Wn(a,f);s=s.insert(a,v)}).next(()=>s)}Yn(e,t){let s=$u(),a=new jn(E.comparator);return this.Jn(e,t,(f,v)=>{const M=this.Wn(f,v);s=s.insert(f,M),a=a.insert(f,dp(v))}).next(()=>({documents:s,Zn:a}))}Jn(e,t,s){if(t.isEmpty())return ze.resolve();let a=new jr(a_);t.forEach(B=>a=a.add(B));const f=IDBKeyRange.bound(df(a.first()),df(a.last())),v=a.getIterator();let M=v.getNext();return Rd(e).X({index:"documentKeyIndex",range:f},(B,W,ee)=>{const le=E.fromSegments([...W.prefixPath,W.collectionGroup,W.documentId]);for(;M&&a_(M,le)<0;)s(M,null),M=v.getNext();M&&M.isEqual(le)&&(s(M,W),M=v.hasNext()?v.getNext():null),M?ee.j(df(M)):ee.done()}).next(()=>{for(;M;)s(M,null),M=v.hasNext()?v.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const f=t.path,v=[f.popLast().toArray(),f.lastSegment(),ag(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],M=[f.popLast().toArray(),f.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rd(e).W(IDBKeyRange.bound(v,M,!0)).next(B=>{let W=$u();for(const ee of B){const le=this.Wn(E.fromSegments(ee.prefixPath.concat(ee.collectionGroup,ee.documentId)),ee);le.isFoundDocument()&&(Gf(t,le)||a.has(le.key))&&(W=W.insert(le.key,le))}return W})}getAllFromCollectionGroup(e,t,s,a){let f=$u();const v=fg(t,s),M=fg(t,In.max());return Rd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,M,!0)},(B,W,ee)=>{const le=this.Wn(E.fromSegments(W.prefixPath.concat(W.collectionGroup,W.documentId)),W);f=f.insert(le.key,le),f.size===a&&ee.done()}).next(()=>f)}newChangeBuffer(e){return new hg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return pp(e).get("remoteDocumentGlobalKey").next(t=>(En(!!t),t))}zn(e,t){return pp(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const s=function QE(n,e){let t;if(e.document)t=Qy(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=E.fromSegments(e.noDocument.path),a=uh(e.noDocument.readTime);t=Fs.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ln();{const s=E.fromSegments(e.unknownDocument.path),a=uh(e.unknownDocument.version);t=Fs.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new qi(s[0],s[1]);return Mn.fromTimestamp(a)}(e.readTime)),t}(this.Tt,t);if(!s.isNoDocument()||!s.version.isEqual(Mn.min()))return s}return Fs.newInvalidDocument(e)}}function Ev(n){return new o_(n)}class hg extends fp{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new Ad(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new jr((f,v)=>Hn(f.canonicalString(),v.canonicalString()));return this.changes.forEach((f,v)=>{const M=this.ts.get(f);if(t.push(this.Xn.removeEntry(e,f,M.readTime)),v.isValidDocument()){const B=cv(this.Xn.Tt,v);a=a.add(f.path.popLast());const W=dp(B);s+=W-M.size,t.push(this.Xn.addEntry(e,f,B))}else if(s-=M.size,this.trackRemovals){const B=cv(this.Xn.Tt,v.convertToNoDocument(Mn.min()));t.push(this.Xn.addEntry(e,f,B))}}),a.forEach(f=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,f))}),t.push(this.Xn.updateMetadata(e,s)),ze.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(s=>(this.ts.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:s,Zn:a})=>(a.forEach((f,v)=>{this.ts.set(f,{size:v,readTime:s.get(f).readTime})}),s))}}function pp(n){return va(n,"remoteDocumentGlobal")}function Rd(n){return va(n,"remoteDocumentsV14")}function df(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fg(n,e){const t=e.documentKey.path.toArray();return[n,ag(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function a_(n,e){const t=n.path.toArray(),s=e.path.toArray();let a=0;for(let f=0;f<t.length-2&&f<s.length-2;++f)if(a=Hn(t[f],s[f]),a)return a;return a=Hn(t.length,s.length),a||(a=Hn(t[t.length-2],s[s.length-2]),a||Hn(t[t.length-1],s[s.length-1]))}class Iv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pg{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&qf(s.mutation,a,xu.empty(),qi.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,yr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=yr()){const a=sc();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(f=>{let v=Kf();return f.forEach((M,B)=>{v=v.insert(M,B.overlayedDocument)}),v}))}getOverlayedDocuments(e,t){const s=sc();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,yr()))}populateOverlays(e,t,s){const a=[];return s.forEach(f=>{t.has(f)||a.push(f)}),this.documentOverlayCache.getOverlays(e,a).next(f=>{f.forEach((v,M)=>{t.set(v,M)})})}computeViews(e,t,s,a){let f=$u();const v=Yf(),M=Yf();return t.forEach((B,W)=>{const ee=s.get(W.key);a.has(W.key)&&(void 0===ee||ee.mutation instanceof Sd)?f=f.insert(W.key,W):void 0!==ee?(v.set(W.key,ee.mutation.getFieldMask()),qf(ee.mutation,W,ee.mutation.getFieldMask(),qi.now())):v.set(W.key,xu.empty())}),this.recalculateAndSaveOverlays(e,f).next(B=>(B.forEach((W,ee)=>v.set(W,ee)),t.forEach((W,ee)=>{var le;return M.set(W,new Iv(ee,null!==(le=v.get(W))&&void 0!==le?le:null))}),M))}recalculateAndSaveOverlays(e,t){const s=Yf();let a=new jn((v,M)=>v-M),f=yr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(v=>{for(const M of v)M.keys().forEach(B=>{const W=t.get(B);if(null===W)return;let ee=s.get(B)||xu.empty();ee=M.applyToLocalView(W,ee),s.set(B,ee);const le=(a.get(M.batchId)||yr()).add(B);a=a.insert(M.batchId,le)})}).next(()=>{const v=[],M=a.getReverseIterator();for(;M.hasNext();){const B=M.getNext(),W=B.key,ee=B.value,le=Om();ee.forEach(Oe=>{if(!f.has(Oe)){const Qe=Rm(t.get(Oe),s.get(Oe));null!==Qe&&le.set(Oe,Qe),f=f.add(Oe)}}),v.push(this.documentOverlayCache.saveOverlays(e,W,le))}return ze.waitFor(v)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return E.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ny(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(f=>{const v=a-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-f.size):ze.resolve(sc());let M=-1,B=f;return v.next(W=>ze.forEach(W,(ee,le)=>(M<le.largestBatchId&&(M=le.largestBatchId),f.get(ee)?ze.resolve():this.remoteDocumentCache.getEntry(e,ee).next(Oe=>{B=B.insert(ee,Oe)}))).next(()=>this.populateOverlays(e,W,f)).next(()=>this.computeViews(e,B,W,yr())).next(ee=>({batchId:M,changes:Wy(ee)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new E(t)).next(s=>{let a=Kf();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let f=Kf();return this.indexManager.getCollectionParents(e,a).next(v=>ze.forEach(v,M=>{const B=(W=t,ee=M.child(a),new Wc(ee,null,W.explicitOrderBy.slice(),W.filters.slice(),W.limit,W.limitType,W.startAt,W.endAt));var W,ee;return this.getDocumentsMatchingCollectionQuery(e,B,s).next(W=>{W.forEach((ee,le)=>{f=f.insert(ee,le)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(f=>(a=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(f=>{a.forEach((M,B)=>{const W=B.getKey();null===f.get(W)&&(f=f.insert(W,Fs.newInvalidDocument(W)))});let v=Kf();return f.forEach((M,B)=>{const W=a.get(M);void 0!==W&&qf(W.mutation,B,xu.empty(),qi.now()),Gf(t,B)&&(v=v.insert(M,B))}),v})}}class Cv{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return ze.resolve(this.es.get(t))}saveBundleMetadata(e,t){var s;return this.es.set(t.id,{id:(s=t).id,version:s.version,createTime:ao(s.createTime)}),ze.resolve()}getNamedQuery(e,t){return ze.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(s=t).name,query:ug(s.bundledQuery),readTime:ao(s.readTime)}),ze.resolve();var s}}class xw{constructor(){this.overlays=new jn(E.comparator),this.ss=new Map}getOverlay(e,t){return ze.resolve(this.overlays.get(t))}getOverlays(e,t){const s=sc();return ze.forEach(t,a=>this.getOverlay(e,a).next(f=>{null!==f&&s.set(a,f)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,f)=>{this.ce(e,t,f)}),ze.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ss.get(s);return void 0!==a&&(a.forEach(f=>this.overlays=this.overlays.remove(f)),this.ss.delete(s)),ze.resolve()}getOverlaysForCollection(e,t,s){const a=sc(),f=t.length+1,v=new E(t.child("")),M=this.overlays.getIteratorFrom(v);for(;M.hasNext();){const B=M.getNext().value,W=B.getKey();if(!t.isPrefixOf(W.path))break;W.path.length===f&&B.largestBatchId>s&&a.set(B.getKey(),B)}return ze.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let f=new jn((W,ee)=>W-ee);const v=this.overlays.getIterator();for(;v.hasNext();){const W=v.getNext().value;if(W.getKey().getCollectionGroup()===t&&W.largestBatchId>s){let ee=f.get(W.largestBatchId);null===ee&&(ee=sc(),f=f.insert(W.largestBatchId,ee)),ee.set(W.getKey(),W)}}const M=sc(),B=f.getIterator();for(;B.hasNext()&&(B.getNext().value.forEach((W,ee)=>M.set(W,ee)),!(M.size()>=a)););return ze.resolve(M)}ce(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const v=this.ss.get(a.largestBatchId).delete(s.key);this.ss.set(a.largestBatchId,v)}this.overlays=this.overlays.insert(s.key,new Xm(t,s));let f=this.ss.get(t);void 0===f&&(f=yr(),this.ss.set(t,f)),this.ss.set(t,f.add(s.key))}}class gg{constructor(){this.rs=new jr(Ea.os),this.us=new jr(Ea.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const s=new Ea(e,t);this.rs=this.rs.add(s),this.us=this.us.add(s)}hs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ls(new Ea(e,t))}fs(e,t){e.forEach(s=>this.removeReference(s,t))}ds(e){const t=new E(new _r([])),s=new Ea(t,e),a=new Ea(t,e+1),f=[];return this.us.forEachInRange([s,a],v=>{this.ls(v),f.push(v.key)}),f}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new E(new _r([])),s=new Ea(t,e),a=new Ea(t,e+1);let f=yr();return this.us.forEachInRange([s,a],v=>{f=f.add(v.key)}),f}containsKey(e){const t=new Ea(e,0),s=this.rs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Ea{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return E.comparator(e.key,t.key)||Hn(e.gs,t.gs)}static cs(e,t){return Hn(e.gs,t.gs)||E.comparator(e.key,t.key)}}class bv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new jr(Ea.os)}checkEmpty(e){return ze.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const f=this.ys;this.ys++;const v=new og(f,t,s,a);this.mutationQueue.push(v);for(const M of a)this.ps=this.ps.add(new Ea(M.key,f)),this.indexManager.addToCollectionParentIndex(e,M.key.path.popLast());return ze.resolve(v)}lookupMutationBatch(e,t){return ze.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.Ts(t+1),f=a<0?0:a;return ze.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return ze.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return ze.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ea(t,0),a=new Ea(t,Number.POSITIVE_INFINITY),f=[];return this.ps.forEachInRange([s,a],v=>{const M=this.Is(v.gs);f.push(M)}),ze.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new jr(Hn);return t.forEach(a=>{const f=new Ea(a,0),v=new Ea(a,Number.POSITIVE_INFINITY);this.ps.forEachInRange([f,v],M=>{s=s.add(M.gs)})}),ze.resolve(this.Es(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let f=s;E.isDocumentKey(f)||(f=f.child(""));const v=new Ea(new E(f),0);let M=new jr(Hn);return this.ps.forEachWhile(B=>{const W=B.key.path;return!!s.isPrefixOf(W)&&(W.length===a&&(M=M.add(B.gs)),!0)},v),ze.resolve(this.Es(M))}Es(e){const t=[];return e.forEach(s=>{const a=this.Is(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){En(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let s=this.ps;return ze.forEach(t.mutations,a=>{const f=new Ea(a.key,t.batchId);return s=s.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.ps=s})}bn(e){}containsKey(e,t){const s=new Ea(t,0),a=this.ps.firstAfterOrEqual(s);return ze.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return ze.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Tv{constructor(e){this.Rs=e,this.docs=new jn(E.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),f=a?a.size:0,v=this.Rs(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:v}),this.size+=v-f,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ze.resolve(s?s.document.mutableCopy():Fs.newInvalidDocument(t))}getEntries(e,t){let s=$u();return t.forEach(a=>{const f=this.docs.get(a);s=s.insert(a,f?f.document.mutableCopy():Fs.newInvalidDocument(a))}),ze.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let f=$u();const v=t.path,M=new E(v.child("")),B=this.docs.getIteratorFrom(M);for(;B.hasNext();){const{key:W,value:{document:ee}}=B.getNext();if(!v.isPrefixOf(W.path))break;W.path.length>v.length+1||Rn(Yt(ee),s)<=0||(a.has(ee.key)||Gf(t,ee))&&(f=f.insert(ee.key,ee.mutableCopy()))}return ze.resolve(f)}getAllFromCollectionGroup(e,t,s,a){ln()}bs(e,t){return ze.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Mw(this)}getSize(e){return ze.resolve(this.size)}}class Mw extends fp{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Xn.addEntry(e,a)):this.Xn.removeEntry(s)}),ze.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class Rw{constructor(e){this.persistence=e,this.vs=new Ad(t=>nh(t),jf),this.lastRemoteSnapshotVersion=Mn.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new gg,this.targetCount=0,this.Ss=Md.Vn()}forEachTarget(e,t){return this.vs.forEach((s,a)=>t(a)),ze.resolve()}getLastRemoteSnapshotVersion(e){return ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ze.resolve(this.Ps)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),ze.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ps&&(this.Ps=t),ze.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new Md(t),this.highestTargetId=t),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,ze.resolve()}updateTargetData(e,t){return this.xn(t),ze.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,ze.resolve()}removeTargets(e,t,s){let a=0;const f=[];return this.vs.forEach((v,M)=>{M.sequenceNumber<=t&&null===s.get(M.targetId)&&(this.vs.delete(v),f.push(this.removeMatchingKeysForTargetId(e,M.targetId)),a++)}),ze.waitFor(f).next(()=>a)}getTargetCount(e){return ze.resolve(this.targetCount)}getTargetData(e,t){const s=this.vs.get(t)||null;return ze.resolve(s)}addMatchingKeys(e,t,s){return this.Vs.hs(t,s),ze.resolve()}removeMatchingKeys(e,t,s){this.Vs.fs(t,s);const a=this.persistence.referenceDelegate,f=[];return a&&t.forEach(v=>{f.push(a.markPotentiallyOrphaned(e,v))}),ze.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),ze.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Vs.ws(t);return ze.resolve(s)}containsKey(e,t){return ze.resolve(this.Vs.containsKey(t))}}class Dv{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new Vu(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new Rw(this),this.indexManager=new vl,this.remoteDocumentCache=new Tv(s=>this.referenceDelegate.ks(s)),this.Tt=new lv(t),this.Os=new Cv(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ds[e.toKey()];return s||(s=new bv(t,this.referenceDelegate),this.Ds[e.toKey()]=s),s}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(e,t,s){xt("MemoryPersistence","Starting transaction:",e);const a=new Sv(this.Cs.next());return this.referenceDelegate.Ms(),s(a).next(f=>this.referenceDelegate.Fs(a).next(()=>f)).toPromise().then(f=>(a.raiseOnCommittedEvent(),f))}$s(e,t){return ze.or(Object.values(this.Ds).map(s=>()=>s.containsKey(e,t)))}}class Sv extends mu{constructor(e){super(),this.currentSequenceNumber=e}}class yh{constructor(e){this.persistence=e,this.Bs=new gg,this.Ls=null}static qs(e){return new yh(e)}get Us(){if(this.Ls)return this.Ls;throw ln()}addReference(e,t,s){return this.Bs.addReference(s,t),this.Us.delete(s.toString()),ze.resolve()}removeReference(e,t,s){return this.Bs.removeReference(s,t),this.Us.add(s.toString()),ze.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),ze.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(a=>this.Us.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(f=>this.Us.add(f.toString()))}).next(()=>s.removeTargetData(e,t))}Ms(){this.Ls=new Set}Fs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ze.forEach(this.Us,s=>{const a=E.fromPath(s);return this.Ks(e,a).next(f=>{f||t.removeEntry(a,Mn.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(s=>{s?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return ze.or([()=>ze.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.$s(e,t)])}}class Av{constructor(e){this.Tt=e}$(e,t,s,a){const f=new iu("createOrUpgrade",t);var M;s<1&&a>=1&&(e.createObjectStore("owner"),(M=e).createObjectStore("mutationQueues",{keyPath:"userId"}),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rv,{unique:!0}),M.createObjectStore("documentMutations"),u_(e),function(M){M.createObjectStore("remoteDocuments")}(e));let v=ze.resolve();return s<3&&a>=3&&(0!==s&&(function(M){M.deleteObjectStore("targetDocuments"),M.deleteObjectStore("targets"),M.deleteObjectStore("targetGlobal")}(e),u_(e)),v=v.next(()=>function(M){const B=M.store("targetGlobal"),W={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mn.min().toTimestamp(),targetCount:0};return B.put("targetGlobalKey",W)}(f))),s<4&&a>=4&&(0!==s&&(v=v.next(()=>function(M,B){return B.store("mutations").W().next(W=>{M.deleteObjectStore("mutations"),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rv,{unique:!0});const ee=B.store("mutations"),le=W.map(Oe=>ee.put(Oe));return ze.waitFor(le)})}(e,f))),v=v.next(()=>{!function(M){M.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(v=v.next(()=>this.Gs(f))),s<6&&a>=6&&(v=v.next(()=>(function(M){M.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(f)))),s<7&&a>=7&&(v=v.next(()=>this.js(f))),s<8&&a>=8&&(v=v.next(()=>this.zs(e,f))),s<9&&a>=9&&(v=v.next(()=>{!function(M){M.objectStoreNames.contains("remoteDocumentChanges")&&M.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(v=v.next(()=>this.Ws(f))),s<11&&a>=11&&(v=v.next(()=>{(function(M){M.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(M){M.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(v=v.next(()=>{!function(M){const B=M.createObjectStore("documentOverlays",{keyPath:ov});B.createIndex("collectionPathOverlayIndex",av,{unique:!1}),B.createIndex("collectionGroupOverlayIndex",uv,{unique:!1})}(e)})),s<13&&a>=13&&(v=v.next(()=>function(M){const B=M.createObjectStore("remoteDocumentsV14",{keyPath:ww});B.createIndex("documentKeyIndex",qm),B.createIndex("collectionGroupIndex",Ew)}(e)).next(()=>this.Hs(e,f)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(v=v.next(()=>this.Js(e,f))),s<15&&a>=15&&(v=v.next(()=>function(M){M.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),M.createObjectStore("indexState",{keyPath:KE}).createIndex("sequenceNumberIndex",Km,{unique:!1}),M.createObjectStore("indexEntries",{keyPath:YE}).createIndex("documentKeyIndex",sv,{unique:!1})}(e))),v}Qs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=dp(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Gs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(a=>ze.forEach(a,f=>{const v=IDBKeyRange.bound([f.userId,-1],[f.userId,f.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",v).next(M=>ze.forEach(M,B=>{En(B.userId===f.userId);const W=lh(this.Tt,B);return t_(e,f.userId,W).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const f=[];return s.X((v,M)=>{const B=new _r(v),W=[0,Mu(B)];f.push(t.get(W).next(ee=>ee?ze.resolve():t.put({targetId:0,path:Mu(B),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>ze.waitFor(f))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:ig});const s=t.store("collectionParents"),a=new cp,f=v=>{if(a.add(v)){const M=v.lastSegment(),B=v.popLast();return s.put({collectionId:M,parent:Mu(B)})}};return t.store("remoteDocuments").X({Z:!0},(v,M)=>{const B=new _r(v);return f(B.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([v,M,B],W)=>{const ee=lc(M);return f(ee.popLast())}))}Ws(e){const t=e.store("targets");return t.X((s,a)=>{const f=op(a),v=dv(this.Tt,f);return t.put(v)})}Hs(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((f,v)=>{const M=t.store("remoteDocumentsV14"),B=(W=v,W.document?new E(_r.fromString(W.document.name).popFirst(5)):W.noDocument?E.fromSegments(W.noDocument.path):W.unknownDocument?E.fromSegments(W.unknownDocument.path):ln()).path.toArray();var W;const ee={prefixPath:B.slice(0,B.length-2),collectionGroup:B[B.length-2],documentId:B[B.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};a.push(M.put(ee))}).next(()=>ze.waitFor(a))}Js(e,t){const s=t.store("mutations"),a=Ev(this.Tt),f=new Dv(yh.qs,this.Tt.oe);return s.W().next(v=>{const M=new Map;return v.forEach(B=>{var W;let ee=null!==(W=M.get(B.userId))&&void 0!==W?W:yr();lh(this.Tt,B).keys().forEach(le=>ee=ee.add(le)),M.set(B.userId,ee)}),ze.forEach(M,(B,W)=>{const ee=new li(W),le=cg.ue(this.Tt,ee),Oe=f.getIndexManager(ee),Qe=hp.ue(ee,this.Tt,Oe,f.referenceDelegate);return new pg(a,Qe,le,Oe).recalculateAndSaveOverlaysForDocumentKeys(new Ym(t,Vu.at),B).next()})})}}function u_(n){n.createObjectStore("targetDocuments",{keyPath:rg}).createIndex("documentTargetsIndex",Zm,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Iw,{unique:!0}),n.createObjectStore("targetGlobal")}const mg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _g{constructor(e,t,s,a,f,v,M,B,W,ee,le=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Ys=f,this.window=v,this.document=M,this.Zs=W,this.Xs=ee,this.ti=le,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=Oe=>Promise.resolve(),!_g.C())throw new bt(Ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Aw(this,a),this.oi=t+"main",this.Tt=new lv(B),this.ui=new ea(this.oi,this.ti,new Av(this.Tt)),this.Ns=new _v(this.referenceDelegate,this.Tt),this.remoteDocumentCache=Ev(this.Tt),this.Os=new Cw,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===ee&&Is("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new bt(Ye.FAILED_PRECONDITION,mg);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Vu(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var s=(0,se.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,se.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,se.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(Uu(e))return xt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return hf(e).get("owner").next(t=>ze.resolve(this.yi(t)))}pi(e){return gp(e).delete(this.clientId)}Ii(){var e=this;return(0,se.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=va(s,"clientMetadata");return a.W().next(f=>{const v=e.Ei(f,18e5),M=f.filter(B=>-1===v.indexOf(B));return ze.forEach(M,B=>a.delete(B.clientId)).next(()=>M)})}).catch(()=>[]);if(e.ci)for(const s of t)e.ci.removeItem(e.Ai(s.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?ze.resolve(!0):hf(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new bt(Ye.FAILED_PRECONDITION,mg);return!1}}return!(!this.networkEnabled||!this.inForeground)||gp(e).W().next(s=>void 0===this.Ei(s,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&xt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,se.Z)(function*(){e.xs=!1,e.bi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.Pi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Ym(t,Vu.at);return e.mi(s).next(()=>e.pi(s))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(s=>this.Ti(s.updateTimeMs,t)&&!this.Ri(s.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>gp(e).W().next(t=>this.Ei(t,18e5).map(s=>s.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return hp.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lf(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return cg.ue(this.Tt,e)}getBundleCache(){return this.Os}runTransaction(e,t,s){xt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",f=15===(v=this.ti)?sp:14===v?ip:13===v?rp:12===v?Kc:11===v?sg:void ln();var v;let M;return this.ui.runTransaction(e,a,f,B=>(M=new Ym(B,this.Cs?this.Cs.next():Vu.at),"readwrite-primary"===t?this._i(M).next(W=>!!W||this.wi(M)).next(W=>{if(!W)throw Is(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new bt(Ye.FAILED_PRECONDITION,ks);return s(M)}).next(W=>this.gi(M).next(()=>W)):this.Di(M).next(()=>s(M)))).then(B=>(M.raiseOnCommittedEvent(),B))}Di(e){return hf(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new bt(Ye.FAILED_PRECONDITION,mg)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hf(e).put("owner",t)}static C(){return ea.C()}mi(e){const t=hf(e);return t.get("owner").next(s=>this.yi(s)?(xt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ze.resolve())}Ti(e,t){const s=Date.now();return!(e<s-t||e>s&&(Is(`Detected an update time that is in the future: ${e} > ${s}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.bi(),(0,Ke.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}Pi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const s=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return xt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Is("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}bi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Is("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hf(n){return va(n,"owner")}function gp(n){return va(n,"clientMetadata")}function yg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class vg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Ci=s,this.xi=a}static Ni(e,t){let s=yr(),a=yr();for(const f of t.docChanges)switch(f.type){case 0:s=s.add(f.doc.key);break;case 1:a=a.add(f.doc.key)}return new vg(e,t.fromCache,s,a)}}class mp{constructor(){this.ki=!1}initialize(e,t){this.Oi=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Mi(e,t).next(f=>f||this.Fi(e,t,a,s)).next(f=>f||this.$i(e,t))}Mi(e,t){if(Ry(t))return ze.resolve(null);let s=ju(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=$f(t,null,"F"),s=ju(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(f=>{const v=yr(...f);return this.Oi.getDocuments(e,v).next(M=>this.indexManager.getMinOffset(e,s).next(B=>{const W=this.Bi(t,M);return this.Li(t,W,v,B.readTime)?this.Mi(e,$f(t,null,"F")):this.qi(e,W,t,B)}))})))}Fi(e,t,s,a){return Ry(t)||a.isEqual(Mn.min())?this.$i(e,t):this.Oi.getDocuments(e,s).next(f=>{const v=this.Bi(t,f);return this.Li(t,v,s,a)?this.$i(e,t):(nc()<=no.in.DEBUG&&xt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Dm(t)),this.qi(e,v,t,Ut(a,-1)))})}Bi(e,t){let s=new jr(Py(e));return t.forEach((a,f)=>{Gf(e,f)&&(s=s.add(f))}),s}Li(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const f="F"===e.limitType?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(a)>0)}$i(e,t){return nc()<=no.in.DEBUG&&xt("QueryEngine","Using full collection scan to execute query:",Dm(t)),this.Oi.getDocumentsMatchingQuery(e,t,In.min())}qi(e,t,s,a){return this.Oi.getDocumentsMatchingQuery(e,s,a).next(f=>(t.forEach(v=>{f=f.insert(v.key,v)}),f))}}class Nd{constructor(e,t,s,a){this.persistence=e,this.Ui=t,this.Tt=a,this.Ki=new jn(Hn),this.Gi=new Ad(f=>nh(f),jf),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.Os=e.getBundleCache(),this.zi(s)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pg(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function xv(n,e,t,s){return new Nd(n,e,t,s)}function Mv(n,e){return _p.apply(this,arguments)}function _p(){return _p=(0,se.Z)(function*(n,e){const t=zt(n);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(f=>(a=f,t.zi(e),t.mutationQueue.getAllMutationBatches(s))).next(f=>{const v=[],M=[];let B=yr();for(const W of a){v.push(W.batchId);for(const ee of W.mutations)B=B.add(ee.key)}for(const W of f){M.push(W.batchId);for(const ee of W.mutations)B=B.add(ee.key)}return t.localDocuments.getDocuments(s,B).next(W=>({Wi:W,removedBatchIds:v,addedBatchIds:M}))})})}),_p.apply(this,arguments)}function vh(n,e){const t=zt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),f=t.ji.newChangeBuffer({trackRemovals:!0});return function(v,M,B,W){const ee=B.batch,le=ee.keys();let Oe=ze.resolve();return le.forEach(Qe=>{Oe=Oe.next(()=>W.getEntry(M,Qe)).next(dt=>{const jt=B.docVersions.get(Qe);En(null!==jt),dt.version.compareTo(jt)<0&&(ee.applyToRemoteDocument(dt,B),dt.isValidDocument()&&(dt.setReadTime(B.commitVersion),W.addEntry(dt)))})}),Oe.next(()=>v.mutationQueue.removeMutationBatch(M,ee))}(t,s,e,f).next(()=>f.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(v){let M=yr();for(let B=0;B<v.mutationResults.length;++B)v.mutationResults[B].transformResults.length>0&&(M=M.add(v.batch.mutations[B].key));return M}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function wg(n){const e=zt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function Nw(n,e){const t=zt(n),s=e.snapshotVersion;let a=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const v=t.ji.newChangeBuffer({trackRemovals:!0});a=t.Ki;const M=[];e.targetChanges.forEach((ee,le)=>{const Oe=a.get(le);if(!Oe)return;M.push(t.Ns.removeMatchingKeys(f,ee.removedDocuments,le).next(()=>t.Ns.addMatchingKeys(f,ee.addedDocuments,le)));let Qe=Oe.withSequenceNumber(f.currentSequenceNumber);var dt,jt,Jt;e.targetMismatches.has(le)?Qe=Qe.withResumeToken(Io.EMPTY_BYTE_STRING,Mn.min()).withLastLimboFreeSnapshotVersion(Mn.min()):ee.resumeToken.approximateByteSize()>0&&(Qe=Qe.withResumeToken(ee.resumeToken,s)),a=a.insert(le,Qe),jt=Qe,Jt=ee,(0===(dt=Oe).resumeToken.approximateByteSize()||jt.snapshotVersion.toMicroseconds()-dt.snapshotVersion.toMicroseconds()>=3e8||Jt.addedDocuments.size+Jt.modifiedDocuments.size+Jt.removedDocuments.size>0)&&M.push(t.Ns.updateTargetData(f,Qe))});let B=$u(),W=yr();if(e.documentUpdates.forEach(ee=>{e.resolvedLimboDocuments.has(ee)&&M.push(t.persistence.referenceDelegate.updateLimboDocument(f,ee))}),M.push(Eg(f,v,e.documentUpdates).next(ee=>{B=ee.Hi,W=ee.Ji})),!s.isEqual(Mn.min())){const ee=t.Ns.getLastRemoteSnapshotVersion(f).next(le=>t.Ns.setTargetsMetadata(f,f.currentSequenceNumber,s));M.push(ee)}return ze.waitFor(M).next(()=>v.apply(f)).next(()=>t.localDocuments.getLocalViewOfDocuments(f,B,W)).next(()=>B)}).then(f=>(t.Ki=a,f))}function Eg(n,e,t){let s=yr(),a=yr();return t.forEach(f=>s=s.add(f)),e.getEntries(n,s).next(f=>{let v=$u();return t.forEach((M,B)=>{const W=f.get(M);B.isFoundDocument()!==W.isFoundDocument()&&(a=a.add(M)),B.isNoDocument()&&B.version.isEqual(Mn.min())?(e.removeEntry(M,B.readTime),v=v.insert(M,B)):!W.isValidDocument()||B.version.compareTo(W.version)>0||0===B.version.compareTo(W.version)&&W.hasPendingWrites?(e.addEntry(B),v=v.insert(M,B)):xt("LocalStore","Ignoring outdated watch update for ",M,". Current version:",W.version," Watch version:",B.version)}),{Hi:v,Ji:a}})}function JE(n,e){const t=zt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function yp(n,e){const t=zt(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Ns.getTargetData(s,e).next(f=>f?(a=f,ze.resolve(a)):t.Ns.allocateTargetId(s).next(v=>(a=new yl(e,v,0,s.currentSequenceNumber),t.Ns.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ki.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(s.targetId,s),t.Gi.set(e,s.targetId)),s})}function ff(n,e,t){return l_.apply(this,arguments)}function l_(){return l_=(0,se.Z)(function*(n,e,t){const s=zt(n),a=s.Ki.get(e),f=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",f,v=>s.persistence.referenceDelegate.removeTarget(v,a)))}catch(v){if(!Uu(v))throw v;xt("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}s.Ki=s.Ki.remove(e),s.Gi.delete(a.target)}),l_.apply(this,arguments)}function vp(n,e,t){const s=zt(n);let a=Mn.min(),f=yr();return s.persistence.runTransaction("Execute query","readonly",v=>function(M,B,W){const ee=zt(M),le=ee.Gi.get(W);return void 0!==le?ze.resolve(ee.Ki.get(le)):ee.Ns.getTargetData(B,W)}(s,v,ju(e)).next(M=>{if(M)return a=M.lastLimboFreeSnapshotVersion,s.Ns.getMatchingKeysForTargetId(v,M.targetId).next(B=>{f=B})}).next(()=>s.Ui.getDocumentsMatchingQuery(v,e,t?a:Mn.min(),t?f:yr())).next(M=>(c_(s,_l(e),M),{documents:M,Yi:f})))}function Rv(n,e){const t=zt(n),s=zt(t.Ns),a=t.Ki.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",f=>s.ie(f,e).next(v=>v?v.target:null))}function na(n,e){const t=zt(n),s=t.Qi.get(e)||Mn.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.ji.getAllFromCollectionGroup(a,e,Ut(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(c_(t,e,a),a))}function c_(n,e,t){let s=n.Qi.get(e)||Mn.min();t.forEach((a,f)=>{f.readTime.compareTo(s)>0&&(s=f.readTime)}),n.Qi.set(e,s)}function d_(){return d_=(0,se.Z)(function*(n,e,t,s){const a=zt(n);let f=yr(),v=$u();for(const W of t){const ee=e.Zi(W.metadata.name);W.document&&(f=f.add(ee));const le=e.Xi(W);le.setReadTime(e.tr(W.metadata.readTime)),v=v.insert(ee,le)}const M=a.ji.newChangeBuffer({trackRemovals:!0}),B=yield yp(a,(W=s,ju(Bu(_r.fromString(`__bundle__/docs/${W}`)))));var W;return a.persistence.runTransaction("Apply bundle documents","readwrite",W=>Eg(W,M,v).next(ee=>(M.apply(W),ee)).next(ee=>a.Ns.removeMatchingKeysForTargetId(W,B.targetId).next(()=>a.Ns.addMatchingKeys(W,f,B.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(W,ee.Hi,ee.Ji)).next(()=>ee.Hi)))}),d_.apply(this,arguments)}function Nv(n,e){return h_.apply(this,arguments)}function h_(){return h_=(0,se.Z)(function*(n,e,t=yr()){const s=yield yp(n,ju(ug(e.bundledQuery))),a=zt(n);return a.persistence.runTransaction("Save named query","readwrite",f=>{const v=ao(e.readTime);if(s.snapshotVersion.compareTo(v)>=0)return a.Os.saveNamedQuery(f,e);const M=s.withResumeToken(Io.EMPTY_BYTE_STRING,v);return a.Ki=a.Ki.insert(M.targetId,M),a.Ns.updateTargetData(f,M).next(()=>a.Ns.removeMatchingKeysForTargetId(f,s.targetId)).next(()=>a.Ns.addMatchingKeys(f,t,s.targetId)).next(()=>a.Os.saveNamedQuery(f,e))})}),h_.apply(this,arguments)}function f_(n,e){return`firestore_clients_${n}_${e}`}function p_(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Pd(n,e){return`firestore_targets_${n}_${e}`}class Ig{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static er(e,t,s){const a=JSON.parse(s);let f,v="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return v&&a.error&&(v="string"==typeof a.error.message&&"string"==typeof a.error.code,v&&(f=new bt(a.error.code,a.error.message))),v?new Ig(e,t,a.state,f):(Is("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wp{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static er(e,t){const s=JSON.parse(t);let a,f="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return f&&s.error&&(f="string"==typeof s.error.message&&"string"==typeof s.error.code,f&&(a=new bt(s.error.code,s.error.message))),f?new wp(e,s.state,a):(Is("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ep{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,f=nf();for(let v=0;a&&v<s.activeTargetIds.length;++v)a=Ys(s.activeTargetIds[v]),f=f.add(s.activeTargetIds[v]);return a?new Ep(e,f):(Is("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class g_{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new g_(t.clientId,t.onlineState):(Is("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Cg{constructor(){this.activeTargetIds=nf()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pv{constructor(e,t,s,a,f){this.window=e,this.Ys=t,this.persistenceKey=s,this.rr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new jn(Hn),this.started=!1,this.hr=[];const v=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=f,this.lr=f_(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new Cg),this._r=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(M){return`firestore_bundle_loaded_v2_${M}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,se.Z)(function*(){const t=yield e.syncEngine.Si();for(const a of t){if(a===e.rr)continue;const f=e.getItem(f_(e.persistenceKey,a));if(f){const v=Ep.er(a,f);v&&(e.ar=e.ar.insert(v.clientId,v))}}e.pr();const s=e.storage.getItem(e.gr);if(s){const a=e.Ir(s);a&&e.Tr(a)}for(const a of e.hr)e.cr(a);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,s){this.Ar(e,t,s),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Pd(this.persistenceKey,e));if(s){const a=wp.er(e,s);a&&(t=a.state)}}return this.br.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.br.ir(e),this.pr()}isLocalQueryTarget(e){return this.br.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pd(this.persistenceKey,e))}updateQueryState(e,t,s){this.vr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Rr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return xt("SharedClientState","READ",e,t),t}setItem(e,t){xt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){xt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(xt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.lr)return void Is("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,se.Z)(function*(){if(t.started){if(null!==s.key)if(t._r.test(s.key)){if(null==s.newValue){const a=t.Sr(s.key);return t.Dr(a,null)}{const a=t.Cr(s.key,s.newValue);if(a)return t.Dr(a.clientId,a)}}else if(t.wr.test(s.key)){if(null!==s.newValue){const a=t.Nr(s.key,s.newValue);if(a)return t.kr(a)}}else if(t.mr.test(s.key)){if(null!==s.newValue){const a=t.Or(s.key,s.newValue);if(a)return t.Mr(a)}}else if(s.key===t.gr){if(null!==s.newValue){const a=t.Ir(s.newValue);if(a)return t.Tr(a)}}else if(s.key===t.dr){const a=function(f){let v=Vu.at;if(null!=f)try{const M=JSON.parse(f);En("number"==typeof M),v=M}catch(M){Is("SharedClientState","Failed to read sequence number from WebStorage",M)}return v}(s.newValue);a!==Vu.at&&t.sequenceNumberHandler(a)}else if(s.key===t.yr){const a=t.Fr(s.newValue);yield Promise.all(a.map(f=>t.syncEngine.$r(f)))}}else t.hr.push(s)}))}}get br(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.br.nr())}Ar(e,t,s){const a=new Ig(this.currentUser,e,t,s),f=p_(this.persistenceKey,this.currentUser,e);this.setItem(f,a.nr())}Rr(e){const t=p_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,s){const a=Pd(this.persistenceKey,e),f=new wp(e,t,s);this.setItem(a,f.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const s=this.Sr(e);return Ep.er(s,t)}Nr(e,t){const s=this.wr.exec(e),a=Number(s[1]);return Ig.er(new li(void 0!==s[2]?s[2]:null),a,t)}Or(e,t){const s=this.mr.exec(e),a=Number(s[1]);return wp.er(a,t)}Ir(e){return g_.er(e)}Fr(e){return JSON.parse(e)}kr(e){var t=this;return(0,se.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);xt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const s=t?this.ar.insert(e,t):this.ar.remove(e),a=this.Er(this.ar),f=this.Er(s),v=[],M=[];return f.forEach(B=>{a.has(B)||v.push(B)}),a.forEach(B=>{f.has(B)||M.push(B)}),this.syncEngine.qr(v,M).then(()=>{this.ar=s})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=nf();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class bg{constructor(){this.Ur=new Cg,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,s){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Cg,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class m_{Gr(e){}shutdown(){}}class $l{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){xt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){xt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ow={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ov{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}class fc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,s,a,f){const v=this.fo(e,t);xt("RestConnection","Sending: ",v,s);const M={};return this._o(M,a,f),this.wo(e,v,M,s).then(B=>(xt("RestConnection","Received: ",B),B),B=>{throw Os("RestConnection",`${e} failed with error: `,B,"url: ",v,"request:",s),B})}mo(e,t,s,a,f,v){return this.lo(e,t,s,a,f)}_o(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+ya,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,f)=>e[f]=a),s&&s.headers.forEach((a,f)=>e[f]=a)}fo(e,t){return`${this.co}/v1/${t}:${Ow[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,s,a){return new Promise((f,v)=>{const M=new fl;M.setWithCredentials(!0),M.listenOnce(Rl.COMPLETE,()=>{try{switch(M.getLastErrorCode()){case Pu.NO_ERROR:const W=M.getResponseJson();xt("Connection","XHR received:",JSON.stringify(W)),f(W);break;case Pu.TIMEOUT:xt("Connection",'RPC "'+e+'" timed out'),v(new bt(Ye.DEADLINE_EXCEEDED,"Request time out"));break;case Pu.HTTP_ERROR:const ee=M.getStatus();if(xt("Connection",'RPC "'+e+'" failed with status:',ee,"response text:",M.getResponseText()),ee>0){let le=M.getResponseJson();Array.isArray(le)&&(le=le[0]);const Oe=le?.error;if(Oe&&Oe.status&&Oe.message){const Qe=function(dt){const jt=dt.toLowerCase().replace(/_/g,"-");return Object.values(Ye).indexOf(jt)>=0?jt:Ye.UNKNOWN}(Oe.status);v(new bt(Qe,Oe.message))}else v(new bt(Ye.UNKNOWN,"Server responded with status "+M.getStatus()))}else v(new bt(Ye.UNAVAILABLE,"Connection failed."));break;default:ln()}}finally{xt("Connection",'RPC "'+e+'" completed.')}});const B=JSON.stringify(a);M.send(t,"POST",B,s,15)})}yo(e,t,s){const a=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=zd(),v=Gh(),M={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(M.xmlHttpFactory=new nu({})),this._o(M.initMessageHeaders,t,s),M.encodeInitMessageHeaders=!0;const B=a.join("");xt("Connection","Creating WebChannel: "+B,M);const W=f.createWebChannel(B,M);let ee=!1,le=!1;const Oe=new Ov({Yr:dt=>{le?xt("Connection","Not sending because WebChannel is closed:",dt):(ee||(xt("Connection","Opening WebChannel transport."),W.open(),ee=!0),xt("Connection","WebChannel sending:",dt),W.send(dt))},Zr:()=>W.close()}),Qe=(dt,jt,Jt)=>{dt.listen(jt,Hr=>{try{Jt(Hr)}catch(ci){setTimeout(()=>{throw ci},0)}})};return Qe(W,Ou.EventType.OPEN,()=>{le||xt("Connection","WebChannel transport opened.")}),Qe(W,Ou.EventType.CLOSE,()=>{le||(le=!0,xt("Connection","WebChannel transport closed"),Oe.oo())}),Qe(W,Ou.EventType.ERROR,dt=>{le||(le=!0,Os("Connection","WebChannel transport errored:",dt),Oe.oo(new bt(Ye.UNAVAILABLE,"The operation could not be completed")))}),Qe(W,Ou.EventType.MESSAGE,dt=>{var jt;if(!le){const Jt=dt.data[0];En(!!Jt);const ci=Jt.error||(null===(jt=Jt[0])||void 0===jt?void 0:jt.error);if(ci){xt("Connection","WebChannel received error:",ci);const er=ci.status;let Ar=function(Or){const bo=Ls[Or];if(void 0!==bo)return Zf(bo)}(er),Pr=ci.message;void 0===Ar&&(Ar=Ye.INTERNAL,Pr="Unknown error status: "+er+" with message "+ci.message),le=!0,Oe.oo(new bt(Ar,Pr)),W.close()}else xt("Connection","WebChannel received:",Jt),Oe.uo(Jt)}}),Qe(v,md.STAT_EVENT,dt=>{dt.stat===_d.PROXY?xt("Connection","Detected buffering proxy"):dt.stat===_d.NOPROXY&&xt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Oe.ro()},0),Oe}}function wl(){return typeof window<"u"?window:null}function Gu(){return typeof document<"u"?document:null}function pf(n){return new Um(n,!0)}class Tg{constructor(e,t,s=1e3,a=1.5,f=6e4){this.Ys=e,this.timerId=t,this.po=s,this.Io=a,this.To=f,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.Po()),s=Math.max(0,Date.now()-this.Ro),a=Math.max(0,t-s);a>0&&xt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,a,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}class kv{constructor(e,t,s,a,f,v,M,B){this.Ys=e,this.So=s,this.Do=a,this.connection=f,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=M,this.listener=B,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Tg(e,t)}Oo(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Fo()}stop(){var e=this;return(0,se.Z)(function*(){e.Oo()&&(yield e.close(0))})()}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,se.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var s=this;return(0,se.Z)(function*(){s.Uo(),s.Ko(),s.ko.cancel(),s.Co++,4!==e?s.ko.reset():t&&t.code===Ye.RESOURCE_EXHAUSTED?(Is(t.toString()),Is("Using maximum backoff delay to prevent overloading the backend."),s.ko.bo()):t&&t.code===Ye.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Go(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Co===t&&this.jo(s,a)},s=>{e(()=>{const a=new bt(Ye.UNKNOWN,"Fetching auth token failed: "+s.message);return this.zo(a)})})}jo(e,t){const s=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{s(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(a=>{s(()=>this.zo(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Fo(){var e=this;this.state=5,this.ko.vo((0,se.Z)(function*(){e.state=0,e.start()}))}zo(e){return xt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(xt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kw extends kv{constructor(e,t,s,a,f,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,v),this.Tt=f}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function tl(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(B=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===B?1:"REMOVE"===B?2:"CURRENT"===B?3:"RESET"===B?4:ln(),a=e.targetChange.targetIds||[],f=function(B,W){return B.yt?(En(void 0===W||"string"==typeof W),Io.fromBase64String(W||"")):(En(void 0===W||W instanceof Uint8Array),Io.fromUint8Array(W||new Uint8Array))}(n,e.targetChange.resumeToken),v=e.targetChange.cause,M=v&&function(B){const W=void 0===B.code?Ye.UNKNOWN:Zf(B.code);return new bt(W,B.message||"")}(v);t=new Ky(s,a,f,M||null)}else if("documentChange"in e){const s=e.documentChange,a=oc(n,s.document.name),f=ao(s.document.updateTime),v=s.document.createTime?ao(s.document.createTime):Mn.min(),M=new ta({mapValue:{fields:s.document.fields}}),B=Fs.newFoundDocument(a,f,v,M);t=new qc(s.targetIds||[],s.removedTargetIds||[],B.key,B)}else if("documentDelete"in e){const s=e.documentDelete,a=oc(n,s.document),f=s.readTime?ao(s.readTime):Mn.min(),v=Fs.newNoDocument(a,f);t=new qc([],s.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const s=e.documentRemove,a=oc(n,s.document);t=new qc([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return ln();{const s=e.filter,f=new hw(s.count||0);t=new km(s.targetId,f)}}var B;return t}(this.Tt,e),s=function(a){if(!("targetChange"in a))return Mn.min();const f=a.targetChange;return f.targetIds&&f.targetIds.length?Mn.min():f.readTime?ao(f.readTime):Mn.min()}(e);return this.listener.Ho(t,s)}Jo(e){const t={};t.database=tp(this.Tt),t.addTarget=function(a,f){let v;const M=f.target;return v=Zp(M)?{documents:eg(a,M)}:{query:tg(a,M)},v.targetId=f.targetId,f.resumeToken.approximateByteSize()>0?v.resumeToken=Vm(a,f.resumeToken):f.snapshotVersion.compareTo(Mn.min())>0&&(v.readTime=Zc(a,f.snapshotVersion.toTimestamp())),v}(this.Tt,e);const s=function gw(n,e){const t=function(s,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ln()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.qo(t)}Yo(e){const t={};t.database=tp(this.Tt),t.removeTarget=e,this.qo(t)}}class Fw extends kv{constructor(e,t,s,a,f,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,v),this.Tt=f,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(En(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function ZE(n,e){return n&&n.length>0?(En(void 0!==e),n.map(t=>function(s,a){let f=ao(s.updateTime?s.updateTime:a);return f.isEqual(Mn.min())&&(f=ao(a)),new lw(f,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=ao(e.commitTime);return this.listener.eu(s,t)}return En(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=tp(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>sf(this.Tt,s))};this.qo(t)}}class Lw extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.Tt=a,this.iu=!1}ru(){if(this.iu)throw new bt(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,s){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,f])=>this.connection.lo(e,t,s,a,f)).catch(a=>{throw"FirebaseError"===a.name?(a.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new bt(Ye.UNKNOWN,a.toString())})}mo(e,t,s,a){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,v])=>this.connection.mo(e,t,s,f,v,a)).catch(f=>{throw"FirebaseError"===f.name?(f.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new bt(Ye.UNKNOWN,f.toString())})}terminate(){this.iu=!0}}class Uw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Is(t),this.cu=!1):xt("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class Fv{constructor(e,t,s,a,f){var v=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=f,this.yu.Gr(M=>{s.enqueueAndForget((0,se.Z)(function*(){var B;pc(v)&&(xt("RemoteStore","Restarting streams for network reachability change."),yield(B=(0,se.Z)(function*(W){const ee=zt(W);ee.mu.add(4),yield Eh(ee),ee.pu.set("Unknown"),ee.mu.delete(4),yield Ip(ee)}),function(W){return B.apply(this,arguments)})(v))}))}),this.pu=new Uw(s,a)}}function Ip(n){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,se.Z)(function*(n){if(pc(n))for(const e of n.gu)yield e(!0)}),Dg.apply(this,arguments)}function Eh(n){return gf.apply(this,arguments)}function gf(){return gf=(0,se.Z)(function*(n){for(const e of n.gu)yield e(!1)}),gf.apply(this,arguments)}function Sg(n,e){const t=zt(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),Cp(t)?_f(t):Ih(t).Mo()&&Ag(t,e))}function mf(n,e){const t=zt(n),s=Ih(t);t.wu.delete(e),s.Mo()&&xg(t,e),0===t.wu.size&&(s.Mo()?s.Bo():pc(t)&&t.pu.set("Unknown"))}function Ag(n,e){n.Iu.Ft(e.targetId),Ih(n).Jo(e)}function xg(n,e){n.Iu.Ft(e),Ih(n).Yo(e)}function _f(n){n.Iu=new fw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),Ih(n).start(),n.pu.au()}function Cp(n){return pc(n)&&!Ih(n).Oo()&&n.wu.size>0}function pc(n){return 0===zt(n).mu.size}function y_(n){n.Iu=void 0}function Lv(n){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,se.Z)(function*(n){n.wu.forEach((e,t)=>{Ag(n,e)})}),Mg.apply(this,arguments)}function Uv(n,e){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,se.Z)(function*(n,e){y_(n),Cp(n)?(n.pu.fu(e),_f(n)):n.pu.set("Unknown")}),Rg.apply(this,arguments)}function Vv(n,e,t){return v_.apply(this,arguments)}function v_(){return v_=(0,se.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof Ky&&2===e.state&&e.cause)try{yield(s=(0,se.Z)(function*(a,f){const v=f.cause;for(const M of f.targetIds)a.wu.has(M)&&(yield a.remoteSyncer.rejectListen(M,v),a.wu.delete(M),a.Iu.removeTarget(M))}),function(a,f){return s.apply(this,arguments)})(n,e)}catch(s){xt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Ng(n,s)}else if(e instanceof qc?n.Iu.Qt(e):e instanceof km?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(Mn.min()))try{const s=yield wg(n.localStore);t.compareTo(s)>=0&&(yield function(a,f){const v=a.Iu.ee(f);return v.targetChanges.forEach((M,B)=>{if(M.resumeToken.approximateByteSize()>0){const W=a.wu.get(B);W&&a.wu.set(B,W.withResumeToken(M.resumeToken,f))}}),v.targetMismatches.forEach(M=>{const B=a.wu.get(M);if(!B)return;a.wu.set(M,B.withResumeToken(Io.EMPTY_BYTE_STRING,B.snapshotVersion)),xg(a,M);const W=new yl(B.target,M,1,B.sequenceNumber);Ag(a,W)}),a.remoteSyncer.applyRemoteEvent(v)}(n,t))}catch(s){xt("RemoteStore","Failed to raise snapshot:",s),yield Ng(n,s)}var s}),v_.apply(this,arguments)}function Ng(n,e,t){return w_.apply(this,arguments)}function w_(){return w_=(0,se.Z)(function*(n,e,t){if(!Uu(e))throw e;n.mu.add(1),yield Eh(n),n.pu.set("Offline"),t||(t=()=>wg(n.localStore)),n.asyncQueue.enqueueRetryable((0,se.Z)(function*(){xt("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield Ip(n)}))}),w_.apply(this,arguments)}function Bv(n,e){return e().catch(t=>Ng(n,t,e))}function yf(n){return E_.apply(this,arguments)}function E_(){return E_=(0,se.Z)(function*(n){const e=zt(n),t=ed(e);let s=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;Vw(e);)try{const a=yield JE(e.localStore,s);if(null===a){0===e._u.length&&t.Bo();break}s=a.batchId,Bw(e,a)}catch(a){yield Ng(e,a)}jv(e)&&$v(e)}),E_.apply(this,arguments)}function Vw(n){return pc(n)&&n._u.length<10}function Bw(n,e){n._u.push(e);const t=ed(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function jv(n){return pc(n)&&!ed(n).Oo()&&n._u.length>0}function $v(n){ed(n).start()}function jw(n){return I_.apply(this,arguments)}function I_(){return I_=(0,se.Z)(function*(n){ed(n).su()}),I_.apply(this,arguments)}function $w(n){return C_.apply(this,arguments)}function C_(){return C_=(0,se.Z)(function*(n){const e=ed(n);for(const t of n._u)e.tu(t.mutations)}),C_.apply(this,arguments)}function Hw(n,e,t){return b_.apply(this,arguments)}function b_(){return b_=(0,se.Z)(function*(n,e,t){const s=n._u.shift(),a=Qm.from(s,e,t);yield Bv(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield yf(n)}),b_.apply(this,arguments)}function Gw(n,e){return T_.apply(this,arguments)}function T_(){return T_=(0,se.Z)(function*(n,e){var t;e&&ed(n).Xo&&(yield(t=(0,se.Z)(function*(s,a){if(Pm(f=a.code)&&f!==Ye.ABORTED){const v=s._u.shift();ed(s).$o(),yield Bv(s,()=>s.remoteSyncer.rejectFailedWrite(v.batchId,a)),yield yf(s)}var f}),function(s,a){return t.apply(this,arguments)})(n,e)),jv(n)&&$v(n)}),T_.apply(this,arguments)}function D_(n,e){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,se.Z)(function*(n,e){const t=zt(n);t.asyncQueue.verifyOperationInProgress(),xt("RemoteStore","RemoteStore received new credentials");const s=pc(t);t.mu.add(3),yield Eh(t),s&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield Ip(t)}),Pg.apply(this,arguments)}function Og(n,e){return kg.apply(this,arguments)}function kg(){return kg=(0,se.Z)(function*(n,e){const t=zt(n);e?(t.mu.delete(2),yield Ip(t)):e||(t.mu.add(2),yield Eh(t),t.pu.set("Unknown"))}),kg.apply(this,arguments)}function Ih(n){return n.Tu||(n.Tu=function(e,t,s){const a=zt(e);return a.ru(),new kw(t,a.connection,a.authCredentials,a.appCheckCredentials,a.Tt,s)}(n.datastore,n.asyncQueue,{Xr:Lv.bind(null,n),no:Uv.bind(null,n),Ho:Vv.bind(null,n)}),n.gu.push(function(){var e=(0,se.Z)(function*(t){t?(n.Tu.$o(),Cp(n)?_f(n):n.pu.set("Unknown")):(yield n.Tu.stop(),y_(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function ed(n){return n.Eu||(n.Eu=function(e,t,s){const a=zt(e);return a.ru(),new Fw(t,a.connection,a.authCredentials,a.appCheckCredentials,a.Tt,s)}(n.datastore,n.asyncQueue,{Xr:jw.bind(null,n),no:Gw.bind(null,n),nu:$w.bind(null,n),eu:Hw.bind(null,n)}),n.gu.push(function(){var e=(0,se.Z)(function*(t){t?(n.Eu.$o(),yield yf(n)):(yield n.Eu.stop(),n._u.length>0&&(xt("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class Fg{constructor(e,t,s,a,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=f,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,t,s,a,f){const v=Date.now()+s,M=new Fg(e,t,v,a,f);return M.start(s),M}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bt(Ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ch(n,e){if(Is("AsyncQueue",`${e}: ${n}`),Uu(n))return new bt(Ye.UNAVAILABLE,`${e}: ${n}`);throw n}class bh{constructor(e){this.comparator=e?(t,s)=>e(t,s)||E.comparator(t.key,s.key):(t,s)=>E.comparator(t.key,s.key),this.keyedMap=Kf(),this.sortedSet=new jn(this.comparator)}static emptySet(e){return new bh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,f=s.getNext().key;if(!a.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new bh;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class S_{constructor(){this.Au=new jn(E.comparator)}track(e){const t=e.doc.key,s=this.Au.get(t);s?0!==e.type&&3===s.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==s.type?this.Au=this.Au.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Au=this.Au.remove(t):1===e.type&&2===s.type?this.Au=this.Au.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):ln():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,s)=>{e.push(s)}),e}}class Od{constructor(e,t,s,a,f,v,M,B,W){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=f,this.fromCache=v,this.syncStateChanged=M,this.excludesMetadataChanges=B,this.hasCachedResults=W}static fromInitialDocuments(e,t,s,a,f){const v=[];return t.forEach(M=>{v.push({type:0,doc:M})}),new Od(e,t,bh.emptySet(t),v,s,a,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Th{constructor(){this.bu=void 0,this.listeners=[]}}class zw{constructor(){this.queries=new Ad(e=>Tm(e),Hf),this.onlineState="Unknown",this.vu=new Set}}function A_(n,e){return kd.apply(this,arguments)}function kd(){return kd=(0,se.Z)(function*(n,e){const t=zt(n),s=e.query;let a=!1,f=t.queries.get(s);if(f||(a=!0,f=new Th),a)try{f.bu=yield t.onListen(s)}catch(v){const M=Ch(v,`Initialization of query '${Dm(e.query)}' failed`);return void e.onError(M)}t.queries.set(s,f),f.listeners.push(e),e.Pu(t.onlineState),f.bu&&e.Vu(f.bu)&&Lg(t)}),kd.apply(this,arguments)}function Hv(n,e){return bp.apply(this,arguments)}function bp(){return bp=(0,se.Z)(function*(n,e){const t=zt(n),s=e.query;let a=!1;const f=t.queries.get(s);if(f){const v=f.listeners.indexOf(e);v>=0&&(f.listeners.splice(v,1),a=0===f.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),bp.apply(this,arguments)}function eI(n,e){const t=zt(n);let s=!1;for(const a of e){const v=t.queries.get(a.query);if(v){for(const M of v.listeners)M.Vu(a)&&(s=!0);v.bu=a}}s&&Lg(t)}function Gv(n,e,t){const s=zt(n),a=s.queries.get(e);if(a)for(const f of a.listeners)f.onError(t);s.queries.delete(e)}function Lg(n){n.vu.forEach(e=>{e.next()})}class zv{constructor(e,t,s){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=s||{}}Vu(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Od(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.Ou||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=Od.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class Yn{constructor(e,t){this.Mu=e,this.byteLength=t}Fu(){return"metadata"in this.Mu}}class Wv{constructor(e){this.Tt=e}Zi(e){return oc(this.Tt,e)}Xi(e){return e.metadata.exists?Qy(this.Tt,e.document,!1):Fs.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return ao(e)}}class Ww{constructor(e,t,s){this.$u=e,this.localStore=t,this.Tt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=qv(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const s=_r.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,s=new Wv(this.Tt);for(const a of e)if(a.metadata.queries){const f=s.Zi(a.metadata.name);for(const v of a.metadata.queries){const M=(t.get(v)||yr()).add(f);t.set(v,M)}}return t}complete(){var e=this;return(0,se.Z)(function*(){const t=yield function Pw(n,e,t,s){return d_.apply(this,arguments)}(e.localStore,new Wv(e.Tt),e.documents,e.$u.id),s=e.Lu(e.documents);for(const a of e.queries)yield Nv(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function qv(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Dh{constructor(e){this.key=e}}class Zv{constructor(e){this.key=e}}class Tp{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=yr(),this.mutatedKeys=yr(),this.ju=Py(e),this.zu=new bh(this.ju)}get Wu(){return this.Ku}Hu(e,t){const s=t?t.Ju:new S_,a=t?t.zu:this.zu;let f=t?t.mutatedKeys:this.mutatedKeys,v=a,M=!1;const B="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,W="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((ee,le)=>{const Oe=a.get(ee),Qe=Gf(this.query,le)?le:null,dt=!!Oe&&this.mutatedKeys.has(Oe.key),jt=!!Qe&&(Qe.hasLocalMutations||this.mutatedKeys.has(Qe.key)&&Qe.hasCommittedMutations);let Jt=!1;Oe&&Qe?Oe.data.isEqual(Qe.data)?dt!==jt&&(s.track({type:3,doc:Qe}),Jt=!0):this.Yu(Oe,Qe)||(s.track({type:2,doc:Qe}),Jt=!0,(B&&this.ju(Qe,B)>0||W&&this.ju(Qe,W)<0)&&(M=!0)):!Oe&&Qe?(s.track({type:0,doc:Qe}),Jt=!0):Oe&&!Qe&&(s.track({type:1,doc:Oe}),Jt=!0,(B||W)&&(M=!0)),Jt&&(Qe?(v=v.add(Qe),f=jt?f.add(ee):f.delete(ee)):(v=v.delete(ee),f=f.delete(ee)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const ee="F"===this.query.limitType?v.last():v.first();v=v.delete(ee.key),f=f.delete(ee.key),s.track({type:1,doc:ee})}return{zu:v,Ju:s,Li:M,mutatedKeys:f}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const f=e.Ju.Ru();f.sort((W,ee)=>function(le,Oe){const Qe=dt=>{switch(dt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ln()}};return Qe(le)-Qe(Oe)}(W.type,ee.type)||this.ju(W.doc,ee.doc)),this.Zu(s);const v=t?this.Xu():[],M=0===this.Qu.size&&this.current?1:0,B=M!==this.Gu;return this.Gu=M,0!==f.length||B?{snapshot:new Od(this.query,e.zu,a,f,e.mutatedKeys,0===M,B,!1,!!s&&s.resumeToken.approximateByteSize()>0),tc:v}:{tc:v}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new S_,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=yr(),this.zu.forEach(s=>{this.ec(s.key)&&(this.Qu=this.Qu.add(s.key))});const t=[];return e.forEach(s=>{this.Qu.has(s)||t.push(new Zv(s))}),this.Qu.forEach(s=>{e.has(s)||t.push(new Dh(s))}),t}nc(e){this.Ku=e.Yi,this.Qu=yr();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return Od.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class Ug{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Co{constructor(e){this.key=e,this.ic=!1}}class tI{constructor(e,t,s,a,f,v){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=f,this.maxConcurrentLimboResolutions=v,this.rc={},this.oc=new Ad(M=>Tm(M),Hf),this.uc=new Map,this.cc=new Set,this.ac=new jn(E.comparator),this.hc=new Map,this.lc=new gg,this.fc={},this.dc=new Map,this._c=Md.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function Kv(n,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,se.Z)(function*(n,e){const t=Gg(n);let s,a;const f=t.oc.get(e);if(f)s=f.targetId,t.sharedClientState.addLocalQueryTarget(s),a=f.view.sc();else{const v=yield yp(t.localStore,ju(e));t.isPrimaryClient&&Sg(t.remoteStore,v);const M=t.sharedClientState.addLocalQueryTarget(v.targetId);s=v.targetId,a=yield x_(t,e,s,"current"===M,v.resumeToken)}return a}),Vg.apply(this,arguments)}function x_(n,e,t,s,a){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,se.Z)(function*(n,e,t,s,a){n.mc=(le,Oe,Qe)=>{return(dt=(0,se.Z)(function*(jt,Jt,Hr,ci){let er=Jt.view.Hu(Hr);er.Li&&(er=yield vp(jt.localStore,Jt.query,!1).then(({documents:Or})=>Jt.view.Hu(Or,er)));const Ar=ci&&ci.targetChanges.get(Jt.targetId),Pr=Jt.view.applyChanges(er,jt.isPrimaryClient,Ar);return O_(jt,Jt.targetId,Pr.tc),Pr.snapshot}),function(jt,Jt,Hr,ci){return dt.apply(this,arguments)})(n,le,Oe,Qe);var dt};const f=yield vp(n.localStore,e,!0),v=new Tp(e,f.Yi),M=v.Hu(f.documents),B=Jp.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState,a),W=v.applyChanges(M,n.isPrimaryClient,B);O_(n,t,W.tc);const ee=new Ug(e,t,v);return n.oc.set(e,ee),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),W.snapshot}),Bg.apply(this,arguments)}function Yv(n,e){return jg.apply(this,arguments)}function jg(){return jg=(0,se.Z)(function*(n,e){const t=zt(n),s=t.oc.get(e),a=t.uc.get(s.targetId);if(a.length>1)return t.uc.set(s.targetId,a.filter(f=>!Hf(f,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield ff(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),mf(t.remoteStore,s.targetId),Ef(t,s.targetId)}).catch(_u))):(Ef(t,s.targetId),yield ff(t.localStore,s.targetId,!0))}),jg.apply(this,arguments)}function M_(){return M_=(0,se.Z)(function*(n,e,t){const s=j_(n);try{const a=yield function(f,v){const M=zt(f),B=qi.now(),W=v.reduce((Oe,Qe)=>Oe.add(Qe.key),yr());let ee,le;return M.persistence.runTransaction("Locally write mutations","readwrite",Oe=>{let Qe=$u(),dt=yr();return M.ji.getEntries(Oe,W).next(jt=>{Qe=jt,Qe.forEach((Jt,Hr)=>{Hr.isValidDocument()||(dt=dt.add(Jt))})}).next(()=>M.localDocuments.getOverlayedDocuments(Oe,Qe)).next(jt=>{ee=jt;const Jt=[];for(const Hr of v){const ci=Nm(Hr,ee.get(Hr.key).overlayedDocument);null!=ci&&Jt.push(new Sd(Hr.key,ci,qp(ci.value.mapValue),Xs.exists(!0)))}return M.mutationQueue.addMutationBatch(Oe,B,Jt,v)}).next(jt=>{le=jt;const Jt=jt.applyToLocalDocumentSet(ee,dt);return M.documentOverlayCache.saveOverlays(Oe,jt.batchId,Jt)})}).then(()=>({batchId:le.batchId,changes:Wy(ee)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(f,v,M){let B=f.fc[f.currentUser.toKey()];B||(B=new jn(Hn)),B=B.insert(v,M),f.fc[f.currentUser.toKey()]=B}(s,a.batchId,t),yield gc(s,a.changes),yield yf(s.remoteStore)}catch(a){const f=Ch(a,"Failed to persist write");t.reject(f)}}),M_.apply(this,arguments)}function Xv(n,e){return R_.apply(this,arguments)}function R_(){return R_=(0,se.Z)(function*(n,e){const t=zt(n);try{const s=yield Nw(t.localStore,e);e.targetChanges.forEach((a,f)=>{const v=t.hc.get(f);v&&(En(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?v.ic=!0:a.modifiedDocuments.size>0?En(v.ic):a.removedDocuments.size>0&&(En(v.ic),v.ic=!1))}),yield gc(t,s,e)}catch(s){yield _u(s)}}),R_.apply(this,arguments)}function vf(n,e,t){const s=zt(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.oc.forEach((f,v)=>{const M=v.view.Pu(e);M.snapshot&&a.push(M.snapshot)}),function(f,v){const M=zt(f);M.onlineState=v;let B=!1;M.queries.forEach((W,ee)=>{for(const le of ee.listeners)le.Pu(v)&&(B=!0)}),B&&Lg(M)}(s.eventManager,e),a.length&&s.rc.Ho(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function qw(n,e,t){return N_.apply(this,arguments)}function N_(){return N_=(0,se.Z)(function*(n,e,t){const s=zt(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.hc.get(e),f=a&&a.key;if(f){let v=new jn(E.comparator);v=v.insert(f,Fs.newNoDocument(f,Mn.min()));const M=yr().add(f),B=new Qf(Mn.min(),new Map,new jr(Hn),v,M);yield Xv(s,B),s.ac=s.ac.remove(f),s.hc.delete(e),Hg(s)}else yield ff(s.localStore,e,!1).then(()=>Ef(s,e,t)).catch(_u)}),N_.apply(this,arguments)}function Zw(n,e){return wf.apply(this,arguments)}function wf(){return wf=(0,se.Z)(function*(n,e){const t=zt(n),s=e.batch.batchId;try{const a=yield vh(t.localStore,e);Ah(t,s,null),Sh(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield gc(t,a)}catch(a){yield _u(a)}}),wf.apply(this,arguments)}function Jv(n,e,t){return $g.apply(this,arguments)}function $g(){return $g=(0,se.Z)(function*(n,e,t){const s=zt(n);try{const a=yield function(f,v){const M=zt(f);return M.persistence.runTransaction("Reject batch","readwrite-primary",B=>{let W;return M.mutationQueue.lookupMutationBatch(B,v).next(ee=>(En(null!==ee),W=ee.keys(),M.mutationQueue.removeMutationBatch(B,ee))).next(()=>M.mutationQueue.performConsistencyCheck(B)).next(()=>M.documentOverlayCache.removeOverlaysForBatchId(B,W,v)).next(()=>M.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(B,W)).next(()=>M.localDocuments.getDocuments(B,W))})}(s.localStore,e);Ah(s,e,t),Sh(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield gc(s,a)}catch(a){yield _u(a)}}),$g.apply(this,arguments)}function P_(){return P_=(0,se.Z)(function*(n,e){const t=zt(n);pc(t.remoteStore)||xt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(f){const v=zt(f);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",M=>v.mutationQueue.getHighestUnacknowledgedBatchId(M))}(t.localStore);if(-1===s)return void e.resolve();const a=t.dc.get(s)||[];a.push(e),t.dc.set(s,a)}catch(s){const a=Ch(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),P_.apply(this,arguments)}function Sh(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function Ah(n,e,t){const s=zt(n);let a=s.fc[s.currentUser.toKey()];if(a){const f=a.get(e);f&&(t?f.reject(t):f.resolve(),a=a.remove(e)),s.fc[s.currentUser.toKey()]=a}}function Ef(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.uc.get(e))n.oc.delete(s),t&&n.rc.gc(s,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(s=>{n.lc.containsKey(s)||t0(n,s)})}function t0(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(mf(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),Hg(n))}function O_(n,e,t){for(const s of t)s instanceof Dh?(n.lc.addReference(s.key,e),n0(n,s)):s instanceof Zv?(xt("SyncEngine","Document no longer in limbo: "+s.key),n.lc.removeReference(s.key,e),n.lc.containsKey(s.key)||t0(n,s.key)):ln()}function n0(n,e){const t=e.key,s=t.path.canonicalString();n.ac.get(t)||n.cc.has(s)||(xt("SyncEngine","New document in limbo: "+t),n.cc.add(s),Hg(n))}function Hg(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new E(_r.fromString(e)),s=n._c.next();n.hc.set(s,new Co(t)),n.ac=n.ac.insert(t,s),Sg(n.remoteStore,new yl(ju(Bu(t.path)),s,2,Vu.at))}}function gc(n,e,t){return k_.apply(this,arguments)}function k_(){return k_=(0,se.Z)(function*(n,e,t){const s=zt(n),a=[],f=[],v=[];var M;s.oc.isEmpty()||(s.oc.forEach((M,B)=>{v.push(s.mc(B,e,t).then(W=>{if((W||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(B.targetId,W?.fromCache?"not-current":"current"),W){a.push(W);const ee=vg.Ni(B.targetId,W);f.push(ee)}}))}),yield Promise.all(v),s.rc.Ho(a),yield(M=(0,se.Z)(function*(B,W){const ee=zt(B);try{yield ee.persistence.runTransaction("notifyLocalViewChanges","readwrite",le=>ze.forEach(W,Oe=>ze.forEach(Oe.Ci,Qe=>ee.persistence.referenceDelegate.addReference(le,Oe.targetId,Qe)).next(()=>ze.forEach(Oe.xi,Qe=>ee.persistence.referenceDelegate.removeReference(le,Oe.targetId,Qe)))))}catch(le){if(!Uu(le))throw le;xt("LocalStore","Failed to update sequence numbers: "+le)}for(const le of W){const Oe=le.targetId;if(!le.fromCache){const Qe=ee.Ki.get(Oe),jt=Qe.withLastLimboFreeSnapshotVersion(Qe.snapshotVersion);ee.Ki=ee.Ki.insert(Oe,jt)}}}),function(B,W){return M.apply(this,arguments)})(s.localStore,f))}),k_.apply(this,arguments)}function r0(n,e){return F_.apply(this,arguments)}function F_(){return F_=(0,se.Z)(function*(n,e){const t=zt(n);if(!t.currentUser.isEqual(e)){xt("SyncEngine","User change. New user:",e.toKey());const s=yield Mv(t.localStore,e);t.currentUser=e,(a=t).dc.forEach(v=>{v.forEach(M=>{M.reject(new bt(Ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.dc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield gc(t,s.Wi)}var a}),F_.apply(this,arguments)}function Kw(n,e){const t=zt(n),s=t.hc.get(e);if(s&&s.ic)return yr().add(s.key);{let a=yr();const f=t.uc.get(e);if(!f)return a;for(const v of f){const M=t.oc.get(v);a=a.unionWith(M.view.Wu)}return a}}function nI(n,e){return s0.apply(this,arguments)}function s0(){return s0=(0,se.Z)(function*(n,e){const t=zt(n),s=yield vp(t.localStore,e.query,!0),a=e.view.nc(s);return t.isPrimaryClient&&O_(t,e.targetId,a.tc),a}),s0.apply(this,arguments)}function rI(n,e){return o0.apply(this,arguments)}function o0(){return o0=(0,se.Z)(function*(n,e){const t=zt(n);return na(t.localStore,e).then(s=>gc(t,s))}),o0.apply(this,arguments)}function a0(n,e,t,s){return If.apply(this,arguments)}function If(){return If=(0,se.Z)(function*(n,e,t,s){const a=zt(n),f=yield function(v,M){const B=zt(v),W=zt(B.mutationQueue);return B.persistence.runTransaction("Lookup mutation documents","readonly",ee=>W.An(ee,M).next(le=>le?B.localDocuments.getDocuments(ee,le):ze.resolve(null)))}(a.localStore,e);var M;null!==f?("pending"===t?yield yf(a.remoteStore):"acknowledged"===t||"rejected"===t?(Ah(a,e,s||null),Sh(a,e),M=e,zt(zt(a.localStore).mutationQueue).bn(M)):ln(),yield gc(a,f)):xt("SyncEngine","Cannot apply mutation batch with id: "+e)}),If.apply(this,arguments)}function L_(){return L_=(0,se.Z)(function*(n,e){const t=zt(n);if(Gg(t),j_(t),!0===e&&!0!==t.wc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield U_(t,s.toArray());t.wc=!0,yield Og(t.remoteStore,!0);for(const f of a)Sg(t.remoteStore,f)}else if(!1===e&&!1!==t.wc){const s=[];let a=Promise.resolve();t.uc.forEach((f,v)=>{t.sharedClientState.isLocalQueryTarget(v)?s.push(v):a=a.then(()=>(Ef(t,v),ff(t.localStore,v,!0))),mf(t.remoteStore,v)}),yield a,yield U_(t,s),function(f){const v=zt(f);v.hc.forEach((M,B)=>{mf(v.remoteStore,B)}),v.lc._s(),v.hc=new Map,v.ac=new jn(E.comparator)}(t),t.wc=!1,yield Og(t.remoteStore,!1)}}),L_.apply(this,arguments)}function U_(n,e,t){return xh.apply(this,arguments)}function xh(){return xh=(0,se.Z)(function*(n,e,t){const s=zt(n),a=[],f=[];for(const v of e){let M;const B=s.uc.get(v);if(B&&0!==B.length){M=yield yp(s.localStore,ju(B[0]));for(const W of B){const ee=s.oc.get(W),le=yield nI(s,ee);le.snapshot&&f.push(le.snapshot)}}else{const W=yield Rv(s.localStore,v);M=yield yp(s.localStore,W),yield x_(s,u0(W),v,!1,M.resumeToken)}a.push(M)}return s.rc.Ho(f),a}),xh.apply(this,arguments)}function u0(n){return rh(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Qw(n){const e=zt(n);return zt(zt(e.localStore).persistence).Si()}function Xw(n,e,t,s){return V_.apply(this,arguments)}function V_(){return V_=(0,se.Z)(function*(n,e,t,s){const a=zt(n);if(a.wc)return void xt("SyncEngine","Ignoring unexpected query state notification.");const f=a.uc.get(e);if(f&&f.length>0)switch(t){case"current":case"not-current":{const v=yield na(a.localStore,_l(f[0])),M=Qf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Io.EMPTY_BYTE_STRING);yield gc(a,v,M);break}case"rejected":yield ff(a.localStore,e,!0),Ef(a,e,s);break;default:ln()}}),V_.apply(this,arguments)}function iI(n,e,t){return B_.apply(this,arguments)}function B_(){return B_=(0,se.Z)(function*(n,e,t){const s=Gg(n);if(s.wc){for(const a of e){if(s.uc.has(a)){xt("SyncEngine","Adding an already active target "+a);continue}const f=yield Rv(s.localStore,a),v=yield yp(s.localStore,f);yield x_(s,u0(f),v.targetId,!1,v.resumeToken),Sg(s.remoteStore,v)}for(const a of t)s.uc.has(a)&&(yield ff(s.localStore,a,!1).then(()=>{mf(s.remoteStore,a),Ef(s,a)}).catch(_u))}}),B_.apply(this,arguments)}function Gg(n){const e=zt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qw.bind(null,e),e.rc.Ho=eI.bind(null,e.eventManager),e.rc.gc=Gv.bind(null,e.eventManager),e}function j_(n){const e=zt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jv.bind(null,e),e}class Cf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,se.Z)(function*(){t.Tt=pf(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return xv(this.persistence,new mp,e.initialUser,this.Tt)}Tc(e){return new Dv(yh.qs,this.Tt)}Ic(e){return new bg}terminate(){var e=this;return(0,se.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class l0 extends Cf{constructor(e,t,s){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,se.Z)(function*(){yield t().call(s,e),yield s.bc.initialize(s,e),yield j_(s.bc.syncEngine),yield yf(s.bc.remoteStore),yield s.persistence.di(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return xv(this.persistence,new mp,e.initialUser,this.Tt)}Ac(e,t){return new i_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const s=new Ay(t,this.persistence);return new Yd(e.asyncQueue,s)}Tc(e){const t=yg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?wa.withCacheSize(this.cacheSizeBytes):wa.DEFAULT;return new _g(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,wl(),Gu(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new bg}}class c0 extends l0{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,se.Z)(function*(){yield t().call(s,e);const a=s.bc.syncEngine;s.sharedClientState instanceof Pv&&(s.sharedClientState.syncEngine={Br:a0.bind(null,a),Lr:Xw.bind(null,a),qr:iI.bind(null,a),Si:Qw.bind(null,a),$r:rI.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.di(function(){var f=(0,se.Z)(function*(v){yield function Yw(n,e){return L_.apply(this,arguments)}(s.bc.syncEngine,v),s.gcScheduler&&(v&&!s.gcScheduler.started?s.gcScheduler.start():v||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(v&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():v||s.indexBackfillerScheduler.stop())});return function(v){return f.apply(this,arguments)}}())})()}Ic(e){const t=wl();if(!Pv.C(t))throw new bt(Ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=yg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pv(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class $_{initialize(e,t){var s=this;return(0,se.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>vf(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=r0.bind(null,s.syncEngine),yield Og(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new zw}createDatastore(e){const t=pf(e.databaseInfo.databaseId),s=new fc(e.databaseInfo);return new Lw(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,f=M=>vf(this.syncEngine,M,0),v=$l.C()?new $l:new m_,new Fv(t,s,a,f,v);var t,s,a,f,v}createSyncEngine(e,t){return function(s,a,f,v,M,B,W){const ee=new tI(s,a,f,v,M,B);return W&&(ee.wc=!0),ee}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,se.Z)(function*(t){const s=zt(t);xt("RemoteStore","RemoteStore shutting down."),s.mu.add(5),yield Eh(s),s.yu.shutdown(),s.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function H_(n,e=10240){let t=0;return{read:()=>(0,se.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,se.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class zg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Is("Uncaught Error in snapshot listener:",e.toString())}Pc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class d0{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new as,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(s=>{s&&s.Fu()?this.metadata.resolve(s.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Mu)}`))},s=>this.metadata.reject(s))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,se.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,se.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,se.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const s=e.Sc.decode(t),a=Number(s);isNaN(a)&&e.xc(`length string (${s}) is not valid number`);const f=yield e.Nc(a);return new Yn(JSON.parse(f),t.length+a)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,se.Z)(function*(){for(;e.kc()<0&&!(yield e.Oc()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Nc(e){var t=this;return(0,se.Z)(function*(){for(;t.buffer.length<e;)(yield t.Oc())&&t.xc("Reached the end of bundle when more is expected.");const s=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}Oc(){var e=this;return(0,se.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class eE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,se.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new bt(Ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,se.Z)(function*(f,v){const M=zt(f),B=tp(M.Tt)+"/documents",W={documents:v.map(Qe=>oh(M.Tt,Qe))},ee=yield M.mo("BatchGetDocuments",B,W,v.length),le=new Map;ee.forEach(Qe=>{const dt=function pw(n,e){return"found"in e?function(t,s){En(!!s.found);const a=oc(t,s.found.name),f=ao(s.found.updateTime),v=s.found.createTime?ao(s.found.createTime):Mn.min(),M=new ta({mapValue:{fields:s.found.fields}});return Fs.newFoundDocument(a,f,v,M)}(n,e):"missing"in e?function(t,s){En(!!s.missing),En(!!s.readTime);const a=oc(t,s.missing),f=ao(s.readTime);return Fs.newNoDocument(a,f)}(n,e):ln()}(M.Tt,Qe);le.set(dt.key.toString(),dt)});const Oe=[];return v.forEach(Qe=>{const dt=le.get(Qe.toString());En(!!dt),Oe.push(dt)}),Oe}),function(f,v){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new sh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,se.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const f=E.fromPath(a);e.mutations.push(new Hy(f,e.precondition(f)))}),yield(s=(0,se.Z)(function*(a,f){const v=zt(a),M=tp(v.Tt)+"/documents",B={writes:f.map(W=>sf(v.Tt,W))};yield v.lo("Commit",M,B)}),function(a,f){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ln();t=Mn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new bt(Ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Mn.min())?Xs.exists(!1):Xs.updateTime(t):Xs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mn.min()))throw new bt(Ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xs.updateTime(t)}return Xs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class G_{constructor(e,t,s,a,f){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=f,this.Mc=s.maxAttempts,this.ko=new Tg(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Fc()}Fc(){var e=this;this.ko.vo((0,se.Z)(function*(){const t=new eE(e.datastore),s=e.$c(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(f=>{e.Bc(f)}))}).catch(a=>{e.Bc(a)})}))}$c(e){try{const t=this.updateFunction(e);return!Bc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Fc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Pm(t)}return!1}}class tE{constructor(e,t,s,a){var f=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=li.UNAUTHENTICATED,this.clientId=Fu.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var v=(0,se.Z)(function*(M){xt("FirestoreClient","Received user=",M.uid),yield f.authCredentialListener(M),f.user=M});return function(M){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(s,v=>(xt("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,se.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,se.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=Ch(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function z_(n,e){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),xt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,se.Z)(function*(f){s.isEqual(f)||(yield Mv(e.localStore,f),s=f)});return function(f){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Wg.apply(this,arguments)}function h0(n,e){return W_.apply(this,arguments)}function W_(){return W_=(0,se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield q_(n);xt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield e.initialize(t,s),n.setCredentialChangeListener(a=>D_(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,f)=>D_(e.remoteStore,f)),n.onlineComponents=e}),W_.apply(this,arguments)}function q_(n){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,se.Z)(function*(n){return n.offlineComponents||(xt("FirestoreClient","Using default OfflineComponentProvider"),yield z_(n,new Cf)),n.offlineComponents}),Dp.apply(this,arguments)}function qg(n){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,se.Z)(function*(n){return n.onlineComponents||(xt("FirestoreClient","Using default OnlineComponentProvider"),yield h0(n,new $_)),n.onlineComponents}),Zg.apply(this,arguments)}function f0(n){return q_(n).then(e=>e.persistence)}function Kg(n){return q_(n).then(e=>e.localStore)}function Z_(n){return qg(n).then(e=>e.remoteStore)}function K_(n){return qg(n).then(e=>e.syncEngine)}function bf(n){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,se.Z)(function*(n){const e=yield qg(n),t=e.eventManager;return t.onListen=Kv.bind(null,e.syncEngine),t.onUnlisten=Yv.bind(null,e.syncEngine),t}),Y_.apply(this,arguments)}function _0(n,e,t={}){const s=new as;return n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(a,f,v,M,B){const W=new zg({next:le=>{f.enqueueAndForget(()=>Hv(a,ee));const Oe=le.docs.has(v);!Oe&&le.fromCache?B.reject(new bt(Ye.UNAVAILABLE,"Failed to get document because the client is offline.")):Oe&&le.fromCache&&M&&"server"===M.source?B.reject(new bt(Ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):B.resolve(le)},error:le=>B.reject(le)}),ee=new zv(Bu(v.path),W,{includeMetadataChanges:!0,Ou:!0});return A_(a,ee)}(yield bf(n),n.asyncQueue,e,t,s)})),s.promise}function Q_(n,e,t={}){const s=new as;return n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(a,f,v,M,B){const W=new zg({next:le=>{f.enqueueAndForget(()=>Hv(a,ee)),le.fromCache&&"server"===M.source?B.reject(new bt(Ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):B.resolve(le)},error:le=>B.reject(le)}),ee=new zv(v,W,{includeMetadataChanges:!0,Ou:!0});return A_(a,ee)}(yield bf(n),n.asyncQueue,e,t,s)})),s.promise}const Yg=new Map;function Sp(n,e,t){if(!t)throw new bt(Ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function X_(n,e,t,s){if(!0===e&&!0===s)throw new bt(Ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Qg(n){if(!E.isDocumentKey(n))throw new bt(Ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function y0(n){if(E.isDocumentKey(n))throw new bt(Ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Xg(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ln()}function $r(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new bt(Ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xg(n);throw new bt(Ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function v0(n,e){if(e<=0)throw new bt(Ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class J_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new bt(Ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new bt(Ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,X_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mc{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new J_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new bt(Ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new J_(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new yd;switch(t.type){case"gapi":return new qd(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new bt(Ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Yg.get(e);t&&(xt("ComponentProvider","Removing Datastore"),Yg.delete(e),t.terminate())}(this),Promise.resolve()}}class Us{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Us(this.firestore,e,this._key)}}class yu{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new yu(this.firestore,e,this._query)}}class Hl extends yu{constructor(e,t,s){super(e,t,Bu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Us(this.firestore,null,new E(e))}withConverter(e){return new Hl(this.firestore,e,this._path)}}function Jg(n,e,...t){if(n=(0,Ke.m9)(n),Sp("collection","path",e),n instanceof mc){const s=_r.fromString(e,...t);return y0(s),new Hl(n,null,s)}{if(!(n instanceof Us||n instanceof Hl))throw new bt(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(_r.fromString(e,...t));return y0(s),new Hl(n.firestore,null,s)}}function Tf(n,e,...t){if(n=(0,Ke.m9)(n),1===arguments.length&&(e=Fu.R()),Sp("doc","path",e),n instanceof mc){const s=_r.fromString(e,...t);return Qg(s),new Us(n,null,new E(s))}{if(!(n instanceof Us||n instanceof Hl))throw new bt(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(_r.fromString(e,...t));return Qg(s),new Us(n.firestore,n instanceof Hl?n.converter:null,new E(s))}}function w0(n,e){return n=(0,Ke.m9)(n),e=(0,Ke.m9)(e),(n instanceof Us||n instanceof Hl)&&(e instanceof Us||e instanceof Hl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function em(n,e){return n=(0,Ke.m9)(n),e=(0,Ke.m9)(e),n instanceof yu&&e instanceof yu&&n.firestore===e.firestore&&Hf(n._query,e._query)&&n.converter===e.converter}class ty{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Tg(this,"async_queue_retry"),this.Hc=()=>{const t=Gu();t&&xt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=Gu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=Gu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new as;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,se.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!Uu(t))throw t;xt("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(s=>{throw this.Qc=s,this.jc=!1,Is("INTERNAL UNHANDLED ERROR: ",function(f){let v=f.message||"";return f.stack&&(v=f.stack.includes(f.message)?f.stack:f.message+"\n"+f.stack),v}(s)),s}).then(s=>(this.jc=!1,s))));return this.qc=t,t}enqueueAfterDelay(e,t,s){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const a=Fg.createAndSchedule(this,e,t,s,f=>this.Xc(f));return this.Gc.push(a),a}Jc(){this.Qc&&ln()}verifyOperationInProgress(){}ta(){var e=this;return(0,se.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function tm(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(n)}class E0{constructor(){this._progressObserver={},this._taskCompletionResolver=new as,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ts extends mc{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new ty,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||C0(this),this._firestoreClient.terminate()}}function jo(n){return n._firestoreClient||C0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function C0(n){var e;const t=n._freezeSettings(),s=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new vm(n._databaseId,f,n._persistenceKey,(M=t).host,M.ssl,M.experimentalForceLongPolling,M.experimentalAutoDetectLongPolling,M.useFetchStreams));var f,M;n._firestoreClient=new tE(n._authCredentials,n._appCheckCredentials,n._queue,s)}function ny(n,e,t){const s=new as;return n.asyncQueue.enqueue((0,se.Z)(function*(){try{yield z_(n,t),yield h0(n,e),s.resolve()}catch(a){const f=a;if(!("FirebaseError"===(v=f).name?v.code===Ye.FAILED_PRECONDITION||v.code===Ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&v instanceof DOMException)||22===v.code||20===v.code||11===v.code))throw f;Os("Error enabling offline persistence. Falling back to persistence disabled: "+f),s.reject(f)}var v})).then(()=>s.promise)}function D0(n){if(n._initialized||n._terminated)throw new bt(Ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class _c{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _c(Io.fromBase64String(e))}catch(t){throw new bt(Ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _c(Io.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class td{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new bt(Ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mh{constructor(e){this._methodName=e}}class nm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new bt(Ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new bt(Ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Hn(this._lat,e._lat)||Hn(this._long,e._long)}}const xp=/^__.*__$/;class S0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Sd(e,this.data,this.fieldMask,t,this.fieldTransforms):new tf(e,this.data,t,this.fieldTransforms)}}class ry{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Sd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function iy(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ln()}}class Mp{constructor(e,t,s,a,f,v){this.settings=e,this.databaseId=t,this.Tt=s,this.ignoreUndefinedProperties=a,void 0===f&&this.ia(),this.fieldTransforms=f||[],this.fieldMask=v||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new Mp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.oa({path:s,ca:!1});return a.aa(e),a}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.oa({path:s,ca:!1});return a.ia(),a}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return Ph(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(iy(this.ra)&&xp.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class A0{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=s||pf(e)}wa(e,t,s,a=!1){return new Mp({ra:e,methodName:t,_a:s,path:Cs.emptyPath(),ca:!1,da:a},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Fd(n){const e=n._freezeSettings(),t=pf(n._databaseId);return new A0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rm(n,e,t,s,a,f={}){const v=n.wa(f.merge||f.mergeFields?2:0,e,t,a);Nh("Data must be an object, but it was:",v,s);const M=M0(s,v);let B,W;if(f.merge)B=new xu(v.fieldMask),W=v.fieldTransforms;else if(f.mergeFields){const ee=[];for(const le of f.mergeFields){const Oe=Rp(e,le,t);if(!v.contains(Oe))throw new bt(Ye.INVALID_ARGUMENT,`Field '${Oe}' is specified in your field mask but missing from your input data.`);Np(ee,Oe)||ee.push(Oe)}B=new xu(ee),W=v.fieldTransforms.filter(le=>B.covers(le.field))}else B=null,W=v.fieldTransforms;return new S0(new ta(M),B,W)}class im extends Mh{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof im}}function x0(n,e,t){return new Mp({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class sm extends Mh{_toFieldTransform(e){return new zf(e.path,new Jh)}isEqual(e){return e instanceof sm}}class fE extends Mh{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=x0(this,e,!0),s=this.ma.map(f=>vu(f,t)),a=new Jn(s);return new zf(e.path,a)}isEqual(e){return this===e}}class pE extends Mh{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=x0(this,e,!0),s=this.ma.map(f=>vu(f,t)),a=new Dd(s);return new zf(e.path,a)}isEqual(e){return this===e}}class gE extends Mh{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new ef(e.Tt,Ly(e.Tt,this.ga));return new zf(e.path,t)}isEqual(e){return this===e}}function Rh(n,e,t,s){const a=n.wa(1,e,t);Nh("Data must be an object, but it was:",a,s);const f=[],v=ta.empty();ml(s,(B,W)=>{const ee=um(e,B,t);W=(0,Ke.m9)(W);const le=a.ha(ee);if(W instanceof im)f.push(ee);else{const Oe=vu(W,le);null!=Oe&&(f.push(ee),v.set(ee,Oe))}});const M=new xu(f);return new ry(v,M,a.fieldTransforms)}function sy(n,e,t,s,a,f){const v=n.wa(1,e,t),M=[Rp(e,s,t)],B=[a];if(f.length%2!=0)throw new bt(Ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Oe=0;Oe<f.length;Oe+=2)M.push(Rp(e,f[Oe])),B.push(f[Oe+1]);const W=[],ee=ta.empty();for(let Oe=M.length-1;Oe>=0;--Oe)if(!Np(W,M[Oe])){const Qe=M[Oe];let dt=B[Oe];dt=(0,Ke.m9)(dt);const jt=v.ha(Qe);if(dt instanceof im)W.push(Qe);else{const Jt=vu(dt,jt);null!=Jt&&(W.push(Qe),ee.set(Qe,Jt))}}const le=new xu(W);return new ry(ee,le,v.fieldTransforms)}function om(n,e,t,s=!1){return vu(t,n.wa(s?4:3,e))}function vu(n,e){if(am(n=(0,Ke.m9)(n)))return Nh("Unsupported field value:",e,n),M0(n,e);if(n instanceof Mh)return function(t,s){if(!iy(s.ra))throw s.fa(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.fa(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,s){const a=[];let f=0;for(const v of t){let M=vu(v,s.la(f));null==M&&(M={nullValue:"NULL_VALUE"}),a.push(M),f++}return{arrayValue:{values:a}}}(n,e)}return function(t,s){if(null===(t=(0,Ke.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ly(s.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=qi.fromDate(t);return{timestampValue:Zc(s.Tt,a)}}if(t instanceof qi){const a=new qi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zc(s.Tt,a)}}if(t instanceof nm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _c)return{bytesValue:Vm(s.Tt,t._byteString)};if(t instanceof Us){const a=s.databaseId,f=t.firestore._databaseId;if(!f.isEqual(a))throw s.fa(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ep(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.fa(`Unsupported field value: ${Xg(t)}`)}(n,e)}function M0(n,e){const t={};return Uf(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ml(n,(s,a)=>{const f=vu(a,e.ua(s));null!=f&&(t[s]=f)}),{mapValue:{fields:t}}}function am(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof qi||n instanceof nm||n instanceof _c||n instanceof Us||n instanceof Mh)}function Nh(n,e,t){if(!am(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Xg(t);throw e.fa("an object"===s?n+" a custom object":n+" "+s)}var s}function Rp(n,e,t){if((e=(0,Ke.m9)(e))instanceof td)return e._internalPath;if("string"==typeof e)return um(n,e);throw Ph("Field path arguments must be of type string or ",n,!1,void 0,t)}const mE=new RegExp("[~\\*/\\[\\]]");function um(n,e,t){if(e.search(mE)>=0)throw Ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new td(...e.split("."))._internalPath}catch{throw Ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ph(n,e,t,s,a){const f=s&&!s.isEmpty(),v=void 0!==a;let M=`Function ${e}() called with invalid data`;t&&(M+=" (via `toFirestore()`)"),M+=". ";let B="";return(f||v)&&(B+=" (found",f&&(B+=` in field ${s}`),v&&(B+=` in document ${a}`),B+=")"),new bt(Ye.INVALID_ARGUMENT,M+n+B)}function Np(n,e){return n.some(t=>t.isEqual(e))}class Pp{constructor(e,t,s,a,f){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new Us(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _E(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Op("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _E extends Pp{data(){return super.data()}}function Op(n,e){return"string"==typeof e?um(n,e):e instanceof td?e._internalPath:e._delegate._internalPath}function oy(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new bt(Ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kp{}class Df extends kp{}function yc(n,e,...t){let s=[];e instanceof kp&&s.push(e),s=s.concat(t),function(a){const f=a.filter(M=>M instanceof Ld).length,v=a.filter(M=>M instanceof Oh).length;if(f>1||f>0&&v>0)throw new bt(Ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)n=a._apply(n);return n}class Oh extends Df{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Oh(e,t,s)}_apply(e){const t=this._parse(e);return L0(e._query,t),new yu(e.firestore,e.converter,Yp(e._query,t))}_parse(e){const t=Fd(e.firestore);return function(a,f,v,M,B,W,ee){let le;if(B.isKeyField()){if("array-contains"===W||"array-contains-any"===W)throw new bt(Ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${W}' queries on documentId().`);if("in"===W||"not-in"===W){cy(ee,W);const Oe=[];for(const Qe of ee)Oe.push(F0(M,a,Qe));le={arrayValue:{values:Oe}}}else le=F0(M,a,ee)}else"in"!==W&&"not-in"!==W&&"array-contains-any"!==W||cy(ee,W),le=om(v,"where",ee,"in"===W||"not-in"===W);return Lr.create(B,W,le)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ld extends kp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ld(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Ei.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let f=s;const v=a.getFlattenedFilters();for(const M of v)L0(f,M),f=Yp(f,M)}(e._query,t),new yu(e.firestore,e.converter,Yp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ay extends Df{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ay(e,t)}_apply(e){const t=function(s,a,f){if(null!==s.startAt)throw new bt(Ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new bt(Ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new Wt(a,f);return function(M,B){if(null===Cm(M)){const W=bm(M);null!==W&&wu(0,W,B.field)}}(s,v),v}(e._query,this._field,this._direction);return new yu(e.firestore,e.converter,function(s,a){const f=s.explicitOrderBy.concat([a]);return new Wc(s.path,s.collectionGroup,f,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class lm extends Df{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new lm(e,t,s)}_apply(e){return new yu(e.firestore,e.converter,$f(e._query,this._limit,this._limitType))}}class Fp extends Df{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Fp(e,t,s)}_apply(e){const t=ly(e,this.type,this._docOrFields,this._inclusive);return new yu(e.firestore,e.converter,(a=t,new Wc((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class Lp extends Df{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Lp(e,t,s)}_apply(e){const t=ly(e,this.type,this._docOrFields,this._inclusive);return new yu(e.firestore,e.converter,(a=t,new Wc((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function ly(n,e,t,s){if(t[0]=(0,Ke.m9)(t[0]),t[0]instanceof Pp)return function(a,f,v,M,B){if(!M)throw new bt(Ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const W=[];for(const ee of Td(a))if(ee.field.isKeyField())W.push(Ll(f,M.key));else{const le=M.data.field(ee.field);if(Vf(le))throw new bt(Ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ee.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===le){const Oe=ee.field.canonicalString();throw new bt(Ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Oe}' (used as the orderBy) does not exist.`)}W.push(le)}return new Vl(W,B)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const a=Fd(n.firestore);return function(f,v,M,B,W,ee){const le=f.explicitOrderBy;if(W.length>le.length)throw new bt(Ye.INVALID_ARGUMENT,`Too many arguments provided to ${B}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Oe=[];for(let Qe=0;Qe<W.length;Qe++){const dt=W[Qe];if(le[Qe].field.isKeyField()){if("string"!=typeof dt)throw new bt(Ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${B}(), but got a ${typeof dt}`);if(!Ny(f)&&-1!==dt.indexOf("/"))throw new bt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${B}() must be a plain document ID, but '${dt}' contains a slash.`);const jt=f.path.child(_r.fromString(dt));if(!E.isDocumentKey(jt))throw new bt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${B}() must result in a valid document path, but '${jt}' is not because it contains an odd number of segments.`);const Jt=new E(jt);Oe.push(Ll(v,Jt))}else{const jt=om(M,B,dt);Oe.push(jt)}}return new Vl(Oe,ee)}(n._query,n.firestore._databaseId,a,e,t,s)}}function F0(n,e,t){if("string"==typeof(t=(0,Ke.m9)(t))){if(""===t)throw new bt(Ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ny(e)&&-1!==t.indexOf("/"))throw new bt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(_r.fromString(t));if(!E.isDocumentKey(s))throw new bt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ll(n,new E(s))}if(t instanceof Us)return Ll(n,t._key);throw new bt(Ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xg(t)}.`)}function cy(n,e){if(!Array.isArray(n)||0===n.length)throw new bt(Ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function L0(n,e){if(e.isInequality()){const s=bm(n),a=e.field;if(null!==s&&!s.isEqual(a))throw new bt(Ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const f=Cm(n);null!==f&&wu(0,a,f)}const t=function(s,a){for(const f of s)for(const v of f.getFlattenedFilters())if(a.indexOf(v.op)>=0)return v.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new bt(Ye.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function wu(n,e,t){if(!t.isEqual(e))throw new bt(Ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class dy{convertValue(e,t="none"){switch(kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ri(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ju(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ln()}}convertObject(e,t){const s={};return ml(e.fields,(a,f)=>{s[a]=this.convertValue(f,t)}),s}convertGeoPoint(e){return new nm(ri(e.latitude),ri(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Bf(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Wh(e));default:return null}}convertTimestamp(e){const t=bs(e);return new qi(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=_r.fromString(e);En(nv(s));const a=new Vc(s.get(1),s.get(3)),f=new E(s.popFirst(5));return a.isEqual(t)||Is(`Document ${f} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}function cm(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class hI extends dy{constructor(e){super(),this.firestore=e}convertBytes(e){return new _c(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Us(this.firestore,null,t)}}class nd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rd extends Pp{constructor(e,t,s,a,f,v){super(e,t,s,a,v),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Op("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Sf extends rd{data(e={}){return super.data(e)}}class Ud{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new nd(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Sf(this._firestore,this._userDataWriter,s.key,s,new nd(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new bt(Ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let f=0;return s._snapshot.docChanges.map(v=>({type:"added",doc:new Sf(s._firestore,s._userDataWriter,v.doc.key,v.doc,new nd(s._snapshot.mutatedKeys.has(v.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:f++}))}{let f=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(v=>a||3!==v.type).map(v=>{const M=new Sf(s._firestore,s._userDataWriter,v.doc.key,v.doc,new nd(s._snapshot.mutatedKeys.has(v.doc.key),s._snapshot.fromCache),s.query.converter);let B=-1,W=-1;return 0!==v.type&&(B=f.indexOf(v.doc.key),f=f.delete(v.doc.key)),1!==v.type&&(f=f.add(v.doc),W=f.indexOf(v.doc.key)),{type:IE(v.type),doc:M,oldIndex:B,newIndex:W}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function IE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ln()}}function V0(n,e){return n instanceof rd&&e instanceof rd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ud&&e instanceof Ud&&n._firestore===e._firestore&&em(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class id extends dy{constructor(e){super(),this.firestore=e}convertBytes(e){return new _c(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Us(this.firestore,null,t)}}function $0(n,e,t){n=$r(n,Us);const s=$r(n.firestore,Ts),a=cm(n.converter,e,t);return Up(s,[rm(Fd(s),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Xs.none())])}function py(n,e,t,...s){n=$r(n,Us);const a=$r(n.firestore,Ts),f=Fd(a);let v;return v="string"==typeof(e=(0,Ke.m9)(e))||e instanceof td?sy(f,"updateDoc",n._key,e,t,s):Rh(f,"updateDoc",n._key,e),Up(a,[v.toMutation(n._key,Xs.exists(!0))])}function gy(n,...e){var t,s,a;n=(0,Ke.m9)(n);let f={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||tm(e[v])||(f=e[v],v++);const M={includeMetadataChanges:f.includeMetadataChanges};if(tm(e[v])){const le=e[v];e[v]=null===(t=le.next)||void 0===t?void 0:t.bind(le),e[v+1]=null===(s=le.error)||void 0===s?void 0:s.bind(le),e[v+2]=null===(a=le.complete)||void 0===a?void 0:a.bind(le)}let B,W,ee;if(n instanceof Us)W=$r(n.firestore,Ts),ee=Bu(n._key.path),B={next:le=>{e[v]&&e[v](_y(W,n,le))},error:e[v+1],complete:e[v+2]};else{const le=$r(n,yu);W=$r(le.firestore,Ts),ee=le._query;const Oe=new id(W);B={next:Qe=>{e[v]&&e[v](new Ud(W,Oe,le,Qe))},error:e[v+1],complete:e[v+2]},oy(n._query)}return function(le,Oe,Qe,dt){const jt=new zg(dt),Jt=new zv(Oe,jt,Qe);return le.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return A_(yield bf(le),Jt)})),()=>{jt.Pc(),le.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return Hv(yield bf(le),Jt)}))}}(jo(W),ee,M,B)}function Up(n,e){return function(t,s){const a=new as;return t.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function Qv(n,e,t){return M_.apply(this,arguments)}(yield K_(t),s,a)})),a.promise}(jo(n),e)}function _y(n,e,t){const s=t.docs.get(e._key),a=new id(n);return new rd(n,a,e._key,s,new nd(t.hasPendingWrites,t.fromCache),e.converter)}const TE={maxAttempts:5};class H0{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fd(e)}set(e,t,s){this._verifyNotCommitted();const a=sd(e,this._firestore),f=cm(a.converter,t,s),v=rm(this._dataReader,"WriteBatch.set",a._key,f,null!==a.converter,s);return this._mutations.push(v.toMutation(a._key,Xs.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const f=sd(e,this._firestore);let v;return v="string"==typeof(t=(0,Ke.m9)(t))||t instanceof td?sy(this._dataReader,"WriteBatch.update",f._key,t,s,a):Rh(this._dataReader,"WriteBatch.update",f._key,t),this._mutations.push(v.toMutation(f._key,Xs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=sd(e,this._firestore);return this._mutations=this._mutations.concat(new sh(t._key,Xs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(Ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sd(n,e){if((n=(0,Ke.m9)(n)).firestore!==e)throw new bt(Ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class G0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Fd(e)}get(e){const t=sd(e,this._firestore),s=new hI(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return ln();const f=a[0];if(f.isFoundDocument())return new Pp(this._firestore,s,f.key,f,t.converter);if(f.isNoDocument())return new Pp(this._firestore,s,t._key,null,t.converter);throw ln()})}set(e,t,s){const a=sd(e,this._firestore),f=cm(a.converter,t,s),v=rm(this._dataReader,"Transaction.set",a._key,f,null!==a.converter,s);return this._transaction.set(a._key,v),this}update(e,t,s,...a){const f=sd(e,this._firestore);let v;return v="string"==typeof(t=(0,Ke.m9)(t))||t instanceof td?sy(this._dataReader,"Transaction.update",f._key,t,s,a):Rh(this._dataReader,"Transaction.update",f._key,t),this._transaction.update(f._key,v),this}delete(e){const t=sd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=sd(e,this._firestore),s=new id(this._firestore);return super.get(e).then(a=>new rd(this._firestore,s,t._key,a._document,new nd(!1,!1),t.converter))}}function vy(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new bt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Y0(){if(typeof Uint8Array>"u")throw new bt("unimplemented","Uint8Arrays are not available in this environment.")}function ME(){if(!function wm(){return typeof atob<"u"}())throw new bt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ya=ke.SDK_VERSION,(0,ke._registerComponent)(new Tt.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const f=t.getProvider("app").getImmediate(),v=new Ts(new vd(t.getProvider("auth-internal")),new Zd(t.getProvider("app-check-internal")),function(M,B){if(!Object.prototype.hasOwnProperty.apply(M.options,["projectId"]))throw new bt(Ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vc(M.options.projectId,B)}(f,s),f);return a=Object.assign({useFetchStreams:e},a),v._setSettings(a),v},"PUBLIC").setMultipleInstances(!0)),(0,ke.registerVersion)(tc,"3.8.4",n),(0,ke.registerVersion)(tc,"3.8.4","esm2017")}();class xf{constructor(e){this._delegate=e}static fromBase64String(e){return ME(),new xf(_c.fromBase64String(e))}static fromUint8Array(e){return Y0(),new xf(_c.fromUint8Array(e))}toBase64(){return ME(),this._delegate.toBase64()}toUint8Array(){return Y0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Q0(n){return function mI(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(n,["next","error","complete"])}class _I{enableIndexedDbPersistence(e,t){return function b0(n,e){D0(n=$r(n,Ts));const t=jo(n),s=n._freezeSettings(),a=new $_;return ny(t,a,new l0(a,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function aI(n){D0(n=$r(n,Ts));const e=jo(n),t=n._freezeSettings(),s=new $_;return ny(e,s,new c0(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function uE(n){if(n._initialized&&!n._terminated)throw new bt(Ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new as;return n._queue.enqueueAndForgetEvenWhileRestricted((0,se.Z)(function*(){try{yield(t=(0,se.Z)(function*(s){if(!ea.C())return Promise.resolve();const a=s+"main";yield ea.delete(a)}),function(s){return t.apply(this,arguments)})(yg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class RE{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Vc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Os("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function ey(n,e,t,s={}){var a;const f=(n=$r(n,mc))._getSettings();if("firestore.googleapis.com"!==f.host&&f.host!==e&&Os("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},f),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let v,M;if("string"==typeof s.mockUserToken)v=s.mockUserToken,M=li.MOCK_USER;else{v=(0,Ke.Sg)(s.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const B=s.mockUserToken.sub||s.mockUserToken.user_id;if(!B)throw new bt(Ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");M=new li(B)}n._authCredentials=new Fc(new gu(v,M))}}(this._delegate,e,t,s)}enableNetwork(){return function uI(n){return function nE(n){return n.asyncQueue.enqueue((0,se.Z)(function*(){const e=yield f0(n),t=yield Z_(n);return e.setNetworkEnabled(!0),function(s){const a=zt(s);return a.mu.delete(0),Ip(a)}(t)}))}(jo(n=$r(n,Ts)))}(this._delegate)}disableNetwork(){return function cE(n){return function g0(n){return n.asyncQueue.enqueue((0,se.Z)(function*(){const e=yield f0(n),t=yield Z_(n);return e.setNetworkEnabled(!1),(s=(0,se.Z)(function*(a){const f=zt(a);f.mu.add(0),yield Eh(f),f.pu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(jo(n=$r(n,Ts)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,X_("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function lE(n){return function(e){const t=new as;return e.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function e0(n,e){return P_.apply(this,arguments)}(yield K_(e),t)})),t.promise}(jo(n=$r(n,Ts)))}(this._delegate)}onSnapshotsInSync(e){return function my(n,e){return function iE(n,e){const t=new zg(e);return n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return s=yield bf(n),a=t,zt(s).vu.add(a),void a.next();var s,a})),()=>{t.Pc(),n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return s=yield bf(n),a=t,void zt(s).vu.delete(a);var s,a}))}}(jo(n=$r(n,Ts)),tm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new bt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Fh(this,Jg(this._delegate,e))}catch(t){throw Eu(t,"collection()","Firestore.collection()")}}doc(e){try{return new Gl(this,Tf(this._delegate,e))}catch(t){throw Eu(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ou(this,function aE(n,e){if(n=$r(n,mc),Sp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new bt(Ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new yu(n,null,(t=e,new Wc(_r.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Eu(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function DE(n,e,t){n=$r(n,Ts);const s=Object.assign(Object.assign({},TE),t);return function(a){if(a.maxAttempts<1)throw new bt(Ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,f,v){const M=new as;return a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){const B=yield function p0(n){return qg(n).then(e=>e.datastore)}(a);new G_(a.asyncQueue,B,v,f,M).run()})),M.promise}(jo(n),a=>e(new G0(n,a)),s)}(this._delegate,t=>e(new NE(this,t)))}batch(){return jo(this._delegate),new PE(new H0(this._delegate,e=>Up(this._delegate,e)))}loadBundle(e){return function dE(n,e){const t=jo(n=$r(n,Ts)),s=new E0;return function sE(n,e,t,s){const a=function(f,v){let M;return M="string"==typeof f?(new TextEncoder).encode(f):f,B=function(B,W){if(B instanceof Uint8Array)return H_(B,W);if(B instanceof ArrayBuffer)return H_(new Uint8Array(B),W);if(B instanceof ReadableStream)return B.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(M),new d0(B,v);var B}(t,pf(e));n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){!function Jw(n,e,t){const s=zt(n);var a;(a=(0,se.Z)(function*(f,v,M){try{const B=yield v.getMetadata();if(yield function(Oe,Qe){const dt=zt(Oe),jt=ao(Qe.createTime);return dt.persistence.runTransaction("hasNewerBundle","readonly",Jt=>dt.Os.getBundleMetadata(Jt,Qe.id)).then(Jt=>!!Jt&&Jt.createTime.compareTo(jt)>=0)}(f.localStore,B))return yield v.close(),M._completeWith({taskState:"Success",documentsLoaded:(Oe=B).totalDocuments,bytesLoaded:Oe.totalBytes,totalDocuments:Oe.totalDocuments,totalBytes:Oe.totalBytes}),Promise.resolve(new Set);M._updateProgress(qv(B));const W=new Ww(B,f.localStore,v.Tt);let ee=yield v.yc();for(;ee;){const Oe=yield W.Bu(ee);Oe&&M._updateProgress(Oe),ee=yield v.yc()}const le=yield W.complete();return yield gc(f,le.Uu,void 0),yield function(Oe,Qe){const dt=zt(Oe);return dt.persistence.runTransaction("Save bundle","readwrite",jt=>dt.Os.saveBundleMetadata(jt,Qe))}(f.localStore,B),M._completeWith(le.progress),Promise.resolve(le.qu)}catch(B){return Os("SyncEngine",`Loading bundle failed with ${B}`),M._failWith(B),Promise.resolve(new Set)}var Oe}),function(f,v,M){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield K_(n),a,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function T0(n,e){return function oE(n,e){return n.asyncQueue.enqueue((0,se.Z)(function*(){return function(t,s){const a=zt(t);return a.persistence.runTransaction("Get named query","readonly",f=>a.Os.getNamedQuery(f,s))}(yield Kg(n),e)}))}(jo(n=$r(n,Ts)),e).then(t=>t?new yu(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ou(this,t):null)}}class wy extends dy{constructor(e){super(),this.firestore=e}convertBytes(e){return new xf(new _c(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Gl.forKey(t,this.firestore,null)}}class NE{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wy(e)}get(e){const t=Rf(e);return this._delegate.get(t).then(s=>new Mf(this._firestore,new rd(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=Rf(e);return s?(vy("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const f=Rf(e);return 2===arguments.length?this._delegate.update(f,t):this._delegate.update(f,t,s,...a),this}delete(e){const t=Rf(e);return this._delegate.delete(t),this}}class PE{constructor(e){this._delegate=e}set(e,t,s){const a=Rf(e);return s?(vy("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const f=Rf(e);return 2===arguments.length?this._delegate.update(f,t):this._delegate.update(f,t,s,...a),this}delete(e){const t=Rf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vc{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Sf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new fm(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=vc.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let f=a.get(t);return f||(f=new vc(e,new wy(e),t),a.set(t,f)),f}}vc.INSTANCES=new WeakMap;class Gl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wy(e)}static forPath(e,t,s){if(e.length%2!=0)throw new bt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Gl(t,new Us(t._delegate,s,new E(e)))}static forKey(e,t,s){return new Gl(t,new Us(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Fh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Fh(this.firestore,Jg(this._delegate,e))}catch(t){throw Eu(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ke.m9)(e))instanceof Us&&w0(this._delegate,e)}set(e,t){t=vy("DocumentReference.set",t);try{return t?$0(this._delegate,e,t):$0(this._delegate,e)}catch(s){throw Eu(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?py(this._delegate,e):py(this._delegate,e,t,...s)}catch(a){throw Eu(a,"updateDoc()","DocumentReference.update()")}}delete(){return function Af(n){return Up($r(n.firestore,Ts),[new sh(n._key,Xs.none())])}(this._delegate)}onSnapshot(...e){const t=Vp(e),s=Ey(e,a=>new Mf(this.firestore,new rd(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return gy(this._delegate,t,s)}get(e){let t;return t="cache"===e?.source?function B0(n){n=$r(n,Us);const e=$r(n.firestore,Ts),t=jo(e),s=new id(e);return function m0(n,e){const t=new as;return n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return(s=(0,se.Z)(function*(a,f,v){try{const M=yield function(B,W){const ee=zt(B);return ee.persistence.runTransaction("read document","readonly",le=>ee.localDocuments.getDocument(le,W))}(a,f);M.isFoundDocument()?v.resolve(M):M.isNoDocument()?v.resolve(null):v.reject(new bt(Ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(M){const B=Ch(M,`Failed to get document '${f} from cache`);v.reject(B)}}),function(a,f,v){return s.apply(this,arguments)})(yield Kg(n),e,t);var s})),t.promise}(t,n._key).then(a=>new rd(e,s,n._key,a,new nd(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function hm(n){n=$r(n,Us);const e=$r(n.firestore,Ts);return _0(jo(e),n._key,{source:"server"}).then(t=>_y(e,n,t))}(this._delegate):function hy(n){n=$r(n,Us);const e=$r(n.firestore,Ts);return _0(jo(e),n._key).then(t=>_y(e,n,t))}(this._delegate),t.then(s=>new Mf(this.firestore,new rd(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Gl(this.firestore,this._delegate.withConverter(e?vc.getInstance(this.firestore,e):null))}}function Eu(n,e,t){return n.message=n.message.replace(e,t),n}function Vp(n){for(const e of n)if("object"==typeof e&&!Q0(e))return e;return{}}function Ey(n,e){var t,s;let a;return a=Q0(n[0])?n[0]:Q0(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:f=>{a.next&&a.next(e(f))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class Mf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Gl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return V0(this._delegate,e._delegate)}}class fm extends Mf{data(e){const t=this._delegate.data(e);return function Wd(n,e){n||ln()}(void 0!==t),t}}class ou{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wy(e)}where(e,t,s){try{return new ou(this.firestore,yc(this._delegate,function R0(n,e,t){const s=e,a=Op("where",n);return Oh._create(a,s,t)}(e,t,s)))}catch(a){throw Eu(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ou(this.firestore,yc(this._delegate,function yE(n,e="asc"){const t=e,s=Op("orderBy",n);return ay._create(s,t)}(e,t)))}catch(s){throw Eu(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ou(this.firestore,yc(this._delegate,function P0(n){return v0("limit",n),lm._create("limit",n,"F")}(e)))}catch(t){throw Eu(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ou(this.firestore,yc(this._delegate,function uy(n){return v0("limitToLast",n),lm._create("limitToLast",n,"L")}(e)))}catch(t){throw Eu(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ou(this.firestore,yc(this._delegate,function vE(...n){return Fp._create("startAt",n,!0)}(...e)))}catch(t){throw Eu(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ou(this.firestore,yc(this._delegate,function O0(...n){return Fp._create("startAfter",n,!1)}(...e)))}catch(t){throw Eu(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ou(this.firestore,yc(this._delegate,function wE(...n){return Lp._create("endBefore",n,!1)}(...e)))}catch(t){throw Eu(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ou(this.firestore,yc(this._delegate,function k0(...n){return Lp._create("endAt",n,!0)}(...e)))}catch(t){throw Eu(t,"endAt()","Query.endAt()")}}isEqual(e){return em(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function pI(n){n=$r(n,yu);const e=$r(n.firestore,Ts),t=jo(e),s=new id(e);return function rE(n,e){const t=new as;return n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return(s=(0,se.Z)(function*(a,f,v){try{const M=yield vp(a,f,!0),B=new Tp(f,M.Yi),W=B.Hu(M.documents),ee=B.applyChanges(W,!1);v.resolve(ee.snapshot)}catch(M){const B=Ch(M,`Failed to execute query '${f} against cache`);v.reject(B)}}),function(a,f,v){return s.apply(this,arguments)})(yield Kg(n),e,t);var s})),t.promise}(t,n._query).then(a=>new Ud(e,s,n,a))}(this._delegate):"server"===e?.source?function j0(n){n=$r(n,yu);const e=$r(n.firestore,Ts),t=jo(e),s=new id(e);return Q_(t,n._query,{source:"server"}).then(a=>new Ud(e,s,n,a))}(this._delegate):function fy(n){n=$r(n,yu);const e=$r(n.firestore,Ts),t=jo(e),s=new id(e);return oy(n._query),Q_(t,n._query).then(a=>new Ud(e,s,n,a))}(this._delegate),t.then(s=>new Iy(this.firestore,new Ud(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=Vp(e),s=Ey(e,a=>new Iy(this.firestore,new Ud(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return gy(this._delegate,t,s)}withConverter(e){return new ou(this.firestore,this._delegate.withConverter(e?vc.getInstance(this.firestore,e):null))}}class X0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new fm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Iy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ou(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new fm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new X0(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new fm(this._firestore,s))})}isEqual(e){return V0(this._delegate,e._delegate)}}class Fh extends ou{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Gl(this.firestore,e):null}doc(e){try{return new Gl(this.firestore,void 0===e?Tf(this._delegate):Tf(this._delegate,e))}catch(t){throw Eu(t,"doc()","CollectionReference.doc()")}}add(e){return function CE(n,e){const t=$r(n.firestore,Ts),s=Tf(n),a=cm(n.converter,e);return Up(t,[rm(Fd(n.firestore),"addDoc",s._key,a,null!==n.converter,{}).toMutation(s._key,Xs.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Gl(this.firestore,t))}isEqual(e){return w0(this._delegate,e._delegate)}withConverter(e){return new Fh(this.firestore,this._delegate.withConverter(e?vc.getInstance(this.firestore,e):null))}}function Rf(n){return $r(n,Us)}class J0{constructor(...e){this._delegate=new td(...e)}static documentId(){return new J0(Cs.keyField().canonicalString())}isEqual(e){return(e=(0,Ke.m9)(e))instanceof td&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function W0(){return new sm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Lh(e)}static delete(){const e=function z0(){return new im("deleteField")}();return e._methodName="FieldValue.delete",new Lh(e)}static arrayUnion(...e){const t=function SE(...n){return new fE("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Lh(t)}static arrayRemove(...e){const t=function AE(...n){return new pE("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Lh(t)}static increment(e){const t=function q0(n){return new gE("increment",n)}(e);return t._methodName="FieldValue.increment",new Lh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const OE={Firestore:RE,GeoPoint:nm,Timestamp:qi,Blob:xf,Transaction:NE,WriteBatch:PE,DocumentReference:Gl,DocumentSnapshot:Mf,Query:ou,QueryDocumentSnapshot:fm,QuerySnapshot:Iy,CollectionReference:Fh,FieldPath:J0,FieldValue:Lh,setLogLevel:function yI(n){!function ku(n){ru.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function FE(n,e){return function vI(n,e=st.z){return new ot.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{s?.()}})}(n,e)}function Cy(n,e){return FE(n,e).pipe((0,G.U)(t=>({payload:t,type:"query"})))}function gm(n,e){return Cy(n,e).pipe((0,ca.O)(void 0),oi(),(0,G.U)(([t,s])=>{const a=s.payload.docChanges(),f=a.map(v=>({type:v.type,payload:v}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((v,M)=>{const B=a.find(ee=>ee.doc.ref.isEqual(v.ref)),W=t?.payload.docs.find(ee=>ee.ref.isEqual(v.ref));B&&JSON.stringify(B.doc.metadata)===JSON.stringify(v.metadata)||!B&&W&&JSON.stringify(W.metadata)===JSON.stringify(v.metadata)||f.push({type:"modified",payload:{oldIndex:M,newIndex:M,type:"modified",doc:v}})}),f}))}function ew(n,e,t){return gm(n,t).pipe((0,Ui.R)((s,a)=>function EI(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function tw(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return by(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return by(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return by(n,e.oldIndex,1)}return n}(n,s))}),n}(s,a.map(f=>f.payload),e),[]),(0,Ro.x)(),(0,G.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function by(n,e,t,...s){const a=n.slice();return a.splice(e,t,...s),a}function Ty(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function kE(n){(function pm(n,e){n.INTERNAL.registerComponent(new Tt.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},OE)))})(n,(e,t)=>new RE(e,t,new _I)),n.registerVersion("@firebase/firestore-compat","0.3.4")}(Ce.Z);class LE{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=gm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,G.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,ca.O)(void 0),oi(),(0,to.h)(([s,a])=>a.length>0||!s),(0,G.U)(([s,a])=>a),ye.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ui.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Ty(e);return ew(this.query,t,this.afs.schedulers.outsideAngular).pipe(ye.iC)}valueChanges(e={}){return Cy(this.query,this.afs.schedulers.outsideAngular).pipe((0,G.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),ye.iC)}get(e){return(0,ft.D)(this.query.get(e)).pipe(ye.iC)}add(e){return this.ref.add(e)}doc(e){return new El(this.ref.doc(e),this.afs)}}class El{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:f}=rw(s,t);return new LE(a,f,this.afs)}snapshotChanges(){return function wI(n,e){return FE(n,e).pipe((0,ca.O)(void 0),oi(),(0,G.U)(([t,s])=>s.exists?t?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ye.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,G.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ft.D)(this.ref.get(e)).pipe(ye.iC)}}class UE{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?gm(this.query,this.afs.schedulers.outsideAngular).pipe((0,G.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,to.h)(t=>t.length>0),ye.iC):gm(this.query,this.afs.schedulers.outsideAngular).pipe(ye.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ui.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Ty(e);return ew(this.query,t,this.afs.schedulers.outsideAngular).pipe(ye.iC)}valueChanges(e={}){return Cy(this.query,this.afs.schedulers.outsideAngular).pipe((0,G.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),ye.iC)}get(e){return(0,ft.D)(this.query.get(e)).pipe(ye.iC)}}const mm=new U.OlP("angularfire2.enableFirestorePersistence"),nw=new U.OlP("angularfire2.firestore.persistenceSettings"),II=new U.OlP("angularfire2.firestore.settings"),Il=new U.OlP("angularfire2.firestore.use-emulator");function rw(n,e=(t=>t)){return{query:e(n),ref:n}}let Dy=(()=>{class n{constructor(t,s,a,f,v,M,B,W,ee,le,Oe,Qe,dt,jt,Jt,Hr,ci){this.schedulers=B;const er=(0,qe.on)(t,M,s),Ar=ee;le&&(0,at.nw)(er,M,Oe,dt,jt,Jt,Qe,Hr),[this.firestore,this.persistenceEnabled$]=(0,qe.cc)(`${er.name}.firestore`,"AngularFirestore",er.name,()=>{const Pr=M.runOutsideAngular(()=>er.firestore());if(f&&Pr.settings(f),Ar&&Pr.useEmulator(...Ar),a&&!(0,Ae.PM)(v)){const Or=()=>{try{return(0,ft.D)(Pr.enablePersistence(W||void 0).then(()=>!0,()=>!1))}catch(bo){return typeof console<"u"&&console.warn(bo),(0,Et.of)(!1)}};return[Pr,M.runOutsideAngular(Or)]}return[Pr,(0,Et.of)(!1)]},[f,Ar,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:f,query:v}=rw(a,s),M=this.schedulers.ngZone.run(()=>f);return new LE(M,v,this)}collectionGroup(t,s){const a=s||(v=>v),f=this.firestore.collectionGroup(t);return new UE(a(f),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new El(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(U.LFG(qe.Dh),U.LFG(qe.xv,8),U.LFG(mm,8),U.LFG(II,8),U.LFG(U.Lbi),U.LFG(U.R0b),U.LFG(ye.HU),U.LFG(nw,8),U.LFG(Il,8),U.LFG(at.zQ,8),U.LFG(at.Qv,8),U.LFG(at.L6,8),U.LFG(at._Q,8),U.LFG(at.rT,8),U.LFG(at.lh,8),U.LFG(at.f7,8),U.LFG(ms.nm,8))},n.\u0275prov=U.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),VE=(()=>{class n{constructor(){Je.Z.registerVersion("angularfire",ye.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:mm,useValue:!0},{provide:nw,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=U.oAB({type:n}),n.\u0275inj=U.cJS({providers:[Dy]}),n})();var BE=Y(5197);class Uh{}Uh.\u0275fac=function(e){return new(e||Uh)},Uh.\u0275mod=U.oAB({type:Uh,bootstrap:[At]}),Uh.\u0275inj=U.cJS({imports:[A.b2,ht,Qt.InfoBlinkModule,qe.hO.initializeApp({apiKey:"AIzaSyDQniFv0MVk-P6av15M29jGCCthbXwk_DE",authDomain:"infoblink-8a750.firebaseapp.com",databaseURL:"https://infoblink-8a750-default-rtdb.firebaseio.com",projectId:"infoblink-8a750",storageBucket:"infoblink-8a750.appspot.com",messagingSenderId:"847119905541",appId:"1:847119905541:web:50896fbc5d85a5338e3d6c",measurementId:"G-MD5VB7MNDS"}),at.ww,VE,_o,BE.JS]}),A.q6().bootstrapModule(Uh).catch(n=>console.error(n))},9751:(qt,We,Y)=>{Y.d(We,{y:()=>Fe});var A=Y(930),y=Y(727),U=Y(8822),Ae=Y(9635),De=Y(2416),xe=Y(576),Le=Y(2806);let Fe=(()=>{class Te{constructor(ht){ht&&(this._subscribe=ht)}lift(ht){const At=new Te;return At.source=this,At.operator=ht,At}subscribe(ht,At,Qt){const qe=function pe(Te){return Te&&Te instanceof A.Lv||function ge(Te){return Te&&(0,xe.m)(Te.next)&&(0,xe.m)(Te.error)&&(0,xe.m)(Te.complete)}(Te)&&(0,y.Nn)(Te)}(ht)?ht:new A.Hp(ht,At,Qt);return(0,Le.x)(()=>{const{operator:at,source:ot}=this;qe.add(at?at.call(qe,ot):ot?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(ht){try{return this._subscribe(ht)}catch(At){ht.error(At)}}forEach(ht,At){return new(At=Ve(At))((Qt,qe)=>{const at=new A.Hp({next:ot=>{try{ht(ot)}catch(Et){qe(Et),at.unsubscribe()}},error:qe,complete:Qt});this.subscribe(at)})}_subscribe(ht){var At;return null===(At=this.source)||void 0===At?void 0:At.subscribe(ht)}[U.L](){return this}pipe(...ht){return(0,Ae.U)(ht)(this)}toPromise(ht){return new(ht=Ve(ht))((At,Qt)=>{let qe;this.subscribe(at=>qe=at,at=>Qt(at),()=>At(qe))})}}return Te.create=yt=>new Te(yt),Te})();function Ve(Te){var yt;return null!==(yt=Te??De.v.Promise)&&void 0!==yt?yt:Promise}},7579:(qt,We,Y)=>{Y.d(We,{x:()=>Le});var A=Y(9751),y=Y(727);const Ae=(0,Y(3888).d)(Ve=>function(){Ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var De=Y(8737),xe=Y(2806);let Le=(()=>{class Ve extends A.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(pe){const Te=new Fe(this,this);return Te.operator=pe,Te}_throwIfClosed(){if(this.closed)throw new Ae}next(pe){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Te of this.currentObservers)Te.next(pe)}})}error(pe){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=pe;const{observers:Te}=this;for(;Te.length;)Te.shift().error(pe)}})}complete(){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:pe}=this;for(;pe.length;)pe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var pe;return(null===(pe=this.observers)||void 0===pe?void 0:pe.length)>0}_trySubscribe(pe){return this._throwIfClosed(),super._trySubscribe(pe)}_subscribe(pe){return this._throwIfClosed(),this._checkFinalizedStatuses(pe),this._innerSubscribe(pe)}_innerSubscribe(pe){const{hasError:Te,isStopped:yt,observers:ht}=this;return Te||yt?y.Lc:(this.currentObservers=null,ht.push(pe),new y.w0(()=>{this.currentObservers=null,(0,De.P)(ht,pe)}))}_checkFinalizedStatuses(pe){const{hasError:Te,thrownError:yt,isStopped:ht}=this;Te?pe.error(yt):ht&&pe.complete()}asObservable(){const pe=new A.y;return pe.source=this,pe}}return Ve.create=(ge,pe)=>new Fe(ge,pe),Ve})();class Fe extends Le{constructor(ge,pe){super(),this.destination=ge,this.source=pe}next(ge){var pe,Te;null===(Te=null===(pe=this.destination)||void 0===pe?void 0:pe.next)||void 0===Te||Te.call(pe,ge)}error(ge){var pe,Te;null===(Te=null===(pe=this.destination)||void 0===pe?void 0:pe.error)||void 0===Te||Te.call(pe,ge)}complete(){var ge,pe;null===(pe=null===(ge=this.destination)||void 0===ge?void 0:ge.complete)||void 0===pe||pe.call(ge)}_subscribe(ge){var pe,Te;return null!==(Te=null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(ge))&&void 0!==Te?Te:y.Lc}}},930:(qt,We,Y)=>{Y.d(We,{Hp:()=>Qt,Lv:()=>Te});var A=Y(576),y=Y(727),U=Y(2416),Ae=Y(7849),De=Y(5032);const xe=Ve("C",void 0,void 0);function Ve(ft,st,rt){return{kind:ft,value:st,error:rt}}var ge=Y(3410),pe=Y(2806);class Te extends y.w0{constructor(st){super(),this.isStopped=!1,st?(this.destination=st,(0,y.Nn)(st)&&st.add(this)):this.destination=Et}static create(st,rt,Ct){return new Qt(st,rt,Ct)}next(st){this.isStopped?ot(function Fe(ft){return Ve("N",ft,void 0)}(st),this):this._next(st)}error(st){this.isStopped?ot(function Le(ft){return Ve("E",void 0,ft)}(st),this):(this.isStopped=!0,this._error(st))}complete(){this.isStopped?ot(xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(st){this.destination.next(st)}_error(st){try{this.destination.error(st)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const yt=Function.prototype.bind;function ht(ft,st){return yt.call(ft,st)}class At{constructor(st){this.partialObserver=st}next(st){const{partialObserver:rt}=this;if(rt.next)try{rt.next(st)}catch(Ct){qe(Ct)}}error(st){const{partialObserver:rt}=this;if(rt.error)try{rt.error(st)}catch(Ct){qe(Ct)}else qe(st)}complete(){const{partialObserver:st}=this;if(st.complete)try{st.complete()}catch(rt){qe(rt)}}}class Qt extends Te{constructor(st,rt,Ct){let vt;if(super(),(0,A.m)(st)||!st)vt={next:st??void 0,error:rt??void 0,complete:Ct??void 0};else{let G;this&&U.v.useDeprecatedNextContext?(G=Object.create(st),G.unsubscribe=()=>this.unsubscribe(),vt={next:st.next&&ht(st.next,G),error:st.error&&ht(st.error,G),complete:st.complete&&ht(st.complete,G)}):vt=st}this.destination=new At(vt)}}function qe(ft){U.v.useDeprecatedSynchronousErrorHandling?(0,pe.O)(ft):(0,Ae.h)(ft)}function ot(ft,st){const{onStoppedNotification:rt}=U.v;rt&&ge.z.setTimeout(()=>rt(ft,st))}const Et={closed:!0,next:De.Z,error:function at(ft){throw ft},complete:De.Z}},727:(qt,We,Y)=>{Y.d(We,{Lc:()=>xe,w0:()=>De,Nn:()=>Le});var A=Y(576);const U=(0,Y(3888).d)(Ve=>function(pe){Ve(this),this.message=pe?`${pe.length} errors occurred during unsubscription:\n${pe.map((Te,yt)=>`${yt+1}) ${Te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=pe});var Ae=Y(8737);class De{constructor(ge){this.initialTeardown=ge,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ge;if(!this.closed){this.closed=!0;const{_parentage:pe}=this;if(pe)if(this._parentage=null,Array.isArray(pe))for(const ht of pe)ht.remove(this);else pe.remove(this);const{initialTeardown:Te}=this;if((0,A.m)(Te))try{Te()}catch(ht){ge=ht instanceof U?ht.errors:[ht]}const{_finalizers:yt}=this;if(yt){this._finalizers=null;for(const ht of yt)try{Fe(ht)}catch(At){ge=ge??[],At instanceof U?ge=[...ge,...At.errors]:ge.push(At)}}if(ge)throw new U(ge)}}add(ge){var pe;if(ge&&ge!==this)if(this.closed)Fe(ge);else{if(ge instanceof De){if(ge.closed||ge._hasParent(this))return;ge._addParent(this)}(this._finalizers=null!==(pe=this._finalizers)&&void 0!==pe?pe:[]).push(ge)}}_hasParent(ge){const{_parentage:pe}=this;return pe===ge||Array.isArray(pe)&&pe.includes(ge)}_addParent(ge){const{_parentage:pe}=this;this._parentage=Array.isArray(pe)?(pe.push(ge),pe):pe?[pe,ge]:ge}_removeParent(ge){const{_parentage:pe}=this;pe===ge?this._parentage=null:Array.isArray(pe)&&(0,Ae.P)(pe,ge)}remove(ge){const{_finalizers:pe}=this;pe&&(0,Ae.P)(pe,ge),ge instanceof De&&ge._removeParent(this)}}De.EMPTY=(()=>{const Ve=new De;return Ve.closed=!0,Ve})();const xe=De.EMPTY;function Le(Ve){return Ve instanceof De||Ve&&"closed"in Ve&&(0,A.m)(Ve.remove)&&(0,A.m)(Ve.add)&&(0,A.m)(Ve.unsubscribe)}function Fe(Ve){(0,A.m)(Ve)?Ve():Ve.unsubscribe()}},2416:(qt,We,Y)=>{Y.d(We,{v:()=>A});const A={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(qt,We,Y)=>{Y.d(We,{z:()=>De});var A=Y(8189),U=Y(7669),Ae=Y(8996);function De(...xe){return function y(){return(0,A.J)(1)}()((0,Ae.D)(xe,(0,U.yG)(xe)))}},515:(qt,We,Y)=>{Y.d(We,{E:()=>y});const y=new(Y(9751).y)(De=>De.complete())},8996:(qt,We,Y)=>{Y.d(We,{D:()=>st});var A=Y(8421),y=Y(5363),U=Y(9468),xe=Y(9751),Fe=Y(2202),Ve=Y(576),ge=Y(9672);function Te(rt,Ct){if(!rt)throw new Error("Iterable cannot be null");return new xe.y(vt=>{(0,ge.f)(vt,Ct,()=>{const G=rt[Symbol.asyncIterator]();(0,ge.f)(vt,Ct,()=>{G.next().then(Xe=>{Xe.done?vt.complete():vt.next(Xe.value)})},0,!0)})})}var yt=Y(3670),ht=Y(8239),At=Y(1144),Qt=Y(6495),qe=Y(2206),at=Y(4532),ot=Y(3260);function st(rt,Ct){return Ct?function ft(rt,Ct){if(null!=rt){if((0,yt.c)(rt))return function Ae(rt,Ct){return(0,A.Xf)(rt).pipe((0,U.R)(Ct),(0,y.Q)(Ct))}(rt,Ct);if((0,At.z)(rt))return function Le(rt,Ct){return new xe.y(vt=>{let G=0;return Ct.schedule(function(){G===rt.length?vt.complete():(vt.next(rt[G++]),vt.closed||this.schedule())})})}(rt,Ct);if((0,ht.t)(rt))return function De(rt,Ct){return(0,A.Xf)(rt).pipe((0,U.R)(Ct),(0,y.Q)(Ct))}(rt,Ct);if((0,qe.D)(rt))return Te(rt,Ct);if((0,Qt.T)(rt))return function pe(rt,Ct){return new xe.y(vt=>{let G;return(0,ge.f)(vt,Ct,()=>{G=rt[Fe.h](),(0,ge.f)(vt,Ct,()=>{let Xe,ye;try{({value:Xe,done:ye}=G.next())}catch(Ce){return void vt.error(Ce)}ye?vt.complete():vt.next(Xe)},0,!0)}),()=>(0,Ve.m)(G?.return)&&G.return()})}(rt,Ct);if((0,ot.L)(rt))return function Et(rt,Ct){return Te((0,ot.Q)(rt),Ct)}(rt,Ct)}throw(0,at.z)(rt)}(rt,Ct):(0,A.Xf)(rt)}},8421:(qt,We,Y)=>{Y.d(We,{Xf:()=>yt});var A=Y(655),y=Y(1144),U=Y(8239),Ae=Y(9751),De=Y(3670),xe=Y(2206),Le=Y(4532),Fe=Y(6495),Ve=Y(3260),ge=Y(576),pe=Y(7849),Te=Y(8822);function yt(ft){if(ft instanceof Ae.y)return ft;if(null!=ft){if((0,De.c)(ft))return function ht(ft){return new Ae.y(st=>{const rt=ft[Te.L]();if((0,ge.m)(rt.subscribe))return rt.subscribe(st);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ft);if((0,y.z)(ft))return function At(ft){return new Ae.y(st=>{for(let rt=0;rt<ft.length&&!st.closed;rt++)st.next(ft[rt]);st.complete()})}(ft);if((0,U.t)(ft))return function Qt(ft){return new Ae.y(st=>{ft.then(rt=>{st.closed||(st.next(rt),st.complete())},rt=>st.error(rt)).then(null,pe.h)})}(ft);if((0,xe.D)(ft))return at(ft);if((0,Fe.T)(ft))return function qe(ft){return new Ae.y(st=>{for(const rt of ft)if(st.next(rt),st.closed)return;st.complete()})}(ft);if((0,Ve.L)(ft))return function ot(ft){return at((0,Ve.Q)(ft))}(ft)}throw(0,Le.z)(ft)}function at(ft){return new Ae.y(st=>{(function Et(ft,st){var rt,Ct,vt,G;return(0,A.mG)(this,void 0,void 0,function*(){try{for(rt=(0,A.KL)(ft);!(Ct=yield rt.next()).done;)if(st.next(Ct.value),st.closed)return}catch(Xe){vt={error:Xe}}finally{try{Ct&&!Ct.done&&(G=rt.return)&&(yield G.call(rt))}finally{if(vt)throw vt.error}}st.complete()})})(ft,st).catch(rt=>st.error(rt))})}},6451:(qt,We,Y)=>{Y.d(We,{T:()=>xe});var A=Y(8189),y=Y(8421),U=Y(515),Ae=Y(7669),De=Y(8996);function xe(...Le){const Fe=(0,Ae.yG)(Le),Ve=(0,Ae._6)(Le,1/0),ge=Le;return ge.length?1===ge.length?(0,y.Xf)(ge[0]):(0,A.J)(Ve)((0,De.D)(ge,Fe)):U.E}},9646:(qt,We,Y)=>{Y.d(We,{of:()=>U});var A=Y(7669),y=Y(8996);function U(...Ae){const De=(0,A.yG)(Ae);return(0,y.D)(Ae,De)}},5403:(qt,We,Y)=>{Y.d(We,{x:()=>y});var A=Y(930);function y(Ae,De,xe,Le,Fe){return new U(Ae,De,xe,Le,Fe)}class U extends A.Lv{constructor(De,xe,Le,Fe,Ve,ge){super(De),this.onFinalize=Ve,this.shouldUnsubscribe=ge,this._next=xe?function(pe){try{xe(pe)}catch(Te){De.error(Te)}}:super._next,this._error=Fe?function(pe){try{Fe(pe)}catch(Te){De.error(Te)}finally{this.unsubscribe()}}:super._error,this._complete=Le?function(){try{Le()}catch(pe){De.error(pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var De;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:xe}=this;super.unsubscribe(),!xe&&(null===(De=this.onFinalize)||void 0===De||De.call(this))}}}},6590:(qt,We,Y)=>{Y.d(We,{d:()=>U});var A=Y(4482),y=Y(5403);function U(Ae){return(0,A.e)((De,xe)=>{let Le=!1;De.subscribe((0,y.x)(xe,Fe=>{Le=!0,xe.next(Fe)},()=>{Le||xe.next(Ae),xe.complete()}))})}},1884:(qt,We,Y)=>{Y.d(We,{x:()=>Ae});var A=Y(4671),y=Y(4482),U=Y(5403);function Ae(xe,Le=A.y){return xe=xe??De,(0,y.e)((Fe,Ve)=>{let ge,pe=!0;Fe.subscribe((0,U.x)(Ve,Te=>{const yt=Le(Te);(pe||!xe(ge,yt))&&(pe=!1,ge=yt,Ve.next(Te))}))})}function De(xe,Le){return xe===Le}},9300:(qt,We,Y)=>{Y.d(We,{h:()=>U});var A=Y(4482),y=Y(5403);function U(Ae,De){return(0,A.e)((xe,Le)=>{let Fe=0;xe.subscribe((0,y.x)(Le,Ve=>Ae.call(De,Ve,Fe++)&&Le.next(Ve)))})}},590:(qt,We,Y)=>{Y.d(We,{P:()=>Le});var A=Y(6805),y=Y(9300),U=Y(5698),Ae=Y(6590),De=Y(8068),xe=Y(4671);function Le(Fe,Ve){const ge=arguments.length>=2;return pe=>pe.pipe(Fe?(0,y.h)((Te,yt)=>Fe(Te,yt,pe)):xe.y,(0,U.q)(1),ge?(0,Ae.d)(Ve):(0,De.T)(()=>new A.K))}},4004:(qt,We,Y)=>{Y.d(We,{U:()=>U});var A=Y(4482),y=Y(5403);function U(Ae,De){return(0,A.e)((xe,Le)=>{let Fe=0;xe.subscribe((0,y.x)(Le,Ve=>{Le.next(Ae.call(De,Ve,Fe++))}))})}},8189:(qt,We,Y)=>{Y.d(We,{J:()=>U});var A=Y(5577),y=Y(4671);function U(Ae=1/0){return(0,A.z)(y.y,Ae)}},5577:(qt,We,Y)=>{Y.d(We,{z:()=>Fe});var A=Y(4004),y=Y(8421),U=Y(4482),Ae=Y(9672),De=Y(5403),Le=Y(576);function Fe(Ve,ge,pe=1/0){return(0,Le.m)(ge)?Fe((Te,yt)=>(0,A.U)((ht,At)=>ge(Te,ht,yt,At))((0,y.Xf)(Ve(Te,yt))),pe):("number"==typeof ge&&(pe=ge),(0,U.e)((Te,yt)=>function xe(Ve,ge,pe,Te,yt,ht,At,Qt){const qe=[];let at=0,ot=0,Et=!1;const ft=()=>{Et&&!qe.length&&!at&&ge.complete()},st=Ct=>at<Te?rt(Ct):qe.push(Ct),rt=Ct=>{ht&&ge.next(Ct),at++;let vt=!1;(0,y.Xf)(pe(Ct,ot++)).subscribe((0,De.x)(ge,G=>{yt?.(G),ht?st(G):ge.next(G)},()=>{vt=!0},void 0,()=>{if(vt)try{for(at--;qe.length&&at<Te;){const G=qe.shift();At?(0,Ae.f)(ge,At,()=>rt(G)):rt(G)}ft()}catch(G){ge.error(G)}}))};return Ve.subscribe((0,De.x)(ge,st,()=>{Et=!0,ft()})),()=>{Qt?.()}}(Te,yt,Ve,pe)))}},5363:(qt,We,Y)=>{Y.d(We,{Q:()=>Ae});var A=Y(9672),y=Y(4482),U=Y(5403);function Ae(De,xe=0){return(0,y.e)((Le,Fe)=>{Le.subscribe((0,U.x)(Fe,Ve=>(0,A.f)(Fe,De,()=>Fe.next(Ve),xe),()=>(0,A.f)(Fe,De,()=>Fe.complete(),xe),Ve=>(0,A.f)(Fe,De,()=>Fe.error(Ve),xe)))})}},5026:(qt,We,Y)=>{Y.d(We,{R:()=>Ae});var A=Y(4482),y=Y(5403);function U(De,xe,Le,Fe,Ve){return(ge,pe)=>{let Te=Le,yt=xe,ht=0;ge.subscribe((0,y.x)(pe,At=>{const Qt=ht++;yt=Te?De(yt,At,Qt):(Te=!0,At),Fe&&pe.next(yt)},Ve&&(()=>{Te&&pe.next(yt),pe.complete()})))}}function Ae(De,xe){return(0,A.e)(U(De,xe,arguments.length>=2,!0))}},3099:(qt,We,Y)=>{Y.d(We,{B:()=>De});var A=Y(8421),y=Y(7579),U=Y(930),Ae=Y(4482);function De(Le={}){const{connector:Fe=(()=>new y.x),resetOnError:Ve=!0,resetOnComplete:ge=!0,resetOnRefCountZero:pe=!0}=Le;return Te=>{let yt,ht,At,Qt=0,qe=!1,at=!1;const ot=()=>{ht?.unsubscribe(),ht=void 0},Et=()=>{ot(),yt=At=void 0,qe=at=!1},ft=()=>{const st=yt;Et(),st?.unsubscribe()};return(0,Ae.e)((st,rt)=>{Qt++,!at&&!qe&&ot();const Ct=At=At??Fe();rt.add(()=>{Qt--,0===Qt&&!at&&!qe&&(ht=xe(ft,pe))}),Ct.subscribe(rt),!yt&&Qt>0&&(yt=new U.Hp({next:vt=>Ct.next(vt),error:vt=>{at=!0,ot(),ht=xe(Et,Ve,vt),Ct.error(vt)},complete:()=>{qe=!0,ot(),ht=xe(Et,ge),Ct.complete()}}),(0,A.Xf)(st).subscribe(yt))})(Te)}}function xe(Le,Fe,...Ve){if(!0===Fe)return void Le();if(!1===Fe)return;const ge=new U.Hp({next:()=>{ge.unsubscribe(),Le()}});return(0,A.Xf)(Fe(...Ve)).subscribe(ge)}},8675:(qt,We,Y)=>{Y.d(We,{O:()=>Ae});var A=Y(7272),y=Y(7669),U=Y(4482);function Ae(...De){const xe=(0,y.yG)(De);return(0,U.e)((Le,Fe)=>{(xe?(0,A.z)(De,Le,xe):(0,A.z)(De,Le)).subscribe(Fe)})}},9468:(qt,We,Y)=>{Y.d(We,{R:()=>y});var A=Y(4482);function y(U,Ae=0){return(0,A.e)((De,xe)=>{xe.add(U.schedule(()=>De.subscribe(xe),Ae))})}},3900:(qt,We,Y)=>{Y.d(We,{w:()=>Ae});var A=Y(8421),y=Y(4482),U=Y(5403);function Ae(De,xe){return(0,y.e)((Le,Fe)=>{let Ve=null,ge=0,pe=!1;const Te=()=>pe&&!Ve&&Fe.complete();Le.subscribe((0,U.x)(Fe,yt=>{Ve?.unsubscribe();let ht=0;const At=ge++;(0,A.Xf)(De(yt,At)).subscribe(Ve=(0,U.x)(Fe,Qt=>Fe.next(xe?xe(yt,Qt,At,ht++):Qt),()=>{Ve=null,Te()}))},()=>{pe=!0,Te()}))})}},5698:(qt,We,Y)=>{Y.d(We,{q:()=>Ae});var A=Y(515),y=Y(4482),U=Y(5403);function Ae(De){return De<=0?()=>A.E:(0,y.e)((xe,Le)=>{let Fe=0;xe.subscribe((0,U.x)(Le,Ve=>{++Fe<=De&&(Le.next(Ve),De<=Fe&&Le.complete())}))})}},8505:(qt,We,Y)=>{Y.d(We,{b:()=>De});var A=Y(576),y=Y(4482),U=Y(5403),Ae=Y(4671);function De(xe,Le,Fe){const Ve=(0,A.m)(xe)||Le||Fe?{next:xe,error:Le,complete:Fe}:xe;return Ve?(0,y.e)((ge,pe)=>{var Te;null===(Te=Ve.subscribe)||void 0===Te||Te.call(Ve);let yt=!0;ge.subscribe((0,U.x)(pe,ht=>{var At;null===(At=Ve.next)||void 0===At||At.call(Ve,ht),pe.next(ht)},()=>{var ht;yt=!1,null===(ht=Ve.complete)||void 0===ht||ht.call(Ve),pe.complete()},ht=>{var At;yt=!1,null===(At=Ve.error)||void 0===At||At.call(Ve,ht),pe.error(ht)},()=>{var ht,At;yt&&(null===(ht=Ve.unsubscribe)||void 0===ht||ht.call(Ve)),null===(At=Ve.finalize)||void 0===At||At.call(Ve)}))}):Ae.y}},8068:(qt,We,Y)=>{Y.d(We,{T:()=>Ae});var A=Y(6805),y=Y(4482),U=Y(5403);function Ae(xe=De){return(0,y.e)((Le,Fe)=>{let Ve=!1;Le.subscribe((0,U.x)(Fe,ge=>{Ve=!0,Fe.next(ge)},()=>Ve?Fe.complete():Fe.error(xe())))})}function De(){return new A.K}},4408:(qt,We,Y)=>{Y.d(We,{o:()=>De});var A=Y(727);class y extends A.w0{constructor(Le,Fe){super()}schedule(Le,Fe=0){return this}}const U={setInterval(xe,Le,...Fe){const{delegate:Ve}=U;return Ve?.setInterval?Ve.setInterval(xe,Le,...Fe):setInterval(xe,Le,...Fe)},clearInterval(xe){const{delegate:Le}=U;return(Le?.clearInterval||clearInterval)(xe)},delegate:void 0};var Ae=Y(8737);class De extends y{constructor(Le,Fe){super(Le,Fe),this.scheduler=Le,this.work=Fe,this.pending=!1}schedule(Le,Fe=0){var Ve;if(this.closed)return this;this.state=Le;const ge=this.id,pe=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(pe,ge,Fe)),this.pending=!0,this.delay=Fe,this.id=null!==(Ve=this.id)&&void 0!==Ve?Ve:this.requestAsyncId(pe,this.id,Fe),this}requestAsyncId(Le,Fe,Ve=0){return U.setInterval(Le.flush.bind(Le,this),Ve)}recycleAsyncId(Le,Fe,Ve=0){if(null!=Ve&&this.delay===Ve&&!1===this.pending)return Fe;null!=Fe&&U.clearInterval(Fe)}execute(Le,Fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ve=this._execute(Le,Fe);if(Ve)return Ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Le,Fe){let ge,Ve=!1;try{this.work(Le)}catch(pe){Ve=!0,ge=pe||new Error("Scheduled action threw falsy error")}if(Ve)return this.unsubscribe(),ge}unsubscribe(){if(!this.closed){const{id:Le,scheduler:Fe}=this,{actions:Ve}=Fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ae.P)(Ve,this),null!=Le&&(this.id=this.recycleAsyncId(Fe,Le,null)),this.delay=null,super.unsubscribe()}}}},7565:(qt,We,Y)=>{Y.d(We,{v:()=>U});var A=Y(6063);class y{constructor(De,xe=y.now){this.schedulerActionCtor=De,this.now=xe}schedule(De,xe=0,Le){return new this.schedulerActionCtor(this,De).schedule(Le,xe)}}y.now=A.l.now;class U extends y{constructor(De,xe=y.now){super(De,xe),this.actions=[],this._active=!1}flush(De){const{actions:xe}=this;if(this._active)return void xe.push(De);let Le;this._active=!0;do{if(Le=De.execute(De.state,De.delay))break}while(De=xe.shift());if(this._active=!1,Le){for(;De=xe.shift();)De.unsubscribe();throw Le}}}},4986:(qt,We,Y)=>{Y.d(We,{z:()=>U});var A=Y(4408);const U=new(Y(7565).v)(A.o)},6063:(qt,We,Y)=>{Y.d(We,{l:()=>A});const A={now:()=>(A.delegate||Date).now(),delegate:void 0}},3410:(qt,We,Y)=>{Y.d(We,{z:()=>A});const A={setTimeout(y,U,...Ae){const{delegate:De}=A;return De?.setTimeout?De.setTimeout(y,U,...Ae):setTimeout(y,U,...Ae)},clearTimeout(y){const{delegate:U}=A;return(U?.clearTimeout||clearTimeout)(y)},delegate:void 0}},2202:(qt,We,Y)=>{Y.d(We,{h:()=>y});const y=function A(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(qt,We,Y)=>{Y.d(We,{L:()=>A});const A="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(qt,We,Y)=>{Y.d(We,{K:()=>y});const y=(0,Y(3888).d)(U=>function(){U(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(qt,We,Y)=>{Y.d(We,{_6:()=>xe,jO:()=>Ae,yG:()=>De});var A=Y(576);function U(Le){return Le[Le.length-1]}function Ae(Le){return(0,A.m)(U(Le))?Le.pop():void 0}function De(Le){return function y(Le){return Le&&(0,A.m)(Le.schedule)}(U(Le))?Le.pop():void 0}function xe(Le,Fe){return"number"==typeof U(Le)?Le.pop():Fe}},4742:(qt,We,Y)=>{Y.d(We,{D:()=>De});const{isArray:A}=Array,{getPrototypeOf:y,prototype:U,keys:Ae}=Object;function De(Le){if(1===Le.length){const Fe=Le[0];if(A(Fe))return{args:Fe,keys:null};if(function xe(Le){return Le&&"object"==typeof Le&&y(Le)===U}(Fe)){const Ve=Ae(Fe);return{args:Ve.map(ge=>Fe[ge]),keys:Ve}}}return{args:Le,keys:null}}},8737:(qt,We,Y)=>{function A(y,U){if(y){const Ae=y.indexOf(U);0<=Ae&&y.splice(Ae,1)}}Y.d(We,{P:()=>A})},3888:(qt,We,Y)=>{function A(y){const Ae=y(De=>{Error.call(De),De.stack=(new Error).stack});return Ae.prototype=Object.create(Error.prototype),Ae.prototype.constructor=Ae,Ae}Y.d(We,{d:()=>A})},1810:(qt,We,Y)=>{function A(y,U){return y.reduce((Ae,De,xe)=>(Ae[De]=U[xe],Ae),{})}Y.d(We,{n:()=>A})},2806:(qt,We,Y)=>{Y.d(We,{O:()=>Ae,x:()=>U});var A=Y(2416);let y=null;function U(De){if(A.v.useDeprecatedSynchronousErrorHandling){const xe=!y;if(xe&&(y={errorThrown:!1,error:null}),De(),xe){const{errorThrown:Le,error:Fe}=y;if(y=null,Le)throw Fe}}else De()}function Ae(De){A.v.useDeprecatedSynchronousErrorHandling&&y&&(y.errorThrown=!0,y.error=De)}},9672:(qt,We,Y)=>{function A(y,U,Ae,De=0,xe=!1){const Le=U.schedule(function(){Ae(),xe?y.add(this.schedule(null,De)):this.unsubscribe()},De);if(y.add(Le),!xe)return Le}Y.d(We,{f:()=>A})},4671:(qt,We,Y)=>{function A(y){return y}Y.d(We,{y:()=>A})},1144:(qt,We,Y)=>{Y.d(We,{z:()=>A});const A=y=>y&&"number"==typeof y.length&&"function"!=typeof y},2206:(qt,We,Y)=>{Y.d(We,{D:()=>y});var A=Y(576);function y(U){return Symbol.asyncIterator&&(0,A.m)(U?.[Symbol.asyncIterator])}},576:(qt,We,Y)=>{function A(y){return"function"==typeof y}Y.d(We,{m:()=>A})},3670:(qt,We,Y)=>{Y.d(We,{c:()=>U});var A=Y(8822),y=Y(576);function U(Ae){return(0,y.m)(Ae[A.L])}},6495:(qt,We,Y)=>{Y.d(We,{T:()=>U});var A=Y(2202),y=Y(576);function U(Ae){return(0,y.m)(Ae?.[A.h])}},8239:(qt,We,Y)=>{Y.d(We,{t:()=>y});var A=Y(576);function y(U){return(0,A.m)(U?.then)}},3260:(qt,We,Y)=>{Y.d(We,{L:()=>Ae,Q:()=>U});var A=Y(655),y=Y(576);function U(De){return(0,A.FC)(this,arguments,function*(){const Le=De.getReader();try{for(;;){const{value:Fe,done:Ve}=yield(0,A.qq)(Le.read());if(Ve)return yield(0,A.qq)(void 0);yield yield(0,A.qq)(Fe)}}finally{Le.releaseLock()}})}function Ae(De){return(0,y.m)(De?.getReader)}},4482:(qt,We,Y)=>{Y.d(We,{A:()=>y,e:()=>U});var A=Y(576);function y(Ae){return(0,A.m)(Ae?.lift)}function U(Ae){return De=>{if(y(De))return De.lift(function(xe){try{return Ae(xe,this)}catch(Le){this.error(Le)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(qt,We,Y)=>{Y.d(We,{Z:()=>Ae});var A=Y(4004);const{isArray:y}=Array;function Ae(De){return(0,A.U)(xe=>function U(De,xe){return y(xe)?De(...xe):De(xe)}(De,xe))}},5032:(qt,We,Y)=>{function A(){}Y.d(We,{Z:()=>A})},9635:(qt,We,Y)=>{Y.d(We,{U:()=>U,z:()=>y});var A=Y(4671);function y(...Ae){return U(Ae)}function U(Ae){return 0===Ae.length?A.y:1===Ae.length?Ae[0]:function(xe){return Ae.reduce((Le,Fe)=>Fe(Le),xe)}}},7849:(qt,We,Y)=>{Y.d(We,{h:()=>U});var A=Y(2416),y=Y(3410);function U(Ae){y.z.setTimeout(()=>{const{onUnhandledError:De}=A.v;if(!De)throw Ae;De(Ae)})}},4532:(qt,We,Y)=>{function A(y){return new TypeError(`You provided ${null!==y&&"object"==typeof y?"an invalid object":`'${y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}Y.d(We,{z:()=>A})},655:(qt,We,Y)=>{function Ae(ye,Ce){var se={};for(var ke in ye)Object.prototype.hasOwnProperty.call(ye,ke)&&Ce.indexOf(ke)<0&&(se[ke]=ye[ke]);if(null!=ye&&"function"==typeof Object.getOwnPropertySymbols){var Ke=0;for(ke=Object.getOwnPropertySymbols(ye);Ke<ke.length;Ke++)Ce.indexOf(ke[Ke])<0&&Object.prototype.propertyIsEnumerable.call(ye,ke[Ke])&&(se[ke[Ke]]=ye[ke[Ke]])}return se}function Fe(ye,Ce,se,ke){return new(se||(se=Promise))(function(Tt,St){function Ot($t){try{kt(ke.next($t))}catch(Dt){St(Dt)}}function dn($t){try{kt(ke.throw($t))}catch(Dt){St(Dt)}}function kt($t){$t.done?Tt($t.value):function Ke(Tt){return Tt instanceof se?Tt:new se(function(St){St(Tt)})}($t.value).then(Ot,dn)}kt((ke=ke.apply(ye,Ce||[])).next())})}function qe(ye){return this instanceof qe?(this.v=ye,this):new qe(ye)}function at(ye,Ce,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ke,ke=se.apply(ye,Ce||[]),Tt=[];return Ke={},St("next"),St("throw"),St("return"),Ke[Symbol.asyncIterator]=function(){return this},Ke;function St(Nt){ke[Nt]&&(Ke[Nt]=function(Cn){return new Promise(function(zn,nn){Tt.push([Nt,Cn,zn,nn])>1||Ot(Nt,Cn)})})}function Ot(Nt,Cn){try{!function dn(Nt){Nt.value instanceof qe?Promise.resolve(Nt.value.v).then(kt,$t):Dt(Tt[0][2],Nt)}(ke[Nt](Cn))}catch(zn){Dt(Tt[0][3],zn)}}function kt(Nt){Ot("next",Nt)}function $t(Nt){Ot("throw",Nt)}function Dt(Nt,Cn){Nt(Cn),Tt.shift(),Tt.length&&Ot(Tt[0][0],Tt[0][1])}}function Et(ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,Ce=ye[Symbol.asyncIterator];return Ce?Ce.call(ye):(ye=function Te(ye){var Ce="function"==typeof Symbol&&Symbol.iterator,se=Ce&&ye[Ce],ke=0;if(se)return se.call(ye);if(ye&&"number"==typeof ye.length)return{next:function(){return ye&&ke>=ye.length&&(ye=void 0),{value:ye&&ye[ke++],done:!ye}}};throw new TypeError(Ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ye),se={},ke("next"),ke("throw"),ke("return"),se[Symbol.asyncIterator]=function(){return this},se);function ke(Tt){se[Tt]=ye[Tt]&&function(St){return new Promise(function(Ot,dn){!function Ke(Tt,St,Ot,dn){Promise.resolve(dn).then(function(kt){Tt({value:kt,done:Ot})},St)}(Ot,dn,(St=ye[Tt](St)).done,St.value)})}}}Y.d(We,{FC:()=>at,KL:()=>Et,_T:()=>Ae,mG:()=>Fe,qq:()=>qe})},6895:(qt,We,Y)=>{Y.d(We,{Do:()=>ot,EM:()=>So,HT:()=>Ae,JF:()=>lu,JJ:()=>Bs,K0:()=>xe,Mx:()=>vr,O5:()=>es,PM:()=>ia,S$:()=>Qt,V_:()=>Ve,Ye:()=>Et,b0:()=>at,bD:()=>Ga,ez:()=>Ta,q:()=>U,sg:()=>cs,w_:()=>De});var A=Y(4650);let y=null;function U(){return y}function Ae(O){y||(y=O)}class De{}const xe=new A.OlP("DocumentToken");let Le=(()=>{class O{historyGo(V){throw new Error("Not implemented")}}return O.\u0275fac=function(V){return new(V||O)},O.\u0275prov=A.Yz7({token:O,factory:function(){return function Fe(){return(0,A.LFG)(ge)}()},providedIn:"platform"}),O})();const Ve=new A.OlP("Location Initialized");let ge=(()=>{class O extends Le{constructor(V){super(),this._doc=V,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(V){const Q=U().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("popstate",V,!1),()=>Q.removeEventListener("popstate",V)}onHashChange(V){const Q=U().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("hashchange",V,!1),()=>Q.removeEventListener("hashchange",V)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(V){this._location.pathname=V}pushState(V,Q,ce){pe()?this._history.pushState(V,Q,ce):this._location.hash=ce}replaceState(V,Q,ce){pe()?this._history.replaceState(V,Q,ce):this._location.hash=ce}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return O.\u0275fac=function(V){return new(V||O)(A.LFG(xe))},O.\u0275prov=A.Yz7({token:O,factory:function(){return function Te(){return new ge((0,A.LFG)(xe))}()},providedIn:"platform"}),O})();function pe(){return!!window.history.pushState}function yt(O,K){if(0==O.length)return K;if(0==K.length)return O;let V=0;return O.endsWith("/")&&V++,K.startsWith("/")&&V++,2==V?O+K.substring(1):1==V?O+K:O+"/"+K}function ht(O){const K=O.match(/#|\?|$/),V=K&&K.index||O.length;return O.slice(0,V-("/"===O[V-1]?1:0))+O.slice(V)}function At(O){return O&&"?"!==O[0]?"?"+O:O}let Qt=(()=>{class O{historyGo(V){throw new Error("Not implemented")}}return O.\u0275fac=function(V){return new(V||O)},O.\u0275prov=A.Yz7({token:O,factory:function(){return(0,A.f3M)(at)},providedIn:"root"}),O})();const qe=new A.OlP("appBaseHref");let at=(()=>{class O extends Qt{constructor(V,Q){super(),this._platformLocation=V,this._removeListenerFns=[],this._baseHref=Q??this._platformLocation.getBaseHrefFromDOM()??(0,A.f3M)(xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return yt(this._baseHref,V)}path(V=!1){const Q=this._platformLocation.pathname+At(this._platformLocation.search),ce=this._platformLocation.hash;return ce&&V?`${Q}${ce}`:Q}pushState(V,Q,ce,He){const ct=this.prepareExternalUrl(ce+At(He));this._platformLocation.pushState(V,Q,ct)}replaceState(V,Q,ce,He){const ct=this.prepareExternalUrl(ce+At(He));this._platformLocation.replaceState(V,Q,ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){this._platformLocation.historyGo?.(V)}}return O.\u0275fac=function(V){return new(V||O)(A.LFG(Le),A.LFG(qe,8))},O.\u0275prov=A.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),ot=(()=>{class O extends Qt{constructor(V,Q){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=Q&&(this._baseHref=Q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let Q=this._platformLocation.hash;return null==Q&&(Q="#"),Q.length>0?Q.substring(1):Q}prepareExternalUrl(V){const Q=yt(this._baseHref,V);return Q.length>0?"#"+Q:Q}pushState(V,Q,ce,He){let ct=this.prepareExternalUrl(ce+At(He));0==ct.length&&(ct=this._platformLocation.pathname),this._platformLocation.pushState(V,Q,ct)}replaceState(V,Q,ce,He){let ct=this.prepareExternalUrl(ce+At(He));0==ct.length&&(ct=this._platformLocation.pathname),this._platformLocation.replaceState(V,Q,ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){this._platformLocation.historyGo?.(V)}}return O.\u0275fac=function(V){return new(V||O)(A.LFG(Le),A.LFG(qe,8))},O.\u0275prov=A.Yz7({token:O,factory:O.\u0275fac}),O})(),Et=(()=>{class O{constructor(V){this._subject=new A.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=V;const Q=this._locationStrategy.getBaseHref();this._basePath=function Ct(O){if(new RegExp("^(https?:)?//").test(O)){const[,V]=O.split(/\/\/[^\/]+/);return V}return O}(ht(rt(Q))),this._locationStrategy.onPopState(ce=>{this._subject.emit({url:this.path(!0),pop:!0,state:ce.state,type:ce.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(V=!1){return this.normalize(this._locationStrategy.path(V))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(V,Q=""){return this.path()==this.normalize(V+At(Q))}normalize(V){return O.stripTrailingSlash(function st(O,K){return O&&new RegExp(`^${O}([/;?#]|$)`).test(K)?K.substring(O.length):K}(this._basePath,rt(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._locationStrategy.prepareExternalUrl(V)}go(V,Q="",ce=null){this._locationStrategy.pushState(ce,"",V,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+At(Q)),ce)}replaceState(V,Q="",ce=null){this._locationStrategy.replaceState(ce,"",V,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+At(Q)),ce)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(V=0){this._locationStrategy.historyGo?.(V)}onUrlChange(V){return this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Q=>{this._notifyUrlChangeListeners(Q.url,Q.state)})),()=>{const Q=this._urlChangeListeners.indexOf(V);this._urlChangeListeners.splice(Q,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(V="",Q){this._urlChangeListeners.forEach(ce=>ce(V,Q))}subscribe(V,Q,ce){return this._subject.subscribe({next:V,error:Q,complete:ce})}}return O.normalizeQueryParams=At,O.joinWithSlash=yt,O.stripTrailingSlash=ht,O.\u0275fac=function(V){return new(V||O)(A.LFG(Qt))},O.\u0275prov=A.Yz7({token:O,factory:function(){return function ft(){return new Et((0,A.LFG)(Qt))}()},providedIn:"root"}),O})();function rt(O){return O.replace(/\/index.html$/,"")}var G=(()=>((G=G||{})[G.Decimal=0]="Decimal",G[G.Percent=1]="Percent",G[G.Currency=2]="Currency",G[G.Scientific=3]="Scientific",G))(),ke=(()=>((ke=ke||{})[ke.Decimal=0]="Decimal",ke[ke.Group=1]="Group",ke[ke.List=2]="List",ke[ke.PercentSign=3]="PercentSign",ke[ke.PlusSign=4]="PlusSign",ke[ke.MinusSign=5]="MinusSign",ke[ke.Exponential=6]="Exponential",ke[ke.SuperscriptingExponent=7]="SuperscriptingExponent",ke[ke.PerMille=8]="PerMille",ke[ke.Infinity=9]="Infinity",ke[ke.NaN=10]="NaN",ke[ke.TimeSeparator=11]="TimeSeparator",ke[ke.CurrencyDecimal=12]="CurrencyDecimal",ke[ke.CurrencyGroup=13]="CurrencyGroup",ke))();function nn(O,K){const V=(0,A.cg1)(O),Q=V[A.wAp.NumberSymbols][K];if(typeof Q>"u"){if(K===ke.CurrencyDecimal)return V[A.wAp.NumberSymbols][ke.Decimal];if(K===ke.CurrencyGroup)return V[A.wAp.NumberSymbols][ke.Group]}return Q}const Wn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Zi(O){const K=parseInt(O);if(isNaN(K))throw new Error("Invalid integer literal when parsing "+O);return K}function vr(O,K){K=encodeURIComponent(K);for(const V of O.split(";")){const Q=V.indexOf("="),[ce,He]=-1==Q?[V,""]:[V.slice(0,Q),V.slice(Q+1)];if(ce.trim()===K)return decodeURIComponent(He)}return null}class Mr{constructor(K,V,Q,ce){this.$implicit=K,this.ngForOf=V,this.index=Q,this.count=ce}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cs=(()=>{class O{set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}constructor(V,Q,ce){this._viewContainer=V,this._template=Q,this._differs=ce,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const Q=this._viewContainer;V.forEachOperation((ce,He,ct)=>{if(null==ce.previousIndex)Q.createEmbeddedView(this._template,new Mr(ce.item,this._ngForOf,-1,-1),null===ct?void 0:ct);else if(null==ct)Q.remove(null===He?void 0:He);else if(null!==He){const Bt=Q.get(He);Q.move(Bt,ct),fr(Bt,ce)}});for(let ce=0,He=Q.length;ce<He;ce++){const Bt=Q.get(ce).context;Bt.index=ce,Bt.count=He,Bt.ngForOf=this._ngForOf}V.forEachIdentityChange(ce=>{fr(Q.get(ce.currentIndex),ce)})}static ngTemplateContextGuard(V,Q){return!0}}return O.\u0275fac=function(V){return new(V||O)(A.Y36(A.s_b),A.Y36(A.Rgc),A.Y36(A.ZZ4))},O.\u0275dir=A.lG2({type:O,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),O})();function fr(O,K){O.context.$implicit=K.item}let es=(()=>{class O{constructor(V,Q){this._viewContainer=V,this._context=new Gn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Q}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){Ca("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){Ca("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,Q){return!0}}return O.\u0275fac=function(V){return new(V||O)(A.Y36(A.s_b),A.Y36(A.Rgc))},O.\u0275dir=A.lG2({type:O,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),O})();class Gn{constructor(){this.$implicit=null,this.ngIf=null}}function Ca(O,K){if(K&&!K.createEmbeddedView)throw new Error(`${O} must be a TemplateRef, but received '${(0,A.AaK)(K)}'.`)}let Bs=(()=>{class O{constructor(V){this._locale=V}transform(V,Q,ce){if(!function co(O){return!(null==O||""===O||O!=O)}(V))return null;ce=ce||this._locale;try{return function ra(O,K,V){return function Br(O,K,V,Q,ce,He,ct=!1){let Bt="",lr=!1;if(isFinite(O)){let Qn=function Do(O){let Q,ce,He,ct,Bt,K=Math.abs(O)+"",V=0;for((ce=K.indexOf("."))>-1&&(K=K.replace(".","")),(He=K.search(/e/i))>0?(ce<0&&(ce=He),ce+=+K.slice(He+1),K=K.substring(0,He)):ce<0&&(ce=K.length),He=0;"0"===K.charAt(He);He++);if(He===(Bt=K.length))Q=[0],ce=1;else{for(Bt--;"0"===K.charAt(Bt);)Bt--;for(ce-=He,Q=[],ct=0;He<=Bt;He++,ct++)Q[ct]=Number(K.charAt(He))}return ce>22&&(Q=Q.splice(0,21),V=ce-1,ce=1),{digits:Q,exponent:V,integerLen:ce}}(O);ct&&(Qn=function di(O){if(0===O.digits[0])return O;const K=O.digits.length-O.integerLen;return O.exponent?O.exponent+=2:(0===K?O.digits.push(0,0):1===K&&O.digits.push(0),O.integerLen+=2),O}(Qn));let Xn=K.minInt,Ln=K.minFrac,ni=K.maxFrac;if(He){const vs=He.match(Wn);if(null===vs)throw new Error(`${He} is not a valid digit info`);const ws=vs[1],Ma=vs[3],Oo=vs[5];null!=ws&&(Xn=Zi(ws)),null!=Ma&&(Ln=Zi(Ma)),null!=Oo?ni=Zi(Oo):null!=Ma&&Ln>ni&&(ni=Ln)}!function Js(O,K,V){if(K>V)throw new Error(`The minimum number of digits after fraction (${K}) is higher than the maximum (${V}).`);let Q=O.digits,ce=Q.length-O.integerLen;const He=Math.min(Math.max(K,ce),V);let ct=He+O.integerLen,Bt=Q[ct];if(ct>0){Q.splice(Math.max(O.integerLen,ct));for(let Ln=ct;Ln<Q.length;Ln++)Q[Ln]=0}else{ce=Math.max(0,ce),O.integerLen=1,Q.length=Math.max(1,ct=He+1),Q[0]=0;for(let Ln=1;Ln<ct;Ln++)Q[Ln]=0}if(Bt>=5)if(ct-1<0){for(let Ln=0;Ln>ct;Ln--)Q.unshift(0),O.integerLen++;Q.unshift(1),O.integerLen++}else Q[ct-1]++;for(;ce<Math.max(0,He);ce++)Q.push(0);let lr=0!==He;const Qn=K+O.integerLen,Xn=Q.reduceRight(function(Ln,ni,or,Pi){return Pi[or]=(ni+=Ln)<10?ni:ni-10,lr&&(0===Pi[or]&&or>=Qn?Pi.pop():lr=!1),ni>=10?1:0},0);Xn&&(Q.unshift(Xn),O.integerLen++)}(Qn,Ln,ni);let or=Qn.digits,Pi=Qn.integerLen;const Cr=Qn.exponent;let ss=[];for(lr=or.every(vs=>!vs);Pi<Xn;Pi++)or.unshift(0);for(;Pi<0;Pi++)or.unshift(0);Pi>0?ss=or.splice(Pi,or.length):(ss=or,or=[0]);const Gs=[];for(or.length>=K.lgSize&&Gs.unshift(or.splice(-K.lgSize,or.length).join(""));or.length>K.gSize;)Gs.unshift(or.splice(-K.gSize,or.length).join(""));or.length&&Gs.unshift(or.join("")),Bt=Gs.join(nn(V,Q)),ss.length&&(Bt+=nn(V,ce)+ss.join("")),Cr&&(Bt+=nn(V,ke.Exponential)+"+"+Cr)}else Bt=nn(V,ke.Infinity);return Bt=O<0&&!lr?K.negPre+Bt+K.negSuf:K.posPre+Bt+K.posSuf,Bt}(O,function mr(O,K="-"){const V={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Q=O.split(";"),ce=Q[0],He=Q[1],ct=-1!==ce.indexOf(".")?ce.split("."):[ce.substring(0,ce.lastIndexOf("0")+1),ce.substring(ce.lastIndexOf("0")+1)],Bt=ct[0],lr=ct[1]||"";V.posPre=Bt.substring(0,Bt.indexOf("#"));for(let Xn=0;Xn<lr.length;Xn++){const Ln=lr.charAt(Xn);"0"===Ln?V.minFrac=V.maxFrac=Xn+1:"#"===Ln?V.maxFrac=Xn+1:V.posSuf+=Ln}const Qn=Bt.split(",");if(V.gSize=Qn[1]?Qn[1].length:0,V.lgSize=Qn[2]||Qn[1]?(Qn[2]||Qn[1]).length:0,He){const Xn=ce.length-V.posPre.length-V.posSuf.length,Ln=He.indexOf("#");V.negPre=He.substring(0,Ln).replace(/'/g,""),V.negSuf=He.slice(Ln+Xn).replace(/'/g,"")}else V.negPre=K+V.posPre,V.negSuf=V.posSuf;return V}(function bn(O,K){return(0,A.cg1)(O)[A.wAp.NumberFormats][K]}(K,G.Decimal),nn(K,ke.MinusSign)),K,ke.Group,ke.Decimal,V)}(function xs(O){if("string"==typeof O&&!isNaN(Number(O)-parseFloat(O)))return Number(O);if("number"!=typeof O)throw new Error(`${O} is not a number`);return O}(V),ce,Q)}catch(He){throw function be(O,K){return new A.vHH(2100,!1)}()}}}return O.\u0275fac=function(V){return new(V||O)(A.Y36(A.soG,16))},O.\u0275pipe=A.Yjl({name:"number",type:O,pure:!0,standalone:!0}),O})();let Ta=(()=>{class O{}return O.\u0275fac=function(V){return new(V||O)},O.\u0275mod=A.oAB({type:O}),O.\u0275inj=A.cJS({}),O})();const Ga="browser";function ia(O){return"server"===O}let So=(()=>{class O{}return O.\u0275prov=(0,A.Yz7)({token:O,providedIn:"root",factory:()=>new bi((0,A.LFG)(xe),window)}),O})();class bi{constructor(K,V){this.document=K,this.window=V,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(K){this.supportsScrolling()&&this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){if(!this.supportsScrolling())return;const V=function fo(O,K){const V=O.getElementById(K)||O.getElementsByName(K)[0];if(V)return V;if("function"==typeof O.createTreeWalker&&O.body&&(O.body.createShadowRoot||O.body.attachShadow)){const Q=O.createTreeWalker(O.body,NodeFilter.SHOW_ELEMENT);let ce=Q.currentNode;for(;ce;){const He=ce.shadowRoot;if(He){const ct=He.getElementById(K)||He.querySelector(`[name="${K}"]`);if(ct)return ct}ce=Q.nextNode()}}return null}(this.document,K);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(K){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=K)}}scrollToElement(K){const V=K.getBoundingClientRect(),Q=V.left+this.window.pageXOffset,ce=V.top+this.window.pageYOffset,He=this.offset();this.window.scrollTo(Q-He[0],ce-He[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const K=ho(this.window.history)||ho(Object.getPrototypeOf(this.window.history));return!(!K||!K.writable&&!K.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ho(O){return Object.getOwnPropertyDescriptor(O,"scrollRestoration")}class lu{}},4650:(qt,We,Y)=>{Y.d(We,{$8M:()=>Qo,$WT:()=>kn,$Z:()=>km,AFp:()=>Ey,ALo:()=>Fd,AaK:()=>Fe,AsE:()=>Cp,BQk:()=>pp,CHM:()=>Sa,CRH:()=>Lp,CZH:()=>Vp,CqO:()=>Iv,D6c:()=>iC,EJc:()=>kE,EiD:()=>Uf,EpF:()=>df,F4k:()=>a_,FYo:()=>Qs,FiY:()=>Eo,GfV:()=>zc,Gpc:()=>pe,JOm:()=>tu,JVY:()=>Ne,JZr:()=>Qt,KtG:()=>Ms,L6k:()=>tt,LAX:()=>Yt,LFG:()=>Mt,Lbi:()=>Iy,Lck:()=>Us,MAs:()=>wv,MGl:()=>yh,MMx:()=>Tf,NdJ:()=>pg,OlP:()=>un,Oqu:()=>xg,P3R:()=>Bf,PXZ:()=>jt,Q6J:()=>i_,QGY:()=>fg,Qsj:()=>Ji,R0b:()=>Il,RDi:()=>Fu,Rgc:()=>Nh,SBq:()=>Nn,Sil:()=>gm,Suo:()=>O0,TTD:()=>Gi,TgZ:()=>_h,Tol:()=>Ov,Udp:()=>bg,VKq:()=>T0,X6Q:()=>BI,XFs:()=>Lt,Xpm:()=>Br,Xts:()=>kl,Y36:()=>qc,YKP:()=>ey,YNc:()=>Jc,Yjl:()=>Zi,Yz7:()=>nn,Z0I:()=>pr,ZZ4:()=>zE,_Bn:()=>J_,_UZ:()=>o_,_Vd:()=>it,_c5:()=>nC,_uU:()=>Ag,aQg:()=>WE,c2e:()=>Lh,cJS:()=>Qr,cg1:()=>bp,d8E:()=>Od,dDg:()=>a,dqk:()=>Gt,eBb:()=>Ut,eFA:()=>Ar,ekj:()=>m_,eoX:()=>f,f3M:()=>Pt,g9A:()=>X0,h0i:()=>mc,hGG:()=>rC,hij:()=>_f,iGM:()=>Fp,ifc:()=>on,ip1:()=>Eu,jDz:()=>em,kL8:()=>Gv,lG2:()=>Js,lqb:()=>Bl,lri:()=>t,mCW:()=>ze,n5z:()=>rl,oAB:()=>mr,oJD:()=>Gp,oxw:()=>Tv,pB0:()=>In,q3G:()=>Ys,q4F:()=>xu,qLn:()=>th,qOj:()=>ap,qZA:()=>fp,qzn:()=>Z,rWj:()=>s,sBO:()=>jI,s_b:()=>Np,soG:()=>pm,tb:()=>Fh,tp0:()=>H,uIk:()=>cp,vHH:()=>qe,vpe:()=>vu,wAp:()=>Yn,xi3:()=>sm,xp6:()=>Sm,ynx:()=>hg,z2F:()=>iw,z3N:()=>S,zSh:()=>Kh,zs3:()=>ih});var A=Y(7579),y=Y(727),U=Y(9751),Ae=Y(6451),De=Y(3099);function xe(r){for(let i in r)if(r[i]===xe)return i;throw Error("Could not find renamed property on target object.")}function Le(r,i){for(const o in i)i.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=i[o])}function Fe(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Fe).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function Ve(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const ge=xe({__forward_ref__:xe});function pe(r){return r.__forward_ref__=pe,r.toString=function(){return Fe(this())},r}function Te(r){return yt(r)?r():r}function yt(r){return"function"==typeof r&&r.hasOwnProperty(ge)&&r.__forward_ref__===pe}function ht(r){return r&&!!r.\u0275providers}const Qt="https://g.co/ng/security#xss";class qe extends Error{constructor(i,o){super(function at(r,i){return`NG0${Math.abs(r)}${i?": "+i.trim():""}`}(i,o)),this.code=i}}function ot(r){return"string"==typeof r?r:null==r?"":String(r)}function Ct(r,i){throw new qe(-201,!1)}function $t(r,i){null==r&&function Dt(r,i,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function nn(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Qr(r){return{providers:r.providers||[],imports:r.imports||[]}}function Ur(r){return Zn(r,Er)||Zn(r,Tn)}function pr(r){return null!==Ur(r)}function Zn(r,i){return r.hasOwnProperty(i)?r[i]:null}function Xr(r){return r&&(r.hasOwnProperty(ar)||r.hasOwnProperty(br))?r[ar]:null}const Er=xe({\u0275prov:xe}),ar=xe({\u0275inj:xe}),Tn=xe({ngInjectableDef:xe}),br=xe({ngInjectorDef:xe});var Lt=(()=>((Lt=Lt||{})[Lt.Default=0]="Default",Lt[Lt.Host=1]="Host",Lt[Lt.Self=2]="Self",Lt[Lt.SkipSelf=4]="SkipSelf",Lt[Lt.Optional=8]="Optional",Lt))();let Ai;function Un(r){const i=Ai;return Ai=r,i}function Jr(r,i,o){const u=Ur(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Lt.Optional?null:void 0!==i?i:void Ct(Fe(r))}const Gt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Kn={},Gr="__NG_DI_FLAG__",xr="ngTempTokenPath",Vr=/\n/gm,Ii="__source";let yn;function fn(r){const i=yn;return yn=r,i}function zr(r,i=Lt.Default){if(void 0===yn)throw new qe(-203,!1);return null===yn?Jr(r,void 0,i):yn.get(r,i&Lt.Optional?null:void 0,i)}function Mt(r,i=Lt.Default){return(function $i(){return Ai}()||zr)(Te(r),i)}function Pt(r,i=Lt.Default){return Mt(r,pn(i))}function pn(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function Xt(r){const i=[];for(let o=0;o<r.length;o++){const u=Te(r[o]);if(Array.isArray(u)){if(0===u.length)throw new qe(900,!1);let d,m=Lt.Default;for(let C=0;C<u.length;C++){const N=u[C],F=ei(N);"number"==typeof F?-1===F?d=N.token:m|=F:d=N}i.push(Mt(d,m))}else i.push(Mt(u))}return i}function Dn(r,i){return r[Gr]=i,r.prototype[Gr]=i,r}function ei(r){return r[Gr]}function Ee(r){return{toString:r}.toString()}var nt=(()=>((nt=nt||{})[nt.OnPush=0]="OnPush",nt[nt.Default=1]="Default",nt))(),on=(()=>{return(r=on||(on={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",on;var r})();const Wn={},ve=[],we=xe({\u0275cmp:xe}),ae=xe({\u0275dir:xe}),Se=xe({\u0275pipe:xe}),gt=xe({\u0275mod:xe}),Zt=xe({\u0275fac:xe}),Vn=xe({__NG_ELEMENT_ID__:xe});let Ir=0;function Br(r){return Ee(()=>{const o=!0===r.standalone,u={},d={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===nt.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||ve,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||on.Emulated,id:"c"+Ir++,styles:r.styles||ve,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},m=r.dependencies,C=r.features;return d.inputs=Do(r.inputs,u),d.outputs=Do(r.outputs),C&&C.forEach(N=>N(d)),d.directiveDefs=m?()=>("function"==typeof m?m():m).map(Vs).filter(ra):null,d.pipeDefs=m?()=>("function"==typeof m?m():m).map(kr).filter(ra):null,d})}function Vs(r){return ur(r)||Wr(r)}function ra(r){return null!==r}function mr(r){return Ee(()=>({type:r.type,bootstrap:r.bootstrap||ve,declarations:r.declarations||ve,imports:r.imports||ve,exports:r.exports||ve,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function Do(r,i){if(null==r)return Wn;const o={};for(const u in r)if(r.hasOwnProperty(u)){let d=r[u],m=d;Array.isArray(d)&&(m=d[1],d=d[0]),o[d]=u,i&&(i[d]=m)}return o}const Js=Br;function Zi(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function ur(r){return r[we]||null}function Wr(r){return r[ae]||null}function kr(r){return r[Se]||null}function kn(r){const i=ur(r)||Wr(r)||kr(r);return null!==i&&i.standalone}function vr(r,i){const o=r[gt]||null;if(!o&&!0===i)throw new Error(`Type ${Fe(r)} does not have '\u0275mod' property.`);return o}function ii(r){return Array.isArray(r)&&"object"==typeof r[1]}function Ci(r){return Array.isArray(r)&&!0===r[1]}function Fi(r){return 0!=(4&r.flags)}function Fn(r){return r.componentOffset>-1}function Bn(r){return 1==(1&r.flags)}function Zr(r){return null!==r.template}function au(r){return 0!=(256&r[2])}function ns(r,i){return r.hasOwnProperty(Zt)?r[Zt]:null}class js{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Gi(){return So}function So(r){return r.type.prototype.ngOnChanges&&(r.setInput=ho),bi}function bi(){const r=Ao(this),i=r?.current;if(i){const o=r.previous;if(o===Wn)r.previous=i;else for(let u in i)o[u]=i[u];r.current=null,this.ngOnChanges(i)}}function ho(r,i,o,u){const d=this.declaredInputs[o],m=Ao(r)||function lu(r,i){return r[fo]=i}(r,{previous:Wn,current:null}),C=m.current||(m.current={}),N=m.previous,F=N[d];C[d]=new js(F&&F.currentValue,i,N===Wn),r[u]=i}Gi.ngInherit=!0;const fo="__ngSimpleChanges__";function Ao(r){return r[fo]||null}function Mi(r){for(;Array.isArray(r);)r=r[0];return r}function sa(r,i){return Mi(i[r])}function Li(r,i){return Mi(i[r.index])}function cu(r,i){return r.data[i]}function oa(r,i){return r[i]}function Ri(r,i){const o=i[r];return ii(o)?o:o[0]}function fi(r){return 64==(64&r[2])}function yi(r,i){return null==i?null:r[i]}function On(r){r[18]=0}function Da(r,i){r[5]+=i;let o=r,u=r[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const gn={lFrame:qu(null),bindingsEnabled:!0};function za(){return gn.bindingsEnabled}function Je(){return gn.lFrame.lView}function cr(){return gn.lFrame.tView}function Sa(r){return gn.lFrame.contextLView=r,r[8]}function Ms(r){return gn.lFrame.contextLView=null,r}function Qi(){let r=mo();for(;null!==r&&64===r.type;)r=r.parent;return r}function mo(){return gn.lFrame.currentTNode}function _s(r,i){const o=gn.lFrame;o.currentTNode=r,o.isParent=i}function Wa(){return gn.lFrame.isParent}function la(){gn.lFrame.isParent=!1}function oi(){const r=gn.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}function to(){return gn.lFrame.bindingIndex++}function yo(r){const i=gn.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,o}function ys(r,i){const o=gn.lFrame;o.bindingIndex=o.bindingRootIndex=r,Aa(i)}function Aa(r){gn.lFrame.currentDirectiveIndex=r}function vn(r){const i=gn.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}function Rs(){return gn.lFrame.currentQueryIndex}function qo(r){gn.lFrame.currentQueryIndex=r}function vo(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function Wu(r,i,o){if(o&Lt.SkipSelf){let d=i,m=r;for(;!(d=d.parent,null!==d||o&Lt.Host||(d=vo(m),null===d||(m=m[15],10&d.type))););if(null===d)return!1;i=d,r=m}const u=gn.lFrame=Cu();return u.currentTNode=i,u.lView=r,!0}function Vi(r){const i=Cu(),o=r[1];gn.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Cu(){const r=gn.lFrame,i=null===r?null:r.child;return null===i?qu(r):i}function qu(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Po(){const r=gn.lFrame;return gn.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const ai=Po;function Zo(){const r=Po();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function ui(){return gn.lFrame.selectedIndex}function ro(r){gn.lFrame.selectedIndex=r}function Rr(){const r=gn.lFrame;return cu(r.tView,r.selectedIndex)}function Hs(r,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const m=r.data[o].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:N,ngAfterViewInit:F,ngAfterViewChecked:q,ngOnDestroy:re}=m;C&&(r.contentHooks||(r.contentHooks=[])).push(-o,C),N&&((r.contentHooks||(r.contentHooks=[])).push(o,N),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,N)),F&&(r.viewHooks||(r.viewHooks=[])).push(-o,F),q&&((r.viewHooks||(r.viewHooks=[])).push(o,q),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,q)),null!=re&&(r.destroyHooks||(r.destroyHooks=[])).push(o,re)}}function O(r,i,o){Q(r,i,3,o)}function K(r,i,o,u){(3&r[2])===o&&Q(r,i,o,u)}function V(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function Q(r,i,o,u){const m=u??-1,C=i.length-1;let N=0;for(let F=void 0!==u?65535&r[18]:0;F<C;F++)if("number"==typeof i[F+1]){if(N=i[F],null!=u&&N>=u)break}else i[F]<0&&(r[18]+=65536),(N<m||-1==m)&&(ce(r,o,i,F),r[18]=(4294901760&r[18])+F+2),F++}function ce(r,i,o,u){const d=o[u]<0,m=o[u+1],N=r[d?-o[u]:o[u]];if(d){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{m.call(N)}finally{}}}else try{m.call(N)}finally{}}class ct{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Cr(r,i,o){let u=0;for(;u<o.length;){const d=o[u];if("number"==typeof d){if(0!==d)break;u++;const m=o[u++],C=o[u++],N=o[u++];r.setAttribute(i,C,N,m)}else{const m=d,C=o[++u];Gs(m)?r.setProperty(i,m,C):r.setAttribute(i,m,C),u++}}return u}function ss(r){return 3===r||4===r||6===r}function Gs(r){return 64===r.charCodeAt(0)}function vs(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const d=i[u];"number"==typeof d?o=d:0===o||ws(r,o,d,null,-1===o||2===o?i[++u]:null)}}return r}function ws(r,i,o,u,d){let m=0,C=r.length;if(-1===i)C=-1;else for(;m<r.length;){const N=r[m++];if("number"==typeof N){if(N===i){C=-1;break}if(N>i){C=m-1;break}}}for(;m<r.length;){const N=r[m];if("number"==typeof N)break;if(N===o){if(null===u)return void(null!==d&&(r[m+1]=d));if(u===r[m+1])return void(r[m+2]=d)}m++,null!==u&&m++,null!==d&&m++}-1!==C&&(r.splice(C,0,i),m=C+1),r.splice(m++,0,o),null!==u&&r.splice(m++,0,u),null!==d&&r.splice(m++,0,d)}function Ma(r){return-1!==r}function Oo(r){return 32767&r}function da(r,i){let o=function Ru(r){return r>>16}(r),u=i;for(;o>0;)u=u[15],o--;return u}let zs=!0;function ha(r){const i=zs;return zs=r,i}let Za=0;const vi={};function Ko(r,i){const o=Pa(r,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(r.injectorIndex=i.length,Yo(u.data,r),Yo(i,null),Yo(u.blueprint,null));const d=bu(r,i),m=r.injectorIndex;if(Ma(d)){const C=Oo(d),N=da(d,i),F=N[1].data;for(let q=0;q<8;q++)i[m+q]=N[C+q]|F[C+q]}return i[m+8]=d,m}function Yo(r,i){r.push(0,0,0,0,0,0,0,0,i)}function Pa(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function bu(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,d=i;for(;null!==d;){if(u=fu(d),null===u)return-1;if(o++,d=d[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function Oa(r,i,o){!function Na(r,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Vn)&&(u=o[Vn]),null==u&&(u=o[Vn]=Za++);const d=255&u;i.data[r+(d>>5)]|=1<<d}(r,i,o)}function pa(r,i,o){if(o&Lt.Optional||void 0!==r)return r;Ct()}function Ka(r,i,o,u){if(o&Lt.Optional&&void 0===u&&(u=null),!(o&(Lt.Self|Lt.Host))){const d=r[9],m=Un(void 0);try{return d?d.get(i,u,o&Lt.Optional):Jr(i,u,o&Lt.Optional)}finally{Un(m)}}return pa(u,0,o)}function Zu(r,i,o,u=Lt.Default,d){if(null!==r){if(1024&i[2]){const C=function Qa(r,i,o,u,d){let m=r,C=i;for(;null!==m&&null!==C&&1024&C[2]&&!(256&C[2]);){const N=ko(m,C,o,u|Lt.Self,vi);if(N!==vi)return N;let F=m.parent;if(!F){const q=C[21];if(q){const re=q.get(o,vi,u);if(re!==vi)return re}F=fu(C),C=C[15]}m=F}return d}(r,i,o,u,vi);if(C!==vi)return C}const m=ko(r,i,o,u,vi);if(m!==vi)return m}return Ka(i,o,u,d)}function ko(r,i,o,u,d){const m=function pi(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(Vn)?r[Vn]:void 0;return"number"==typeof i?i>=0?255&i:Ku:i}(o);if("function"==typeof m){if(!Wu(i,r,u))return u&Lt.Host?pa(d,0,u):Ka(i,o,u,d);try{const C=m(u);if(null!=C||u&Lt.Optional)return C;Ct()}finally{ai()}}else if("number"==typeof m){let C=null,N=Pa(r,i),F=-1,q=u&Lt.Host?i[16][6]:null;for((-1===N||u&Lt.SkipSelf)&&(F=-1===N?bu(r,i):i[N+8],-1!==F&&Ps(u,!1)?(C=i[1],N=Oo(F),i=da(F,i)):N=-1);-1!==N;){const re=i[1];if(Ti(m,N,re.data)){const ue=Fa(N,i,o,C,u,q);if(ue!==vi)return ue}F=i[N+8],-1!==F&&Ps(u,i[1].data[N+8]===q)&&Ti(m,N,i)?(C=re,N=Oo(F),i=da(F,i)):N=-1}}return d}function Fa(r,i,o,u,d,m){const C=i[1],N=C.data[r+8],re=Ya(N,C,o,null==u?Fn(N)&&zs:u!=C&&0!=(3&N.type),d&Lt.Host&&m===N);return null!==re?Nr(i,C,re,N):vi}function Ya(r,i,o,u,d){const m=r.providerIndexes,C=i.data,N=1048575&m,F=r.directiveStart,re=m>>20,Re=d?N+re:r.directiveEnd;for(let $e=u?N:N+re;$e<Re;$e++){const _t=C[$e];if($e<F&&o===_t||$e>=F&&_t.type===o)return $e}if(d){const $e=C[F];if($e&&Zr($e)&&$e.type===o)return F}return null}function Nr(r,i,o,u){let d=r[o];const m=i.data;if(function Bt(r){return r instanceof ct}(d)){const C=d;C.resolving&&function ft(r,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${r}`:"";throw new qe(-200,`Circular dependency in DI detected for ${r}${o}`)}(function Et(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():ot(r)}(m[o]));const N=ha(C.canSeeViewProviders);C.resolving=!0;const F=C.injectImpl?Un(C.injectImpl):null;Wu(r,u,Lt.Default);try{d=r[o]=C.factory(void 0,m,r,u),i.firstCreatePass&&o>=u.directiveStart&&function qa(r,i,o){const{ngOnChanges:u,ngOnInit:d,ngDoCheck:m}=i.type.prototype;if(u){const C=So(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,C),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,C)}d&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,d),m&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,m))}(o,m[o],i)}finally{null!==F&&Un(F),ha(N),C.resolving=!1,ai()}}return d}function Ti(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function Ps(r,i){return!(r&Lt.Self||r&Lt.Host&&i)}class Es{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return Zu(this._tNode,this._lView,i,pn(u),o)}}function Ku(){return new Es(Qi(),Je())}function rl(r){return Ee(()=>{const i=r.prototype.constructor,o=i[Zt]||Yu(i),u=Object.prototype;let d=Object.getPrototypeOf(r.prototype).constructor;for(;d&&d!==u;){const m=d[Zt]||Yu(d);if(m&&m!==o)return m;d=Object.getPrototypeOf(d)}return m=>new m})}function Yu(r){return yt(r)?()=>{const i=Yu(Te(r));return i&&i()}:ns(r)}function fu(r){const i=r[1],o=i.type;return 2===o?i.declTNode:1===o?r[6]:null}function Qo(r){return function ka(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const u=o.length;let d=0;for(;d<u;){const m=o[d];if(ss(m))break;if(0===m)d+=2;else if("number"==typeof m)for(d++;d<u&&"string"==typeof o[d];)d++;else{if(m===i)return o[d+1];d+=2}}}return null}(Qi(),r)}const R="__parameters__";function de(r,i,o){return Ee(()=>{const u=function j(r){return function(...o){if(r){const u=r(...o);for(const d in u)this[d]=u[d]}}}(i);function d(...m){if(this instanceof d)return u.apply(this,m),this;const C=new d(...m);return N.annotation=C,N;function N(F,q,re){const ue=F.hasOwnProperty(R)?F[R]:Object.defineProperty(F,R,{value:[]})[R];for(;ue.length<=re;)ue.push(null);return(ue[re]=ue[re]||[]).push(C),F}}return o&&(d.prototype=Object.create(o.prototype)),d.prototype.ngMetadataName=r,d.annotationCls=d,d})}class un{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=nn({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Zs(r,i){r.forEach(o=>Array.isArray(o)?Zs(o,i):i(o))}function Uo(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function Oi(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function b(r,i,o){let u=I(r,i);return u>=0?r[1|u]=o:(u=~u,function bl(r,i,o,u){let d=r.length;if(d==i)r.push(o,u);else if(1===d)r.push(u,r[0]),r[0]=o;else{for(d--,r.push(r[d-1],r[d]);d>i;)r[d]=r[d-2],d--;r[i]=o,r[i+1]=u}}(r,u,i,o)),u}function x(r,i){const o=I(r,i);if(o>=0)return r[1|o]}function I(r,i){return function $(r,i,o){let u=0,d=r.length>>o;for(;d!==u;){const m=u+(d-u>>1),C=r[m<<o];if(i===C)return m<<o;C>i?d=m:u=m+1}return~(d<<o)}(r,i,1)}const Eo=Dn(de("Optional"),8),H=Dn(de("SkipSelf"),4);var tu=(()=>((tu=tu||{})[tu.Important=1]="Important",tu[tu.DashCase=2]="DashCase",tu))();const so=new Map;let Wl=0;const jd="__ngContext__";function Jo(r,i){ii(i)?(r[jd]=i[20],function Zl(r){so.set(r[20],r)}(i)):r[jd]=i}function Ql(r,i){return undefined(r,i)}function ul(r){const i=r[3];return Ci(i)?i[3]:i}function Al(r){return ll(r[13])}function xl(r){return ll(r[4])}function ll(r){for(;null!==r&&!Ci(r);)r=r[4];return r}function Ba(r,i,o,u,d){if(null!=u){let m,C=!1;Ci(u)?m=u:ii(u)&&(C=!0,u=u[0]);const N=Mi(u);0===r&&null!==o?null==d?Rl(i,o,N):Pu(i,o,N,d||null,!0):1===r&&null!==o?Pu(i,o,N,d||null,!0):2===r?function Au(r,i,o){const u=Ou(r,i);u&&function _d(r,i,o,u){r.removeChild(i,o,u)}(r,u,i,o)}(i,N,C):3===r&&i.destroyNode(N),null!=m&&function Ye(r,i,o,u,d){const m=o[7];m!==Mi(o)&&Ba(i,r,u,m,d);for(let N=10;N<o.length;N++){const F=o[N];En(F[1],F,r,i,u,m)}}(i,r,m,o,d)}}function cl(r,i,o){return r.createElement(i,o)}function dl(r,i){const o=r[9],u=o.indexOf(i),d=i[3];512&i[2]&&(i[2]&=-513,Da(d,-1)),o.splice(u,1)}function hl(r,i){if(r.length<=10)return;const o=10+i,u=r[o];if(u){const d=u[17];null!==d&&d!==r&&dl(d,u),i>0&&(r[o-1][4]=u[4]);const m=Oi(r,10+i);!function Ml(r,i){En(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const C=m[19];null!==C&&C.detachView(m[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function ja(r,i){if(!(128&i[2])){const o=i[11];o.destroyNode&&En(r,i,o,3,null,null),function Pc(r){let i=r[13];if(!i)return gd(r[1],r);for(;i;){let o=null;if(ii(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==r;)ii(i)&&gd(i[1],i),i=i[3];null===i&&(i=r),ii(i)&&gd(i[1],i),o=i&&i[4]}i=o}}(i)}}function gd(r,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function ec(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const d=i[o[u]];if(!(d instanceof ct)){const m=o[u+1];if(Array.isArray(m))for(let C=0;C<m.length;C+=2){const N=d[m[C]],F=m[C+1];try{F.call(N)}finally{}}else try{m.call(d)}finally{}}}}(r,i),function kc(r,i){const o=r.cleanup,u=i[7];let d=-1;if(null!==o)for(let m=0;m<o.length-1;m+=2)if("string"==typeof o[m]){const C=o[m+3];C>=0?u[d=C]():u[d=-C].unsubscribe(),m+=2}else{const C=u[d=o[m+1]];o[m].call(C)}if(null!==u){for(let m=d+1;m<u.length;m++)(0,u[m])();i[7]=null}}(r,i),1===i[1].type&&i[11].destroy();const o=i[17];if(null!==o&&Ci(i[3])){o!==i[3]&&dl(o,i);const u=i[19];null!==u&&u.detachView(r)}!function Bo(r){so.delete(r[20])}(i)}}function zd(r,i,o){return function Gh(r,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];{const{componentOffset:d}=u;if(d>-1){const{encapsulation:m}=r.data[u.directiveStart+d];if(m===on.None||m===on.Emulated)return null}return Li(u,o)}}(r,i.parent,o)}function Pu(r,i,o,u,d){r.insertBefore(i,o,u,d)}function Rl(r,i,o){r.appendChild(i,o)}function md(r,i,o,u,d){null!==u?Pu(r,i,o,u,d):Rl(r,i,o)}function Ou(r,i){return r.parentNode(i)}let Fc,Kd,Lu,ya=function li(r,i,o){return 40&r.type?Li(r,o):null};function ku(r,i,o,u){const d=zd(r,u,i),m=i[11],N=function tc(r,i,o){return ya(r,i,o)}(u.parent||i[6],u,i);if(null!=d)if(Array.isArray(o))for(let F=0;F<o.length;F++)md(m,d,o[F],N,!1);else md(m,d,o,N,!1)}function xt(r,i){if(null!==i){const o=i.type;if(3&o)return Li(i,r);if(4&o)return Os(-1,r[i.index]);if(8&o){const u=i.child;if(null!==u)return xt(r,u);{const d=r[i.index];return Ci(d)?Os(-1,d):Mi(d)}}if(32&o)return Ql(i,r)()||Mi(r[i.index]);{const u=Is(r,i);return null!==u?Array.isArray(u)?u[0]:xt(ul(r[16]),u):xt(r,i.next)}}return null}function Is(r,i){return null!==i?r[16][6].projection[i.projection]:null}function Os(r,i){const o=10+r+1;if(o<i.length){const u=i[o],d=u[1].firstChild;if(null!==d)return xt(u,d)}return i[7]}function ln(r,i,o,u,d,m,C){for(;null!=o;){const N=u[o.index],F=o.type;if(C&&0===i&&(N&&Jo(Mi(N),u),o.flags|=2),32!=(32&o.flags))if(8&F)ln(r,i,o.child,u,d,m,!1),Ba(i,r,d,N,m);else if(32&F){const q=Ql(o,u);let re;for(;re=q();)Ba(i,r,d,re,m);Ba(i,r,d,N,m)}else 16&F?zt(r,i,u,o,d,m):Ba(i,r,d,N,m);o=C?o.projectionNext:o.next}}function En(r,i,o,u,d,m){ln(o,u,r.firstChild,i,d,m,!1)}function zt(r,i,o,u,d,m){const C=o[16],F=C[6].projection[u.projection];if(Array.isArray(F))for(let q=0;q<F.length;q++)Ba(i,r,d,F[q],m);else ln(r,i,F,C[3],d,m,!0)}function gu(r,i,o){""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o)}function yd(r,i,o){const{mergedAttrs:u,classes:d,styles:m}=o;null!==u&&Cr(r,i,u),null!==d&&gu(r,i,d),null!==m&&function as(r,i,o){r.setAttribute(i,"style",o)}(r,i,m)}function pl(r){return function vd(){if(void 0===Fc&&(Fc=null,Gt.trustedTypes))try{Fc=Gt.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return Fc}()?.createHTML(r)||r}function Fu(r){Kd=r}function Lc(){if(void 0===Lu&&(Lu=null,Gt.trustedTypes))try{Lu=Gt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return Lu}function qi(r){return Lc()?.createHTML(r)||r}function rc(r){return Lc()?.createScriptURL(r)||r}class _r{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qt})`}}class Of extends _r{getTypeName(){return"HTML"}}class Cs extends _r{getTypeName(){return"Style"}}class E extends _r{getTypeName(){return"Script"}}class p extends _r{getTypeName(){return"URL"}}class _ extends _r{getTypeName(){return"ResourceURL"}}function S(r){return r instanceof _r?r.changingThisBreaksApplicationSecurity:r}function Z(r,i){const o=function ie(r){return r instanceof _r&&r.getTypeName()||null}(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${Qt})`)}return o===i}function Ne(r){return new Of(r)}function tt(r){return new Cs(r)}function Ut(r){return new E(r)}function Yt(r){return new p(r)}function In(r){return new _(r)}class ks{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(pl(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class mu{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=pl(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=pl(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let d=o.length-1;0<d;d--){const C=o.item(d).name;("xmlns:ns1"===C||0===C.indexOf("ns1:"))&&i.removeAttribute(C)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const wd=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function ze(r){return(r=String(r)).match(wd)?r:"unsafe:"+r}function iu(r){const i={};for(const o of r.split(","))i[o]=!0;return i}function ea(...r){const i={};for(const o of r)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const Uc=iu("area,br,col,hr,img,wbr"),Nl=iu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Uu=iu("rp,rt"),Pl=ea(Uc,ea(Nl,iu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ea(Uu,iu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ea(Uu,Nl)),Yd=iu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$p=ea(Yd,iu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),iu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Lf=iu("script,style,template");class ym{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let d=this.checkClobberedElement(o,o.nextSibling);if(d){o=d;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!Pl.hasOwnProperty(o))return this.sanitizedSomething=!0,!Lf.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let d=0;d<u.length;d++){const m=u.item(d),C=m.name,N=C.toLowerCase();if(!$p.hasOwnProperty(N)){this.sanitizedSomething=!0;continue}let F=m.value;Yd[N]&&(F=ze(F)),this.buf.push(" ",C,'="',Hp(F),'"')}return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();Pl.hasOwnProperty(o)&&!Uc.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(Hp(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const vm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vc=/([^\#-~ |!])/g;function Hp(r){return r.replace(/&/g,"&amp;").replace(vm,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(Vc,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ml;function Uf(r,i){let o=null;try{ml=ml||function Rn(r){const i=new mu(r);return function _u(){try{return!!(new window.DOMParser).parseFromString(pl(""),"text/html")}catch{return!1}}()?new ks(i):i}(r);let u=i?String(i):"";o=ml.getInertBodyElement(u);let d=5,m=u;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,u=m,m=o.innerHTML,o=ml.getInertBodyElement(u)}while(u!==m);return pl((new ym).sanitizeChildren(Bc(o)||o))}finally{if(o){const u=Bc(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Bc(r){return"content"in r&&function Ed(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var Ys=(()=>((Ys=Ys||{})[Ys.NONE=0]="NONE",Ys[Ys.HTML=1]="HTML",Ys[Ys.STYLE=2]="STYLE",Ys[Ys.SCRIPT=3]="SCRIPT",Ys[Ys.URL=4]="URL",Ys[Ys.RESOURCE_URL=5]="RESOURCE_URL",Ys))();function Gp(r){const i=su();return i?qi(i.sanitize(Ys.HTML,r)||""):Z(r,"HTML")?qi(S(r)):Uf(function Hn(){return void 0!==Kd?Kd:typeof document<"u"?document:void 0}(),ot(r))}function Io(r){const i=su();return i?i.sanitize(Ys.URL,r)||"":Z(r,"URL")?S(r):ze(ot(r))}function Ol(r){const i=su();if(i)return rc(i.sanitize(Ys.RESOURCE_URL,r)||"");if(Z(r,"ResourceURL"))return rc(S(r));throw new qe(904,!1)}function Bf(r,i,o){return function Vf(r,i){return"src"===i&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===i&&("base"===r||"link"===r)?Ol:Io}(i,o)(r)}function su(){const r=Je();return r&&r[12]}const kl=new un("ENVIRONMENT_INITIALIZER"),el=new un("INJECTOR",-1),Id=new un("INJECTOR_DEF_TYPES");class Fl{get(i,o=Kn){if(o===Kn){const u=new Error(`NullInjectorError: No provider for ${Fe(i)}!`);throw u.name="NullInjectorError",u}return o}}function $c(...r){return{\u0275providers:Qd(0,r),\u0275fromNgModule:!0}}function Qd(r,...i){const o=[],u=new Set;let d;return Zs(i,m=>{const C=m;Ul(C,o,[],u)&&(d||(d=[]),d.push(C))}),void 0!==d&&Ll(d,o),o}function Ll(r,i){for(let o=0;o<r.length;o++){const{providers:d}=r[o];Xd(d,m=>{i.push(m)})}}function Ul(r,i,o,u){if(!(r=Te(r)))return!1;let d=null,m=Xr(r);const C=!m&&ur(r);if(m||C){if(C&&!C.standalone)return!1;d=r}else{const F=r.ngModule;if(m=Xr(F),!m)return!1;d=F}const N=u.has(d);if(C){if(N)return!1;if(u.add(d),C.dependencies){const F="function"==typeof C.dependencies?C.dependencies():C.dependencies;for(const q of F)Ul(q,i,o,u)}}else{if(!m)return!1;{if(null!=m.imports&&!N){let q;u.add(d);try{Zs(m.imports,re=>{Ul(re,i,o,u)&&(q||(q=[]),q.push(re))})}finally{}void 0!==q&&Ll(q,i)}if(!N){const q=ns(d)||(()=>new d);i.push({provide:d,useFactory:q,deps:ve},{provide:Id,useValue:d,multi:!0},{provide:kl,useValue:()=>Mt(d),multi:!0})}const F=m.providers;null==F||N||Xd(F,re=>{i.push(re)})}}return d!==r&&void 0!==r.providers}function Xd(r,i){for(let o of r)ht(o)&&(o=o.\u0275providers),Array.isArray(o)?Xd(o,i):i(o)}const Wp=xe({provide:String,useValue:xe});function Cd(r){return null!==r&&"object"==typeof r&&Wp in r}function ic(r){return"function"==typeof r}const Kh=new un("Set Injector scope."),Jd={},Vl={};let Yh;function eh(){return void 0===Yh&&(Yh=new Fl),Yh}class Bl{}class Lr extends Bl{get destroyed(){return this._destroyed}constructor(i,o,u,d){super(),this.parent=o,this.source=u,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,T(i,C=>this.processProvider(C)),this.records.set(el,h(void 0,this)),d.has("environment")&&this.records.set(Bl,h(void 0,this));const m=this.records.get(Kh);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Id.multi,ve,Lt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=fn(this),u=Un(void 0);try{return i()}finally{fn(o),Un(u)}}get(i,o=Kn,u=Lt.Default){this.assertNotDestroyed(),u=pn(u);const d=fn(this),m=Un(void 0);try{if(!(u&Lt.SkipSelf)){let N=this.records.get(i);if(void 0===N){const F=function g(r){return"function"==typeof r||"object"==typeof r&&r instanceof un}(i)&&Ur(i);N=F&&this.injectableDefInScope(F)?h(Ei(i),Jd):null,this.records.set(i,N)}if(null!=N)return this.hydrate(i,N)}return(u&Lt.Self?eh():this.parent).get(i,o=u&Lt.Optional&&o===Kn?null:o)}catch(C){if("NullInjectorError"===C.name){if((C[xr]=C[xr]||[]).unshift(Fe(i)),d)throw C;return function me(r,i,o,u){const d=r[xr];throw i[Ii]&&d.unshift(i[Ii]),r.message=function fe(r,i,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let d=Fe(i);if(Array.isArray(i))d=i.map(Fe).join(" -> ");else if("object"==typeof i){let m=[];for(let C in i)if(i.hasOwnProperty(C)){let N=i[C];m.push(C+":"+("string"==typeof N?JSON.stringify(N):Fe(N)))}d=`{${m.join(", ")}}`}return`${o}${u?"("+u+")":""}[${d}]: ${r.replace(Vr,"\n  ")}`}("\n"+r.message,d,o,u),r.ngTokenPath=d,r[xr]=null,r}(C,i,"R3InjectorError",this.source)}throw C}finally{Un(m),fn(d)}}resolveInjectorInitializers(){const i=fn(this),o=Un(void 0);try{const u=this.get(kl.multi,ve,Lt.Self);for(const d of u)d()}finally{fn(i),Un(o)}}toString(){const i=[],o=this.records;for(const u of o.keys())i.push(Fe(u));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new qe(205,!1)}processProvider(i){let o=ic(i=Te(i))?i:Te(i&&i.provide);const u=function Qh(r){return Cd(r)?h(void 0,r.useValue):h(Xh(r),Jd)}(i);if(ic(i)||!0!==i.multi)this.records.get(o);else{let d=this.records.get(o);d||(d=h(void 0,Jd,!0),d.factory=()=>Xt(d.multi),this.records.set(o,d)),o=i,d.multi.push(i)}this.records.set(o,u)}hydrate(i,o){return o.value===Jd&&(o.value=Vl,o.value=o.factory()),"object"==typeof o.value&&o.value&&function c(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=Te(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Ei(r){const i=Ur(r),o=null!==i?i.factory:ns(r);if(null!==o)return o;if(r instanceof un)throw new qe(204,!1);if(r instanceof Function)return function bd(r){const i=r.length;if(i>0)throw function ma(r,i){const o=[];for(let u=0;u<r;u++)o.push(i);return o}(i,"?"),new qe(204,!1);const o=function ki(r){const i=r&&(r[Er]||r[Tn]);if(i){const o=function en(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new qe(204,!1)}function Xh(r,i,o){let u;if(ic(r)){const d=Te(r);return ns(d)||Ei(d)}if(Cd(r))u=()=>Te(r.useValue);else if(function Zh(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...Xt(r.deps||[]));else if(function Hc(r){return!(!r||!r.useExisting)}(r))u=()=>Mt(Te(r.useExisting));else{const d=Te(r&&(r.useClass||r.provide));if(!function l(r){return!!r.deps}(r))return ns(d)||Ei(d);u=()=>new d(...Xt(r.deps))}return u}function h(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function T(r,i){for(const o of r)Array.isArray(o)?T(o,i):o&&ht(o)?T(o.\u0275providers,i):i(o)}class k{}class z{}class et{resolveComponentFactory(i){throw function te(r){const i=Error(`No component factory found for ${Fe(r)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=r,i}(i)}}let it=(()=>{class r{}return r.NULL=new et,r})();function wt(){return Wt(Qi(),Je())}function Wt(r,i){return new Nn(Li(r,i))}let Nn=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=wt,r})();function jn(r){return r instanceof Nn?r.nativeElement:r}class Qs{}let Ji=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function jr(){const r=Je(),o=Ri(Qi().index,r);return(ii(o)?o:r)[11]}(),r})(),Gc=(()=>{class r{}return r.\u0275prov=nn({token:r,providedIn:"root",factory:()=>null}),r})();class zc{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const xu=new zc("15.1.2"),ta={};function Im(r){return r.ngOriginalError}class th{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Im(i);for(;o&&Im(o);)o=Im(o);return o||null}}function Bu(r){return r instanceof Function?r():r}function Yp(r,i,o){let u=r.length;for(;;){const d=r.indexOf(i,o);if(-1===d)return d;if(0===d||r.charCodeAt(d-1)<=32){const m=i.length;if(d+m===u||r.charCodeAt(d+m)<=32)return d}o=d+1}}const $f="ng-template";function Hf(r,i,o){let u=0;for(;u<r.length;){let d=r[u++];if(o&&"class"===d){if(d=r[u],-1!==Yp(d.toLowerCase(),i,0))return!0}else if(1===d){for(;u<r.length&&"string"==typeof(d=r[u++]);)if(d.toLowerCase()===i)return!0;return!1}}return!1}function Tm(r){return 4===r.type&&r.value!==$f}function Dm(r,i,o){return i===(4!==r.type||o?r.value:$f)}function Gf(r,i,o){let u=4;const d=r.attrs||[],m=function Fy(r){for(let i=0;i<r.length;i++)if(ss(r[i]))return i;return r.length}(d);let C=!1;for(let N=0;N<i.length;N++){const F=i[N];if("number"!=typeof F){if(!C)if(4&u){if(u=2|1&u,""!==F&&!Dm(r,F,o)||""===F&&1===i.length){if(_l(u))return!1;C=!0}}else{const q=8&u?F:i[++N];if(8&u&&null!==r.attrs){if(!Hf(r.attrs,q,o)){if(_l(u))return!1;C=!0}continue}const ue=Py(8&u?"class":F,d,Tm(r),o);if(-1===ue){if(_l(u))return!1;C=!0;continue}if(""!==q){let Re;Re=ue>m?"":d[ue+1].toLowerCase();const $e=8&u?Re:null;if($e&&-1!==Yp($e,q,0)||2&u&&q!==Re){if(_l(u))return!1;C=!0}}}}else{if(!C&&!_l(u)&&!_l(F))return!1;if(C&&_l(F))continue;C=!1,u=F|1&u}}return _l(u)||C}function _l(r){return 0==(1&r)}function Py(r,i,o,u){if(null===i)return-1;let d=0;if(u||!o){let m=!1;for(;d<i.length;){const C=i[d];if(C===r)return d;if(3===C||6===C)m=!0;else{if(1===C||2===C){let N=i[++d];for(;"string"==typeof N;)N=i[++d];continue}if(4===C)break;if(0===C){d+=4;continue}}d+=m?1:2}return-1}return function Ly(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,r)}function Oy(r,i,o=!1){for(let u=0;u<i.length;u++)if(Gf(r,i[u],o))return!0;return!1}function Uy(r,i){return r?":not("+i.trim()+")":i}function uw(r){let i=r[0],o=1,u=2,d="",m=!1;for(;o<r.length;){let C=r[o];if("string"==typeof C)if(2&u){const N=r[++o];d+="["+C+(N.length>0?'="'+N+'"':"")+"]"}else 8&u?d+="."+C:4&u&&(d+=" "+C);else""!==d&&!_l(C)&&(i+=Uy(m,d),d=""),u=C,m=m||!_l(u);o++}return""!==d&&(i+=Uy(m,d)),i}const Jn={};function Sm(r){Dd(cr(),Je(),ui()+r,!1)}function Dd(r,i,o,u){if(!u)if(3==(3&i[2])){const m=r.preOrderCheckHooks;null!==m&&O(i,m,o)}else{const m=r.preOrderHooks;null!==m&&K(i,m,0,o)}ro(o)}function Wf(r,i=null,o=null,u){const d=Rm(r,i,o,u);return d.resolveInjectorInitializers(),d}function Rm(r,i=null,o=null,u,d=new Set){const m=[o||ve,$c(r)];return u=u||("object"==typeof r?void 0:Fe(r)),new Lr(m,i||eh(),u||null,d)}let ih=(()=>{class r{static create(o,u){if(Array.isArray(o))return Wf({name:""},u,o,"");{const d=o.name??"";return Wf({name:d},o.parent,o.providers,d)}}}return r.THROW_IF_NOT_FOUND=Kn,r.NULL=new Fl,r.\u0275prov=nn({token:r,providedIn:"any",factory:()=>Mt(el)}),r.__NG_ELEMENT_ID__=-1,r})();function qc(r,i=Lt.Default){const o=Je();return null===o?Mt(r,i):Zu(Qi(),o,Te(r),i)}function km(){throw new Error("invalid")}function Fm(r,i){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const m=o[u+1];if(-1!==m){const C=r.data[m];qo(o[u]),C.contentQueries(2,i[m],m)}}}function Xf(r,i,o,u,d,m,C,N,F,q,re){const ue=i.blueprint.slice();return ue[0]=d,ue[2]=76|u,(null!==re||r&&1024&r[2])&&(ue[2]|=1024),On(ue),ue[3]=ue[15]=r,ue[8]=o,ue[10]=C||r&&r[10],ue[11]=N||r&&r[11],ue[12]=F||r&&r[12]||null,ue[9]=q||r&&r[9]||null,ue[6]=m,ue[20]=function ql(){return Wl++}(),ue[21]=re,ue[16]=2==i.type?r[16]:ue,ue}function rf(r,i,o,u,d){let m=r.data[i];if(null===m)m=function Lm(r,i,o,u,d){const m=mo(),C=Wa(),F=r.data[i]=function tp(r,i,o,u,d,m){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?m:m&&m.parent,o,i,u,d);return null===r.firstChild&&(r.firstChild=F),null!==m&&(C?null==m.child&&null!==F.parent&&(m.child=F):null===m.next&&(m.next=F)),F}(r,i,o,u,d),function no(){return gn.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=o,m.value=u,m.attrs=d;const C=function du(){const r=gn.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();m.injectorIndex=null===C?-1:C.injectorIndex}return _s(m,!0),m}function Jf(r,i,o,u){if(0===o)return-1;const d=i.length;for(let m=0;m<o;m++)i.push(u),r.blueprint.push(u),r.data.push(null);return d}function Um(r,i,o){Vi(i);try{const u=r.viewQuery;null!==u&&Km(1,u,o);const d=r.template;null!==d&&Vm(r,i,d,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Fm(r,i),r.staticViewQueries&&Km(2,r.viewQuery,o);const m=r.components;null!==m&&function Yy(r,i){for(let o=0;o<i.length;o++)Ew(r,i[o])}(i,m)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[2]&=-5,Zo()}}function Zc(r,i,o,u){const d=i[2];if(128!=(128&d)){Vi(i);try{On(i),function Ro(r){return gn.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&Vm(r,i,o,2,u);const C=3==(3&d);if(C){const q=r.preOrderCheckHooks;null!==q&&O(i,q,null)}else{const q=r.preOrderHooks;null!==q&&K(i,q,0,null),V(i,0)}if(function vw(r){for(let i=Al(r);null!==i;i=xl(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const d=o[u];512&d[2]||Da(d[3],1),d[2]|=512}}}(i),function iv(r){for(let i=Al(r);null!==i;i=xl(i))for(let o=10;o<i.length;o++){const u=i[o],d=u[1];fi(u)&&Zc(d,u,d.template,u[8])}}(i),null!==r.contentQueries&&Fm(r,i),C){const q=r.contentCheckHooks;null!==q&&O(i,q)}else{const q=r.contentHooks;null!==q&&K(i,q,1),V(i,1)}!function Ky(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const d=o[u];if(d<0)ro(~d);else{const m=d,C=o[++u],N=o[++u];ys(C,m),N(2,i[m])}}}finally{ro(-1)}}(r,i);const N=r.components;null!==N&&function fw(r,i){for(let o=0;o<i.length;o++)ww(r,i[o])}(i,N);const F=r.viewQuery;if(null!==F&&Km(2,F,u),C){const q=r.viewCheckHooks;null!==q&&O(i,q)}else{const q=r.viewHooks;null!==q&&K(i,q,2),V(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,Da(i[3],-1))}finally{Zo()}}}function Vm(r,i,o,u,d){const m=ui(),C=2&u;try{ro(-1),C&&i.length>22&&Dd(r,i,22,!1),o(u,d)}finally{ro(m)}}function Bm(r,i,o){if(Fi(i)){const d=i.directiveEnd;for(let m=i.directiveStart;m<d;m++){const C=r.data[m];C.contentQueries&&C.contentQueries(1,o[m],m)}}}function ao(r,i,o){za()&&(function Jy(r,i,o,u){const d=o.directiveStart,m=o.directiveEnd;Fn(o)&&function Mu(r,i,o){const u=Li(i,r),d=jm(o),m=r[10],C=rg(r,Xf(r,d,null,o.onPush?32:16,u,i,m,m.createRenderer(u,o),null,null,null));r[i.index]=C}(i,o,r.data[d+o.componentOffset]),r.firstCreatePass||Ko(o,i),Jo(u,i);const C=o.initialInputs;for(let N=d;N<m;N++){const F=r.data[N],q=Nr(i,r,N,o);Jo(q,i),null!==C&&lc(0,N-d,q,F,0,C),Zr(F)&&(Ri(o.index,i)[8]=Nr(i,r,N,o))}}(r,i,o,Li(o,i)),64==(64&o.flags)&&ev(r,i,o))}function ep(r,i,o=Li){const u=i.localNames;if(null!==u){let d=i.index+1;for(let m=0;m<u.length;m+=2){const C=u[m+1],N=-1===C?o(i,r):r[C];r[d++]=N}}}function jm(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=oh(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function oh(r,i,o,u,d,m,C,N,F,q){const re=22+u,ue=re+d,Re=function oc(r,i){const o=[];for(let u=0;u<i;u++)o.push(u<r?null:Jn);return o}(re,ue),$e="function"==typeof q?q():q;return Re[1]={type:r,blueprint:Re,template:o,queries:null,viewQuery:N,declTNode:i,data:Re.slice().fill(null,re),bindingStartIndex:re,expandoStartIndex:ue,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:F,consts:$e,incompleteFirstPass:!1}}function Hm(r,i,o,u){const d=sv(i);null===o?d.push(u):(d.push(o),r.firstCreatePass&&ov(r).push(u,d.length-1))}function Gm(r,i,o,u){for(let d in r)if(r.hasOwnProperty(d)){o=null===o?{}:o;const m=r[d];null===u?zm(o,i,d,m):u.hasOwnProperty(d)&&zm(o,i,u[d],m)}return o}function zm(r,i,o,u){r.hasOwnProperty(o)?r[o].push(i,u):r[o]=[i,u]}function tl(r,i,o,u,d,m,C,N){const F=Li(i,o);let re,q=i.inputs;!N&&null!=q&&(re=q[u])?(sg(r,o,re,u,d),Fn(i)&&sf(o,i.index)):3&i.type&&(u=function pw(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),d=null!=C?C(d,i.value||"",u):d,m.setProperty(F,u,d))}function sf(r,i){const o=Ri(i,r);16&o[2]||(o[2]|=32)}function eg(r,i,o,u){let d=!1;if(za()){const m=null===u?null:{"":-1},C=function _w(r,i){const o=r.directiveRegistry;let u=null,d=null;if(o)for(let m=0;m<o.length;m++){const C=o[m];if(Oy(i,C.selectors,!1))if(u||(u=[]),Zr(C))if(null!==C.findHostDirectiveDefs){const N=[];d=d||new Map,C.findHostDirectiveDefs(C,N,d),u.unshift(...N,C),ac(r,i,N.length)}else u.unshift(C),ac(r,i,0);else d=d||new Map,C.findHostDirectiveDefs?.(C,u,d),u.push(C)}return null===u?null:[u,d]}(r,o);let N,F;null===C?N=F=null:[N,F]=C,null!==N&&(d=!0,tg(r,i,o,N,m,F)),m&&function af(r,i,o){if(i){const u=r.localNames=[];for(let d=0;d<i.length;d+=2){const m=o[i[d+1]];if(null==m)throw new qe(-301,!1);u.push(i[d],m)}}}(o,u,m)}return o.mergedAttrs=vs(o.mergedAttrs,o.attrs),d}function tg(r,i,o,u,d,m){for(let q=0;q<u.length;q++)Oa(Ko(o,i),r,u[q].type);!function yw(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}(o,r.data.length,u.length);for(let q=0;q<u.length;q++){const re=u[q];re.providersResolver&&re.providersResolver(re)}let C=!1,N=!1,F=Jf(r,i,u.length,null);for(let q=0;q<u.length;q++){const re=u[q];o.mergedAttrs=vs(o.mergedAttrs,re.hostAttrs),nv(r,o,i,F,re),tv(F,re,d),null!==re.contentQueries&&(o.flags|=4),(null!==re.hostBindings||null!==re.hostAttrs||0!==re.hostVars)&&(o.flags|=64);const ue=re.type.prototype;!C&&(ue.ngOnChanges||ue.ngOnInit||ue.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),C=!0),!N&&(ue.ngOnChanges||ue.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),N=!0),F++}!function Qy(r,i,o){const d=i.directiveEnd,m=r.data,C=i.attrs,N=[];let F=null,q=null;for(let re=i.directiveStart;re<d;re++){const ue=m[re],Re=o?o.get(ue):null,_t=Re?Re.outputs:null;F=Gm(ue.inputs,re,F,Re?Re.inputs:null),q=Gm(ue.outputs,re,q,_t);const Vt=null===F||null===C||Tm(i)?null:rv(F,re,C);N.push(Vt)}null!==F&&(F.hasOwnProperty("class")&&(i.flags|=8),F.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=N,i.inputs=F,i.outputs=q}(r,o,m)}function ev(r,i,o){const u=o.directiveStart,d=o.directiveEnd,m=o.index,C=function rn(){return gn.lFrame.currentDirectiveIndex}();try{ro(m);for(let N=u;N<d;N++){const F=r.data[N],q=i[N];Aa(N),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&mw(F,q)}}finally{ro(-1),Aa(C)}}function mw(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function ac(r,i,o){i.componentOffset=o,(r.components||(r.components=[])).push(i.index)}function tv(r,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=r;Zr(i)&&(o[""]=r)}}function nv(r,i,o,u,d){r.data[u]=d;const m=d.factory||(d.factory=ns(d.type)),C=new ct(m,Zr(d),qc);r.blueprint[u]=C,o[u]=C,function Xy(r,i,o,u,d){const m=d.hostBindings;if(m){let C=r.hostBindingOpCodes;null===C&&(C=r.hostBindingOpCodes=[]);const N=~i.index;(function gw(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(C)!=N&&C.push(N),C.push(o,u,m)}}(r,i,u,Jf(r,o,d.hostVars,Jn),d)}function uc(r,i,o,u,d,m){const C=Li(r,i);!function ng(r,i,o,u,d,m,C){if(null==m)r.removeAttribute(i,d,o);else{const N=null==C?ot(m):C(m,u||"",d);r.setAttribute(i,d,N,o)}}(i[11],C,m,r.value,o,u,d)}function lc(r,i,o,u,d,m){const C=m[i];if(null!==C){const N=u.setInput;for(let F=0;F<C.length;){const q=C[F++],re=C[F++],ue=C[F++];null!==N?u.setInput(o,ue,q,re):o[re]=ue}}}function rv(r,i,o){let u=null,d=0;for(;d<o.length;){const m=o[d];if(0!==m)if(5!==m){if("number"==typeof m)break;if(r.hasOwnProperty(m)){null===u&&(u=[]);const C=r[m];for(let N=0;N<C.length;N+=2)if(C[N]===i){u.push(m,C[N+1],o[d+1]);break}}d+=2}else d+=2;else d+=4}return u}function np(r,i,o,u){return[r,!0,!1,i,null,0,u,o,null,null]}function ww(r,i){const o=Ri(i,r);if(fi(o)){const u=o[1];48&o[2]?Zc(u,o,u.template,o[8]):o[5]>0&&qm(o)}}function qm(r){for(let u=Al(r);null!==u;u=xl(u))for(let d=10;d<u.length;d++){const m=u[d];if(fi(m))if(512&m[2]){const C=m[1];Zc(C,m,C.template,m[8])}else m[5]>0&&qm(m)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const d=Ri(o[u],r);fi(d)&&d[5]>0&&qm(d)}}function Ew(r,i){const o=Ri(i,r),u=o[1];(function Iw(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(u,o),Um(u,o,o[8])}function rg(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function Zm(r){for(;r;){r[2]|=32;const i=ul(r);if(au(r)&&!i)return r;r=i}return null}function ig(r,i,o,u=!0){const d=i[10];d.begin&&d.begin();try{Zc(r,i,r.template,o)}catch(C){throw u&&uv(i,C),C}finally{d.end&&d.end()}}function Km(r,i,o){qo(0),i(r,o)}function sv(r){return r[7]||(r[7]=[])}function ov(r){return r.cleanup||(r.cleanup=[])}function uv(r,i){const o=r[9],u=o?o.get(th,null):null;u&&u.handleError(i)}function sg(r,i,o,u,d){for(let m=0;m<o.length;){const C=o[m++],N=o[m++],F=i[C],q=r.data[C];null!==q.setInput?q.setInput(F,d,u,N):F[N]=d}}function Kc(r,i,o){const u=sa(i,r);!function Xl(r,i,o){r.setValue(i,o)}(r[11],u,o)}function rp(r,i,o){let u=o?r.styles:null,d=o?r.classes:null,m=0;if(null!==i)for(let C=0;C<i.length;C++){const N=i[C];"number"==typeof N?m=N:1==m?d=Ve(d,N):2==m&&(u=Ve(u,N+": "+i[++C]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=d:r.classesWithoutHost=d}function ip(r,i,o,u,d=!1){for(;null!==o;){const m=i[o.index];if(null!==m&&u.push(Mi(m)),Ci(m))for(let N=10;N<m.length;N++){const F=m[N],q=F[1].firstChild;null!==q&&ip(F[1],F,q,u)}const C=o.type;if(8&C)ip(r,i,o.child,u);else if(32&C){const N=Ql(o,i);let F;for(;F=N();)u.push(F)}else if(16&C){const N=Is(i,o);if(Array.isArray(N))u.push(...N);else{const F=ul(i[16]);ip(F[1],F,N,u,!0)}}o=d?o.projectionNext:o.next}return u}class sp{get rootNodes(){const i=this._lView,o=i[1];return ip(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Ci(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(hl(i,u),Oi(o,u))}this._attachedToViewContainer=!1}ja(this._lView[1],this._lView)}onDestroy(i){Hm(this._lView[1],this._lView,null,i)}markForCheck(){Zm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ig(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new qe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Nu(r,i){En(r,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new qe(902,!1);this._appRef=i}}class Ym extends sp{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;ig(i[1],i,i[8],!1)}checkNoChanges(){}get context(){return null}}class va extends it{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=ur(i);return new yl(o,this.ngModule)}}function og(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}class Xm{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,u){u=pn(u);const d=this.injector.get(i,ta,u);return d!==ta||o===ta?d:this.parentInjector.get(i,o,u)}}class yl extends z{get inputs(){return og(this.componentDef.inputs)}get outputs(){return og(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function Vy(r){return r.map(uw).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,u,d){let m=(d=d||this.ngModule)instanceof Bl?d:d?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const C=m?new Xm(i,m):i,N=C.get(Qs,null);if(null===N)throw new qe(407,!1);const F=C.get(Gc,null),q=N.createRenderer(null,this.componentDef),re=this.componentDef.selectors[0][0]||"div",ue=u?function $m(r,i,o){return r.selectRootElement(i,o===on.ShadowDom)}(q,u,this.componentDef.encapsulation):cl(q,re,function Qm(r){const i=r.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(re)),Re=this.componentDef.onPush?288:272,$e=oh(0,null,null,1,0,null,null,null,null,null),_t=Xf(null,$e,null,Re,null,null,N,q,F,C,null);let Vt,cn;Vi(_t);try{const Pn=this.componentDef;let sr,Rt=null;Pn.findHostDirectiveDefs?(sr=[],Rt=new Map,Pn.findHostDirectiveDefs(Pn,sr,Rt),sr.push(Pn)):sr=[Pn];const wr=function cv(r,i){const o=r[1];return r[22]=i,rf(o,22,2,"#host",null)}(_t,ue),To=function ag(r,i,o,u,d,m,C,N){const F=d[1];!function ah(r,i,o,u){for(const d of r)i.mergedAttrs=vs(i.mergedAttrs,d.hostAttrs);null!==i.mergedAttrs&&(rp(i,i.mergedAttrs,!0),null!==o&&yd(u,o,i))}(u,r,i,C);const q=m.createRenderer(i,o),re=Xf(d,jm(o),null,o.onPush?32:16,d[r.index],r,m,q,N||null,null,null);return F.firstCreatePass&&ac(F,r,u.length-1),rg(d,re),d[r.index]=re}(wr,ue,Pn,sr,_t,N,q);cn=cu($e,22),ue&&function lh(r,i,o,u){if(u)Cr(r,o,["ng-version",xu.full]);else{const{attrs:d,classes:m}=function Jh(r){const i=[],o=[];let u=1,d=2;for(;u<r.length;){let m=r[u];if("string"==typeof m)2===d?""!==m&&i.push(m,r[++u]):8===d&&o.push(m);else{if(!_l(d))break;d=m}u++}return{attrs:i,classes:o}}(i.selectors[0]);d&&Cr(r,o,d),m&&m.length>0&&gu(r,o,m.join(" "))}}(q,Pn,ue,u),void 0!==o&&function op(r,i,o){const u=r.projection=[];for(let d=0;d<i.length;d++){const m=o[d];u.push(null!=m?Array.from(m):null)}}(cn,this.ngContentSelectors,o),Vt=function uh(r,i,o,u,d,m){const C=Qi(),N=d[1],F=Li(C,d);tg(N,d,C,o,null,u);for(let re=0;re<o.length;re++)Jo(Nr(d,N,C.directiveStart+re,C),d);ev(N,d,C),F&&Jo(F,d);const q=Nr(d,N,C.directiveStart+C.componentOffset,C);if(r[8]=d[8]=q,null!==m)for(const re of m)re(q,i);return Bm(N,C,r),q}(To,Pn,sr,Rt,_t,[dv]),Um($e,_t,null)}finally{Zo()}return new lv(this.componentType,Vt,Wt(cn,_t),_t,cn)}}class lv extends k{constructor(i,o,u,d,m){super(),this.location=u,this._rootLView=d,this._tNode=m,this.instance=o,this.hostView=this.changeDetectorRef=new Ym(d),this.componentType=i}setInput(i,o){const u=this._tNode.inputs;let d;if(null!==u&&(d=u[i])){const m=this._rootLView;sg(m[1],m,d,i,o),sf(m,this._tNode.index)}}get injector(){return new Es(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function dv(){const r=Qi();Hs(Je()[1],r)}function ap(r){let i=function ug(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const u=[r];for(;i;){let d;if(Zr(r))d=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new qe(903,!1);d=i.\u0275dir}if(d){if(o){u.push(d);const C=r;C.inputs=lg(r.inputs),C.declaredInputs=lg(r.declaredInputs),C.outputs=lg(r.outputs);const N=d.hostBindings;N&&pv(r,N);const F=d.viewQuery,q=d.contentQueries;if(F&&Cw(r,F),q&&fv(r,q),Le(r.inputs,d.inputs),Le(r.declaredInputs,d.declaredInputs),Le(r.outputs,d.outputs),Zr(d)&&d.data.animation){const re=r.data;re.animation=(re.animation||[]).concat(d.data.animation)}}const m=d.features;if(m)for(let C=0;C<m.length;C++){const N=m[C];N&&N.ngInherit&&N(r),N===ap&&(o=!1)}}i=Object.getPrototypeOf(i)}!function hv(r){let i=0,o=null;for(let u=r.length-1;u>=0;u--){const d=r[u];d.hostVars=i+=d.hostVars,d.hostAttrs=vs(d.hostAttrs,o=vs(o,d.hostAttrs))}}(u)}function lg(r){return r===Wn?{}:r===ve?[]:r}function Cw(r,i){const o=r.viewQuery;r.viewQuery=o?(u,d)=>{i(u,d),o(u,d)}:i}function fv(r,i){const o=r.contentQueries;r.contentQueries=o?(u,d,m)=>{i(u,d,m),o(u,d,m)}:i}function pv(r,i){const o=r.hostBindings;r.hostBindings=o?(u,d)=>{i(u,d),o(u,d)}:i}let cc=null;function Hu(){if(!cc){const r=Gt.Symbol;if(r&&r.iterator)cc=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(cc=u)}}}return cc}function dg(r){return!!lp(r)&&(Array.isArray(r)||!(r instanceof Map)&&Hu()in r)}function lp(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function jl(r,i,o){return r[i]=o}function $a(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function xd(r,i,o,u){const d=$a(r,i,o);return $a(r,i+1,u)||d}function cp(r,i,o,u){const d=Je();return $a(d,to(),i)&&(cr(),uc(Rr(),d,r,i,o,u)),cp}function lf(r,i,o,u){return $a(r,to(),o)?i+ot(o)+u:Jn}function fh(r,i,o,u,d,m){const N=xd(r,function Ui(){return gn.lFrame.bindingIndex}(),o,d);return yo(2),N?i+ot(o)+u+ot(d)+m:Jn}function Jc(r,i,o,u,d,m,C,N){const F=Je(),q=cr(),re=r+22,ue=q.firstCreatePass?function yv(r,i,o,u,d,m,C,N,F){const q=i.consts,re=rf(i,r,4,C||null,yi(q,N));eg(i,o,re,yi(q,F)),Hs(i,re);const ue=re.tViews=oh(2,re,u,d,m,i.directiveRegistry,i.pipeRegistry,null,i.schemas,q);return null!==i.queries&&(i.queries.template(i,re),ue.queries=i.queries.embeddedTView(re)),re}(re,q,F,i,o,u,d,m,C):q.data[re];_s(ue,!1);const Re=F[11].createComment("");ku(q,F,Re,ue),Jo(Re,F),rg(F,F[re]=np(Re,F,Re,ue)),Bn(ue)&&ao(q,F,ue),null!=C&&ep(F,ue,N)}function wv(r){return oa(function Wo(){return gn.lFrame.contextLView}(),22+r)}function i_(r,i,o){const u=Je();return $a(u,to(),i)&&tl(cr(),Rr(),u,r,i,u[11],o,!1),i_}function s_(r,i,o,u,d){const C=d?"class":"style";sg(r,o,i.inputs[C],C,u)}function _h(r,i,o,u){const d=Je(),m=cr(),C=22+r,N=d[11],F=d[C]=cl(N,i,function hu(){return gn.lFrame.currentNamespace}()),q=m.firstCreatePass?function Aw(r,i,o,u,d,m,C){const N=i.consts,q=rf(i,r,2,d,yi(N,m));return eg(i,o,q,yi(N,C)),null!==q.attrs&&rp(q,q.attrs,!1),null!==q.mergedAttrs&&rp(q,q.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,q),q}(C,m,d,0,i,o,u):m.data[C];return _s(q,!0),yd(N,F,q),32!=(32&q.flags)&&ku(m,d,F,q),0===function aa(){return gn.lFrame.elementDepthCount}()&&Jo(F,d),function zo(){gn.lFrame.elementDepthCount++}(),Bn(q)&&(ao(m,d,q),Bm(m,q,d)),null!==u&&ep(d,q),_h}function fp(){let r=Qi();Wa()?la():(r=r.parent,_s(r,!1));const i=r;!function go(){gn.lFrame.elementDepthCount--}();const o=cr();return o.firstCreatePass&&(Hs(o,r),Fi(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function Ln(r){return 0!=(8&r.flags)}(i)&&s_(o,i,Je(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function ni(r){return 0!=(16&r.flags)}(i)&&s_(o,i,Je(),i.stylesWithoutHost,!1),fp}function o_(r,i,o,u){return _h(r,i,o,u),fp(),o_}function hg(r,i,o){const u=Je(),d=cr(),m=r+22,C=d.firstCreatePass?function Ev(r,i,o,u,d){const m=i.consts,C=yi(m,u),N=rf(i,r,8,"ng-container",C);return null!==C&&rp(N,C,!0),eg(i,o,N,yi(m,d)),null!==i.queries&&i.queries.elementStart(i,N),N}(m,d,u,i,o):d.data[m];_s(C,!0);const N=u[m]=u[11].createComment("");return ku(d,u,N,C),Jo(N,u),Bn(C)&&(ao(d,u,C),Bm(d,C,u)),null!=o&&ep(u,C),hg}function pp(){let r=Qi();const i=cr();return Wa()?la():(r=r.parent,_s(r,!1)),i.firstCreatePass&&(Hs(i,r),Fi(r)&&i.queries.elementEnd(r)),pp}function df(){return Je()}function fg(r){return!!r&&"function"==typeof r.then}function a_(r){return!!r&&"function"==typeof r.subscribe}const Iv=a_;function pg(r,i,o,u){const d=Je(),m=cr(),C=Qi();return function gg(r,i,o,u,d,m,C){const N=Bn(u),q=r.firstCreatePass&&ov(r),re=i[8],ue=sv(i);let Re=!0;if(3&u.type||C){const Vt=Li(u,i),cn=C?C(Vt):Vt,Pn=ue.length,sr=C?wr=>C(Mi(wr[u.index])):u.index;let Rt=null;if(!C&&N&&(Rt=function xw(r,i,o,u){const d=r.cleanup;if(null!=d)for(let m=0;m<d.length-1;m+=2){const C=d[m];if(C===o&&d[m+1]===u){const N=i[7],F=d[m+2];return N.length>F?N[F]:null}"string"==typeof C&&(m+=2)}return null}(r,i,d,u.index)),null!==Rt)(Rt.__ngLastListenerFn__||Rt).__ngNextListenerFn__=m,Rt.__ngLastListenerFn__=m,Re=!1;else{m=bv(u,i,re,m,!1);const wr=o.listen(cn,d,m);ue.push(m,wr),q&&q.push(d,sr,Pn,Pn+1)}}else m=bv(u,i,re,m,!1);const $e=u.outputs;let _t;if(Re&&null!==$e&&(_t=$e[d])){const Vt=_t.length;if(Vt)for(let cn=0;cn<Vt;cn+=2){const To=i[_t[cn]][_t[cn+1]].subscribe(m),Ia=ue.length;ue.push(m,To),q&&q.push(d,u.index,Ia,-(Ia+1))}}}(m,d,d[11],C,r,i,u),pg}function Ea(r,i,o,u){try{return!1!==o(u)}catch(d){return uv(r,d),!1}}function bv(r,i,o,u,d){return function m(C){if(C===Function)return u;Zm(r.componentOffset>-1?Ri(r.index,i):i);let F=Ea(i,0,u,C),q=m.__ngNextListenerFn__;for(;q;)F=Ea(i,0,q,C)&&F,q=q.__ngNextListenerFn__;return d&&!1===F&&(C.preventDefault(),C.returnValue=!1),F}}function Tv(r=1){return function Kr(r){return(gn.lFrame.contextLView=function zi(r,i){for(;r>0;)i=i[15],r--;return i}(r,gn.lFrame.contextLView))[8]}(r)}function yh(r,i,o,u,d){const m=Je(),C=lf(m,i,o,u);return C!==Jn&&tl(cr(),Rr(),m,r,C,m[11],d,!1),yh}function mp(r,i){return r<<17|i<<2}function Nd(r){return r>>17&32767}function _p(r){return 2|r}function vh(r){return(131068&r)>>2}function wg(r,i){return-131069&r|i<<2}function Eg(r){return 1|r}function vp(r,i,o,u,d){const m=r[o+1],C=null===i;let N=u?Nd(m):vh(m),F=!1;for(;0!==N&&(!1===F||C);){const re=r[N+1];Rv(r[N],i)&&(F=!0,r[N+1]=u?Eg(re):_p(re)),N=u?Nd(re):vh(re)}F&&(r[o+1]=u?_p(m):Eg(m))}function Rv(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&I(r,i)>=0}const na={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function c_(r){return r.substring(na.key,na.keyEnd)}function Nv(r,i){const o=na.textEnd;return o===i?-1:(i=na.keyEnd=function Ig(r,i,o){for(;i<o&&r.charCodeAt(i)>32;)i++;return i}(r,na.key=i,o),Pd(r,i,o))}function Pd(r,i,o){for(;i<o&&r.charCodeAt(i)<=32;)i++;return i}function bg(r,i,o){return wl(r,i,o,!1),bg}function m_(r,i){return wl(r,i,null,!0),m_}function Ov(r){!function Gu(r,i,o,u){const d=cr(),m=yo(2);d.firstUpdatePass&&Tg(d,null,m,u);const C=Je();if(o!==Jn&&$a(C,m,o)){const N=d.data[ui()];if(mf(N,u)&&!pf(d,m)){let F=u?N.classesWithoutHost:N.stylesWithoutHost;null!==F&&(o=Ve(F,o||"")),s_(d,N,C,o,u)}else!function Ip(r,i,o,u,d,m,C,N){d===Jn&&(d=ve);let F=0,q=0,re=0<d.length?d[0]:null,ue=0<m.length?m[0]:null;for(;null!==re||null!==ue;){const Re=F<d.length?d[F+1]:void 0,$e=q<m.length?m[q+1]:void 0;let Vt,_t=null;re===ue?(F+=2,q+=2,Re!==$e&&(_t=ue,Vt=$e)):null===ue||null!==re&&re<ue?(F+=2,_t=re):(q+=2,_t=ue,Vt=$e),null!==_t&&Dg(r,i,o,u,_t,Vt,C,N),re=F<d.length?d[F]:null,ue=q<m.length?m[q]:null}}(d,N,C,C[11],C[m+1],C[m+1]=function Uw(r,i,o){if(null==o||""===o)return ve;const u=[],d=S(o);if(Array.isArray(d))for(let m=0;m<d.length;m++)r(u,d[m],!0);else if("object"==typeof d)for(const m in d)d.hasOwnProperty(m)&&r(u,m,d[m]);else"string"==typeof d&&i(u,d);return u}(r,i,o),u,m)}}(b,fc,r,!0)}function fc(r,i){for(let o=function d_(r){return function p_(r){na.key=0,na.keyEnd=0,na.value=0,na.valueEnd=0,na.textEnd=r.length}(r),Nv(r,Pd(r,0,na.textEnd))}(i);o>=0;o=Nv(i,o))b(r,c_(i),!0)}function wl(r,i,o,u){const d=Je(),m=cr(),C=yo(2);m.firstUpdatePass&&Tg(m,r,C,u),i!==Jn&&$a(d,C,i)&&Dg(m,m.data[ui()],d,d[11],r,d[C+1]=function Sg(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=Fe(S(r)))),r}(i,o),u,C)}function pf(r,i){return i>=r.expandoStartIndex}function Tg(r,i,o,u){const d=r.data;if(null===d[o+1]){const m=d[ui()],C=pf(r,o);mf(m,u)&&null===i&&!C&&(i=!1),i=function kv(r,i,o,u){const d=vn(r);let m=u?i.residualClasses:i.residualStyles;if(null===d)0===(u?i.classBindings:i.styleBindings)&&(o=wh(o=__(null,r,i,o,u),i.attrs,u),m=null);else{const C=i.directiveStylingLast;if(-1===C||r[C]!==d)if(o=__(d,r,i,o,u),null===m){let F=function kw(r,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==vh(u))return r[Nd(u)]}(r,i,u);void 0!==F&&Array.isArray(F)&&(F=__(null,r,i,F[1],u),F=wh(F,i.attrs,u),function Fw(r,i,o,u){r[Nd(o?i.classBindings:i.styleBindings)]=u}(r,i,u,F))}else m=function Lw(r,i,o){let u;const d=i.directiveEnd;for(let m=1+i.directiveStylingLast;m<d;m++)u=wh(u,r[m].hostAttrs,o);return wh(u,i.attrs,o)}(r,i,u)}return void 0!==m&&(u?i.residualClasses=m:i.residualStyles=m),o}(d,m,i,u),function ff(r,i,o,u,d,m){let C=m?i.classBindings:i.styleBindings,N=Nd(C),F=vh(C);r[u]=o;let re,q=!1;if(Array.isArray(o)?(re=o[1],(null===re||I(o,re)>0)&&(q=!0)):re=o,d)if(0!==F){const Re=Nd(r[N+1]);r[u+1]=mp(Re,N),0!==Re&&(r[Re+1]=wg(r[Re+1],u)),r[N+1]=function Mv(r,i){return 131071&r|i<<17}(r[N+1],u)}else r[u+1]=mp(N,0),0!==N&&(r[N+1]=wg(r[N+1],u)),N=u;else r[u+1]=mp(F,0),0===N?N=u:r[F+1]=wg(r[F+1],u),F=u;q&&(r[u+1]=_p(r[u+1])),vp(r,re,u,!0),vp(r,re,u,!1),function l_(r,i,o,u,d){const m=d?r.residualClasses:r.residualStyles;null!=m&&"string"==typeof i&&I(m,i)>=0&&(o[u+1]=Eg(o[u+1]))}(i,re,r,u,m),C=mp(N,F),m?i.classBindings=C:i.styleBindings=C}(d,m,i,o,C,u)}}function __(r,i,o,u,d){let m=null;const C=o.directiveEnd;let N=o.directiveStylingLast;for(-1===N?N=o.directiveStart:N++;N<C&&(m=i[N],u=wh(u,m.hostAttrs,d),m!==r);)N++;return null!==r&&(o.directiveStylingLast=N),u}function wh(r,i,o){const u=o?1:2;let d=-1;if(null!==i)for(let m=0;m<i.length;m++){const C=i[m];"number"==typeof C?d=C:d===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),b(r,C,!!o||i[++m]))}return void 0===r?null:r}function Dg(r,i,o,u,d,m,C,N){if(!(3&i.type))return;const F=r.data,q=F[N+1],re=function Nw(r){return 1==(1&r)}(q)?Eh(F,i,o,d,vh(q),C):void 0;gf(re)||(gf(m)||function xv(r){return 2==(2&r)}(q)&&(m=Eh(F,null,o,d,N,C)),function bt(r,i,o,u,d){if(i)d?r.addClass(o,u):r.removeClass(o,u);else{let m=-1===u.indexOf("-")?void 0:tu.DashCase;null==d?r.removeStyle(o,u,m):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),m|=tu.Important),r.setStyle(o,u,d,m))}}(u,C,sa(ui(),o),d,m))}function Eh(r,i,o,u,d,m){const C=null===i;let N;for(;d>0;){const F=r[d],q=Array.isArray(F),re=q?F[1]:F,ue=null===re;let Re=o[d+1];Re===Jn&&(Re=ue?ve:void 0);let $e=ue?x(Re,u):re===u?Re:void 0;if(q&&!gf($e)&&($e=x(F,u)),gf($e)&&(N=$e,C))return N;const _t=r[d+1];d=C?Nd(_t):vh(_t)}if(null!==i){let F=m?i.residualClasses:i.residualStyles;null!=F&&(N=x(F,u))}return N}function gf(r){return void 0!==r}function mf(r,i){return 0!=(r.flags&(i?8:16))}function Ag(r,i=""){const o=Je(),u=cr(),d=r+22,m=u.firstCreatePass?rf(u,d,1,i,null):u.data[d],C=o[d]=function Nc(r,i){return r.createText(i)}(o[11],i);ku(u,o,C,m),_s(m,!1)}function xg(r){return _f("",r,""),xg}function _f(r,i,o){const u=Je(),d=lf(u,r,i,o);return d!==Jn&&Kc(u,ui(),d),_f}function Cp(r,i,o,u,d){const m=Je(),C=fh(m,r,i,o,u,d);return C!==Jn&&Kc(m,ui(),C),Cp}function Od(r,i,o){const u=Je();if($a(u,to(),i)){const m=cr(),C=Rr();tl(m,C,u,r,i,function av(r,i,o){return(null===r||Zr(r))&&(o=function Iu(r){for(;Array.isArray(r);){if("object"==typeof r[1])return r;r=r[0]}return null}(o[i.index])),o[11]}(vn(m.data),C,u),o,!0)}return Od}const Th=void 0;var A_=["en",[["a","p"],["AM","PM"],Th],[["AM","PM"],Th,Th],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Th,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Th,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Th,"{1} 'at' {0}",Th],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function zw(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let kd={};function bp(r){const i=function Wv(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=Lg(i);if(o)return o;const u=i.split("-")[0];if(o=Lg(u),o)return o;if("en"===u)return A_;throw new qe(701,!1)}function Gv(r){return bp(r)[Yn.PluralCase]}function Lg(r){return r in kd||(kd[r]=Gt.ng&&Gt.ng.common&&Gt.ng.common.locales&&Gt.ng.common.locales[r]),kd[r]}var Yn=(()=>((Yn=Yn||{})[Yn.LocaleId=0]="LocaleId",Yn[Yn.DayPeriodsFormat=1]="DayPeriodsFormat",Yn[Yn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Yn[Yn.DaysFormat=3]="DaysFormat",Yn[Yn.DaysStandalone=4]="DaysStandalone",Yn[Yn.MonthsFormat=5]="MonthsFormat",Yn[Yn.MonthsStandalone=6]="MonthsStandalone",Yn[Yn.Eras=7]="Eras",Yn[Yn.FirstDayOfWeek=8]="FirstDayOfWeek",Yn[Yn.WeekendRange=9]="WeekendRange",Yn[Yn.DateFormat=10]="DateFormat",Yn[Yn.TimeFormat=11]="TimeFormat",Yn[Yn.DateTimeFormat=12]="DateTimeFormat",Yn[Yn.NumberSymbols=13]="NumberSymbols",Yn[Yn.NumberFormats=14]="NumberFormats",Yn[Yn.CurrencyCode=15]="CurrencyCode",Yn[Yn.CurrencySymbol=16]="CurrencySymbol",Yn[Yn.CurrencyName=17]="CurrencyName",Yn[Yn.Currencies=18]="Currencies",Yn[Yn.Directionality=19]="Directionality",Yn[Yn.PluralCase=20]="PluralCase",Yn[Yn.ExtraData=21]="ExtraData",Yn))();const Dh="en-US";let Kv=Dh;function Yg(r,i,o,u,d){if(r=Te(r),Array.isArray(r))for(let m=0;m<r.length;m++)Yg(r[m],i,o,u,d);else{const m=cr(),C=Je();let N=ic(r)?r:Te(r.provide),F=Xh(r);const q=Qi(),re=1048575&q.providerIndexes,ue=q.directiveStart,Re=q.providerIndexes>>20;if(ic(r)||!r.multi){const $e=new ct(F,d,qc),_t=Qg(N,i,d?re:re+Re,ue);-1===_t?(Oa(Ko(q,C),m,N),Sp(m,r,i.length),i.push(N),q.directiveStart++,q.directiveEnd++,d&&(q.providerIndexes+=1048576),o.push($e),C.push($e)):(o[_t]=$e,C[_t]=$e)}else{const $e=Qg(N,i,re+Re,ue),_t=Qg(N,i,re,re+Re),cn=_t>=0&&o[_t];if(d&&!cn||!d&&!($e>=0&&o[$e])){Oa(Ko(q,C),m,N);const Pn=function v0(r,i,o,u,d){const m=new ct(r,o,qc);return m.multi=[],m.index=i,m.componentProviders=0,X_(m,d,u&&!o),m}(d?Xg:y0,o.length,d,u,F);!d&&cn&&(o[_t].providerFactory=Pn),Sp(m,r,i.length,0),i.push(N),q.directiveStart++,q.directiveEnd++,d&&(q.providerIndexes+=1048576),o.push(Pn),C.push(Pn)}else Sp(m,r,$e>-1?$e:_t,X_(o[d?_t:$e],F,!d&&u));!d&&u&&cn&&o[_t].componentProviders++}}}function Sp(r,i,o,u){const d=ic(i),m=function Em(r){return!!r.useClass}(i);if(d||m){const F=(m?Te(i.useClass):i).prototype.ngOnDestroy;if(F){const q=r.destroyHooks||(r.destroyHooks=[]);if(!d&&i.multi){const re=q.indexOf(o);-1===re?q.push(o,[u,F]):q[re+1].push(u,F)}else q.push(o,F)}}}function X_(r,i,o){return o&&r.componentProviders++,r.multi.push(i)-1}function Qg(r,i,o,u){for(let d=o;d<u;d++)if(i[d]===r)return d;return-1}function y0(r,i,o,u){return $r(this.multi,[])}function Xg(r,i,o,u){const d=this.multi;let m;if(this.providerFactory){const C=this.providerFactory.componentProviders,N=Nr(o,o[1],this.providerFactory.index,u);m=N.slice(0,C),$r(d,m);for(let F=C;F<N.length;F++)m.push(N[F])}else m=[],$r(d,m);return m}function $r(r,i){for(let o=0;o<r.length;o++)i.push((0,r[o])());return i}function J_(r,i=[]){return o=>{o.providersResolver=(u,d)=>function oE(r,i,o){const u=cr();if(u.firstCreatePass){const d=Zr(r);Yg(o,u.data,u.blueprint,d,!0),Yg(i,u.data,u.blueprint,d,!1)}}(u,d?d(r):r,i)}}class mc{}class ey{}function Us(r,i){return new Hl(r,i??null)}class Hl extends mc{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new va(this);const u=vr(i);this._bootstrapComponents=Bu(u.bootstrap),this._r3Injector=Rm(i,o,[{provide:mc,useValue:this},{provide:it,useValue:this.componentFactoryResolver}],Fe(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Jg extends ey{constructor(i){super(),this.moduleType=i}create(i){return new Hl(this.moduleType,i)}}class aE extends mc{constructor(i,o,u){super(),this.componentFactoryResolver=new va(this),this.instance=null;const d=new Lr([...i,{provide:mc,useValue:this},{provide:it,useValue:this.componentFactoryResolver}],o||eh(),u,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Tf(r,i,o=null){return new aE(r,i,o).injector}let w0=(()=>{class r{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=Qd(0,o.type),d=u.length>0?Tf([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,d)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=nn({token:r,providedIn:"environment",factory:()=>new r(Mt(Bl))}),r})();function em(r){r.getStandaloneInjector=i=>i.get(w0).getOrCreateStandaloneInjector(r)}function T0(r,i,o,u){return function S0(r,i,o,u,d,m){const C=i+o;return $a(r,C,d)?jl(r,C+1,m?u.call(m,d):u(d)):xp(r,C+1)}(Je(),oi(),r,i,o,u)}function xp(r,i){const o=r[i];return o===Jn?void 0:o}function Fd(r,i){const o=cr();let u;const d=r+22;o.firstCreatePass?(u=function rm(r,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(r===u.name)return u}}(i,o.pipeRegistry),o.data[d]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(d,u.onDestroy)):u=o.data[d];const m=u.factory||(u.factory=ns(u.type)),C=Un(qc);try{const N=ha(!1),F=m();return ha(N),function vv(r,i,o,u){o>=r.data.length&&(r.data[o]=null,r.blueprint[o]=null),i[o]=u}(o,Je(),d,F),F}finally{Un(C)}}function sm(r,i,o,u){const d=r+22,m=Je(),C=oa(m,d);return function Rh(r,i){return r[1].data[i].pure}(m,d)?function ry(r,i,o,u,d,m,C){const N=i+o;return xd(r,N,d,m)?jl(r,N+2,C?u.call(C,d,m):u(d,m)):xp(r,N+2)}(m,oi(),i,C.transform,o,u,C):C.transform(o,u)}function om(r){return i=>{setTimeout(r,void 0,i)}}const vu=class sy extends A.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){let d=i,m=o||(()=>null),C=u;if(i&&"object"==typeof i){const F=i;d=F.next?.bind(F),m=F.error?.bind(F),C=F.complete?.bind(F)}this.__isAsync&&(m=om(m),d&&(d=om(d)),C&&(C=om(C)));const N=super.subscribe({next:d,error:m,complete:C});return i instanceof y.w0&&i.add(N),N}};function M0(){return this._results[Hu()]()}class am{get changes(){return this._changes||(this._changes=new vu)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Hu(),u=am.prototype;u[o]||(u[o]=M0)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const d=function qs(r){return r.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Lo(r,i,o){if(r.length!==i.length)return!1;for(let u=0;u<r.length;u++){let d=r[u],m=i[u];if(o&&(d=o(d),m=o(m)),m!==d)return!1}return!0}(u._results,d,o))&&(u._results=d,u.length=d.length,u.last=d[this.length-1],u.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Nh=(()=>{class r{}return r.__NG_ELEMENT_ID__=um,r})();const Rp=Nh,mE=class extends Rp{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i,o){const u=this._declarationTContainer.tViews,d=Xf(this._declarationLView,u,i,16,null,u.declTNode,null,null,null,null,o||null);d[17]=this._declarationLView[this._declarationTContainer.index];const C=this._declarationLView[19];return null!==C&&(d[19]=C.createEmbeddedView(u)),Um(u,d,i),new sp(d)}};function um(){return Ph(Qi(),Je())}function Ph(r,i){return 4&r.type?new mE(i,r,Wt(r,i)):null}let Np=(()=>{class r{}return r.__NG_ELEMENT_ID__=Pp,r})();function Pp(){return Df(Qi(),Je())}const _E=Np,Op=class extends _E{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return Wt(this._hostTNode,this._hostLView)}get injector(){return new Es(this._hostTNode,this._hostLView)}get parentInjector(){const i=bu(this._hostTNode,this._hostLView);if(Ma(i)){const o=da(i,this._hostLView),u=Oo(i);return new Es(o[1].data[u+8],o)}return new Es(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=oy(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){let d,m;"number"==typeof u?d=u:null!=u&&(d=u.index,m=u.injector);const C=i.createEmbeddedView(o||{},m);return this.insert(C,d),C}createComponent(i,o,u,d,m){const C=i&&!function Tu(r){return"function"==typeof r}(i);let N;if(C)N=o;else{const ue=o||{};N=ue.index,u=ue.injector,d=ue.projectableNodes,m=ue.environmentInjector||ue.ngModuleRef}const F=C?i:new yl(ur(i)),q=u||this.parentInjector;if(!m&&null==F.ngModule){const Re=(C?q:this.parentInjector).get(Bl,null);Re&&(m=Re)}const re=F.create(q,d,void 0,m);return this.insert(re.hostView,N),re}insert(i,o){const u=i._lView,d=u[1];if(function gs(r){return Ci(r[3])}(u)){const re=this.indexOf(i);if(-1!==re)this.detach(re);else{const ue=u[3],Re=new Op(ue,ue[6],ue[3]);Re.detach(Re.indexOf(i))}}const m=this._adjustIndex(o),C=this._lContainer;!function Gd(r,i,o,u){const d=10+u,m=o.length;u>0&&(o[d-1][4]=i),u<m-10?(i[4]=o[d],Uo(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const C=i[17];null!==C&&o!==C&&function Oc(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(C,i);const N=i[19];null!==N&&N.insertView(r),i[2]|=64}(d,u,C,m);const N=Os(m,C),F=u[11],q=Ou(F,C[7]);return null!==q&&function Hh(r,i,o,u,d,m){u[0]=d,u[6]=i,En(r,u,o,1,d,m)}(d,C[6],F,u,q,N),i.attachToViewContainerRef(),Uo(kp(C),m,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=oy(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=hl(this._lContainer,o);u&&(Oi(kp(this._lContainer),o),ja(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=hl(this._lContainer,o);return u&&null!=Oi(kp(this._lContainer),o)?new sp(u):null}_adjustIndex(i,o=0){return i??this.length+o}};function oy(r){return r[8]}function kp(r){return r[8]||(r[8]=[])}function Df(r,i){let o;const u=i[r.index];if(Ci(u))o=u;else{let d;if(8&r.type)d=Mi(u);else{const m=i[11];d=m.createComment("");const C=Li(r,i);Pu(m,Ou(m,C),d,function fl(r,i){return r.nextSibling(i)}(m,C),!1)}i[r.index]=o=np(u,i,d,r),rg(i,o)}return new Op(o,r,i)}class yc{constructor(i){this.queryList=i,this.matches=null}clone(){return new yc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Oh{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,d=[];for(let m=0;m<u;m++){const C=o.getByIndex(m);d.push(this.queries[C.indexInDeclarationView].clone())}return new Oh(d)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==cy(i,o).matches&&this.queries[o].setDirty()}}class R0{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class Ld{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const d=null!==o?o.length:0,m=this.getByIndex(u).embeddedTView(i,d);m&&(m.indexInDeclarationView=u,null!==o?o.push(m):o=[m])}return null!==o?new Ld(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class N0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new N0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let d=0;d<u.length;d++){const m=u[d];this.matchTNodeWithReadOption(i,o,dI(o,m)),this.matchTNodeWithReadOption(i,o,Ya(o,i,m,!1,!1))}else u===Nh?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,Ya(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const d=this.metadata.read;if(null!==d)if(d===Nn||d===Np||d===Nh&&4&o.type)this.addMatch(o.index,-2);else{const m=Ya(o,i,d,!1,!1);null!==m&&this.addMatch(o.index,m)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function dI(r,i){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function yE(r,i,o,u){return-1===o?function ay(r,i){return 11&r.type?Wt(r,i):4&r.type?Ph(r,i):null}(i,r):-2===o?function lm(r,i,o){return o===Nn?Wt(i,r):o===Nh?Ph(i,r):o===Np?Df(i,r):void 0}(r,i,u):Nr(r,r[1],o,i)}function P0(r,i,o,u){const d=i[19].queries[u];if(null===d.matches){const m=r.data,C=o.matches,N=[];for(let F=0;F<C.length;F+=2){const q=C[F];N.push(q<0?null:yE(i,m[q],C[F+1],o.metadata.read))}d.matches=N}return d.matches}function uy(r,i,o,u){const d=r.queries.getByIndex(o),m=d.matches;if(null!==m){const C=P0(r,i,d,o);for(let N=0;N<m.length;N+=2){const F=m[N];if(F>0)u.push(C[N/2]);else{const q=m[N+1],re=i[-F];for(let ue=10;ue<re.length;ue++){const Re=re[ue];Re[17]===Re[3]&&uy(Re[1],Re,q,u)}if(null!==re[9]){const ue=re[9];for(let Re=0;Re<ue.length;Re++){const $e=ue[Re];uy($e[1],$e,q,u)}}}}}return u}function Fp(r){const i=Je(),o=cr(),u=Rs();qo(u+1);const d=cy(o,u);if(r.dirty&&function Mo(r){return 4==(4&r[2])}(i)===(2==(2&d.metadata.flags))){if(null===d.matches)r.reset([]);else{const m=d.crossesNgTemplate?uy(o,i,u,[]):P0(o,i,d,u);r.reset(m,jn),r.notifyOnChanges()}return!0}return!1}function O0(r,i,o,u){const d=cr();if(d.firstCreatePass){const m=Qi();(function ly(r,i,o){null===r.queries&&(r.queries=new Ld),r.queries.track(new N0(i,o))})(d,new R0(i,o,u),m.index),function F0(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(d,r),2==(2&o)&&(d.staticContentQueries=!0)}!function k0(r,i,o){const u=new am(4==(4&o));Hm(r,i,u,u.destroy),null===i[19]&&(i[19]=new Oh),i[19].queries.push(new yc(u))}(d,Je(),o)}function Lp(){return function wE(r,i){return r[19].queries[i].queryList}(Je(),Rs())}function cy(r,i){return r.queries.getByIndex(i)}function vc(...r){}const Eu=new un("Application Initializer");let Vp=(()=>{class r{constructor(o){this.appInits=o,this.resolve=vc,this.reject=vc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,d)=>{this.resolve=u,this.reject=d})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const m=this.appInits[d]();if(fg(m))o.push(m);else if(Iv(m)){const C=new Promise((N,F)=>{m.subscribe({complete:N,error:F})});o.push(C)}}Promise.all(o).then(()=>{u()}).catch(d=>{this.reject(d)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(Mt(Eu,8))},r.\u0275prov=nn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Ey=new un("AppId",{providedIn:"root",factory:function Mf(){return`${ou()}${ou()}${ou()}`}});function ou(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const X0=new un("Platform Initializer"),Iy=new un("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Fh=new un("appBootstrapListener");let Lh=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=nn({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const pm=new un("LocaleId",{providedIn:"root",factory:()=>Pt(pm,Lt.Optional|Lt.SkipSelf)||function OE(){return typeof $localize<"u"&&$localize.locale||Dh}()}),kE=new un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Cy{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let gm=(()=>{class r{compileModuleSync(o){return new Jg(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),m=Bu(vr(o).declarations).reduce((C,N)=>{const F=ur(N);return F&&C.push(new yl(F)),C},[]);return new Cy(u,m)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=nn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const UE=(()=>Promise.resolve(0))();function mm(r){typeof Zone>"u"?UE.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Il{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vu(!1),this.onMicrotaskEmpty=new vu(!1),this.onStable=new vu(!1),this.onError=new vu(!1),typeof Zone>"u")throw new qe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!u&&o,d.shouldCoalesceRunChangeDetection=u,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function nw(){let r=Gt.requestAnimationFrame,i=Gt.cancelAnimationFrame;if(typeof Zone<"u"&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function BE(r){const i=()=>{!function VE(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Gt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Sy(r),r.isCheckStableRunning=!0,Dy(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Sy(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,d,m,C,N)=>{try{return Uh(r),o.invokeTask(d,m,C,N)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||r.shouldCoalesceRunChangeDetection)&&i(),n(r)}},onInvoke:(o,u,d,m,C,N,F)=>{try{return Uh(r),o.invoke(d,m,C,N,F)}finally{r.shouldCoalesceRunChangeDetection&&i(),n(r)}},onHasTask:(o,u,d,m)=>{o.hasTask(d,m),u===d&&("microTask"==m.change?(r._hasPendingMicrotasks=m.microTask,Sy(r),Dy(r)):"macroTask"==m.change&&(r.hasPendingMacrotasks=m.macroTask))},onHandleError:(o,u,d,m)=>(o.handleError(d,m),r.runOutsideAngular(()=>r.onError.emit(m)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Il.isInAngularZone())throw new qe(909,!1)}static assertNotInAngularZone(){if(Il.isInAngularZone())throw new qe(909,!1)}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,d){const m=this._inner,C=m.scheduleEventTask("NgZoneEvent: "+d,i,rw,vc,vc);try{return m.runTask(C,o,u)}finally{m.cancelTask(C)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const rw={};function Dy(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Sy(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function Uh(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function n(r){r._nesting--,Dy(r)}class e{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vu,this.onMicrotaskEmpty=new vu,this.onStable=new vu,this.onError=new vu}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,d){return i.apply(o,u)}}const t=new un(""),s=new un("");let M,a=(()=>{class r{constructor(o,u,d){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,M||(function v(r){M=r}(d),d.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Il.assertNotInAngularZone(),mm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())mm(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,d){let m=-1;u&&u>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==m),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:m,updateCb:d})}whenStable(o,u,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,d){return[]}}return r.\u0275fac=function(o){return new(o||r)(Mt(Il),Mt(f),Mt(s))},r.\u0275prov=nn({token:r,factory:r.\u0275fac}),r})(),f=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return M?.findTestabilityInTree(this,o,u)??null}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=nn({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),B=null;const W=new un("AllowMultipleToken"),ee=new un("PlatformDestroyListeners");class jt{constructor(i,o){this.name=i,this.token=o}}function Ar(r,i,o=[]){const u=`Platform: ${i}`,d=new un(u);return(m=[])=>{let C=nl();if(!C||C.injector.get(W,!1)){const N=[...o,...m,{provide:d,useValue:!0}];r?r(N):function Jt(r){if(B&&!B.get(W,!1))throw new qe(400,!1);B=r;const i=r.get(_m);(function ci(r){const i=r.get(X0,null);i&&i.forEach(o=>o())})(r)}(function Or(r=[],i){return ih.create({name:i,providers:[{provide:Kh,useValue:"platform"},{provide:ee,useValue:new Set([()=>B=null])},...r]})}(N,u))}return function Pr(r){const i=nl();if(!i)throw new qe(401,!1);return i}()}}function nl(){return B?.get(_m)??null}let _m=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const d=function bI(r,i){let o;return o="noop"===r?new e:("zone.js"===r?void 0:r)||new Il(i),o}(u?.ngZone,function CI(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(u)),m=[{provide:Il,useValue:d}];return d.run(()=>{const C=ih.create({providers:m,parent:this.injector,name:o.moduleType.name}),N=o.create(C),F=N.injector.get(th,null);if(!F)throw new qe(402,!1);return d.runOutsideAngular(()=>{const q=d.onError.subscribe({next:re=>{F.handleError(re)}});N.onDestroy(()=>{sw(this._modules,N),q.unsubscribe()})}),function TI(r,i,o){try{const u=o();return fg(u)?u.catch(d=>{throw i.runOutsideAngular(()=>r.handleError(d)),d}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(F,d,()=>{const q=N.injector.get(Vp);return q.runInitializers(),q.donePromise.then(()=>(function Vg(r){$t(r,"Expected localeId to be defined"),"string"==typeof r&&(Kv=r.toLowerCase().replace(/_/g,"-"))}(N.injector.get(pm,Dh)||Dh),this._moduleDoBootstrap(N),N))})})}bootstrapModule(o,u=[]){const d=DI({},u);return function Oe(r,i,o){const u=new Jg(o);return Promise.resolve(u)}(0,0,o).then(m=>this.bootstrapModuleFactory(m,d))}_moduleDoBootstrap(o){const u=o.injector.get(iw);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(d=>u.bootstrap(d));else{if(!o.instance.ngDoBootstrap)throw new qe(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new qe(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(ee,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(Mt(ih))},r.\u0275prov=nn({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function DI(r,i){return Array.isArray(i)?i.reduce(DI,r):{...r,...i}}let iw=(()=>{class r{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,u,d){this._zone=o,this._injector=u,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new U.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),C=new U.y(N=>{let F;this._zone.runOutsideAngular(()=>{F=this._zone.onStable.subscribe(()=>{Il.assertNotInAngularZone(),mm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const q=this._zone.onUnstable.subscribe(()=>{Il.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{F.unsubscribe(),q.unsubscribe()}});this.isStable=(0,Ae.T)(m,C.pipe((0,De.B)()))}bootstrap(o,u){const d=o instanceof z;if(!this._injector.get(Vp).done)throw!d&&kn(o),new qe(405,false);let C;C=d?o:this._injector.get(it).resolveComponentFactory(o),this.componentTypes.push(C.componentType);const N=function dt(r){return r.isBoundToModule}(C)?void 0:this._injector.get(mc),q=C.create(ih.NULL,[],u||C.selector,N),re=q.location.nativeElement,ue=q.injector.get(t,null);return ue?.registerApplication(re),q.onDestroy(()=>{this.detachView(q.hostView),sw(this.components,q),ue?.unregisterApplication(re)}),this._loadComponent(q),q}tick(){if(this._runningTick)throw new qe(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;sw(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(Fh,[]);u.push(...this._bootstrapListeners),u.forEach(d=>d(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>sw(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new qe(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(o){return new(o||r)(Mt(Il),Mt(Bl),Mt(th))},r.\u0275prov=nn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function sw(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}function BI(){return!1}let jI=(()=>{class r{}return r.__NG_ELEMENT_ID__=$I,r})();function $I(r){return function HI(r,i,o){if(Fn(r)&&!o){const u=Ri(r.index,i);return new sp(u,u)}return 47&r.type?new sp(i[16],i):null}(Qi(),Je(),16==(16&r))}class RI{constructor(){}supports(i){return dg(i)}create(i){return new KI(i)}}const ZI=(r,i)=>i;class KI{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||ZI}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,d=0,m=null;for(;o||u;){const C=!u||o&&o.currentIndex<PI(u,d,m)?o:u,N=PI(C,d,m),F=C.currentIndex;if(C===u)d--,u=u._nextRemoved;else if(o=o._next,null==C.previousIndex)d++;else{m||(m=[]);const q=N-d,re=F-d;if(q!=re){for(let Re=0;Re<q;Re++){const $e=Re<m.length?m[Re]:m[Re]=0,_t=$e+Re;re<=_t&&_t<q&&(m[Re]=$e+1)}m[C.previousIndex]=re-q}}N!==F&&i(C,N,F)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!dg(i))throw new qe(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let d,m,C,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let N=0;N<this.length;N++)m=i[N],C=this._trackByFn(N,m),null!==o&&Object.is(o.trackById,C)?(u&&(o=this._verifyReinsertion(o,m,C,N)),Object.is(o.item,m)||this._addIdentityChange(o,m)):(o=this._mismatch(o,m,C,N),u=!0),o=o._next}else d=0,function Sw(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[Hu()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,N=>{C=this._trackByFn(d,N),null!==o&&Object.is(o.trackById,C)?(u&&(o=this._verifyReinsertion(o,N,C,d)),Object.is(o.item,N)||this._addIdentityChange(o,N)):(o=this._mismatch(o,N,C,d),u=!0),o=o._next,d++}),this.length=d;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,d){let m;return null===i?m=this._itTail:(m=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,m,d)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,d))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,m,d)):i=this._addAfter(new YI(o,u),m,d),i}_verifyReinsertion(i,o,u,d){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==m?i=this._reinsertAfter(m,i._prev,d):i.currentIndex!=d&&(i.currentIndex=d,this._addToMoves(i,d)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const d=i._prevRemoved,m=i._nextRemoved;return null===d?this._removalsHead=m:d._nextRemoved=m,null===m?this._removalsTail=d:m._prevRemoved=d,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const d=null===o?this._itHead:o._next;return i._next=d,i._prev=o,null===d?this._itTail=i:d._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new NI),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new NI),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class YI{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class NI{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new QI,this.map.set(o,u)),u.add(i)}get(i,o){const d=this.map.get(i);return d?d.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function PI(r,i,o){const u=r.previousIndex;if(null===u)return u;let d=0;return o&&u<o.length&&(d=o[u]),u+i+d}class OI{constructor(){}supports(i){return i instanceof Map||lp(i)}create(){return new XI}}class XI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||lp(i)))throw new qe(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,d)=>{if(o&&o.key===d)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const m=this._getOrCreateRecordForKey(d,u);o=this._insertBeforeOrAppend(o,m)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const d=this._records.get(i);this._maybeAddToChanges(d,o);const m=d._prev,C=d._next;return m&&(m._next=C),C&&(C._prev=m),d._next=null,d._prev=null,d}const u=new JI(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class JI{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kI(){return new zE([new RI])}let zE=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const d=u.factories.slice();o=o.concat(d)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||kI()),deps:[[r,new H,new Eo]]}}find(o){const u=this.factories.find(d=>d.supports(o));if(null!=u)return u;throw new qe(901,!1)}}return r.\u0275prov=nn({token:r,providedIn:"root",factory:kI}),r})();function FI(){return new WE([new OI])}let WE=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const d=u.factories.slice();o=o.concat(d)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||FI()),deps:[[r,new H,new Eo]]}}find(o){const u=this.factories.find(d=>d.supports(o));if(u)return u;throw new qe(901,!1)}}return r.\u0275prov=nn({token:r,providedIn:"root",factory:FI}),r})();const nC=Ar(null,"core",[]);let rC=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(Mt(iw))},r.\u0275mod=mr({type:r}),r.\u0275inj=Qr({}),r})();function iC(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},1481:(qt,We,Y)=>{Y.d(We,{Dx:()=>Jr,H7:()=>Be,b2:()=>br,q6:()=>Xr});var A=Y(6895),y=Y(4650);class U extends A.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ae extends U{static makeCurrent(){(0,A.HT)(new Ae)}onAndCancel(we,ae,Se){return we.addEventListener(ae,Se,!1),()=>{we.removeEventListener(ae,Se,!1)}}dispatchEvent(we,ae){we.dispatchEvent(ae)}remove(we){we.parentNode&&we.parentNode.removeChild(we)}createElement(we,ae){return(ae=ae||this.getDefaultDocument()).createElement(we)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(we){return we.nodeType===Node.ELEMENT_NODE}isShadowRoot(we){return we instanceof DocumentFragment}getGlobalEventTarget(we,ae){return"window"===ae?window:"document"===ae?we:"body"===ae?we.body:null}getBaseHref(we){const ae=function xe(){return De=De||document.querySelector("base"),De?De.getAttribute("href"):null}();return null==ae?null:function Fe(ve){Le=Le||document.createElement("a"),Le.setAttribute("href",ve);const we=Le.pathname;return"/"===we.charAt(0)?we:`/${we}`}(ae)}resetBaseElement(){De=null}getUserAgent(){return window.navigator.userAgent}getCookie(we){return(0,A.Mx)(document.cookie,we)}}let Le,De=null;const Ve=new y.OlP("TRANSITION_ID"),pe=[{provide:y.ip1,useFactory:function ge(ve,we,ae){return()=>{ae.get(y.CZH).donePromise.then(()=>{const Se=(0,A.q)(),gt=we.querySelectorAll(`style[ng-transition="${ve}"]`);for(let Zt=0;Zt<gt.length;Zt++)Se.remove(gt[Zt])})}},deps:[Ve,A.K0,y.zs3],multi:!0}];let yt=(()=>{class ve{build(){return new XMLHttpRequest}}return ve.\u0275fac=function(ae){return new(ae||ve)},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const ht=new y.OlP("EventManagerPlugins");let At=(()=>{class ve{constructor(ae,Se){this._zone=Se,this._eventNameToPlugin=new Map,ae.forEach(gt=>gt.manager=this),this._plugins=ae.slice().reverse()}addEventListener(ae,Se,gt){return this._findPluginFor(Se).addEventListener(ae,Se,gt)}addGlobalEventListener(ae,Se,gt){return this._findPluginFor(Se).addGlobalEventListener(ae,Se,gt)}getZone(){return this._zone}_findPluginFor(ae){const Se=this._eventNameToPlugin.get(ae);if(Se)return Se;const gt=this._plugins;for(let Zt=0;Zt<gt.length;Zt++){const Vn=gt[Zt];if(Vn.supports(ae))return this._eventNameToPlugin.set(ae,Vn),Vn}throw new Error(`No event manager plugin found for event ${ae}`)}}return ve.\u0275fac=function(ae){return new(ae||ve)(y.LFG(ht),y.LFG(y.R0b))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class Qt{constructor(we){this._doc=we}addGlobalEventListener(we,ae,Se){const gt=(0,A.q)().getGlobalEventTarget(this._doc,we);if(!gt)throw new Error(`Unsupported event target ${gt} for event ${ae}`);return this.addEventListener(gt,ae,Se)}}let qe=(()=>{class ve{constructor(){this._stylesSet=new Set}addStyles(ae){const Se=new Set;ae.forEach(gt=>{this._stylesSet.has(gt)||(this._stylesSet.add(gt),Se.add(gt))}),this.onStylesAdded(Se)}onStylesAdded(ae){}getAllStyles(){return Array.from(this._stylesSet)}}return ve.\u0275fac=function(ae){return new(ae||ve)},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})(),at=(()=>{class ve extends qe{constructor(ae){super(),this._doc=ae,this._hostNodes=new Map,this._hostNodes.set(ae.head,[])}_addStylesToHost(ae,Se,gt){ae.forEach(Zt=>{const Vn=this._doc.createElement("style");Vn.textContent=Zt,gt.push(Se.appendChild(Vn))})}addHost(ae){const Se=[];this._addStylesToHost(this._stylesSet,ae,Se),this._hostNodes.set(ae,Se)}removeHost(ae){const Se=this._hostNodes.get(ae);Se&&Se.forEach(ot),this._hostNodes.delete(ae)}onStylesAdded(ae){this._hostNodes.forEach((Se,gt)=>{this._addStylesToHost(ae,gt,Se)})}ngOnDestroy(){this._hostNodes.forEach(ae=>ae.forEach(ot))}}return ve.\u0275fac=function(ae){return new(ae||ve)(y.LFG(A.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();function ot(ve){(0,A.q)().remove(ve)}const Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ft=/%COMP%/g;function ye(ve,we){return we.flat(100).map(ae=>ae.replace(ft,ve))}function Ce(ve){return we=>{if("__ngUnwrap__"===we)return ve;!1===ve(we)&&(we.preventDefault(),we.returnValue=!1)}}let se=(()=>{class ve{constructor(ae,Se,gt){this.eventManager=ae,this.sharedStylesHost=Se,this.appId=gt,this.rendererByCompId=new Map,this.defaultRenderer=new ke(ae)}createRenderer(ae,Se){if(!ae||!Se)return this.defaultRenderer;switch(Se.encapsulation){case y.ifc.Emulated:{let gt=this.rendererByCompId.get(Se.id);return gt||(gt=new Ot(this.eventManager,this.sharedStylesHost,Se,this.appId),this.rendererByCompId.set(Se.id,gt)),gt.applyToHost(ae),gt}case y.ifc.ShadowDom:return new dn(this.eventManager,this.sharedStylesHost,ae,Se);default:if(!this.rendererByCompId.has(Se.id)){const gt=ye(Se.id,Se.styles);this.sharedStylesHost.addStyles(gt),this.rendererByCompId.set(Se.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ve.\u0275fac=function(ae){return new(ae||ve)(y.LFG(At),y.LFG(at),y.LFG(y.AFp))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class ke{constructor(we){this.eventManager=we,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(we,ae){return ae?document.createElementNS(Et[ae]||ae,we):document.createElement(we)}createComment(we){return document.createComment(we)}createText(we){return document.createTextNode(we)}appendChild(we,ae){(St(we)?we.content:we).appendChild(ae)}insertBefore(we,ae,Se){we&&(St(we)?we.content:we).insertBefore(ae,Se)}removeChild(we,ae){we&&we.removeChild(ae)}selectRootElement(we,ae){let Se="string"==typeof we?document.querySelector(we):we;if(!Se)throw new Error(`The selector "${we}" did not match any elements`);return ae||(Se.textContent=""),Se}parentNode(we){return we.parentNode}nextSibling(we){return we.nextSibling}setAttribute(we,ae,Se,gt){if(gt){ae=gt+":"+ae;const Zt=Et[gt];Zt?we.setAttributeNS(Zt,ae,Se):we.setAttribute(ae,Se)}else we.setAttribute(ae,Se)}removeAttribute(we,ae,Se){if(Se){const gt=Et[Se];gt?we.removeAttributeNS(gt,ae):we.removeAttribute(`${Se}:${ae}`)}else we.removeAttribute(ae)}addClass(we,ae){we.classList.add(ae)}removeClass(we,ae){we.classList.remove(ae)}setStyle(we,ae,Se,gt){gt&(y.JOm.DashCase|y.JOm.Important)?we.style.setProperty(ae,Se,gt&y.JOm.Important?"important":""):we.style[ae]=Se}removeStyle(we,ae,Se){Se&y.JOm.DashCase?we.style.removeProperty(ae):we.style[ae]=""}setProperty(we,ae,Se){we[ae]=Se}setValue(we,ae){we.nodeValue=ae}listen(we,ae,Se){return"string"==typeof we?this.eventManager.addGlobalEventListener(we,ae,Ce(Se)):this.eventManager.addEventListener(we,ae,Ce(Se))}}function St(ve){return"TEMPLATE"===ve.tagName&&void 0!==ve.content}class Ot extends ke{constructor(we,ae,Se,gt){super(we),this.component=Se;const Zt=ye(gt+"-"+Se.id,Se.styles);ae.addStyles(Zt),this.contentAttr=function G(ve){return"_ngcontent-%COMP%".replace(ft,ve)}(gt+"-"+Se.id),this.hostAttr=function Xe(ve){return"_nghost-%COMP%".replace(ft,ve)}(gt+"-"+Se.id)}applyToHost(we){super.setAttribute(we,this.hostAttr,"")}createElement(we,ae){const Se=super.createElement(we,ae);return super.setAttribute(Se,this.contentAttr,""),Se}}class dn extends ke{constructor(we,ae,Se,gt){super(we),this.sharedStylesHost=ae,this.hostEl=Se,this.shadowRoot=Se.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Zt=ye(gt.id,gt.styles);for(let Vn=0;Vn<Zt.length;Vn++){const Ir=document.createElement("style");Ir.textContent=Zt[Vn],this.shadowRoot.appendChild(Ir)}}nodeOrShadowRoot(we){return we===this.hostEl?this.shadowRoot:we}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(we,ae){return super.appendChild(this.nodeOrShadowRoot(we),ae)}insertBefore(we,ae,Se){return super.insertBefore(this.nodeOrShadowRoot(we),ae,Se)}removeChild(we,ae){return super.removeChild(this.nodeOrShadowRoot(we),ae)}parentNode(we){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(we)))}}let kt=(()=>{class ve extends Qt{constructor(ae){super(ae)}supports(ae){return!0}addEventListener(ae,Se,gt){return ae.addEventListener(Se,gt,!1),()=>this.removeEventListener(ae,Se,gt)}removeEventListener(ae,Se,gt){return ae.removeEventListener(Se,gt)}}return ve.\u0275fac=function(ae){return new(ae||ve)(y.LFG(A.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const $t=["alt","control","meta","shift"],Dt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Nt={alt:ve=>ve.altKey,control:ve=>ve.ctrlKey,meta:ve=>ve.metaKey,shift:ve=>ve.shiftKey};let Cn=(()=>{class ve extends Qt{constructor(ae){super(ae)}supports(ae){return null!=ve.parseEventName(ae)}addEventListener(ae,Se,gt){const Zt=ve.parseEventName(Se),Vn=ve.eventCallback(Zt.fullKey,gt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,A.q)().onAndCancel(ae,Zt.domEventName,Vn))}static parseEventName(ae){const Se=ae.toLowerCase().split("."),gt=Se.shift();if(0===Se.length||"keydown"!==gt&&"keyup"!==gt)return null;const Zt=ve._normalizeKey(Se.pop());let Vn="",Ir=Se.indexOf("code");if(Ir>-1&&(Se.splice(Ir,1),Vn="code."),$t.forEach(ls=>{const Vs=Se.indexOf(ls);Vs>-1&&(Se.splice(Vs,1),Vn+=ls+".")}),Vn+=Zt,0!=Se.length||0===Zt.length)return null;const Br={};return Br.domEventName=gt,Br.fullKey=Vn,Br}static matchEventFullKeyCode(ae,Se){let gt=Dt[ae.key]||ae.key,Zt="";return Se.indexOf("code.")>-1&&(gt=ae.code,Zt="code."),!(null==gt||!gt)&&(gt=gt.toLowerCase()," "===gt?gt="space":"."===gt&&(gt="dot"),$t.forEach(Vn=>{Vn!==gt&&(0,Nt[Vn])(ae)&&(Zt+=Vn+".")}),Zt+=gt,Zt===Se)}static eventCallback(ae,Se,gt){return Zt=>{ve.matchEventFullKeyCode(Zt,ae)&&gt.runGuarded(()=>Se(Zt))}}static _normalizeKey(ae){return"esc"===ae?"escape":ae}}return ve.\u0275fac=function(ae){return new(ae||ve)(y.LFG(A.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const Xr=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:A.bD},{provide:y.g9A,useValue:function pr(){Ae.makeCurrent()},multi:!0},{provide:A.K0,useFactory:function ki(){return(0,y.RDi)(document),document},deps:[]}]),Er=new y.OlP(""),ar=[{provide:y.rWj,useClass:class Te{addToWindow(we){y.dqk.getAngularTestability=(Se,gt=!0)=>{const Zt=we.findTestabilityInTree(Se,gt);if(null==Zt)throw new Error("Could not find testability for element.");return Zt},y.dqk.getAllAngularTestabilities=()=>we.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>we.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(Se=>{const gt=y.dqk.getAllAngularTestabilities();let Zt=gt.length,Vn=!1;const Ir=function(Br){Vn=Vn||Br,Zt--,0==Zt&&Se(Vn)};gt.forEach(function(Br){Br.whenStable(Ir)})})}findTestabilityInTree(we,ae,Se){return null==ae?null:we.getTestability(ae)??(Se?(0,A.q)().isShadowRoot(ae)?this.findTestabilityInTree(we,ae.host,!0):this.findTestabilityInTree(we,ae.parentElement,!0):null)}},deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],Tn=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function Zn(){return new y.qLn},deps:[]},{provide:ht,useClass:kt,multi:!0,deps:[A.K0,y.R0b,y.Lbi]},{provide:ht,useClass:Cn,multi:!0,deps:[A.K0]},{provide:se,useClass:se,deps:[At,at,y.AFp]},{provide:y.FYo,useExisting:se},{provide:qe,useExisting:at},{provide:at,useClass:at,deps:[A.K0]},{provide:At,useClass:At,deps:[ht,y.R0b]},{provide:A.JF,useClass:yt,deps:[]},[]];let br=(()=>{class ve{constructor(ae){}static withServerTransition(ae){return{ngModule:ve,providers:[{provide:y.AFp,useValue:ae.appId},{provide:Ve,useExisting:y.AFp},pe]}}}return ve.\u0275fac=function(ae){return new(ae||ve)(y.LFG(Er,12))},ve.\u0275mod=y.oAB({type:ve}),ve.\u0275inj=y.cJS({providers:[...Tn,...ar],imports:[A.ez,y.hGG]}),ve})(),Jr=(()=>{class ve{constructor(ae){this._doc=ae}getTitle(){return this._doc.title}setTitle(ae){this._doc.title=ae||""}}return ve.\u0275fac=function(ae){return new(ae||ve)(y.LFG(A.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:function(ae){let Se=null;return Se=ae?new ae:function Un(){return new Jr((0,y.LFG)(A.K0))}(),Se},providedIn:"root"}),ve})();typeof window<"u"&&window;let Be=(()=>{class ve{}return ve.\u0275fac=function(ae){return new(ae||ve)},ve.\u0275prov=y.Yz7({token:ve,factory:function(ae){let Se=null;return Se=ae?new(ae||ve):y.LFG(on),Se},providedIn:"root"}),ve})(),on=(()=>{class ve extends Be{constructor(ae){super(),this._doc=ae}sanitize(ae,Se){if(null==Se)return null;switch(ae){case y.q3G.NONE:return Se;case y.q3G.HTML:return(0,y.qzn)(Se,"HTML")?(0,y.z3N)(Se):(0,y.EiD)(this._doc,String(Se)).toString();case y.q3G.STYLE:return(0,y.qzn)(Se,"Style")?(0,y.z3N)(Se):Se;case y.q3G.SCRIPT:if((0,y.qzn)(Se,"Script"))return(0,y.z3N)(Se);throw new Error("unsafe value used in a script context");case y.q3G.URL:return(0,y.qzn)(Se,"URL")?(0,y.z3N)(Se):(0,y.mCW)(String(Se));case y.q3G.RESOURCE_URL:if((0,y.qzn)(Se,"ResourceURL"))return(0,y.z3N)(Se);throw new Error(`unsafe value used in a resource URL context (see ${y.JZr})`);default:throw new Error(`Unexpected SecurityContext ${ae} (see ${y.JZr})`)}}bypassSecurityTrustHtml(ae){return(0,y.JVY)(ae)}bypassSecurityTrustStyle(ae){return(0,y.L6k)(ae)}bypassSecurityTrustScript(ae){return(0,y.eBb)(ae)}bypassSecurityTrustUrl(ae){return(0,y.LAX)(ae)}bypassSecurityTrustResourceUrl(ae){return(0,y.pB0)(ae)}}return ve.\u0275fac=function(ae){return new(ae||ve)(y.LFG(A.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:function(ae){let Se=null;return Se=ae?new ae:function Ft(ve){return new on(ve.get(A.K0))}(y.LFG(y.zs3)),Se},providedIn:"root"}),ve})()},9051:(qt,We,Y)=>{Y.d(We,{gz:()=>lo,F0:()=>Nr,rH:()=>Ti,Od:()=>Ps,Bz:()=>qs,lC:()=>$s});var A=Y(4650),y=Y(8996),U=Y(9646),Ae=Y(7579);class De extends Ae.x{constructor(x){super(),this._value=x}get value(){return this.getValue()}_subscribe(x){const I=super._subscribe(x);return!I.closed&&x.next(this._value),I}getValue(){const{hasError:x,thrownError:I,_value:P}=this;if(x)throw I;return this._throwIfClosed(),P}next(x){super.next(this._value=x)}}var xe=Y(6805),Le=Y(9751),Fe=Y(4742),Ve=Y(4671),ge=Y(3268),pe=Y(7669),Te=Y(1810),yt=Y(5403),ht=Y(9672);function At(...b){const x=(0,pe.yG)(b),I=(0,pe.jO)(b),{args:P,keys:$}=(0,Fe.D)(b);if(0===P.length)return(0,y.D)([],x);const X=new Le.y(function Qt(b,x,I=Ve.y){return P=>{qe(x,()=>{const{length:$}=b,X=new Array($);let ne=$,Me=$;for(let lt=0;lt<$;lt++)qe(x,()=>{const sn=(0,y.D)(b[lt],x);let Kt=!1;sn.subscribe((0,yt.x)(P,rr=>{X[lt]=rr,Kt||(Kt=!0,Me--),Me||P.next(I(X.slice()))},()=>{--ne||P.complete()}))},P)},P)}}(P,x,$?ne=>(0,Te.n)($,ne):Ve.y));return I?X.pipe((0,ge.Z)(I)):X}function qe(b,x,I){b?(0,ht.f)(I,b,x):x()}var at=Y(7272),ot=Y(8421);function Et(b){return new Le.y(x=>{(0,ot.Xf)(b()).subscribe(x)})}var ft=Y(9635),st=Y(576);function rt(b,x){const I=(0,st.m)(b)?b:()=>b,P=$=>$.error(I());return new Le.y(x?$=>x.schedule(P,0,$):P)}var Ct=Y(515),vt=Y(727),G=Y(4482);function Xe(){return(0,G.e)((b,x)=>{let I=null;b._refCount++;const P=(0,yt.x)(x,void 0,void 0,void 0,()=>{if(!b||b._refCount<=0||0<--b._refCount)return void(I=null);const $=b._connection,X=I;I=null,$&&(!X||$===X)&&$.unsubscribe(),x.unsubscribe()});b.subscribe(P),P.closed||(I=b.connect())})}class ye extends Le.y{constructor(x,I){super(),this.source=x,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,G.A)(x)&&(this.lift=x.lift)}_subscribe(x){return this.getSubject().subscribe(x)}getSubject(){const x=this._subject;return(!x||x.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:x}=this;this._subject=this._connection=null,x?.unsubscribe()}connect(){let x=this._connection;if(!x){x=this._connection=new vt.w0;const I=this.getSubject();x.add(this.source.subscribe((0,yt.x)(I,void 0,()=>{this._teardown(),I.complete()},P=>{this._teardown(),I.error(P)},()=>this._teardown()))),x.closed&&(this._connection=null,x=vt.w0.EMPTY)}return x}refCount(){return Xe()(this)}}var Ce=Y(6895),se=Y(4004),ke=Y(3900),Ke=Y(5698),Tt=Y(8675),St=Y(9300),Ot=Y(5577),dn=Y(590);function kt(b,x){return(0,st.m)(x)?(0,Ot.z)(b,x,1):(0,Ot.z)(b,1)}var $t=Y(8505);function Dt(b){return(0,G.e)((x,I)=>{let X,P=null,$=!1;P=x.subscribe((0,yt.x)(I,void 0,void 0,ne=>{X=(0,ot.Xf)(b(ne,Dt(b)(x))),P?(P.unsubscribe(),P=null,X.subscribe(I)):$=!0})),$&&(P.unsubscribe(),P=null,X.subscribe(I))})}var Nt=Y(5026);function Cn(b){return b<=0?()=>Ct.E:(0,G.e)((x,I)=>{let P=[];x.subscribe((0,yt.x)(I,$=>{P.push($),b<P.length&&P.shift()},()=>{for(const $ of P)I.next($);I.complete()},void 0,()=>{P=null}))})}var zn=Y(8068),nn=Y(6590);function bn(b,x){const I=arguments.length>=2;return P=>P.pipe(b?(0,St.h)(($,X)=>b($,X,P)):Ve.y,Cn(1),I?(0,nn.d)(x):(0,zn.T)(()=>new xe.K))}function pr(b){return(0,G.e)((x,I)=>{try{x.subscribe(I)}finally{I.add(b)}})}var Zn=Y(8189),ki=Y(1481);const en="primary",Xr=Symbol("RouteTitle");class Er{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const I=this.params[x];return Array.isArray(I)?I[0]:I}return null}getAll(x){if(this.has(x)){const I=this.params[x];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function ar(b){return new Er(b)}function Tn(b,x,I){const P=I.path.split("/");if(P.length>b.length||"full"===I.pathMatch&&(x.hasChildren()||P.length<b.length))return null;const $={};for(let X=0;X<P.length;X++){const ne=P[X],Me=b[X];if(ne.startsWith(":"))$[ne.substring(1)]=Me;else if(ne!==Me.path)return null}return{consumed:b.slice(0,P.length),posParams:$}}function Lt(b,x){const I=b?Object.keys(b):void 0,P=x?Object.keys(x):void 0;if(!I||!P||I.length!=P.length)return!1;let $;for(let X=0;X<I.length;X++)if($=I[X],!Ai(b[$],x[$]))return!1;return!0}function Ai(b,x){if(Array.isArray(b)&&Array.isArray(x)){if(b.length!==x.length)return!1;const I=[...b].sort(),P=[...x].sort();return I.every(($,X)=>P[X]===$)}return b===x}function $i(b){return Array.prototype.concat.apply([],b)}function Un(b){return b.length>0?b[b.length-1]:null}function dr(b,x){for(const I in b)b.hasOwnProperty(I)&&x(b[I],I)}function Gt(b){return(0,A.CqO)(b)?b:(0,A.QGY)(b)?(0,y.D)(Promise.resolve(b)):(0,U.of)(b)}const hn=!1,An={exact:function xr(b,x,I){if(!pt(b.segments,x.segments)||!Ii(b.segments,x.segments,I)||b.numberOfChildren!==x.numberOfChildren)return!1;for(const P in x.children)if(!b.children[P]||!xr(b.children[P],x.children[P],I))return!1;return!0},subset:Vr},us={exact:function Gr(b,x){return Lt(b,x)},subset:function gr(b,x){return Object.keys(x).length<=Object.keys(b).length&&Object.keys(x).every(I=>Ai(b[I],x[I]))},ignored:()=>!0};function Kn(b,x,I){return An[I.paths](b.root,x.root,I.matrixParams)&&us[I.queryParams](b.queryParams,x.queryParams)&&!("exact"===I.fragment&&b.fragment!==x.fragment)}function Vr(b,x,I){return tr(b,x,x.segments,I)}function tr(b,x,I,P){if(b.segments.length>I.length){const $=b.segments.slice(0,I.length);return!(!pt($,I)||x.hasChildren()||!Ii($,I,P))}if(b.segments.length===I.length){if(!pt(b.segments,I)||!Ii(b.segments,I,P))return!1;for(const $ in x.children)if(!b.children[$]||!Vr(b.children[$],x.children[$],P))return!1;return!0}{const $=I.slice(0,b.segments.length),X=I.slice(b.segments.length);return!!(pt(b.segments,$)&&Ii(b.segments,$,P)&&b.children[en])&&tr(b.children[en],x,X,P)}}function Ii(b,x,I){return x.every((P,$)=>us[I](b[$].parameters,P.parameters))}class yn{constructor(x=new fn([],{}),I={},P=null){this.root=x,this.queryParams=I,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ar(this.queryParams)),this._queryParamMap}toString(){return Dn.serialize(this)}}class fn{constructor(x,I){this.segments=x,this.children=I,this.parent=null,dr(I,(P,$)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ei(this)}}class zr{constructor(x,I){this.path=x,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=ar(this.parameters)),this._parameterMap}toString(){return Wn(this)}}function pt(b,x){return b.length===x.length&&b.every((I,P)=>I.path===x[P].path)}let pn=(()=>{class b{}return b.\u0275fac=function(I){return new(I||b)},b.\u0275prov=A.Yz7({token:b,factory:function(){return new Xt},providedIn:"root"}),b})();class Xt{parse(x){const I=new Br(x);return new yn(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(x){const I=`/${me(x.root,!0)}`,P=function we(b){const x=Object.keys(b).map(I=>{const P=b[I];return Array.isArray(P)?P.map($=>`${Ee(I)}=${Ee($)}`).join("&"):`${Ee(I)}=${Ee(P)}`}).filter(I=>!!I);return x.length?`?${x.join("&")}`:""}(x.queryParams);return`${I}${P}${"string"==typeof x.fragment?`#${function nt(b){return encodeURI(b)}(x.fragment)}`:""}`}}const Dn=new Xt;function ei(b){return b.segments.map(x=>Wn(x)).join("/")}function me(b,x){if(!b.hasChildren())return ei(b);if(x){const I=b.children[en]?me(b.children[en],!1):"",P=[];return dr(b.children,($,X)=>{X!==en&&P.push(`${X}:${me($,!1)}`)}),P.length>0?`${I}(${P.join("//")})`:I}{const I=function Pt(b,x){let I=[];return dr(b.children,(P,$)=>{$===en&&(I=I.concat(x(P,$)))}),dr(b.children,(P,$)=>{$!==en&&(I=I.concat(x(P,$)))}),I}(b,(P,$)=>$===en?[me(b.children[en],!1)]:[`${$}:${me(P,!1)}`]);return 1===Object.keys(b.children).length&&null!=b.children[en]?`${ei(b)}/${I[0]}`:`${ei(b)}/(${I.join("//")})`}}function fe(b){return encodeURIComponent(b).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ee(b){return fe(b).replace(/%3B/gi,";")}function Be(b){return fe(b).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ft(b){return decodeURIComponent(b)}function on(b){return Ft(b.replace(/\+/g,"%20"))}function Wn(b){return`${Be(b.path)}${function ve(b){return Object.keys(b).map(x=>`;${Be(x)}=${Be(b[x])}`).join("")}(b.parameters)}`}const ae=/^[^\/()?;=#]+/;function Se(b){const x=b.match(ae);return x?x[0]:""}const gt=/^[^=?&#]+/,Vn=/^[^&#]+/;class Br{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fn([],{}):new fn([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(x.length>0||Object.keys(I).length>0)&&(P[en]=new fn(x,I)),P}parseSegment(){const x=Se(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new A.vHH(4009,hn);return this.capture(x),new zr(Ft(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const I=Se(this.remaining);if(!I)return;this.capture(I);let P="";if(this.consumeOptional("=")){const $=Se(this.remaining);$&&(P=$,this.capture(P))}x[Ft(I)]=Ft(P)}parseQueryParam(x){const I=function Zt(b){const x=b.match(gt);return x?x[0]:""}(this.remaining);if(!I)return;this.capture(I);let P="";if(this.consumeOptional("=")){const ne=function Ir(b){const x=b.match(Vn);return x?x[0]:""}(this.remaining);ne&&(P=ne,this.capture(P))}const $=on(I),X=on(P);if(x.hasOwnProperty($)){let ne=x[$];Array.isArray(ne)||(ne=[ne],x[$]=ne),ne.push(X)}else x[$]=X}parseParens(x){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=Se(this.remaining),$=this.remaining[P.length];if("/"!==$&&")"!==$&&";"!==$)throw new A.vHH(4010,hn);let X;P.indexOf(":")>-1?(X=P.slice(0,P.indexOf(":")),this.capture(X),this.capture(":")):x&&(X=en);const ne=this.parseChildren();I[X]=1===Object.keys(ne).length?ne[en]:new fn([],ne),this.consumeOptional("//")}return I}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new A.vHH(4011,hn)}}function ls(b){return b.segments.length>0?new fn([],{[en]:b}):b}function Vs(b){const x={};for(const P of Object.keys(b.children)){const X=Vs(b.children[P]);(X.segments.length>0||X.hasChildren())&&(x[P]=X)}return function ra(b){if(1===b.numberOfChildren&&b.children[en]){const x=b.children[en];return new fn(b.segments.concat(x.segments),x.children)}return b}(new fn(b.segments,x))}function mr(b){return b instanceof yn}function ur(b,x,I,P,$){if(0===I.length)return kn(x.root,x.root,x.root,P,$);const X=function Ht(b){if("string"==typeof b[0]&&1===b.length&&"/"===b[0])return new Ki(!0,0,b);let x=0,I=!1;const P=b.reduce(($,X,ne)=>{if("object"==typeof X&&null!=X){if(X.outlets){const Me={};return dr(X.outlets,(lt,sn)=>{Me[sn]="string"==typeof lt?lt.split("/"):lt}),[...$,{outlets:Me}]}if(X.segmentPath)return[...$,X.segmentPath]}return"string"!=typeof X?[...$,X]:0===ne?(X.split("/").forEach((Me,lt)=>{0==lt&&"."===Me||(0==lt&&""===Me?I=!0:".."===Me?x++:""!=Me&&$.push(Me))}),$):[...$,X]},[]);return new Ki(I,x,P)}(I);return X.toRoot()?kn(x.root,x.root,new fn([],{}),P,$):function ne(lt){const sn=function Tr(b,x,I,P){if(b.isAbsolute)return new xn(x.root,!0,0);if(-1===P)return new xn(I,I===x.root,0);return function qr(b,x,I){let P=b,$=x,X=I;for(;X>$;){if(X-=$,P=P.parent,!P)throw new A.vHH(4005,!1);$=P.segments.length}return new xn(P,!1,$-X)}(I,P+(Wr(b.commands[0])?0:1),b.numberOfDoubleDots)}(X,x,b.snapshot?._urlSegment,lt),Kt=sn.processChildren?fr(sn.segmentGroup,sn.index,X.commands):cs(sn.segmentGroup,sn.index,X.commands);return kn(x.root,sn.segmentGroup,Kt,P,$)}(b.snapshot?._lastPathIndex)}function Wr(b){return"object"==typeof b&&null!=b&&!b.outlets&&!b.segmentPath}function kr(b){return"object"==typeof b&&null!=b&&b.outlets}function kn(b,x,I,P,$){let ne,X={};P&&dr(P,(lt,sn)=>{X[sn]=Array.isArray(lt)?lt.map(Kt=>`${Kt}`):`${lt}`}),ne=b===x?I:vr(b,x,I);const Me=ls(Vs(ne));return new yn(Me,X,$)}function vr(b,x,I){const P={};return dr(b.children,($,X)=>{P[X]=$===x?I:vr($,x,I)}),new fn(b.segments,P)}class Ki{constructor(x,I,P){if(this.isAbsolute=x,this.numberOfDoubleDots=I,this.commands=P,x&&P.length>0&&Wr(P[0]))throw new A.vHH(4003,!1);const $=P.find(kr);if($&&$!==Un(P))throw new A.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xn{constructor(x,I,P){this.segmentGroup=x,this.processChildren=I,this.index=P}}function cs(b,x,I){if(b||(b=new fn([],{})),0===b.segments.length&&b.hasChildren())return fr(b,x,I);const P=function ds(b,x,I){let P=0,$=x;const X={match:!1,pathIndex:0,commandIndex:0};for(;$<b.segments.length;){if(P>=I.length)return X;const ne=b.segments[$],Me=I[P];if(kr(Me))break;const lt=`${Me}`,sn=P<I.length-1?I[P+1]:null;if($>0&&void 0===lt)break;if(lt&&sn&&"object"==typeof sn&&void 0===sn.outlets){if(!eo(lt,sn,ne))return X;P+=2}else{if(!eo(lt,{},ne))return X;P++}$++}return{match:!0,pathIndex:$,commandIndex:P}}(b,x,I),$=I.slice(P.commandIndex);if(P.match&&P.pathIndex<b.segments.length){const X=new fn(b.segments.slice(0,P.pathIndex),{});return X.children[en]=new fn(b.segments.slice(P.pathIndex),b.children),fr(X,0,$)}return P.match&&0===$.length?new fn(b.segments,{}):P.match&&!b.hasChildren()?es(b,x,I):P.match?fr(b,0,$):es(b,x,I)}function fr(b,x,I){if(0===I.length)return new fn(b.segments,{});{const P=function Mr(b){return kr(b[0])?b[0].outlets:{[en]:b}}(I),$={};return!P[en]&&b.children[en]&&1===b.numberOfChildren&&0===b.children[en].segments.length?fr(b.children[en],x,I):(dr(P,(X,ne)=>{"string"==typeof X&&(X=[X]),null!==X&&($[ne]=cs(b.children[ne],x,X))}),dr(b.children,(X,ne)=>{void 0===P[ne]&&($[ne]=X)}),new fn(b.segments,$))}}function es(b,x,I){const P=b.segments.slice(0,x);let $=0;for(;$<I.length;){const X=I[$];if(kr(X)){const lt=Gn(X.outlets);return new fn(P,lt)}if(0===$&&Wr(I[0])){P.push(new zr(b.segments[x].path,Ca(I[0]))),$++;continue}const ne=kr(X)?X.outlets[en]:`${X}`,Me=$<I.length-1?I[$+1]:null;ne&&Me&&Wr(Me)?(P.push(new zr(ne,Ca(Me))),$+=2):(P.push(new zr(ne,{})),$++)}return new fn(P,{})}function Gn(b){const x={};return dr(b,(I,P)=>{"string"==typeof I&&(I=[I]),null!==I&&(x[P]=es(new fn([],{}),0,I))}),x}function Ca(b){const x={};return dr(b,(I,P)=>x[P]=`${I}`),x}function eo(b,x,I){return b==I.path&&Lt(x,I.parameters)}const $o="imperative";class _i{constructor(x,I){this.id=x,this.url=I}}class xi extends _i{constructor(x,I,P="imperative",$=null){super(x,I),this.type=0,this.navigationTrigger=P,this.restoredState=$}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hs extends _i{constructor(x,I,P){super(x,I),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ds extends _i{constructor(x,I,P,$){super(x,I),this.reason=P,this.code=$,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ts extends _i{constructor(x,I,P,$){super(x,I),this.reason=P,this.code=$,this.type=16}}class fs extends _i{constructor(x,I,P,$){super(x,I),this.error=P,this.target=$,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ss extends _i{constructor(x,I,P,$){super(x,I),this.urlAfterRedirects=P,this.state=$,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ie extends _i{constructor(x,I,P,$){super(x,I),this.urlAfterRedirects=P,this.state=$,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class be extends _i{constructor(x,I,P,$,X){super(x,I),this.urlAfterRedirects=P,this.state=$,this.shouldActivate=X,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ue extends _i{constructor(x,I,P,$){super(x,I),this.urlAfterRedirects=P,this.state=$,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ge extends _i{constructor(x,I,P,$){super(x,I),this.urlAfterRedirects=P,this.state=$,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ut{constructor(x){this.route=x,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mt{constructor(x){this.route=x,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _n{constructor(x){this.snapshot=x,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class an{constructor(x){this.snapshot=x,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nr{constructor(x){this.snapshot=x,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ii{constructor(x){this.snapshot=x,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ci{constructor(x,I,P){this.routerEvent=x,this.position=I,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Bn=(()=>{class b{createUrlTree(I,P,$,X,ne,Me){return ur(I||P.root,$,X,ne,Me)}}return b.\u0275fac=function(I){return new(I||b)},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac}),b})(),au=(()=>{class b{}return b.\u0275fac=function(I){return new(I||b)},b.\u0275prov=A.Yz7({token:b,factory:function(x){return Bn.\u0275fac(x)},providedIn:"root"}),b})();class Ha{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const I=this.pathFromRoot(x);return I.length>1?I[I.length-2]:null}children(x){const I=Yi(x,this._root);return I?I.children.map(P=>P.value):[]}firstChild(x){const I=Yi(x,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(x){const I=hi(x,this._root);return I.length<2?[]:I[I.length-2].children.map($=>$.value).filter($=>$!==x)}pathFromRoot(x){return hi(x,this._root).map(I=>I.value)}}function Yi(b,x){if(b===x.value)return x;for(const I of x.children){const P=Yi(b,I);if(P)return P}return null}function hi(b,x){if(b===x.value)return[x];for(const I of x.children){const P=hi(b,I);if(P.length)return P.unshift(x),P}return[]}class Hi{constructor(x,I){this.value=x,this.children=I}toString(){return`TreeNode(${this.value})`}}function As(b){const x={};return b&&b.children.forEach(I=>x[I.value.outlet]=I),x}class uo extends Ha{constructor(x,I){super(x),this.snapshot=I,Ta(this,x)}toString(){return this.snapshot.toString()}}function Bs(b,x){const I=function ba(b,x){const ne=new ps([],{},{},"",{},en,x,null,b.root,-1,{});return new zu("",new Hi(ne,[]))}(b,x),P=new De([new zr("",{})]),$=new De({}),X=new De({}),ne=new De({}),Me=new De(""),lt=new lo(P,$,ne,Me,X,en,x,I.root);return lt.snapshot=I.root,new uo(new Hi(lt,[]),I)}class lo{constructor(x,I,P,$,X,ne,Me,lt){this.url=x,this.params=I,this.queryParams=P,this.fragment=$,this.data=X,this.outlet=ne,this.component=Me,this.title=this.data?.pipe((0,se.U)(sn=>sn[Xr]))??(0,U.of)(void 0),this._futureSnapshot=lt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,se.U)(x=>ar(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,se.U)(x=>ar(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function co(b,x="emptyOnly"){const I=b.pathFromRoot;let P=0;if("always"!==x)for(P=I.length-1;P>=1;){const $=I[P],X=I[P-1];if($.routeConfig&&""===$.routeConfig.path)P--;else{if(X.component)break;P--}}return function xs(b){return b.reduce((x,I)=>({params:{...x.params,...I.params},data:{...x.data,...I.data},resolve:{...I.data,...x.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(P))}class ps{get title(){return this.data?.[Xr]}constructor(x,I,P,$,X,ne,Me,lt,sn,Kt,rr){this.url=x,this.params=I,this.queryParams=P,this.fragment=$,this.data=X,this.outlet=ne,this.component=Me,this.routeConfig=lt,this._urlSegment=sn,this._lastPathIndex=Kt,this._resolve=rr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ar(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ar(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zu extends Ha{constructor(x,I){super(I),this.url=x,Ta(this,I)}toString(){return Ga(this._root)}}function Ta(b,x){x.value._routerState=b,x.children.forEach(I=>Ta(b,I))}function Ga(b){const x=b.children.length>0?` { ${b.children.map(Ga).join(", ")} } `:"";return`${b.value}${x}`}function si(b){if(b.snapshot){const x=b.snapshot,I=b._futureSnapshot;b.snapshot=I,Lt(x.queryParams,I.queryParams)||b.queryParams.next(I.queryParams),x.fragment!==I.fragment&&b.fragment.next(I.fragment),Lt(x.params,I.params)||b.params.next(I.params),function br(b,x){if(b.length!==x.length)return!1;for(let I=0;I<b.length;++I)if(!Lt(b[I],x[I]))return!1;return!0}(x.url,I.url)||b.url.next(I.url),Lt(x.data,I.data)||b.data.next(I.data)}else b.snapshot=b._futureSnapshot,b.data.next(b._futureSnapshot.data)}function $n(b,x){const I=Lt(b.params,x.params)&&function Mt(b,x){return pt(b,x)&&b.every((I,P)=>Lt(I.parameters,x[P].parameters))}(b.url,x.url);return I&&!(!b.parent!=!x.parent)&&(!b.parent||$n(b.parent,x.parent))}function Ho(b,x,I){if(I&&b.shouldReuseRoute(x.value,I.value.snapshot)){const P=I.value;P._futureSnapshot=x.value;const $=function ia(b,x,I){return x.children.map(P=>{for(const $ of I.children)if(b.shouldReuseRoute(P.value,$.value.snapshot))return Ho(b,P,$);return Ho(b,P)})}(b,x,I);return new Hi(P,$)}{if(b.shouldAttach(x.value)){const X=b.retrieve(x.value);if(null!==X){const ne=X.route;return ne.value._futureSnapshot=x.value,ne.children=x.children.map(Me=>Ho(b,Me)),ne}}const P=function ns(b){return new lo(new De(b.url),new De(b.params),new De(b.queryParams),new De(b.fragment),new De(b.data),b.outlet,b.component,b)}(x.value),$=x.children.map(X=>Ho(b,X));return new Hi(P,$)}}const js="ngNavigationCancelingError";function Gi(b,x){const{redirectTo:I,navigationBehaviorOptions:P}=mr(x)?{redirectTo:x,navigationBehaviorOptions:void 0}:x,$=So(!1,0,x);return $.url=I,$.navigationBehaviorOptions=P,$}function So(b,x,I){const P=new Error("NavigationCancelingError: "+(b||""));return P[js]=!0,P.cancellationCode=x,I&&(P.url=I),P}function bi(b){return ho(b)&&mr(b.url)}function ho(b){return b&&b[js]}class fo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ao,this.attachRef=null}}let Ao=(()=>{class b{constructor(){this.contexts=new Map}onChildOutletCreated(I,P){const $=this.getOrCreateContext(I);$.outlet=P,this.contexts.set(I,$)}onChildOutletDestroyed(I){const P=this.getContext(I);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let P=this.getContext(I);return P||(P=new fo,this.contexts.set(I,P)),P}getContext(I){return this.contexts.get(I)||null}}return b.\u0275fac=function(I){return new(I||b)},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const lu=!1;let $s=(()=>{class b{constructor(){this.activated=null,this._activatedRoute=null,this.name=en,this.activateEvents=new A.vpe,this.deactivateEvents=new A.vpe,this.attachEvents=new A.vpe,this.detachEvents=new A.vpe,this.parentContexts=(0,A.f3M)(Ao),this.location=(0,A.f3M)(A.s_b),this.changeDetector=(0,A.f3M)(A.sBO),this.environmentInjector=(0,A.f3M)(A.lqb)}ngOnChanges(I){if(I.name){const{firstChange:P,previousValue:$}=I.name;if(P)return;this.isTrackedInParentContexts($)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed($)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(I){return this.parentContexts.getContext(I)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);I?.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A.vHH(4012,lu);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A.vHH(4012,lu);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A.vHH(4012,lu);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,P){this.activated=I,this._activatedRoute=P,this.location.insert(I.hostView),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,P){if(this.isActivated)throw new A.vHH(4013,lu);this._activatedRoute=I;const $=this.location,ne=I.snapshot.component,Me=this.parentContexts.getOrCreateContext(this.name).children,lt=new xo(I,Me,$.injector);if(P&&function rs(b){return!!b.resolveComponentFactory}(P)){const sn=P.resolveComponentFactory(ne);this.activated=$.createComponent(sn,$.length,lt)}else this.activated=$.createComponent(ne,{index:$.length,injector:lt,environmentInjector:P??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return b.\u0275fac=function(I){return new(I||b)},b.\u0275dir=A.lG2({type:b,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[A.TTD]}),b})();class xo{constructor(x,I,P){this.route=x,this.childContexts=I,this.parent=P}get(x,I){return x===lo?this.route:x===Ao?this.childContexts:this.parent.get(x,I)}}let Dr=(()=>{class b{}return b.\u0275fac=function(I){return new(I||b)},b.\u0275cmp=A.Xpm({type:b,selectors:[["ng-component"]],standalone:!0,features:[A.jDz],decls:1,vars:0,template:function(I,P){1&I&&A._UZ(0,"router-outlet")},dependencies:[$s],encapsulation:2}),b})();function po(b,x){return b.providers&&!b._injector&&(b._injector=(0,A.MMx)(b.providers,x,`Route: ${b.path}`)),b._injector??x}function Mo(b){const x=b.children&&b.children.map(Mo),I=x?{...b,children:x}:{...b};return!I.component&&!I.loadComponent&&(x||I.loadChildren)&&I.outlet&&I.outlet!==en&&(I.component=Dr),I}function fi(b){return b.outlet||en}function gs(b,x){const I=b.filter(P=>fi(P)===x);return I.push(...b.filter(P=>fi(P)!==x)),I}function yi(b){if(!b)return null;if(b.routeConfig?._injector)return b.routeConfig._injector;for(let x=b.parent;x;x=x.parent){const I=x.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class Da{constructor(x,I,P,$){this.routeReuseStrategy=x,this.futureState=I,this.currState=P,this.forwardEvent=$}activate(x){const I=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,P,x),si(this.futureState.root),this.activateChildRoutes(I,P,x)}deactivateChildRoutes(x,I,P){const $=As(I);x.children.forEach(X=>{const ne=X.value.outlet;this.deactivateRoutes(X,$[ne],P),delete $[ne]}),dr($,(X,ne)=>{this.deactivateRouteAndItsChildren(X,P)})}deactivateRoutes(x,I,P){const $=x.value,X=I?I.value:null;if($===X)if($.component){const ne=P.getContext($.outlet);ne&&this.deactivateChildRoutes(x,I,ne.children)}else this.deactivateChildRoutes(x,I,P);else X&&this.deactivateRouteAndItsChildren(I,P)}deactivateRouteAndItsChildren(x,I){x.value.component&&this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,I):this.deactivateRouteAndOutlet(x,I)}detachAndStoreRouteSubtree(x,I){const P=I.getContext(x.value.outlet),$=P&&x.value.component?P.children:I,X=As(x);for(const ne of Object.keys(X))this.deactivateRouteAndItsChildren(X[ne],$);if(P&&P.outlet){const ne=P.outlet.detach(),Me=P.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:ne,route:x,contexts:Me})}}deactivateRouteAndOutlet(x,I){const P=I.getContext(x.value.outlet),$=P&&x.value.component?P.children:I,X=As(x);for(const ne of Object.keys(X))this.deactivateRouteAndItsChildren(X[ne],$);P&&P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated(),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(x,I,P){const $=As(I);x.children.forEach(X=>{this.activateRoutes(X,$[X.value.outlet],P),this.forwardEvent(new ii(X.value.snapshot))}),x.children.length&&this.forwardEvent(new an(x.value.snapshot))}activateRoutes(x,I,P){const $=x.value,X=I?I.value:null;if(si($),$===X)if($.component){const ne=P.getOrCreateContext($.outlet);this.activateChildRoutes(x,I,ne.children)}else this.activateChildRoutes(x,I,P);else if($.component){const ne=P.getOrCreateContext($.outlet);if(this.routeReuseStrategy.shouldAttach($.snapshot)){const Me=this.routeReuseStrategy.retrieve($.snapshot);this.routeReuseStrategy.store($.snapshot,null),ne.children.onOutletReAttached(Me.contexts),ne.attachRef=Me.componentRef,ne.route=Me.route.value,ne.outlet&&ne.outlet.attach(Me.componentRef,Me.route.value),si(Me.route.value),this.activateChildRoutes(x,null,ne.children)}else{const Me=yi($.snapshot),lt=Me?.get(A._Vd)??null;ne.attachRef=null,ne.route=$,ne.resolver=lt,ne.injector=Me,ne.outlet&&ne.outlet.activateWith($,ne.injector),this.activateChildRoutes(x,null,ne.children)}}else this.activateChildRoutes(x,null,P)}}class gn{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class Go{constructor(x,I){this.component=x,this.route=I}}function ti(b,x,I){const P=b._root;return go(P,x?x._root:null,I,[P.value])}function zo(b,x){const I=Symbol(),P=x.get(b,I);return P===I?"function"!=typeof b||(0,A.Z0I)(b)?x.get(b):b:P}function go(b,x,I,P,$={canDeactivateChecks:[],canActivateChecks:[]}){const X=As(x);return b.children.forEach(ne=>{(function za(b,x,I,P,$={canDeactivateChecks:[],canActivateChecks:[]}){const X=b.value,ne=x?x.value:null,Me=I?I.getContext(b.value.outlet):null;if(ne&&X.routeConfig===ne.routeConfig){const lt=function ua(b,x,I){if("function"==typeof I)return I(b,x);switch(I){case"pathParamsChange":return!pt(b.url,x.url);case"pathParamsOrQueryParamsChange":return!pt(b.url,x.url)||!Lt(b.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$n(b,x)||!Lt(b.queryParams,x.queryParams);default:return!$n(b,x)}}(ne,X,X.routeConfig.runGuardsAndResolvers);lt?$.canActivateChecks.push(new gn(P)):(X.data=ne.data,X._resolvedData=ne._resolvedData),go(b,x,X.component?Me?Me.children:null:I,P,$),lt&&Me&&Me.outlet&&Me.outlet.isActivated&&$.canDeactivateChecks.push(new Go(Me.outlet.component,ne))}else ne&&ms(x,Me,$),$.canActivateChecks.push(new gn(P)),go(b,null,X.component?Me?Me.children:null:I,P,$)})(ne,X[ne.value.outlet],I,P.concat([ne.value]),$),delete X[ne.value.outlet]}),dr(X,(ne,Me)=>ms(ne,I.getContext(Me),$)),$}function ms(b,x,I){const P=As(b),$=b.value;dr(P,(X,ne)=>{ms(X,$.component?x?x.children.getContext(ne):null:x,I)}),I.canDeactivateChecks.push(new Go($.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,$))}function Je(b){return"function"==typeof b}function la(b){return b instanceof xe.K||"EmptyError"===b?.name}const Wo=Symbol("INITIAL_VALUE");function _o(){return(0,ke.w)(b=>At(b.map(x=>x.pipe((0,Ke.q)(1),(0,Tt.O)(Wo)))).pipe((0,se.U)(x=>{for(const I of x)if(!0!==I){if(I===Wo)return Wo;if(!1===I||I instanceof yn)return I}return!0}),(0,St.h)(x=>x!==Wo),(0,Ke.q)(1)))}function rn(b){return(0,ft.z)((0,$t.b)(x=>{if(mr(x))throw Gi(0,x)}),(0,se.U)(x=>!0===x))}const vn={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Rs(b,x,I,P,$){const X=qo(b,x,I);return X.matched?function Aa(b,x,I,P){const $=x.canMatch;if(!$||0===$.length)return(0,U.of)(!0);const X=$.map(ne=>{const Me=zo(ne,b);return Gt(function du(b){return b&&Je(b.canMatch)}(Me)?Me.canMatch(x,I):b.runInContext(()=>Me(x,I)))});return(0,U.of)(X).pipe(_o(),rn())}(P=po(x,P),x,I).pipe((0,se.U)(ne=>!0===ne?X:{...vn})):(0,U.of)(X)}function qo(b,x,I){if(""===x.path)return"full"===x.pathMatch&&(b.hasChildren()||I.length>0)?{...vn}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const $=(x.matcher||Tn)(I,b,x);if(!$)return{...vn};const X={};dr($.posParams,(Me,lt)=>{X[lt]=Me.path});const ne=$.consumed.length>0?{...X,...$.consumed[$.consumed.length-1].parameters}:X;return{matched:!0,consumedSegments:$.consumed,remainingSegments:I.slice($.consumed.length),parameters:ne,positionalParamSegments:$.posParams??{}}}function vo(b,x,I,P){if(I.length>0&&function Cu(b,x,I){return I.some(P=>Po(b,x,P)&&fi(P)!==en)}(b,I,P)){const X=new fn(x,function Vi(b,x,I,P){const $={};$[en]=P,P._sourceSegment=b,P._segmentIndexShift=x.length;for(const X of I)if(""===X.path&&fi(X)!==en){const ne=new fn([],{});ne._sourceSegment=b,ne._segmentIndexShift=x.length,$[fi(X)]=ne}return $}(b,x,P,new fn(I,b.children)));return X._sourceSegment=b,X._segmentIndexShift=x.length,{segmentGroup:X,slicedSegments:[]}}if(0===I.length&&function qu(b,x,I){return I.some(P=>Po(b,x,P))}(b,I,P)){const X=new fn(b.segments,function Wu(b,x,I,P,$){const X={};for(const ne of P)if(Po(b,I,ne)&&!$[fi(ne)]){const Me=new fn([],{});Me._sourceSegment=b,Me._segmentIndexShift=x.length,X[fi(ne)]=Me}return{...$,...X}}(b,x,I,P,b.children));return X._sourceSegment=b,X._segmentIndexShift=x.length,{segmentGroup:X,slicedSegments:I}}const $=new fn(b.segments,b.children);return $._sourceSegment=b,$._segmentIndexShift=x.length,{segmentGroup:$,slicedSegments:I}}function Po(b,x,I){return(!(b.hasChildren()||x.length>0)||"full"!==I.pathMatch)&&""===I.path}function ai(b,x,I,P){return!!(fi(b)===P||P!==en&&Po(x,I,b))&&("**"===b.path||qo(x,b,I).matched)}function Zo(b,x,I){return 0===x.length&&!b.children[I]}const Kr=!1;class zi{constructor(x){this.segmentGroup=x||null}}class ui{constructor(x){this.urlTree=x}}function ro(b){return rt(new zi(b))}function Rr(b){return rt(new ui(b))}class xa{constructor(x,I,P,$,X){this.injector=x,this.configLoader=I,this.urlSerializer=P,this.urlTree=$,this.config=X,this.allowRedirects=!0}apply(){const x=vo(this.urlTree.root,[],[],this.config).segmentGroup,I=new fn(x.segments,x.children);return this.expandSegmentGroup(this.injector,this.config,I,en).pipe((0,se.U)(X=>this.createUrlTree(Vs(X),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Dt(X=>{if(X instanceof ui)return this.allowRedirects=!1,this.match(X.urlTree);throw X instanceof zi?this.noMatchError(X):X}))}match(x){return this.expandSegmentGroup(this.injector,this.config,x.root,en).pipe((0,se.U)($=>this.createUrlTree(Vs($),x.queryParams,x.fragment))).pipe(Dt($=>{throw $ instanceof zi?this.noMatchError($):$}))}noMatchError(x){return new A.vHH(4002,Kr)}createUrlTree(x,I,P){const $=ls(x);return new yn($,I,P)}expandSegmentGroup(x,I,P,$){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(x,I,P).pipe((0,se.U)(X=>new fn([],X))):this.expandSegment(x,P,I,P.segments,$,!0)}expandChildren(x,I,P){const $=[];for(const X of Object.keys(P.children))"primary"===X?$.unshift(X):$.push(X);return(0,y.D)($).pipe(kt(X=>{const ne=P.children[X],Me=gs(I,X);return this.expandSegmentGroup(x,Me,ne,X).pipe((0,se.U)(lt=>({segment:lt,outlet:X})))}),(0,Nt.R)((X,ne)=>(X[ne.outlet]=ne.segment,X),{}),bn())}expandSegment(x,I,P,$,X,ne){return(0,y.D)(P).pipe(kt(Me=>this.expandSegmentAgainstRoute(x,I,P,Me,$,X,ne).pipe(Dt(sn=>{if(sn instanceof zi)return(0,U.of)(null);throw sn}))),(0,dn.P)(Me=>!!Me),Dt((Me,lt)=>{if(la(Me))return Zo(I,$,X)?(0,U.of)(new fn([],{})):ro(I);throw Me}))}expandSegmentAgainstRoute(x,I,P,$,X,ne,Me){return ai($,I,X,ne)?void 0===$.redirectTo?this.matchSegmentAgainstRoute(x,I,$,X,ne):Me&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,I,P,$,X,ne):ro(I):ro(I)}expandSegmentAgainstRouteUsingRedirect(x,I,P,$,X,ne){return"**"===$.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,P,$,ne):this.expandRegularSegmentAgainstRouteUsingRedirect(x,I,P,$,X,ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,I,P,$){const X=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?Rr(X):this.lineralizeSegments(P,X).pipe((0,Ot.z)(ne=>{const Me=new fn(ne,{});return this.expandSegment(x,Me,I,ne,$,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,I,P,$,X,ne){const{matched:Me,consumedSegments:lt,remainingSegments:sn,positionalParamSegments:Kt}=qo(I,$,X);if(!Me)return ro(I);const rr=this.applyRedirectCommands(lt,$.redirectTo,Kt);return $.redirectTo.startsWith("/")?Rr(rr):this.lineralizeSegments($,rr).pipe((0,Ot.z)(Di=>this.expandSegment(x,I,P,Di.concat(sn),ne,!1)))}matchSegmentAgainstRoute(x,I,P,$,X){return"**"===P.path?(x=po(P,x),P.loadChildren?(P._loadedRoutes?(0,U.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):this.configLoader.loadChildren(x,P)).pipe((0,se.U)(Me=>(P._loadedRoutes=Me.routes,P._loadedInjector=Me.injector,new fn($,{})))):(0,U.of)(new fn($,{}))):Rs(I,P,$,x).pipe((0,ke.w)(({matched:ne,consumedSegments:Me,remainingSegments:lt})=>ne?this.getChildConfig(x=P._injector??x,P,$).pipe((0,Ot.z)(Kt=>{const rr=Kt.injector??x,Di=Kt.routes,{segmentGroup:Ks,slicedSegments:Eo}=vo(I,Me,lt,Di),L=new fn(Ks.segments,Ks.children);if(0===Eo.length&&L.hasChildren())return this.expandChildren(rr,Di,L).pipe((0,se.U)(Pe=>new fn(Me,Pe)));if(0===Di.length&&0===Eo.length)return(0,U.of)(new fn(Me,{}));const H=fi(P)===X;return this.expandSegment(rr,L,Di,Eo,H?en:X,!0).pipe((0,se.U)(he=>new fn(Me.concat(he.segments),he.children)))})):ro(I)))}getChildConfig(x,I,P){return I.children?(0,U.of)({routes:I.children,injector:x}):I.loadChildren?void 0!==I._loadedRoutes?(0,U.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function ys(b,x,I,P){const $=x.canLoad;if(void 0===$||0===$.length)return(0,U.of)(!0);const X=$.map(ne=>{const Me=zo(ne,b);return Gt(function Sa(b){return b&&Je(b.canLoad)}(Me)?Me.canLoad(x,I):b.runInContext(()=>Me(x,I)))});return(0,U.of)(X).pipe(_o(),rn())}(x,I,P).pipe((0,Ot.z)($=>$?this.configLoader.loadChildren(x,I).pipe((0,$t.b)(X=>{I._loadedRoutes=X.routes,I._loadedInjector=X.injector})):function Ni(b){return rt(So(Kr,3))}())):(0,U.of)({routes:[],injector:x})}lineralizeSegments(x,I){let P=[],$=I.root;for(;;){if(P=P.concat($.segments),0===$.numberOfChildren)return(0,U.of)(P);if($.numberOfChildren>1||!$.children[en])return rt(new A.vHH(4e3,Kr));$=$.children[en]}}applyRedirectCommands(x,I,P){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),x,P)}applyRedirectCreateUrlTree(x,I,P,$){const X=this.createSegmentGroup(x,I.root,P,$);return new yn(X,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(x,I){const P={};return dr(x,($,X)=>{if("string"==typeof $&&$.startsWith(":")){const Me=$.substring(1);P[X]=I[Me]}else P[X]=$}),P}createSegmentGroup(x,I,P,$){const X=this.createSegments(x,I.segments,P,$);let ne={};return dr(I.children,(Me,lt)=>{ne[lt]=this.createSegmentGroup(x,Me,P,$)}),new fn(X,ne)}createSegments(x,I,P,$){return I.map(X=>X.path.startsWith(":")?this.findPosParam(x,X,$):this.findOrReturn(X,P))}findPosParam(x,I,P){const $=P[I.path.substring(1)];if(!$)throw new A.vHH(4001,Kr);return $}findOrReturn(x,I){let P=0;for(const $ of I){if($.path===x.path)return I.splice(P),$;P++}return x}}class Hs{}class V{constructor(x,I,P,$,X,ne,Me){this.injector=x,this.rootComponentType=I,this.config=P,this.urlTree=$,this.url=X,this.paramsInheritanceStrategy=ne,this.urlSerializer=Me}recognize(){const x=vo(this.urlTree.root,[],[],this.config.filter(I=>void 0===I.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,x,en).pipe((0,se.U)(I=>{if(null===I)return null;const P=new ps([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},en,this.rootComponentType,null,this.urlTree.root,-1,{}),$=new Hi(P,I),X=new zu(this.url,$);return this.inheritParamsAndData(X._root),X}))}inheritParamsAndData(x){const I=x.value,P=co(I,this.paramsInheritanceStrategy);I.params=Object.freeze(P.params),I.data=Object.freeze(P.data),x.children.forEach($=>this.inheritParamsAndData($))}processSegmentGroup(x,I,P,$){return 0===P.segments.length&&P.hasChildren()?this.processChildren(x,I,P):this.processSegment(x,I,P,P.segments,$)}processChildren(x,I,P){return(0,y.D)(Object.keys(P.children)).pipe(kt($=>{const X=P.children[$],ne=gs(I,$);return this.processSegmentGroup(x,ne,X,$)}),(0,Nt.R)(($,X)=>$&&X?($.push(...X),$):null),function Qr(b,x=!1){return(0,G.e)((I,P)=>{let $=0;I.subscribe((0,yt.x)(P,X=>{const ne=b(X,$++);(ne||x)&&P.next(X),!ne&&P.complete()}))})}($=>null!==$),(0,nn.d)(null),bn(),(0,se.U)($=>{if(null===$)return null;const X=ct($);return function Q(b){b.sort((x,I)=>x.value.outlet===en?-1:I.value.outlet===en?1:x.value.outlet.localeCompare(I.value.outlet))}(X),X}))}processSegment(x,I,P,$,X){return(0,y.D)(I).pipe(kt(ne=>this.processSegmentAgainstRoute(ne._injector??x,ne,P,$,X)),(0,dn.P)(ne=>!!ne),Dt(ne=>{if(la(ne))return Zo(P,$,X)?(0,U.of)([]):(0,U.of)(null);throw ne}))}processSegmentAgainstRoute(x,I,P,$,X){if(I.redirectTo||!ai(I,P,$,X))return(0,U.of)(null);let ne;if("**"===I.path){const Me=$.length>0?Un($).parameters:{},lt=Qn(P)+$.length,sn=new ps($,Me,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ln(I),fi(I),I.component??I._loadedComponent??null,I,lr(P),lt,ni(I));ne=(0,U.of)({snapshot:sn,consumedSegments:[],remainingSegments:[]})}else ne=Rs(P,I,$,x).pipe((0,se.U)(({matched:Me,consumedSegments:lt,remainingSegments:sn,parameters:Kt})=>{if(!Me)return null;const rr=Qn(P)+lt.length;return{snapshot:new ps(lt,Kt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ln(I),fi(I),I.component??I._loadedComponent??null,I,lr(P),rr,ni(I)),consumedSegments:lt,remainingSegments:sn}}));return ne.pipe((0,ke.w)(Me=>{if(null===Me)return(0,U.of)(null);const{snapshot:lt,consumedSegments:sn,remainingSegments:Kt}=Me;x=I._injector??x;const rr=I._loadedInjector??x,Di=function ce(b){return b.children?b.children:b.loadChildren?b._loadedRoutes:[]}(I),{segmentGroup:Ks,slicedSegments:Eo}=vo(P,sn,Kt,Di.filter(H=>void 0===H.redirectTo));if(0===Eo.length&&Ks.hasChildren())return this.processChildren(rr,Di,Ks).pipe((0,se.U)(H=>null===H?null:[new Hi(lt,H)]));if(0===Di.length&&0===Eo.length)return(0,U.of)([new Hi(lt,[])]);const L=fi(I)===X;return this.processSegment(rr,Di,Ks,Eo,L?en:X).pipe((0,se.U)(H=>null===H?null:[new Hi(lt,H)]))}))}}function He(b){const x=b.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function ct(b){const x=[],I=new Set;for(const P of b){if(!He(P)){x.push(P);continue}const $=x.find(X=>P.value.routeConfig===X.value.routeConfig);void 0!==$?($.children.push(...P.children),I.add($)):x.push(P)}for(const P of I){const $=ct(P.children);x.push(new Hi(P.value,$))}return x.filter(P=>!I.has(P))}function lr(b){let x=b;for(;x._sourceSegment;)x=x._sourceSegment;return x}function Qn(b){let x=b,I=x._segmentIndexShift??0;for(;x._sourceSegment;)x=x._sourceSegment,I+=x._segmentIndexShift??0;return I-1}function Ln(b){return b.data||{}}function ni(b){return b.resolve||{}}function ws(b){return"string"==typeof b.title||null===b.title}function Ma(b){return(0,ke.w)(x=>{const I=b(x);return I?(0,y.D)(I).pipe((0,se.U)(()=>x)):(0,U.of)(x)})}const da=new A.OlP("ROUTES");let zs=(()=>{class b{constructor(I,P){this.injector=I,this.compiler=P,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,U.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const P=Gt(I.loadComponent()).pipe((0,se.U)(Ra),(0,$t.b)(X=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=X}),pr(()=>{this.componentLoaders.delete(I)})),$=new ye(P,()=>new Ae.x).pipe(Xe());return this.componentLoaders.set(I,$),$}loadChildren(I,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,U.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const X=this.loadModuleFactoryOrRoutes(P.loadChildren).pipe((0,se.U)(Me=>{this.onLoadEndListener&&this.onLoadEndListener(P);let lt,sn,Kt=!1;Array.isArray(Me)?sn=Me:(lt=Me.create(I).injector,sn=$i(lt.get(da,[],A.XFs.Self|A.XFs.Optional)));return{routes:sn.map(Mo),injector:lt}}),pr(()=>{this.childrenLoaders.delete(P)})),ne=new ye(X,()=>new Ae.x).pipe(Xe());return this.childrenLoaders.set(P,ne),ne}loadModuleFactoryOrRoutes(I){return Gt(I()).pipe((0,se.U)(Ra),(0,Ot.z)($=>$ instanceof A.YKP||Array.isArray($)?(0,U.of)($):(0,y.D)(this.compiler.compileModuleAsync($))))}}return b.\u0275fac=function(I){return new(I||b)(A.LFG(A.zs3),A.LFG(A.Sil))},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Ra(b){return function ha(b){return b&&"object"==typeof b&&"default"in b}(b)?b.default:b}let Ns=(()=>{class b{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ae.x,this.configLoader=(0,A.f3M)(zs),this.environmentInjector=(0,A.f3M)(A.lqb),this.urlSerializer=(0,A.f3M)(pn),this.rootContexts=(0,A.f3M)(Ao),this.navigationId=0,this.afterPreactivation=()=>(0,U.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=$=>this.events.next(new mt($)),this.configLoader.onLoadStartListener=$=>this.events.next(new ut($))}complete(){this.transitions?.complete()}handleNavigationRequest(I){const P=++this.navigationId;this.transitions?.next({...this.transitions.value,...I,id:P})}setupNavigations(I){return this.transitions=new De({id:0,targetPageId:0,currentUrlTree:I.currentUrlTree,currentRawUrl:I.currentUrlTree,extractedUrl:I.urlHandlingStrategy.extract(I.currentUrlTree),urlAfterRedirects:I.urlHandlingStrategy.extract(I.currentUrlTree),rawUrl:I.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:$o,restoredState:null,currentSnapshot:I.routerState.snapshot,targetSnapshot:null,currentRouterState:I.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,St.h)(P=>0!==P.id),(0,se.U)(P=>({...P,extractedUrl:I.urlHandlingStrategy.extract(P.rawUrl)})),(0,ke.w)(P=>{let $=!1,X=!1;return(0,U.of)(P).pipe((0,$t.b)(ne=>{this.currentNavigation={id:ne.id,initialUrl:ne.rawUrl,extractedUrl:ne.extractedUrl,trigger:ne.source,extras:ne.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ke.w)(ne=>{const Me=I.browserUrlTree.toString(),lt=!I.navigated||ne.extractedUrl.toString()!==Me||Me!==I.currentUrlTree.toString();if(!lt&&"reload"!==(ne.extras.onSameUrlNavigation??I.onSameUrlNavigation)){const Kt="";return this.events.next(new ts(ne.id,I.serializeUrl(P.rawUrl),Kt,0)),I.rawUrlTree=ne.rawUrl,ne.resolve(null),Ct.E}if(I.urlHandlingStrategy.shouldProcessUrl(ne.rawUrl))return Za(ne.source)&&(I.browserUrlTree=ne.extractedUrl),(0,U.of)(ne).pipe((0,ke.w)(Kt=>{const rr=this.transitions?.getValue();return this.events.next(new xi(Kt.id,this.urlSerializer.serialize(Kt.extractedUrl),Kt.source,Kt.restoredState)),rr!==this.transitions?.getValue()?Ct.E:Promise.resolve(Kt)}),function hu(b,x,I,P){return(0,ke.w)($=>function is(b,x,I,P,$){return new xa(b,x,I,P,$).apply()}(b,x,I,$.extractedUrl,P).pipe((0,se.U)(X=>({...$,urlAfterRedirects:X}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,I.config),(0,$t.b)(Kt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Kt.urlAfterRedirects},P.urlAfterRedirects=Kt.urlAfterRedirects}),function or(b,x,I,P,$){return(0,Ot.z)(X=>function K(b,x,I,P,$,X,ne="emptyOnly"){return new V(b,x,I,P,$,ne,X).recognize().pipe((0,ke.w)(Me=>null===Me?function O(b){return new Le.y(x=>x.error(b))}(new Hs):(0,U.of)(Me)))}(b,x,I,X.urlAfterRedirects,P.serialize(X.urlAfterRedirects),P,$).pipe((0,se.U)(ne=>({...X,targetSnapshot:ne}))))}(this.environmentInjector,this.rootComponentType,I.config,this.urlSerializer,I.paramsInheritanceStrategy),(0,$t.b)(Kt=>{if(P.targetSnapshot=Kt.targetSnapshot,"eager"===I.urlUpdateStrategy){if(!Kt.extras.skipLocationChange){const Di=I.urlHandlingStrategy.merge(Kt.urlAfterRedirects,Kt.rawUrl);I.setBrowserUrl(Di,Kt)}I.browserUrlTree=Kt.urlAfterRedirects}const rr=new Ss(Kt.id,this.urlSerializer.serialize(Kt.extractedUrl),this.urlSerializer.serialize(Kt.urlAfterRedirects),Kt.targetSnapshot);this.events.next(rr)}));if(lt&&I.urlHandlingStrategy.shouldProcessUrl(I.rawUrlTree)){const{id:Kt,extractedUrl:rr,source:Di,restoredState:Ks,extras:Eo}=ne,L=new xi(Kt,this.urlSerializer.serialize(rr),Di,Ks);this.events.next(L);const H=Bs(rr,this.rootComponentType).snapshot;return P={...ne,targetSnapshot:H,urlAfterRedirects:rr,extras:{...Eo,skipLocationChange:!1,replaceUrl:!1}},(0,U.of)(P)}{const Kt="";return this.events.next(new ts(ne.id,I.serializeUrl(P.extractedUrl),Kt,1)),I.rawUrlTree=ne.rawUrl,ne.resolve(null),Ct.E}}),(0,$t.b)(ne=>{const Me=new Ie(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(ne.urlAfterRedirects),ne.targetSnapshot);this.events.next(Me)}),(0,se.U)(ne=>P={...ne,guards:ti(ne.targetSnapshot,ne.currentSnapshot,this.rootContexts)}),function ca(b,x){return(0,Ot.z)(I=>{const{targetSnapshot:P,currentSnapshot:$,guards:{canActivateChecks:X,canDeactivateChecks:ne}}=I;return 0===ne.length&&0===X.length?(0,U.of)({...I,guardsResult:!0}):function oi(b,x,I,P){return(0,y.D)(b).pipe((0,Ot.z)($=>function No(b,x,I,P,$){const X=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!X||0===X.length)return(0,U.of)(!0);const ne=X.map(Me=>{const lt=yi(x)??$,sn=zo(Me,lt);return Gt(function mo(b){return b&&Je(b.canDeactivate)}(sn)?sn.canDeactivate(b,x,I,P):lt.runInContext(()=>sn(b,x,I,P))).pipe((0,dn.P)())});return(0,U.of)(ne).pipe(_o())}($.component,$.route,I,x,P)),(0,dn.P)($=>!0!==$,!0))}(ne,P,$,b).pipe((0,Ot.z)(Me=>Me&&function cr(b){return"boolean"==typeof b}(Me)?function Ui(b,x,I,P){return(0,y.D)(x).pipe(kt($=>(0,at.z)(function to(b,x){return null!==b&&x&&x(new _n(b)),(0,U.of)(!0)}($.route.parent,P),function Ro(b,x){return null!==b&&x&&x(new nr(b)),(0,U.of)(!0)}($.route,P),function no(b,x,I){const P=x[x.length-1],X=x.slice(0,x.length-1).reverse().map(ne=>function aa(b){const x=b.routeConfig?b.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:b,guards:x}:null}(ne)).filter(ne=>null!==ne).map(ne=>Et(()=>{const Me=ne.guards.map(lt=>{const sn=yi(ne.node)??I,Kt=zo(lt,sn);return Gt(function Qi(b){return b&&Je(b.canActivateChild)}(Kt)?Kt.canActivateChild(P,b):sn.runInContext(()=>Kt(P,b))).pipe((0,dn.P)())});return(0,U.of)(Me).pipe(_o())}));return(0,U.of)(X).pipe(_o())}(b,$.path,I),function yo(b,x,I){const P=x.routeConfig?x.routeConfig.canActivate:null;if(!P||0===P.length)return(0,U.of)(!0);const $=P.map(X=>Et(()=>{const ne=yi(x)??I,Me=zo(X,ne);return Gt(function Ms(b){return b&&Je(b.canActivate)}(Me)?Me.canActivate(x,b):ne.runInContext(()=>Me(x,b))).pipe((0,dn.P)())}));return(0,U.of)($).pipe(_o())}(b,$.route,I))),(0,dn.P)($=>!0!==$,!0))}(P,X,b,x):(0,U.of)(Me)),(0,se.U)(Me=>({...I,guardsResult:Me})))})}(this.environmentInjector,ne=>this.events.next(ne)),(0,$t.b)(ne=>{if(P.guardsResult=ne.guardsResult,mr(ne.guardsResult))throw Gi(0,ne.guardsResult);const Me=new be(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(ne.urlAfterRedirects),ne.targetSnapshot,!!ne.guardsResult);this.events.next(Me)}),(0,St.h)(ne=>!!ne.guardsResult||(I.restoreHistory(ne),this.cancelNavigationTransition(ne,"",3),!1)),Ma(ne=>{if(ne.guards.canActivateChecks.length)return(0,U.of)(ne).pipe((0,$t.b)(Me=>{const lt=new Ue(Me.id,this.urlSerializer.serialize(Me.extractedUrl),this.urlSerializer.serialize(Me.urlAfterRedirects),Me.targetSnapshot);this.events.next(lt)}),(0,ke.w)(Me=>{let lt=!1;return(0,U.of)(Me).pipe(function Pi(b,x){return(0,Ot.z)(I=>{const{targetSnapshot:P,guards:{canActivateChecks:$}}=I;if(!$.length)return(0,U.of)(I);let X=0;return(0,y.D)($).pipe(kt(ne=>function Cr(b,x,I,P){const $=b.routeConfig,X=b._resolve;return void 0!==$?.title&&!ws($)&&(X[Xr]=$.title),function ss(b,x,I,P){const $=function Gs(b){return[...Object.keys(b),...Object.getOwnPropertySymbols(b)]}(b);if(0===$.length)return(0,U.of)({});const X={};return(0,y.D)($).pipe((0,Ot.z)(ne=>function vs(b,x,I,P){const $=yi(x)??P,X=zo(b,$);return Gt(X.resolve?X.resolve(x,I):$.runInContext(()=>X(x,I)))}(b[ne],x,I,P).pipe((0,dn.P)(),(0,$t.b)(Me=>{X[ne]=Me}))),Cn(1),function Ur(b){return(0,se.U)(()=>b)}(X),Dt(ne=>la(ne)?Ct.E:rt(ne)))}(X,b,x,P).pipe((0,se.U)(ne=>(b._resolvedData=ne,b.data=co(b,I).resolve,$&&ws($)&&(b.data[Xr]=$.title),null)))}(ne.route,P,b,x)),(0,$t.b)(()=>X++),Cn(1),(0,Ot.z)(ne=>X===$.length?(0,U.of)(I):Ct.E))})}(I.paramsInheritanceStrategy,this.environmentInjector),(0,$t.b)({next:()=>lt=!0,complete:()=>{lt||(I.restoreHistory(Me),this.cancelNavigationTransition(Me,"",2))}}))}),(0,$t.b)(Me=>{const lt=new Ge(Me.id,this.urlSerializer.serialize(Me.extractedUrl),this.urlSerializer.serialize(Me.urlAfterRedirects),Me.targetSnapshot);this.events.next(lt)}))}),Ma(ne=>{const Me=lt=>{const sn=[];lt.routeConfig?.loadComponent&&!lt.routeConfig._loadedComponent&&sn.push(this.configLoader.loadComponent(lt.routeConfig).pipe((0,$t.b)(Kt=>{lt.component=Kt}),(0,se.U)(()=>{})));for(const Kt of lt.children)sn.push(...Me(Kt));return sn};return At(Me(ne.targetSnapshot.root)).pipe((0,nn.d)(),(0,Ke.q)(1))}),Ma(()=>this.afterPreactivation()),(0,se.U)(ne=>{const Me=function uu(b,x,I){const P=Ho(b,x._root,I?I._root:void 0);return new uo(P,x)}(I.routeReuseStrategy,ne.targetSnapshot,ne.currentRouterState);return P={...ne,targetRouterState:Me}}),(0,$t.b)(ne=>{I.currentUrlTree=ne.urlAfterRedirects,I.rawUrlTree=I.urlHandlingStrategy.merge(ne.urlAfterRedirects,ne.rawUrl),I.routerState=ne.targetRouterState,"deferred"===I.urlUpdateStrategy&&(ne.extras.skipLocationChange||I.setBrowserUrl(I.rawUrlTree,ne),I.browserUrlTree=ne.urlAfterRedirects)}),((b,x,I)=>(0,se.U)(P=>(new Da(x,P.targetRouterState,P.currentRouterState,I).activate(b),P)))(this.rootContexts,I.routeReuseStrategy,ne=>this.events.next(ne)),(0,$t.b)({next:ne=>{$=!0,this.lastSuccessfulNavigation=this.currentNavigation,I.navigated=!0,this.events.next(new hs(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(I.currentUrlTree))),I.titleStrategy?.updateTitle(ne.targetRouterState.snapshot),ne.resolve(!0)},complete:()=>{$=!0}}),pr(()=>{$||X||this.cancelNavigationTransition(P,"",1),this.currentNavigation?.id===P.id&&(this.currentNavigation=null)}),Dt(ne=>{if(X=!0,ho(ne)){bi(ne)||(I.navigated=!0,I.restoreHistory(P,!0));const Me=new Ds(P.id,this.urlSerializer.serialize(P.extractedUrl),ne.message,ne.cancellationCode);if(this.events.next(Me),bi(ne)){const lt=I.urlHandlingStrategy.merge(ne.url,I.rawUrlTree),sn={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===I.urlUpdateStrategy||Za(P.source)};I.scheduleNavigation(lt,$o,null,sn,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{I.restoreHistory(P,!0);const Me=new fs(P.id,this.urlSerializer.serialize(P.extractedUrl),ne,P.targetSnapshot??void 0);this.events.next(Me);try{P.resolve(I.errorHandler(ne))}catch(lt){P.reject(lt)}}return Ct.E}))}))}cancelNavigationTransition(I,P,$){const X=new Ds(I.id,this.urlSerializer.serialize(I.extractedUrl),P,$);this.events.next(X),I.resolve(!1)}}return b.\u0275fac=function(I){return new(I||b)},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Za(b){return b!==$o}let vi=(()=>{class b{buildTitle(I){let P,$=I.root;for(;void 0!==$;)P=this.getResolvedTitleForRoute($)??P,$=$.children.find(X=>X.outlet===en);return P}getResolvedTitleForRoute(I){return I.data[Xr]}}return b.\u0275fac=function(I){return new(I||b)},b.\u0275prov=A.Yz7({token:b,factory:function(){return(0,A.f3M)(Na)},providedIn:"root"}),b})(),Na=(()=>{class b extends vi{constructor(I){super(),this.title=I}updateTitle(I){const P=this.buildTitle(I);void 0!==P&&this.title.setTitle(P)}}return b.\u0275fac=function(I){return new(I||b)(A.LFG(ki.Dx))},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),Ko=(()=>{class b{}return b.\u0275fac=function(I){return new(I||b)},b.\u0275prov=A.Yz7({token:b,factory:function(){return(0,A.f3M)(Pa)},providedIn:"root"}),b})();class Yo{shouldDetach(x){return!1}store(x,I){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,I){return x.routeConfig===I.routeConfig}}let Pa=(()=>{class b extends Yo{}return b.\u0275fac=function(){let x;return function(P){return(x||(x=A.n5z(b)))(P||b)}}(),b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const Oa=new A.OlP("",{providedIn:"root",factory:()=>({})});let ka=(()=>{class b{}return b.\u0275fac=function(I){return new(I||b)},b.\u0275prov=A.Yz7({token:b,factory:function(){return(0,A.f3M)(pa)},providedIn:"root"}),b})(),pa=(()=>{class b{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,P){return I}}return b.\u0275fac=function(I){return new(I||b)},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Zu(b){throw b}function ko(b,x,I){return x.parse("/")}const Fa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ya={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Nr=(()=>{class b{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,A.f3M)(A.c2e),this.isNgZoneEnabled=!1,this.options=(0,A.f3M)(Oa,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Zu,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ko,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,A.f3M)(ka),this.routeReuseStrategy=(0,A.f3M)(Ko),this.urlCreationStrategy=(0,A.f3M)(au),this.titleStrategy=(0,A.f3M)(vi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=$i((0,A.f3M)(da,{optional:!0})??[]),this.navigationTransitions=(0,A.f3M)(Ns),this.urlSerializer=(0,A.f3M)(pn),this.location=(0,A.f3M)(Ce.Ye),this.isNgZoneEnabled=(0,A.f3M)(A.R0b)instanceof A.R0b&&A.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new yn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Bs(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(I=>{this.lastSuccessfulId=I.id,this.currentPageId=I.targetPageId},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)})}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const I=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),$o,I)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const P="popstate"===I.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{this.navigateToSyncWithBrowser(I.url,P,I.state)},0)}))}navigateToSyncWithBrowser(I,P,$){const X={replaceUrl:!0},ne=$?.navigationId?$:null;if($){const lt={...$};delete lt.navigationId,delete lt.\u0275routerPageId,0!==Object.keys(lt).length&&(X.state=lt)}const Me=this.parseUrl(I);this.scheduleNavigation(Me,P,ne,X)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(I){this.config=I.map(Mo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,P={}){const{relativeTo:$,queryParams:X,fragment:ne,queryParamsHandling:Me,preserveFragment:lt}=P,sn=lt?this.currentUrlTree.fragment:ne;let Kt=null;switch(Me){case"merge":Kt={...this.currentUrlTree.queryParams,...X};break;case"preserve":Kt=this.currentUrlTree.queryParams;break;default:Kt=X||null}return null!==Kt&&(Kt=this.removeEmptyProps(Kt)),this.urlCreationStrategy.createUrlTree($,this.routerState,this.currentUrlTree,I,Kt,sn??null)}navigateByUrl(I,P={skipLocationChange:!1}){const $=mr(I)?I:this.parseUrl(I),X=this.urlHandlingStrategy.merge($,this.rawUrlTree);return this.scheduleNavigation(X,$o,null,P)}navigate(I,P={skipLocationChange:!1}){return function pi(b){for(let x=0;x<b.length;x++){if(null==b[x])throw new A.vHH(4008,!1)}}(I),this.navigateByUrl(this.createUrlTree(I,P),P)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let P;try{P=this.urlSerializer.parse(I)}catch($){P=this.malformedUriErrorHandler($,this.urlSerializer,I)}return P}isActive(I,P){let $;if($=!0===P?{...Fa}:!1===P?{...Ya}:P,mr(I))return Kn(this.currentUrlTree,I,$);const X=this.parseUrl(I);return Kn(this.currentUrlTree,X,$)}removeEmptyProps(I){return Object.keys(I).reduce((P,$)=>{const X=I[$];return null!=X&&(P[$]=X),P},{})}scheduleNavigation(I,P,$,X,ne){if(this.disposed)return Promise.resolve(!1);let Me,lt,sn,Kt;return ne?(Me=ne.resolve,lt=ne.reject,sn=ne.promise):sn=new Promise((rr,Di)=>{Me=rr,lt=Di}),Kt="computed"===this.canceledNavigationResolution?$&&$.\u0275routerPageId?$.\u0275routerPageId:X.replaceUrl||X.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Kt,source:P,restoredState:$,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:I,extras:X,resolve:Me,reject:lt,promise:sn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),sn.catch(rr=>Promise.reject(rr))}setBrowserUrl(I,P){const $=this.urlSerializer.serialize(I),X={...P.extras.state,...this.generateNgRouterState(P.id,P.targetPageId)};this.location.isCurrentPathEqualTo($)||P.extras.replaceUrl?this.location.replaceState($,"",X):this.location.go($,"",X)}restoreHistory(I,P=!1){if("computed"===this.canceledNavigationResolution){const $=this.currentPageId-I.targetPageId;"popstate"!==I.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===$?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===$&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo($)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,P){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:P}:{navigationId:I}}}return b.\u0275fac=function(I){return new(I||b)},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),Ti=(()=>{class b{constructor(I,P,$,X,ne,Me){this.router=I,this.route=P,this.tabIndexAttribute=$,this.renderer=X,this.el=ne,this.locationStrategy=Me,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Ae.x;const lt=ne.nativeElement.tagName;this.isAnchorElement="A"===lt||"AREA"===lt,this.isAnchorElement?this.subscription=I.events.subscribe(sn=>{sn instanceof hs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(I){this._preserveFragment=(0,A.D6c)(I)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(I){this._skipLocationChange=(0,A.D6c)(I)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(I){this._replaceUrl=(0,A.D6c)(I)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(I){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",I)}ngOnChanges(I){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(I,P,$,X,ne){return!!(null===this.urlTree||this.isAnchorElement&&(0!==I||P||$||X||ne||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const I=null===this.href?null:(0,A.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",I)}applyAttributeValue(I,P){const $=this.renderer,X=this.el.nativeElement;null!==P?$.setAttribute(X,I,P):$.removeAttribute(X,I)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return b.\u0275fac=function(I){return new(I||b)(A.Y36(Nr),A.Y36(lo),A.$8M("tabindex"),A.Y36(A.Qsj),A.Y36(A.SBq),A.Y36(Ce.S$))},b.\u0275dir=A.lG2({type:b,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(I,P){1&I&&A.NdJ("click",function(X){return P.onClick(X.button,X.ctrlKey,X.shiftKey,X.altKey,X.metaKey)}),2&I&&A.uIk("target",P.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[A.TTD]}),b})(),Ps=(()=>{class b{get isActive(){return this._isActive}constructor(I,P,$,X,ne){this.router=I,this.element=P,this.renderer=$,this.cdr=X,this.link=ne,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new A.vpe,this.routerEventsSubscription=I.events.subscribe(Me=>{Me instanceof hs&&this.update()})}ngAfterContentInit(){(0,U.of)(this.links.changes,(0,U.of)(null)).pipe((0,Zn.J)()).subscribe(I=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const I=[...this.links.toArray(),this.link].filter(P=>!!P).map(P=>P.onChanges);this.linkInputChangesSubscription=(0,y.D)(I).pipe((0,Zn.J)()).subscribe(P=>{this._isActive!==this.isLinkActive(this.router)(P)&&this.update()})}set routerLinkActive(I){const P=Array.isArray(I)?I:I.split(" ");this.classes=P.filter($=>!!$)}ngOnChanges(I){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const I=this.hasActiveLinks();this._isActive!==I&&(this._isActive=I,this.cdr.markForCheck(),this.classes.forEach(P=>{I?this.renderer.addClass(this.element.nativeElement,P):this.renderer.removeClass(this.element.nativeElement,P)}),I&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(I))})}isLinkActive(I){const P=function Es(b){return!!b.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return $=>!!$.urlTree&&I.isActive($.urlTree,P)}hasActiveLinks(){const I=this.isLinkActive(this.router);return this.link&&I(this.link)||this.links.some(I)}}return b.\u0275fac=function(I){return new(I||b)(A.Y36(Nr),A.Y36(A.SBq),A.Y36(A.Qsj),A.Y36(A.sBO),A.Y36(Ti,8))},b.\u0275dir=A.lG2({type:b,selectors:[["","routerLinkActive",""]],contentQueries:function(I,P,$){if(1&I&&A.Suo($,Ti,5),2&I){let X;A.iGM(X=A.CRH())&&(P.links=X)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[A.TTD]}),b})();class Ku{}let Qa=(()=>{class b{constructor(I,P,$,X,ne){this.router=I,this.injector=$,this.preloadingStrategy=X,this.loader=ne}setUpPreloading(){this.subscription=this.router.events.pipe((0,St.h)(I=>I instanceof hs),kt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,P){const $=[];for(const X of P){X.providers&&!X._injector&&(X._injector=(0,A.MMx)(X.providers,I,`Route: ${X.path}`));const ne=X._injector??I,Me=X._loadedInjector??ne;X.loadChildren&&!X._loadedRoutes&&void 0===X.canLoad||X.loadComponent&&!X._loadedComponent?$.push(this.preloadConfig(ne,X)):(X.children||X._loadedRoutes)&&$.push(this.processRoutes(Me,X.children??X._loadedRoutes))}return(0,y.D)($).pipe((0,Zn.J)())}preloadConfig(I,P){return this.preloadingStrategy.preload(P,()=>{let $;$=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(I,P):(0,U.of)(null);const X=$.pipe((0,Ot.z)(ne=>null===ne?(0,U.of)(void 0):(P._loadedRoutes=ne.routes,P._loadedInjector=ne.injector,this.processRoutes(ne.injector??I,ne.routes))));if(P.loadComponent&&!P._loadedComponent){const ne=this.loader.loadComponent(P);return(0,y.D)([X,ne]).pipe((0,Zn.J)())}return X})}}return b.\u0275fac=function(I){return new(I||b)(A.LFG(Nr),A.LFG(A.Sil),A.LFG(A.lqb),A.LFG(Ku),A.LFG(zs))},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const fu=new A.OlP("");let Qo=(()=>{class b{constructor(I,P,$,X,ne={}){this.urlSerializer=I,this.transitions=P,this.viewportScroller=$,this.zone=X,this.options=ne,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ne.scrollPositionRestoration=ne.scrollPositionRestoration||"disabled",ne.anchorScrolling=ne.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof xi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof hs&&(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Ci&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,P){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ci(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return b.\u0275fac=function(I){A.$Z()},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac}),b})();function w(b,x){return{\u0275kind:b,\u0275providers:x}}function un(){const b=(0,A.f3M)(A.zs3);return x=>{const I=b.get(A.z2F);if(x!==I.components[0])return;const P=b.get(Nr),$=b.get(Yr);1===b.get(gi)&&P.initialNavigation(),b.get(Ws,null,A.XFs.Optional)?.setUpPreloading(),b.get(fu,null,A.XFs.Optional)?.init(),P.resetRootComponentType(I.componentTypes[0]),$.closed||($.next(),$.unsubscribe())}}const Yr=new A.OlP("",{factory:()=>new Ae.x}),gi=new A.OlP("",{providedIn:"root",factory:()=>1});const Ws=new A.OlP("");function pu(b){return w(0,[{provide:Ws,useExisting:Qa},{provide:Ku,useExisting:b}])}const Xo=new A.OlP("ROUTER_FORROOT_GUARD"),Tu=[Ce.Ye,{provide:pn,useClass:Xt},Nr,Ao,{provide:lo,useFactory:function D(b){return b.routerState.root},deps:[Nr]},zs,[]];function Lo(){return new A.PXZ("Router",Nr)}let qs=(()=>{class b{constructor(I){}static forRoot(I,P){return{ngModule:b,providers:[Tu,[],{provide:da,multi:!0,useValue:I},{provide:Xo,useFactory:ma,deps:[[Nr,new A.FiY,new A.tp0]]},{provide:Oa,useValue:P||{}},P?.useHash?{provide:Ce.S$,useClass:Ce.Do}:{provide:Ce.S$,useClass:Ce.b0},{provide:fu,useFactory:()=>{const b=(0,A.f3M)(Ce.EM),x=(0,A.f3M)(A.R0b),I=(0,A.f3M)(Oa),P=(0,A.f3M)(Ns),$=(0,A.f3M)(pn);return I.scrollOffset&&b.setOffset(I.scrollOffset),new Qo($,P,b,x,I)}},P?.preloadingStrategy?pu(P.preloadingStrategy).\u0275providers:[],{provide:A.PXZ,multi:!0,useFactory:Lo},P?.initialNavigation?Ja(P):[],[{provide:Cl,useFactory:un},{provide:A.tb,multi:!0,useExisting:Cl}]]}}static forChild(I){return{ngModule:b,providers:[{provide:da,multi:!0,useValue:I}]}}}return b.\u0275fac=function(I){return new(I||b)(A.LFG(Xo,8))},b.\u0275mod=A.oAB({type:b}),b.\u0275inj=A.cJS({imports:[Dr]}),b})();function ma(b){return"guarded"}function Ja(b){return["disabled"===b.initialNavigation?w(3,[{provide:A.ip1,multi:!0,useFactory:()=>{const x=(0,A.f3M)(Nr);return()=>{x.setUpLocationChangeListener()}}},{provide:gi,useValue:2}]).\u0275providers:[],"enabledBlocking"===b.initialNavigation?w(2,[{provide:gi,useValue:0},{provide:A.ip1,multi:!0,deps:[A.zs3],useFactory:x=>{const I=x.get(Ce.V_,Promise.resolve());return()=>I.then(()=>new Promise($=>{const X=x.get(Nr),ne=x.get(Yr);(function P($){x.get(Nr).events.pipe((0,St.h)(ne=>ne instanceof hs||ne instanceof Ds||ne instanceof fs),(0,se.U)(ne=>ne instanceof hs||ne instanceof Ds&&(0===ne.code||1===ne.code)&&null),(0,St.h)(ne=>null!==ne),(0,Ke.q)(1)).subscribe(()=>{$()})})(()=>{$(!0)}),x.get(Ns).afterPreactivation=()=>($(!0),ne.closed?(0,U.of)(void 0):ne),X.initialNavigation()}))}}]).\u0275providers:[]]}const Cl=new A.OlP("")},3942:(qt,We,Y)=>{Y.d(We,{Z:()=>At});var A=Y(2090),y=Y(4859),U=Y(9681),Ae=Y(1877);class De{constructor(qe,at){this._delegate=qe,this.firebase=at,(0,U._addComponent)(qe,new y.wA("app-compat",()=>this,"PUBLIC")),this.container=qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this._delegate.automaticDataCollectionEnabled=qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(qe=>{this._delegate.checkDestroyed(),qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(qe,at=U._DEFAULT_ENTRY_NAME){var ot;this._delegate.checkDestroyed();const Et=this._delegate.container.getProvider(qe);return!Et.isInitialized()&&"EXPLICIT"===(null===(ot=Et.getComponent())||void 0===ot?void 0:ot.instantiationMode)&&Et.initialize(),Et.getImmediate({identifier:at})}_removeServiceInstance(qe,at=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(qe).clearInstance(at)}_addComponent(qe){(0,U._addComponent)(this._delegate,qe)}_addOrOverwriteComponent(qe){(0,U._addOrOverwriteComponent)(this._delegate,qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Le=new A.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ge=function Ve(){const Qt=function Fe(Qt){const qe={},at={__esModule:!0,initializeApp:function ft(vt,G={}){const Xe=U.initializeApp(vt,G);if((0,A.r3)(qe,Xe.name))return qe[Xe.name];const ye=new Qt(Xe,at);return qe[Xe.name]=ye,ye},app:Et,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function rt(vt){const G=vt.name,Xe=G.replace("-compat","");if(U._registerComponent(vt)&&"PUBLIC"===vt.type){const ye=(Ce=Et())=>{if("function"!=typeof Ce[Xe])throw Le.create("invalid-app-argument",{appName:G});return Ce[Xe]()};void 0!==vt.serviceProps&&(0,A.ZB)(ye,vt.serviceProps),at[Xe]=ye,Qt.prototype[Xe]=function(...Ce){return this._getService.bind(this,G).apply(this,vt.multipleInstances?Ce:[])}}return"PUBLIC"===vt.type?at[Xe]:null},removeApp:function ot(vt){delete qe[vt]},useAsService:function Ct(vt,G){return"serverAuth"===G?null:G},modularAPIs:U}};function Et(vt){if(!(0,A.r3)(qe,vt=vt||U._DEFAULT_ENTRY_NAME))throw Le.create("no-app",{appName:vt});return qe[vt]}return at.default=at,Object.defineProperty(at,"apps",{get:function st(){return Object.keys(qe).map(vt=>qe[vt])}}),Et.App=Qt,at}(De);return Qt.INTERNAL=Object.assign(Object.assign({},Qt.INTERNAL),{createFirebaseNamespace:Ve,extendNamespace:function qe(at){(0,A.ZB)(Qt,at)},createSubscribe:A.ne,ErrorFactory:A.LL,deepExtend:A.ZB}),Qt}(),pe=new Ae.Yd("@firebase/app-compat");if((0,A.jU)()&&void 0!==self.firebase){pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Qt=self.firebase.SDK_VERSION;Qt&&Qt.indexOf("LITE")>=0&&pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const At=ge;!function ht(Qt){(0,U.registerVersion)("@firebase/app-compat","0.2.4",Qt)}()},9681:(qt,We,Y)=>{Y.r(We),Y.d(We,{FirebaseError:()=>Ae.ZR,SDK_VERSION:()=>ki,_DEFAULT_ENTRY_NAME:()=>dn,_addComponent:()=>Nt,_addOrOverwriteComponent:()=>Cn,_apps:()=>$t,_clearComponents:()=>Qr,_components:()=>Dt,_getProvider:()=>nn,_registerComponent:()=>zn,_removeServiceInstance:()=>bn,deleteApp:()=>ar,getApp:()=>Xr,getApps:()=>Er,initializeApp:()=>en,onLog:()=>Lt,registerVersion:()=>br,setLogLevel:()=>Ai});var A=Y(5861),y=Y(4859),U=Y(1877),Ae=Y(2090),De=Y(8766);class xe{constructor(pt){this.container=pt}getPlatformInfoString(){return this.container.getProviders().map(Pt=>{if(function Le(Mt){return"VERSION"===Mt.getComponent()?.type}(Pt)){const pn=Pt.getImmediate();return`${pn.library}/${pn.version}`}return null}).filter(Pt=>Pt).join(" ")}}const Fe="@firebase/app",ge=new U.Yd("@firebase/app"),dn="[DEFAULT]",kt={[Fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},$t=new Map,Dt=new Map;function Nt(Mt,pt){try{Mt.container.addComponent(pt)}catch(Pt){ge.debug(`Component ${pt.name} failed to register with FirebaseApp ${Mt.name}`,Pt)}}function Cn(Mt,pt){Mt.container.addOrOverwriteComponent(pt)}function zn(Mt){const pt=Mt.name;if(Dt.has(pt))return ge.debug(`There were multiple attempts to register component ${pt}.`),!1;Dt.set(pt,Mt);for(const Pt of $t.values())Nt(Pt,Mt);return!0}function nn(Mt,pt){const Pt=Mt.container.getProvider("heartbeat").getImmediate({optional:!0});return Pt&&Pt.triggerHeartbeat(),Mt.container.getProvider(pt)}function bn(Mt,pt,Pt=dn){nn(Mt,pt).clearInstance(Pt)}function Qr(){Dt.clear()}const pr=new Ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zn{constructor(pt,Pt,pn){this._isDeleted=!1,this._options=Object.assign({},pt),this._config=Object.assign({},Pt),this._name=Pt.name,this._automaticDataCollectionEnabled=Pt.automaticDataCollectionEnabled,this._container=pn,this.container.addComponent(new y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pt){this.checkDestroyed(),this._automaticDataCollectionEnabled=pt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(pt){this._isDeleted=pt}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}const ki="9.17.2";function en(Mt,pt={}){let Pt=Mt;"object"!=typeof pt&&(pt={name:pt});const pn=Object.assign({name:dn,automaticDataCollectionEnabled:!1},pt),Xt=pn.name;if("string"!=typeof Xt||!Xt)throw pr.create("bad-app-name",{appName:String(Xt)});if(Pt||(Pt=(0,Ae.aH)()),!Pt)throw pr.create("no-options");const Dn=$t.get(Xt);if(Dn){if((0,Ae.vZ)(Pt,Dn.options)&&(0,Ae.vZ)(pn,Dn.config))return Dn;throw pr.create("duplicate-app",{appName:Xt})}const ei=new y.H0(Xt);for(const fe of Dt.values())ei.addComponent(fe);const me=new Zn(Pt,pn,ei);return $t.set(Xt,me),me}function Xr(Mt=dn){const pt=$t.get(Mt);if(!pt&&Mt===dn)return en();if(!pt)throw pr.create("no-app",{appName:Mt});return pt}function Er(){return Array.from($t.values())}function ar(Mt){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,A.Z)(function*(Mt){const pt=Mt.name;$t.has(pt)&&($t.delete(pt),yield Promise.all(Mt.container.getProviders().map(Pt=>Pt.delete())),Mt.isDeleted=!0)})).apply(this,arguments)}function br(Mt,pt,Pt){var pn;let Xt=null!==(pn=kt[Mt])&&void 0!==pn?pn:Mt;Pt&&(Xt+=`-${Pt}`);const Dn=Xt.match(/\s|\//),ei=pt.match(/\s|\//);if(Dn||ei){const me=[`Unable to register library "${Xt}" with version "${pt}":`];return Dn&&me.push(`library name "${Xt}" contains illegal characters (whitespace or "/")`),Dn&&ei&&me.push("and"),ei&&me.push(`version name "${pt}" contains illegal characters (whitespace or "/")`),void ge.warn(me.join(" "))}zn(new y.wA(`${Xt}-version`,()=>({library:Xt,version:pt}),"VERSION"))}function Lt(Mt,pt){if(null!==Mt&&"function"!=typeof Mt)throw pr.create("invalid-log-argument");(0,U.Am)(Mt,pt)}function Ai(Mt){(0,U.Ub)(Mt)}const Jr="firebase-heartbeat-store";let dr=null;function Gt(){return dr||(dr=(0,De.X3)("firebase-heartbeat-database",1,{upgrade:(Mt,pt)=>{0===pt&&Mt.createObjectStore(Jr)}}).catch(Mt=>{throw pr.create("idb-open",{originalErrorMessage:Mt.message})})),dr}function An(){return(An=(0,A.Z)(function*(Mt){try{return(yield Gt()).transaction(Jr).objectStore(Jr).get(Gr(Mt))}catch(pt){if(pt instanceof Ae.ZR)ge.warn(pt.message);else{const Pt=pr.create("idb-get",{originalErrorMessage:pt?.message});ge.warn(Pt.message)}}})).apply(this,arguments)}function us(Mt,pt){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,A.Z)(function*(Mt,pt){try{const pn=(yield Gt()).transaction(Jr,"readwrite");return yield pn.objectStore(Jr).put(pt,Gr(Mt)),pn.done}catch(Pt){if(Pt instanceof Ae.ZR)ge.warn(Pt.message);else{const pn=pr.create("idb-set",{originalErrorMessage:Pt?.message});ge.warn(pn.message)}}})).apply(this,arguments)}function Gr(Mt){return`${Mt.name}!${Mt.options.appId}`}class Vr{constructor(pt){this.container=pt,this._heartbeatsCache=null;const Pt=this.container.getProvider("app").getImmediate();this._storage=new yn(Pt),this._heartbeatsCachePromise=this._storage.read().then(pn=>(this._heartbeatsCache=pn,pn))}triggerHeartbeat(){var pt=this;return(0,A.Z)(function*(){const pn=pt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Xt=tr();if(null===pt._heartbeatsCache&&(pt._heartbeatsCache=yield pt._heartbeatsCachePromise),pt._heartbeatsCache.lastSentHeartbeatDate!==Xt&&!pt._heartbeatsCache.heartbeats.some(Dn=>Dn.date===Xt))return pt._heartbeatsCache.heartbeats.push({date:Xt,agent:pn}),pt._heartbeatsCache.heartbeats=pt._heartbeatsCache.heartbeats.filter(Dn=>{const ei=new Date(Dn.date).valueOf();return Date.now()-ei<=2592e6}),pt._storage.overwrite(pt._heartbeatsCache)})()}getHeartbeatsHeader(){var pt=this;return(0,A.Z)(function*(){if(null===pt._heartbeatsCache&&(yield pt._heartbeatsCachePromise),null===pt._heartbeatsCache||0===pt._heartbeatsCache.heartbeats.length)return"";const Pt=tr(),{heartbeatsToSend:pn,unsentEntries:Xt}=function Ii(Mt,pt=1024){const Pt=[];let pn=Mt.slice();for(const Xt of Mt){const Dn=Pt.find(ei=>ei.agent===Xt.agent);if(Dn){if(Dn.dates.push(Xt.date),fn(Pt)>pt){Dn.dates.pop();break}}else if(Pt.push({agent:Xt.agent,dates:[Xt.date]}),fn(Pt)>pt){Pt.pop();break}pn=pn.slice(1)}return{heartbeatsToSend:Pt,unsentEntries:pn}}(pt._heartbeatsCache.heartbeats),Dn=(0,Ae.L)(JSON.stringify({version:2,heartbeats:pn}));return pt._heartbeatsCache.lastSentHeartbeatDate=Pt,Xt.length>0?(pt._heartbeatsCache.heartbeats=Xt,yield pt._storage.overwrite(pt._heartbeatsCache)):(pt._heartbeatsCache.heartbeats=[],pt._storage.overwrite(pt._heartbeatsCache)),Dn})()}}function tr(){return(new Date).toISOString().substring(0,10)}class yn{constructor(pt){this.app=pt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,A.Z)(function*(){return!!(0,Ae.hl)()&&(0,Ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var pt=this;return(0,A.Z)(function*(){return(yield pt._canUseIndexedDBPromise)&&(yield function hn(Mt){return An.apply(this,arguments)}(pt.app))||{heartbeats:[]}})()}overwrite(pt){var Pt=this;return(0,A.Z)(function*(){var pn;if(yield Pt._canUseIndexedDBPromise){const Dn=yield Pt.read();return us(Pt.app,{lastSentHeartbeatDate:null!==(pn=pt.lastSentHeartbeatDate)&&void 0!==pn?pn:Dn.lastSentHeartbeatDate,heartbeats:pt.heartbeats})}})()}add(pt){var Pt=this;return(0,A.Z)(function*(){var pn;if(yield Pt._canUseIndexedDBPromise){const Dn=yield Pt.read();return us(Pt.app,{lastSentHeartbeatDate:null!==(pn=pt.lastSentHeartbeatDate)&&void 0!==pn?pn:Dn.lastSentHeartbeatDate,heartbeats:[...Dn.heartbeats,...pt.heartbeats]})}})()}}function fn(Mt){return(0,Ae.L)(JSON.stringify({version:2,heartbeats:Mt})).length}!function zr(Mt){zn(new y.wA("platform-logger",pt=>new xe(pt),"PRIVATE")),zn(new y.wA("heartbeat",pt=>new Vr(pt),"PRIVATE")),br(Fe,"0.9.4",Mt),br(Fe,"0.9.4","esm2017"),br("fire-js","")}("")},4859:(qt,We,Y)=>{Y.d(We,{H0:()=>Fe,wA:()=>U,zt:()=>De});var A=Y(5861),y=Y(2090);class U{constructor(ge,pe,Te){this.name=ge,this.instanceFactory=pe,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ge){return this.instantiationMode=ge,this}setMultipleInstances(ge){return this.multipleInstances=ge,this}setServiceProps(ge){return this.serviceProps=ge,this}setInstanceCreatedCallback(ge){return this.onInstanceCreated=ge,this}}const Ae="[DEFAULT]";class De{constructor(ge,pe){this.name=ge,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ge){const pe=this.normalizeInstanceIdentifier(ge);if(!this.instancesDeferred.has(pe)){const Te=new y.BH;if(this.instancesDeferred.set(pe,Te),this.isInitialized(pe)||this.shouldAutoInitialize())try{const yt=this.getOrInitializeService({instanceIdentifier:pe});yt&&Te.resolve(yt)}catch{}}return this.instancesDeferred.get(pe).promise}getImmediate(ge){var pe;const Te=this.normalizeInstanceIdentifier(ge?.identifier),yt=null!==(pe=ge?.optional)&&void 0!==pe&&pe;if(!this.isInitialized(Te)&&!this.shouldAutoInitialize()){if(yt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(ht){if(yt)return null;throw ht}}getComponent(){return this.component}setComponent(ge){if(ge.name!==this.name)throw Error(`Mismatching Component ${ge.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ge,this.shouldAutoInitialize()){if(function Le(Ve){return"EAGER"===Ve.instantiationMode}(ge))try{this.getOrInitializeService({instanceIdentifier:Ae})}catch{}for(const[pe,Te]of this.instancesDeferred.entries()){const yt=this.normalizeInstanceIdentifier(pe);try{const ht=this.getOrInitializeService({instanceIdentifier:yt});Te.resolve(ht)}catch{}}}}clearInstance(ge=Ae){this.instancesDeferred.delete(ge),this.instancesOptions.delete(ge),this.instances.delete(ge)}delete(){var ge=this;return(0,A.Z)(function*(){const pe=Array.from(ge.instances.values());yield Promise.all([...pe.filter(Te=>"INTERNAL"in Te).map(Te=>Te.INTERNAL.delete()),...pe.filter(Te=>"_delete"in Te).map(Te=>Te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ge=Ae){return this.instances.has(ge)}getOptions(ge=Ae){return this.instancesOptions.get(ge)||{}}initialize(ge={}){const{options:pe={}}=ge,Te=this.normalizeInstanceIdentifier(ge.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const yt=this.getOrInitializeService({instanceIdentifier:Te,options:pe});for(const[ht,At]of this.instancesDeferred.entries())Te===this.normalizeInstanceIdentifier(ht)&&At.resolve(yt);return yt}onInit(ge,pe){var Te;const yt=this.normalizeInstanceIdentifier(pe),ht=null!==(Te=this.onInitCallbacks.get(yt))&&void 0!==Te?Te:new Set;ht.add(ge),this.onInitCallbacks.set(yt,ht);const At=this.instances.get(yt);return At&&ge(At,yt),()=>{ht.delete(ge)}}invokeOnInitCallbacks(ge,pe){const Te=this.onInitCallbacks.get(pe);if(Te)for(const yt of Te)try{yt(ge,pe)}catch{}}getOrInitializeService({instanceIdentifier:ge,options:pe={}}){let Te=this.instances.get(ge);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:(Ve=ge,Ve===Ae?void 0:Ve),options:pe}),this.instances.set(ge,Te),this.instancesOptions.set(ge,pe),this.invokeOnInitCallbacks(Te,ge),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ge,Te)}catch{}var Ve;return Te||null}normalizeInstanceIdentifier(ge=Ae){return this.component?this.component.multipleInstances?ge:Ae:ge}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(ge){this.name=ge,this.providers=new Map}addComponent(ge){const pe=this.getProvider(ge.name);if(pe.isComponentSet())throw new Error(`Component ${ge.name} has already been registered with ${this.name}`);pe.setComponent(ge)}addOrOverwriteComponent(ge){this.getProvider(ge.name).isComponentSet()&&this.providers.delete(ge.name),this.addComponent(ge)}getProvider(ge){if(this.providers.has(ge))return this.providers.get(ge);const pe=new De(ge,this);return this.providers.set(ge,pe),pe}getProviders(){return Array.from(this.providers.values())}}},1877:(qt,We,Y)=>{Y.d(We,{Am:()=>Ve,Ub:()=>Fe,Yd:()=>Le,in:()=>y});const A=[];var y=(()=>{return(ge=y||(y={}))[ge.DEBUG=0]="DEBUG",ge[ge.VERBOSE=1]="VERBOSE",ge[ge.INFO=2]="INFO",ge[ge.WARN=3]="WARN",ge[ge.ERROR=4]="ERROR",ge[ge.SILENT=5]="SILENT",y;var ge})();const U={debug:y.DEBUG,verbose:y.VERBOSE,info:y.INFO,warn:y.WARN,error:y.ERROR,silent:y.SILENT},Ae=y.INFO,De={[y.DEBUG]:"log",[y.VERBOSE]:"log",[y.INFO]:"info",[y.WARN]:"warn",[y.ERROR]:"error"},xe=(ge,pe,...Te)=>{if(pe<ge.logLevel)return;const yt=(new Date).toISOString(),ht=De[pe];if(!ht)throw new Error(`Attempted to log a message with an invalid logType (value: ${pe})`);console[ht](`[${yt}]  ${ge.name}:`,...Te)};class Le{constructor(pe){this.name=pe,this._logLevel=Ae,this._logHandler=xe,this._userLogHandler=null,A.push(this)}get logLevel(){return this._logLevel}set logLevel(pe){if(!(pe in y))throw new TypeError(`Invalid value "${pe}" assigned to \`logLevel\``);this._logLevel=pe}setLogLevel(pe){this._logLevel="string"==typeof pe?U[pe]:pe}get logHandler(){return this._logHandler}set logHandler(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(pe){this._userLogHandler=pe}debug(...pe){this._userLogHandler&&this._userLogHandler(this,y.DEBUG,...pe),this._logHandler(this,y.DEBUG,...pe)}log(...pe){this._userLogHandler&&this._userLogHandler(this,y.VERBOSE,...pe),this._logHandler(this,y.VERBOSE,...pe)}info(...pe){this._userLogHandler&&this._userLogHandler(this,y.INFO,...pe),this._logHandler(this,y.INFO,...pe)}warn(...pe){this._userLogHandler&&this._userLogHandler(this,y.WARN,...pe),this._logHandler(this,y.WARN,...pe)}error(...pe){this._userLogHandler&&this._userLogHandler(this,y.ERROR,...pe),this._logHandler(this,y.ERROR,...pe)}}function Fe(ge){A.forEach(pe=>{pe.setLogLevel(ge)})}function Ve(ge,pe){for(const Te of A){let yt=null;pe&&pe.level&&(yt=U[pe.level]),Te.userLogHandler=null===ge?null:(ht,At,...Qt)=>{const qe=Qt.map(at=>{if(null==at)return null;if("string"==typeof at)return at;if("number"==typeof at||"boolean"==typeof at)return at.toString();if(at instanceof Error)return at.message;try{return JSON.stringify(at)}catch{return null}}).filter(at=>at).join(" ");At>=(yt??ht.logLevel)&&ge({level:y[At].toLowerCase(),message:qe,args:Qt,type:ht.name})}}}},259:(qt,We,Y)=>{Y.d(We,{C6:()=>A.getApps,Mq:()=>A.getApp});var A=Y(9681);(0,A.registerVersion)("firebase","9.17.2","app")},9260:(qt,We,Y)=>{Y.d(We,{Z:()=>A.Z});var A=Y(3942);A.Z.registerVersion("firebase","9.17.2","app-compat")},4217:(qt,We,Y)=>{Y.r(We);var A=Y(5861),y=Y(3942),U=Y(2090),Ae=Y(9681),De=Y(1877),xe=Y(655),Le=Y(4859);const At=function yt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Qt=function ht(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ot=new De.Yd("@firebase/auth");function Et(E,...p){ot.logLevel<=De.in.ERROR&&ot.error(`Auth (${Ae.SDK_VERSION}): ${E}`,...p)}function ft(E,...p){throw vt(E,...p)}function st(E,...p){return vt(E,...p)}function rt(E,p,_){const S=Object.assign(Object.assign({},Qt()),{[p]:_});return new U.LL("auth","Firebase",S).create(p,{appName:E.name})}function Ct(E,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&ft(E,"argument-error"),rt(E,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vt(E,...p){if("string"!=typeof E){const _=p[0],S=[...p.slice(1)];return S[0]&&(S[0].appName=E.name),E._errorFactory.create(_,...S)}return qe.create(E,...p)}function G(E,p,..._){if(!E)throw vt(p,..._)}function Xe(E){const p="INTERNAL ASSERTION FAILED: "+E;throw Et(p),new Error(p)}function ye(E,p){E||Xe(p)}const Ce=new Map;function se(E){ye(E instanceof Function,"Expected a class definition");let p=Ce.get(E);return p?(ye(p instanceof E,"Instance stored in cache mismatched with class"),p):(p=new E,Ce.set(E,p),p)}function Tt(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function St(){return"http:"===Ot()||"https:"===Ot()}function Ot(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class $t{constructor(p,_){this.shortDelay=p,this.longDelay=_,ye(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function dn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(St()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dt(E,p){ye(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Nt{static initialize(p,_,S){this.fetchImpl=p,_&&(this.headersImpl=_),S&&(this.responseImpl=S)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Xe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Xe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Xe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Cn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},zn=new $t(3e4,6e4);function nn(E,p){return E.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:E.tenantId}):p}function bn(E,p,_,S){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,A.Z)(function*(E,p,_,S,Z={}){return Ur(E,Z,(0,A.Z)(function*(){let ie={},Ne={};S&&("GET"===p?Ne=S:ie={body:JSON.stringify(S)});const tt=(0,U.xO)(Object.assign({key:E.config.apiKey},Ne)).slice(1),Ut=yield E._getAdditionalHeaders();return Ut["Content-Type"]="application/json",E.languageCode&&(Ut["X-Firebase-Locale"]=E.languageCode),Nt.fetch()(en(E,E.config.apiHost,_,tt),Object.assign({method:p,headers:Ut,referrerPolicy:"no-referrer"},ie))}))})).apply(this,arguments)}function Ur(E,p,_){return pr.apply(this,arguments)}function pr(){return(pr=(0,A.Z)(function*(E,p,_){E._canInitEmulator=!1;const S=Object.assign(Object.assign({},Cn),p);try{const Z=new Xr(E),ie=yield Promise.race([_(),Z.promise]);Z.clearNetworkTimeout();const Ne=yield ie.json();if("needConfirmation"in Ne)throw Er(E,"account-exists-with-different-credential",Ne);if(ie.ok&&!("errorMessage"in Ne))return Ne;{const tt=ie.ok?Ne.errorMessage:Ne.error.message,[Ut,Yt]=tt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ut)throw Er(E,"credential-already-in-use",Ne);if("EMAIL_EXISTS"===Ut)throw Er(E,"email-already-in-use",Ne);if("USER_DISABLED"===Ut)throw Er(E,"user-disabled",Ne);const In=S[Ut]||Ut.toLowerCase().replace(/[_\s]+/g,"-");if(Yt)throw rt(E,In,Yt);ft(E,In)}}catch(Z){if(Z instanceof U.ZR)throw Z;ft(E,"internal-error",{message:String(Z)})}})).apply(this,arguments)}function Zn(E,p,_,S){return ki.apply(this,arguments)}function ki(){return(ki=(0,A.Z)(function*(E,p,_,S,Z={}){const ie=yield bn(E,p,_,S,Z);return"mfaPendingCredential"in ie&&ft(E,"multi-factor-auth-required",{_serverResponse:ie}),ie})).apply(this,arguments)}function en(E,p,_,S){const Z=`${p}${_}?${S}`;return E.config.emulator?Dt(E.config,Z):`${E.config.apiScheme}://${Z}`}class Xr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,S)=>{this.timer=setTimeout(()=>S(st(this.auth,"network-request-failed")),zn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Er(E,p,_){const S={appName:E.name};_.email&&(S.email=_.email),_.phoneNumber&&(S.phoneNumber=_.phoneNumber);const Z=st(E,p,S);return Z.customData._tokenResponse=_,Z}function Tn(){return(Tn=(0,A.Z)(function*(E,p){return bn(E,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function br(E,p){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,A.Z)(function*(E,p){return bn(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ai(E,p){return $i.apply(this,arguments)}function $i(){return($i=(0,A.Z)(function*(E,p){return bn(E,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Un(E){if(E)try{const p=new Date(Number(E));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Gt(){return(Gt=(0,A.Z)(function*(E,p=!1){const _=(0,U.m9)(E),S=yield _.getIdToken(p),Z=An(S);G(Z&&Z.exp&&Z.auth_time&&Z.iat,_.auth,"internal-error");const ie="object"==typeof Z.firebase?Z.firebase:void 0,Ne=ie?.sign_in_provider;return{claims:Z,token:S,authTime:Un(hn(Z.auth_time)),issuedAtTime:Un(hn(Z.iat)),expirationTime:Un(hn(Z.exp)),signInProvider:Ne||null,signInSecondFactor:ie?.sign_in_second_factor||null}})).apply(this,arguments)}function hn(E){return 1e3*Number(E)}function An(E){const[p,_,S]=E.split(".");if(void 0===p||void 0===_||void 0===S)return Et("JWT malformed, contained fewer than 3 sections"),null;try{const Z=(0,U.tV)(_);return Z?JSON.parse(Z):(Et("Failed to decode base64 JWT payload"),null)}catch(Z){return Et("Caught error parsing JWT payload as JSON",Z?.toString()),null}}function Kn(E,p){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,A.Z)(function*(E,p,_=!1){if(_)return p;try{return yield p}catch(S){throw S instanceof U.ZR&&xr(S)&&E.auth.currentUser===E&&(yield E.auth.signOut()),S}})).apply(this,arguments)}function xr({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class gr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const S=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),S}{this.errorBackoff=3e4;const Z=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,Z)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const S=this.getInterval(p);this.timerId=setTimeout((0,A.Z)(function*(){yield _.iteration()}),S)}iteration(){var p=this;return(0,A.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&p.schedule(!0))}p.schedule()})()}}class Vr{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Un(this.lastLoginAt),this.creationTime=Un(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function tr(E){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,A.Z)(function*(E){var p;const _=E.auth,S=yield E.getIdToken(),Z=yield Kn(E,Ai(_,{idToken:S}));G(Z?.users.length,_,"internal-error");const ie=Z.users[0];E._notifyReloadListener(ie);const Ne=null!==(p=ie.providerUserInfo)&&void 0!==p&&p.length?Mt(ie.providerUserInfo):[],tt=zr(E.providerData,Ne),In=!!E.isAnonymous&&!(E.email&&ie.passwordHash||tt?.length),Rn={uid:ie.localId,displayName:ie.displayName||null,photoURL:ie.photoUrl||null,email:ie.email||null,emailVerified:ie.emailVerified||!1,phoneNumber:ie.phoneNumber||null,tenantId:ie.tenantId||null,providerData:tt,metadata:new Vr(ie.createdAt,ie.lastLoginAt),isAnonymous:In};Object.assign(E,Rn)})).apply(this,arguments)}function fn(){return(fn=(0,A.Z)(function*(E){const p=(0,U.m9)(E);yield tr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function zr(E,p){return[...E.filter(S=>!p.some(Z=>Z.providerId===S.providerId)),...p]}function Mt(E){return E.map(p=>{var{providerId:_}=p,S=(0,xe._T)(p,["providerId"]);return{providerId:_,uid:S.rawId||"",displayName:S.displayName||null,email:S.email||null,phoneNumber:S.phoneNumber||null,photoURL:S.photoUrl||null}})}function Pt(){return(Pt=(0,A.Z)(function*(E,p){const _=yield Ur(E,{},(0,A.Z)(function*(){const S=(0,U.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:Z,apiKey:ie}=E.config,Ne=en(E,Z,"/v1/token",`key=${ie}`),tt=yield E._getAdditionalHeaders();return tt["Content-Type"]="application/x-www-form-urlencoded",Nt.fetch()(Ne,{method:"POST",headers:tt,body:S})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class pn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){G(p.idToken,"internal-error"),G(typeof p.idToken<"u","internal-error"),G(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function us(E){const p=An(E);return G(p,"internal-error"),G(typeof p.exp<"u","internal-error"),G(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var S=this;return(0,A.Z)(function*(){return G(!S.accessToken||S.refreshToken,p,"user-token-expired"),_||!S.accessToken||S.isExpired?S.refreshToken?(yield S.refresh(p,S.refreshToken),S.accessToken):null:S.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var S=this;return(0,A.Z)(function*(){const{accessToken:Z,refreshToken:ie,expiresIn:Ne}=yield function pt(E,p){return Pt.apply(this,arguments)}(p,_);S.updateTokensAndExpiration(Z,ie,Number(Ne))})()}updateTokensAndExpiration(p,_,S){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*S}static fromJSON(p,_){const{refreshToken:S,accessToken:Z,expirationTime:ie}=_,Ne=new pn;return S&&(G("string"==typeof S,"internal-error",{appName:p}),Ne.refreshToken=S),Z&&(G("string"==typeof Z,"internal-error",{appName:p}),Ne.accessToken=Z),ie&&(G("number"==typeof ie,"internal-error",{appName:p}),Ne.expirationTime=ie),Ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new pn,this.toJSON())}_performRefresh(){return Xe("not implemented")}}function Xt(E,p){G("string"==typeof E||typeof E>"u","internal-error",{appName:p})}class Dn{constructor(p){var{uid:_,auth:S,stsTokenManager:Z}=p,ie=(0,xe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=S,this.stsTokenManager=Z,this.accessToken=Z.accessToken,this.displayName=ie.displayName||null,this.email=ie.email||null,this.emailVerified=ie.emailVerified||!1,this.phoneNumber=ie.phoneNumber||null,this.photoURL=ie.photoURL||null,this.isAnonymous=ie.isAnonymous||!1,this.tenantId=ie.tenantId||null,this.providerData=ie.providerData?[...ie.providerData]:[],this.metadata=new Vr(ie.createdAt||void 0,ie.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,A.Z)(function*(){const S=yield Kn(_,_.stsTokenManager.getToken(_.auth,p));return G(S,_.auth,"internal-error"),_.accessToken!==S&&(_.accessToken=S,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),S})()}getIdTokenResult(p){return function dr(E){return Gt.apply(this,arguments)}(this,p)}reload(){return function yn(E){return fn.apply(this,arguments)}(this)}_assign(p){this!==p&&(G(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Dn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var S=this;return(0,A.Z)(function*(){let Z=!1;p.idToken&&p.idToken!==S.stsTokenManager.accessToken&&(S.stsTokenManager.updateFromServerResponse(p),Z=!0),_&&(yield tr(S)),yield S.auth._persistUserIfCurrent(S),Z&&S.auth._notifyListenersIfCurrent(S)})()}delete(){var p=this;return(0,A.Z)(function*(){const _=yield p.getIdToken();return yield Kn(p,function ar(E,p){return Tn.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var S,Z,ie,Ne,tt,Ut,Yt,In;const Rn=null!==(S=_.displayName)&&void 0!==S?S:void 0,ks=null!==(Z=_.email)&&void 0!==Z?Z:void 0,mu=null!==(ie=_.phoneNumber)&&void 0!==ie?ie:void 0,_u=null!==(Ne=_.photoURL)&&void 0!==Ne?Ne:void 0,wd=null!==(tt=_.tenantId)&&void 0!==tt?tt:void 0,ze=null!==(Ut=_._redirectEventId)&&void 0!==Ut?Ut:void 0,iu=null!==(Yt=_.createdAt)&&void 0!==Yt?Yt:void 0,ea=null!==(In=_.lastLoginAt)&&void 0!==In?In:void 0,{uid:Uc,emailVerified:Nl,isAnonymous:Uu,providerData:kf,stsTokenManager:gl}=_;G(Uc&&gl,p,"internal-error");const Ff=pn.fromJSON(this.name,gl);G("string"==typeof Uc,p,"internal-error"),Xt(Rn,p.name),Xt(ks,p.name),G("boolean"==typeof Nl,p,"internal-error"),G("boolean"==typeof Uu,p,"internal-error"),Xt(mu,p.name),Xt(_u,p.name),Xt(wd,p.name),Xt(ze,p.name),Xt(iu,p.name),Xt(ea,p.name);const Pl=new Dn({uid:Uc,auth:p,email:ks,emailVerified:Nl,displayName:Rn,isAnonymous:Uu,photoURL:_u,phoneNumber:mu,tenantId:wd,stsTokenManager:Ff,createdAt:iu,lastLoginAt:ea});return kf&&Array.isArray(kf)&&(Pl.providerData=kf.map(Yd=>Object.assign({},Yd))),ze&&(Pl._redirectEventId=ze),Pl}static _fromIdTokenResponse(p,_,S=!1){return(0,A.Z)(function*(){const Z=new pn;Z.updateFromServerResponse(_);const ie=new Dn({uid:_.localId,auth:p,stsTokenManager:Z,isAnonymous:S});return yield tr(ie),ie})()}}const me=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,A.Z)(function*(){return!0})()}_set(_,S){var Z=this;return(0,A.Z)(function*(){Z.storage[_]=S})()}_get(_){var S=this;return(0,A.Z)(function*(){const Z=S.storage[_];return void 0===Z?null:Z})()}_remove(_){var S=this;return(0,A.Z)(function*(){delete S.storage[_]})()}_addListener(_,S){}_removeListener(_,S){}}return E.type="NONE",E})();function fe(E,p,_){return`firebase:${E}:${p}:${_}`}class Ee{constructor(p,_,S){this.persistence=p,this.auth=_,this.userKey=S;const{config:Z,name:ie}=this.auth;this.fullUserKey=fe(this.userKey,Z.apiKey,ie),this.fullPersistenceKey=fe("persistence",Z.apiKey,ie),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,A.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Dn._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,A.Z)(function*(){if(_.persistence===p)return;const S=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,S?_.setCurrentUser(S):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,S="authUser"){return(0,A.Z)(function*(){if(!_.length)return new Ee(se(me),p,S);const Z=(yield Promise.all(_.map(function(){var Yt=(0,A.Z)(function*(In){if(yield In._isAvailable())return In});return function(In){return Yt.apply(this,arguments)}}()))).filter(Yt=>Yt);let ie=Z[0]||se(me);const Ne=fe(S,p.config.apiKey,p.name);let tt=null;for(const Yt of _)try{const In=yield Yt._get(Ne);if(In){const Rn=Dn._fromJSON(p,In);Yt!==ie&&(tt=Rn),ie=Yt;break}}catch{}const Ut=Z.filter(Yt=>Yt._shouldAllowMigration);return ie._shouldAllowMigration&&Ut.length?(ie=Ut[0],tt&&(yield ie._set(Ne,tt.toJSON())),yield Promise.all(_.map(function(){var Yt=(0,A.Z)(function*(In){if(In!==ie)try{yield In._remove(Ne)}catch{}});return function(In){return Yt.apply(this,arguments)}}())),new Ee(ie,p,S)):new Ee(ie,p,S)})()}}function nt(E){const p=E.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Wn(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Be(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(we(p))return"Blackberry";if(ae(p))return"Webos";if(Ft(p))return"Safari";if((p.includes("chrome/")||on(p))&&!p.includes("edge/"))return"Chrome";if(ve(p))return"Android";{const S=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===S?.length)return S[1]}return"Other"}function Be(E=(0,U.z$)()){return/firefox\//i.test(E)}function Ft(E=(0,U.z$)()){const p=E.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function on(E=(0,U.z$)()){return/crios\//i.test(E)}function Wn(E=(0,U.z$)()){return/iemobile/i.test(E)}function ve(E=(0,U.z$)()){return/android/i.test(E)}function we(E=(0,U.z$)()){return/blackberry/i.test(E)}function ae(E=(0,U.z$)()){return/webos/i.test(E)}function Se(E=(0,U.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function Ir(E=(0,U.z$)()){return Se(E)||ve(E)||ae(E)||we(E)||/windows phone/i.test(E)||Wn(E)}function ls(E,p=[]){let _;switch(E){case"Browser":_=nt((0,U.z$)());break;case"Worker":_=`${nt((0,U.z$)())}-${E}`;break;default:_=E}const S=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${Ae.SDK_VERSION}/${S}`}class Vs{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const S=ie=>new Promise((Ne,tt)=>{try{Ne(p(ie))}catch(Ut){tt(Ut)}});S.onAbort=_,this.queue.push(S);const Z=this.queue.length-1;return()=>{this.queue[Z]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,A.Z)(function*(){if(_.auth.currentUser===p)return;const S=[];try{for(const Z of _.queue)yield Z(p),Z.onAbort&&S.push(Z.onAbort)}catch(Z){S.reverse();for(const ie of S)try{ie()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:Z?.message})}})()}}class ra{constructor(p,_,S){this.app=p,this.heartbeatServiceProvider=_,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new di(this),this.idTokenSubscription=new di(this),this.beforeStateQueue=new Vs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(p,_){var S=this;return _&&(this._popupRedirectResolver=se(_)),this._initializationPromise=this.queue((0,A.Z)(function*(){var Z,ie;if(!S._deleted&&(S.persistenceManager=yield Ee.create(S,p),!S._deleted)){if(null!==(Z=S._popupRedirectResolver)&&void 0!==Z&&Z._shouldInitProactively)try{yield S._popupRedirectResolver._initialize(S)}catch{}yield S.initializeCurrentUser(_),S.lastNotifiedUid=(null===(ie=S.currentUser)||void 0===ie?void 0:ie.uid)||null,!S._deleted&&(S._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,A.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,A.Z)(function*(){var S;const Z=yield _.assertedPersistence.getCurrentUser();let ie=Z,Ne=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const tt=null===(S=_.redirectUser)||void 0===S?void 0:S._redirectEventId,Ut=ie?._redirectEventId,Yt=yield _.tryRedirectSignIn(p);(!tt||tt===Ut)&&Yt?.user&&(ie=Yt.user,Ne=!0)}if(!ie)return _.directlySetCurrentUser(null);if(!ie._redirectEventId){if(Ne)try{yield _.beforeStateQueue.runMiddleware(ie)}catch(tt){ie=Z,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(tt))}return ie?_.reloadAndSetCurrentUserOrClear(ie):_.directlySetCurrentUser(null)}return G(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===ie._redirectEventId?_.directlySetCurrentUser(ie):_.reloadAndSetCurrentUserOrClear(ie)})()}tryRedirectSignIn(p){var _=this;return(0,A.Z)(function*(){let S=null;try{S=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return S})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,A.Z)(function*(){try{yield tr(p)}catch(S){if("auth/network-request-failed"!==S?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function kt(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var p=this;return(0,A.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,A.Z)(function*(){const S=p?(0,U.m9)(p):null;return S&&G(S.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(S&&S._clone(_))})()}_updateCurrentUser(p,_=!1){var S=this;return(0,A.Z)(function*(){if(!S._deleted)return p&&G(S.tenantId===p.tenantId,S,"tenant-id-mismatch"),_||(yield S.beforeStateQueue.runMiddleware(p)),S.queue((0,A.Z)(function*(){yield S.directlySetCurrentUser(p),S.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,A.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,A.Z)(function*(){yield _.assertedPersistence.setPersistence(se(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new U.LL("auth","Firebase",p())}onAuthStateChanged(p,_,S){return this.registerStateListener(this.authStateSubscription,p,_,S)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,S){return this.registerStateListener(this.idTokenSubscription,p,_,S)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var S=this;return(0,A.Z)(function*(){const Z=yield S.getOrInitRedirectPersistenceManager(_);return null===p?Z.removeCurrentUser():Z.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,A.Z)(function*(){if(!_.redirectPersistenceManager){const S=p&&se(p)||_._popupRedirectResolver;G(S,_,"argument-error"),_.redirectPersistenceManager=yield Ee.create(_,[se(S._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,A.Z)(function*(){var S,Z;return _._isInitialized&&(yield _.queue((0,A.Z)(function*(){}))),(null===(S=_._currentUser)||void 0===S?void 0:S._redirectEventId)===p?_._currentUser:(null===(Z=_.redirectUser)||void 0===Z?void 0:Z._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,A.Z)(function*(){if(p===_.currentUser)return _.queue((0,A.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const S=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==S&&(this.lastNotifiedUid=S,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,S,Z){if(this._deleted)return()=>{};const ie="function"==typeof _?_:_.next.bind(_),Ne=this._isInitialized?Promise.resolve():this._initializationPromise;return G(Ne,this,"internal-error"),Ne.then(()=>ie(this.currentUser)),"function"==typeof _?p.addObserver(_,S,Z):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,A.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=ls(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,A.Z)(function*(){var _;const S={"X-Client-Version":p.clientVersion};p.app.options.appId&&(S["X-Firebase-gmpid"]=p.app.options.appId);const Z=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return Z&&(S["X-Firebase-Client"]=Z),S})()}}function mr(E){return(0,U.m9)(E)}class di{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,U.ne)(_=>this.observer=_)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Js(E){const p=E.indexOf(":");return p<0?"":E.substr(0,p+1)}function ur(E){if(!E)return null;const p=Number(E);return isNaN(p)?null:p}class kr{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Xe("not implemented")}_getIdTokenResponse(p){return Xe("not implemented")}_linkToIdToken(p,_){return Xe("not implemented")}_getReauthenticationResolver(p){return Xe("not implemented")}}function kn(E,p){return vr.apply(this,arguments)}function vr(){return(vr=(0,A.Z)(function*(E,p){return bn(E,"POST","/v1/accounts:resetPassword",nn(E,p))})).apply(this,arguments)}function Ki(E,p){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,A.Z)(function*(E,p){return bn(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function xn(E,p){return hr.apply(this,arguments)}function hr(){return(hr=(0,A.Z)(function*(E,p){return bn(E,"POST","/v1/accounts:update",nn(E,p))})).apply(this,arguments)}function qr(){return(qr=(0,A.Z)(function*(E,p){return Zn(E,"POST","/v1/accounts:signInWithPassword",nn(E,p))})).apply(this,arguments)}function Mr(E,p){return cs.apply(this,arguments)}function cs(){return(cs=(0,A.Z)(function*(E,p){return bn(E,"POST","/v1/accounts:sendOobCode",nn(E,p))})).apply(this,arguments)}function fr(E,p){return ds.apply(this,arguments)}function ds(){return(ds=(0,A.Z)(function*(E,p){return Mr(E,p)})).apply(this,arguments)}function es(E,p){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,A.Z)(function*(E,p){return Mr(E,p)})).apply(this,arguments)}function Ca(E,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,A.Z)(function*(E,p){return Mr(E,p)})).apply(this,arguments)}function $o(E,p){return _i.apply(this,arguments)}function _i(){return(_i=(0,A.Z)(function*(E,p){return Mr(E,p)})).apply(this,arguments)}function hs(){return(hs=(0,A.Z)(function*(E,p){return Zn(E,"POST","/v1/accounts:signInWithEmailLink",nn(E,p))})).apply(this,arguments)}function ts(){return(ts=(0,A.Z)(function*(E,p){return Zn(E,"POST","/v1/accounts:signInWithEmailLink",nn(E,p))})).apply(this,arguments)}class fs extends kr{constructor(p,_,S,Z=null){super("password",S),this._email=p,this._password=_,this._tenantId=Z}static _fromEmailAndPassword(p,_){return new fs(p,_,"password")}static _fromEmailAndCode(p,_,S=null){return new fs(p,_,"emailLink",S)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,A.Z)(function*(){switch(_.signInMethod){case"password":return function Tr(E,p){return qr.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function xi(E,p){return hs.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:ft(p,"internal-error")}})()}_linkToIdToken(p,_){var S=this;return(0,A.Z)(function*(){switch(S.signInMethod){case"password":return Ki(p,{idToken:_,returnSecureToken:!0,email:S._email,password:S._password});case"emailLink":return function Ds(E,p){return ts.apply(this,arguments)}(p,{idToken:_,email:S._email,oobCode:S._password});default:ft(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ss(E,p){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,A.Z)(function*(E,p){return Zn(E,"POST","/v1/accounts:signInWithIdp",nn(E,p))})).apply(this,arguments)}class Ue extends kr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Ue(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):ft("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:S,signInMethod:Z}=_,ie=(0,xe._T)(_,["providerId","signInMethod"]);if(!S||!Z)return null;const Ne=new Ue(S,Z);return Ne.idToken=ie.idToken||void 0,Ne.accessToken=ie.accessToken||void 0,Ne.secret=ie.secret,Ne.nonce=ie.nonce,Ne.pendingToken=ie.pendingToken||null,Ne}_getIdTokenResponse(p){return Ss(p,this.buildRequest())}_linkToIdToken(p,_){const S=this.buildRequest();return S.idToken=_,Ss(p,S)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Ss(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,U.xO)(_)}return p}}function Ge(E,p){return ut.apply(this,arguments)}function ut(){return(ut=(0,A.Z)(function*(E,p){return bn(E,"POST","/v1/accounts:sendVerificationCode",nn(E,p))})).apply(this,arguments)}function _n(){return(_n=(0,A.Z)(function*(E,p){return Zn(E,"POST","/v1/accounts:signInWithPhoneNumber",nn(E,p))})).apply(this,arguments)}function nr(){return(nr=(0,A.Z)(function*(E,p){const _=yield Zn(E,"POST","/v1/accounts:signInWithPhoneNumber",nn(E,p));if(_.temporaryProof)throw Er(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const ii={USER_NOT_FOUND:"user-not-found"};function Fi(){return(Fi=(0,A.Z)(function*(E,p){return Zn(E,"POST","/v1/accounts:signInWithPhoneNumber",nn(E,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ii)})).apply(this,arguments)}class Fn extends kr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Fn({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Fn({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function mt(E,p){return _n.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function an(E,p){return nr.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Ci(E,p){return Fi.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:S,verificationCode:Z}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:S,code:Z}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:S,phoneNumber:Z,temporaryProof:ie}=p;return S||_||Z||ie?new Fn({verificationId:_,verificationCode:S,phoneNumber:Z,temporaryProof:ie}):null}}class au{constructor(p){var _,S,Z,ie,Ne,tt;const Ut=(0,U.zd)((0,U.pd)(p)),Yt=null!==(_=Ut.apiKey)&&void 0!==_?_:null,In=null!==(S=Ut.oobCode)&&void 0!==S?S:null,Rn=function Bn(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Z=Ut.mode)&&void 0!==Z?Z:null);G(Yt&&In&&Rn,"argument-error"),this.apiKey=Yt,this.operation=Rn,this.code=In,this.continueUrl=null!==(ie=Ut.continueUrl)&&void 0!==ie?ie:null,this.languageCode=null!==(Ne=Ut.languageCode)&&void 0!==Ne?Ne:null,this.tenantId=null!==(tt=Ut.tenantId)&&void 0!==tt?tt:null}static parseLink(p){const _=function Zr(E){const p=(0,U.zd)((0,U.pd)(E)).link,_=p?(0,U.zd)((0,U.pd)(p)).deep_link_id:null,S=(0,U.zd)((0,U.pd)(E)).deep_link_id;return(S?(0,U.zd)((0,U.pd)(S)).link:null)||S||_||p||E}(p);try{return new au(_)}catch{return null}}}let Yi=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,S){return fs._fromEmailAndPassword(_,S)}static credentialWithLink(_,S){const Z=au.parseLink(S);return G(Z,"argument-error"),fs._fromEmailAndCode(_,Z.code,Z.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class hi{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Hi extends hi{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class As extends Hi{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return G("providerId"in _&&"signInMethod"in _,"argument-error"),Ue._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return G(p.idToken||p.accessToken,"argument-error"),Ue._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return As.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return As.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:S,oauthTokenSecret:Z,pendingToken:ie,nonce:Ne,providerId:tt}=p;if(!S&&!Z&&!_&&!ie||!tt)return null;try{return new As(tt)._credential({idToken:_,accessToken:S,nonce:Ne,pendingToken:ie})}catch{return null}}}let uo=(()=>{class E extends Hi{constructor(){super("facebook.com")}static credential(_){return Ue._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Bs=(()=>{class E extends Hi{constructor(){super("google.com"),this.addScope("profile")}static credential(_,S){return Ue._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:S})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:S,oauthAccessToken:Z}=_;if(!S&&!Z)return null;try{return E.credential(S,Z)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),ba=(()=>{class E extends Hi{constructor(){super("github.com")}static credential(_){return Ue._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class co extends kr{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Ss(p,this.buildRequest())}_linkToIdToken(p,_){const S=this.buildRequest();return S.idToken=_,Ss(p,S)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Ss(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:S,signInMethod:Z,pendingToken:ie}=_;return S&&Z&&ie&&S===Z?new co(S,ie):null}static _create(p,_){return new co(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ps extends hi{constructor(p){G(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return ps.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return ps.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=co.fromJSON(p);return G(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:S}=p;if(!_||!S)return null;try{return co._create(S,_)}catch{return null}}}let zu=(()=>{class E extends Hi{constructor(){super("twitter.com")}static credential(_,S){return Ue._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:S})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:S,oauthTokenSecret:Z}=_;if(!S||!Z)return null;try{return E.credential(S,Z)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Ta(E,p){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,A.Z)(function*(E,p){return Zn(E,"POST","/v1/accounts:signUp",nn(E,p))})).apply(this,arguments)}class si{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,S,Z=!1){return(0,A.Z)(function*(){const ie=yield Dn._fromIdTokenResponse(p,S,Z),Ne=$n(S);return new si({user:ie,providerId:Ne,_tokenResponse:S,operationType:_})})()}static _forOperation(p,_,S){return(0,A.Z)(function*(){yield p._updateTokensIfNecessary(S,!0);const Z=$n(S);return new si({user:p,providerId:Z,_tokenResponse:S,operationType:_})})()}}function $n(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Ho(){return(Ho=(0,A.Z)(function*(E){var p;const _=mr(E);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new si({user:_.currentUser,providerId:null,operationType:"signIn"});const S=yield Ta(_,{returnSecureToken:!0}),Z=yield si._fromIdTokenResponse(_,"signIn",S,!0);return yield _._updateCurrentUser(Z.user),Z})).apply(this,arguments)}class ia extends U.ZR{constructor(p,_,S,Z){var ie;super(_.code,_.message),this.operationType=S,this.user=Z,Object.setPrototypeOf(this,ia.prototype),this.customData={appName:p.name,tenantId:null!==(ie=p.tenantId)&&void 0!==ie?ie:void 0,_serverResponse:_.customData._serverResponse,operationType:S}}static _fromErrorAndOperation(p,_,S,Z){return new ia(p,_,S,Z)}}function ns(E,p,_,S){return("reauthenticate"===p?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(ie=>{throw"auth/multi-factor-auth-required"===ie.code?ia._fromErrorAndOperation(E,ie,p,S):ie})}function js(E){return new Set(E.map(({providerId:p})=>p).filter(p=>!!p))}function So(){return(So=(0,A.Z)(function*(E,p){const _=(0,U.m9)(E);yield fo(!0,_,p);const{providerUserInfo:S}=yield br(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),Z=js(S||[]);return _.providerData=_.providerData.filter(ie=>Z.has(ie.providerId)),Z.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function bi(E,p){return ho.apply(this,arguments)}function ho(){return(ho=(0,A.Z)(function*(E,p,_=!1){const S=yield Kn(E,p._linkToIdToken(E.auth,yield E.getIdToken()),_);return si._forOperation(E,"link",S)})).apply(this,arguments)}function fo(E,p,_){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,A.Z)(function*(E,p,_){yield tr(p);const Z=!1===E?"provider-already-linked":"no-such-provider";G(js(p.providerData).has(_)===E,p.auth,Z)})).apply(this,arguments)}function lu(E,p){return $s.apply(this,arguments)}function $s(){return($s=(0,A.Z)(function*(E,p,_=!1){const{auth:S}=E,Z="reauthenticate";try{const ie=yield Kn(E,ns(S,Z,p,E),_);G(ie.idToken,S,"internal-error");const Ne=An(ie.idToken);G(Ne,S,"internal-error");const{sub:tt}=Ne;return G(E.uid===tt,S,"user-mismatch"),si._forOperation(E,Z,ie)}catch(ie){throw"auth/user-not-found"===ie?.code&&ft(S,"user-mismatch"),ie}})).apply(this,arguments)}function xo(E,p){return rs.apply(this,arguments)}function rs(){return(rs=(0,A.Z)(function*(E,p,_=!1){const S="signIn",Z=yield ns(E,S,p),ie=yield si._fromIdTokenResponse(E,S,Z);return _||(yield E._updateCurrentUser(ie.user)),ie})).apply(this,arguments)}function Dr(E,p){return po.apply(this,arguments)}function po(){return(po=(0,A.Z)(function*(E,p){return xo(mr(E),p)})).apply(this,arguments)}function Mi(E,p){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,A.Z)(function*(E,p){const _=(0,U.m9)(E);return yield fo(!1,_,p.providerId),bi(_,p)})).apply(this,arguments)}function sa(E,p){return Li.apply(this,arguments)}function Li(){return(Li=(0,A.Z)(function*(E,p){return lu((0,U.m9)(E),p)})).apply(this,arguments)}function Sr(E,p){return cu.apply(this,arguments)}function cu(){return(cu=(0,A.Z)(function*(E,p){return Zn(E,"POST","/v1/accounts:signInWithCustomToken",nn(E,p))})).apply(this,arguments)}function Ri(){return(Ri=(0,A.Z)(function*(E,p){const _=mr(E),S=yield Sr(_,{token:p,returnSecureToken:!0}),Z=yield si._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(Z.user),Z})).apply(this,arguments)}class Mo{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?fi._fromServerResponse(p,_):ft(p,"internal-error")}}class fi extends Mo{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new fi(_)}}function gs(E,p,_){var S;G((null===(S=_.url)||void 0===S?void 0:S.length)>0,E,"invalid-continue-uri"),G(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(G(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(G(_.android.packageName.length>0,E,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function On(){return(On=(0,A.Z)(function*(E,p,_){const S=(0,U.m9)(E),Z={requestType:"PASSWORD_RESET",email:p};_&&gs(S,Z,_),yield es(S,Z)})).apply(this,arguments)}function gn(){return(gn=(0,A.Z)(function*(E,p,_){yield kn((0,U.m9)(E),{oobCode:p,newPassword:_})})).apply(this,arguments)}function ti(){return(ti=(0,A.Z)(function*(E,p){yield xn((0,U.m9)(E),{oobCode:p})})).apply(this,arguments)}function aa(E,p){return zo.apply(this,arguments)}function zo(){return(zo=(0,A.Z)(function*(E,p){const _=(0,U.m9)(E),S=yield kn(_,{oobCode:p}),Z=S.requestType;switch(G(Z,_,"internal-error"),Z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(S.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(S.mfaInfo,_,"internal-error");default:G(S.email,_,"internal-error")}let ie=null;return S.mfaInfo&&(ie=Mo._fromServerResponse(mr(_),S.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.newEmail:S.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.email:S.newEmail)||null,multiFactorInfo:ie},operation:Z}})).apply(this,arguments)}function za(){return(za=(0,A.Z)(function*(E,p){const{data:_}=yield aa((0,U.m9)(E),p);return _.email})).apply(this,arguments)}function ms(){return(ms=(0,A.Z)(function*(E,p,_){const S=mr(E),Z=yield Ta(S,{returnSecureToken:!0,email:p,password:_}),ie=yield si._fromIdTokenResponse(S,"signIn",Z);return yield S._updateCurrentUser(ie.user),ie})).apply(this,arguments)}function Sa(){return(Sa=(0,A.Z)(function*(E,p,_){const S=(0,U.m9)(E),Z={requestType:"EMAIL_SIGNIN",email:p};G(_.handleCodeInApp,S,"argument-error"),_&&gs(S,Z,_),yield Ca(S,Z)})).apply(this,arguments)}function mo(){return(mo=(0,A.Z)(function*(E,p,_){const S=(0,U.m9)(E),Z=Yi.credentialWithLink(p,_||Tt());return G(Z._tenantId===(S.tenantId||null),S,"tenant-id-mismatch"),Dr(S,Z)})).apply(this,arguments)}function du(E,p){return _s.apply(this,arguments)}function _s(){return(_s=(0,A.Z)(function*(E,p){return bn(E,"POST","/v1/accounts:createAuthUri",nn(E,p))})).apply(this,arguments)}function la(){return(la=(0,A.Z)(function*(E,p){const S={identifier:p,continueUri:St()?Tt():"http://localhost"},{signinMethods:Z}=yield du((0,U.m9)(E),S);return Z||[]})).apply(this,arguments)}function _o(){return(_o=(0,A.Z)(function*(E,p){const _=(0,U.m9)(E),Z={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};p&&gs(_.auth,Z,p);const{email:ie}=yield fr(_.auth,Z);ie!==E.email&&(yield E.reload())})).apply(this,arguments)}function oi(){return(oi=(0,A.Z)(function*(E,p,_){const S=(0,U.m9)(E),ie={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:p};_&&gs(S.auth,ie,_);const{email:Ne}=yield $o(S.auth,ie);Ne!==E.email&&(yield E.reload())})).apply(this,arguments)}function Ui(E,p){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,A.Z)(function*(E,p){return bn(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function yo(){return(yo=(0,A.Z)(function*(E,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const S=(0,U.m9)(E),ie={idToken:yield S.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},Ne=yield Kn(S,Ui(S.auth,ie));S.displayName=Ne.displayName||null,S.photoURL=Ne.photoUrl||null;const tt=S.providerData.find(({providerId:Ut})=>"password"===Ut);tt&&(tt.displayName=S.displayName,tt.photoURL=S.photoURL),yield S._updateTokensIfNecessary(Ne)})).apply(this,arguments)}function ys(E,p,_){return rn.apply(this,arguments)}function rn(){return(rn=(0,A.Z)(function*(E,p,_){const{auth:S}=E,ie={idToken:yield E.getIdToken(),returnSecureToken:!0};p&&(ie.email=p),_&&(ie.password=_);const Ne=yield Kn(E,Ki(S,ie));yield E._updateTokensIfNecessary(Ne,!0)})).apply(this,arguments)}class vn{constructor(p,_,S={}){this.isNewUser=p,this.providerId=_,this.profile=S}}class Rs extends vn{constructor(p,_,S,Z){super(p,_,S),this.username=Z}}class qo extends vn{constructor(p,_){super(p,"facebook.com",_)}}class vo extends Rs{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Wu extends vn{constructor(p,_){super(p,"google.com",_)}}class Vi extends Rs{constructor(p,_,S){super(p,"twitter.com",_,S)}}function Cu(E){const{user:p,_tokenResponse:_}=E;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Aa(E){var p,_;if(!E)return null;const{providerId:S}=E,Z=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},ie=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!S&&E?.idToken){const Ne=null===(_=null===(p=An(E.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(Ne)return new vn(ie,"anonymous"!==Ne&&"custom"!==Ne?Ne:null)}if(!S)return null;switch(S){case"facebook.com":return new qo(ie,Z);case"github.com":return new vo(ie,Z);case"google.com":return new Wu(ie,Z);case"twitter.com":return new Vi(ie,Z,E.screenName||null);case"custom":case"anonymous":return new vn(ie,null);default:return new vn(ie,S,Z)}}(_)}class io{constructor(p,_,S){this.type=p,this.credential=_,this.auth=S}static _fromIdtoken(p,_){return new io("enroll",p,_)}static _fromMfaPendingCredential(p){return new io("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,S;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return io._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(S=p.multiFactorSession)&&void 0!==S&&S.idToken)return io._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Ni{constructor(p,_,S){this.session=p,this.hints=_,this.signInResolver=S}static _fromError(p,_){const S=mr(p),Z=_.customData._serverResponse,ie=(Z.mfaInfo||[]).map(tt=>Mo._fromServerResponse(S,tt));G(Z.mfaPendingCredential,S,"internal-error");const Ne=io._fromMfaPendingCredential(Z.mfaPendingCredential);return new Ni(Ne,ie,function(){var tt=(0,A.Z)(function*(Ut){const Yt=yield Ut._process(S,Ne);delete Z.mfaInfo,delete Z.mfaPendingCredential;const In=Object.assign(Object.assign({},Z),{idToken:Yt.idToken,refreshToken:Yt.refreshToken});switch(_.operationType){case"signIn":const Rn=yield si._fromIdTokenResponse(S,_.operationType,In);return yield S._updateCurrentUser(Rn.user),Rn;case"reauthenticate":return G(_.user,S,"internal-error"),si._forOperation(_.user,_.operationType,In);default:ft(S,"internal-error")}});return function(Ut){return tt.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,A.Z)(function*(){return _.signInResolver(p)})()}}function xa(E,p){return bn(E,"POST","/v2/accounts/mfaEnrollment:start",nn(E,p))}class Hs{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(S=>Mo._fromServerResponse(p.auth,S)))})}static _fromUser(p){return new Hs(p)}getSession(){var p=this;return(0,A.Z)(function*(){return io._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var S=this;return(0,A.Z)(function*(){const Z=p,ie=yield S.getSession(),Ne=yield Kn(S.user,Z._process(S.user.auth,ie,_));return yield S.user._updateTokensIfNecessary(Ne),S.user.reload()})()}unenroll(p){var _=this;return(0,A.Z)(function*(){const S="string"==typeof p?p:p.uid,Z=yield _.user.getIdToken();try{const ie=yield Kn(_.user,function qa(E,p){return bn(E,"POST","/v2/accounts/mfaEnrollment:withdraw",nn(E,p))}(_.user.auth,{idToken:Z,mfaEnrollmentId:S}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Ne})=>Ne!==S),yield _.user._updateTokensIfNecessary(ie),yield _.user.reload()}catch(ie){throw ie}})()}}const O=new WeakMap,V="__sak";class Q{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(V,"1"),this.storage.removeItem(V),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const lr=(()=>{class E extends Q{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,S)=>this.onStorageEvent(_,S),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ce(){const E=(0,U.z$)();return Ft(E)||Se(E)}()&&function Br(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ir(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const S of Object.keys(this.listeners)){const Z=this.storage.getItem(S),ie=this.localCache[S];Z!==ie&&_(S,ie,Z)}}onStorageEvent(_,S=!1){if(!_.key)return void this.forAllChangedKeys((tt,Ut,Yt)=>{this.notifyListeners(tt,Yt)});const Z=_.key;if(S?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const tt=this.storage.getItem(Z);if(_.newValue!==tt)null!==_.newValue?this.storage.setItem(Z,_.newValue):this.storage.removeItem(Z);else if(this.localCache[Z]===_.newValue&&!S)return}const ie=()=>{const tt=this.storage.getItem(Z);!S&&this.localCache[Z]===tt||this.notifyListeners(Z,tt)},Ne=this.storage.getItem(Z);!function Vn(){return(0,U.w1)()&&10===document.documentMode}()||Ne===_.newValue||_.newValue===_.oldValue?ie():setTimeout(ie,10)}notifyListeners(_,S){this.localCache[_]=S;const Z=this.listeners[_];if(Z)for(const ie of Array.from(Z))ie(S&&JSON.parse(S))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,S,Z)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:S,newValue:Z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,S){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(S)}_removeListener(_,S){this.listeners[_]&&(this.listeners[_].delete(S),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,S){var Z=()=>super._set,ie=this;return(0,A.Z)(function*(){yield Z().call(ie,_,S),ie.localCache[_]=JSON.stringify(S)})()}_get(_){var S=()=>super._get,Z=this;return(0,A.Z)(function*(){const ie=yield S().call(Z,_);return Z.localCache[_]=JSON.stringify(ie),ie})()}_remove(_){var S=()=>super._remove,Z=this;return(0,A.Z)(function*(){yield S().call(Z,_),delete Z.localCache[_]})()}}return E.type="LOCAL",E})(),Xn=(()=>{class E extends Q{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,S){}_removeListener(_,S){}}return E.type="SESSION",E})();let ni=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const S=this.receivers.find(ie=>ie.isListeningto(_));if(S)return S;const Z=new E(_);return this.receivers.push(Z),Z}isListeningto(_){return this.eventTarget===_}handleEvent(_){var S=this;return(0,A.Z)(function*(){const Z=_,{eventId:ie,eventType:Ne,data:tt}=Z.data,Ut=S.handlersMap[Ne];if(!Ut?.size)return;Z.ports[0].postMessage({status:"ack",eventId:ie,eventType:Ne});const Yt=Array.from(Ut).map(function(){var Rn=(0,A.Z)(function*(ks){return ks(Z.origin,tt)});return function(ks){return Rn.apply(this,arguments)}}()),In=yield function Ln(E){return Promise.all(E.map(function(){var p=(0,A.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(S){return{fulfilled:!1,reason:S}}});return function(_){return p.apply(this,arguments)}}()))}(Yt);Z.ports[0].postMessage({status:"done",eventId:ie,eventType:Ne,response:In})})()}_subscribe(_,S){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(S)}_unsubscribe(_,S){this.handlersMap[_]&&S&&this.handlersMap[_].delete(S),(!S||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function or(E="",p=10){let _="";for(let S=0;S<p;S++)_+=Math.floor(10*Math.random());return E+_}class Pi{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,S=50){var Z=this;return(0,A.Z)(function*(){const ie=typeof MessageChannel<"u"?new MessageChannel:null;if(!ie)throw new Error("connection_unavailable");let Ne,tt;return new Promise((Ut,Yt)=>{const In=or("",20);ie.port1.start();const Rn=setTimeout(()=>{Yt(new Error("unsupported_event"))},S);tt={messageChannel:ie,onMessage(ks){const mu=ks;if(mu.data.eventId===In)switch(mu.data.status){case"ack":clearTimeout(Rn),Ne=setTimeout(()=>{Yt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ne),Ut(mu.data.response);break;default:clearTimeout(Rn),clearTimeout(Ne),Yt(new Error("invalid_response"))}}},Z.handlers.add(tt),ie.port1.addEventListener("message",tt.onMessage),Z.target.postMessage({eventType:p,eventId:In,data:_},[ie.port2])}).finally(()=>{tt&&Z.removeMessageHandler(tt)})})()}}function Cr(){return window}function Gs(){return typeof Cr().WorkerGlobalScope<"u"&&"function"==typeof Cr().importScripts}function ws(){return(ws=(0,A.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ru="firebaseLocalStorageDb",zs="firebaseLocalStorage",ha="fbase_key";class Ra{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function fa(E,p){return E.transaction([zs],p?"readwrite":"readonly").objectStore(zs)}function Za(){const E=indexedDB.open(Ru,1);return new Promise((p,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const S=E.result;try{S.createObjectStore(zs,{keyPath:ha})}catch(Z){_(Z)}}),E.addEventListener("success",(0,A.Z)(function*(){const S=E.result;S.objectStoreNames.contains(zs)?p(S):(S.close(),yield function Ns(){const E=indexedDB.deleteDatabase(Ru);return new Ra(E).toPromise()}(),p(yield Za()))}))})}function vi(E,p,_){return Na.apply(this,arguments)}function Na(){return(Na=(0,A.Z)(function*(E,p,_){const S=fa(E,!0).put({[ha]:p,value:_});return new Ra(S).toPromise()})).apply(this,arguments)}function Yo(){return(Yo=(0,A.Z)(function*(E,p){const _=fa(E,!1).get(p),S=yield new Ra(_).toPromise();return void 0===S?null:S.value})).apply(this,arguments)}function Pa(E,p){const _=fa(E,!0).delete(p);return new Ra(_).toPromise()}const pa=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,A.Z)(function*(){return _.db||(_.db=yield Za()),_.db})()}_withRetries(_){var S=this;return(0,A.Z)(function*(){let Z=0;for(;;)try{const ie=yield S._openDb();return yield _(ie)}catch(ie){if(Z++>3)throw ie;S.db&&(S.db.close(),S.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,A.Z)(function*(){return Gs()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,A.Z)(function*(){_.receiver=ni._getInstance(function Oo(){return Gs()?self:null}()),_.receiver._subscribe("keyChanged",function(){var S=(0,A.Z)(function*(Z,ie){return{keyProcessed:(yield _._poll()).includes(ie.key)}});return function(Z,ie){return S.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var S=(0,A.Z)(function*(Z,ie){return["keyChanged"]});return function(Z,ie){return S.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,A.Z)(function*(){var S,Z;if(_.activeServiceWorker=yield function vs(){return ws.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Pi(_.activeServiceWorker);const ie=yield _.sender._send("ping",{},800);ie&&null!==(S=ie[0])&&void 0!==S&&S.fulfilled&&null!==(Z=ie[0])&&void 0!==Z&&Z.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var S=this;return(0,A.Z)(function*(){if(S.sender&&S.activeServiceWorker&&function Ma(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===S.activeServiceWorker)try{yield S.sender._send("keyChanged",{key:_},S.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,A.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Za();return yield vi(_,V,"1"),yield Pa(_,V),!0}catch{}return!1})()}_withPendingWrite(_){var S=this;return(0,A.Z)(function*(){S.pendingWrites++;try{yield _()}finally{S.pendingWrites--}})()}_set(_,S){var Z=this;return(0,A.Z)(function*(){return Z._withPendingWrite((0,A.Z)(function*(){return yield Z._withRetries(ie=>vi(ie,_,S)),Z.localCache[_]=S,Z.notifyServiceWorker(_)}))})()}_get(_){var S=this;return(0,A.Z)(function*(){const Z=yield S._withRetries(ie=>function Ko(E,p){return Yo.apply(this,arguments)}(ie,_));return S.localCache[_]=Z,Z})()}_remove(_){var S=this;return(0,A.Z)(function*(){return S._withPendingWrite((0,A.Z)(function*(){return yield S._withRetries(Z=>Pa(Z,_)),delete S.localCache[_],S.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,A.Z)(function*(){const S=yield _._withRetries(Ne=>{const tt=fa(Ne,!1).getAll();return new Ra(tt).toPromise()});if(!S)return[];if(0!==_.pendingWrites)return[];const Z=[],ie=new Set;for(const{fbase_key:Ne,value:tt}of S)ie.add(Ne),JSON.stringify(_.localCache[Ne])!==JSON.stringify(tt)&&(_.notifyListeners(Ne,tt),Z.push(Ne));for(const Ne of Object.keys(_.localCache))_.localCache[Ne]&&!ie.has(Ne)&&(_.notifyListeners(Ne,null),Z.push(Ne));return Z})()}notifyListeners(_,S){this.localCache[_]=S;const Z=this.listeners[_];if(Z)for(const ie of Array.from(Z))ie(S)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,A.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,S){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(S)}_removeListener(_,S){this.listeners[_]&&(this.listeners[_].delete(S),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function Ka(E,p){return bn(E,"POST","/v2/accounts/mfaSignIn:start",nn(E,p))}function Fa(){return(Fa=(0,A.Z)(function*(E){return(yield bn(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nr(E){return new Promise((p,_)=>{const S=document.createElement("script");S.setAttribute("src",E),S.onload=p,S.onerror=Z=>{const ie=st("internal-error");ie.customData=Z,_(ie)},S.type="text/javascript",S.charset="UTF-8",function Ya(){var E,p;return null!==(p=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==p?p:document}().appendChild(S)})}function pi(E){return`__${E}${Math.floor(1e6*Math.random())}`}const Es=1e12;class Ku{constructor(p){this.auth=p,this.counter=Es,this._widgets=new Map}render(p,_){const S=this.counter;return this._widgets.set(S,new rl(p,this.auth.name,_||{})),this.counter++,S}reset(p){var _;const S=p||Es;null===(_=this._widgets.get(S))||void 0===_||_.delete(),this._widgets.delete(S)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Es))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,A.Z)(function*(){var S;return null===(S=_._widgets.get(p||Es))||void 0===S||S.execute(),""})()}}class rl{constructor(p,_,S){this.params=S,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Z="string"==typeof p?document.getElementById(p):p;G(Z,"argument-error",{appName:_}),this.container=Z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Yu(E){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let S=0;S<E;S++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qa=pi("rcb"),fu=new $t(3e4,6e4);class Bi{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Cr().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return G(function R(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Cr().grecaptcha):new Promise((S,Z)=>{const ie=Cr().setTimeout(()=>{Z(st(p,"network-request-failed"))},fu.get());Cr()[Qa]=()=>{Cr().clearTimeout(ie),delete Cr()[Qa];const tt=Cr().grecaptcha;if(!tt)return void Z(st(p,"internal-error"));const Ut=tt.render;tt.render=(Yt,In)=>{const Rn=Ut(Yt,In);return this.counter++,Rn},this.hostLanguage=_,S(tt)},Nr(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:Qa,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(ie),Z(st(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=Cr().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class D{load(p){return(0,A.Z)(function*(){return new Ku(p)})()}clearedOneInstance(){}}const w="recaptcha",j={theme:"light",type:"image"};class de{constructor(p,_=Object.assign({},j),S){this.parameters=_,this.type=w,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mr(S),this.isInvisible="invisible"===this.parameters.size,G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Z="string"==typeof p?document.getElementById(p):p;G(Z,this.auth,"argument-error"),this.container=Z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new D:new Bi,this.validateStartingState()}verify(){var p=this;return(0,A.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),S=p.getAssertedRecaptcha();return S.getResponse(_)||new Promise(ie=>{const Ne=tt=>{tt&&(p.tokenChangeListeners.delete(Ne),ie(tt))};p.tokenChangeListeners.add(Ne),p.isInvisible&&S.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(S=>S(_)),"function"==typeof p)p(_);else if("string"==typeof p){const S=Cr()[p];"function"==typeof S&&S(_)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,A.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const S=document.createElement("div");_.appendChild(S),_=S}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,A.Z)(function*(){G(St()&&!Gs(),p.auth,"internal-error"),yield function Ze(){let E=null;return new Promise(p=>{"complete"!==document.readyState?(E=()=>p(),window.addEventListener("load",E)):p()}).catch(p=>{throw E&&window.removeEventListener("load",E),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function ko(E){return Fa.apply(this,arguments)}(p.auth);G(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class tn{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Fn._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Yr(){return(Yr=(0,A.Z)(function*(E,p,_){const S=mr(E),Z=yield Ws(S,p,(0,U.m9)(_));return new tn(Z,ie=>Dr(S,ie))})).apply(this,arguments)}function Xi(){return(Xi=(0,A.Z)(function*(E,p,_){const S=(0,U.m9)(E);yield fo(!1,S,"phone");const Z=yield Ws(S.auth,p,(0,U.m9)(_));return new tn(Z,ie=>Mi(S,ie))})).apply(this,arguments)}function Fo(){return(Fo=(0,A.Z)(function*(E,p,_){const S=(0,U.m9)(E),Z=yield Ws(S.auth,p,(0,U.m9)(_));return new tn(Z,ie=>sa(S,ie))})).apply(this,arguments)}function Ws(E,p,_){return pu.apply(this,arguments)}function pu(){return(pu=(0,A.Z)(function*(E,p,_){var S;const Z=yield _.verify();try{let ie;if(G("string"==typeof Z,E,"argument-error"),G(_.type===w,E,"argument-error"),ie="string"==typeof p?{phoneNumber:p}:p,"session"in ie){const Ne=ie.session;if("phoneNumber"in ie)return G("enroll"===Ne.type,E,"internal-error"),(yield xa(E,{idToken:Ne.credential,phoneEnrollmentInfo:{phoneNumber:ie.phoneNumber,recaptchaToken:Z}})).phoneSessionInfo.sessionInfo;{G("signin"===Ne.type,E,"internal-error");const tt=(null===(S=ie.multiFactorHint)||void 0===S?void 0:S.uid)||ie.multiFactorUid;return G(tt,E,"missing-multi-factor-info"),(yield Ka(E,{mfaPendingCredential:Ne.credential,mfaEnrollmentId:tt,phoneSignInInfo:{recaptchaToken:Z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ne}=yield Ge(E,{phoneNumber:ie.phoneNumber,recaptchaToken:Z});return Ne}}finally{_._reset()}})).apply(this,arguments)}function wo(){return(wo=(0,A.Z)(function*(E,p){yield bi((0,U.m9)(E),p)})).apply(this,arguments)}let ga=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=mr(_)}verifyPhoneNumber(_,S){return Ws(this.auth,_,(0,U.m9)(S))}static credential(_,S){return Fn._fromVerification(_,S)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:S,temporaryProof:Z}=_;return S&&Z?Fn._fromTokenResponse(S,Z):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function wi(E,p){return p?se(p):(G(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Xo extends kr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ss(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Ss(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Ss(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function Tu(E){return xo(E.auth,new Xo(E),E.bypassAuthState)}function Lo(E){const{auth:p,user:_}=E;return G(_,p,"internal-error"),lu(_,new Xo(E),E.bypassAuthState)}function qs(E){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,A.Z)(function*(E){const{auth:p,user:_}=E;return G(_,p,"internal-error"),bi(_,new Xo(E),E.bypassAuthState)})).apply(this,arguments)}class Uo{constructor(p,_,S,Z,ie=!1){this.auth=p,this.resolver=S,this.user=Z,this.bypassAuthState=ie,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,A.Z)(function*(S,Z){p.pendingPromise={resolve:S,reject:Z};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(ie){p.reject(ie)}});return function(S,Z){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,A.Z)(function*(){const{urlResponse:S,sessionId:Z,postBody:ie,tenantId:Ne,error:tt,type:Ut}=p;if(tt)return void _.reject(tt);const Yt={auth:_.auth,requestUri:S,sessionId:Z,tenantId:Ne||void 0,postBody:ie||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ut)(Yt))}catch(In){_.reject(In)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Tu;case"linkViaPopup":case"linkViaRedirect":return qs;case"reauthViaPopup":case"reauthViaRedirect":return Lo;default:ft(this.auth,"internal-error")}}resolve(p){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Oi=new $t(2e3,1e4);function Ja(){return(Ja=(0,A.Z)(function*(E,p,_){const S=mr(E);Ct(E,p,hi);const Z=wi(S,_);return new x(S,"signInViaPopup",p,Z).executeNotNull()})).apply(this,arguments)}function bl(){return(bl=(0,A.Z)(function*(E,p,_){const S=(0,U.m9)(E);Ct(S.auth,p,hi);const Z=wi(S.auth,_);return new x(S.auth,"reauthViaPopup",p,Z,S).executeNotNull()})).apply(this,arguments)}function b(){return(b=(0,A.Z)(function*(E,p,_){const S=(0,U.m9)(E);Ct(S.auth,p,hi);const Z=wi(S.auth,_);return new x(S.auth,"linkViaPopup",p,Z,S).executeNotNull()})).apply(this,arguments)}let x=(()=>{class E extends Uo{constructor(_,S,Z,ie,Ne){super(_,S,ie,Ne),this.provider=Z,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,A.Z)(function*(){const S=yield _.execute();return G(S,_.auth,"internal-error"),S})()}onExecution(){var _=this;return(0,A.Z)(function*(){ye(1===_.filter.length,"Popup operations only handle one event");const S=or();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],S),_.authWindow.associatedEvent=S,_.resolver._originValidation(_.auth).catch(Z=>{_.reject(Z)}),_.resolver._isIframeWebStorageSupported(_.auth,Z=>{Z||_.reject(st(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(st(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var S,Z;this.pollId=null!==(Z=null===(S=this.authWindow)||void 0===S?void 0:S.window)&&void 0!==Z&&Z.closed?window.setTimeout(()=>{this.pollId=null,this.reject(st(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Oi.get())};_()}}return E.currentPopupAction=null,E})();const P=new Map;class $ extends Uo{constructor(p,_,S=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,S),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,A.Z)(function*(){let S=P.get(_.auth._key());if(!S){try{const ie=(yield function X(E,p){return ne.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;S=()=>Promise.resolve(ie)}catch(Z){S=()=>Promise.reject(Z)}P.set(_.auth._key(),S)}return _.bypassAuthState||P.set(_.auth._key(),()=>Promise.resolve(null)),S()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,S=this;return(0,A.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(S,p);if("unknown"!==p.type){if(p.eventId){const Z=yield S.auth._redirectUserForId(p.eventId);if(Z)return S.user=Z,_().call(S,p);S.resolve(null)}}else S.resolve(null)})()}onExecution(){return(0,A.Z)(function*(){})()}cleanUp(){}}function ne(){return(ne=(0,A.Z)(function*(E,p){const _=Di(p),S=rr(E);if(!(yield S._isAvailable()))return!1;const Z="true"===(yield S._get(_));return yield S._remove(_),Z})).apply(this,arguments)}function Me(E,p){return lt.apply(this,arguments)}function lt(){return(lt=(0,A.Z)(function*(E,p){return rr(E)._set(Di(p),"true")})).apply(this,arguments)}function Kt(E,p){P.set(E._key(),p)}function rr(E){return se(E._redirectPersistence)}function Di(E){return fe("pendingRedirect",E.config.apiKey,E.name)}function L(){return(L=(0,A.Z)(function*(E,p,_){const S=mr(E);Ct(E,p,hi),yield S._initializationPromise;const Z=wi(S,_);return yield Me(Z,S),Z._openRedirect(S,p,"signInViaRedirect")})).apply(this,arguments)}function he(){return(he=(0,A.Z)(function*(E,p,_){const S=(0,U.m9)(E);Ct(S.auth,p,hi),yield S.auth._initializationPromise;const Z=wi(S.auth,_);yield Me(Z,S.auth);const ie=yield qn(S);return Z._openRedirect(S.auth,p,"reauthViaRedirect",ie)})).apply(this,arguments)}function It(){return(It=(0,A.Z)(function*(E,p,_){const S=(0,U.m9)(E);Ct(S.auth,p,hi),yield S.auth._initializationPromise;const Z=wi(S.auth,_);yield fo(!1,S,p.providerId),yield Me(Z,S.auth);const ie=yield qn(S);return Z._openRedirect(S.auth,p,"linkViaRedirect",ie)})).apply(this,arguments)}function wn(){return(wn=(0,A.Z)(function*(E,p){return yield mr(E)._initializationPromise,Sn(E,p,!1)})).apply(this,arguments)}function Sn(E,p){return ir.apply(this,arguments)}function ir(){return(ir=(0,A.Z)(function*(E,p,_=!1){const S=mr(E),Z=wi(S,p),Ne=yield new $(S,Z,_).execute();return Ne&&!_&&(delete Ne.user._redirectEventId,yield S._persistUserIfCurrent(Ne.user),yield S._setRedirectUser(null,p)),Ne})).apply(this,arguments)}function qn(E){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,A.Z)(function*(E){const p=or(`${E.uid}:::`);return E._redirectEventId=p,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),p})).apply(this,arguments)}class _a{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(S=>{this.isEventForConsumer(p,S)&&(_=!0,this.sendToConsumer(p,S),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function La(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Du(E);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var S;if(p.error&&!Du(p)){const Z=(null===(S=p.error.code)||void 0===S?void 0:S.split("auth/")[1])||"internal-error";_.onError(st(this.auth,Z))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const S=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&S}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qu(p))}saveEventToCache(p){this.cachedEventUids.add(Qu(p)),this.lastProcessedEventTime=Date.now()}}function Qu(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(p=>p).join("-")}function Du({type:E,error:p}){return"unknown"===E&&"auth/no-auth-event"===p?.code}function Fr(E){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,A.Z)(function*(E,p={}){return bn(E,"GET","/v1/projects",p)})).apply(this,arguments)}const il=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tl=/^https?/;function Xu(){return(Xu=(0,A.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:p}=yield Fr(E);for(const _ of p)try{if(od(_))return}catch{}ft(E,"unauthorized-domain")})).apply(this,arguments)}function od(E){const p=Tt(),{protocol:_,hostname:S}=new URL(p);if(E.startsWith("chrome-extension://")){const Ne=new URL(E);return""===Ne.hostname&&""===S?"chrome-extension:"===_&&E.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&Ne.hostname===S}if(!Tl.test(_))return!1;if(il.test(E))return S===E;const Z=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Z+"|"+Z+")$","i").test(S)}const Nf=new $t(3e4,6e4);function Vh(){const E=Cr().___jsl;if(E?.H)for(const p of Object.keys(E.H))if(E.H[p].r=E.H[p].r||[],E.H[p].L=E.H[p].L||[],E.H[p].r=[...E.H[p].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let Su=null;function Dl(E){return Su=Su||function ad(E){return new Promise((p,_)=>{var S,Z,ie;function Ne(){Vh(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Vh(),_(st(E,"network-request-failed"))},timeout:Nf.get()})}if(null!==(Z=null===(S=Cr().gapi)||void 0===S?void 0:S.iframes)&&void 0!==Z&&Z.Iframe)p(gapi.iframes.getContext());else{if(null===(ie=Cr().gapi)||void 0===ie||!ie.load){const tt=pi("iframefcb");return Cr()[tt]=()=>{gapi.load?Ne():_(st(E,"network-request-failed"))},Nr(`https://apis.google.com/js/api.js?onload=${tt}`).catch(Ut=>_(Ut))}Ne()}}).catch(p=>{throw Su=null,p})}(E),Su}const Ic=new $t(5e3,15e3),Cc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bh(E){const p=E.config;G(p.authDomain,E,"auth-domain-config-required");const _=p.emulator?Dt(p,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,S={apiKey:p.apiKey,appName:E.name,v:Ae.SDK_VERSION},Z=jp.get(E.config.apiHost);Z&&(S.eid=Z);const ie=E._getFrameworks();return ie.length&&(S.fw=ie.join(",")),`${_}?${(0,U.xO)(S).slice(1)}`}function ld(){return ld=(0,A.Z)(function*(E){const p=yield Dl(E),_=Cr().gapi;return G(_,E,"internal-error"),p.open({where:document.body,url:Bh(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cc,dontclear:!0},S=>new Promise(function(){var Z=(0,A.Z)(function*(ie,Ne){yield S.restyle({setHideOnLeave:!1});const tt=st(E,"network-request-failed"),Ut=Cr().setTimeout(()=>{Ne(tt)},Ic.get());function Yt(){Cr().clearTimeout(Ut),ie(S)}S.ping(Yt).then(Yt,()=>{Ne(tt)})});return function(ie,Ne){return Z.apply(this,arguments)}}()))}),ld.apply(this,arguments)}const Vd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class tu{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function so(E,p,_,S,Z,ie){G(E.config.authDomain,E,"auth-domain-config-required"),G(E.config.apiKey,E,"invalid-api-key");const Ne={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:S,v:Ae.SDK_VERSION,eventId:Z};if(p instanceof hi){p.setDefaultLanguage(E.languageCode),Ne.providerId=p.providerId||"",(0,U.xb)(p.getCustomParameters())||(Ne.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ut,Yt]of Object.entries(ie||{}))Ne[Ut]=Yt}if(p instanceof Hi){const Ut=p.getScopes().filter(Yt=>""!==Yt);Ut.length>0&&(Ne.scopes=Ut.join(","))}E.tenantId&&(Ne.tid=E.tenantId);const tt=Ne;for(const Ut of Object.keys(tt))void 0===tt[Ut]&&delete tt[Ut];return`${function Wl({config:E}){return E.emulator?Dt(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,U.xO)(tt).slice(1)}`}const ql="webStorageSupport",Sc=class Zl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xn,this._completeRedirectFn=Sn,this._overrideRedirectResult=Kt}_openPopup(p,_,S,Z){var ie=this;return(0,A.Z)(function*(){var Ne;ye(null===(Ne=ie.eventManagers[p._key()])||void 0===Ne?void 0:Ne.manager,"_initialize() not called before _openPopup()");const tt=so(p,_,S,Tt(),Z);return function bc(E,p,_,S=500,Z=600){const ie=Math.max((window.screen.availHeight-Z)/2,0).toString(),Ne=Math.max((window.screen.availWidth-S)/2,0).toString();let tt="";const Ut=Object.assign(Object.assign({},Vd),{width:S.toString(),height:Z.toString(),top:ie,left:Ne}),Yt=(0,U.z$)().toLowerCase();_&&(tt=on(Yt)?"_blank":_),Be(Yt)&&(p=p||"http://localhost",Ut.scrollbars="yes");const In=Object.entries(Ut).reduce((ks,[mu,_u])=>`${ks}${mu}=${_u},`,"");if(function Zt(E=(0,U.z$)()){var p;return Se(E)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Yt)&&"_self"!==tt)return function Tc(E,p){const _=document.createElement("a");_.href=E,_.target=p;const S=document.createEvent("MouseEvent");S.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(S)}(p||"",tt),new tu(null);const Rn=window.open(p||"",tt,In);G(Rn,E,"popup-blocked");try{Rn.focus()}catch{}return new tu(Rn)}(p,tt,or())})()}_openRedirect(p,_,S,Z){var ie=this;return(0,A.Z)(function*(){return yield ie._originValidation(p),function ss(E){Cr().location.href=E}(so(p,_,S,Tt(),Z)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:Z,promise:ie}=this.eventManagers[_];return Z?Promise.resolve(Z):(ye(ie,"If manager is not set, promise should be"),ie)}const S=this.initAndGetManager(p);return this.eventManagers[_]={promise:S},S.catch(()=>{delete this.eventManagers[_]}),S}initAndGetManager(p){var _=this;return(0,A.Z)(function*(){const S=yield function ud(E){return ld.apply(this,arguments)}(p),Z=new _a(p);return S.register("authEvent",ie=>(G(ie?.authEvent,p,"invalid-auth-event"),{status:Z.onEvent(ie.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:Z},_.iframes[p._key()]=S,Z})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(ql,{type:ql},Z=>{var ie;const Ne=null===(ie=Z?.[0])||void 0===ie?void 0:ie[ql];void 0!==Ne&&_(!!Ne),ft(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ec(E){return Xu.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Ir()||Ft()||Se()}};class Bo{constructor(p){this.factorId=p}_process(p,_,S){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,S);case"signin":return this._finalizeSignIn(p,_.credential);default:return Xe("unexpected MultiFactorSessionType")}}}class al extends Bo{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new al(p)}_finalizeEnroll(p,_,S){return function hu(E,p){return bn(E,"POST","/v2/accounts/mfaEnrollment:finalize",nn(E,p))}(p,{idToken:_,displayName:S,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function Zu(E,p){return bn(E,"POST","/v2/accounts/mfaSignIn:finalize",nn(E,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Va=(()=>{class E{constructor(){}static assertion(_){return al._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var ji="@firebase/auth";class jd{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,A.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(S=>{p(S?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);_&&(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function oo(){return window}function Mc(){return(Mc=(0,A.Z)(function*(E,p,_){var S;const{BuildInfo:Z}=oo();ye(p.sessionId,"AuthEvent did not contain a session ID");const ie=yield Hd(p.sessionId),Ne={};return Se()?Ne.ibi=Z.packageName:ve()?Ne.apn=Z.packageName:ft(E,"operation-not-supported-in-this-environment"),Z.displayName&&(Ne.appDisplayName=Z.displayName),Ne.sessionId=ie,so(E,_,p.type,void 0,null!==(S=p.eventId)&&void 0!==S?S:void 0,Ne)})).apply(this,arguments)}function Yl(){return(Yl=(0,A.Z)(function*(E){const{BuildInfo:p}=oo(),_={};Se()?_.iosBundleId=p.packageName:ve()?_.androidPackageName=p.packageName:ft(E,"operation-not-supported-in-this-environment"),yield Fr(E,_)})).apply(this,arguments)}function ul(){return(ul=(0,A.Z)(function*(E,p,_){const{cordova:S}=oo();let Z=()=>{};try{yield new Promise((ie,Ne)=>{let tt=null;function Ut(){var Rn;ie();const ks=null===(Rn=S.plugins.browsertab)||void 0===Rn?void 0:Rn.close;"function"==typeof ks&&ks(),"function"==typeof _?.close&&_.close()}function Yt(){tt||(tt=window.setTimeout(()=>{Ne(st(E,"redirect-cancelled-by-user"))},2e3))}function In(){"visible"===document?.visibilityState&&Yt()}p.addPassiveListener(Ut),document.addEventListener("resume",Yt,!1),ve()&&document.addEventListener("visibilitychange",In,!1),Z=()=>{p.removePassiveListener(Ut),document.removeEventListener("resume",Yt,!1),document.removeEventListener("visibilitychange",In,!1),tt&&window.clearTimeout(tt)}})}finally{Z()}})).apply(this,arguments)}function Hd(E){return Al.apply(this,arguments)}function Al(){return(Al=(0,A.Z)(function*(E){const p=xl(E),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(Z=>Z.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function xl(E){if(ye(/[0-9a-zA-Z]+/.test(E),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(E);const p=new ArrayBuffer(E.length),_=new Uint8Array(p);for(let S=0;S<E.length;S++)_[S]=E.charCodeAt(S);return _}(0,U.Pz)("authIdTokenMaxAge"),function Kl(E){(0,Ae._registerComponent)(new Le.wA("auth",(p,{options:_})=>{const S=p.getProvider("app").getImmediate(),Z=p.getProvider("heartbeat"),{apiKey:ie,authDomain:Ne}=S.options;return((tt,Ut)=>{G(ie&&!ie.includes(":"),"invalid-api-key",{appName:tt.name}),G(!Ne?.includes(":"),"argument-error",{appName:tt.name});const Yt={apiKey:ie,authDomain:Ne,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ls(E)},In=new ra(tt,Ut,Yt);return function Ke(E,p){const _=p?.persistence||[],S=(Array.isArray(_)?_:[_]).map(se);p?.errorMap&&E._updateErrorMap(p.errorMap),E._initializeWithPersistence(S,p?.popupRedirectResolver)}(In,_),In})(S,Z)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,S)=>{p.getProvider("auth-internal").initialize()})),(0,Ae._registerComponent)(new Le.wA("auth-internal",p=>{const _=mr(p.getProvider("auth").getImmediate());return new jd(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ae.registerVersion)(ji,"0.21.4",function Jo(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,Ae.registerVersion)(ji,"0.21.4","esm2017")}("Browser");class Ba extends _a{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,A.Z)(function*(){yield p.initPromise})()}}function Jl(E){return cl.apply(this,arguments)}function cl(){return(cl=(0,A.Z)(function*(E){const p=yield Nu()._get(Pc(E));return p&&(yield Nu()._remove(Pc(E))),p})).apply(this,arguments)}function Hh(){const E=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const S=Math.floor(Math.random()*p.length);E.push(p.charAt(S))}return E.join("")}function Nu(){return se(lr)}function Pc(E){return fe("authEvent",E.config.apiKey,E.name)}function dl(E){if(!E?.includes("?"))return{};const[p,..._]=E.split("?");return(0,U.zd)(_.join("?"))}const gd=class ja{constructor(){this._redirectPersistence=Xn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Sn,this._overrideRedirectResult=Kt}_initialize(p){var _=this;return(0,A.Z)(function*(){const S=p._key();let Z=_.eventManagers.get(S);return Z||(Z=new Ba(p),_.eventManagers.set(S,Z),_.attachCallbackListeners(p,Z)),Z})()}_openPopup(p){ft(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,S,Z){var ie=this;return(0,A.Z)(function*(){!function pd(E){var p,_,S,Z,ie,Ne,tt,Ut,Yt,In;const Rn=oo();G("function"==typeof(null===(p=Rn?.universalLinks)||void 0===p?void 0:p.subscribe),E,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof(null===(_=Rn?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(ie=null===(Z=null===(S=Rn?.cordova)||void 0===S?void 0:S.plugins)||void 0===Z?void 0:Z.browsertab)||void 0===ie?void 0:ie.openUrl),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(Ut=null===(tt=null===(Ne=Rn?.cordova)||void 0===Ne?void 0:Ne.plugins)||void 0===tt?void 0:tt.browsertab)||void 0===Ut?void 0:Ut.isAvailable),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(In=null===(Yt=Rn?.cordova)||void 0===Yt?void 0:Yt.InAppBrowser)||void 0===In?void 0:In.open),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const Ne=yield ie._initialize(p);yield Ne.initialized(),Ne.resetRedirect(),function sn(){P.clear()}(),yield ie._originValidation(p);const tt=function Nc(E,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:Hh(),postBody:null,tenantId:E.tenantId,error:st(E,"no-auth-event")}}(p,S,Z);yield function Xl(E,p){return Nu()._set(Pc(E),p)}(p,tt);const Ut=yield function xc(E,p,_){return Mc.apply(this,arguments)}(p,tt,_),Yt=yield function Ql(E){const{cordova:p}=oo();return new Promise(_=>{p.plugins.browsertab.isAvailable(S=>{let Z=null;S?p.plugins.browsertab.openUrl(E):Z=p.InAppBrowser.open(E,function gt(E=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}()?"_blank":"_system","location=yes"),_(Z)})})}(Ut);return function fd(E,p,_){return ul.apply(this,arguments)}(p,Ne,Yt)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Rc(E){return Yl.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:S,handleOpenURL:Z,BuildInfo:ie}=oo(),Ne=setTimeout((0,A.Z)(function*(){yield Jl(p),_.onEvent(kc())}),500),tt=function(){var In=(0,A.Z)(function*(Rn){clearTimeout(Ne);const ks=yield Jl(p);let mu=null;ks&&Rn?.url&&(mu=function Ml(E,p){var _,S;const Z=function Oc(E){const p=dl(E),_=p.link?decodeURIComponent(p.link):void 0,S=dl(_).link,Z=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return dl(Z).link||Z||S||_||E}(p);if(Z.includes("/__/auth/callback")){const ie=dl(Z),Ne=ie.firebaseError?function Gd(E){try{return JSON.parse(E)}catch{return null}}(decodeURIComponent(ie.firebaseError)):null,tt=null===(S=null===(_=Ne?.code)||void 0===_?void 0:_.split("auth/"))||void 0===S?void 0:S[1],Ut=tt?st(tt):null;return Ut?{type:E.type,eventId:E.eventId,tenantId:E.tenantId,error:Ut,urlResponse:null,sessionId:null,postBody:null}:{type:E.type,eventId:E.eventId,tenantId:E.tenantId,sessionId:E.sessionId,urlResponse:Z,postBody:null}}return null}(ks,Rn.url)),_.onEvent(mu||kc())});return function(ks){return In.apply(this,arguments)}}();typeof S<"u"&&"function"==typeof S.subscribe&&S.subscribe(null,tt);const Ut=Z,Yt=`${ie.packageName.toLowerCase()}://`;oo().handleOpenURL=function(){var In=(0,A.Z)(function*(Rn){if(Rn.toLowerCase().startsWith(Yt)&&tt({url:Rn}),"function"==typeof Ut)try{Ut(Rn)}catch(ks){console.error(ks)}});return function(Rn){return In.apply(this,arguments)}}()}};function kc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:st("no-auth-event")}}function Rl(){var E;return(null===(E=self?.location)||void 0===E?void 0:E.protocol)||null}function _d(E=(0,U.z$)()){return!("file:"!==Rl()&&"ionic:"!==Rl()&&"capacitor:"!==Rl()||!E.toLowerCase().match(/iphone|ipad|ipod|android/))}function li(){try{const E=self.localStorage,p=or();if(E)return E.setItem(p,"1"),E.removeItem(p),!function tc(E=(0,U.z$)()){return function Ou(){return(0,U.w1)()&&11===document?.documentMode}()||function fl(E=(0,U.z$)()){return/Edge\/\d+/.test(E)}(E)}()||(0,U.hl)()}catch{return ya()&&(0,U.hl)()}return!1}function ya(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ru(){return(function md(){return"http:"===Rl()||"https:"===Rl()}()||(0,U.ru)()||_d())&&!function nu(){return(0,U.b$)()||(0,U.UG)()}()&&li()&&!ya()}function nc(){return _d()&&typeof document<"u"}function xt(){return(xt=(0,A.Z)(function*(){return!!nc()&&new Promise(E=>{const p=setTimeout(()=>{E(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),E(!0)})})})).apply(this,arguments)}const Os={LOCAL:"local",NONE:"none",SESSION:"session"},Au=G,ln="persistence";function Wd(E){return zt.apply(this,arguments)}function zt(){return(zt=(0,A.Z)(function*(E){yield E._initializationPromise;const p=bt(),_=fe(ln,E.config.apiKey,E.name);p&&p.setItem(_,E._getPersistence())})).apply(this,arguments)}function bt(){var E;try{return(null===(E=function Is(){return typeof window<"u"?window:null}())||void 0===E?void 0:E.sessionStorage)||null}catch{return null}}const as=G;class gu{constructor(){this.browserResolver=se(Sc),this.cordovaResolver=se(gd),this.underlyingResolver=null,this._redirectPersistence=Xn,this._completeRedirectFn=Sn,this._overrideRedirectResult=Kt}_initialize(p){var _=this;return(0,A.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,S,Z){var ie=this;return(0,A.Z)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._openPopup(p,_,S,Z)})()}_openRedirect(p,_,S,Z){var ie=this;return(0,A.Z)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._openRedirect(p,_,S,Z)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return nc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return as(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,A.Z)(function*(){if(p.underlyingResolver)return;const _=yield function ku(){return xt.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function yd(E){return E.unwrap()}function vd(E){return qd(E)}function qd(E){const{_tokenResponse:p}=E instanceof U.ZR?E.customData:E;if(!p)return null;if(!(E instanceof U.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return ga.credentialFromResult(E);const _=p.providerId;if(!_||"password"===_)return null;let S;switch(_){case"google.com":S=Bs;break;case"facebook.com":S=uo;break;case"github.com":S=ba;break;case"twitter.com":S=zu;break;default:const{oauthIdToken:Z,oauthAccessToken:ie,oauthTokenSecret:Ne,pendingToken:tt,nonce:Ut}=p;return ie||Ne||Z||tt?tt?_.startsWith("saml.")?co._create(_,tt):Ue._fromParams({providerId:_,signInMethod:_,pendingToken:tt,idToken:Z,accessToken:ie}):new As(_).credential({idToken:Z,accessToken:ie,rawNonce:Ut}):null}return E instanceof U.ZR?S.credentialFromError(E):S.credentialFromResult(E)}function Wi(E,p){return p.catch(_=>{throw _ instanceof U.ZR&&function pl(E,p){var _;const S=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new Kd(E,function is(E,p){var _;const S=(0,U.m9)(E),Z=p;return G(p.customData.operationType,S,"argument-error"),G(null===(_=Z.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,S,"argument-error"),Ni._fromError(S,Z)}(E,p));else if(S){const Z=qd(p),ie=p;Z&&(ie.credential=Z,ie.tenantId=S.tenantId||void 0,ie.email=S.email||void 0,ie.phoneNumber=S.phoneNumber||void 0)}}(E,_),_}).then(_=>{const Z=_.user;return{operationType:_.operationType,credential:vd(_),additionalUserInfo:Cu(_),user:Fu.getOrCreate(Z)}})}function Zd(E,p){return zh.apply(this,arguments)}function zh(){return(zh=(0,A.Z)(function*(E,p){const _=yield p;return{verificationId:_.verificationId,confirm:S=>Wi(E,_.confirm(S))}})).apply(this,arguments)}class Kd{constructor(p,_){this.resolver=_,this.auth=function Fc(E){return E.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Wi(yd(this.auth),this.resolver.resolveSignIn(p))}}class Fu{constructor(p){this._delegate=p,this.multiFactor=function K(E){const p=(0,U.m9)(E);return O.has(p)||O.set(p,Hs._fromUser(p)),O.get(p)}(p)}static getOrCreate(p){return Fu.USER_MAP.has(p)||Fu.USER_MAP.set(p,new Fu(p)),Fu.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,A.Z)(function*(){return Wi(_.auth,Mi(_._delegate,p))})()}linkWithPhoneNumber(p,_){var S=this;return(0,A.Z)(function*(){return Zd(S.auth,function gi(E,p,_){return Xi.apply(this,arguments)}(S._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,A.Z)(function*(){return Wi(_.auth,function wc(E,p,_){return b.apply(this,arguments)}(_._delegate,p,gu))})()}linkWithRedirect(p){var _=this;return(0,A.Z)(function*(){return yield Wd(mr(_.auth)),function Pe(E,p,_){return function je(E,p,_){return It.apply(this,arguments)}(E,p,_)}(_._delegate,p,gu)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,A.Z)(function*(){return Wi(_.auth,sa(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return Zd(this.auth,function os(E,p,_){return Fo.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return Wi(this.auth,function Cl(E,p,_){return bl.apply(this,arguments)}(this._delegate,p,gu))}reauthenticateWithRedirect(p){var _=this;return(0,A.Z)(function*(){return yield Wd(mr(_.auth)),function H(E,p,_){return function J(E,p,_){return he.apply(this,arguments)}(E,p,_)}(_._delegate,p,gu)})()}sendEmailVerification(p){return function Wo(E,p){return _o.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,A.Z)(function*(){return yield function Gi(E,p){return So.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function no(E,p){return ys((0,U.m9)(E),p,null)}(this._delegate,p)}updatePassword(p){return function No(E,p){return ys((0,U.m9)(E),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Xa(E,p){return wo.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function to(E,p){return yo.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function ca(E,p,_){return oi.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fu.USER_MAP=new WeakMap;const Hn=G;let Lu=(()=>{class E{constructor(_,S){if(this.app=_,S.isInitialized())return this._delegate=S.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Z}=_.options;Hn(Z,"invalid-api-key",{appName:_.name}),Hn(Z,"invalid-api-key",{appName:_.name});const ie=typeof window<"u"?gu:void 0;this._delegate=S.initialize({options:{persistence:qi(Z,_.name),popupRedirectResolver:ie}}),this._delegate._updateErrorMap(At),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,S){!function Do(E,p,_){const S=mr(E);G(S._canInitEmulator,S,"emulator-config-failed"),G(/^https?:\/\//.test(p),S,"invalid-emulator-scheme");const Z=!!_?.disableWarnings,ie=Js(p),{host:Ne,port:tt}=function Zi(E){const p=Js(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(p.length));if(!_)return{host:"",port:null};const S=_[2].split("@").pop()||"",Z=/^(\[[^\]]+\])(:|$)/.exec(S);if(Z){const ie=Z[1];return{host:ie,port:ur(S.substr(ie.length+1))}}{const[ie,Ne]=S.split(":");return{host:ie,port:ur(Ne)}}}(p);S.config.emulator={url:`${ie}//${Ne}${null===tt?"":`:${tt}`}/`},S.settings.appVerificationDisabledForTesting=!0,S.emulatorConfig=Object.freeze({host:Ne,port:tt,protocol:ie.replace(":",""),options:Object.freeze({disableWarnings:Z})}),Z||function Wr(){function E(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}(this._delegate,_,S)}applyActionCode(_){return function Go(E,p){return ti.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return aa(this._delegate,_)}confirmPasswordReset(_,S){return function Da(E,p,_){return gn.apply(this,arguments)}(this._delegate,_,S)}createUserWithEmailAndPassword(_,S){var Z=this;return(0,A.Z)(function*(){return Wi(Z._delegate,function ua(E,p,_){return ms.apply(this,arguments)}(Z._delegate,_,S))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Wa(E,p){return la.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Ms(E,p){return"EMAIL_SIGNIN"===au.parseLink(p)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,A.Z)(function*(){Hn(ru(),_._delegate,"operation-not-supported-in-this-environment");const S=yield function mn(E,p){return wn.apply(this,arguments)}(_._delegate,gu);return S?Wi(_._delegate,Promise.resolve(S)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function ec(E,p){mr(E)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,S,Z){const{next:ie,error:Ne,complete:tt}=Lc(_,S,Z);return this._delegate.onAuthStateChanged(ie,Ne,tt)}onIdTokenChanged(_,S,Z){const{next:ie,error:Ne,complete:tt}=Lc(_,S,Z);return this._delegate.onIdTokenChanged(ie,Ne,tt)}sendSignInLinkToEmail(_,S){return function cr(E,p,_){return Sa.apply(this,arguments)}(this._delegate,_,S)}sendPasswordResetEmail(_,S){return function yi(E,p,_){return On.apply(this,arguments)}(this._delegate,_,S||void 0)}setPersistence(_){var S=this;return(0,A.Z)(function*(){let Z;switch(function En(E,p){Au(Object.values(Os).includes(p),E,"invalid-persistence-type"),(0,U.b$)()?Au(p!==Os.SESSION,E,"unsupported-persistence-type"):(0,U.UG)()?Au(p===Os.NONE,E,"unsupported-persistence-type"):ya()?Au(p===Os.NONE||p===Os.LOCAL&&(0,U.hl)(),E,"unsupported-persistence-type"):Au(p===Os.NONE||li(),E,"unsupported-persistence-type")}(S._delegate,_),_){case Os.SESSION:Z=Xn;break;case Os.LOCAL:Z=(yield se(pa)._isAvailable())?pa:lr;break;case Os.NONE:Z=me;break;default:return ft("argument-error",{appName:S._delegate.name})}return S._delegate.setPersistence(Z)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Wi(this._delegate,function uu(E){return Ho.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Wi(this._delegate,Dr(this._delegate,_))}signInWithCustomToken(_){return Wi(this._delegate,function oa(E,p){return Ri.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,S){return Wi(this._delegate,function Je(E,p,_){return Dr((0,U.m9)(E),Yi.credential(p,_))}(this._delegate,_,S))}signInWithEmailLink(_,S){return Wi(this._delegate,function Qi(E,p,_){return mo.apply(this,arguments)}(this._delegate,_,S))}signInWithPhoneNumber(_,S){return Zd(this._delegate,function un(E,p,_){return Yr.apply(this,arguments)}(this._delegate,_,S))}signInWithPopup(_){var S=this;return(0,A.Z)(function*(){return Hn(ru(),S._delegate,"operation-not-supported-in-this-environment"),Wi(S._delegate,function ma(E,p,_){return Ja.apply(this,arguments)}(S._delegate,_,gu))})()}signInWithRedirect(_){var S=this;return(0,A.Z)(function*(){return Hn(ru(),S._delegate,"operation-not-supported-in-this-environment"),yield Wd(S._delegate),function Ks(E,p,_){return function Eo(E,p,_){return L.apply(this,arguments)}(E,p,_)}(S._delegate,_,gu)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function go(E,p){return za.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return E.Persistence=Os,E})();function Lc(E,p,_){let S=E;"function"!=typeof E&&({next:S,error:p,complete:_}=E);const Z=S;return{next:Ne=>Z(Ne&&Fu.getOrCreate(Ne)),error:p,complete:_}}function qi(E,p){const _=function Ye(E,p){const _=bt();if(!_)return[];const S=fe(ln,E,p);switch(_.getItem(S)){case Os.NONE:return[me];case Os.LOCAL:return[pa,Xn];case Os.SESSION:return[Xn];default:return[]}}(E,p);if(typeof self<"u"&&!_.includes(pa)&&_.push(pa),typeof window<"u")for(const S of[lr,Xn])_.includes(S)||_.push(S);return _.includes(me)||_.push(me),_}class Mn{constructor(){this.providerId="phone",this._delegate=new ga(yd(y.Z.auth()))}static credential(p,_){return ga.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}Mn.PHONE_SIGN_IN_METHOD=ga.PHONE_SIGN_IN_METHOD,Mn.PROVIDER_ID=ga.PROVIDER_ID;const rc=G;class _r{constructor(p,_,S=y.Z.app()){var Z;rc(null===(Z=S.options)||void 0===Z?void 0:Z.apiKey,"invalid-api-key",{appName:S.name}),this._delegate=new de(p,_,S.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Cs(E){E.INTERNAL.registerComponent(new Le.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),S=p.getProvider("auth");return new Lu(_,S)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Yi,FacebookAuthProvider:uo,GithubAuthProvider:ba,GoogleAuthProvider:Bs,OAuthProvider:As,SAMLAuthProvider:ps,PhoneAuthProvider:Mn,PhoneMultiFactorGenerator:Va,RecaptchaVerifier:_r,TwitterAuthProvider:zu,Auth:Lu,AuthCredential:kr,Error:U.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),E.registerVersion("@firebase/auth-compat","0.3.4")}(y.Z)},8766:(qt,We,Y)=>{Y.d(We,{Lj:()=>ft,X3:()=>Et});var A=Y(5861);let U,Ae;const Le=new WeakMap,Fe=new WeakMap,Ve=new WeakMap,ge=new WeakMap,pe=new WeakMap;let ht={get(G,Xe,ye){if(G instanceof IDBTransaction){if("done"===Xe)return Fe.get(G);if("objectStoreNames"===Xe)return G.objectStoreNames||Ve.get(G);if("store"===Xe)return ye.objectStoreNames[1]?void 0:ye.objectStore(ye.objectStoreNames[0])}return at(G[Xe])},set:(G,Xe,ye)=>(G[Xe]=ye,!0),has:(G,Xe)=>G instanceof IDBTransaction&&("done"===Xe||"store"===Xe)||Xe in G};function qe(G){return"function"==typeof G?function Qt(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xe(){return Ae||(Ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(...Xe){return G.apply(ot(this),Xe),at(Le.get(this))}:function(...Xe){return at(G.apply(ot(this),Xe))}:function(Xe,...ye){const Ce=G.call(ot(this),Xe,...ye);return Ve.set(Ce,Xe.sort?Xe.sort():[Xe]),at(Ce)}}(G):(G instanceof IDBTransaction&&function yt(G){if(Fe.has(G))return;const Xe=new Promise((ye,Ce)=>{const se=()=>{G.removeEventListener("complete",ke),G.removeEventListener("error",Ke),G.removeEventListener("abort",Ke)},ke=()=>{ye(),se()},Ke=()=>{Ce(G.error||new DOMException("AbortError","AbortError")),se()};G.addEventListener("complete",ke),G.addEventListener("error",Ke),G.addEventListener("abort",Ke)});Fe.set(G,Xe)}(G),((G,Xe)=>Xe.some(ye=>G instanceof ye))(G,function De(){return U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,ht):G)}function at(G){if(G instanceof IDBRequest)return function Te(G){const Xe=new Promise((ye,Ce)=>{const se=()=>{G.removeEventListener("success",ke),G.removeEventListener("error",Ke)},ke=()=>{ye(at(G.result)),se()},Ke=()=>{Ce(G.error),se()};G.addEventListener("success",ke),G.addEventListener("error",Ke)});return Xe.then(ye=>{ye instanceof IDBCursor&&Le.set(ye,G)}).catch(()=>{}),pe.set(Xe,G),Xe}(G);if(ge.has(G))return ge.get(G);const Xe=qe(G);return Xe!==G&&(ge.set(G,Xe),pe.set(Xe,G)),Xe}const ot=G=>pe.get(G);function Et(G,Xe,{blocked:ye,upgrade:Ce,blocking:se,terminated:ke}={}){const Ke=indexedDB.open(G,Xe),Tt=at(Ke);return Ce&&Ke.addEventListener("upgradeneeded",St=>{Ce(at(Ke.result),St.oldVersion,St.newVersion,at(Ke.transaction))}),ye&&Ke.addEventListener("blocked",()=>ye()),Tt.then(St=>{ke&&St.addEventListener("close",()=>ke()),se&&St.addEventListener("versionchange",()=>se())}).catch(()=>{}),Tt}function ft(G,{blocked:Xe}={}){const ye=indexedDB.deleteDatabase(G);return Xe&&ye.addEventListener("blocked",()=>Xe()),at(ye).then(()=>{})}const st=["get","getKey","getAll","getAllKeys","count"],rt=["put","add","delete","clear"],Ct=new Map;function vt(G,Xe){if(!(G instanceof IDBDatabase)||Xe in G||"string"!=typeof Xe)return;if(Ct.get(Xe))return Ct.get(Xe);const ye=Xe.replace(/FromIndex$/,""),Ce=Xe!==ye,se=rt.includes(ye);if(!(ye in(Ce?IDBIndex:IDBObjectStore).prototype)||!se&&!st.includes(ye))return;const ke=function(){var Ke=(0,A.Z)(function*(Tt,...St){const Ot=this.transaction(Tt,se?"readwrite":"readonly");let dn=Ot.store;return Ce&&(dn=dn.index(St.shift())),(yield Promise.all([dn[ye](...St),se&&Ot.done]))[0]});return function(St){return Ke.apply(this,arguments)}}();return Ct.set(Xe,ke),ke}!function At(G){ht=G(ht)}(G=>({...G,get:(Xe,ye,Ce)=>vt(Xe,ye)||G.get(Xe,ye,Ce),has:(Xe,ye)=>!!vt(Xe,ye)||G.has(Xe,ye)}))},5861:(qt,We,Y)=>{function A(U,Ae,De,xe,Le,Fe,Ve){try{var ge=U[Fe](Ve),pe=ge.value}catch(Te){return void De(Te)}ge.done?Ae(pe):Promise.resolve(pe).then(xe,Le)}function y(U){return function(){var Ae=this,De=arguments;return new Promise(function(xe,Le){var Fe=U.apply(Ae,De);function Ve(pe){A(Fe,xe,Le,Ve,ge,"next",pe)}function ge(pe){A(Fe,xe,Le,Ve,ge,"throw",pe)}Ve(void 0)})}}Y.d(We,{Z:()=>y})}},qt=>{qt(qt.s=2417)}]);
"use strict";(self.webpackChunkmyApp=self.webpackChunkmyApp||[]).push([[179],{2011:(at,Te,F)=>{F.d(Te,{Dh:()=>fe,GT:()=>ne,cc:()=>Ae,hO:()=>Be,on:()=>H,pX:()=>oe,xv:()=>de});var c=F(4650),J=F(9260),O=F(2122);at=F.hmd(at);const ae=["ngOnDestroy"],oe=(De,Se,Oe,Re={})=>new Proxy(De,{get:(Ce,xe)=>Oe.runOutsideAngular(()=>{var Ve;if(De[xe])return!(null===(Ve=Re?.spy)||void 0===Ve)&&Ve.get&&Re.spy.get(xe,De[xe]),De[xe];if(ae.indexOf(xe)>-1)return()=>{};const Pe=Se.toPromise().then(G=>{const Ie=G&&G[xe];return"function"==typeof Ie?Ie.bind(G):Ie&&Ie.then?Ie.then(Z=>Oe.run(()=>Z)):Oe.run(()=>Ie)});return new Proxy(()=>{},{get:(G,Ie)=>Pe[Ie],apply:(G,Ie,Z)=>Pe.then(X=>{var ie;const re=X&&X(...Z);return!(null===(ie=Re?.spy)||void 0===ie)&&ie.apply&&Re.spy.apply(xe,Z,re),re})})})}),ne=(De,Se)=>{Se.forEach(Oe=>{Object.getOwnPropertyNames(Oe.prototype||Oe).forEach(Re=>{Object.defineProperty(De.prototype,Re,Object.getOwnPropertyDescriptor(Oe.prototype||Oe,Re))})})};class me{constructor(Se){return Se}}const fe=new c.OlP("angularfire2.app.options"),de=new c.OlP("angularfire2.app.name");function H(De,Se,Oe){const Ce="object"==typeof Oe&&Oe||{};Ce.name=Ce.name||"string"==typeof Oe&&Oe||"[DEFAULT]";const Ve=J.Z.apps.filter(Pe=>Pe&&Pe.name===Ce.name)[0]||Se.runOutsideAngular(()=>J.Z.initializeApp(De,Ce));try{JSON.stringify(De)!==JSON.stringify(Ve.options)&&q("error",`${Ve.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(Ve)}const q=(De,...Se)=>{(0,c.X6Q)()&&typeof console<"u"&&console[De](...Se)},Y={provide:me,useFactory:H,deps:[fe,c.R0b,[new c.FiY,de]]};let Be=(()=>{class De{constructor(Oe){J.Z.registerVersion("angularfire",O.q4.full,"core"),J.Z.registerVersion("angularfire",O.q4.full,"app-compat"),J.Z.registerVersion("angular",c.q4F.full,Oe.toString())}static initializeApp(Oe,Re){return{ngModule:De,providers:[{provide:fe,useValue:Oe},{provide:de,useValue:Re}]}}}return De.\u0275fac=function(Oe){return new(Oe||De)(c.LFG(c.Lbi))},De.\u0275mod=c.oAB({type:De}),De.\u0275inj=c.cJS({providers:[Y]}),De})();function Ae(De,Se,Oe,Re,Ce){const[,xe,Ve]=globalThis.\u0275AngularfireInstanceCache.find(Pe=>Pe[0]===De)||[];if(xe)return function He(De,Se){try{return De.toString()===Se.toString()}catch{return De===Se}}(Ce,Ve)||(pe("error",`${Se} was already initialized on the ${Oe} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ce,was:Ve})),xe;{const Pe=Re();return globalThis.\u0275AngularfireInstanceCache.push([De,Pe,Ce]),Pe}}const nt=!!at.hot,pe=(De,...Se)=>{(0,c.X6Q)()&&typeof console<"u"&&console[De](...Se)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(at,Te,F)=>{F.d(Te,{q4:()=>Ku,iC:()=>qa,fc:()=>$f,HU:()=>Li,vb:()=>en,JM:()=>zr});var c=F(4650),J=F(259),O=F(5861),ae=F(9681),oe=F(2090),ne=F(4859),me=F(1877),fe=F(8766);const de="@firebase/installations",H="0.6.4",Y=`w:${H}`,Be="FIS_v2",Se=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Oe(T){return T instanceof oe.ZR&&T.code.includes("request-failed")}function Re({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Ce(T){return{token:T.token,requestStatus:2,expiresIn:X(T.expiresIn),creationTime:Date.now()}}function xe(T,D){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,O.Z)(function*(T,D){const V=(yield D.json()).error;return Se.create("request-failed",{requestName:T,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Pe({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function G(T,{refreshToken:D}){const R=Pe(T);return R.append("Authorization",function ie(T){return`${Be} ${T}`}(D)),R}function Ie(T){return Z.apply(this,arguments)}function Z(){return(Z=(0,O.Z)(function*(T){const D=yield T();return D.status>=500&&D.status<600?T():D})).apply(this,arguments)}function X(T){return Number(T.replace("s","000"))}function re(T,D){return Le.apply(this,arguments)}function Le(){return(Le=(0,O.Z)(function*({appConfig:T,heartbeatServiceProvider:D},{fid:R}){const V=Re(T),Q=Pe(T),te=D.getImmediate({optional:!0});if(te){const rt=yield te.getHeartbeatsHeader();rt&&Q.append("x-firebase-client",rt)}const Qe={method:"POST",headers:Q,body:JSON.stringify({fid:R,authVersion:Be,appId:T.appId,sdkVersion:Y})},it=yield Ie(()=>fetch(V,Qe));if(it.ok){const rt=yield it.json();return{fid:rt.fid||R,registrationStatus:2,refreshToken:rt.refreshToken,authToken:Ce(rt.authToken)}}throw yield xe("Create Installation",it)})).apply(this,arguments)}function ke(T){return new Promise(D=>{setTimeout(D,T)})}const nn=/^[cdef][\w-]{21}$/;function Nt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const R=function Ut(T){return function ut(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return nn.test(R)?R:""}catch{return""}}function _t(T){return`${T.appName}!${T.appId}`}const Kt=new Map;function pr(T,D){const R=_t(T);hn(R,D),function cs(T,D){const R=function Lr(){return!ar&&"BroadcastChannel"in self&&(ar=new BroadcastChannel("[Firebase] FID Change"),ar.onmessage=T=>{hn(T.data.key,T.data.fid)}),ar}();R&&R.postMessage({key:T,fid:D}),function Ur(){0===Kt.size&&ar&&(ar.close(),ar=null)}()}(R,D)}function hn(T,D){const R=Kt.get(T);if(R)for(const V of R)V(D)}let ar=null;const fi="firebase-installations-store";let Vr=null;function Os(){return Vr||(Vr=(0,fe.X3)("firebase-installations-database",1,{upgrade:(T,D)=>{0===D&&T.createObjectStore(fi)}})),Vr}function _n(T,D){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,O.Z)(function*(T,D){const R=_t(T),Q=(yield Os()).transaction(fi,"readwrite"),te=Q.objectStore(fi),we=yield te.get(R);return yield te.put(D,R),yield Q.done,(!we||we.fid!==D.fid)&&pr(T,D.fid),D})).apply(this,arguments)}function lt(T){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,O.Z)(function*(T){const D=_t(T),V=(yield Os()).transaction(fi,"readwrite");yield V.objectStore(fi).delete(D),yield V.done})).apply(this,arguments)}function Ai(T,D){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,O.Z)(function*(T,D){const R=_t(T),Q=(yield Os()).transaction(fi,"readwrite"),te=Q.objectStore(fi),we=yield te.get(R),Qe=D(we);return void 0===Qe?yield te.delete(R):yield te.put(Qe,R),yield Q.done,Qe&&(!we||we.fid!==Qe.fid)&&pr(T,Qe.fid),Qe})).apply(this,arguments)}function br(T){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,O.Z)(function*(T){let D;const R=yield Ai(T.appConfig,V=>{const Q=xt(V),te=dt(T,Q);return D=te.registrationPromise,te.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function xt(T){return Dr(T||{fid:Nt(),registrationStatus:0})}function dt(T,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Se.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},V=function bt(T,D){return to.apply(this,arguments)}(T,R);return{installationEntry:R,registrationPromise:V}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:yn(T)}:{installationEntry:D}}function to(){return(to=(0,O.Z)(function*(T,D){try{const R=yield re(T,D);return _n(T.appConfig,R)}catch(R){throw Oe(R)&&409===R.customData.serverCode?yield lt(T.appConfig):yield _n(T.appConfig,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function yn(T){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(T){let D=yield Tr(T.appConfig);for(;1===D.registrationStatus;)yield ke(100),D=yield Tr(T.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:V}=yield br(T);return V||R}return D})).apply(this,arguments)}function Tr(T){return Ai(T,D=>{if(!D)throw Se.create("installation-not-found");return Dr(D)})}function Dr(T){return function Lo(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function on(T,D){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,O.Z)(function*({appConfig:T,heartbeatServiceProvider:D},R){const V=Yt(T,R),Q=G(T,R),te=D.getImmediate({optional:!0});if(te){const rt=yield te.getHeartbeatsHeader();rt&&Q.append("x-firebase-client",rt)}const Qe={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:Y,appId:T.appId}})},it=yield Ie(()=>fetch(V,Qe));if(it.ok)return Ce(yield it.json());throw yield xe("Generate Auth Token",it)})).apply(this,arguments)}function Yt(T,{fid:D}){return`${Re(T)}/${D}/authTokens:generate`}function Br(T){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,O.Z)(function*(T,D=!1){let R;const V=yield Ai(T.appConfig,te=>{if(!Ot(te))throw Se.create("not-registered");const we=te.authToken;if(!D&&Sr(we))return te;if(1===we.requestStatus)return R=$e(T,D),te;{if(!navigator.onLine)throw Se.create("app-offline");const Qe=B(te);return R=Ct(T,Qe),Qe}});return R?yield R:V.authToken})).apply(this,arguments)}function $e(T,D){return be.apply(this,arguments)}function be(){return(be=(0,O.Z)(function*(T,D){let R=yield Ke(T.appConfig);for(;1===R.authToken.requestStatus;)yield ke(100),R=yield Ke(T.appConfig);const V=R.authToken;return 0===V.requestStatus?Br(T,D):V})).apply(this,arguments)}function Ke(T){return Ai(T,D=>{if(!Ot(D))throw Se.create("not-registered");return function W(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ct(T,D){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,O.Z)(function*(T,D){try{const R=yield on(T,D),V=Object.assign(Object.assign({},D),{authToken:R});return yield _n(T.appConfig,V),R}catch(R){if(!Oe(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const V=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield _n(T.appConfig,V)}else yield lt(T.appConfig);throw R}})).apply(this,arguments)}function Ot(T){return void 0!==T&&2===T.registrationStatus}function Sr(T){return 2===T.requestStatus&&!function j(T){const D=Date.now();return D<T.creationTime||T.creationTime+T.expiresIn<D+36e5}(T)}function B(T){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:D})}function se(){return(se=(0,O.Z)(function*(T){const D=T,{installationEntry:R,registrationPromise:V}=yield br(D);return V?V.catch(console.error):Br(D).catch(console.error),R.fid})).apply(this,arguments)}function mt(){return(mt=(0,O.Z)(function*(T,D=!1){const R=T;return yield tn(R),(yield Br(R,D)).token})).apply(this,arguments)}function tn(T){return wt.apply(this,arguments)}function wt(){return(wt=(0,O.Z)(function*(T){const{registrationPromise:D}=yield br(T);D&&(yield D)})).apply(this,arguments)}function Eu(T){return Se.create("missing-app-config-values",{valueName:T})}const Ql="installations",An=T=>{const D=T.getProvider("app").getImmediate(),R=function ba(T){if(!T||!T.options)throw Eu("App Configuration");if(!T.name)throw Eu("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!T.options[R])throw Eu(R);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,ae._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Dd=T=>{const D=T.getProvider("app").getImmediate(),R=(0,ae._getProvider)(D,Ql).getImmediate();return{getId:()=>function ve(T){return se.apply(this,arguments)}(R),getToken:Q=>function et(T){return mt.apply(this,arguments)}(R,Q)}};(function Xl(){(0,ae._registerComponent)(new ne.wA(Ql,An,"PUBLIC")),(0,ae._registerComponent)(new ne.wA("installations-internal",Dd,"PRIVATE"))})(),(0,ae.registerVersion)(de,H),(0,ae.registerVersion)(de,H,"esm2017");const Ta="@firebase/remote-config",$n=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ro{constructor(D,R,V,Q){this.client=D,this.storage=R,this.storageCache=V,this.logger=Q}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-R,Q=V<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Q}.`),Q}fetch(D){var R=this;return(0,O.Z)(function*(){const[V,Q]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Q&&R.isCachedDataFresh(D.cacheMaxAgeMillis,V))return Q;D.eTag=Q&&Q.eTag;const te=yield R.client.fetch(D),we=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&we.push(R.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(we),te})()}}function Mi(T=navigator){return T.languages&&T.languages[0]||T.language}class Vs{constructor(D,R,V,Q,te,we){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=V,this.projectId=Q,this.apiKey=te,this.appId=we}fetch(D){var R=this;return(0,O.Z)(function*(){const[V,Q]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),we=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},it={sdk_version:R.sdkVersion,app_instance_id:V,app_instance_id_token:Q,app_id:R.appId,language_code:Mi()},rt={method:"POST",headers:Qe,body:JSON.stringify(it)},Mt=fetch(we,rt),Et=new Promise((ai,ui)=>{D.signal.addEventListener(()=>{const Wr=new Error("The operation was aborted.");Wr.name="AbortError",ui(Wr)})});let oi;try{yield Promise.race([Mt,Et]),oi=yield Mt}catch(ai){let ui="fetch-client-network";throw"AbortError"===ai?.name&&(ui="fetch-timeout"),$n.create(ui,{originalErrorMessage:ai?.message})}let Ln=oi.status;const vs=oi.headers.get("ETag")||void 0;let el,aa;if(200===oi.status){let ai;try{ai=yield oi.json()}catch(ui){throw $n.create("fetch-client-parse",{originalErrorMessage:ui?.message})}el=ai.entries,aa=ai.state}if("INSTANCE_STATE_UNSPECIFIED"===aa?Ln=500:"NO_CHANGE"===aa?Ln=304:("NO_TEMPLATE"===aa||"EMPTY_CONFIG"===aa)&&(el={}),304!==Ln&&200!==Ln)throw $n.create("fetch-status",{httpStatus:Ln});return{status:Ln,eTag:vs,config:el}})()}}class Xi{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,O.Z)(function*(){const V=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,V)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:V}){var Q=this;return(0,O.Z)(function*(){yield function hs(T,D){return new Promise((R,V)=>{const Q=Math.max(D-Date.now(),0),te=setTimeout(R,Q);T.addEventListener(()=>{clearTimeout(te),V($n.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const te=yield Q.client.fetch(D);return yield Q.storage.deleteThrottleMetadata(),te}catch(te){if(!function fn(T){if(!(T instanceof oe.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}(te))throw te;const we={throttleEndTimeMillis:Date.now()+(0,oe.$s)(V),backoffCount:V+1};return yield Q.storage.setThrottleMetadata(we),Q.attemptFetch(D,we)}})()}}class Bo{constructor(D,R,V,Q,te){this.app=D,this._client=R,this._storageCache=V,this._storage=Q,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function io(T,D){const R=T.target.error||void 0;return $n.create(D,{originalErrorMessage:R&&R?.message})}const $r="app_namespace_store";class Ni{constructor(D,R,V,Q=function ei(){return new Promise((T,D)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=V=>{D(io(V,"storage-open"))},R.onsuccess=V=>{T(V.target.result)},R.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore($r,{keyPath:"compositeKey"})}}catch(R){D($n.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=D,this.appName=R,this.namespace=V,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,O.Z)(function*(){const V=yield R.openDbPromise;return new Promise((Q,te)=>{const Qe=V.transaction([$r],"readonly").objectStore($r),it=R.createCompositeKey(D);try{const rt=Qe.get(it);rt.onerror=Mt=>{te(io(Mt,"storage-get"))},rt.onsuccess=Mt=>{const Et=Mt.target.result;Q(Et?Et.value:void 0)}}catch(rt){te($n.create("storage-get",{originalErrorMessage:rt?.message}))}})})()}set(D,R){var V=this;return(0,O.Z)(function*(){const Q=yield V.openDbPromise;return new Promise((te,we)=>{const it=Q.transaction([$r],"readwrite").objectStore($r),rt=V.createCompositeKey(D);try{const Mt=it.put({compositeKey:rt,value:R});Mt.onerror=Et=>{we(io(Et,"storage-set"))},Mt.onsuccess=()=>{te()}}catch(Mt){we($n.create("storage-set",{originalErrorMessage:Mt?.message}))}})})()}delete(D){var R=this;return(0,O.Z)(function*(){const V=yield R.openDbPromise;return new Promise((Q,te)=>{const Qe=V.transaction([$r],"readwrite").objectStore($r),it=R.createCompositeKey(D);try{const rt=Qe.delete(it);rt.onerror=Mt=>{te(io(Mt,"storage-delete"))},rt.onsuccess=()=>{Q()}}catch(rt){te($n.create("storage-delete",{originalErrorMessage:rt?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Sa{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const R=D.storage.getLastFetchStatus(),V=D.storage.getLastSuccessfulFetchTimestampMillis(),Q=D.storage.getActiveConfig(),te=yield R;te&&(D.lastFetchStatus=te);const we=yield V;we&&(D.lastSuccessfulFetchTimestampMillis=we);const Qe=yield Q;Qe&&(D.activeConfig=Qe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Aa(){return Af.apply(this,arguments)}function Af(){return(Af=(0,O.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function Pi(){(0,ae._registerComponent)(new ne.wA("remote-config",function T(D,{instanceIdentifier:R}){const V=D.getProvider("app").getImmediate(),Q=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw $n.create("registration-window");if(!(0,oe.hl)())throw $n.create("indexed-db-unavailable");const{projectId:te,apiKey:we,appId:Qe}=V.options;if(!te)throw $n.create("registration-project-id");if(!we)throw $n.create("registration-api-key");if(!Qe)throw $n.create("registration-app-id");const it=new Ni(Qe,V.name,R=R||"firebase"),rt=new Sa(it),Mt=new me.Yd(Ta);Mt.logLevel=me.in.ERROR;const Et=new Vs(Q,ae.SDK_VERSION,R,te,we,Qe),oi=new Xi(Et,it),Ln=new ro(oi,it,rt,Mt),vs=new Bo(V,Ln,rt,it,Mt);return function xn(T){const D=(0,oe.m9)(T);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(vs),vs},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Ta,"0.4.4"),(0,ae.registerVersion)(Ta,"0.4.4","esm2017")}();const nc="/firebase-messaging-sw.js",fs="/firebase-cloud-messaging-push-scope",jo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",rc="google.c.a.c_id",xd="google.c.a.c_l",xf="google.c.a.ts",Gg="google.c.a.e";var so=(()=>{return(T=so||(so={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",so;var T})();function Ji(T){const D=new Uint8Array(T);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qg(T){const R=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(R),Q=new Uint8Array(V.length);for(let te=0;te<V.length;++te)Q[te]=V.charCodeAt(te);return Q}const Ho="fcm_token_details_db",Hr="fcm_token_object_Store";function sc(T){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,O.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Ho))return null;let D=null;return(yield(0,fe.X3)(Ho,5,{upgrade:(V=(0,O.Z)(function*(Q,te,we,Qe){var it;if(te<2||!Q.objectStoreNames.contains(Hr))return;const rt=Qe.objectStore(Hr),Mt=yield rt.index("fcmSenderId").get(T);if(yield rt.clear(),Mt)if(2===te){const Et=Mt;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;D={token:Et.fcmToken,createTime:null!==(it=Et.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:Ji(Et.vapidKey)}}}else if(3===te){const Et=Mt;D={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Ji(Et.auth),p256dh:Ji(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Ji(Et.vapidKey)}}}else if(4===te){const Et=Mt;D={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Ji(Et.auth),p256dh:Ji(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Ji(Et.vapidKey)}}}}),function(te,we,Qe,it){return V.apply(this,arguments)})})).close(),yield(0,fe.Lj)(Ho),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),Rf(D)?D:null;var V}),Rd.apply(this,arguments)}function Rf(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:D}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const ao="firebase-messaging-store";let Cu=null;function Go(){return Cu||(Cu=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(T,D)=>{0===D&&T.createObjectStore(ao)}})),Cu}function bu(T){return qo.apply(this,arguments)}function qo(){return(qo=(0,O.Z)(function*(T){const D=Wo(T),V=yield(yield Go()).transaction(ao).objectStore(ao).get(D);if(V)return V;{const Q=yield sc(T.appConfig.senderId);if(Q)return yield uo(T,Q),Q}})).apply(this,arguments)}function uo(T,D){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,O.Z)(function*(T,D){const R=Wo(T),Q=(yield Go()).transaction(ao,"readwrite");return yield Q.objectStore(ao).put(D,R),yield Q.done,D})).apply(this,arguments)}function Md(T){return zo.apply(this,arguments)}function zo(){return(zo=(0,O.Z)(function*(T){const D=Wo(T),V=(yield Go()).transaction(ao,"readwrite");yield V.objectStore(ao).delete(D),yield V.done})).apply(this,arguments)}function Wo({appConfig:T}){return T.appId}const Mn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Tu(T,D){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,O.Z)(function*(T,D){const R=yield co(T),V=Ma(D),Q={method:"POST",headers:R,body:JSON.stringify(V)};let te;try{te=yield(yield fetch(Zo(T.appConfig),Q)).json()}catch(we){throw Mn.create("token-subscribe-failed",{errorInfo:we?.toString()})}if(te.error)throw Mn.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw Mn.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function Du(T,D){return lo.apply(this,arguments)}function lo(){return(lo=(0,O.Z)(function*(T,D){const R=yield co(T),V=Ma(D.subscriptionOptions),Q={method:"PATCH",headers:R,body:JSON.stringify(V)};let te;try{te=yield(yield fetch(`${Zo(T.appConfig)}/${D.token}`,Q)).json()}catch(we){throw Mn.create("token-update-failed",{errorInfo:we?.toString()})}if(te.error)throw Mn.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw Mn.create("token-update-no-token");return te.token})).apply(this,arguments)}function Gn(T,D){return oc.apply(this,arguments)}function oc(){return(oc=(0,O.Z)(function*(T,D){const V={method:"DELETE",headers:yield co(T)};try{const te=yield(yield fetch(`${Zo(T.appConfig)}/${D}`,V)).json();if(te.error)throw Mn.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(Q){throw Mn.create("token-unsubscribe-failed",{errorInfo:Q?.toString()})}})).apply(this,arguments)}function Zo({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function co(T){return ur.apply(this,arguments)}function ur(){return(ur=(0,O.Z)(function*({appConfig:T,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Ma({p256dh:T,auth:D,endpoint:R,vapidKey:V}){const Q={web:{endpoint:R,auth:D,p256dh:T}};return V!==jo&&(Q.web.applicationPubKey=V),Q}const Ko=6048e5;function Su(T){return ps.apply(this,arguments)}function ps(){return(ps=(0,O.Z)(function*(T){const D=yield ac(T.swRegistration,T.vapidKey),R={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:D.endpoint,auth:Ji(D.getKey("auth")),p256dh:Ji(D.getKey("p256dh"))},V=yield bu(T.firebaseDependencies);if(V){if(Ru(V.subscriptionOptions,R))return Date.now()>=V.createTime+Ko?At(T,{token:V.token,createTime:Date.now(),subscriptionOptions:R}):V.token;try{yield Gn(T.firebaseDependencies,V.token)}catch(Q){console.warn(Q)}return Nd(T.firebaseDependencies,R)}return Nd(T.firebaseDependencies,R)})).apply(this,arguments)}function Na(T){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,O.Z)(function*(T){const D=yield bu(T.firebaseDependencies);D&&(yield Gn(T.firebaseDependencies,D.token),yield Md(T.firebaseDependencies));const R=yield T.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function At(T,D){return Au.apply(this,arguments)}function Au(){return(Au=(0,O.Z)(function*(T,D){try{const R=yield Du(T.firebaseDependencies,D),V=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield uo(T.firebaseDependencies,V),R}catch(R){throw yield Na(T),R}})).apply(this,arguments)}function Nd(T,D){return xu.apply(this,arguments)}function xu(){return(xu=(0,O.Z)(function*(T,D){const V={token:yield Tu(T,D),createTime:Date.now(),subscriptionOptions:D};return yield uo(T,V),V.token})).apply(this,arguments)}function ac(T,D){return uc.apply(this,arguments)}function uc(){return(uc=(0,O.Z)(function*(T,D){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qg(D)})})).apply(this,arguments)}function Ru(T,D){return D.vapidKey===T.vapidKey&&D.endpoint===T.endpoint&&D.auth===T.auth&&D.p256dh===T.p256dh}function Mf(T){const D={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function lc(T,D){if(!D.notification)return;T.notification={};const R=D.notification.title;R&&(T.notification.title=R);const V=D.notification.body;V&&(T.notification.body=V);const Q=D.notification.image;Q&&(T.notification.image=Q);const te=D.notification.icon;te&&(T.notification.icon=te)}(D,T),function ye(T,D){D.data&&(T.data=D.data)}(D,T),function Jt(T,D){var R,V,Q,te,we;if(!(D.fcmOptions||null!==(R=D.notification)&&void 0!==R&&R.click_action))return;T.fcmOptions={};const Qe=null!==(Q=null===(V=D.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==Q?Q:null===(te=D.notification)||void 0===te?void 0:te.click_action;Qe&&(T.fcmOptions.link=Qe);const it=null===(we=D.fcmOptions)||void 0===we?void 0:we.analytics_label;it&&(T.fcmOptions.analyticsLabel=it)}(D,T),D}function cc(T){return"object"==typeof T&&!!T&&rc in T}function Pd(T,D){const R=[];for(let V=0;V<T.length;V++)R.push(T.charAt(V)),V<D.length&&R.push(D.charAt(V));return R.join("")}function ka(T){return Mn.create("missing-app-config-values",{valueName:T})}Pd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Pd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Mu{constructor(D,R,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function gr(T){if(!T||!T.options)throw ka("App Configuration Object");if(!T.name)throw ka("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=T;for(const V of D)if(!R[V])throw ka(V);return{appName:T.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Q,installations:R,analyticsProvider:V}}_delete(){return Promise.resolve()}}function ri(T){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,O.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(nc,{scope:fs}),T.swRegistration.update().catch(()=>{})}catch(D){throw Mn.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function Pu(T,D){return kd.apply(this,arguments)}function kd(){return(kd=(0,O.Z)(function*(T,D){if(!D&&!T.swRegistration&&(yield ri(T)),D||!T.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Mn.create("invalid-sw-registration");T.swRegistration=D}})).apply(this,arguments)}function dc(T,D){return ku.apply(this,arguments)}function ku(){return(ku=(0,O.Z)(function*(T,D){D?T.vapidKey=D:T.vapidKey||(T.vapidKey=jo)})).apply(this,arguments)}function ii(){return(ii=(0,O.Z)(function*(T,D){if(!navigator)throw Mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mn.create("permission-blocked");return yield dc(T,D?.vapidKey),yield Pu(T,D?.serviceWorkerRegistration),Su(T)})).apply(this,arguments)}function Bs(T,D,R){return ho.apply(this,arguments)}function ho(){return(ho=(0,O.Z)(function*(T,D,R){const V=es(D);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:R[rc],message_name:R[xd],message_time:R[xf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function es(T){switch(T){case so.NOTIFICATION_CLICKED:return"notification_open";case so.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Oa(){return(Oa=(0,O.Z)(function*(T,D){const R=D.data;if(!R.isFirebaseMessaging)return;T.onMessageHandler&&R.messageType===so.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Mf(R)):T.onMessageHandler.next(Mf(R)));const V=R.data;cc(V)&&"1"===V[Gg]&&(yield Bs(T,R.messageType,V))})).apply(this,arguments)}const Fd="@firebase/messaging",fc=T=>{const D=new Mu(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Od(T,D){return Oa.apply(this,arguments)}(D,R)),D},gs=T=>{const D=T.getProvider("messaging").getImmediate();return{getToken:V=>function er(T,D){return ii.apply(this,arguments)}(D,V)}};function pc(){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,O.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ld(){(0,ae._registerComponent)(new ne.wA("messaging",fc,"PUBLIC")),(0,ae._registerComponent)(new ne.wA("messaging-internal",gs,"PRIVATE")),(0,ae.registerVersion)(Fd,"0.12.4"),(0,ae.registerVersion)(Fd,"0.12.4","esm2017")}();const Vd="analytics",Gr="firebase_id",Qo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mc="https://www.googletagmanager.com/gtag/js",mr=new me.Yd("@firebase/analytics");function kf(T){return Promise.all(T.map(D=>D.catch(R=>R)))}function Zg(T,D){const R=document.createElement("script");R.src=`${mc}?l=${T}&id=${D}`,R.async=!0,document.head.appendChild(R)}function Fa(T,D,R,V,Q,te){return js.apply(this,arguments)}function js(){return(js=(0,O.Z)(function*(T,D,R,V,Q,te){const we=V[Q];try{if(we)yield D[we];else{const it=(yield kf(R)).find(rt=>rt.measurementId===Q);it&&(yield D[it.appId])}}catch(Qe){mr.error(Qe)}T("config",Q,te)})).apply(this,arguments)}function Xo(T,D,R,V,Q){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(T,D,R,V,Q){try{let te=[];if(Q&&Q.send_to){let we=Q.send_to;Array.isArray(we)||(we=[we]);const Qe=yield kf(R);for(const it of we){const rt=Qe.find(Et=>Et.measurementId===it),Mt=rt&&D[rt.appId];if(!Mt){te=[];break}te.push(Mt)}}0===te.length&&(te=Object.values(D)),yield Promise.all(te),T("event",V,Q||{})}catch(te){mr.error(te)}})).apply(this,arguments)}function Jo(T){const D=window.document.getElementsByTagName("script");for(const R of Object.values(D))if(R.src&&R.src.includes(mc)&&R.src.includes(T))return R;return null}const yi=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),La=new class fo{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Lu(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Ua(T){return vc.apply(this,arguments)}function vc(){return(vc=(0,O.Z)(function*(T){var D;const{appId:R,apiKey:V}=T,Q={method:"GET",headers:Lu(V)},te=Qo.replace("{app-id}",R),we=yield fetch(te,Q);if(200!==we.status&&304!==we.status){let Qe="";try{const it=yield we.json();null!==(D=it.error)&&void 0!==D&&D.message&&(Qe=it.error.message)}catch{}throw yi.create("config-fetch-failed",{httpStatus:we.status,responseMessage:Qe})}return we.json()})).apply(this,arguments)}function gn(T){return Va.apply(this,arguments)}function Va(){return(Va=(0,O.Z)(function*(T,D=La,R){const{appId:V,apiKey:Q,measurementId:te}=T.options;if(!V)throw yi.create("no-app-id");if(!Q){if(te)return{measurementId:te,appId:V};throw yi.create("no-api-key")}const we=D.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new Uu;return setTimeout((0,O.Z)(function*(){Qe.abort()}),void 0!==R?R:6e4),po({appId:V,apiKey:Q,measurementId:te},we,Qe,D)})).apply(this,arguments)}function po(T,D,R){return ms.apply(this,arguments)}function ms(){return(ms=(0,O.Z)(function*(T,{throttleEndTimeMillis:D,backoffCount:R},V,Q=La){var te;const{appId:we,measurementId:Qe}=T;try{yield Ba(V,D)}catch(it){if(Qe)return mr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${it?.message}]`),{appId:we,measurementId:Qe};throw it}try{const it=yield Ua(T);return Q.deleteThrottleMetadata(we),it}catch(it){const rt=it;if(!wc(rt)){if(Q.deleteThrottleMetadata(we),Qe)return mr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${rt?.message}]`),{appId:we,measurementId:Qe};throw it}const Mt=503===Number(null===(te=rt?.customData)||void 0===te?void 0:te.httpStatus)?(0,oe.$s)(R,Q.intervalMillis,30):(0,oe.$s)(R,Q.intervalMillis),Et={throttleEndTimeMillis:Date.now()+Mt,backoffCount:R+1};return Q.setThrottleMetadata(we,Et),mr.debug(`Calling attemptFetch again in ${Mt} millis`),po(T,Et,V,Q)}})).apply(this,arguments)}function Ba(T,D){return new Promise((R,V)=>{const Q=Math.max(D-Date.now(),0),te=setTimeout(R,Q);T.addEventListener(()=>{clearTimeout(te),V(yi.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function wc(T){if(!(T instanceof oe.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Uu{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Vu,yo;function $s(){return($s=(0,O.Z)(function*(T,D,R,V,Q){if(Q&&Q.global)T("event",R,V);else{const te=yield D;T("event",R,Object.assign(Object.assign({},V),{send_to:te}))}})).apply(this,arguments)}function $u(T){yo=T}function ja(T){Vu=T}function Ic(){return jd.apply(this,arguments)}function jd(){return(jd=(0,O.Z)(function*(){if(!(0,oe.hl)())return mr.warn(yi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(T){return mr.warn(yi.create("indexeddb-unavailable",{errorInfo:T?.toString()}).message),!1}return!0})).apply(this,arguments)}function ra(){return(ra=(0,O.Z)(function*(T,D,R,V,Q,te,we){var Qe;const it=gn(T);it.then(Ln=>{R[Ln.measurementId]=Ln.appId,T.options.measurementId&&Ln.measurementId!==T.options.measurementId&&mr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Ln.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ln=>mr.error(Ln)),D.push(it);const rt=Ic().then(Ln=>{if(Ln)return V.getId()}),[Mt,Et]=yield Promise.all([it,rt]);Jo(te)||Zg(te,Mt.measurementId),yo&&(Q("consent","default",yo),$u(void 0)),Q("js",new Date);const oi=null!==(Qe=we?.config)&&void 0!==Qe?Qe:{};return oi.origin="firebase",oi.update=!0,null!=Et&&(oi[Gr]=Et),Q("config",Mt.measurementId,oi),Vu&&(Q("set",Vu),ja(void 0)),Mt.measurementId})).apply(this,arguments)}class Of{constructor(D){this.app=D}_delete(){return delete _s[this.app.options.appId],Promise.resolve()}}let _s={},$a=[];const Hu={};let bc,Oi,ki="dataLayer",Fi=!1;function Gu(T,D,R){!function Tc(){const T=[];if((0,oe.ru)()&&T.push("This is a browser extension environment."),(0,oe.zI)()||T.push("Cookies are not available."),T.length>0){const D=T.map((V,Q)=>`(${Q+1}) ${V}`).join(" "),R=yi.create("invalid-analytics-context",{errorInfo:D});mr.warn(R.message)}}();const V=T.options.appId;if(!V)throw yi.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw yi.create("no-api-key");mr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_s[V])throw yi.create("already-exists",{id:V});if(!Fi){!function Kg(T){let D=[];Array.isArray(window[T])?D=window[T]:window[T]=D}(ki);const{wrappedGtag:te,gtagCore:we}=function Fu(T,D,R,V,Q){let te=function(...we){window[V].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(te=window[Q]),window[Q]=function _c(T,D,R,V){function te(){return(te=(0,O.Z)(function*(we,Qe,it){try{"event"===we?yield Xo(T,D,R,Qe,it):"config"===we?yield Fa(T,D,R,V,Qe,it):"consent"===we?T("consent","update",it):T("set",Qe)}catch(rt){mr.error(rt)}})).apply(this,arguments)}return function Q(we,Qe,it){return te.apply(this,arguments)}}(te,T,D,R),{gtagCore:te,wrappedGtag:window[Q]}}(_s,$a,Hu,ki,"gtag");Oi=te,bc=we,Fi=!0}return _s[V]=function vo(T,D,R,V,Q,te,we){return ra.apply(this,arguments)}(T,$a,Hu,D,bc,ki,R),new Of(T)}function Dc(){return wo.apply(this,arguments)}function wo(){return(wo=(0,O.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const Qt="@firebase/analytics";!function Yg(){(0,ae._registerComponent)(new ne.wA(Vd,(D,{options:R})=>Gu(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ae._registerComponent)(new ne.wA("analytics-internal",function T(D){try{const R=D.getProvider(Vd).getImmediate();return{logEvent:(V,Q,te)=>function Dy(T,D,R,V){T=(0,oe.m9)(T),function Bu(T,D,R,V,Q){return $s.apply(this,arguments)}(Oi,_s[T.app.options.appId],D,R,V).catch(Q=>mr.error(Q))}(R,V,Q,te)}}catch(R){throw yi.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ae.registerVersion)(Qt,"0.9.4"),(0,ae.registerVersion)(Qt,"0.9.4","esm2017")}();var zu=F(4408),Vf=F(7565);const Bf=new class qd extends Vf.v{}(class Uf extends zu.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(D,R,V):(D.flush(this),0)}});var jf=F(4986),xc=F(8505),mn=F(5363),Zu=F(9468);const Ku=new c.GfV("7.5.0"),Rc="__angularfire_symbol__analyticsIsSupportedValue",si="__angularfire_symbol__analyticsIsSupported",ts="__angularfire_symbol__remoteConfigIsSupportedValue",Yu="__angularfire_symbol__remoteConfigIsSupported",Ga="__angularfire_symbol__messagingIsSupportedValue",sa="__angularfire_symbol__messagingIsSupported";function zr(T,D,R){if(D){if(1===D.length)return D[0];const te=D.filter(we=>we.app===R);if(1===te.length)return te[0]}return R.container.getProvider(T).getImmediate({optional:!0})}globalThis[si]||(globalThis[si]=Dc().then(T=>globalThis[Rc]=T).catch(()=>globalThis[Rc]=!1)),globalThis[sa]||(globalThis[sa]=pc().then(T=>globalThis[Ga]=T).catch(()=>globalThis[Ga]=!1)),globalThis[Yu]||(globalThis[Yu]=Aa().then(T=>globalThis[ts]=T).catch(()=>globalThis[ts]=!1));const en=(T,D)=>{const R=D?[D]:(0,J.C6)(),V=[];return R.forEach(Q=>{Q.container.getProvider(T).instances.forEach(we=>{V.includes(we)||V.push(we)})}),V};function lr(){}class Ye{constructor(D,R=Bf){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,V){const Q=this.zone;return this.delegate.schedule(function(we){Q.runGuarded(()=>{D.apply(this,[we])})},R,V)}}class _r{constructor(D){this.zone=D,this.task=null}call(D,R){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",lr,{},lr,lr)),R.pipe((0,xc.b)({next:V,complete:V,error:V})).subscribe(D).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Li=(()=>{class T{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Ye(Zone.current)),this.insideAngular=R.run(()=>new Ye(Zone.current,jf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(R){return new(R||T)(c.LFG(c.R0b))},T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function ys(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function $f(T){return T.pipe((0,mn.Q)(ys().outsideAngular))}function qa(T){return ys(),function za(T){return function(R){return(R=R.lift(new _r(T.ngZone))).pipe((0,Zu.R)(T.outsideAngular),(0,mn.Q)(T.insideAngular))}}(ys())(T)}},2090:(at,Te,F)=>{F.d(Te,{$s:()=>Ct,BH:()=>xe,DV:()=>Vr,Dv:()=>kn,G6:()=>nn,GJ:()=>ks,L:()=>de,LL:()=>pr,Pz:()=>Ce,Sg:()=>Ve,UG:()=>Ie,UI:()=>_n,US:()=>ne,Wj:()=>Lo,Wl:()=>cs,Yr:()=>ut,ZB:()=>Y,ZR:()=>Kt,aH:()=>Re,b$:()=>ie,cI:()=>hn,dS:()=>Yi,eu:()=>Nt,g5:()=>O,gK:()=>Tr,gQ:()=>Ls,h$:()=>fe,hl:()=>pn,hu:()=>J,jU:()=>Z,lb:()=>on,m9:()=>Sr,ne:()=>xt,p$:()=>q,pd:()=>br,r3:()=>fi,ru:()=>X,tV:()=>H,uI:()=>G,ug:()=>Yt,vZ:()=>Xr,w1:()=>Le,w9:()=>eo,xO:()=>Ai,xb:()=>Os,z$:()=>Pe,zI:()=>Ut,zd:()=>Dn});const J=function(j,B){if(!j)throw O(B)},O=function(j){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+j)},ae=function(j){const B=[];let W=0;for(let ve=0;ve<j.length;ve++){let se=j.charCodeAt(ve);se<128?B[W++]=se:se<2048?(B[W++]=se>>6|192,B[W++]=63&se|128):55296==(64512&se)&&ve+1<j.length&&56320==(64512&j.charCodeAt(ve+1))?(se=65536+((1023&se)<<10)+(1023&j.charCodeAt(++ve)),B[W++]=se>>18|240,B[W++]=se>>12&63|128,B[W++]=se>>6&63|128,B[W++]=63&se|128):(B[W++]=se>>12|224,B[W++]=se>>6&63|128,B[W++]=63&se|128)}return B},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,B){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let se=0;se<j.length;se+=3){const et=j[se],mt=se+1<j.length,tn=mt?j[se+1]:0,wt=se+2<j.length,Sn=wt?j[se+2]:0;let xi=(15&tn)<<2|Sn>>6,Xn=63&Sn;wt||(Xn=64,mt||(xi=64)),ve.push(W[et>>2],W[(3&et)<<4|tn>>4],W[xi],W[Xn])}return ve.join("")},encodeString(j,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(j):this.encodeByteArray(ae(j),B)},decodeString(j,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(j):function(j){const B=[];let W=0,ve=0;for(;W<j.length;){const se=j[W++];if(se<128)B[ve++]=String.fromCharCode(se);else if(se>191&&se<224){const et=j[W++];B[ve++]=String.fromCharCode((31&se)<<6|63&et)}else if(se>239&&se<365){const wt=((7&se)<<18|(63&j[W++])<<12|(63&j[W++])<<6|63&j[W++])-65536;B[ve++]=String.fromCharCode(55296+(wt>>10)),B[ve++]=String.fromCharCode(56320+(1023&wt))}else{const et=j[W++],mt=j[W++];B[ve++]=String.fromCharCode((15&se)<<12|(63&et)<<6|63&mt)}}return B.join("")}(this.decodeStringToByteArray(j,B))},decodeStringToByteArray(j,B){this.init_();const W=B?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let se=0;se<j.length;){const et=W[j.charAt(se++)],tn=se<j.length?W[j.charAt(se)]:0;++se;const Sn=se<j.length?W[j.charAt(se)]:64;++se;const Gt=se<j.length?W[j.charAt(se)]:64;if(++se,null==et||null==tn||null==Sn||null==Gt)throw new me;ve.push(et<<2|tn>>4),64!==Sn&&(ve.push(tn<<4&240|Sn>>2),64!==Gt&&ve.push(Sn<<6&192|Gt))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}};class me extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fe=function(j){const B=ae(j);return ne.encodeByteArray(B,!0)},de=function(j){return fe(j).replace(/\./g,"")},H=function(j){try{return ne.decodeString(j,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function q(j){return Y(void 0,j)}function Y(j,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return B}for(const W in B)!B.hasOwnProperty(W)||!Be(W)||(j[W]=Y(j[W],B[W]));return j}function Be(j){return"__proto__"!==j}const De=()=>{try{return function Ae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=j&&H(j[1]);return B&&JSON.parse(B)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},Re=()=>{var j;return null===(j=De())||void 0===j?void 0:j.config},Ce=j=>{var B;return null===(B=De())||void 0===B?void 0:B[`_${j}`]};class xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,W)=>{this.resolve=B,this.reject=W})}wrapCallback(B){return(W,ve)=>{W?this.reject(W):this.resolve(ve),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(W):B(W,ve))}}}function Ve(j,B){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=B||"demo-project",se=j.iat||0,et=j.sub||j.user_id;if(!et)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mt=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:se,exp:se+3600,auth_time:se,sub:et,user_id:et,firebase:{sign_in_provider:"custom",identities:{}}},j);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(mt)),""].join(".")}function Pe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function G(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function Ie(){var j;const B=null===(j=De())||void 0===j?void 0:j.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Z(){return"object"==typeof self&&self.self===self}function X(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Le(){const j=Pe();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function ut(){return!1}function nn(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pn(){try{return"object"==typeof indexedDB}catch{return!1}}function Nt(){return new Promise((j,B)=>{try{let W=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(ve);se.onsuccess=()=>{se.result.close(),W||self.indexedDB.deleteDatabase(ve),j(!0)},se.onupgradeneeded=()=>{W=!1},se.onerror=()=>{var et;B((null===(et=se.error)||void 0===et?void 0:et.message)||"")}}catch(W){B(W)}})}function Ut(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Kt extends Error{constructor(B,W,ve){super(W),this.code=B,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Kt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pr.prototype.create)}}class pr{constructor(B,W,ve){this.service=B,this.serviceName=W,this.errors=ve}create(B,...W){const ve=W[0]||{},se=`${this.service}/${B}`,et=this.errors[B],mt=et?function Fr(j,B){return j.replace(gt,(W,ve)=>{const se=B[ve];return null!=se?String(se):`<${ve}?>`})}(et,ve):"Error";return new Kt(se,`${this.serviceName}: ${mt} (${se}).`,ve)}}const gt=/\{\$([^}]+)}/g;function hn(j){return JSON.parse(j)}function cs(j){return JSON.stringify(j)}const ar=function(j){let B={},W={},ve={},se="";try{const et=j.split(".");B=hn(H(et[0])||""),W=hn(H(et[1])||""),se=et[2],ve=W.d||{},delete W.d}catch{}return{header:B,claims:W,data:ve,signature:se}},eo=function(j){const W=ar(j).claims;return!!W&&"object"==typeof W&&W.hasOwnProperty("iat")},ks=function(j){const B=ar(j).claims;return"object"==typeof B&&!0===B.admin};function fi(j,B){return Object.prototype.hasOwnProperty.call(j,B)}function Vr(j,B){if(Object.prototype.hasOwnProperty.call(j,B))return j[B]}function Os(j){for(const B in j)if(Object.prototype.hasOwnProperty.call(j,B))return!1;return!0}function _n(j,B,W){const ve={};for(const se in j)Object.prototype.hasOwnProperty.call(j,se)&&(ve[se]=B.call(W,j[se],se,j));return ve}function Xr(j,B){if(j===B)return!0;const W=Object.keys(j),ve=Object.keys(B);for(const se of W){if(!ve.includes(se))return!1;const et=j[se],mt=B[se];if(lt(et)&&lt(mt)){if(!Xr(et,mt))return!1}else if(et!==mt)return!1}for(const se of ve)if(!W.includes(se))return!1;return!0}function lt(j){return null!==j&&"object"==typeof j}function Ai(j){const B=[];for(const[W,ve]of Object.entries(j))Array.isArray(ve)?ve.forEach(se=>{B.push(encodeURIComponent(W)+"="+encodeURIComponent(se))}):B.push(encodeURIComponent(W)+"="+encodeURIComponent(ve));return B.length?"&"+B.join("&"):""}function Dn(j){const B={};return j.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[se,et]=ve.split("=");B[decodeURIComponent(se)]=decodeURIComponent(et)}}),B}function br(j){const B=j.indexOf("?");if(!B)return"";const W=j.indexOf("#",B);return j.substring(B,W>0?W:void 0)}class Ls{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,W){W||(W=0);const ve=this.W_;if("string"==typeof B)for(let Gt=0;Gt<16;Gt++)ve[Gt]=B.charCodeAt(W)<<24|B.charCodeAt(W+1)<<16|B.charCodeAt(W+2)<<8|B.charCodeAt(W+3),W+=4;else for(let Gt=0;Gt<16;Gt++)ve[Gt]=B[W]<<24|B[W+1]<<16|B[W+2]<<8|B[W+3],W+=4;for(let Gt=16;Gt<80;Gt++){const xi=ve[Gt-3]^ve[Gt-8]^ve[Gt-14]^ve[Gt-16];ve[Gt]=4294967295&(xi<<1|xi>>>31)}let Sn,jn,se=this.chain_[0],et=this.chain_[1],mt=this.chain_[2],tn=this.chain_[3],wt=this.chain_[4];for(let Gt=0;Gt<80;Gt++){Gt<40?Gt<20?(Sn=tn^et&(mt^tn),jn=1518500249):(Sn=et^mt^tn,jn=1859775393):Gt<60?(Sn=et&mt|tn&(et|mt),jn=2400959708):(Sn=et^mt^tn,jn=3395469782);const xi=(se<<5|se>>>27)+Sn+wt+jn+ve[Gt]&4294967295;wt=tn,tn=mt,mt=4294967295&(et<<30|et>>>2),et=se,se=xi}this.chain_[0]=this.chain_[0]+se&4294967295,this.chain_[1]=this.chain_[1]+et&4294967295,this.chain_[2]=this.chain_[2]+mt&4294967295,this.chain_[3]=this.chain_[3]+tn&4294967295,this.chain_[4]=this.chain_[4]+wt&4294967295}update(B,W){if(null==B)return;void 0===W&&(W=B.length);const ve=W-this.blockSize;let se=0;const et=this.buf_;let mt=this.inbuf_;for(;se<W;){if(0===mt)for(;se<=ve;)this.compress_(B,se),se+=this.blockSize;if("string"==typeof B){for(;se<W;)if(et[mt]=B.charCodeAt(se),++mt,++se,mt===this.blockSize){this.compress_(et),mt=0;break}}else for(;se<W;)if(et[mt]=B[se],++mt,++se,mt===this.blockSize){this.compress_(et),mt=0;break}}this.inbuf_=mt,this.total_+=W}digest(){const B=[];let W=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let se=this.blockSize-1;se>=56;se--)this.buf_[se]=255&W,W/=256;this.compress_(this.buf_);let ve=0;for(let se=0;se<5;se++)for(let et=24;et>=0;et-=8)B[ve]=this.chain_[se]>>et&255,++ve;return B}}function xt(j,B){const W=new dt(j,B);return W.subscribe.bind(W)}class dt{constructor(B,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{B(this)}).catch(ve=>{this.error(ve)})}next(B){this.forEachObserver(W=>{W.next(B)})}error(B){this.forEachObserver(W=>{W.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,W,ve){let se;if(void 0===B&&void 0===W&&void 0===ve)throw new Error("Missing Observer.");se=function to(j,B){if("object"!=typeof j||null===j)return!1;for(const W of B)if(W in j&&"function"==typeof j[W])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:W,complete:ve},void 0===se.next&&(se.next=yn),void 0===se.error&&(se.error=yn),void 0===se.complete&&(se.complete=yn);const et=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch{}}),this.observers.push(se),et}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,B)}sendOne(B,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{W(this.observers[B])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yn(){}const kn=function(j,B,W,ve){let se;if(ve<B?se="at least "+B:ve>W&&(se=0===W?"none":"no more than "+W),se)throw new Error(j+" failed: Was called with "+ve+(1===ve?" argument.":" arguments.")+" Expects "+se+".")};function Tr(j,B){return`${j} failed: ${B} argument `}function Lo(j,B,W,ve){if((!ve||W)&&"function"!=typeof W)throw new Error(Tr(j,B)+"must be a valid function.")}function on(j,B,W,ve){if((!ve||W)&&("object"!=typeof W||null===W))throw new Error(Tr(j,B)+"must be a valid context object.")}const Yi=function(j){const B=[];let W=0;for(let ve=0;ve<j.length;ve++){let se=j.charCodeAt(ve);if(se>=55296&&se<=56319){const et=se-55296;ve++,J(ve<j.length,"Surrogate pair missing trail surrogate."),se=65536+(et<<10)+(j.charCodeAt(ve)-56320)}se<128?B[W++]=se:se<2048?(B[W++]=se>>6|192,B[W++]=63&se|128):se<65536?(B[W++]=se>>12|224,B[W++]=se>>6&63|128,B[W++]=63&se|128):(B[W++]=se>>18|240,B[W++]=se>>12&63|128,B[W++]=se>>6&63|128,B[W++]=63&se|128)}return B},Yt=function(j){let B=0;for(let W=0;W<j.length;W++){const ve=j.charCodeAt(W);ve<128?B++:ve<2048?B+=2:ve>=55296&&ve<=56319?(B+=4,W++):B+=3}return B};function Ct(j,B=1e3,W=2){const ve=B*Math.pow(W,j),se=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+se)}function Sr(j){return j&&j._delegate?j._delegate:j}},3272:(at,Te,F)=>{var c=F(4650);let J=null;function O(){return J}class oe{}const ne=new c.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function fe(){return(0,c.LFG)(H)}()},providedIn:"platform"}),n})();const de=new c.OlP("Location Initialized");let H=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){q()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){q()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Y(){return new H((0,c.LFG)(ne))}()},providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function Be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ae(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let nt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(De)},providedIn:"root"}),n})();const pe=new c.OlP("appBaseHref");let De=(()=>{class n extends nt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+He(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+He(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me),c.LFG(pe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Se=(()=>{class n extends nt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+He(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+He(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me),c.LFG(pe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Oe=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ve(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ae(xe(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,xe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=He,n.joinWithSlash=Be,n.stripTrailingSlash=Ae,n.\u0275fac=function(t){return new(t||n)(c.LFG(nt))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Re(){return new Oe((0,c.LFG)(nt))}()},providedIn:"root"}),n})();function xe(n){return n.replace(/\/index.html$/,"")}var G=(()=>((G=G||{})[G.Decimal=0]="Decimal",G[G.Percent=1]="Percent",G[G.Currency=2]="Currency",G[G.Scientific=3]="Scientific",G))(),re=(()=>((re=re||{})[re.Decimal=0]="Decimal",re[re.Group=1]="Group",re[re.List=2]="List",re[re.PercentSign=3]="PercentSign",re[re.PlusSign=4]="PlusSign",re[re.MinusSign=5]="MinusSign",re[re.Exponential=6]="Exponential",re[re.SuperscriptingExponent=7]="SuperscriptingExponent",re[re.PerMille=8]="PerMille",re[re.Infinity=9]="Infinity",re[re.NaN=10]="NaN",re[re.TimeSeparator=11]="TimeSeparator",re[re.CurrencyDecimal=12]="CurrencyDecimal",re[re.CurrencyGroup=13]="CurrencyGroup",re))();function gt(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===re.CurrencyDecimal)return t[c.wAp.NumberSymbols][re.Decimal];if(e===re.CurrencyGroup)return t[c.wAp.NumberSymbols][re.Group]}return r}const tn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Da(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class Hn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Jr=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Hn(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),xn(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{xn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function xn(n,e){n.context.$implicit=e.item}let gi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ft,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Jl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Jl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ft{constructor(){this.$implicit=null,this.ngIf=null}}function Jl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}let xd=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function $o(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Td(n,e,t){return function ba(n,e,t,r,i,a,l=!1){let f="",_=!1;if(isFinite(n)){let w=function Xl(n){let r,i,a,l,f,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(i<0&&(i=a),i+=+e.slice(a+1),e=e.substring(0,a)):i<0&&(i=e.length),a=0;"0"===e.charAt(a);a++);if(a===(f=e.length))r=[0],i=1;else{for(f--;"0"===e.charAt(f);)f--;for(i-=a,r=[],l=0;a<=f;a++,l++)r[l]=Number(e.charAt(a))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(w=function Dd(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(w));let C=e.minInt,S=e.minFrac,P=e.maxFrac;if(a){const ct=a.match(tn);if(null===ct)throw new Error(`${a} is not a valid digit info`);const Xe=ct[1],ot=ct[3],St=ct[5];null!=Xe&&(C=Da(Xe)),null!=ot&&(S=Da(ot)),null!=St?P=Da(St):null!=ot&&S>P&&(P=S)}!function Ta(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const a=Math.min(Math.max(e,i),t);let l=a+n.integerLen,f=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let S=l;S<r.length;S++)r[S]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=a+1),r[0]=0;for(let S=1;S<l;S++)r[S]=0}if(f>=5)if(l-1<0){for(let S=0;S>l;S--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,a);i++)r.push(0);let _=0!==a;const w=e+n.integerLen,C=r.reduceRight(function(S,P,U,$){return $[U]=(P+=S)<10?P:P-10,_&&(0===$[U]&&U>=w?$.pop():_=!1),P>=10?1:0},0);C&&(r.unshift(C),n.integerLen++)}(w,S,P);let U=w.digits,$=w.integerLen;const le=w.exponent;let ge=[];for(_=U.every(ct=>!ct);$<C;$++)U.unshift(0);for(;$<0;$++)U.unshift(0);$>0?ge=U.splice($,U.length):(ge=U,U=[0]);const st=[];for(U.length>=e.lgSize&&st.unshift(U.splice(-e.lgSize,U.length).join(""));U.length>e.gSize;)st.unshift(U.splice(-e.gSize,U.length).join(""));U.length&&st.unshift(U.join("")),f=st.join(gt(t,r)),ge.length&&(f+=gt(t,i)+ge.join("")),le&&(f+=gt(t,re.Exponential)+"+"+le)}else f=gt(t,re.Infinity);return f=n<0&&!_?e.negPre+f+e.negSuf:e.posPre+f+e.posSuf,f}(n,function An(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],a=r[1],l=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],f=l[0],_=l[1]||"";t.posPre=f.substring(0,f.indexOf("#"));for(let C=0;C<_.length;C++){const S=_.charAt(C);"0"===S?t.minFrac=t.maxFrac=C+1:"#"===S?t.maxFrac=C+1:t.posSuf+=S}const w=f.split(",");if(t.gSize=w[1]?w[1].length:0,t.lgSize=w[2]||w[1]?(w[2]||w[1]).length:0,a){const C=i.length-t.posPre.length-t.posSuf.length,S=a.indexOf("#");t.negPre=a.substring(0,S).replace(/'/g,""),t.negSuf=a.slice(S+C).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function hn(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,G.Decimal),gt(e,re.MinusSign)),e,re.Group,re.Decimal,t)}(function so(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(a){throw function Xi(n,e){return new c.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16))},n.\u0275pipe=c.Yjl({name:"number",type:n,pure:!0,standalone:!0}),n})();let Ho=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function Iu(n){return"server"===n}let Go=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new bu((0,c.LFG)(ne),window)}),n})();class bu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function uo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qo(this.window.history)||qo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function qo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class js extends oe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Xo extends js{static makeCurrent(){!function ae(n){J||(J=n)}(new Xo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function _c(){return _i=_i||document.querySelector("base"),_i?_i.getAttribute("href"):null}();return null==t?null:function Jo(n){Fu=Fu||document.createElement("a"),Fu.setAttribute("href",n);const e=Fu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){_i=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ar(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Fu,_i=null;const ea=new c.OlP("TRANSITION_ID"),yc=[{provide:c.ip1,useFactory:function yi(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[ea,ne,c.zs3],multi:!0}];let fo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const La=new c.OlP("EventManagerPlugins");let Lu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(La),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Ua{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let vc=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),gn=(()=>{class n extends vc{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Va),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Va))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Va(n){O().remove(n)}const po={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ms=/%COMP%/g;function go(n,e){return e.flat(100).map(t=>t.replace(ms,n))}function mo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _o=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ta(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new na(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case c.ifc.ShadowDom:return new yo(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=go(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Lu),c.LFG(gn),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class ta{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(po[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ju(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ju(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=po[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=po[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,mo(r)):this.eventManager.addEventListener(e,t,mo(r))}}function ju(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class na extends ta{constructor(e,t,r,i){super(e),this.component=r;const a=go(i+"-"+r.id,r.styles);t.addStyles(a),this.contentAttr=function Bu(n){return"_ngcontent-%COMP%".replace(ms,n)}(i+"-"+r.id),this.hostAttr=function $s(n){return"_nghost-%COMP%".replace(ms,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class yo extends ta{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=go(i.id,i.styles);for(let l=0;l<a.length;l++){const f=document.createElement("style");f.textContent=a[l],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let $u=(()=>{class n extends Ua{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ja=["alt","control","meta","shift"],Ic={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jd={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let vo=(()=>{class n extends Ua{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),ja.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),l+=w+".")}),l+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let i=Ic[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ja.forEach(l=>{l!==i&&(0,jd[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Fi=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function ki(){Xo.makeCurrent()},multi:!0},{provide:ne,useFactory:function bc(){return(0,c.RDi)(document),document},deps:[]}]),Ff=new c.OlP(""),Tc=[{provide:c.rWj,useClass:class Bd{addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(_){l=l||_,a--,0==a&&r(l)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],Gu=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Cc(){return new c.qLn},deps:[]},{provide:La,useClass:$u,multi:!0,deps:[ne,c.R0b,c.Lbi]},{provide:La,useClass:vo,multi:!0,deps:[ne]},{provide:_o,useClass:_o,deps:[Lu,gn,c.AFp]},{provide:c.FYo,useExisting:_o},{provide:vc,useExisting:gn},{provide:gn,useClass:gn,deps:[ne]},{provide:Lu,useClass:Lu,deps:[La,c.R0b]},{provide:class Md{},useClass:fo,deps:[]},[]];let $d=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:ea,useExisting:c.AFp},yc]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ff,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[...Gu,...Tc],imports:[Ho,c.hGG]}),n})(),ia=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ha(){return new ia((0,c.LFG)(ne))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Qg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):c.LFG(Xg),r},providedIn:"root"}),n})(),Xg=(()=>{class n extends Qg{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case c.q3G.NONE:return r;case c.q3G.HTML:return(0,c.qzn)(r,"HTML")?(0,c.z3N)(r):(0,c.EiD)(this._doc,String(r)).toString();case c.q3G.STYLE:return(0,c.qzn)(r,"Style")?(0,c.z3N)(r):r;case c.q3G.SCRIPT:if((0,c.qzn)(r,"Script"))return(0,c.z3N)(r);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.qzn)(r,"URL")?(0,c.z3N)(r):(0,c.mCW)(String(r));case c.q3G.RESOURCE_URL:if((0,c.qzn)(r,"ResourceURL"))return(0,c.z3N)(r);throw new Error(`unsafe value used in a resource URL context (see ${c.JZr})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${c.JZr})`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function zd(n){return new Xg(n.get(ne))}(c.LFG(c.zs3)),r},providedIn:"root"}),n})();var en=F(8996),lr=F(7669);function Ye(...n){const e=(0,lr.yG)(n);return(0,en.D)(n,e)}var _r=F(7579);class Li extends _r.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const oa=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var qn=F(9751);const{isArray:$f}=Array,{getPrototypeOf:Wd,prototype:qa,keys:za}=Object;function Xu(n){if(1===n.length){const e=n[0];if($f(e))return{args:e,keys:null};if(function Ju(n){return n&&"object"==typeof n&&Wd(n)===qa}(e)){const t=za(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var T=F(4671),D=F(4004);const{isArray:R}=Array;function Q(n){return(0,D.U)(e=>function V(n,e){return R(e)?n(...e):n(e)}(n,e))}function te(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var we=F(5403),Qe=F(9672);function it(...n){const e=(0,lr.yG)(n),t=(0,lr.jO)(n),{args:r,keys:i}=Xu(n);if(0===r.length)return(0,en.D)([],e);const a=new qn.y(function rt(n,e,t=T.y){return r=>{Mt(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let _=0;_<i;_++)Mt(e,()=>{const w=(0,en.D)(n[_],e);let C=!1;w.subscribe((0,we.x)(r,S=>{a[_]=S,C||(C=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>te(i,l):T.y));return t?a.pipe(Q(t)):a}function Mt(n,e,t){n?(0,Qe.f)(t,n,e):e()}var Et=F(8189);function Ln(...n){return function oi(){return(0,Et.J)(1)}()((0,en.D)(n,(0,lr.yG)(n)))}var vs=F(8421);function el(n){return new qn.y(e=>{(0,vs.Xf)(n()).subscribe(e)})}var aa=F(9635),ai=F(576);function ui(n,e){const t=(0,ai.m)(n)?n:()=>n,r=i=>i.error(t());return new qn.y(e?i=>e.schedule(r,0,i):r)}var Wr=F(515),Hf=F(727),yr=F(4482);function Zd(){return(0,yr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,we.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Gf extends qn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,yr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Hf.w0;const t=this.getSubject();e.add(this.source.subscribe((0,we.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Hf.w0.EMPTY)}return e}refCount(){return Zd()(this)}}function Un(n,e){return(0,yr.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,we.x)(r,_=>{i?.unsubscribe();let w=0;const C=a++;(0,vs.Xf)(n(_,C)).subscribe(i=(0,we.x)(r,S=>r.next(e?e(_,S,C,w++):S),()=>{i=null,f()}))},()=>{l=!0,f()}))})}function Kd(n){return n<=0?()=>Wr.E:(0,yr.e)((e,t)=>{let r=0;e.subscribe((0,we.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Mc(...n){const e=(0,lr.yG)(n);return(0,yr.e)((t,r)=>{(e?Ln(n,t,e):Ln(n,t)).subscribe(r)})}function ws(n,e){return(0,yr.e)((t,r)=>{let i=0;t.subscribe((0,we.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var tr=F(5577);function qf(n){return(0,yr.e)((e,t)=>{let r=!1;e.subscribe((0,we.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Sy(n=zf){return(0,yr.e)((e,t)=>{let r=!1;e.subscribe((0,we.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function zf(){return new oa}function ua(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ws((i,a)=>n(i,a,r)):T.y,Kd(1),t?qf(e):Sy(()=>new oa))}function tl(n,e){return(0,ai.m)(e)?(0,tr.z)(n,e,1):(0,tr.z)(n,1)}var li=F(8505);function Wa(n){return(0,yr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,we.x)(t,void 0,void 0,l=>{a=(0,vs.Xf)(n(l,Wa(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function mE(n,e,t,r,i){return(a,l)=>{let f=t,_=e,w=0;a.subscribe((0,we.x)(l,C=>{const S=w++;_=f?n(_,C,S):(f=!0,C),r&&l.next(_)},i&&(()=>{f&&l.next(_),l.complete()})))}}function Eo(n,e){return(0,yr.e)(mE(n,e,arguments.length>=2,!0))}function Yd(n){return n<=0?()=>Wr.E:(0,yr.e)((e,t)=>{let r=[];e.subscribe((0,we.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Qd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ws((i,a)=>n(i,a,r)):T.y,Yd(1),t?qf(e):Sy(()=>new oa))}function Xd(n){return(0,yr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const yt="primary",Nc=Symbol("RouteTitle");class Ay{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function nl(n){return new Ay(n)}function tm(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Hs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Jd(n[i],e[i]))return!1;return!0}function Jd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function nm(n){return Array.prototype.concat.apply([],n)}function eh(n){return n.length>0?n[n.length-1]:null}function cr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function zn(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,en.D)(Promise.resolve(n)):Ye(n)}const Za=!1,Wf={exact:function Zf(n,e,t){if(!Ka(n.segments,e.segments)||!Qf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Zf(n.children[r],e.children[r],t))return!1;return!0},subset:Kf},th={exact:function kc(n,e){return Hs(n,e)},subset:function rm(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Jd(n[t],e[t]))},ignored:()=>!0};function Mr(n,e,t){return Wf[t.paths](n.root,e.root,t.matrixParams)&&th[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Kf(n,e,t){return Yf(n,e,e.segments,t)}function Yf(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ka(i,t)||e.hasChildren()||!Qf(i,t,r))}if(n.segments.length===t.length){if(!Ka(n.segments,t)||!Qf(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Kf(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ka(n.segments,i)&&Qf(n.segments,i,r)&&n.children[yt])&&Yf(n.children[yt],e,a,r)}}function Qf(n,e,t){return e.every((r,i)=>th[t](n[i].parameters,r.parameters))}class vi{constructor(e=new qt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nl(this.queryParams)),this._queryParamMap}toString(){return Qa.serialize(this)}}class qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,cr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nh(this)}}class rl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=nl(this.parameters)),this._parameterMap}toString(){return tp(this)}}function Ka(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ya=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return new Jf},providedIn:"root"}),n})();class Jf{parse(e){const t=new rp(e);return new vi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Fc(e.root,!0)}`,r=function xy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${sl(t)}=${sl(i)}`).join("&"):`${sl(t)}=${sl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function im(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Qa=new Jf;function nh(n){return n.segments.map(e=>tp(e)).join("/")}function Fc(n,e){if(!n.hasChildren())return nh(n);if(e){const t=n.children[yt]?Fc(n.children[yt],!1):"",r=[];return cr(n.children,(i,a)=>{a!==yt&&r.push(`${a}:${Fc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Oc(n,e){let t=[];return cr(n.children,(r,i)=>{i===yt&&(t=t.concat(e(r,i)))}),cr(n.children,(r,i)=>{i!==yt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===yt?[Fc(n.children[yt],!1)]:[`${i}:${Fc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[yt]?`${nh(n)}/${t[0]}`:`${nh(n)}/(${t.join("//")})`}}function il(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sl(n){return il(n).replace(/%3B/gi,";")}function la(n){return il(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ol(n){return decodeURIComponent(n)}function ep(n){return ol(n.replace(/\+/g,"%20"))}function tp(n){return`${la(n.path)}${function Lc(n){return Object.keys(n).map(e=>`;${la(e)}=${la(n[e])}`).join("")}(n.parameters)}`}const Ry=/^[^\/()?;=#]+/;function al(n){const e=n.match(Ry);return e?e[0]:""}const np=/^[^=?&#]+/,Ny=/^[^&#]+/;class rp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qt([],{}):new qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[yt]=new qt(e,t)),r}parseSegment(){const e=al(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,Za);return this.capture(e),new rl(ol(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=al(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=al(this.remaining);i&&(r=i,this.capture(r))}e[ol(t)]=ol(r)}parseQueryParam(e){const t=function My(n){const e=n.match(np);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Uc(n){const e=n.match(Ny);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=ep(t),a=ep(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=al(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new c.vHH(4010,Za);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=yt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[yt]:new qt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,Za)}}function rh(n){return n.segments.length>0?new qt([],{[yt]:n}):n}function ul(n){const e={};for(const r of Object.keys(n.children)){const a=ul(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function sm(n){if(1===n.numberOfChildren&&n.children[yt]){const e=n.children[yt];return new qt(n.segments.concat(e.segments),e.children)}return n}(new qt(n.segments,e))}function Xa(n){return n instanceof vi}function om(n,e,t,r,i){if(0===t.length)return Io(e.root,e.root,e.root,r,i);const a=function oh(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ip(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return cr(a.outlets,(_,w)=>{f[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new ip(t,e,r)}(t);return a.toRoot()?Io(e.root,e.root,new qt([],{}),r,i):function l(_){const w=function sp(n,e,t,r){if(n.isAbsolute)return new Co(e.root,!0,0);if(-1===r)return new Co(t,t===e.root,0);return function Bc(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new c.vHH(4005,!1);i=r.segments.length}return new Co(r,!1,i-a)}(t,r+(cl(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),C=w.processChildren?nr(w.segmentGroup,w.index,a.commands):ah(w.segmentGroup,w.index,a.commands);return Io(e.root,w.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function cl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function sh(n){return"object"==typeof n&&null!=n&&n.outlets}function Io(n,e,t,r,i){let l,a={};r&&cr(r,(_,w)=>{a[w]=Array.isArray(_)?_.map(C=>`${C}`):`${_}`}),l=n===e?t:am(n,e,t);const f=rh(ul(l));return new vi(f,a,i)}function am(n,e,t){const r={};return cr(n.children,(i,a)=>{r[a]=i===e?t:am(i,e,t)}),new qt(n.segments,r)}class ip{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&cl(r[0]))throw new c.vHH(4003,!1);const i=r.find(sh);if(i&&i!==eh(r))throw new c.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Co{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ah(n,e,t){if(n||(n=new qt([],{})),0===n.segments.length&&n.hasChildren())return nr(n,e,t);const r=function eu(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(sh(f))break;const _=`${f}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!$c(_,w,l))return a;r+=2}else{if(!$c(_,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new qt(n.segments.slice(0,r.pathIndex),{});return a.children[yt]=new qt(n.segments.slice(r.pathIndex),n.children),nr(a,0,i)}return r.match&&0===i.length?new qt(n.segments,{}):r.match&&!n.hasChildren()?hl(n,e,t):r.match?nr(n,0,i):hl(n,e,t)}function nr(n,e,t){if(0===t.length)return new qt(n.segments,{});{const r=function dl(n){return sh(n[0])?n[0].outlets:{[yt]:n}}(t),i={};return!r[yt]&&n.children[yt]&&1===n.numberOfChildren&&0===n.children[yt].segments.length?nr(n.children[yt],e,t):(cr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=ah(n.children[l],e,a))}),cr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new qt(n.segments,i))}}function hl(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(sh(a)){const _=jc(a.outlets);return new qt(r,_)}if(0===i&&cl(t[0])){r.push(new rl(n.segments[e].path,uh(t[0]))),i++;continue}const l=sh(a)?a.outlets[yt]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&cl(f)?(r.push(new rl(l,uh(f))),i+=2):(r.push(new rl(l,{})),i++)}return new qt(r,{})}function jc(n){const e={};return cr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=hl(new qt([],{}),0,t))}),e}function uh(n){const e={};return cr(n,(t,r)=>e[r]=`${t}`),e}function $c(n,e,t){return n==t.path&&Hs(e,t.parameters)}const Hc="imperative";class Es{constructor(e,t){this.id=e,this.url=t}}class op extends Es{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ci extends Es{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fl extends Es{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Gc extends Es{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class lh extends Es{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tu extends Es{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class um extends Es{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wi extends Es{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lm extends Es{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ap extends Es{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class up{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bo{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class pl{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qc{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ch{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cm{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ky=(()=>{class n{createUrlTree(t,r,i,a,l,f){return om(t||r.root,i,a,l,f)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),v=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(e){return ky.\u0275fac(e)},providedIn:"root"}),n})();class p{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=m(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=m(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=E(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return E(e,this._root).map(t=>t.value)}}function m(n,e){if(n===e.value)return e;for(const t of e.children){const r=m(n,t);if(r)return r}return null}function E(n,e){if(n===e.value)return[e];for(const t of e.children){const r=E(n,t);if(r.length)return r.unshift(e),r}return[]}class x{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function N(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class K extends p{constructor(e,t){super(e),this.snapshot=t,ml(this,e)}toString(){return this.snapshot.toString()}}function he(n,e){const t=function je(n,e){const l=new Vn([],{},{},"",{},yt,e,null,n.root,-1,{});return new ns("",new x(l,[]))}(n,e),r=new Li([new rl("",{})]),i=new Li({}),a=new Li({}),l=new Li({}),f=new Li(""),_=new ze(r,i,l,f,a,yt,e,t.root);return _.snapshot=t.root,new K(new x(_,[]),t)}class ze{constructor(e,t,r,i,a,l,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.title=this.data?.pipe((0,D.U)(w=>w[Nc]))??Ye(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,D.U)(e=>nl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,D.U)(e=>nl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function It(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function ht(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Vn{get title(){return this.data?.[Nc]}constructor(e,t,r,i,a,l,f,_,w,C,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=C,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=nl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ns extends p{constructor(e,t){super(t),this.url=e,ml(this,t)}toString(){return lp(this._root)}}function ml(n,e){e.value._routerState=n,e.children.forEach(t=>ml(n,t))}function lp(n){const e=n.children.length>0?` { ${n.children.map(lp).join(", ")} } `:"";return`${n.value}${e}`}function ca(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Hs(e.params,t.params)||n.params.next(t.params),function Pc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Hs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function rs(n,e){const t=Hs(n.params,e.params)&&function Xf(n,e){return Ka(n,e)&&n.every((t,r)=>Hs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||rs(n.parent,e.parent))}function da(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function cp(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return da(n,r,i);return da(n,r)})}(n,e,t);return new x(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>da(n,f)),l}}const r=function dp(n){return new ze(new Li(n.url),new Li(n.params),new Li(n.queryParams),new Li(n.fragment),new Li(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>da(n,a));return new x(r,i)}}const dh="ngNavigationCancelingError";function hm(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Xa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Oy(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Oy(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[dh]=!0,r.cancellationCode=e,t&&(r.url=t),r}function yl(n){return hh(n)&&Xa(n.url)}function hh(n){return n&&n[dh]}class $P{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new fm,this.attachRef=null}}let fm=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new $P,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hp=!1;let Fy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=yt,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.parentContexts=(0,c.f3M)(fm),this.location=(0,c.f3M)(c.s_b),this.changeDetector=(0,c.f3M)(c.sBO),this.environmentInjector=(0,c.f3M)(c.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,hp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,hp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,hp);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new c.vHH(4013,hp);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,_=new jD(t,f,i.injector);if(r&&function $D(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(l);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(l,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[c.TTD]}),n})();class jD{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ze?this.route:e===fm?this.childContexts:this.parent.get(e,t)}}let Ly=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},dependencies:[Fy],encapsulation:2}),n})();function Uy(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function pm(n){const e=n.children&&n.children.map(pm),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==yt&&(t.component=Ly),t}function Gs(n){return n.outlet||yt}function IE(n,e){const t=n.filter(r=>Gs(r)===e);return t.push(...n.filter(r=>Gs(r)!==e)),t}function fp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class CE{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ca(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=N(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),cr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=N(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=N(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=N(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new cm(a.value.snapshot))}),e.children.length&&this.forwardEvent(new qc(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(ca(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),ca(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=fp(i.snapshot),_=f?.get(c._Vd)??null;l.attachRef=null,l.route=i,l.resolver=_,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class zD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class By{constructor(e,t){this.component=e,this.route=t}}function pp(n,e,t){const r=n._root;return fh(r,e?e._root:null,t,[r.value])}function Wc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:r}function fh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=N(e);return n.children.forEach(l=>{(function bE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const _=function GP(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ka(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ka(n.url,e.url)||!Hs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rs(n,e)||!Hs(n.queryParams,e.queryParams);default:return!rs(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new zD(r)):(a.data=l.data,a._resolvedData=l._resolvedData),fh(n,e,a.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new By(f.outlet.component,l))}else l&&gp(e,f,i),i.canActivateChecks.push(new zD(r)),fh(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),cr(a,(l,f)=>gp(l,t.getContext(f),i)),i}function gp(n,e,t){const r=N(n),i=n.value;cr(r,(a,l)=>{gp(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new By(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ph(n){return"function"==typeof n}function nu(n){return n instanceof oa||"EmptyError"===n?.name}const gm=Symbol("INITIAL_VALUE");function vl(){return Un(n=>it(n.map(e=>e.pipe(Kd(1),Mc(gm)))).pipe((0,D.U)(e=>{for(const t of e)if(!0!==t){if(t===gm)return gm;if(!1===t||t instanceof vi)return t}return!0}),ws(e=>e!==gm),Kd(1)))}function Wy(n){return(0,aa.z)((0,li.b)(e=>{if(Xa(e))throw hm(0,e)}),(0,D.U)(e=>!0===e))}const Zy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function AE(n,e,t,r,i){const a=Ky(n,e,t);return a.matched?function gh(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ye(i.map(l=>{const f=Wc(l,n);return zn(function Gy(n){return n&&ph(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(vl(),Wy()):Ye(!0)}(r=Uy(e,r),e,t).pipe((0,D.U)(l=>!0===l?a:{...Zy})):Ye(a)}function Ky(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Zy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||tm)(t,n,e);if(!i)return{...Zy};const a={};cr(i.posParams,(f,_)=>{a[_]=f.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function mh(n,e,t,r){if(t.length>0&&function JD(n,e,t){return t.some(r=>Yy(n,e,r)&&Gs(r)!==yt)}(n,t,r)){const a=new qt(e,function xE(n,e,t,r){const i={};i[yt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Gs(a)!==yt){const l=new qt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Gs(a)]=l}return i}(n,e,r,new qt(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function RE(n,e,t){return t.some(r=>Yy(n,e,r))}(n,t,r)){const a=new qt(n.segments,function XD(n,e,t,r,i){const a={};for(const l of r)if(Yy(n,t,l)&&!i[Gs(l)]){const f=new qt([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,a[Gs(l)]=f}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new qt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Yy(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ME(n,e,t,r){return!!(Gs(n)===r||r!==yt&&Yy(e,t,n))&&("**"===n.path||Ky(e,n,t).matched)}function _h(n,e,t){return 0===e.length&&!n.children[t]}const ym=!1;class ru{constructor(e){this.segmentGroup=e||null}}class yh{constructor(e){this.urlTree=e}}function mp(n){return ui(new ru(n))}function Qy(n){return ui(new yh(n))}class NE{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=mh(this.urlTree.root,[],[],this.config).segmentGroup,t=new qt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,yt).pipe((0,D.U)(a=>this.createUrlTree(ul(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Wa(a=>{if(a instanceof yh)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof ru?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,yt).pipe((0,D.U)(i=>this.createUrlTree(ul(i),e.queryParams,e.fragment))).pipe(Wa(i=>{throw i instanceof ru?this.noMatchError(i):i}))}noMatchError(e){return new c.vHH(4002,ym)}createUrlTree(e,t,r){const i=rh(e);return new vi(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,D.U)(a=>new qt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,en.D)(i).pipe(tl(a=>{const l=r.children[a],f=IE(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,D.U)(_=>({segment:_,outlet:a})))}),Eo((a,l)=>(a[l.outlet]=l.segment,a),{}),Qd())}expandSegment(e,t,r,i,a,l){return(0,en.D)(r).pipe(tl(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(Wa(w=>{if(w instanceof ru)return Ye(null);throw w}))),ua(f=>!!f),Wa((f,_)=>{if(nu(f))return _h(t,i,a)?Ye(new qt([],{})):mp(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return ME(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):mp(t):mp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Qy(a):this.lineralizeSegments(r,a).pipe((0,tr.z)(l=>{const f=new qt(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:_,remainingSegments:w,positionalParamSegments:C}=Ky(t,i,a);if(!f)return mp(t);const S=this.applyRedirectCommands(_,i.redirectTo,C);return i.redirectTo.startsWith("/")?Qy(S):this.lineralizeSegments(i,S).pipe((0,tr.z)(P=>this.expandSegment(e,t,r,P.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=Uy(r,e),r.loadChildren?(r._loadedRoutes?Ye({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,D.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new qt(i,{})))):Ye(new qt(i,{}))):AE(t,r,i,e).pipe(Un(({matched:l,consumedSegments:f,remainingSegments:_})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,tr.z)(C=>{const S=C.injector??e,P=C.routes,{segmentGroup:U,slicedSegments:$}=mh(t,f,_,P),le=new qt(U.segments,U.children);if(0===$.length&&le.hasChildren())return this.expandChildren(S,P,le).pipe((0,D.U)(Xe=>new qt(f,Xe)));if(0===P.length&&0===$.length)return Ye(new qt(f,{}));const ge=Gs(r)===a;return this.expandSegment(S,le,P,$,ge?yt:a,!0).pipe((0,D.U)(ct=>new qt(f.concat(ct.segments),ct.children)))})):mp(t)))}getChildConfig(e,t,r){return t.children?Ye({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ye({routes:t._loadedRoutes,injector:t._loadedInjector}):function QD(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ye(!0):Ye(i.map(l=>{const f=Wc(l,n);return zn(function $y(n){return n&&ph(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(vl(),Wy())}(e,t,r).pipe((0,tr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,li.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function tS(n){return ui(Oy(ym,3))}())):Ye({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ye(r);if(i.numberOfChildren>1||!i.children[yt])return ui(new c.vHH(4e3,ym));i=i.children[yt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new vi(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return cr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return cr(t.children,(f,_)=>{l[_]=this.createSegmentGroup(e,f,r,i)}),new qt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new c.vHH(4001,ym);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Xy{}class _p{constructor(e,t,r,i,a,l,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.urlSerializer=f}recognize(){const e=mh(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,yt).pipe((0,D.U)(t=>{if(null===t)return null;const r=new Vn([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},yt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new x(r,t),a=new ns(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=It(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,en.D)(Object.keys(r.children)).pipe(tl(i=>{const a=r.children[i],l=IE(t,i);return this.processSegmentGroup(e,l,a,i)}),Eo((i,a)=>i&&a?(i.push(...a),i):null),function Jg(n,e=!1){return(0,yr.e)((t,r)=>{let i=0;t.subscribe((0,we.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),qf(null),Qd(),(0,D.U)(i=>{if(null===i)return null;const a=kE(i);return function iS(n){n.sort((e,t)=>e.value.outlet===yt?-1:t.value.outlet===yt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,en.D)(t).pipe(tl(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),ua(l=>!!l),Wa(l=>{if(nu(l))return _h(r,i,a)?Ye([]):Ye(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!ME(t,r,i,a))return Ye(null);let l;if("**"===t.path){const f=i.length>0?eh(i).parameters:{},_=FE(r)+i.length;l=Ye({snapshot:new Vn(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ha(t),Gs(t),t.component??t._loadedComponent??null,t,OE(r),_,LE(t)),consumedSegments:[],remainingSegments:[]})}else l=AE(r,t,i,e).pipe((0,D.U)(({matched:f,consumedSegments:_,remainingSegments:w,parameters:C})=>{if(!f)return null;const S=FE(r)+_.length;return{snapshot:new Vn(_,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ha(t),Gs(t),t.component??t._loadedComponent??null,t,OE(r),S,LE(t)),consumedSegments:_,remainingSegments:w}}));return l.pipe(Un(f=>{if(null===f)return Ye(null);const{snapshot:_,consumedSegments:w,remainingSegments:C}=f;e=t._injector??e;const S=t._loadedInjector??e,P=function sS(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:U,slicedSegments:$}=mh(r,w,C,P.filter(ge=>void 0===ge.redirectTo));if(0===$.length&&U.hasChildren())return this.processChildren(S,P,U).pipe((0,D.U)(ge=>null===ge?null:[new x(_,ge)]));if(0===P.length&&0===$.length)return Ye([new x(_,[])]);const le=Gs(t)===a;return this.processSegment(S,P,U,$,le?yt:a).pipe((0,D.U)(ge=>null===ge?null:[new x(_,ge)]))}))}}function oS(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function kE(n){const e=[],t=new Set;for(const r of n){if(!oS(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=kE(r.children);e.push(new x(r.value,i))}return e.filter(r=>!t.has(r))}function OE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function FE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function ha(n){return n.data||{}}function LE(n){return n.resolve||{}}function ev(n){return"string"==typeof n.title||null===n.title}function tv(n){return Un(e=>{const t=n(e);return t?(0,en.D)(t).pipe((0,D.U)(()=>e)):Ye(e)})}const vh=new c.OlP("ROUTES");let Is=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ye(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=zn(t.loadComponent()).pipe((0,D.U)(nv),(0,li.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Xd(()=>{this.componentLoaders.delete(t)})),i=new Gf(r,()=>new _r.x).pipe(Zd());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ye({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,D.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,C=!1;Array.isArray(f)?w=f:(_=f.create(t).injector,w=nm(_.get(vh,[],c.XFs.Self|c.XFs.Optional)));return{routes:w.map(pm),injector:_}}),Xd(()=>{this.childrenLoaders.delete(r)})),l=new Gf(a,()=>new _r.x).pipe(Zd());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return zn(t()).pipe((0,D.U)(nv),(0,tr.z)(i=>i instanceof c.YKP||Array.isArray(i)?Ye(i):(0,en.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3),c.LFG(c.Sil))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nv(n){return function lS(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Em=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new _r.x,this.configLoader=(0,c.f3M)(Is),this.environmentInjector=(0,c.f3M)(c.lqb),this.urlSerializer=(0,c.f3M)(Ya),this.rootContexts=(0,c.f3M)(fm),this.navigationId=0,this.afterPreactivation=()=>Ye(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new bo(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new up(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Li({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Hc,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ws(r=>0!==r.id),(0,D.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Un(r=>{let i=!1,a=!1;return Ye(r).pipe((0,li.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Un(l=>{const f=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const C="";return this.events.next(new Gc(l.id,t.serializeUrl(r.rawUrl),C,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Wr.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return $E(l.source)&&(t.browserUrlTree=l.extractedUrl),Ye(l).pipe(Un(C=>{const S=this.transitions?.getValue();return this.events.next(new op(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),S!==this.transitions?.getValue()?Wr.E:Promise.resolve(C)}),function PE(n,e,t,r){return Un(i=>function nS(n,e,t,r,i){return new NE(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,D.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,li.b)(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},r.urlAfterRedirects=C.urlAfterRedirects}),function uS(n,e,t,r,i){return(0,tr.z)(a=>function Jy(n,e,t,r,i,a,l="emptyOnly"){return new _p(n,e,t,r,i,l,a).recognize().pipe(Un(f=>null===f?function rS(n){return new qn.y(e=>e.error(n))}(new Xy):Ye(f)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,D.U)(l=>({...a,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,li.b)(C=>{if(r.targetSnapshot=C.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!C.extras.skipLocationChange){const P=t.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);t.setBrowserUrl(P,C)}t.browserUrlTree=C.urlAfterRedirects}const S=new tu(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(S)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:C,extractedUrl:S,source:P,restoredState:U,extras:$}=l,le=new op(C,this.urlSerializer.serialize(S),P,U);this.events.next(le);const ge=he(S,this.rootComponentType).snapshot;return Ye(r={...l,targetSnapshot:ge,urlAfterRedirects:S,extras:{...$,skipLocationChange:!1,replaceUrl:!1}})}{const C="";return this.events.next(new Gc(l.id,t.serializeUrl(r.extractedUrl),C,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Wr.E}}),(0,li.b)(l=>{const f=new um(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),(0,D.U)(l=>r={...l,guards:pp(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function mm(n,e){return(0,tr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?Ye({...t,guardsResult:!0}):function KD(n,e,t,r){return(0,en.D)(n).pipe((0,tr.z)(i=>function YD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Ye(a.map(f=>{const _=fp(e)??i,w=Wc(f,_);return zn(function WD(n){return n&&ph(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(ua())})).pipe(vl()):Ye(!0)}(i.component,i.route,t,e,r)),ua(i=>!0!==i,!0))}(l,r,i,n).pipe((0,tr.z)(f=>f&&function TE(n){return"boolean"==typeof n}(f)?function qy(n,e,t,r){return(0,en.D)(e).pipe(tl(i=>Ln(function Zc(n,e){return null!==n&&e&&e(new pl(n)),Ye(!0)}(i.route.parent,r),function _m(n,e){return null!==n&&e&&e(new ch(n)),Ye(!0)}(i.route,r),function zy(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function jy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>el(()=>Ye(l.guards.map(_=>{const w=fp(l.node)??t,C=Wc(_,w);return zn(function Hy(n){return n&&ph(n.canActivateChild)}(C)?C.canActivateChild(r,n):w.runInContext(()=>C(r,n))).pipe(ua())})).pipe(vl())));return Ye(a).pipe(vl())}(n,i.path,t),function SE(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ye(!0);const i=r.map(a=>el(()=>{const l=fp(e)??t,f=Wc(a,l);return zn(function qP(n){return n&&ph(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(ua())}));return Ye(i).pipe(vl())}(n,i.route,t))),ua(i=>!0!==i,!0))}(r,a,n,e):Ye(f)),(0,D.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,l=>this.events.next(l)),(0,li.b)(l=>{if(r.guardsResult=l.guardsResult,Xa(l.guardsResult))throw hm(0,l.guardsResult);const f=new wi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),ws(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),tv(l=>{if(l.guards.canActivateChecks.length)return Ye(l).pipe((0,li.b)(f=>{const _=new lm(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}),Un(f=>{let _=!1;return Ye(f).pipe(function zP(n,e){return(0,tr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ye(t);let a=0;return(0,en.D)(i).pipe(tl(l=>function WP(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!ev(i)&&(a[Nc]=i.title),function UE(n,e,t,r){const i=function ZP(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Ye({});const a={};return(0,en.D)(i).pipe((0,tr.z)(l=>function VE(n,e,t,r){const i=fp(e)??r,a=Wc(n,i);return zn(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(ua(),(0,li.b)(f=>{a[l]=f}))),Yd(1),function em(n){return(0,D.U)(()=>n)}(a),Wa(l=>nu(l)?Wr.E:ui(l)))}(a,n,e,r).pipe((0,D.U)(l=>(n._resolvedData=l,n.data=It(n,t).resolve,i&&ev(i)&&(n.data[Nc]=i.title),null)))}(l.route,r,n,e)),(0,li.b)(()=>a++),Yd(1),(0,tr.z)(l=>a===i.length?Ye(t):Wr.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,li.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,li.b)(f=>{const _=new ap(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}))}),tv(l=>{const f=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,li.b)(C=>{_.component=C}),(0,D.U)(()=>{})));for(const C of _.children)w.push(...f(C));return w};return it(f(l.targetSnapshot.root)).pipe(qf(),Kd(1))}),tv(()=>this.afterPreactivation()),(0,D.U)(l=>{const f=function _l(n,e,t){const r=da(n,e._root,t?t._root:void 0);return new K(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:f}}),(0,li.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,D.U)(r=>(new CE(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,li.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new ci(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),Xd(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Wa(l=>{if(a=!0,hh(l)){yl(l)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new fl(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(f),yl(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||$E(r.source)};t.scheduleNavigation(_,Hc,null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new lh(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return Wr.E}))}))}cancelNavigationTransition(t,r,i){const a=new fl(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $E(n){return n!==Hc}let HE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===yt);return r}getResolvedTitleForRoute(t){return t.data[Nc]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(GE)},providedIn:"root"}),n})(),GE=(()=>{class n extends HE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ia))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(hS)},providedIn:"root"}),n})();class dS{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let hS=(()=>{class n extends dS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vp=new c.OlP("",{providedIn:"root",factory:()=>({})});let qE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(zE)},providedIn:"root"}),n})(),zE=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fS(n){throw n}function ZE(n,e,t){return e.parse("/")}const pS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let is=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,c.f3M)(c.c2e),this.isNgZoneEnabled=!1,this.options=(0,c.f3M)(vp,{optional:!0})||{},this.errorHandler=this.options.errorHandler||fS,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ZE,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,c.f3M)(qE),this.routeReuseStrategy=(0,c.f3M)(cS),this.urlCreationStrategy=(0,c.f3M)(v),this.titleStrategy=(0,c.f3M)(HE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=nm((0,c.f3M)(vh,{optional:!0})??[]),this.navigationTransitions=(0,c.f3M)(Em),this.urlSerializer=(0,c.f3M)(Ya),this.location=(0,c.f3M)(Oe),this.isNgZoneEnabled=(0,c.f3M)(c.R0b)instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new vi,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=he(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Hc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(pm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:_}=r,w=_?this.currentUrlTree.fragment:l;let C=null;switch(f){case"merge":C={...this.currentUrlTree.queryParams,...a};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=a||null}return null!==C&&(C=this.removeEmptyProps(C)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,C,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Xa(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,Hc,null,r)}navigate(t,r={skipLocationChange:!1}){return function gS(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new c.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...pS}:!1===r?{...KE}:r,Xa(t))return Mr(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Mr(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,_,w,C;return l?(f=l.resolve,_=l.reject,w=l.promise):w=new Promise((S,P)=>{f=S,_=P}),C="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:C,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Im=(()=>{class n{constructor(t,r,i,a,l,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=f,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new _r.x;const _=l.nativeElement.tagName;this.isAnchorElement="A"===_||"AREA"===_,this.isAnchorElement?this.subscription=t.events.subscribe(w=>{w instanceof ci&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,c.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,c.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,c.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,c.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(is),c.Y36(ze),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(nt))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&c.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&c.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[c.TTD]}),n})();class wl{}let rv=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ws(t=>t instanceof ci),tl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,c.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,en.D)(i).pipe((0,Et.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ye(null);const a=i.pipe((0,tr.z)(l=>null===l?Ye(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,en.D)([a,l]).pipe((0,Et.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(is),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(wl),c.LFG(Is))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const iv=new c.OlP("");let mS=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof op?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ci&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof zc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new zc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function El(n,e){return{\u0275kind:n,\u0275providers:e}}function sv(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const r=n.get(is),i=n.get(Ip);1===n.get(ov)&&r.initialNavigation(),n.get(nI,null,c.XFs.Optional)?.setUpPreloading(),n.get(iv,null,c.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const Ip=new c.OlP("",{factory:()=>new _r.x}),ov=new c.OlP("",{providedIn:"root",factory:()=>1});const nI=new c.OlP("");function wS(n){return El(0,[{provide:nI,useExisting:rv},{provide:wl,useExisting:n}])}const av=new c.OlP("ROUTER_FORROOT_GUARD"),uv=[Oe,{provide:Ya,useClass:Jf},is,fm,{provide:ze,useFactory:function JE(n){return n.routerState.root},deps:[is]},Is,[]];function XP(){return new c.PXZ("Router",is)}let wh=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[uv,[],{provide:vh,multi:!0,useValue:t},{provide:av,useFactory:rI,deps:[[is,new c.FiY,new c.tp0]]},{provide:vp,useValue:r||{}},r?.useHash?{provide:nt,useClass:Se}:{provide:nt,useClass:De},{provide:iv,useFactory:()=>{const n=(0,c.f3M)(Go),e=(0,c.f3M)(c.R0b),t=(0,c.f3M)(vp),r=(0,c.f3M)(Em),i=(0,c.f3M)(Ya);return t.scrollOffset&&n.setOffset(t.scrollOffset),new mS(i,r,n,e,t)}},r?.preloadingStrategy?wS(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:XP},r?.initialNavigation?bS(r):[],[{provide:lv,useFactory:sv},{provide:c.tb,multi:!0,useExisting:lv}]]}}static forChild(t){return{ngModule:n,providers:[{provide:vh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(av,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Ly]}),n})();function rI(n){return"guarded"}function bS(n){return["disabled"===n.initialNavigation?El(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(is);return()=>{e.setUpLocationChangeListener()}}},{provide:ov,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?El(2,[{provide:ov,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(de,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const a=e.get(is),l=e.get(Ip);(function r(i){e.get(is).events.pipe(ws(l=>l instanceof ci||l instanceof fl||l instanceof lh),(0,D.U)(l=>l instanceof ci||l instanceof fl&&(0===l.code||1===l.code)&&null),ws(l=>null!==l),Kd(1)).subscribe(()=>{i()})})(()=>{i(!0)}),e.get(Em).afterPreactivation=()=>(i(!0),l.closed?Ye(void 0):l),a.initialNavigation()}))}}]).\u0275providers:[]]}const lv=new c.OlP("");function Cm(n,e){if(1&n&&(c.TgZ(0,"li",21),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(t)}}function Ih(n,e){if(1&n&&(c.TgZ(0,"li",21),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(t)}}function cv(n,e){if(1&n&&(c.TgZ(0,"li",21),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(t)}}function bp(n,e){if(1&n&&(c.TgZ(0,"li",21),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(t)}}function dv(n,e){if(1&n&&(c.TgZ(0,"li",21),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(t)}}function bm(n,e){if(1&n&&(c.TgZ(0,"li",21),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(t)}}class Ch{constructor(){this.PROB_STATEMENT="Team lead is managing a group of team members. Each members sending a daily status report about the work they did at the end of day. Members are using mail to send report. Team lead needs to review the reports and acknowledge it and sent suggestions",this.LEAD_PROBLEM=["Too much emails","High chance for not able to review reports","Unable to filter particular member report","Unable to categories important reports","Much Time consuming","Effect on lead work efficiency","No seperate platform for report","Unable to maintain report for longer time"],this.MEMBER_PROBLEM=[" Use of work mail"," Unaware of report format","Half information remain same","More time consuming","No platform for maintaining static info","less focus on actual content "],this.EXTRACT="Based on understanding the problems of Team Lead and Member, they need a seperate platform instead of work email ie. an application where",this.LEAD_CAN=["Review the report as per his convienence","Able to filter report on member name basis","Able to categorize report importance","Can be able to review report anytime","Able to Store report for longer time","Provide suggestions and comments on report","Analyse the work progress of member based on stored data","No need to use email","Less pressure to acknowledge report on time","Able to set report format"," Able to mention expected information by member"],this.MEMBER_CAN=["Have a particular report format","Auto populate repeated information","Able to create our own profile","No need to use email","Send report to lead in desired format"],this.SOLUTION="A web application needs to be created which will give facility to both Team lead and Member to manage daily reports instead of mail. In this application Members can send reports to TeamLead and TeamLead can provide his comment and suggestions to it.",this.FACILITY=["Reports Storage"," Paricular Report format","Review and analyse report anytime","Maintain members profile","Analyse work progress","Time and Date wise sorting"],this.DEV_IDEA="As this is a web application, its development will be divided in 2 parts.. Frontend and Backend .FrontEnd of application will be designed with Angular framework and for backend will be using Google Firebase..",this.FRONTEND=["HTML","CSS","Bootstrap","Typescript","Angular framework"],this.BACKEND=["Google Firebase noSql cloud data storage"],this.DEPLOY="No any paid services are used for deploying this application. For deploying frontend angular application , we are using Github Pages.. And for Backend apis and database.. we are using google Firebase, its a NoSQL cloud based data storage system"}}function aI(n,e){return{type:7,name:n,definitions:e,options:{}}}function Tm(n,e=null){return{type:4,styles:e,timings:n}}function Dm(n){return{type:6,styles:n,offset:null}}function hv(n,e,t){return{type:0,name:n,styles:e,options:t}}function fv(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}Ch.\u0275fac=function(e){return new(e||Ch)},Ch.\u0275cmp=c.Xpm({type:Ch,selectors:[["app-document"]],decls:117,vars:11,consts:[[1,"container-fluid","padd"],[1,"card","topic"],[1,"texsiz"],[1,"card","cardcont"],[1,"contentsize"],["src","/assets/infoblink.png","alt","Chania",1,"img-responsive","imagecenter"],["class","contentsizec",4,"ngFor","ngForOf"],[1,"texsizc"],[1,"row","padd"],[1,"col-6"],[1,"card",2,"width","400px"],["src","/assets/database.jpg","alt","Card image","width","50","height","200",1,"card-img-top"],[1,"card-body"],[1,"card-title","texsizcd"],[1,"card-text"],["src","/assets/report.png","alt","Card image","width","50","height","200",1,"card-img-top"],["src","/assets/analyse.png","alt","Card image","width","50","height","200",1,"card-img-top"],["src","/assets/profile.png","alt","Card image","width","50","height","200",1,"card-img-top"],["src","/assets/workprog.jpg","alt","Card image","width","50","height","200",1,"card-img-top"],["src","/assets/time.png","alt","Card image","width","50","height","200",1,"card-img-top"],[1,"texsizc",2,"margin-top","15px"],[1,"contentsizec"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),c._uU(3,"Problem Statement"),c.qZA()(),c.TgZ(4,"div",3)(5,"p",4),c._uU(6),c.qZA(),c._UZ(7,"img",5),c.qZA(),c.TgZ(8,"div",1)(9,"h5",2),c._uU(10,"Problem with Team Lead"),c.qZA()(),c.TgZ(11,"div",3)(12,"ul"),c.YNc(13,Cm,2,1,"li",6),c.qZA()(),c.TgZ(14,"div",1)(15,"h5",2),c._uU(16,"Problem with Members"),c.qZA()(),c.TgZ(17,"div",3)(18,"ul"),c.YNc(19,Ih,2,1,"li",6),c.qZA()(),c.TgZ(20,"div",1)(21,"h5",2),c._uU(22,"Problem Extract"),c.qZA()(),c.TgZ(23,"div",3)(24,"p",4),c._uU(25),c.qZA(),c.TgZ(26,"span",7),c._uU(27,"Lead can"),c.qZA(),c.TgZ(28,"ul"),c.YNc(29,cv,2,1,"li",6),c.qZA(),c.TgZ(30,"span",7),c._uU(31,"Member can"),c.qZA(),c.TgZ(32,"ul"),c.YNc(33,bp,2,1,"li",6),c.qZA()(),c.TgZ(34,"div",1)(35,"h5",2),c._uU(36,"Solution"),c.qZA()(),c.TgZ(37,"div",3)(38,"p",4),c._uU(39),c.qZA(),c.TgZ(40,"span",7),c._uU(41,"Facilities"),c.qZA(),c.TgZ(42,"div",8)(43,"div",9)(44,"div",10),c._UZ(45,"img",11),c.TgZ(46,"div",12)(47,"h4",13),c._uU(48,"Storage"),c.qZA(),c.TgZ(49,"p",14),c._uU(50,"Reports will be stored in Database"),c.qZA()()()(),c.TgZ(51,"div",9)(52,"div",10),c._UZ(53,"img",15),c.TgZ(54,"div",12)(55,"h4",13),c._uU(56,"Format"),c.qZA(),c.TgZ(57,"p",14),c._uU(58,"Report format will be set by lead"),c.qZA()()()()(),c.TgZ(59,"div",8)(60,"div",9)(61,"div",10),c._UZ(62,"img",16),c.TgZ(63,"div",12)(64,"h4",13),c._uU(65,"Analyse"),c.qZA(),c.TgZ(66,"p",14),c._uU(67,"Review and analyse report anytime"),c.qZA()()()(),c.TgZ(68,"div",9)(69,"div",10),c._UZ(70,"img",17),c.TgZ(71,"div",12)(72,"h4",13),c._uU(73,"Profile"),c.qZA(),c.TgZ(74,"p",14),c._uU(75,"Member can maintain their profile"),c.qZA()()()()(),c.TgZ(76,"div",8)(77,"div",9)(78,"div",10),c._UZ(79,"img",18),c.TgZ(80,"div",12)(81,"h4",13),c._uU(82,"Work Progress"),c.qZA(),c.TgZ(83,"p",14),c._uU(84,"Member working progress can be easily observed"),c.qZA()()()(),c.TgZ(85,"div",9)(86,"div",10),c._UZ(87,"img",19),c.TgZ(88,"div",12)(89,"h4",13),c._uU(90,"Time & Date"),c.qZA(),c.TgZ(91,"p",14),c._uU(92,"Reports will be stored based on time and date"),c.qZA()()()()()(),c.TgZ(93,"div",1)(94,"h5",2),c._uU(95,"Development Idea"),c.qZA()(),c.TgZ(96,"div",3)(97,"p",4),c._uU(98),c.qZA()(),c.TgZ(99,"div",1)(100,"h5",2),c._uU(101,"Tools and Technologies"),c.qZA()(),c.TgZ(102,"div",3)(103,"span",20),c._uU(104,"FrontEnd"),c.qZA(),c.TgZ(105,"ul"),c.YNc(106,dv,2,1,"li",6),c.qZA(),c.TgZ(107,"span",7),c._uU(108,"BackEnd & Database"),c.qZA(),c.TgZ(109,"ul"),c.YNc(110,bm,2,1,"li",6),c.qZA()(),c.TgZ(111,"div",1)(112,"h5",2),c._uU(113,"Deployment/Live"),c.qZA()(),c.TgZ(114,"div",3)(115,"p",4),c._uU(116),c.qZA()()()),2&e&&(c.xp6(6),c.Oqu(t.PROB_STATEMENT),c.xp6(7),c.Q6J("ngForOf",t.LEAD_PROBLEM),c.xp6(6),c.Q6J("ngForOf",t.MEMBER_PROBLEM),c.xp6(6),c.Oqu(t.EXTRACT),c.xp6(4),c.Q6J("ngForOf",t.LEAD_CAN),c.xp6(4),c.Q6J("ngForOf",t.MEMBER_CAN),c.xp6(6),c.Oqu(t.SOLUTION),c.xp6(59),c.Oqu(t.DEV_IDEA),c.xp6(8),c.Q6J("ngForOf",t.FRONTEND),c.xp6(4),c.Q6J("ngForOf",t.BACKEND),c.xp6(6),c.Oqu(t.DEPLOY))},dependencies:[Jr],styles:[".padd[_ngcontent-%COMP%]{padding:40px}.cardcont[_ngcontent-%COMP%]{background-color:#fff;margin-bottom:30px;box-shadow:10px 10px 5px 5px #add8e6}.imagecenter[_ngcontent-%COMP%]{height:540px;width:-moz-fit-content;width:fit-content}.topic[_ngcontent-%COMP%]{box-shadow:10px 10px 5px 5px #add8e6;width:25%;margin-bottom:20px}.texsiz[_ngcontent-%COMP%]{font-family:Gill Sans;padding-left:10px;font-weight:700;padding-top:5px;font-size:22px}.texsizc[_ngcontent-%COMP%]{font-family:Gill Sans;padding-left:50px;font-weight:700;font-size:18px}.texsizcd[_ngcontent-%COMP%]{font-family:Gill Sans;padding-left:5px;font-weight:700;font-size:18px}.contentsize[_ngcontent-%COMP%]{font-family:Georgia;padding-left:50px;padding-right:100px;padding-top:40px;font-weight:100;font-size:18px}.contentsizec[_ngcontent-%COMP%]{font-family:Georgia;padding-left:50px;padding-right:100px;font-weight:100;font-size:18px;padding-top:4px}"]});const lI=["toast-component",""];function RS(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.remove())}),c.TgZ(1,"span",6),c._uU(2,"\xd7"),c.qZA()()}}function cI(n,e){if(1&n&&(c.ynx(0),c._uU(1),c.BQk()),2&n){const t=c.oxw(2);c.xp6(1),c.hij("[",t.duplicatesCount+1,"]")}}function MS(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1),c.YNc(2,cI,2,1,"ng-container",4),c.qZA()),2&n){const t=c.oxw();c.Tol(t.options.titleClass),c.uIk("aria-label",t.title),c.xp6(1),c.hij(" ",t.title," "),c.xp6(1),c.Q6J("ngIf",t.duplicatesCount)}}function NS(n,e){if(1&n&&c._UZ(0,"div",7),2&n){const t=c.oxw();c.Tol(t.options.messageClass),c.Q6J("innerHTML",t.message,c.oJD)}}function pv(n,e){if(1&n&&(c.TgZ(0,"div",8),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Tol(t.options.messageClass),c.uIk("aria-label",t.message),c.xp6(1),c.hij(" ",t.message," ")}}function PS(n,e){if(1&n&&(c.TgZ(0,"div"),c._UZ(1,"div",9),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Udp("width",t.width+"%")}}class dI{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class US{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class VS{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new _r.x,this._activate=new _r.x,this._manualClose=new _r.x,this._resetTimeout=new _r.x,this._countDuplicate=new _r.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class Sm{constructor(e,t,r,i,a,l){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=a,this.toastRef=l,this._onTap=new _r.x,this._onAction=new _r.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const hI=new c.OlP("ToastConfig");class BS extends US{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class xm{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let mv=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rm=(()=>{class n{constructor(t,r,i,a){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=a,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new BS(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new xm(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(mv),c.LFG(c._Vd),c.LFG(c.z2F),c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Mm=(()=>{class n{constructor(t,r,i,a,l){this.overlay=r,this._injector=i,this.sanitizer=a,this.ngZone=l,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},a=""){return this._preBuildNotification(a,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,a){const{includeTitleDuplicates:l}=this.toastrConfig;for(const f of this.toasts)if((!l||l&&f.title===t)&&f.message===r)return f.toastRef.onDuplicate(i,a),f;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,a){return a.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,a)):this._buildNotification(t,r,i,a)}_buildNotification(t,r,i,a){if(!a.toastComponent)throw new Error("toastComponent required");const l=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&a.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==l)return l;this.previousToastMessage=r;let f=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(f=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const _=this.overlay.create(a.positionClass,this.overlayContainer);this.index=this.index+1;let w=r;r&&a.enableHtml&&(w=this.sanitizer.sanitize(c.q3G.HTML,r));const C=new VS(_),S=new Sm(this.index,a,w,i,t,C),U=c.zs3.create({providers:[{provide:Sm,useValue:S}],parent:this._injector}),$=new dI(a.toastComponent,U),le=_.attach($,a.newestOnTop);C.componentInstance=le.instance;const ge={toastId:this.index,title:i||"",message:r||"",toastRef:C,onShown:C.afterActivate(),onHidden:C.afterClosed(),onTap:S.onTap(),onAction:S.onAction(),portal:le};return f||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{ge.toastRef.activate()})),this.toasts.push(ge),ge}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hI),c.LFG(Rm),c.LFG(c.zs3),c.LFG(Qg),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lk={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(a=>{this.duplicatesCount=a})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Mm),c.Y36(Sm),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(c.d8E("@flyInOut",r.state),c.Tol(r.toastClasses),c.Udp("display",r.displayStyle))},attrs:lI,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(c.YNc(0,RS,3,0,"button",0),c.YNc(1,MS,3,5,"div",1),c.YNc(2,NS,1,3,"div",2),c.YNc(3,pv,2,4,"div",3),c.YNc(4,PS,2,2,"div",4)),2&t&&(c.Q6J("ngIf",r.options.closeButton),c.xp6(1),c.Q6J("ngIf",r.title),c.xp6(1),c.Q6J("ngIf",r.message&&r.options.enableHtml),c.xp6(1),c.Q6J("ngIf",r.message&&!r.options.enableHtml),c.xp6(1),c.Q6J("ngIf",r.options.progressBar))},dependencies:[gi],encapsulation:2,data:{animation:[aI("flyInOut",[hv("inactive",Dm({opacity:0})),hv("active",Dm({opacity:1})),hv("removed",Dm({opacity:0})),fv("inactive => active",Tm("{{ easeTime }}ms {{ easing }}")),fv("active => removed",Tm("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let pI=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:hI,useValue:{default:lk,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Ho]}),n})(),Tp=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),pa=(()=>{class n extends Tp{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const ss=new c.OlP("NgValueAccessor"),mI={provide:ss,useExisting:(0,c.Gpc)(()=>su),multi:!0},zS=new c.OlP("CompositionEventMode");let su=(()=>{class n extends Tp{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function qS(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(zS,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[c._Bn([mI]),c.qOj]}),n})();function Kc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function _I(n){return null!=n&&"number"==typeof n.length}const Ei=new c.OlP("NgValidators"),Il=new c.OlP("NgAsyncValidators"),ZS=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class zs{static min(e){return function yI(n){return e=>{if(Kc(e.value)||Kc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function vI(n){return e=>{if(Kc(e.value)||Kc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return yv(e)}static requiredTrue(e){return function Nm(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function wI(n){return Kc(n.value)||ZS.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Pm(n){return e=>Kc(e.value)||!_I(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function EI(n){return e=>_I(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function II(n){if(!n)return km;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Kc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return AI(e)}static composeAsync(e){return wv(e)}}function yv(n){return Kc(n.value)?{required:!0}:null}function km(n){return null}function CI(n){return null!=n}function bI(n){return(0,c.QGY)(n)?(0,en.D)(n):n}function TI(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function DI(n,e){return e.map(t=>t(n))}function vv(n){return n.map(e=>function SI(n){return!n.validate}(e)?e:t=>e.validate(t))}function AI(n){if(!n)return null;const e=n.filter(CI);return 0==e.length?null:function(t){return TI(DI(t,e))}}function xI(n){return null!=n?AI(vv(n)):null}function wv(n){if(!n)return null;const e=n.filter(CI);return 0==e.length?null:function(t){return function iu(...n){const e=(0,lr.jO)(n),{args:t,keys:r}=Xu(n),i=new qn.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let _=l,w=l;for(let C=0;C<l;C++){let S=!1;(0,vs.Xf)(t[C]).subscribe((0,we.x)(a,P=>{S||(S=!0,w--),f[C]=P},()=>_--,void 0,()=>{(!_||!S)&&(w||a.next(r?te(r,f):f),a.complete())}))}});return e?i.pipe(Q(e)):i}(DI(t,e).map(bI)).pipe((0,D.U)(TI))}}function bh(n){return null!=n?wv(vv(n)):null}function Cl(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function KS(n){return n._rawValidators}function Dp(n){return n._rawAsyncValidators}function Ev(n){return n?Array.isArray(n)?n:[n]:[]}function Om(n,e){return Array.isArray(n)?n.includes(e):n===e}function Fm(n,e){const t=Ev(e);return Ev(n).forEach(i=>{Om(t,i)||t.push(i)}),t}function RI(n,e){return Ev(e).filter(t=>!Om(n,t))}class To{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Nr extends To{get formDirective(){return null}get path(){return null}}class Zn extends To{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class bl{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Sp=(()=>{class n extends bl{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Zn,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[c.qOj]}),n})(),Tl=(()=>{class n extends bl{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Nr,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[c.qOj]}),n})();const Mp="VALID",Np="INVALID",Sh="PENDING",Ah="DISABLED";function Pp(n){return(Yc(n)?n.validators:n)||null}function Dv(n,e){return(Yc(e)?e.asyncValidators:n)||null}function Yc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Um(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[t])throw new c.vHH(1001,"")}function OI(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new c.vHH(1002,"")})}class Qc{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Mp}get invalid(){return this.status===Np}get pending(){return this.status==Sh}get disabled(){return this.status===Ah}get enabled(){return this.status!==Ah}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Fm(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Fm(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(RI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(RI(e,this._rawAsyncValidators))}hasValidator(e){return Om(this._rawValidators,e)}hasAsyncValidator(e){return Om(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Sh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ah,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Mp,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mp||this.status===Sh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ah:Mp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Sh,this._hasOwnPendingAsyncValidator=!0;const t=bI(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?Ah:this.errors?Np:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sh)?Sh:this._anyControlsHaveStatus(Np)?Np:Mp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Yc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Tv(n){return Array.isArray(n)?xI(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Lm(n){return Array.isArray(n)?bh(n):n||null}(this._rawAsyncValidators)}}class Al extends Qc{constructor(e,t,r){super(Pp(t),Dv(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){OI(this,0,e),Object.keys(e).forEach(r=>{Um(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Vm extends Al{}const Xc=new c.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>xh}),xh="always";function Op(n,e,t=xh){Bm(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function rA(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Sv(n,e)})}(n,e),function $m(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function iA(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Sv(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function FI(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Fp(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),jm(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Lp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Bm(n,e){const t=KS(n);null!==e.validator?n.setValidators(Cl(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Dp(n);null!==e.asyncValidator?n.setAsyncValidators(Cl(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Lp(e._rawValidators,i),Lp(e._rawAsyncValidators,i)}function jm(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=KS(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=Dp(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return Lp(e._rawValidators,r),Lp(e._rawAsyncValidators,r),t}function Sv(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function zm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function lA(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Wm=class extends Qc{constructor(e=null,t,r){super(Pp(t),Dv(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=lA(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){lA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let xl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Ov=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Lv=new c.OlP("NgModelWithFormControlWarning"),xo={provide:Nr,useExisting:(0,c.Gpc)(()=>Ui)};let Ui=(()=>{class n extends Nr{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(jm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Op(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Fp(t.control||null,t,!1),function uA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function au(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Fp(r||null,t),(n=>n instanceof Wm)(i)&&(Op(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Av(n,e){Bm(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function LI(n,e){return jm(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Bm(this.form,this),this._oldForm&&jm(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ei,10),c.Y36(Il,10),c.Y36(Xc,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([xo]),c.qOj,c.TTD]}),n})();const mA={provide:Zn,useExisting:(0,c.Gpc)(()=>Rh)};let Rh=(()=>{class n extends Zn{set isDisabled(t){}constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function xv(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===su?t=a:function qm(n){return Object.getPrototypeOf(n.constructor)===pa}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._added||this._setUpControl(),function Gm(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function kp(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(Nr,13),c.Y36(Ei,10),c.Y36(Il,10),c.Y36(ss,10),c.Y36(Lv,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([mA]),c.qOj,c.TTD]}),n})(),Rl=(()=>{class n{constructor(){this._validator=km}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):km,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const QI={provide:Ei,useExisting:(0,c.Gpc)(()=>jp),multi:!0};let jp=(()=>{class n extends Rl{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=c.D6c,this.createValidator=t=>yv}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([QI]),c.qOj]}),n})(),iC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Ov]}),n})();class sC extends Qc{constructor(e,t,r){super(Pp(t),Dv(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){OI(this,0,e),e.forEach((r,i)=>{Um(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function oC(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Hv=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let a={};return oC(r)?a=r:null!==r&&(a.validators=r.validator,a.asyncValidators=r.asyncValidator),new Al(i,a)}record(t,r=null){const i=this._reduceControls(t);return new Vm(i,r)}control(t,r,i){let a={};return this.useNonNullable?(oC(r)?a=r:(a.validators=r,a.asyncValidators=i),new Wm(t,{...a,nonNullable:!0})):new Wm(t,r,i)}array(t,r,i){const a=t.map(l=>this._createControl(l));return new sC(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Wm||t instanceof Qc?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aC=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Xc,useValue:t.callSetDisabledState??xh}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[iC]}),n})(),uC=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Lv,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Xc,useValue:t.callSetDisabledState??xh}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[iC]}),n})();function lC(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"a",12),c.NdJ("keyup.enter",function(){c.CHM(t),c.oxw(3);const i=c.MAs(1);return c.KtG(i.previous())})("click",function(){c.CHM(t),c.oxw(3);const i=c.MAs(1);return c.KtG(i.previous())}),c._uU(1),c.TgZ(2,"span",13),c._uU(3),c.qZA()()}if(2&n){const t=c.oxw(3);c.xp6(1),c.hij(" ",t.previousLabel," "),c.xp6(2),c.Oqu(t.screenReaderPageLabel)}}function cC(n,e){if(1&n&&(c.TgZ(0,"span",14),c._uU(1),c.TgZ(2,"span",13),c._uU(3),c.qZA()()),2&n){const t=c.oxw(3);c.xp6(1),c.hij(" ",t.previousLabel," "),c.xp6(2),c.Oqu(t.screenReaderPageLabel)}}function dC(n,e){if(1&n&&(c.TgZ(0,"li",9),c.YNc(1,lC,4,2,"a",10),c.YNc(2,cC,4,2,"span",11),c.qZA()),2&n){c.oxw(2);const t=c.MAs(1);c.ekj("disabled",t.isFirstPage()),c.xp6(1),c.Q6J("ngIf",1<t.getCurrent()),c.xp6(1),c.Q6J("ngIf",t.isFirstPage())}}function hC(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"a",12),c.NdJ("keyup.enter",function(){c.CHM(t);const i=c.oxw().$implicit;c.oxw(2);const a=c.MAs(1);return c.KtG(a.setCurrent(i.value))})("click",function(){c.CHM(t);const i=c.oxw().$implicit;c.oxw(2);const a=c.MAs(1);return c.KtG(a.setCurrent(i.value))}),c.TgZ(1,"span",13),c._uU(2),c.qZA(),c.TgZ(3,"span"),c._uU(4),c.ALo(5,"number"),c.qZA()()}if(2&n){const t=c.oxw().$implicit,r=c.oxw(2);c.xp6(2),c.hij("",r.screenReaderPageLabel," "),c.xp6(2),c.Oqu("..."===t.label?t.label:c.xi3(5,2,t.label,""))}}function Gv(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"span",16)(2,"span",13),c._uU(3),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"number"),c.qZA()(),c.BQk()),2&n){const t=c.oxw().$implicit,r=c.oxw(2);c.xp6(3),c.hij("",r.screenReaderCurrentLabel," "),c.xp6(2),c.Oqu("..."===t.label?t.label:c.xi3(6,2,t.label,""))}}function td(n,e){if(1&n&&(c.TgZ(0,"li"),c.YNc(1,hC,6,5,"a",10),c.YNc(2,Gv,7,5,"ng-container",15),c.qZA()),2&n){const t=e.$implicit;c.oxw(2);const r=c.MAs(1);c.ekj("current",r.getCurrent()===t.value)("ellipsis","..."===t.label),c.xp6(1),c.Q6J("ngIf",r.getCurrent()!==t.value),c.xp6(1),c.Q6J("ngIf",r.getCurrent()===t.value)}}function DA(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"a",12),c.NdJ("keyup.enter",function(){c.CHM(t),c.oxw(3);const i=c.MAs(1);return c.KtG(i.next())})("click",function(){c.CHM(t),c.oxw(3);const i=c.MAs(1);return c.KtG(i.next())}),c._uU(1),c.TgZ(2,"span",13),c._uU(3),c.qZA()()}if(2&n){const t=c.oxw(3);c.xp6(1),c.hij(" ",t.nextLabel," "),c.xp6(2),c.Oqu(t.screenReaderPageLabel)}}function SA(n,e){if(1&n&&(c.TgZ(0,"span",14),c._uU(1),c.TgZ(2,"span",13),c._uU(3),c.qZA()()),2&n){const t=c.oxw(3);c.xp6(1),c.hij(" ",t.nextLabel," "),c.xp6(2),c.Oqu(t.screenReaderPageLabel)}}function Mh(n,e){if(1&n&&(c.TgZ(0,"li",17),c.YNc(1,DA,4,2,"a",10),c.YNc(2,SA,4,2,"span",11),c.qZA()),2&n){c.oxw(2);const t=c.MAs(1);c.ekj("disabled",t.isLastPage()),c.xp6(1),c.Q6J("ngIf",!t.isLastPage()),c.xp6(1),c.Q6J("ngIf",t.isLastPage())}}function wk(n,e){if(1&n&&(c.TgZ(0,"ul",4),c.YNc(1,dC,3,4,"li",5),c.TgZ(2,"li",6),c._uU(3),c.qZA(),c.YNc(4,td,3,6,"li",7),c.YNc(5,Mh,3,4,"li",8),c.qZA()),2&n){const t=c.oxw(),r=c.MAs(1);c.ekj("responsive",t.responsive),c.xp6(1),c.Q6J("ngIf",t.directionLinks),c.xp6(2),c.AsE(" ",r.getCurrent()," / ",r.getLastPage()," "),c.xp6(1),c.Q6J("ngForOf",r.pages)("ngForTrackBy",t.trackByIndex),c.xp6(1),c.Q6J("ngIf",t.directionLinks)}}class $p{constructor(){this.change=new c.vpe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(e){return null==e.id&&(e.id=this.DEFAULT_ID),this.instances[e.id]?this.updateInstance(e):(this.instances[e.id]=e,!0)}updateInstance(e){let t=!1;for(let r in this.instances[e.id])e[r]!==this.instances[e.id][r]&&(this.instances[e.id][r]=e[r],t=!0);return t}getCurrentPage(e){return this.instances[e]?this.instances[e].currentPage:1}setCurrentPage(e,t){if(this.instances[e]){let r=this.instances[e];t<=Math.ceil(r.totalItems/r.itemsPerPage)&&1<=t&&(this.instances[e].currentPage=t,this.change.emit(e))}}setTotalItems(e,t){this.instances[e]&&0<=t&&(this.instances[e].totalItems=t,this.change.emit(e))}setItemsPerPage(e,t){this.instances[e]&&(this.instances[e].itemsPerPage=t,this.change.emit(e))}getInstance(e=this.DEFAULT_ID){return this.instances[e]?this.clone(this.instances[e]):{}}clone(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}}const Ek=Number.MAX_SAFE_INTEGER;let fC=(()=>{class n{constructor(t){this.service=t,this.state={}}transform(t,r){if(!(t instanceof Array)){let S=r.id||this.service.defaultId();return this.state[S]?this.state[S].slice:t}let f,_,i=r.totalItems&&r.totalItems!==t.length,a=this.createInstance(t,r),l=a.id,w=a.itemsPerPage,C=this.service.register(a);if(!i&&t instanceof Array){if(w=+w||Ek,f=(a.currentPage-1)*w,_=f+w,this.stateIsIdentical(l,t,f,_))return this.state[l].slice;{let P=t.slice(f,_);return this.saveState(l,t,P,f,_),this.service.change.emit(l),P}}return C&&this.service.change.emit(l),this.saveState(l,t,t,f,_),t}createInstance(t,r){return this.checkConfig(r),{id:null!=r.id?r.id:this.service.defaultId(),itemsPerPage:+r.itemsPerPage||0,currentPage:+r.currentPage||1,totalItems:+r.totalItems||t.length}}checkConfig(t){const i=["itemsPerPage","currentPage"].filter(a=>!(a in t));if(0<i.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${i.join(", ")}`)}saveState(t,r,i,a,l){this.state[t]={collection:r,size:r.length,slice:i,start:a,end:l}}stateIsIdentical(t,r,i,a){let l=this.state[t];return!(!l||l.size!==r.length||l.start!==i||l.end!==a)&&l.slice.every((_,w)=>_===r[i+w])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36($p,16))},n.\u0275pipe=c.Yjl({name:"paginate",type:n,pure:!1}),n})(),Tt=(()=>{class n{constructor(t,r){this.service=t,this.changeDetectorRef=r,this.maxSize=7,this.pageChange=new c.vpe,this.pageBoundsCorrection=new c.vpe,this.pages=[],this.changeSub=this.service.change.subscribe(i=>{this.id===i&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(t){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return 1===this.getCurrent()}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(t){this.pageChange.emit(t)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let t=this.service.getInstance(this.id);return t.totalItems<1?1:Math.ceil(t.totalItems/t.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){null==this.service.getInstance(this.id).id&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let t=this.service.getInstance(this.id);const r=this.outOfBoundCorrection(t);r!==t.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(r),this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}):this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}outOfBoundCorrection(t){const r=Math.ceil(t.totalItems/t.itemsPerPage);return r<t.currentPage&&0<r?r:t.currentPage<1?1:t.currentPage}createPageArray(t,r,i,a){a=+a;let l=[];const f=Math.max(Math.ceil(i/r),1),_=Math.ceil(a/2),w=t<=_,C=f-_<t,S=!w&&!C;let P=a<f,U=1;for(;U<=f&&U<=a;){let $,le=this.calculatePageNumber(U,t,a,f);$=P&&(2===U&&(S||C)||U===a-1&&(S||w))?"...":le,l.push({label:$,value:le}),U++}return l}calculatePageNumber(t,r,i,a){let l=Math.ceil(i/2);return t===i?a:1===t?t:i<a?a-l<r?a-i+t:l<r?r-l+t:t:t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36($p),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[c.TTD]}),n})();function qv(n){return!!n&&"false"!==n}let xA=(()=>{class n{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new c.vpe,this.pageBoundsCorrection=new c.vpe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(t){this._directionLinks=qv(t)}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=qv(t)}get responsive(){return this._responsive}set responsive(t){this._responsive=qv(t)}trackByIndex(t){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(t,r){if(1&t&&(c.TgZ(0,"pagination-template",0,1),c.NdJ("pageChange",function(a){return r.pageChange.emit(a)})("pageBoundsCorrection",function(a){return r.pageBoundsCorrection.emit(a)}),c.TgZ(2,"nav",2),c.YNc(3,wk,6,8,"ul",3),c.qZA()()),2&t){const i=c.MAs(1);c.Q6J("id",r.id)("maxSize",r.maxSize),c.xp6(2),c.uIk("aria-label",r.screenReaderPaginationLabel),c.xp6(1),c.Q6J("ngIf",!(r.autoHide&&i.pages.length<=1))}},dependencies:[Tt,gi,Jr,xd],styles:['.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}\n'],encapsulation:2,changeDetection:0}),n})(),RA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[$p],imports:[[Ho]]}),n})();var Ml=F(4986),zv=F(6451),Hp=F(3099);function Gp(n,e=T.y){return n=n??rr,(0,yr.e)((t,r)=>{let i,a=!0;t.subscribe((0,we.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}function rr(n,e){return n===e}var Ik=F(5032),an=F(2122),vr=F(2011),Xm=(F(4217),F(3942)),Ws=F(4859),_e=F(5861),Vi=F(9681),k=F(2090),Bi=F(1877);const mC="@firebase/database";let Wv="";function qp(n){Wv=n}class yC{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class vC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Zv=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yC(e)}}catch{}return new vC},nd=Zv("localStorage"),rd=Zv("sessionStorage"),ga=new Bi.Yd("@firebase/database"),wC=function(){let n=1;return function(){return n++}}(),EC=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},zp=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=zp.apply(null,r):e+="object"==typeof r?(0,k.Wl)(r):r,e+=" "}return e};let Nl=null,Kv=!0;const Yv=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ga.logLevel=Bi.in.VERBOSE,Nl=ga.log.bind(ga),e&&rd.set("logging_enabled",!0)):"function"==typeof n?Nl=n:(Nl=null,rd.remove("logging_enabled"))},Kr=function(...n){if(!0===Kv&&(Kv=!1,null===Nl&&!0===rd.get("logging_enabled")&&Yv(!0)),Nl){const e=zp.apply(null,n);Nl(e)}},Nh=function(n){return function(...e){Kr(n,...e)}},Qv=function(...n){const e="FIREBASE INTERNAL ERROR: "+zp(...n);ga.error(e)},ma=function(...n){const e=`FIREBASE FATAL ERROR: ${zp(...n)}`;throw ga.error(e),new Error(e)},ji=function(...n){const e="FIREBASE WARNING: "+zp(...n);ga.warn(e)},Xv=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},uu="[MIN_NAME]",Zs="[MAX_NAME]",id=function(n,e){if(n===e)return 0;if(n===uu||e===Zs)return-1;if(e===uu||n===Zs)return 1;{const t=kh(n),r=kh(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},NA=function(n,e){return n===e?0:n<e?-1:1},Ph=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Wl)(e))},sd=function(n){if("object"!=typeof n||null===n)return(0,k.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Wl)(e[r]),t+=":",t+=sd(n[e[r]]);return t+="}",t},IC=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const CC=function(n){(0,k.hu)(!Xv(n),"Invalid JSON number");const r=1023;let i,a,l,f,_;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const C=w.join("");let S="";for(_=0;_<64;_+=8){let P=parseInt(C.substr(_,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},bC=new RegExp("^-?(0*)\\d{1,10}$"),kh=function(n){if(bC.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Oh=function(n){try{n()}catch(e){setTimeout(()=>{throw ji("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Wp=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class DC{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ji(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class LA{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Kr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ji(e)}}let Fh=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const AC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,MC="websocket",t0="long_polling";class n0{constructor(e,t,r,i,a=!1,l="",f=!1,_=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=nd.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&nd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function NC(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===MC)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==t0)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function UA(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Yr(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class VA{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const r0={},s0={};function o0(n){const e=n.toString();return r0[e]||(r0[e]=new VA),r0[e]}class PC{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Oh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class lu{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Nh(e),this.stats_=o0(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),NC(t,t0,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new PC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new d0((...a)=>{const[l,f,_,w,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&AC.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){lu.forceAllow_=!0}static forceDisallow(){lu.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!lu.forceAllow_&&(lu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=IC(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class d0{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=wC(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=d0.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){Kr("frame writing exception"),f.stack&&Kr(f.stack),Kr(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Kr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Kr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Uh=null;typeof MozWebSocket<"u"?Uh=MozWebSocket:typeof WebSocket<"u"&&(Uh=WebSocket);let Vh=(()=>{class n{constructor(t,r,i,a,l,f,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Nh(this.connId),this.stats_=o0(r),this.connURL=n.connectionURL_(r,f,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&AC.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),NC(t,MC,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nd.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Wv}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new Uh(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Uh&&!n.forceDisallow_}static previouslyFailed(){return nd.isInMemoryStorage||!0===nd.get("previous_websocket_failure")}markConnectionHealthy(){nd.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=IC(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),n_=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[lu,Vh]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Vh&&Vh.isAvailable();let i=r&&!Vh.previouslyFailed();if(t.webSocketOnly&&(r||ji("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Vh];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class KC{constructor(e,t,r,i,a,l,f,_,w,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Nh("c:"+this.id+":"),this.transportManager_=new n_(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ph("t",e),r=Ph("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ph("t",e),r=Ph("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ph("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Qv("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Qv("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ji("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Wp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class YC{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class ZA{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class i_ extends ZA{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new i_}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class dn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function un(){return new dn("")}function Zt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Pl(n){return n.pieces_.length-n.pieceNum_}function bn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new dn(n.pieces_,e)}function g0(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Kp(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function JC(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new dn(e,0)}function En(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof dn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new dn(t,0)}function zt(n){return n.pieceNum_>=n.pieces_.length}function Ii(n,e){const t=Zt(n),r=Zt(e);if(null===t)return e;if(t===r)return Ii(bn(n),bn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function eb(n,e){const t=Kp(n,0),r=Kp(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=id(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function s_(n,e){if(Pl(n)!==Pl(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Cs(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Pl(n)>Pl(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class tb{constructor(e,t){this.errorPrefix_=t,this.parts_=Kp(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);nb(this)}}function nb(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+kl(n))}function kl(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class m0 extends ZA{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new m0}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Yp=1e3;let a_,cu=(()=>{class n extends YC{constructor(t,r,i,a,l,f,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=Nh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Yp,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");m0.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&i_.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Wl)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const _=f.d;"ok"===f.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const w=_.d,C=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ji(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Qv("Unrecognized action received from server: "+(0,k.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Yp,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Yp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Yp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,_e.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let _=!1,w=null;const C=function(){w?w.close():(_=!0,a())};t.realtime_={close:C,sendRequest:function(U){(0,k.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(U)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,$]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);_?Kr("getToken() completed but was canceled"):(Kr("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=$&&$.token,w=new KC(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,le=>{ji(le+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(U){t.log_("Failed to get token: "+U),_||(t.repoInfo_.nodeAdmin&&ji(U),C())}}})()}interrupt(t){Kr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Kr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Yp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>sd(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new dn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Kr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Kr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Wv.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=i_.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Ht{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ht(e,t)}}class o_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Ht(uu,e),i=new Ht(uu,t);return 0!==this.compare(r,i)}minPost(){return Ht.MIN}}class ib extends o_{static get __EMPTY_NODE(){return a_}static set __EMPTY_NODE(e){a_=e}compare(e,t){return id(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ht.MIN}maxPost(){return new Ht(Zs,a_)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Ht(e,a_)}toString(){return".key"}}const bs=new ib;class od{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let u_,Ro=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??$i.EMPTY_NODE,this.right=l??$i.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return $i.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return $i.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class $i{constructor(e,t=$i.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new $i(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ro.BLACK,null,null))}remove(e){return new $i(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ro.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new od(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new od(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new od(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new od(this.root_,null,this.comparator_,!0,e)}}function sb(n,e){return id(n.name,e.name)}function Qp(n,e){return id(n,e)}$i.EMPTY_NODE=new class JA{copy(e,t,r,i,a){return this}insert(e,t,r){return new Ro(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const l_=function(n){return"number"==typeof n?"number:"+CC(n):"string:"+n},v0=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===u_||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===u_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let c_,ob,ab,Ol=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),v0(this.priorityNode_)}static set __childrenNodeConstructor(t){c_=t}static get __childrenNodeConstructor(){return c_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return zt(t)?this:".priority"===Zt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Zt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Pl(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(bn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+l_(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?CC(this.value_):this.value_,this.lazyHash_=EC(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const In=new class ub extends o_{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?id(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ht.MIN}maxPost(){return new Ht(Zs,new Ol("[PRIORITY-POST]",ab))}makePost(e,t){const r=ob(e);return new Ht(t,new Ol("[PRIORITY-POST]",r))}toString(){return".priority"}},lb=Math.log(2);class nx{constructor(e){this.count=parseInt(Math.log(e+1)/lb,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Xp=function(n,e,t,r){n.sort(e);const i=function(_,w){const C=w-_;let S,P;if(0===C)return null;if(1===C)return S=n[_],P=t?t(S):S,new Ro(P,S.node,Ro.BLACK,null,null);{const U=parseInt(C/2,10)+_,$=i(_,U),le=i(U+1,w);return S=n[U],P=t?t(S):S,new Ro(P,S.node,Ro.BLACK,$,le)}},f=function(_){let w=null,C=null,S=n.length;const P=function($,le){const ge=S-$,st=S;S-=$;const ct=i(ge+1,st),Xe=n[ge],ot=t?t(Xe):Xe;U(new Ro(ot,Xe.node,le,null,ct))},U=function($){w?(w.left=$,w=$):(C=$,w=$)};for(let $=0;$<_.count;++$){const le=_.nextBitIsOne(),ge=Math.pow(2,_.count-($+1));le?P(ge,Ro.BLACK):(P(ge,Ro.BLACK),P(ge,Ro.RED))}return C}(new nx(n.length));return new $i(r||e,f)};let d_;const jh={};class ya{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(jh&&In,"ChildrenNode.ts has not been loaded"),d_=d_||new ya({".priority":jh},{".priority":In}),d_}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof $i?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==bs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Ht.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?Xp(r,e.getCompare()):jh;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const C=Object.assign({},this.indexes_);return C[_]=f,new ya(C,w)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===jh){if(l.isDefinedOn(e.node)){const f=[],_=t.getIterator(Ht.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&f.push(w),w=_.getNext();return f.push(e),Xp(f,l.getCompare())}return jh}{const f=t.get(e.name);let _=i;return f&&(_=_.remove(new Ht(e.name,f))),_.insert(e,e.node)}});return new ya(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===jh)return i;{const a=t.get(e.name);return a?i.remove(new Ht(e.name,a)):i}});return new ya(r,this.indexSet_)}}let $h,Bt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&v0(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $h||($h=new n(new $i(Qp),null,ya.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$h}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?$h:r}}getChild(t){const r=Zt(t);return null===r?this:this.getImmediateChild(r).getChild(bn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Ht(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?$h:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=Zt(t);if(null===i)return r;{(0,k.hu)(".priority"!==Zt(t)||1===Pl(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(bn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(In,(f,_)=>{r[f]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const _ in r)f[_]=r[_];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+l_(this.getPriority().val())+":"),this.forEachChild(In,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":EC(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Ht(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Ht(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Ht(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Ht.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Ht.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Jp?-1:0}withIndex(t){if(t===bs||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===bs||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(In),a=r.getIterator(In);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===bs?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Jp=new class cb extends Bt{constructor(){super(new $i(Qp),Bt.EMPTY_NODE,ya.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Bt.EMPTY_NODE}isEmpty(){return!1}};function Cn(n,e=null){if(null===n)return Bt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ol(n,Cn(e));if(n instanceof Array){let t=Bt.EMPTY_NODE;return Yr(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Cn(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Cn(e))}{const t=[];let r=!1;if(Yr(n,(l,f)=>{if("."!==l.substring(0,1)){const _=Cn(f);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new Ht(l,_)))}}),0===t.length)return Bt.EMPTY_NODE;const a=Xp(t,sb,l=>l.name,Qp);if(r){const l=Xp(t,In.getCompare());return new Bt(a,Cn(e),new ya({".priority":l},{".priority":In}))}return new Bt(a,Cn(e),ya.Default)}}Object.defineProperties(Ht,{MIN:{value:new Ht(uu,Bt.EMPTY_NODE)},MAX:{value:new Ht(Zs,Jp)}}),ib.__EMPTY_NODE=Bt.EMPTY_NODE,Ol.__childrenNodeConstructor=Bt,function y0(n){u_=n}(Jp),function tx(n){ab=n}(Jp),function ex(n){ob=n}(Cn);class w0 extends o_{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!zt(e)&&".priority"!==Zt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?id(e.name,t.name):a}makePost(e,t){const r=Cn(e),i=Bt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ht(t,i)}maxPost(){const e=Bt.EMPTY_NODE.updateChild(this.indexPath_,Jp);return new Ht(Zs,e)}toString(){return Kp(this.indexPath_,0).join("/")}}const db=new class rx extends o_{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?id(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ht.MIN}maxPost(){return Ht.MAX}makePost(e,t){const r=Cn(e);return new Ht(t,r)}toString(){return".value"}};function ix(n){return{type:"value",snapshotNode:n}}function ad(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Hh(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function du(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class eg{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Hh(t,f)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?l.trackChildChange(ad(t,r)):l.trackChildChange(du(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(In,(i,a)=>{t.hasChild(i)||r.trackChildChange(Hh(i,a))}),t.isLeafNode()||t.forEachChild(In,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(du(i,a,l))}else r.trackChildChange(ad(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Bt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class tg{constructor(e){this.indexedFilter_=new eg(e.getIndex()),this.index_=e.getIndex(),this.startPost_=tg.getStartPost_(e),this.endPost_=tg.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,l){return this.matches(new Ht(t,r))||(r=Bt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Bt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Bt.EMPTY_NODE);const a=this;return t.forEachChild(In,(l,f)=>{a.matches(new Ht(l,f))||(i=i.updateImmediateChild(l,Bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class hb{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new tg(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new Ht(t,r))||(r=Bt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Bt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Bt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),l++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(Bt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;a.hasNext();){const f=a.getNext();l<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?l++:i=i.updateImmediateChild(f.name,Bt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(P,U)=>S(U,P)}else l=this.index_.getCompare();const f=e;(0,k.hu)(f.numChildren()===this.limit_,"");const _=new Ht(t,r),w=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),C=this.rangedFilter_.matches(_);if(f.hasChild(t)){const S=f.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=P&&(P.name===t||f.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const U=null==P?1:l(P,_);if(C&&!r.isEmpty()&&U>=0)return a?.trackChildChange(du(t,r,S)),f.updateImmediateChild(t,r);{a?.trackChildChange(Hh(t,S));const le=f.updateImmediateChild(t,Bt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(a?.trackChildChange(ad(P.name,P.node)),le.updateImmediateChild(P.name,P.node)):le}}return r.isEmpty()?e:C&&l(w,_)>=0?(null!=a&&(a.trackChildChange(Hh(w.name,w.node)),a.trackChildChange(ad(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(w.name,Bt.EMPTY_NODE)):e}}class h_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=In}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:uu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===In}copy(){const e=new h_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function f_(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Gh(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function C0(n,e){const t=n.copy();return t.index_=e,t}function b0(n){const e={};if(n.isDefault())return e;let t;if(n.index_===In?t="$priority":n.index_===db?t="$value":n.index_===bs?t="$key":((0,k.hu)(n.index_ instanceof w0,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,k.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,k.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function pb(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==In&&(e.i=n.index_.toString()),e}class ng extends YC{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Nh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=ng.getListenId_(e,r),f={};this.listens_[l]=f;const _=b0(e._queryParams);this.restRequest_(a+".json",_,(w,C)=>{let S=C;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,l)===f){let P;P=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(P,null)}})}unlisten(e,t){const r=ng.getListenId_(e,t);delete this.listens_[r]}get(e){const t=b0(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let _=null;if(f.status>=200&&f.status<300){try{_=(0,k.cI)(f.responseText)}catch{ji("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,_)}else 401!==f.status&&404!==f.status&&ji("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class qh{constructor(){this.rootNode_=Bt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function p_(){return{value:null,children:new Map}}function ud(n,e,t){if(zt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Zt(e);n.children.has(r)||n.children.set(r,p_()),ud(n.children.get(r),e=bn(e),t)}}function rg(n,e){if(zt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(In,(r,i)=>{ud(n,new dn(r),i)}),rg(n,e)}}if(n.children.size>0){const t=Zt(e);return e=bn(e),n.children.has(t)&&rg(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function gb(n,e,t){null!==n.value?t(e,n.value):function ux(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{gb(i,new dn(e.toString()+"/"+r),t)})}class Ak{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Yr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class _b{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ak(e);const r=1e4+2e4*Math.random();Wp(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Yr(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Wp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ts=(()=>{return(n=Ts||(Ts={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ts;var n})();function m_(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class __{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ts.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(zt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new dn(e));return new __(un(),t,this.revert)}}return(0,k.hu)(Zt(this.path)===e,"operationForChild called for unrelated child."),new __(bn(this.path),this.affectedTree,this.revert)}}class ig{constructor(e,t){this.source=e,this.path=t,this.type=Ts.LISTEN_COMPLETE}operationForChild(e){return zt(this.path)?new ig(this.source,un()):new ig(this.source,bn(this.path))}}class Fl{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ts.OVERWRITE}operationForChild(e){return zt(this.path)?new Fl(this.source,un(),this.snap.getImmediateChild(e)):new Fl(this.source,bn(this.path),this.snap)}}class zh{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ts.MERGE}operationForChild(e){if(zt(this.path)){const t=this.children.subtree(new dn(e));return t.isEmpty()?null:t.value?new Fl(this.source,un(),t.value):new zh(this.source,un(),t)}return(0,k.hu)(Zt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new zh(this.source,bn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class hu{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(zt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Zt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class yb{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Wh(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,_)=>function hx(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new Ht(e.childName,e.snapshotNode),i=new Ht(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,_)),l.forEach(f=>{const _=function dx(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(w=>{w.respondsTo(f.type)&&e.push(w.createEvent(_,n.query_))})})}function D0(n,e){return{eventCache:n,serverCache:e}}function Zh(n,e,t,r){return D0(new hu(e,t,r),n.serverCache)}function fx(n,e,t,r){return D0(n.eventCache,new hu(e,t,r))}function S0(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Kh(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let wb;class Nn{constructor(e,t=(()=>(wb||(wb=new $i(NA)),wb))()){this.value=e,this.children=t}static fromObject(e){let t=new Nn(null);return Yr(e,(r,i)=>{t=t.set(new dn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:un(),value:this.value};if(zt(e))return null;{const r=Zt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(bn(e),t);return null!=a?{path:En(new dn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(zt(e))return this;{const t=Zt(e),r=this.children.get(t);return null!==r?r.subtree(bn(e)):new Nn(null)}}set(e,t){if(zt(e))return new Nn(t,this.children);{const r=Zt(e),a=(this.children.get(r)||new Nn(null)).set(bn(e),t),l=this.children.insert(r,a);return new Nn(this.value,l)}}remove(e){if(zt(e))return this.children.isEmpty()?new Nn(null):new Nn(null,this.children);{const t=Zt(e),r=this.children.get(t);if(r){const i=r.remove(bn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Nn(null):new Nn(this.value,a)}return this}}get(e){if(zt(e))return this.value;{const t=Zt(e),r=this.children.get(t);return r?r.get(bn(e)):null}}setTree(e,t){if(zt(e))return t;{const r=Zt(e),a=(this.children.get(r)||new Nn(null)).setTree(bn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Nn(this.value,l)}}fold(e){return this.fold_(un(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(En(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,un(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(zt(e))return null;{const a=Zt(e),l=this.children.get(a);return l?l.findOnPath_(bn(e),En(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,un(),t)}foreachOnPath_(e,t,r){if(zt(e))return this;{this.value&&r(t,this.value);const i=Zt(e),a=this.children.get(i);return a?a.foreachOnPath_(bn(e),En(t,i),r):new Nn(null)}}foreach(e){this.foreach_(un(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(En(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class va{constructor(e){this.writeTree_=e}static empty(){return new va(new Nn(null))}}function y_(n,e,t){if(zt(e))return new va(new Nn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ii(i,e);return a=a.updateChild(l,t),new va(n.writeTree_.set(i,a))}{const i=new Nn(t),a=n.writeTree_.setTree(e,i);return new va(a)}}}function Yh(n,e,t){let r=n;return Yr(t,(i,a)=>{r=y_(r,En(e,i),a)}),r}function px(n,e){if(zt(e))return va.empty();{const t=n.writeTree_.setTree(e,new Nn(null));return new va(t)}}function v_(n,e){return null!=wa(n,e)}function wa(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ii(t.path,e)):null}function A0(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(In,(r,i)=>{e.push(new Ht(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Ht(r,i.value))}),e}function fu(n,e){if(zt(e))return n;{const t=wa(n,e);return new va(null!=t?new Nn(t):n.writeTree_.subtree(e))}}function Eb(n){return n.writeTree_.isEmpty()}function Ll(n,e){return x0(un(),n.writeTree_,e)}function x0(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=x0(En(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(En(n,".priority"),r)),t}}function w_(n,e){return Dx(e,n)}function mx(n,e){if(n.snap)return Cs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Cs(En(n.path,t),e))return!0;return!1}function _x(n){return n.visible}function yx(n,e,t){let r=va.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)Cs(t,l)?(f=Ii(t,l),r=y_(r,f,a.snap)):Cs(l,t)&&(f=Ii(l,t),r=y_(r,un(),a.snap.getChild(f)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Cs(t,l))f=Ii(t,l),r=Yh(r,f,a.children);else if(Cs(l,t))if(f=Ii(l,t),zt(f))r=Yh(r,un(),a.children);else{const _=(0,k.DV)(a.children,Zt(f));if(_){const w=_.getChild(bn(f));r=y_(r,un(),w)}}}}}return r}function vx(n,e,t,r,i){if(r||i){const a=fu(n.visibleWrites,e);return!i&&Eb(a)?t:i||null!=t||v_(a,un())?Ll(yx(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Cs(w.path,e)||Cs(e,w.path))},e),t||Bt.EMPTY_NODE):null}{const a=wa(n.visibleWrites,e);if(null!=a)return a;{const l=fu(n.visibleWrites,e);return Eb(l)?t:null!=t||v_(l,un())?Ll(l,t||Bt.EMPTY_NODE):null}}}function sg(n,e,t,r){return vx(n.writeTree,n.treePath,e,t,r)}function I_(n,e){return function Nk(n,e,t){let r=Bt.EMPTY_NODE;const i=wa(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(In,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=fu(n.visibleWrites,e);return t.forEachChild(In,(l,f)=>{const _=Ll(fu(a,new dn(l)),f);r=r.updateImmediateChild(l,_)}),A0(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return A0(fu(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function bx(n,e,t,r){return function wx(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=En(e,t);if(v_(n.visibleWrites,a))return null;{const l=fu(n.visibleWrites,a);return Eb(l)?i.getChild(t):Ll(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function os(n,e){return function Ix(n,e){return wa(n.visibleWrites,e)}(n.writeTree,En(n.treePath,e))}function og(n,e,t){return function Ex(n,e,t,r){const i=En(e,t),a=wa(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Ll(fu(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Cb(n,e){return Dx(En(n.treePath,e),n.writeTree)}function Dx(n,e){return{treePath:n,writeTree:e}}class Ks{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,du(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Hh(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,ad(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,du(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const C_=new class Sx{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class R0{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new hu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return og(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Kh(this.viewCache_),a=function Tx(n,e,t,r,i,a){return function Pk(n,e,t,r,i,a,l){let f;const _=fu(n.visibleWrites,e),w=wa(_,un());if(null!=w)f=w;else{if(null==t)return[];f=Ll(_,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const C=[],S=l.getCompare(),P=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let U=P.getNext();for(;U&&C.length<i;)0!==S(U,r)&&C.push(U),U=P.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Db(n,e,t,r,i,a){const l=e.eventCache;if(null!=os(r,t))return e;{let f,_;if(zt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Kh(e),S=I_(r,w instanceof Bt?w:Bt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const w=sg(r,Kh(e));f=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Zt(t);if(".priority"===w){(0,k.hu)(1===Pl(t),"Can't have a priority with additional path components");const C=l.getNode();_=e.serverCache.getNode();const S=bx(r,t,C,_);f=null!=S?n.filter.updatePriority(C,S):l.getNode()}else{const C=bn(t);let S;if(l.isCompleteForChild(w)){_=e.serverCache.getNode();const P=bx(r,t,l.getNode(),_);S=null!=P?l.getNode().getImmediateChild(w).updateChild(C,P):l.getNode().getImmediateChild(w)}else S=og(r,w,e.serverCache);f=null!=S?n.filter.updateChild(l.getNode(),w,S,C,i,a):l.getNode()}}return Zh(e,f,l.isFullyInitialized()||zt(t),n.filter.filtersNodes())}}function ag(n,e,t,r,i,a,l,f){const _=e.serverCache;let w;const C=l?n.filter:n.filter.getIndexedFilter();if(zt(t))w=C.updateFullNode(_.getNode(),r,null);else if(C.filtersNodes()&&!_.isFiltered()){const U=_.getNode().updateChild(t,r);w=C.updateFullNode(_.getNode(),U,null)}else{const U=Zt(t);if(!_.isCompleteForPath(t)&&Pl(t)>1)return e;const $=bn(t),ge=_.getNode().getImmediateChild(U).updateChild($,r);w=".priority"===U?C.updatePriority(_.getNode(),ge):C.updateChild(_.getNode(),U,ge,$,C_,null)}const S=fx(e,w,_.isFullyInitialized()||zt(t),C.filtersNodes());return Db(n,S,t,i,new R0(i,S,a),f)}function b_(n,e,t,r,i,a,l){const f=e.eventCache;let _,w;const C=new R0(i,e,a);if(zt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=Zh(e,w,!0,n.filter.filtersNodes());else{const S=Zt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=Zh(e,w,f.isFullyInitialized(),f.isFiltered());else{const P=bn(t),U=f.getNode().getImmediateChild(S);let $;if(zt(P))$=r;else{const le=C.getCompleteChild(S);$=null!=le?".priority"===g0(P)&&le.getChild(JC(P)).isEmpty()?le:le.updateChild(P,r):Bt.EMPTY_NODE}_=U.equals($)?e:Zh(e,n.filter.updateChild(f.getNode(),S,$,P,C,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return _}function Sb(n,e){return n.eventCache.isCompleteForChild(e)}function xb(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ug(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=zt(t)?r:new Nn(null).setTree(t,r);const C=e.serverCache.getNode();return w.children.inorderTraversal((S,P)=>{if(C.hasChild(S)){const $=xb(0,e.serverCache.getNode().getImmediateChild(S),P);_=ag(n,_,new dn(S),$,i,a,l,f)}}),w.children.inorderTraversal((S,P)=>{const U=!e.serverCache.isCompleteForChild(S)&&null===P.value;if(!C.hasChild(S)&&!U){const le=xb(0,e.serverCache.getNode().getImmediateChild(S),P);_=ag(n,_,new dn(S),le,i,a,l,f)}}),_}class pu{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new eg(r.getIndex()),a=function ox(n){return n.loadsAllData()?new eg(n.getIndex()):n.hasLimit()?new hb(n):new tg(n)}(r);this.processor_=function Ax(n){return{filter:n}}(a);const l=t.serverCache,f=t.eventCache,_=i.updateFullNode(Bt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(Bt.EMPTY_NODE,f.getNode(),null),C=new hu(_,l.isFullyInitialized(),i.filtersNodes()),S=new hu(w,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=D0(S,C),this.eventGenerator_=new yb(this.query_)}get query(){return this.query_}}function Rx(n,e){const t=Kh(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!zt(e)&&!t.getImmediateChild(Zt(e)).isEmpty())?t.getChild(e):null}function Mb(n){return 0===n.eventRegistrations_.length}function Nb(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function P0(n,e,t,r){e.type===Ts.MERGE&&null!==e.source.queryId&&((0,k.hu)(Kh(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(S0(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function bb(n,e,t,r,i){const a=new Ks;let l,f;if(t.type===Ts.OVERWRITE){const w=t;w.source.fromUser?l=b_(n,e,w.path,w.snap,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered()&&!zt(w.path),l=ag(n,e,w.path,w.snap,r,i,f,a))}else if(t.type===Ts.MERGE){const w=t;w.source.fromUser?l=function Ab(n,e,t,r,i,a,l){let f=e;return r.foreach((_,w)=>{const C=En(t,_);Sb(e,Zt(C))&&(f=b_(n,f,C,w,i,a,l))}),r.foreach((_,w)=>{const C=En(t,_);Sb(e,Zt(C))||(f=b_(n,f,C,w,i,a,l))}),f}(n,e,w.path,w.children,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered(),l=ug(n,e,w.path,w.children,r,i,f,a))}else if(t.type===Ts.ACK_USER_WRITE){const w=t;l=w.revert?function N0(n,e,t,r,i,a){let l;if(null!=os(r,t))return e;{const f=new R0(r,e,i),_=e.eventCache.getNode();let w;if(zt(t)||".priority"===Zt(t)){let C;if(e.serverCache.isFullyInitialized())C=sg(r,Kh(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof Bt,"serverChildren would be complete if leaf node"),C=I_(r,S)}w=n.filter.updateFullNode(_,C,a)}else{const C=Zt(t);let S=og(r,C,e.serverCache);null==S&&e.serverCache.isCompleteForChild(C)&&(S=_.getImmediateChild(C)),w=null!=S?n.filter.updateChild(_,C,S,bn(t),f,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(_,C,Bt.EMPTY_NODE,bn(t),f,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=sg(r,Kh(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=os(r,un()),Zh(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function Ul(n,e,t,r,i,a,l){if(null!=os(i,t))return e;const f=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(zt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return ag(n,e,t,_.getNode().getChild(t),i,a,f,l);if(zt(t)){let w=new Nn(null);return _.getNode().forEachChild(bs,(C,S)=>{w=w.set(new dn(C),S)}),ug(n,e,t,w,i,a,f,l)}return e}{let w=new Nn(null);return r.foreach((C,S)=>{const P=En(t,C);_.isCompleteForPath(P)&&(w=w.set(C,_.getNode().getChild(P)))}),ug(n,e,t,w,i,a,f,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Ts.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function Rb(n,e,t,r,i){const a=e.serverCache;return Db(n,fx(e,a.getNode(),a.isFullyInitialized()||zt(t),a.isFiltered()),t,r,C_,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function Tb(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=S0(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(ix(S0(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function M0(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,k0(n,a.changes,a.viewCache.eventCache.getNode(),null)}function k0(n,e,t,r){return function vb(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function sx(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Wh(n,i,"child_removed",e,r,t),Wh(n,i,"child_added",e,r,t),Wh(n,i,"child_moved",a,r,t),Wh(n,i,"child_changed",e,r,t),Wh(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let T_,B0;class O0{constructor(){this.views=new Map}}function D_(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),P0(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(P0(l,e,t,r));return a}}function L0(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let f=sg(t,i?r:null),_=!1;f?_=!0:r instanceof Bt?(f=I_(t,r),_=!1):(f=Bt.EMPTY_NODE,_=!1);const w=D0(new hu(f,_,!1),new hu(r,i,!1));return new pu(e,w)}return l}function lg(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Mo(n,e){let t=null;for(const r of n.views.values())t=t||Rx(r,e);return t}function U0(n,e){return e._queryParams.loadsAllData()?V0(n):n.views.get(e._queryIdentifier)}function Fb(n,e){return null!=U0(n,e)}function Vl(n){return null!=V0(n)}function V0(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Nx=1;class Ub{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Nn(null),this.pendingWriteTree_=function Cx(){return{visibleWrites:va.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function j0(n,e,t,r,i){return function Ib(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=y_(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Bl(n,new Fl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ld(n,e,t=!1){const r=function Mk(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function gx(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&mx(f,r.path)?i=!1:Cs(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function E_(n){n.visibleWrites=yx(n.allWrites,_x,un()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=px(n.visibleWrites,r.path):Yr(r.children,_=>{n.visibleWrites=px(n.visibleWrites,En(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Nn(null);return null!=r.snap?a=a.set(un(),!0):Yr(r.children,l=>{a=a.set(new dn(l),!0)}),Bl(n,new __(r.path,a,t))}return[]}function S_(n,e,t){return Bl(n,new Fl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function cd(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let f=[];if(l&&("default"===e._queryIdentifier||Fb(l,e))){const _=function Ob(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const f=Vl(n);if("default"===i)for(const[_,w]of n.views.entries())l=l.concat(Nb(w,t,r)),Mb(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(l=l.concat(Nb(_,t,r)),Mb(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return f&&!Vl(n)&&a.push(new(function F0(){return(0,k.hu)(T_,"Reference.ts has not been loaded"),T_}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function Pb(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=_.removed;if(f=_.events,!i){const C=-1!==w.findIndex(P=>P._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(P,U)=>Vl(U));if(C&&!S){const P=n.syncPointTree_.subtree(a);if(!P.isEmpty()){const U=function jk(n){return n.fold((e,t,r)=>{if(t&&Vl(t))return[V0(t)];{let i=[];return t&&(i=lg(t)),Yr(r,(a,l)=>{i=i.concat(l)}),i}})}(P);for(let $=0;$<U.length;++$){const le=U[$],ge=le.query,st=R_(n,le);n.listenProvider_.startListening(Qh(ge),dd(n,ge),st.hashFn,st.onComplete)}}}!S&&w.length>0&&!r&&(C?n.listenProvider_.stopListening(Qh(e),null):w.forEach(P=>{const U=n.queryToTagMap.get(hd(P));n.listenProvider_.stopListening(Qh(P),U)}))}!function Ox(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=hd(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return f}function Vb(n,e,t,r){const i=$b(n,r);if(null!=i){const a=Hb(i),l=a.path,f=a.queryId,_=Ii(l,e);return Gb(n,l,new Fl(m_(f),_,t))}return[]}function A_(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(P,U)=>{const $=Ii(P,i);a=a||Mo(U,$),l=l||Vl(U)});let _,f=n.syncPointTree_.get(i);f?(l=l||Vl(f),a=a||Mo(f,un())):(f=new O0,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?_=!0:(_=!1,a=Bt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((U,$)=>{const le=Mo($,un());le&&(a=a.updateImmediateChild(U,le))}));const w=Fb(f,e);if(!w&&!e._queryParams.loadsAllData()){const P=hd(e);(0,k.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const U=function Fx(){return Nx++}();n.queryToTagMap.set(P,U),n.tagToQueryMap.set(U,P)}let S=function kb(n,e,t,r,i,a){const l=L0(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function Mx(n,e){n.eventRegistrations_.push(e)}(l,t),function Ok(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(In,(a,l)=>{r.push(ad(a,l))}),t.isFullyInitialized()&&r.push(ix(t.getNode())),k0(n,r,t.getNode(),e)}(l,t)}(f,e,t,w_(n.pendingWriteTree_,i),a,_);if(!w&&!l&&!r){const P=U0(f,e);S=S.concat(function Lx(n,e,t){const r=e._path,i=dd(n,e),a=R_(n,t),l=n.listenProvider_.startListening(Qh(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Vl(f.value),"If we're adding a query, it shouldn't be shadowed");else{const _=f.fold((w,C,S)=>{if(!zt(w)&&C&&Vl(C))return[V0(C).query];{let P=[];return C&&(P=P.concat(lg(C).map(U=>U.query))),Yr(S,(U,$)=>{P=P.concat($)}),P}});for(let w=0;w<_.length;++w){const C=_[w];n.listenProvider_.stopListening(Qh(C),dd(n,C))}}return l}(n,e,P))}return S}function Ea(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const w=Mo(f,Ii(l,e));if(w)return w});return vx(i,e,a,t,!0)}function Bl(n,e){return x_(e,n.syncPointTree_,null,w_(n.pendingWriteTree_,un()))}function x_(n,e,t,r){if(zt(n.path))return jb(n,e,t,r);{const i=e.get(un());null==t&&null!=i&&(t=Mo(i,un()));let a=[];const l=Zt(n.path),f=n.operationForChild(l),_=e.children.get(l);if(_&&f){const w=t?t.getImmediateChild(l):null,C=Cb(r,l);a=a.concat(x_(f,_,w,C))}return i&&(a=a.concat(D_(i,n,r,t))),a}}function jb(n,e,t,r){const i=e.get(un());null==t&&null!=i&&(t=Mo(i,un()));let a=[];return e.children.inorderTraversal((l,f)=>{const _=t?t.getImmediateChild(l):null,w=Cb(r,l),C=n.operationForChild(l);C&&(a=a.concat(jb(C,f,_,w)))}),i&&(a=a.concat(D_(i,n,r,t))),a}function R_(n,e){const t=e.query,r=dd(n,t);return{hashFn:()=>(function xx(n){return n.viewCache_.serverCache.getNode()}(e)||Bt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Px(n,e,t){const r=$b(n,t);if(r){const i=Hb(r),a=i.path,l=i.queryId,f=Ii(a,e);return Gb(n,a,new ig(m_(l),f))}return[]}(n,t._path,r):function Bk(n,e){return Bl(n,new ig({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function kA(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return cd(n,t,null,a)}}}}function dd(n,e){const t=hd(e);return n.queryToTagMap.get(t)}function hd(n){return n._path.toString()+"$"+n._queryIdentifier}function $b(n,e){return n.tagToQueryMap.get(e)}function Hb(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new dn(n.substr(0,e))}}function Gb(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),D_(r,t,w_(n.pendingWriteTree_,e),null)}function Qh(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Lb(){return(0,k.hu)(B0,"Reference.ts has not been loaded"),B0}())(n._repo,n._path):n}class $0{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new $0(t)}node(){return this.node_}}class M_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=En(this.path_,e);return new M_(this.syncTree_,t)}node(){return Ea(this.syncTree_,this.path_)}}const H0=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Ux(n[".sv"],e,t):"object"==typeof n[".sv"]?Vx(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Ux=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},Vx=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},G0=function(n,e,t,r){return zb(e,new M_(t,n),r)},cg=function(n,e,t){return zb(n,new $0(e),t)};function zb(n,e,t){const r=n.getPriority().val(),i=H0(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=H0(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new Ol(f,Cn(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Ol(i))),l.forEachChild(In,(f,_)=>{const w=zb(_,e.getImmediateChild(f),t);w!==_&&(a=a.updateImmediateChild(f,w))}),a}}class N_{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Xh(n,e){let t=e instanceof dn?e:new dn(e),r=n,i=Zt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new N_(i,r,a),t=bn(t),i=Zt(t)}return r}function fd(n){return n.node.value}function q0(n,e){n.node.value=e,Zb(n)}function Bx(n){return n.node.childCount>0}function P_(n,e){Yr(n.node.children,(t,r)=>{e(new N_(t,n,r))})}function Wb(n,e,t,r){t&&!r&&e(n),P_(n,i=>{Wb(i,e,!0,r)}),t&&r&&e(n)}function k_(n){return new dn(null===n.parent?n.name:k_(n.parent)+"/"+n.name)}function Zb(n){null!==n.parent&&function Hk(n,e,t){const r=function $k(n){return void 0===fd(n)&&!Bx(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Zb(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Zb(n))}(n.parent,n.name,n)}const Gk=/[\[\].#$\/\u0000-\u001F\u007F]/,qk=/[\[\].#$\u0000-\u001F\u007F]/,z0=10485760,W0=function(n){return"string"==typeof n&&0!==n.length&&!Gk.test(n)},$x=function(n){return"string"==typeof n&&0!==n.length&&!qk.test(n)},O_=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Xv(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},gu=function(n,e,t,r){r&&void 0===e||F_((0,k.gK)(n,"value"),e,t)},F_=function(n,e,t){const r=t instanceof dn?new tb(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+kl(r));if("function"==typeof e)throw new Error(n+"contains a function "+kl(r)+" with contents = "+e.toString());if(Xv(e))throw new Error(n+"contains "+e.toString()+" "+kl(r));if("string"==typeof e&&e.length>z0/3&&(0,k.ug)(e)>z0)throw new Error(n+"contains a string greater than "+z0+" utf8 bytes "+kl(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Yr(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!W0(l)))throw new Error(n+" contains an invalid key ("+l+") "+kl(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function YA(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),nb(n)})(r,l),F_(n,f,r),function Sk(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+kl(r)+" in addition to actual children.")}},o=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Yr(e,(l,f)=>{const _=new dn(l);if(F_(i,f,En(t,_)),".priority"===g0(_)&&!O_(f))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Kp(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!W0(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(eb);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Cs(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},u=function(n,e,t){if(!t||void 0!==e){if(Xv(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!O_(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},d=function(n,e,t,r){if(!(r&&void 0===t||W0(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},h=function(n,e,t,r){if(!(r&&void 0===t||$x(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},y=function(n,e){if(".info"===Zt(e))throw new Error(n+" failed = Can't modify data under /.info/")},I=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!W0(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$x(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class b{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function A(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!s_(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function M(n,e,t){A(n,t),z(n,r=>s_(r,e))}function L(n,e,t){A(n,t),z(n,r=>Cs(r,e)||Cs(e,r))}function z(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(ee(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function ee(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Nl&&Kr("event: "+t.toString()),Oh(r)}}}const Ee="repo_interrupt";class Ge{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new b,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=p_(),this.transactionQueueTree_=new N_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Dt(n){const t=n.infoData_.getNode(new dn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Me(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Dt(n)})}function kt(n,e,t,r,i){n.dataUpdateCount++;const a=new dn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,k.UI)(t,w=>Cn(w));l=function kx(n,e,t,r){const i=$b(n,r);if(i){const a=Hb(i),l=a.path,f=a.queryId,_=Ii(l,e),w=Nn.fromObject(t);return Gb(n,l,new zh(m_(f),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=Cn(t);l=Vb(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,k.UI)(t,w=>Cn(w));l=function Vk(n,e,t){const r=Nn.fromObject(t);return Bl(n,new zh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=Cn(t);l=S_(n.serverSyncTree_,a,_)}let f=a;l.length>0&&(f=U_(n,a)),L(n.eventQueue_,f,l)}function Pn(n,e){Kb(n,"connected",e),!1===e&&function k2(n){L_(n,"onDisconnectEvents");const e=Me(n),t=p_();gb(n.onDisconnect_,un(),(i,a)=>{const l=G0(i,a,n.serverSyncTree_,e);ud(t,i,l)});let r=[];gb(t,un(),(i,a)=>{r=r.concat(S_(n.serverSyncTree_,i,a));const l=zx(n,i);U_(n,l)}),n.onDisconnect_=p_(),L(n.eventQueue_,un(),r)}(n)}function Kb(n,e,t){const r=new dn("/.info/"+e),i=Cn(t);n.infoData_.updateSnapshot(r,i);const a=S_(n.infoSyncTree_,r,i);L(n.eventQueue_,r,a)}function Yb(n){return n.nextWriteId_++}function Hx(n,e,t,r,i){L_(n,"set",{path:e.toString(),value:t,priority:r});const a=Me(n),l=Cn(t,r),f=Ea(n.serverSyncTree_,e),_=cg(l,f,a),w=Yb(n),C=j0(n.serverSyncTree_,e,_,w,!0);A(n.eventQueue_,C),n.server_.put(e.toString(),l.val(!0),(P,U)=>{const $="ok"===P;$||ji("set at "+e+" failed: "+P);const le=ld(n.serverSyncTree_,w,!$);L(n.eventQueue_,e,le),Jh(0,i,P,U)});const S=zx(n,e);U_(n,S),L(n.eventQueue_,S,[])}function O2(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&rg(n.onDisconnect_,e),Jh(0,t,r,i)})}function Wk(n,e,t,r){const i=Cn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&ud(n.onDisconnect_,e,i),Jh(0,r,a,l)})}function Gx(n,e,t){let r;r=".info"===Zt(e._path)?cd(n.infoSyncTree_,e,t):cd(n.serverSyncTree_,e,t),M(n.eventQueue_,e._path,r)}function Zk(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Ee)}function L_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Kr(t,...e)}function Jh(n,e,t,r){e&&Oh(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function qx(n,e,t){return Ea(n.serverSyncTree_,e,t)||Bt.EMPTY_NODE}function Qb(n,e=n.transactionQueueTree_){if(e||Xb(n,e),fd(e)){const t=Yk(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function j2(n,e,t){const r=t.map(w=>w.currentWriteId),i=qx(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const C=t[w];(0,k.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const S=Ii(e,C.path);a=a.updateChild(S,C.currentOutputSnapshotRaw)}const f=a.val(!0),_=e;n.server_.put(_.toString(),f,w=>{L_(n,"transaction put response",{path:_.toString(),status:w});let C=[];if("ok"===w){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,C=C.concat(ld(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();Xb(n,Xh(n.transactionQueueTree_,e)),Qb(n,n.transactionQueueTree_),L(n.eventQueue_,e,C);for(let P=0;P<S.length;P++)Oh(S[P])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ji("transaction at "+_.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}U_(n,e)}},l)}(n,k_(e),t)}else Bx(e)&&P_(e,t=>{Qb(n,t)})}function U_(n,e){const t=Kk(n,e),r=k_(t);return function $2(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const _=e[f],w=Ii(t,_.path);let S,C=!1;if((0,k.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)C=!0,S=_.abortReason,i=i.concat(ld(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)C=!0,S="maxretry",i=i.concat(ld(n.serverSyncTree_,_.currentWriteId,!0));else{const P=qx(n,_.path,l);_.currentInputSnapshot=P;const U=e[f].update(P.val());if(void 0!==U){F_("transaction failed: Data returned ",U,_.path);let $=Cn(U);"object"==typeof U&&null!=U&&(0,k.r3)(U,".priority")||($=$.updatePriority(P.getPriority()));const ge=_.currentWriteId,st=Me(n),ct=cg($,P,st);_.currentOutputSnapshotRaw=$,_.currentOutputSnapshotResolved=ct,_.currentWriteId=Yb(n),l.splice(l.indexOf(ge),1),i=i.concat(j0(n.serverSyncTree_,_.path,ct,_.currentWriteId,_.applyLocally)),i=i.concat(ld(n.serverSyncTree_,ge,!0))}else C=!0,S="nodata",i=i.concat(ld(n.serverSyncTree_,_.currentWriteId,!0))}L(n.eventQueue_,t,i),i=[],C&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===S?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(S),!1,null)))}Xb(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)Oh(r[f]);Qb(n,n.transactionQueueTree_)}(n,Yk(n,t),r),r}function Kk(n,e){let t,r=n.transactionQueueTree_;for(t=Zt(e);null!==t&&void 0===fd(r);)r=Xh(r,t),t=Zt(e=bn(e));return r}function Yk(n,e){const t=[];return Qk(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Qk(n,e,t){const r=fd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);P_(e,i=>{Qk(n,i,t)})}function Xb(n,e){const t=fd(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,q0(e,t.length>0?t:void 0)}P_(e,r=>{Xb(n,r)})}function zx(n,e){const t=k_(Kk(n,e)),r=Xh(n.transactionQueueTree_,e);return function jx(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Wx(n,i)}),Wx(n,r),Wb(r,i=>{Wx(n,i)}),t}function Wx(n,e){const t=fd(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(ld(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?q0(e,void 0):t.length=a+1,L(n.eventQueue_,k_(e),i);for(let l=0;l<r.length;l++)Oh(r[l])}}const Zx=function(n,e){const t=q2(n),r=t.namespace;return"firebase.com"===t.domain&&ma(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ma("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ji("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new n0(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new dn(t.pathString)}},q2=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(f=n.substring(0,w-1),n=n.substring(w+2));let C=n.indexOf("/");-1===C&&(C=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(C,S)),C<S&&(i=function H2(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(C,S)));const P=function G2(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ji(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(l="https"===f||"wss"===f,_=parseInt(e.substring(w+1),10)):w=e.length;const U=e.slice(0,w);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const $=e.indexOf(".");r=e.substring(0,$).toLowerCase(),t=e.substring($+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}},Xk="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",z2=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Xk.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=Xk.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class Jk{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Wl)(this.snapshot.exportVal())}}class eO{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Kx{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class tO{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return O2(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){y("OnDisconnect.remove",this._path);const e=new k.BH;return Wk(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){y("OnDisconnect.set",this._path),gu("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return Wk(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){y("OnDisconnect.setWithPriority",this._path),gu("OnDisconnect.setWithPriority",e,this._path,!1),u("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function F2(n,e,t,r,i){const a=Cn(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,f)=>{"ok"===l&&ud(n.onDisconnect_,e,a),Jh(0,i,l,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){y("OnDisconnect.update",this._path),o("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function L2(n,e,t,r){if((0,k.xb)(t))return Kr("onDisconnect().update() called with empty data.  Don't do anything."),void Jh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Yr(t,(l,f)=>{const _=Cn(f);ud(n.onDisconnect_,En(e,l),_)}),Jh(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ys{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return zt(this._path)?null:g0(this._path)}get ref(){return new Ia(this._repo,this._path)}get _queryIdentifier(){const e=pb(this._queryParams),t=sd(e);return"{}"===t?"default":t}get _queryObject(){return pb(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof Ys))return!1;const t=this._repo===e._repo,r=s_(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function KA(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Jb(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ef(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===bs){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==uu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Zs)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===In){if(null!=e&&!O_(e)||null!=t&&!O_(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof w0||n.getIndex()===db,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function eT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ia extends Ys{constructor(e,t){super(e,t,new h_,!1)}get parent(){const e=JC(this._path);return null===e?null:new Ia(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class dg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new dn(e),r=hg(this.ref,e);return new dg(this._node.getChild(t),r,In)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new dg(i,hg(this.ref,r),In)))}hasChild(e){const t=new dn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function nO(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?hg(n._root,e):n._root}function rO(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=Zx(e,n._repo.repoInfo_.nodeAdmin);I("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ma("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),nO(n,t.path.toString())}function hg(n,e){return null===Zt((n=(0,k.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),h("child","path",t,!1)):h("child","path",e,!1),new Ia(n._repo,En(n._path,e));var t}function Yx(n,e){n=(0,k.m9)(n),y("set",n._path),gu("set",e,n._path,!1);const t=new k.BH;return Hx(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Q2(n,e){o("update",e,n._path,!1);const t=new k.BH;return function P2(n,e,t,r){L_(n,"update",{path:e.toString(),value:t});let i=!0;const a=Me(n),l={};if(Yr(t,(f,_)=>{i=!1,l[f]=G0(En(e,f),Cn(_),n.serverSyncTree_,a)}),i)Kr("update() called with empty data.  Don't do anything."),Jh(0,r,"ok",void 0);else{const f=Yb(n),_=function Uk(n,e,t,r){!function Rk(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Yh(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Nn.fromObject(t);return Bl(n,new zh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,f);A(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,C)=>{const S="ok"===w;S||ji("update at "+e+" failed: "+w);const P=ld(n.serverSyncTree_,f,!S),U=P.length>0?U_(n,e):e;L(n.eventQueue_,U,P),Jh(0,r,w,C)}),Yr(t,w=>{const C=zx(n,En(e,w));U_(n,C)}),L(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function X2(n){n=(0,k.m9)(n);const e=new Kx(()=>{}),t=new Z0(e);return function N2(n,e,t){const r=function Bb(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,C)=>{const S=Ii(w,t);r=r||Mo(C,S)});let i=n.syncPointTree_.get(t);i?r=r||Mo(i,un()):(i=new O0,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new hu(r,!0,!1):null;return function kk(n){return S0(n.viewCache_)}(L0(i,e,w_(n.pendingWriteTree_,e._path),a?l.getNode():Bt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Cn(i).withIndex(e._queryParams.getIndex());let l;if(A_(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=S_(n.serverSyncTree_,e._path,a);else{const f=dd(n.serverSyncTree_,e);l=Vb(n.serverSyncTree_,e._path,a,f)}return L(n.eventQueue_,e._path,l),cd(n.serverSyncTree_,e,t,null,!0),a},i=>(L_(n,"get for query "+(0,k.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new dg(r,new Ia(n._repo,n._path),n._queryParams.getIndex()))}class Z0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Jk("value",this,new dg(e.snapshotNode,new Ia(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new eO(this,e,t):null}matches(e){return e instanceof Z0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class tT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new eO(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=hg(new Ia(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Jk(e.type,this,new dg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof tT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function K0(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(C,S)=>{Gx(n._repo,n,f),_(C,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new Kx(t,a||void 0),f="value"===e?new Z0(l):new tT(e,l);return function U2(n,e,t){let r;r=".info"===Zt(e._path)?A_(n.infoSyncTree_,e,t):A_(n.serverSyncTree_,e,t),M(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>Gx(n._repo,n,f)}function Qx(n,e,t,r){return K0(n,"value",e,t,r)}function iO(n,e,t,r){return K0(n,"child_added",e,t,r)}function sO(n,e,t,r){return K0(n,"child_changed",e,t,r)}function oO(n,e,t,r){return K0(n,"child_moved",e,t,r)}function aO(n,e,t,r){return K0(n,"child_removed",e,t,r)}function uO(n,e,t){let r=null;const i=t?new Kx(t):null;"value"===e?r=new Z0(i):e&&(r=new tT(e,i)),Gx(n._repo,n,r)}class mu{}class lO extends mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){gu("endAt",this._value,e._path,!0);const t=Gh(e._queryParams,this._value,this._key);if(eT(t),ef(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ys(e._repo,e._path,t,e._orderByCalled)}}class eB extends mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){gu("endBefore",this._value,e._path,!1);const t=function I0(n,e,t){let r;return r=Gh(n,e,n.index_===bs||t?t:uu),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(eT(t),ef(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ys(e._repo,e._path,t,e._orderByCalled)}}class cO extends mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){gu("startAt",this._value,e._path,!0);const t=f_(e._queryParams,this._value,this._key);if(eT(t),ef(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ys(e._repo,e._path,t,e._orderByCalled)}}class rB extends mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){gu("startAfter",this._value,e._path,!1);const t=function fb(n,e,t){let r;return r=f_(n,e,n.index_===bs||t?t:Zs),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(eT(t),ef(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ys(e._repo,e._path,t,e._orderByCalled)}}class sB extends mu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ys(e._repo,e._path,function ax(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class aB extends mu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ys(e._repo,e._path,function E0(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class lB extends mu{constructor(e){super(),this._path=e}_apply(e){Jb(e,"orderByChild");const t=new dn(this._path);if(zt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new w0(t),i=C0(e._queryParams,r);return ef(i),new Ys(e._repo,e._path,i,!0)}}class dB extends mu{_apply(e){Jb(e,"orderByKey");const t=C0(e._queryParams,bs);return ef(t),new Ys(e._repo,e._path,t,!0)}}class fB extends mu{_apply(e){Jb(e,"orderByPriority");const t=C0(e._queryParams,In);return ef(t),new Ys(e._repo,e._path,t,!0)}}class gB extends mu{_apply(e){Jb(e,"orderByValue");const t=C0(e._queryParams,db);return ef(t),new Ys(e._repo,e._path,t,!0)}}class _B extends mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(gu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new lO(this._value,this._key)._apply(new cO(this._value,this._key)._apply(e))}}function _u(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function Fk(n){(0,k.hu)(!T_,"__referenceConstructor has already been defined"),T_=n})(Ia),function Lk(n){(0,k.hu)(!B0,"__referenceConstructor has already been defined"),B0=n}(Ia);const Xx={};function hO(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||ma("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Kr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,l=Zx(a,i),f=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${f.namespace}`,l=Zx(a,i),f=l.repoInfo):_=!l.repoInfo.secure;const C=i&&_?new Fh(Fh.OWNER):new LA(n.name,n.options,e);I("Invalid Firebase Database URL",l),zt(l.path)||ma("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function IB(n,e,t,r){let i=Xx[e.name];i||(i={},Xx[e.name]=i);let a=i[n.toURLString()];return a&&ma("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Ge(n,false,t,r),i[n.toURLString()]=a,a}(f,n,C,new DC(n.name,t));return new bB(S,n)}class bB{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function tt(n,e,t){if(n.stats_=o0(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new ng(n.repoInfo_,(r,i,a,l)=>{kt(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Pn(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new cu(n.repoInfo_,e,(r,i,a,l)=>{kt(n,r,i,a,l)},r=>{Pn(n,r)},r=>{!function dr(n,e){Yr(e,(t,r)=>{Kb(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function BA(n,e){const t=n.toString();return s0[t]||(s0[t]=e()),s0[t]}(n.repoInfo_,()=>new _b(n.stats_,n.server_)),n.infoData_=new qh,n.infoSyncTree_=new Ub({startListening:(r,i,a,l)=>{let f=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(f=S_(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),Kb(n,"connected",!1),n.serverSyncTree_=new Ub({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,_)=>{const w=l(f,_);L(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ia(this._repo,un())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function EB(n,e){const t=Xx[e];(!t||t[n.key]!==n)&&ma(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Zk(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ma("Cannot call "+e+" on a deleted database.")}}function fO(){n_.IS_TRANSPORT_INITIALIZED&&ji("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function TB(){fO(),lu.forceDisallow()}function DB(){fO(),Vh.forceDisallow(),lu.forceAllow()}function xB(n,e){Yv(n,e)}const MB={".sv":"timestamp"};class kB{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}cu.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},cu.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function RB(n){qp(Vi.SDK_VERSION),(0,Vi._registerComponent)(new Ws.wA("database",(e,{instanceIdentifier:t})=>hO(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Vi.registerVersion)(mC,"0.14.4",n),(0,Vi.registerVersion)(mC,"0.14.4","esm2017")}();const UB=new Bi.Yd("@firebase/database-compat"),gO=function(n){UB.warn("FIREBASE WARNING: "+n)};class jB{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,gO("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class $B{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class tf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),h("DataSnapshot.child","path",e,!1),new tf(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),h("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new tf(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new No(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Gi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=Gi.getCancelAndContextArgs_("Query.on",r,i),f=(w,C)=>{t.call(l.context,new tf(this.database,w),C)};f.userCallback=t,f.context=l.context;const _=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return Qx(this._delegate,f,_),t;case"child_added":return iO(this._delegate,f,_),t;case"child_removed":return aO(this._delegate,f,_),t;case"child_changed":return sO(this._delegate,f,_),t;case"child_moved":return oO(this._delegate,f,_),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,uO(this._delegate,e,i)}else uO(this._delegate,e)}get(){return X2(this._delegate).then(e=>new tf(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=Gi.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,f=(w,C)=>{const S=new tf(this.database,w);t&&t.call(a.context,S,C),l.resolve(S)};f.userCallback=t,f.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":Qx(this._delegate,f,_,{onlyOnce:!0});break;case"child_added":iO(this._delegate,f,_,{onlyOnce:!0});break;case"child_removed":aO(this._delegate,f,_,{onlyOnce:!0});break;case"child_changed":sO(this._delegate,f,_,{onlyOnce:!0});break;case"child_moved":oO(this._delegate,f,_,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Gi(this.database,_u(this._delegate,function oB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new sB(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Gi(this.database,_u(this._delegate,function uB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new aB(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Gi(this.database,_u(this._delegate,function cB(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return h("orderByChild","path",n,!1),new lB(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Gi(this.database,_u(this._delegate,function hB(){return new dB}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Gi(this.database,_u(this._delegate,function pB(){return new fB}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Gi(this.database,_u(this._delegate,function mB(){return new gB}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Gi(this.database,_u(this._delegate,function nB(n=null,e){return d("startAt","key",e,!0),new cO(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Gi(this.database,_u(this._delegate,function iB(n,e){return d("startAfter","key",e,!0),new rB(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Gi(this.database,_u(this._delegate,function J2(n,e){return d("endAt","key",e,!0),new lO(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Gi(this.database,_u(this._delegate,function tB(n,e){return d("endBefore","key",e,!0),new eB(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Gi(this.database,_u(this._delegate,function yB(n,e){return d("equalTo","key",e,!0),new _B(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Gi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new No(this.database,new Ia(this._delegate._repo,this._delegate._path))}}class No extends Gi{constructor(e,t){super(e,new Ys(t._repo,t._path,new h_,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new No(this.database,hg(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new No(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new No(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=Yx(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,gO("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}y("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=Q2(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function Y2(n,e,t){if(y("setWithPriority",n._path),gu("setWithPriority",e,n._path,!1),u("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return Hx(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function Z2(n){return y("remove",n._path),Yx(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function OB(n,e,t){var r;if(n=(0,k.m9)(n),y("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new k.BH,f=Qx(n,()=>{});return function B2(n,e,t,r,i,a){L_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:wC(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=qx(n,e,void 0);l.currentInputSnapshot=f;const _=l.update(f.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{F_("transaction failed: Data returned ",_,l.path),l.status=0;const w=Xh(n.transactionQueueTree_,e),C=fd(w)||[];let S;C.push(l),q0(w,C),"object"==typeof _&&null!==_&&(0,k.r3)(_,".priority")?(S=(0,k.DV)(_,".priority"),(0,k.hu)(O_(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Ea(n.serverSyncTree_,e)||Bt.EMPTY_NODE).getPriority().val();const P=Me(n),U=Cn(_,S),$=cg(U,f,P);l.currentOutputSnapshotRaw=U,l.currentOutputSnapshotResolved=$,l.currentWriteId=Yb(n);const le=j0(n.serverSyncTree_,e,$,l.currentWriteId,l.applyLocally);L(n.eventQueue_,e,le),Qb(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,C)=>{let S=null;_?a.reject(_):(S=new dg(C,new Ia(n._repo,n._path),In),a.resolve(new kB(w,S)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new $B(a.committed,new tf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function K2(n,e){n=(0,k.m9)(n),y("setPriority",n._path),u("setPriority",e,!1);const t=new k.BH;return Hx(n._repo,En(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function W2(n,e){n=(0,k.m9)(n),y("push",n._path),gu("push",e,n._path,!0);const t=Dt(n._repo),r=z2(t),i=hg(n,r),a=hg(n,r);let l;return l=null!=e?Yx(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new No(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new No(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return y("Reference.onDisconnect",this._delegate._path),new jB(new tO(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Y0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:TB,forceLongPolling:DB}}useEmulator(e,t,r={}){!function pO(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ma("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ma('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Fh(Fh.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new Fh(l)}!function wB(n,e,t,r){n.repoInfo_=new n0(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof No){const t=rO(this._delegate,e.toString());return new No(this,t)}{const t=nO(this._delegate,e);return new No(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=rO(this._delegate,e);return new No(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function SB(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),Zk(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function AB(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function V2(n){n.persistentConnection_&&n.persistentConnection_.resume(Ee)}(n._repo)}(this._delegate)}}Y0.ServerValue={TIMESTAMP:function NB(){return MB}(),increment:n=>function PB(n){return{".sv":{increment:n}}}(n)};var GB=Object.freeze({__proto__:null,initStandalone:function HB({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){qp(t);const l=new Ws.zt("auth-internal",new Ws.H0("database-standalone"));return l.setComponent(new Ws.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Y0(hO(n,l,void 0,e,a),n),namespace:i}}});const qB=Y0.ServerValue;!function zB(n){n.INTERNAL.registerComponent(new Ws.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Y0(i,r)},"PUBLIC").setServiceProps({Reference:No,Query:Gi,Database:Y0,DataSnapshot:tf,enableLogging:xB,INTERNAL:GB,ServerValue:qB}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Xm.Z);var nT=F(5363),WB=F(6063);class ZB extends _r.x{constructor(e=1/0,t=1/0,r=WB.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)f=_;f&&r.splice(0,f+1)}}}function mO(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Hp.B)({connector:()=>new ZB(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function _O(n,e){return(0,ai.m)(e)?Un(()=>n,e):Un(()=>n)}var Jx=F(9468);F(259);const tR=new Map,vO={activated:!1,tokenObservers:[]},JB={initialized:!1,enabled:!1};function qi(n){return tR.get(n)||Object.assign({},vO)}function iT(){return JB}class sj{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function oj(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ds=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function EO(n){if(!qi(n).activated)throw Ds.create("use-before-activation",{appName:n.name})}function iR(n,e){return sR.apply(this,arguments)}function sR(){return(sR=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(S){throw Ds.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw Ds.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(S){throw Ds.create("fetch-parse-error",{originalErrorMessage:S?.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Ds.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(_[1]),C=Date.now();return{token:f.token,expireTimeMillis:C+w,issuedAtTimeMillis:C}})).apply(this,arguments)}function cj(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Q0="firebase-app-check-store";let aT=null;function CO(){return aT||(aT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ds.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Q0,{keyPath:"compositeKey"})}}catch(t){e(Ds.create("storage-open",{originalErrorMessage:t?.message}))}}),aT)}function oR(){return(oR=(0,_e.Z)(function*(n,e){const r=(yield CO()).transaction(Q0,"readwrite"),a=r.objectStore(Q0).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=_=>{l()},r.onerror=_=>{var w;f(Ds.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const X0=new Bi.Yd("@firebase/app-check");function lR(n,e){return(0,k.hl)()?function pj(n,e){return function bO(n,e){return oR.apply(this,arguments)}(function DO(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{X0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function SO(){return iT().enabled}function AO(){return dR.apply(this,arguments)}function dR(){return(dR=(0,_e.Z)(function*(){const n=iT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const wj={error:"UNKNOWN_ERROR"};function Ej(n){return k.US.encodeString(JSON.stringify(n),!1)}function uT(n){return hR.apply(this,arguments)}function hR(){return(hR=(0,_e.Z)(function*(n,e=!1){const t=n.app;EO(t);const r=qi(t);let a,i=r.token;if(i&&!V_(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(V_(_)?i=_:yield lR(t,void 0))}if(!e&&i&&V_(i))return{token:i.token};let f,l=!1;if(SO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=iR(cj(t,yield AO()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield lR(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield qi(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?X0.warn(_.message):X0.error(_),a=_}return i?a?f=V_(i)?{token:i.token,internalError:a}:MO(a):(f={token:i.token},r.token=i,yield lR(t,i)):f=MO(a),l&&RO(t,f),f})).apply(this,arguments)}function pR(n,e){const t=qi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function xO(n){const{app:e}=n,t=qi(e);let r=t.tokenRefresher;r||(r=function Ij(n){const{app:e}=n;return new sj((0,_e.Z)(function*(){let r;if(r=qi(e).token?yield uT(n,!0):yield uT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=qi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function RO(n,e){const t=qi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function V_(n){return n.expireTimeMillis-Date.now()>0}function MO(n){return{token:Ej(wj),error:n}}class Cj{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=qi(this.app);for(const t of e)pR(this.app,t.next);return Promise.resolve()}}const VO="app-check-internal";!function Lj(){(0,Vi._registerComponent)(new Ws.wA("app-check",n=>function bj(n,e){return new Cj(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(VO).initialize()})),(0,Vi._registerComponent)(new Ws.wA(VO,n=>function Tj(n){return{getToken:e=>uT(n,e),addTokenListener:e=>function fR(n,e,t,r){const{app:i}=n,a=qi(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&V_(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),xO(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>xO(n))}(n,"INTERNAL",e),removeTokenListener:e=>pR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Vi.registerVersion)("@firebase/app-check","0.6.4")}();class J0{constructor(){return(0,an.vb)("app-check")}}typeof window<"u"&&window;var cT=F(9260);const vR=new c.OlP("angularfire2.auth.use-emulator"),wR=new c.OlP("angularfire2.auth.settings"),ER=new c.OlP("angularfire2.auth.tenant-id"),IR=new c.OlP("angularfire2.auth.langugage-code"),CR=new c.OlP("angularfire2.auth.use-device-language"),bR=new c.OlP("angularfire.auth.persistence"),TR=(n,e,t,r,i,a,l,f)=>(0,vr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),l)for(const[w,C]of Object.entries(l))_.settings[w]=C;return f&&_.setPersistence(f),_},[t,r,i,a,l,f]);let dT=(()=>{class n{constructor(t,r,i,a,l,f,_,w,C,S,P,U){const $=new _r.x,le=Ye(void 0).pipe((0,nT.Q)(l.outsideAngular),Un(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,4217)))),(0,D.U)(()=>(0,vr.on)(t,a,r)),(0,D.U)(ge=>TR(ge,a,f,w,C,S,_,P)),mO({bufferSize:1,refCount:!1}));if(Iu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ye(null);else{le.pipe(ua()).subscribe();const st=le.pipe(Un(ot=>ot.getRedirectResult().then(St=>St,()=>null)),an.iC,mO({bufferSize:1,refCount:!1})),ct=le.pipe(Un(ot=>new qn.y(St=>({unsubscribe:a.runOutsideAngular(()=>ot.onAuthStateChanged(Lt=>St.next(Lt),Lt=>St.error(Lt),()=>St.complete()))})))),Xe=le.pipe(Un(ot=>new qn.y(St=>({unsubscribe:a.runOutsideAngular(()=>ot.onIdTokenChanged(Lt=>St.next(Lt),Lt=>St.error(Lt),()=>St.complete()))}))));this.authState=st.pipe(_O(ct),(0,Jx.R)(l.outsideAngular),(0,nT.Q)(l.insideAngular)),this.user=st.pipe(_O(Xe),(0,Jx.R)(l.outsideAngular),(0,nT.Q)(l.insideAngular)),this.idToken=this.user.pipe(Un(ot=>ot?(0,en.D)(ot.getIdToken()):Ye(null))),this.idTokenResult=this.user.pipe(Un(ot=>ot?(0,en.D)(ot.getIdTokenResult()):Ye(null))),this.credential=(0,zv.T)(st,$,this.authState.pipe(ws(ot=>!ot))).pipe((0,D.U)(ot=>ot?.user?ot:null),(0,Jx.R)(l.outsideAngular),(0,nT.Q)(l.insideAngular))}return(0,vr.pX)(this,le,a,{spy:{apply:(ge,st,ct)=>{(ge.startsWith("signIn")||ge.startsWith("createUser"))&&ct.then(Xe=>$.next(Xe))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(vr.Dh),c.LFG(vr.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(an.HU),c.LFG(vR,8),c.LFG(wR,8),c.LFG(ER,8),c.LFG(IR,8),c.LFG(CR,8),c.LFG(bR,8),c.LFG(J0,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Hj=(()=>{class n{constructor(){cT.Z.registerVersion("angularfire",an.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[dT]}),n})();function jO(n){return null==n}function $O(n){return"function"==typeof n.set}function HO(n,e){return $O(e)?e:n.ref(e)}function GO(n,e){if(function Gj(n){return"string"==typeof n}(n))return e.stringCase();if($O(n))return e.firebaseCase();if(function qj(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function ew(n,e,t="on",r=Ml.z){return new qn.y(i=>{let a=null;return a=n[t](e,(l,f)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,D.U)(i=>{const{snapshot:a,prevKey:l}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:l,key:f}}),(0,Hp.B)())}function qO(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Zj(n,e){const{payload:t,prevKey:r,key:i}=e,a=qO(n,i),l=function Wj(n,e){if(jO(e))return 0;{const t=qO(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:f,key:_.key};return f=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,f),n}return n;default:return n}}function zO(n){return(jO(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function WO(n,e,t){return function zj(n,e,t){return ew(n,"value","once",t).pipe(Un(r=>{const i=[Ye(r)];return e.forEach(a=>i.push(ew(n,a,"on",t))),(0,zv.T)(...i).pipe(Eo(Zj,[]))}),Gp())}(n,e=zO(e),t)}function ZO(n,e,t){const r=(e=zO(e)).map(i=>ew(n,i,"on",t));return(0,zv.T)(...r)}function KO(n,e){return function(r,i){return GO(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Xj(n){return function(t){return t?GO(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function YO(n,e){return function(){return ew(n,"value","on",e)}}const t$=new c.OlP("angularfire2.realtimeDatabaseURL"),n$=new c.OlP("angularfire2.database.use-emulator");let QO=(()=>{class n{constructor(t,r,i,a,l,f,_,w,C,S,P,U,$,le,ge){this.schedulers=f;const st=_,ct=(0,vr.on)(t,l,r);w&&TR(ct,l,C,P,U,$,S,le),this.database=(0,vr.cc)(`${ct.name}.database.${i}`,"AngularFireDatabase",ct.name,()=>{const Xe=l.runOutsideAngular(()=>ct.database(i||void 0));return st&&Xe.useEmulator(...st),Xe},[st])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>HO(this.database,t));let a=i;return r&&(a=r(i)),function Jj(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:KO(r,"update"),set:KO(r,"set"),push:i=>r.push(i),remove:Xj(r),snapshotChanges:i=>WO(n,i,t).pipe(an.iC),stateChanges:i=>ZO(n,i,t).pipe(an.iC),auditTrail:i=>function Kj(n,e,t){return function Qj(n,e,t){return function Yj(n,e){return ew(n,"value","on",e).pipe((0,D.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function pC(...n){const e=(0,lr.jO)(n);return(0,yr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),f=!1;for(let _=0;_<i;_++)(0,vs.Xf)(n[_]).subscribe((0,we.x)(r,w=>{a[_]=w,!f&&!l[_]&&(l[_]=!0,(f=l.every(T.y))&&(l=null))},Ik.Z));t.subscribe((0,we.x)(r,_=>{if(f){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,D.U)(([i,a])=>{const l=i.lastKeyToLoad,f=a.map(_=>_.key);return{actions:a,lastKeyToLoad:l,loadedKeys:f}}),function gC(n){return(0,yr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,we.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,D.U)(i=>i.actions))}(n,ZO(n,e).pipe(Eo((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(an.iC),valueChanges:(i,a)=>WO(n,i,t).pipe((0,D.U)(f=>f.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),an.iC)}}(a,this)}object(t){return function e$(n,e){return{query:n,snapshotChanges:()=>YO(n,e.schedulers.outsideAngular)().pipe(an.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>YO(n,e.schedulers.outsideAngular)().pipe(an.iC,(0,D.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>HO(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(vr.Dh),c.LFG(vr.xv,8),c.LFG(t$,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(an.HU),c.LFG(n$,8),c.LFG(dT,8),c.LFG(vR,8),c.LFG(wR,8),c.LFG(ER,8),c.LFG(IR,8),c.LFG(CR,8),c.LFG(bR,8),c.LFG(J0,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),r$=(()=>{class n{constructor(){cT.Z.registerVersion("angularfire",an.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[QO]}),n})();class nf{constructor(e){this.db=e}AddStudent(e){this.studentsRef.push({firstName:e.firstName,lastName:e.lastName,email:e.email,mobileNumber:e.mobileNumber})}GetStudent(e){return this.studentRef=this.db.object("students-list/"+e),this.studentRef}GetStudentsList(){return this.studentsRef=this.db.list("students-list"),this.studentsRef}UpdateStudent(e){this.studentRef.update({firstName:e.firstName,lastName:e.lastName,email:e.email,mobileNumber:e.mobileNumber})}DeleteStudent(e){this.studentRef=this.db.object("students-list/"+e),this.studentRef.remove()}}function i$(n,e){1&n&&(c.TgZ(0,"p",14)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please enter atleast first name "),c.qZA())}function s$(n,e){1&n&&(c.TgZ(0,"p",14)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Name shouldn't be less than 2 words "),c.qZA())}function o$(n,e){1&n&&(c.TgZ(0,"p",14)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please provide email "),c.qZA())}function a$(n,e){1&n&&(c.TgZ(0,"p",14)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please enter correct email "),c.qZA())}function u$(n,e){1&n&&(c.TgZ(0,"p",14)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please provide contact number "),c.qZA())}function l$(n,e){1&n&&(c.TgZ(0,"p",14)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Use numbers only number "),c.qZA())}nf.\u0275fac=function(e){return new(e||nf)(c.LFG(QO))},nf.\u0275prov=c.Yz7({token:nf,factory:nf.\u0275fac,providedIn:"root"});class tw{constructor(e,t,r){this.crudApi=e,this.fb=t,this.toastr=r}ngOnInit(){this.crudApi.GetStudentsList(),this.studenForm()}studenForm(){this.studentForm=this.fb.group({firstName:["",[zs.required,zs.minLength(2)]],lastName:[""],email:["",[zs.required,zs.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],mobileNumber:["",[zs.required,zs.pattern("^[0-9]+$")]]})}get firstName(){return this.studentForm.get("firstName")}get lastName(){return this.studentForm.get("lastName")}get email(){return this.studentForm.get("email")}get mobileNumber(){return this.studentForm.get("mobileNumber")}ResetForm(){this.studentForm.reset()}submitStudentData(){this.crudApi.AddStudent(this.studentForm.value),this.toastr.success(this.studentForm.controls.firstName.value+" successfully added!"),this.ResetForm()}}function c$(n,e){1&n&&(c.TgZ(0,"p",18)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please enter firstname "),c.qZA())}function d$(n,e){1&n&&(c.TgZ(0,"p",18)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Name shouldn't be less than 2 words "),c.qZA())}function h$(n,e){1&n&&(c.TgZ(0,"p",18)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please provide email "),c.qZA())}function f$(n,e){1&n&&(c.TgZ(0,"p",18)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please enter correct email "),c.qZA())}function p$(n,e){1&n&&(c.TgZ(0,"p",18)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please provide contact number "),c.qZA())}function g$(n,e){1&n&&(c.TgZ(0,"p",18)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Use numbers only number "),c.qZA())}tw.\u0275fac=function(e){return new(e||tw)(c.Y36(nf),c.Y36(Hv),c.Y36(Mm))},tw.\u0275cmp=c.Xpm({type:tw,selectors:[["app-add-student"]],decls:35,vars:8,consts:[[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","firstName","required","",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["type","text","formControlName","mobileNumber","required","",1,"form-control"],[1,"form-group","text-right"],["type","button",1,"btn","btn-secondary","gap-right",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"error"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"h2",1),c._uU(2,"Add Student"),c.qZA()(),c.TgZ(3,"form",2),c.NdJ("ngSubmit",function(){return t.submitStudentData()}),c.TgZ(4,"div",3)(5,"div",4)(6,"div",3)(7,"div",5)(8,"label"),c._uU(9,"First name"),c.qZA(),c._UZ(10,"input",6),c.YNc(11,i$,4,0,"p",7),c.YNc(12,s$,4,0,"p",7),c.qZA(),c.TgZ(13,"div",5)(14,"label"),c._uU(15,"Last name"),c.qZA(),c._UZ(16,"input",8),c.qZA()(),c.TgZ(17,"div",3)(18,"div",5)(19,"label"),c._uU(20,"Email"),c.qZA(),c._UZ(21,"input",9),c.YNc(22,o$,4,0,"p",7),c.YNc(23,a$,4,0,"p",7),c.qZA(),c.TgZ(24,"div",5)(25,"label"),c._uU(26,"Mobile number"),c.qZA(),c._UZ(27,"input",10),c.YNc(28,u$,4,0,"p",7),c.YNc(29,l$,4,0,"p",7),c.qZA()(),c.TgZ(30,"div",11)(31,"button",12),c.NdJ("click",function(){return t.ResetForm()}),c._uU(32," Reset "),c.qZA(),c.TgZ(33,"button",13),c._uU(34," Add Student "),c.qZA()()()()()),2&e&&(c.xp6(3),c.Q6J("formGroup",t.studentForm),c.xp6(8),c.Q6J("ngIf",t.firstName.touched&&t.firstName.invalid),c.xp6(1),c.Q6J("ngIf",null==t.firstName.errors?null:t.firstName.errors.minlength),c.xp6(10),c.Q6J("ngIf",t.email.touched&&t.email.invalid),c.xp6(1),c.Q6J("ngIf",null==t.email.errors?null:t.email.errors.pattern),c.xp6(5),c.Q6J("ngIf",t.mobileNumber.touched&&t.mobileNumber.invalid),c.xp6(1),c.Q6J("ngIf",null==t.mobileNumber.errors?null:t.mobileNumber.errors.pattern),c.xp6(4),c.Q6J("disabled",!t.studentForm.valid))},dependencies:[gi,xl,su,Sp,Tl,jp,Ui,Rh]});class nw{constructor(e,t,r,i,a,l){this.crudApi=e,this.fb=t,this.location=r,this.actRoute=i,this.router=a,this.toastr=l}ngOnInit(){this.updateStudentData();const e=this.actRoute.snapshot.paramMap.get("id");this.crudApi.GetStudent(e).valueChanges().subscribe(t=>{this.editForm.setValue(t)})}get firstName(){return this.editForm.get("firstName")}get lastName(){return this.editForm.get("lastName")}get email(){return this.editForm.get("email")}get mobileNumber(){return this.editForm.get("mobileNumber")}updateStudentData(){this.editForm=this.fb.group({firstName:["",[zs.required,zs.minLength(2)]],lastName:[""],email:["",[zs.required,zs.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],mobileNumber:["",[zs.required,zs.pattern("^[0-9]+$")]]})}goBack(){this.location.back()}updateForm(){this.crudApi.UpdateStudent(this.editForm.value),this.toastr.success(this.editForm.controls.firstName.value+" updated successfully"),this.router.navigate(["view-students"])}}function m$(n,e){1&n&&(c.TgZ(0,"a",7),c._uU(1," Add Student "),c.qZA())}function _$(n,e){1&n&&(c.TgZ(0,"div",8),c._UZ(1,"img",9),c.qZA())}function y$(n,e){1&n&&(c.TgZ(0,"div",8),c._UZ(1,"img",10),c.TgZ(2,"p",11),c._uU(3,"No student added yet!"),c.qZA(),c.TgZ(4,"a",7),c._uU(5," Add Student "),c.qZA()())}function v$(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"tr")(1,"th",17),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td",18)(10,"span",19),c._uU(11,"Edit"),c.qZA(),c.TgZ(12,"span",20),c.NdJ("click",function(){const a=c.CHM(t).$implicit,l=c.oxw(2);return c.KtG(l.deleteStudent(a))}),c._uU(13,"Delete"),c.qZA()()()}if(2&n){const t=e.$implicit;c.xp6(2),c.Oqu(t.$key),c.xp6(2),c.AsE("",t.firstName," ",t.lastName,""),c.xp6(2),c.Oqu(t.email),c.xp6(2),c.Oqu(t.mobileNumber),c.xp6(2),c.MGl("routerLink","/edit-student/",t.$key,"")}}nw.\u0275fac=function(e){return new(e||nw)(c.Y36(nf),c.Y36(Hv),c.Y36(Oe),c.Y36(ze),c.Y36(is),c.Y36(Mm))},nw.\u0275cmp=c.Xpm({type:nw,selectors:[["app-edit-student"]],decls:40,vars:8,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],[1,"btn-toolbar","mb-2","mb-md-0"],[1,"btn-group"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"row"],[1,"col-lg-12"],[1,"pricing-header","form-block","mx-auto"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","firstName","required","",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["type","text","formControlName","mobileNumber","required","",1,"form-control"],[1,"form-group","text-right"],["type","submit",1,"btn","btn-success","btn-block",3,"disabled"],[1,"error"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"h1",1),c._uU(2,"Edit Student Details"),c.qZA(),c.TgZ(3,"div",2)(4,"div",3)(5,"button",4),c.NdJ("click",function(){return t.goBack()}),c._uU(6," Go Back "),c.qZA()()()(),c.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"form",8),c.NdJ("ngSubmit",function(){return t.updateForm()}),c.TgZ(11,"div",5)(12,"div",9)(13,"div",5)(14,"div",10)(15,"label"),c._uU(16,"First name"),c.qZA(),c._UZ(17,"input",11),c.YNc(18,c$,4,0,"p",12),c.YNc(19,d$,4,0,"p",12),c.qZA(),c.TgZ(20,"div",10)(21,"label"),c._uU(22,"Last name"),c.qZA(),c._UZ(23,"input",13),c.qZA()(),c.TgZ(24,"div",5)(25,"div",10)(26,"label"),c._uU(27,"Email"),c.qZA(),c._UZ(28,"input",14),c.YNc(29,h$,4,0,"p",12),c.YNc(30,f$,4,0,"p",12),c.qZA(),c.TgZ(31,"div",10)(32,"label"),c._uU(33,"Mobile number"),c.qZA(),c._UZ(34,"input",15),c.YNc(35,p$,4,0,"p",12),c.YNc(36,g$,4,0,"p",12),c.qZA()(),c.TgZ(37,"div",16)(38,"button",17),c._uU(39," Update Student "),c.qZA()()()()()()()()),2&e&&(c.xp6(10),c.Q6J("formGroup",t.editForm),c.xp6(8),c.Q6J("ngIf",t.firstName.touched&&t.firstName.invalid),c.xp6(1),c.Q6J("ngIf",null==t.firstName.errors?null:t.firstName.errors.minlength),c.xp6(10),c.Q6J("ngIf",t.email.touched&&t.email.invalid),c.xp6(1),c.Q6J("ngIf",null==t.email.errors?null:t.email.errors.pattern),c.xp6(5),c.Q6J("ngIf",t.mobileNumber.touched&&t.mobileNumber.invalid),c.xp6(1),c.Q6J("ngIf",null==t.mobileNumber.errors?null:t.mobileNumber.errors.pattern),c.xp6(2),c.Q6J("disabled",!t.editForm.valid))},dependencies:[gi,xl,su,Sp,Tl,jp,Ui,Rh]});const w$=function(n){return{itemsPerPage:8,currentPage:n}};function E$(n,e){if(1&n&&(c.TgZ(0,"div",12)(1,"table",13)(2,"thead")(3,"tr")(4,"th",14),c._uU(5,"Student Id"),c.qZA(),c.TgZ(6,"th",14),c._uU(7,"Student name"),c.qZA(),c.TgZ(8,"th",14),c._uU(9,"Email"),c.qZA(),c.TgZ(10,"th",14),c._uU(11,"Mobile number"),c.qZA(),c.TgZ(12,"th",15),c._uU(13,"Edit"),c.qZA()()(),c.TgZ(14,"tbody"),c.YNc(15,v$,14,6,"tr",16),c.ALo(16,"paginate"),c.qZA()()()),2&n){const t=c.oxw();c.xp6(15),c.Q6J("ngForOf",c.xi3(16,1,t.Student,c.VKq(4,w$,t.p)))}}class rw{constructor(e,t){this.crudApi=e,this.toastr=t,this.p=1,this.hideWhenNoStudent=!1,this.noData=!1,this.preLoader=!0}ngOnInit(){this.dataState(),this.crudApi.GetStudentsList().snapshotChanges().subscribe(t=>{this.Student=[],t.forEach(r=>{r.payload.toJSON(),this.Student.push()})})}dataState(){this.crudApi.GetStudentsList().valueChanges().subscribe(e=>{this.preLoader=!1,e.length<=0?(this.hideWhenNoStudent=!1,this.noData=!0):(this.hideWhenNoStudent=!0,this.noData=!1)})}deleteStudent(e){window.confirm("Are sure you want to delete this student ?")&&(this.crudApi.DeleteStudent(e.$key),this.toastr.success(e.firstName+" successfully deleted!"))}}rw.\u0275fac=function(e){return new(e||rw)(c.Y36(nf),c.Y36(Mm))},rw.\u0275cmp=c.Xpm({type:rw,selectors:[["app-student-list"]],decls:9,vars:4,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["routerLink","/register-student","class","btn btn-success",4,"ngIf"],[1,"pricing-header","mx-auto"],["class","no-data text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],[3,"pageChange"],["routerLink","/register-student",1,"btn","btn-success"],[1,"no-data","text-center"],["src","assets/preloader.gif","alt","No student",1,"preloader-icon"],["src","assets/no-student.svg","alt","No student",1,"nodata-msg"],[1,"nodata-msg"],[1,"table-responsive"],[1,"table","table-bordered","table-responsive-sm","table-responsive-md","table-responsive-lg"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["scope","row"],[1,"text-center","action-block"],[1,"mr-2","btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"h2",1),c._uU(2,"Students List"),c.qZA(),c.YNc(3,m$,2,0,"a",2),c.qZA(),c.TgZ(4,"div",3),c.YNc(5,_$,2,0,"div",4),c.YNc(6,y$,6,0,"div",4),c.YNc(7,E$,17,6,"div",5),c.TgZ(8,"pagination-controls",6),c.NdJ("pageChange",function(i){return t.p=i}),c.qZA()()),2&e&&(c.xp6(3),c.Q6J("ngIf",t.hideWhenNoStudent),c.xp6(2),c.Q6J("ngIf",t.preLoader),c.xp6(1),c.Q6J("ngIf",t.noData),c.xp6(1),c.Q6J("ngIf",t.hideWhenNoStudent))},dependencies:[Jr,gi,xA,Im,fC]});const I$=[{path:"",redirectTo:"/register-student",pathMatch:"full"},{path:"register-student",component:tw},{path:"view-students",component:rw},{path:"edit-student/:id",component:nw}];class B_{}B_.\u0275fac=function(e){return new(e||B_)},B_.\u0275mod=c.oAB({type:B_}),B_.\u0275inj=c.cJS({imports:[wh.forChild(I$),wh]});class fg{}fg.\u0275fac=function(e){return new(e||fg)},fg.\u0275mod=c.oAB({type:fg}),fg.\u0275inj=c.cJS({imports:[Ho,pI.forRoot(),uC,aC,RA,B_]});const C$=[{path:"",redirectTo:"/documentation",pathMatch:"full"},{path:"documentation",component:Ch},{path:"app",loadChildren:()=>fg}];class j_{}j_.\u0275fac=function(e){return new(e||j_)},j_.\u0275mod=c.oAB({type:j_}),j_.\u0275inj=c.cJS({imports:[wh.forRoot(C$),wh]});class iw{constructor(){this.title="myApp"}}iw.\u0275fac=function(e){return new(e||iw)},iw.\u0275cmp=c.Xpm({type:iw,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"navbar","navbar-dark","bg-primary"],[1,"navcont"],["type","button","routerLink","/app",1,"btn","btn-light","btn-lg",2,"margin-right","120px","color","black"]],template:function(e,t){1&e&&(c.TgZ(0,"nav",0)(1,"h3",1),c._uU(2,"InfoBlink"),c.qZA(),c.TgZ(3,"button",2),c._uU(4,"App"),c.qZA()(),c._UZ(5,"router-outlet"))},dependencies:[Fy,Im],styles:[".navcont[_ngcontent-%COMP%]{color:#fff;font-family:Georgia;padding-left:40px;padding-top:30px;padding-bottom:30px}"]});const XO="firebasestorage.googleapis.com",JO="storageBucket";class hr extends k.ZR{constructor(e,t,r=0){super(DR(e),`Firebase Storage: ${t} (${DR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return DR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Bn=(()=>{return(n=Bn||(Bn={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Bn;var n})();function DR(n){return"storage/"+n}function SR(){return new hr(Bn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function e1(){return new hr(Bn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function t1(){return new hr(Bn.CANCELED,"User canceled the upload/download.")}function n1(){return new hr(Bn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $_(n){return new hr(Bn.INVALID_ARGUMENT,n)}function r1(){return new hr(Bn.APP_DELETED,"The Firebase app was deleted.")}function i1(n){return new hr(Bn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sw(n,e){return new hr(Bn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function ow(n){throw new hr(Bn.INTERNAL_ERROR,"Internal error: "+n)}class as{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=as.makeFromUrl(e,t)}catch{return new as(e,"")}if(""===r.path)return r;throw function k$(n){return new hr(Bn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(ot){ot.path_=decodeURIComponent(ot.path)}const S=t.replace(/[.]/g,"\\."),Xe=[{regex:f,indices:{bucket:1,path:3},postModify:function a(ot){"/"===ot.path.charAt(ot.path.length-1)&&(ot.path_=ot.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===XO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let ot=0;ot<Xe.length;ot++){const St=Xe[ot],Lt=St.regex.exec(e);if(Lt){let wu=Lt[St.indices.path];wu||(wu=""),r=new as(Lt[St.indices.bucket],wu),St.postModify(r);break}}if(null==r)throw function P$(n){return new hr(Bn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class V${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function hT(n){return"string"==typeof n||n instanceof String}function s1(n){return AR()&&n instanceof Blob}function AR(){return typeof Blob<"u"&&!(0,k.UG)()}function xR(n,e,t,r){if(r<e)throw $_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw $_(`Invalid value for '${n}'. Expected ${t} or less.`)}function pd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function o1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var rf=(()=>{return(n=rf||(rf={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",rf;var n})();function a1(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class q${constructor(e,t,r,i,a,l,f,_,w,C,S,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=C,this.connectionFactory_=S,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,$)=>{this.resolve_=U,this.reject_=$,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(f,f.getResponse());!function $$(n){return void 0!==n}(_)?a():a(_)}catch(_){l(_)}else if(null!==f){const _=SR();_.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,_):_)}else l(i.canceled?this.appDelete_?r1():t1():e1())};this.canceled_?t(0,new fT(!1,null,!0)):this.backoffId_=function B$(n,e,t){let r=1,i=null,a=null,l=!1,f=0;function _(){return 2===f}let w=!1;function C(...ge){w||(w=!0,e.apply(null,ge))}function S(ge){i=setTimeout(()=>{i=null,n(U,_())},ge)}function P(){a&&clearTimeout(a)}function U(ge,...st){if(w)return void P();if(ge)return P(),void C.call(null,ge,...st);if(_()||l)return P(),void C.call(null,ge,...st);let Xe;r<64&&(r*=2),1===f?(f=2,Xe=0):Xe=1e3*(r+Math.random()),S(Xe)}let $=!1;function le(ge){$||($=!0,P(),!w&&(null!==i?(ge||(f=2),clearTimeout(i),S(0)):ge||(f=1)))}return S(0),a=setTimeout(()=>{l=!0,le(!0)},t),le}((r,i)=>{if(i)return void r(!1,new fT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const f=a.getErrorCode()===rf.NO_ERROR,_=a.getStatus();if(!f||a1(_,this.additionalRetryCodes_)&&this.retry){const C=a.getErrorCode()===rf.ABORT;return void r(!1,new fT(!1,null,C))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new fT(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function j$(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class fT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function X$(...n){const e=function Q$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(AR())return new Blob(n);throw new hr(Bn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Po={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class RR{constructor(e,t){this.data=e,this.contentType=t||null}}function MR(n,e){switch(n){case Po.RAW:return new RR(u1(e));case Po.BASE64:case Po.BASE64URL:return new RR(l1(n,e));case Po.DATA_URL:return new RR(function nH(n){const e=new c1(n);return e.base64?l1(Po.BASE64,e.rest):function tH(n){let e;try{e=decodeURIComponent(n)}catch{throw sw(Po.DATA_URL,"Malformed data URL.")}return u1(e)}(e.rest)}(e),function rH(n){return new c1(n).contentType}(e))}throw SR()}function u1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function l1(n,e){switch(n){case Po.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw sw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Po.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw sw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function eH(n){if(typeof atob>"u")throw function U$(n){return new hr(Bn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:sw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class c1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw sw(Po.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function iH(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class jl{constructor(e,t){let r=0,i="";s1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(s1(this.data_)){const i=function J$(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new jl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new jl(r,!0)}}static getBlob(...e){if(AR()){const t=e.map(r=>r instanceof jl?r.data_:r);return new jl(X$.apply(null,t))}{const t=e.map(l=>hT(l)?MR(Po.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let f=0;f<l.length;f++)i[a++]=l[f]}),new jl(i,!0)}}uploadData(){return this.data_}}function NR(n){let e;try{e=JSON.parse(n)}catch{return null}return function G$(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function d1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function aH(n,e){return e}class Ss{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||aH}}let pT=null;function aw(){if(pT)return pT;const n=[];n.push(new Ss("bucket")),n.push(new Ss("generation")),n.push(new Ss("metageneration")),n.push(new Ss("name","fullPath",!0));const t=new Ss("name");t.xform=function e(a,l){return function uH(n){return!hT(n)||n.length<2?n:d1(n)}(l)},n.push(t);const i=new Ss("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Ss("timeCreated")),n.push(new Ss("updated")),n.push(new Ss("md5Hash",null,!0)),n.push(new Ss("cacheControl",null,!0)),n.push(new Ss("contentDisposition",null,!0)),n.push(new Ss("contentEncoding",null,!0)),n.push(new Ss("contentLanguage",null,!0)),n.push(new Ss("contentType",null,!0)),n.push(new Ss("metadata","customMetadata",!0)),pT=n,pT}function h1(n,e,t){const r=NR(e);return null===r?null:function cH(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function lH(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new as(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function PR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const f1="prefixes";class $l{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Hl(n){if(!n)throw SR()}function gT(n,e){return function t(r,i){const a=h1(n,i,e);return Hl(null!==a),a}}function H_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function M$(){return new hr(Bn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function R$(){return new hr(Bn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function x$(n){return new hr(Bn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function N$(n){return new hr(Bn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function uw(n){const e=H_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function A$(n){return new hr(Bn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function g1(n,e,t){const i=pd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new $l(i,"GET",gT(n,t),l);return f.errorHandler=uw(e),f}function mH(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=pd(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,C=new $l(f,"GET",function pH(n,e){return function t(r,i){const a=function fH(n,e,t){const r=NR(t);return null===r?null:function hH(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[f1])for(const i of t[f1]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new as(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new as(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Hl(null!==a),a}}(n,e.bucket),w);return C.urlParams=a,C.errorHandler=H_(e),C}function _1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function wH(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class mT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function kR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Hl(!1)}return Hl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const bH={STATE_CHANGED:"state_changed"},As={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function OR(n){switch(n){case"running":case"pausing":case"canceling":return As.RUNNING;case"paused":return As.PAUSED;case"success":return As.SUCCESS;case"canceled":return As.CANCELED;default:return As.ERROR}}class TH{constructor(e,t,r){if(function H$(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function G_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class DH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=rf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=rf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=rf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw ow("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ow("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ow("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ow("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ow("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class SH extends DH{initXhr(){this.xhr_.responseType="text"}}function yu(){return new SH}class E1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=aw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Bn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(a1(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=e1()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Bn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function EH(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=_1(e,r,i),f={name:l.fullPath},_=pd(a,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=PR(l,t),$=new $l(_,"POST",function U(le){let ge;kR(le);try{ge=le.getResponseHeader("X-Goog-Upload-URL")}catch{Hl(!1)}return Hl(hT(ge)),ge},n.maxUploadRetryTime);return $.urlParams=f,$.headers=C,$.body=S,$.errorHandler=H_(e),$}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,yu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function IH(n,e,t,r){const _=new $l(t,"POST",function a(w){const C=kR(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Hl(!1)}S||Hl(!1);const P=Number(S);return Hl(!isNaN(P)),new mT(P,r.size(),"final"===C)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=H_(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,yu,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new mT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function CH(n,e,t,r,i,a,l,f){const _=new mT(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function F$(){return new hr(Bn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let C=w;i>0&&(C=Math.min(C,i));const S=_.current;let U="";U=0===C?"finalize":w===C?"upload, finalize":"upload";const $={"X-Goog-Upload-Command":U,"X-Goog-Upload-Offset":`${_.current}`},le=r.slice(S,S+C);if(null===le)throw n1();const Xe=new $l(t,"POST",function ge(ot,St){const Lt=kR(ot,["active","final"]),fr=_.current+C,wu=r.size();let jP;return jP="final"===Lt?gT(e,a)(ot,St):null,new mT(fr,wu,"final"===Lt,jP)},e.maxUploadRetryTime);return Xe.headers=$,Xe.body=le.uploadData(),Xe.progressCallback=f||null,Xe.errorHandler=H_(n),Xe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const f=this._ref.storage._makeRequest(l,yu,i,a,!1);this._request=f,f.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=g1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,yu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function y1(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function f(){let Xe="";for(let ot=0;ot<2;ot++)Xe+=Math.random().toString().slice(2);return Xe}();l["Content-Type"]="multipart/related; boundary="+_;const w=_1(e,r,i),C=PR(w,t),U=jl.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===U)throw n1();const $={name:w.fullPath},le=pd(a,n.host,n._protocol),st=n.maxUploadRetryTime,ct=new $l(le,"POST",gT(n,t),st);return ct.urlParams=$,ct.headers=l,ct.body=U.uploadData(),ct.errorHandler=H_(e),ct}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,yu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=t1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=OR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new TH(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(OR(this._state)){case As.SUCCESS:G_(this._resolve.bind(null,this.snapshot))();break;case As.CANCELED:case As.ERROR:G_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(OR(this._state)){case As.RUNNING:case As.PAUSED:e.next&&G_(e.next.bind(e,this.snapshot))();break;case As.SUCCESS:e.complete&&G_(e.complete.bind(e))();break;default:e.error&&G_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class pg{constructor(e,t){this._service=e,this._location=t instanceof as?t:as.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new pg(e,t)}get root(){const e=new as(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return d1(this._location.path)}get storage(){return this._service}get parent(){const e=function sH(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new as(this._location.bucket,e);return new pg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw i1(e)}}function C1(n,e,t){return FR.apply(this,arguments)}function FR(){return(FR=(0,_e.Z)(function*(n,e,t){const i=yield b1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield C1(n,e,i.nextPageToken))})).apply(this,arguments)}function b1(n,e){null!=e&&"number"==typeof e.maxResults&&xR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=mH(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,yu)}function VH(n){n._throwIfRoot("getDownloadURL");const e=function _H(n,e,t){const i=pd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new $l(i,"GET",function gH(n,e){return function t(r,i){const a=h1(n,i,e);return Hl(null!==a),function dH(n,e,t,r){const i=NR(e);if(null===i||!hT(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return pd("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+o1({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return f.errorHandler=uw(e),f}(n.storage,n._location,aw());return n.storage.makeRequestWithTokens(e,yu).then(t=>{if(null===t)throw function L$(){return new hr(Bn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function T1(n,e){const t=function oH(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new as(n._location.bucket,t);return new pg(n.storage,r)}function D1(n,e){if(n instanceof LR){const t=n;if(null==t._bucket)throw function O$(){return new hr(Bn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+JO+"' property when initializing the app?")}();const r=new pg(t,t._bucket);return null!=e?D1(r,e):r}return void 0!==e?T1(n,e):n}function HH(n,e){if(e&&function jH(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof LR)return function $H(n,e){return new pg(n,e)}(n,e);throw $_("To use ref(service, url), the first argument must be a Storage instance.")}return D1(n,e)}function S1(n,e){const t=e?.[JO];return null==t?null:as.makeFromBucketSpec(t,n)}class LR{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=XO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?as.makeFromBucketSpec(i,this._host):S1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?as.makeFromBucketSpec(this._url,e):S1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,_e.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,_e.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new V$(r1());{const l=function Y$(n,e,t,r,i,a,l=!0){const f=o1(n.urlParams),_=n.url+f,w=Object.assign({},n.headers);return function Z$(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function z$(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function W$(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,a),function K$(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new q$(_,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,_e.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const A1="@firebase/storage";function M1(n,e){return HH(n=(0,k.m9)(n),e)}function JH(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new LR(t,r,i,e,Vi.SDK_VERSION)}!function eG(){(0,Vi._registerComponent)(new Ws.wA("storage",JH,"PUBLIC").setMultipleInstances(!0)),(0,Vi.registerVersion)(A1,"0.11.2",""),(0,Vi.registerVersion)(A1,"0.11.2","esm2017")}();class _T{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class P1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new _T(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new _T(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new _T(l,this,this._ref)):{next:t.next?l=>t.next(new _T(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class k1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new gd(e,this._service))}get items(){return this._delegate.items.map(e=>new gd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class gd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function XH(n,e){return T1(n,e)}(this._delegate,e);return new gd(t,this.storage)}get root(){return new gd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new gd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new P1(function qH(n,e,t){return function kH(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new E1(n,new jl(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Po.RAW,r){this._throwIfRoot("putString");const i=MR(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new P1(new E1(this._delegate,new jl(i.data,!0),a),this)}listAll(){return function KH(n){return function FH(n){const e={prefixes:[],items:[]};return C1(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new k1(e,this.storage))}list(e){return function ZH(n,e){return b1(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new k1(t,this.storage))}getMetadata(){return function zH(n){return function LH(n){n._throwIfRoot("getMetadata");const e=g1(n.storage,n._location,aw());return n.storage.makeRequestWithTokens(e,yu)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function WH(n,e){return function UH(n,e){n._throwIfRoot("updateMetadata");const t=function yH(n,e,t,r){const a=pd(e.fullServerUrl(),n.host,n._protocol),f=PR(t,r),w=n.maxOperationRetryTime,C=new $l(a,"PATCH",gT(n,r),w);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=f,C.errorHandler=uw(e),C}(n.storage,n._location,e,aw());return n.storage.makeRequestWithTokens(t,yu)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function YH(n){return VH(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function QH(n){return function BH(n){n._throwIfRoot("deleteObject");const e=function vH(n,e){const r=pd(e.fullServerUrl(),n.host,n._protocol),f=new $l(r,"DELETE",function l(_,w){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=uw(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,yu)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw i1(e)}}class O1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(F1(e))throw $_("ref() expected a child path but got a URL, use refFromURL instead.");return new gd(M1(this._delegate,e),this)}refFromURL(e){if(!F1(e))throw $_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{as.makeFromUrl(e,this._delegate.host)}catch{throw $_("refFromUrl() expected a valid full URL but got an invalid one.")}return new gd(M1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function N1(n,e,t,r={}){!function GH(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function F1(n){return/^[A-Za-z]+:\/\//.test(n)}function iG(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new O1(t,r)}function L1(n){const e=function oG(n){return new qn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function b$(n,e=Ml.z){return(0,yr.e)((t,r)=>{let i=null,a=null,l=null;const f=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=l+n,C=e.now();if(C<w)return i=this.schedule(void 0,w-C),void r.add(i);f()}t.subscribe((0,we.x)(r,w=>{a=w,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,D.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function yT(n){return{getDownloadURL:()=>Ye(void 0).pipe(an.fc,Un(()=>n.getDownloadURL()),an.iC),getMetadata:()=>Ye(void 0).pipe(an.fc,Un(()=>n.getMetadata()),an.iC),delete:()=>(0,en.D)(n.delete()),child:e=>yT(n.child(e)),updateMetadata:e=>(0,en.D)(n.updateMetadata(e)),put:(e,t)=>L1(n.put(e,t)),putString:(e,t,r)=>L1(n.putString(e,t,r)),list:e=>(0,en.D)(n.list(e)),listAll:()=>(0,en.D)(n.listAll())}}!function sG(n){const e={TaskState:As,TaskEvent:bH,StringFormat:Po,Storage:O1,Reference:gd};n.INTERNAL.registerComponent(new Ws.wA("storage-compat",iG,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Xm.Z);const aG=new c.OlP("angularfire2.storageBucket"),uG=new c.OlP("angularfire2.storage.maxUploadRetryTime"),lG=new c.OlP("angularfire2.storage.maxOperationRetryTime"),cG=new c.OlP("angularfire2.storage.use-emulator");let dG=(()=>{class n{constructor(t,r,i,a,l,f,_,w,C,S){const P=(0,vr.on)(t,l,r);this.storage=(0,vr.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const U=l.runOutsideAngular(()=>P.storage(i||void 0)),$=C;return $&&U.useEmulator(...$),_&&U.setMaxUploadRetryTime(_),w&&U.setMaxOperationRetryTime(w),U},[_,w])}ref(t){return yT(this.storage.ref(t))}refFromURL(t){return yT(this.storage.refFromURL(t))}upload(t,r,i){return yT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(vr.Dh),c.LFG(vr.xv,8),c.LFG(aG,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(an.HU),c.LFG(uG,8),c.LFG(lG,8),c.LFG(cG,8),c.LFG(J0,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),hG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),fG=(()=>{class n{constructor(){cT.Z.registerVersion("angularfire",an.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[dG],imports:[hG]}),n})();function UR(){return(0,yr.e)((n,e)=>{let t,r=!1;n.subscribe((0,we.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var ft,pG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},md={},VR=VR||{},jt=pG||self;function vT(){}function wT(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function lw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var BR="closure_uid_"+(1e9*Math.random()>>>0),mG=0;function _G(n,e,t){return n.call.apply(n.bind,arguments)}function yG(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function us(n,e,t){return(us=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_G:yG).apply(null,arguments)}function ET(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function zi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function sf(){this.s=this.s,this.o=this.o}sf.prototype.s=!1,sf.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function gG(n){Object.prototype.hasOwnProperty.call(n,BR)&&n[BR]||(n[BR]=++mG)}(this)},sf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const U1=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function jR(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function V1(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(wT(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function ls(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ls.prototype.h=function(){this.defaultPrevented=!0};var wG=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{jt.addEventListener("test",vT,e),jt.removeEventListener("test",vT,e)}catch{}return n}();function IT(n){return/^[\s\xa0]*$/.test(n)}var B1=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function $R(n,e){return n<e?-1:n>e?1:0}function CT(){var n=jt.navigator;return n&&(n=n.userAgent)?n:""}function Gl(n){return-1!=CT().indexOf(n)}function HR(n){return HR[" "](n),n}HR[" "]=vT;var bT,n,IG=Gl("Opera"),q_=Gl("Trident")||Gl("MSIE"),j1=Gl("Edge"),GR=j1||q_,$1=Gl("Gecko")&&!(-1!=CT().toLowerCase().indexOf("webkit")&&!Gl("Edge"))&&!(Gl("Trident")||Gl("MSIE"))&&!Gl("Edge"),CG=-1!=CT().toLowerCase().indexOf("webkit")&&!Gl("Edge");function H1(){var n=jt.document;return n?n.documentMode:void 0}e:{var qR="",zR=(n=CT(),$1?/rv:([^\);]+)(\)|;)/.exec(n):j1?/Edge\/([\d\.]+)/.exec(n):q_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):CG?/WebKit\/(\S+)/.exec(n):IG?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(zR&&(qR=zR?zR[1]:""),q_){var WR=H1();if(null!=WR&&WR>parseFloat(qR)){bT=String(WR);break e}}bT=qR}var bG={};var DG=jt.document&&q_&&(H1()||parseInt(bT,10))||void 0;function cw(n,e){if(ls.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if($1){e:{try{HR(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:SG[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&cw.X.h.call(this)}}zi(cw,ls);var SG={2:"touch",3:"pen",4:"mouse"};cw.prototype.h=function(){cw.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var dw="closure_listenable_"+(1e6*Math.random()|0),AG=0;function xG(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++AG,this.ba=this.ea=!1}function TT(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function KR(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function q1(n){const e={};for(const t in n)e[t]=n[t];return e}const z1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W1(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<z1.length;a++)t=z1[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function DT(n){this.src=n,this.g={},this.h=0}function YR(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=U1(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(TT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function QR(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}DT.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=QR(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new xG(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var XR="closure_lm_"+(1e6*Math.random()|0),JR={};function Z1(n,e,t,r,i){if(r&&r.once)return Y1(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Z1(n,e[a],t,r,i);return null}return t=rM(t),n&&n[dw]?n.N(e,t,lw(r)?!!r.capture:!!r,i):K1(n,e,t,!1,r,i)}function K1(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=lw(i)?!!i.capture:!!i,f=tM(n);if(f||(n[XR]=f=new DT(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function RG(){const e=MG;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)wG||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(X1(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Y1(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Y1(n,e[a],t,r,i);return null}return t=rM(t),n&&n[dw]?n.O(e,t,lw(r)?!!r.capture:!!r,i):K1(n,e,t,!0,r,i)}function Q1(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Q1(n,e[a],t,r,i);else r=lw(r)?!!r.capture:!!r,t=rM(t),n&&n[dw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=QR(a=n.g[e],t,r,i))&&(TT(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=tM(n))&&(e=n.g[e.toString()],n=-1,e&&(n=QR(e,t,r,i)),(t=-1<n?e[n]:null)&&eM(t))}function eM(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[dw])YR(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(X1(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=tM(e))?(YR(t,n),0==t.h&&(t.src=null,e[XR]=null)):TT(n)}}}function X1(n){return n in JR?JR[n]:JR[n]="on"+n}function MG(n,e){if(n.ba)n=!0;else{e=new cw(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&eM(n),n=t.call(r,e)}return n}function tM(n){return(n=n[XR])instanceof DT?n:null}var nM="__closure_events_fn_"+(1e9*Math.random()>>>0);function rM(n){return"function"==typeof n?n:(n[nM]||(n[nM]=function(e){return n.handleEvent(e)}),n[nM])}function Ci(){sf.call(this),this.i=new DT(this),this.P=this,this.I=null}function Wi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ls(e,n);else if(e instanceof ls)e.target=e.target||n;else{var i=e;W1(e=new ls(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=ST(l,r,!0,e)&&i}if(i=ST(l=e.g=n,r,!0,e)&&i,i=ST(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=ST(l=e.g=t[a],r,!1,e)&&i}function ST(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var f=l.listener,_=l.ha||l.src;l.ea&&YR(n.i,l),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}zi(Ci,sf),Ci.prototype[dw]=!0,Ci.prototype.removeEventListener=function(n,e,t,r){Q1(this,n,e,t,r)},Ci.prototype.M=function(){if(Ci.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)TT(t[r]);delete n.g[e],n.h--}}this.I=null},Ci.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ci.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var iM=jt.JSON.stringify;function NG(){var n=tF;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var sM,J1=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new kG,n=>n.reset());class kG{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function OG(n){jt.setTimeout(()=>{throw n},0)}function eF(n,e){sM||function FG(){var n=jt.Promise.resolve(void 0);sM=function(){n.then(LG)}}(),oM||(sM(),oM=!0),tF.add(n,e)}var oM=!1,tF=new class PG{constructor(){this.h=this.g=null}add(e,t){const r=J1.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function LG(){for(var n;n=NG();){try{n.h.call(n.g)}catch(t){OG(t)}var e=J1;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}oM=!1}function AT(n,e){Ci.call(this),this.h=n||1,this.g=e||jt,this.j=us(this.lb,this),this.l=Date.now()}function aM(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function uM(n,e,t){if("function"==typeof n)t&&(n=us(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=us(n.handleEvent,n)}return 2147483647<Number(e)?-1:jt.setTimeout(n,e||0)}function nF(n){n.g=uM(()=>{n.g=null,n.i&&(n.i=!1,nF(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}zi(AT,Ci),(ft=AT.prototype).ca=!1,ft.R=null,ft.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Wi(this,"tick"),this.ca&&(aM(this),this.start()))}},ft.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){AT.X.M.call(this),aM(this),delete this.g};class UG extends sf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:nF(this)}M(){super.M(),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hw(n){sf.call(this),this.h=n,this.g={}}zi(hw,sf);var rF=[];function iF(n,e,t,r){Array.isArray(t)||(t&&(rF[0]=t.toString()),t=rF);for(var i=0;i<t.length;i++){var a=Z1(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function sF(n){KR(n.g,function(e,t){this.g.hasOwnProperty(t)&&eM(e)},n),n.g={}}function xT(){this.g=!0}function z_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function $G(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return iM(t)}catch{return e}}(n,t)+(r?" "+r:"")})}hw.prototype.M=function(){hw.X.M.call(this),sF(this)},hw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xT.prototype.Aa=function(){this.g=!1},xT.prototype.info=function(){};var gg={},oF=null;function RT(){return oF=oF||new Ci}function aF(n){ls.call(this,gg.Pa,n)}function fw(n){const e=RT();Wi(e,new aF(e))}function uF(n,e){ls.call(this,gg.STAT_EVENT,n),this.stat=e}function xs(n){const e=RT();Wi(e,new uF(e,n))}function lF(n,e){ls.call(this,gg.Qa,n),this.size=e}function pw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return jt.setTimeout(function(){n()},e)}gg.Pa="serverreachability",zi(aF,ls),gg.STAT_EVENT="statevent",zi(uF,ls),gg.Qa="timingevent",zi(lF,ls);var MT={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},cF={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function lM(){}function hF(){}lM.prototype.h=null;var hM,gw={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function cM(){ls.call(this,"d")}function dM(){ls.call(this,"c")}function NT(){}function mw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new hw(this),this.O=HG,this.T=new AT(n=GR?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new fF}function fF(){this.i=null,this.g="",this.h=!1}zi(cM,ls),zi(dM,ls),zi(NT,lM),NT.prototype.g=function(){return new XMLHttpRequest},NT.prototype.i=function(){return{}},hM=new NT;var HG=45e3,fM={},PT={};function pM(n,e,t){n.K=1,n.v=LT(_d(e)),n.s=t,n.P=!0,pF(n,null)}function pF(n,e){n.F=Date.now(),_w(n),n.A=_d(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),bF(t.i,"t",r),n.C=0,t=n.l.H,n.h=new fF,n.g=ZF(n.l,t?e:null,!n.s),0<n.N&&(n.L=new UG(us(n.La,n,n.g),n.N)),iF(n.S,n.g,"readystatechange",n.ib),e=n.H?q1(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),fw(),function VG(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),_=0;_<f.length;_++){var w=f[_].split("=");if(1<w.length){var C=w[0];w=w[1];var S=C.split("_");l=2<=S.length&&"type"==S[1]?l+(C+"=")+w+"&":l+(C+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function gF(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function mF(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=GG(n,t),i==PT){4==e&&(n.o=4,xs(14),r=!1),z_(n.j,n.m,null,"[Incomplete Response]");break}if(i==fM){n.o=4,xs(15),z_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}z_(n.j,n.m,i,null),gM(n,i)}gF(n)&&i!=PT&&i!=fM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,xs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),CM(e),e.K=!0,xs(11))):(z_(n.j,n.m,t,"[Invalid Chunked Response]"),mg(n),yw(n))}function GG(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?PT:(t=Number(e.substring(t,r)),isNaN(t)?fM:(r+=1)+t>e.length?PT:(e=e.substr(r,t),n.C=r+t,e))}function _w(n){n.V=Date.now()+n.O,_F(n,n.O)}function _F(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=pw(us(n.gb,n),e)}function kT(n){n.B&&(jt.clearTimeout(n.B),n.B=null)}function yw(n){0==n.l.G||n.I||GF(n.l,n)}function mg(n){kT(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,aM(n.T),sF(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function gM(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||mM(t.h,n)))if(!n.J&&mM(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;HT(t),jT(t)}IM(t),xs(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=pw(us(t.cb,t),6e3));if(1>=SF(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else yg(t,11)}else if((n.J||t.g==n)&&HT(t),!IT(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const C=w[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const S=w[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const P=w[5];null!=P&&"number"==typeof P&&0<P&&(t.J=r=1.5*P,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const $=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($){var a=r.h;a.g||-1==$.indexOf("spdy")&&-1==$.indexOf("quic")&&-1==$.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(_M(a,a.h),a.h=null))}if(r.D){const le=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;le&&(r.za=le,ir(r.F,r.D,le))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=WF(r,r.H?r.ka:null,r.V),l.J){AF(r.h,l);var f=l,_=r.J;_&&f.setTimeout(_),f.B&&(kT(f),_w(f)),r.g=l}else $F(r);0<t.i.length&&$T(t)}else"stop"!=w[0]&&"close"!=w[0]||yg(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?yg(t,7):EM(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}fw()}catch{}}function yF(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(wT(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function zG(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(wT(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function qG(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(wT(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(ft=mw.prototype).setTimeout=function(n){this.O=n},ft.ib=function(n){n=n.target;const e=this.L;e&&3==yd(n)?e.l():this.La(n)},ft.La=function(n){try{if(n==this.g)e:{const C=yd(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||GR||this.g&&(this.h.h||this.g.fa()||FF(this.g)))){this.I||4!=C||7==e||fw(),kT(this);var t=this.g.aa();this.Y=t;t:if(gF(this)){var r=FF(this.g);n="";var i=r.length,a=4==yd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){mg(this),yw(this);var l="";break t}this.h.i=new jt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function BG(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!IT(f)){var w=f;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,xs(12),mg(this),yw(this);break e}z_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gM(this,t)}this.P?(mF(this,C,l),GR&&this.i&&3==C&&(iF(this.S,this.T,"tick",this.hb),this.T.start())):(z_(this.j,this.m,l,null),gM(this,l)),4==C&&mg(this),this.i&&!this.I&&(4==C?GF(this.l,this):(this.i=!1,_w(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,xs(12)):(this.o=0,xs(13)),mg(this),yw(this)}}}catch{}},ft.hb=function(){if(this.g){var n=yd(this.g),e=this.g.fa();this.C<e.length&&(kT(this),mF(this,n,e),this.i&&4!=n&&_w(this))}},ft.cancel=function(){this.I=!0,mg(this)},ft.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function jG(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(fw(),xs(17)),mg(this),this.o=2,yw(this)):_F(this,this.V-n)};var vF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _g(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof _g){this.h=void 0!==e?e:n.h,OT(this,n.j),this.s=n.s,this.g=n.g,FT(this,n.m),this.l=n.l,e=n.i;var t=new Ew;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),wF(this,t),this.o=n.o}else n&&(t=String(n).match(vF))?(this.h=!!e,OT(this,t[1]||"",!0),this.s=vw(t[2]||""),this.g=vw(t[3]||"",!0),FT(this,t[4]),this.l=vw(t[5]||"",!0),wF(this,t[6]||"",!0),this.o=vw(t[7]||"")):(this.h=!!e,this.i=new Ew(null,this.h))}function _d(n){return new _g(n)}function OT(n,e,t){n.j=t?vw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function FT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function wF(n,e,t){e instanceof Ew?(n.i=e,function JG(n,e){e&&!n.j&&(af(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(IF(this,r),bF(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ww(e,QG)),n.i=new Ew(e,n.h))}function ir(n,e,t){n.i.set(e,t)}function LT(n){return ir(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function vw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ww(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ZG),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ZG(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}_g.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ww(e,EF,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ww(e,EF,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ww(t,"/"==t.charAt(0)?YG:KG,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ww(t,XG)),n.join("")};var EF=/[#\/\?@]/g,KG=/[#\?:]/g,YG=/[#\?]/g,QG=/[#\?@]/g,XG=/#/g;function Ew(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function af(n){n.g||(n.g=new Map,n.h=0,n.i&&function WG(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function IF(n,e){af(n),e=W_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function CF(n,e){return af(n),e=W_(n,e),n.g.has(e)}function bF(n,e,t){IF(n,e),0<t.length&&(n.i=null,n.g.set(W_(n,e),jR(t)),n.h+=t.length)}function W_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function TF(n){this.l=n||t3,n=jt.PerformanceNavigationTiming?0<(n=jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(jt.g&&jt.g.Ga&&jt.g.Ga()&&jt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=Ew.prototype).add=function(n,e){af(this),this.i=null,n=W_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){af(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ft.oa=function(){af(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},ft.W=function(n){af(this);let e=[];if("string"==typeof n)CF(this,n)&&(e=e.concat(this.g.get(W_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ft.set=function(n,e){return af(this),this.i=null,CF(this,n=W_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var t3=10;function DF(n){return!!n.h||!!n.g&&n.g.size>=n.j}function SF(n){return n.h?1:n.g?n.g.size:0}function mM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function _M(n,e){n.g?n.g.add(e):n.h=e}function AF(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function xF(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return jR(n.i)}function yM(){}function n3(){this.g=new yM}function r3(n,e,t){const r=t||"";try{yF(n,function(i,a){let l=i;lw(i)&&(l=iM(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function UT(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Iw(n){this.l=n.ac||null,this.j=n.jb||!1}function VT(n,e){Ci.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=vM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}TF.prototype.cancel=function(){if(this.i=xF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},yM.prototype.stringify=function(n){return jt.JSON.stringify(n,void 0)},yM.prototype.parse=function(n){return jt.JSON.parse(n,void 0)},zi(Iw,lM),Iw.prototype.g=function(){return new VT(this.l,this.j)},Iw.prototype.i=function(n){return function(){return n}}({}),zi(VT,Ci);var vM=0;function RF(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Cw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,bw(n)}function bw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=VT.prototype).open=function(n,e){if(this.readyState!=vM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,bw(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||jt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cw(this)),this.readyState=vM},ft.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,bw(this)),this.g&&(this.readyState=3,bw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;RF(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ft.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Cw(this):bw(this),3==this.readyState&&RF(this)}},ft.Va=function(n){this.g&&(this.response=this.responseText=n,Cw(this))},ft.Ua=function(n){this.g&&(this.response=n,Cw(this))},ft.ga=function(){this.g&&Cw(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(VT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var s3=jt.JSON.parse;function wr(n){Ci.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=MF,this.K=this.L=!1}zi(wr,Ci);var MF="",o3=/^https?$/i,a3=["POST","PUT"];function NF(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,PF(n),BT(n)}function PF(n){n.D||(n.D=!0,Wi(n,"complete"),Wi(n,"error"))}function kF(n){if(n.h&&typeof VR<"u"&&(!n.C[1]||4!=yd(n)||2!=n.aa()))if(n.v&&4==yd(n))uM(n.Ha,0,n);else if(Wi(n,"readystatechange"),4==yd(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(vF)[1]||null;if(!i&&jt.self&&jt.self.location){var a=jt.self.location.protocol;i=a.substr(0,a.length-1)}r=!o3.test(i?i.toLowerCase():"")}t=r}if(t)Wi(n,"complete"),Wi(n,"success");else{n.m=6;try{var l=2<yd(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",PF(n)}}finally{BT(n)}}}function BT(n,e){if(n.g){OF(n);const t=n.g,r=n.C[0]?vT:null;n.g=null,n.C=null,e||Wi(n,"ready");try{t.onreadystatechange=r}catch{}}}function OF(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(jt.clearTimeout(n.A),n.A=null)}function yd(n){return n.g?n.g.readyState:0}function FF(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case MF:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function LF(n){let e="";return KR(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function wM(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=LF(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ir(n,e,t))}function Tw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function UF(n){this.Ca=0,this.i=[],this.j=new xT,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Tw("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Tw("baseRetryDelayMs",5e3,n),this.bb=Tw("retryDelaySeedMs",1e4,n),this.$a=Tw("forwardChannelMaxRetries",2,n),this.ta=Tw("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new TF(n&&n.concurrentRequestLimit),this.Fa=new n3,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function EM(n){if(VF(n),3==n.G){var e=n.U++,t=_d(n.F);ir(t,"SID",n.I),ir(t,"RID",e),ir(t,"TYPE","terminate"),Dw(n,t),(e=new mw(n,n.j,e,void 0)).K=2,e.v=LT(_d(t)),t=!1,jt.navigator&&jt.navigator.sendBeacon&&(t=jt.navigator.sendBeacon(e.v.toString(),"")),!t&&jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=ZF(e.l,null),e.g.da(e.v)),e.F=Date.now(),_w(e)}zF(n)}function jT(n){n.g&&(CM(n),n.g.cancel(),n.g=null)}function VF(n){jT(n),n.u&&(jt.clearTimeout(n.u),n.u=null),HT(n),n.h.cancel(),n.m&&("number"==typeof n.m&&jt.clearTimeout(n.m),n.m=null)}function $T(n){DF(n.h)||n.m||(n.m=!0,eF(n.Ja,n),n.C=0)}function BF(n,e){var t;t=e?e.m:n.U++;const r=_d(n.F);ir(r,"SID",n.I),ir(r,"RID",t),ir(r,"AID",n.T),Dw(n,r),n.o&&n.s&&wM(r,n.o,n.s),t=new mw(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=jF(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),_M(n.h,t),pM(t,r,e)}function Dw(n,e){n.ia&&KR(n.ia,function(t,r){ir(e,r,t)}),n.l&&yF({},function(t,r){ir(e,r,t)})}function jF(n,e,t){t=Math.min(n.i.length,t);var r=n.l?us(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let _=0;_<t;_++){let w=i[_].h;const C=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),f=!1;else try{r3(C,l,"req"+w+"_")}catch{r&&r(C)}}if(f){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function $F(n){n.g||n.u||(n.Z=1,eF(n.Ia,n),n.A=0)}function IM(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=pw(us(n.Ia,n),qF(n,n.A)),n.A++,0))}function CM(n){null!=n.B&&(jt.clearTimeout(n.B),n.B=null)}function HF(n){n.g=new mw(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=_d(n.sa);ir(e,"RID","rpc"),ir(e,"SID",n.I),ir(e,"CI",n.L?"0":"1"),ir(e,"AID",n.T),ir(e,"TYPE","xmlhttp"),Dw(n,e),n.o&&n.s&&wM(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=LT(_d(e)),t.s=null,t.P=!0,pF(t,n)}function HT(n){null!=n.v&&(jt.clearTimeout(n.v),n.v=null)}function GF(n,e){var t=null;if(n.g==e){HT(n),CM(n),n.g=null;var r=2}else{if(!mM(n.h,e))return;t=e.D,AF(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Wi(r=RT(),new lF(r,t)),$T(n)}else $F(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function l3(n,e){return!(SF(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=pw(us(n.Ja,n,e),qF(n,n.C)),n.C++,0)))}(n,e)||2==r&&IM(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:yg(n,5);break;case 4:yg(n,10);break;case 3:yg(n,6);break;default:yg(n,2)}}function qF(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function yg(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=us(n.kb,n);t||(t=new _g("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||OT(t,"https"),LT(t)),function i3(n,e){const t=new xT;if(jt.Image){const r=new Image;r.onload=ET(UT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ET(UT,t,r,"TestLoadImage: error",!1,e),r.onabort=ET(UT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ET(UT,t,r,"TestLoadImage: timeout",!1,e),jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else xs(2);n.G=0,n.l&&n.l.va(e),zF(n),VF(n)}function zF(n){if(n.G=0,n.la=[],n.l){const e=xF(n.h);(0!=e.length||0!=n.i.length)&&(V1(n.la,e),V1(n.la,n.i),n.h.i.length=0,jR(n.i),n.i.length=0),n.l.ua()}}function WF(n,e,t){var r=t instanceof _g?_d(t):new _g(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),FT(r,r.m);else{var i=jt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new _g(null,void 0);r&&OT(a,r),e&&(a.g=e),i&&FT(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&ir(r,t,e),ir(r,"VER",n.ma),Dw(n,r),r}function ZF(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wr(t&&n.Da&&!n.ra?new Iw({jb:!0}):n.ra)).Ka(n.H),e}function KF(){}function GT(){if(q_&&!(10<=Number(DG)))throw Error("Environmental error: no available transport.")}function ko(n,e){Ci.call(this),this.g=new UF(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!IT(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!IT(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Z_(this)}function YF(n){cM.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function QF(){dM.call(this),this.status=1}function Z_(n){this.g=n}(ft=wr.prototype).Ka=function(n){this.L=n},ft.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():hM.g(),this.C=function dF(n){return n.h||(n.h=n.i())}(this.u?this.u:hM),this.g.onreadystatechange=us(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void NF(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=jt.FormData&&n instanceof jt.FormData,!(0<=U1(a3,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{OF(this),0<this.B&&((this.K=function u3(n){return q_&&function TG(){return function EG(n){var e=bG;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=B1(String(bT)).split("."),t=B1("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=$R(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||$R(0==i[2].length,0==a[2].length)||$R(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=us(this.qa,this)):this.A=uM(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){NF(this,a)}},ft.qa=function(){typeof VR<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wi(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Wi(this,"complete"),Wi(this,"abort"),BT(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),BT(this,!0)),wr.X.M.call(this)},ft.Ha=function(){this.s||(this.F||this.v||this.l?kF(this):this.fb())},ft.fb=function(){kF(this)},ft.aa=function(){try{return 2<yd(this)?this.g.status:-1}catch{return-1}},ft.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),s3(e)}},ft.Ea=function(){return this.m},ft.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=UF.prototype).ma=8,ft.G=1,ft.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new mw(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=q1(a),W1(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=jF(this,i,e),ir(t=_d(this.F),"RID",n),ir(t,"CVER",22),this.D&&ir(t,"X-HTTP-Session-Id",this.D),Dw(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(LF(a)))+"&"+e:this.o&&wM(t,this.o,a)),_M(this.h,i),this.Ya&&ir(t,"TYPE","init"),this.O?(ir(t,"$req",e),ir(t,"SID","null"),i.Z=!0,pM(i,t,null)):pM(i,t,e),this.G=2}}else 3==this.G&&(n?BF(this,n):0==this.i.length||DF(this.h)||BF(this))},ft.Ia=function(){if(this.u=null,HF(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=pw(us(this.eb,this),n)}},ft.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,xs(10),jT(this),HF(this))},ft.cb=function(){null!=this.v&&(this.v=null,jT(this),IM(this),xs(19))},ft.kb=function(n){n?(this.j.info("Successfully pinged google.com"),xs(2)):(this.j.info("Failed to ping google.com"),xs(1))},(ft=KF.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Ra=function(){},GT.prototype.g=function(n,e){return new ko(n,e)},zi(ko,Ci),ko.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;xs(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=WF(n,null,n.V),$T(n)},ko.prototype.close=function(){EM(this.g)},ko.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=iM(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&$T(e)},ko.prototype.M=function(){this.g.l=null,delete this.j,EM(this.g),delete this.g,ko.X.M.call(this)},zi(YF,cM),zi(QF,dM),zi(Z_,KF),Z_.prototype.xa=function(){Wi(this.g,"a")},Z_.prototype.wa=function(n){Wi(this.g,new YF(n))},Z_.prototype.va=function(n){Wi(this.g,new QF)},Z_.prototype.ua=function(){Wi(this.g,"b")},GT.prototype.createWebChannel=GT.prototype.g,ko.prototype.send=ko.prototype.u,ko.prototype.open=ko.prototype.m,ko.prototype.close=ko.prototype.close,MT.NO_ERROR=0,MT.TIMEOUT=8,MT.HTTP_ERROR=6,cF.COMPLETE="complete",hF.EventType=gw,gw.OPEN="a",gw.CLOSE="b",gw.ERROR="c",gw.MESSAGE="d",Ci.prototype.listen=Ci.prototype.N,wr.prototype.listenOnce=wr.prototype.O,wr.prototype.getLastError=wr.prototype.Oa,wr.prototype.getLastErrorCode=wr.prototype.Ea,wr.prototype.getStatus=wr.prototype.aa,wr.prototype.getResponseJson=wr.prototype.Sa,wr.prototype.getResponseText=wr.prototype.fa,wr.prototype.send=wr.prototype.da,wr.prototype.setWithCredentials=wr.prototype.Ka;var c3=md.createWebChannelTransport=function(){return new GT},d3=md.getStatEventTarget=function(){return RT()},bM=md.ErrorCode=MT,h3=md.EventType=cF,f3=md.Event=gg,XF=md.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},p3=md.FetchXmlHttpFactory=Iw,qT=md.WebChannel=hF,g3=md.XhrIo=wr;const JF="@firebase/firestore";class bi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bi.UNAUTHENTICATED=new bi(null),bi.GOOGLE_CREDENTIALS=new bi("google-credentials-uid"),bi.FIRST_PARTY=new bi("first-party-uid"),bi.MOCK_USER=new bi("mock-user");let K_="9.17.2";const uf=new Bi.Yd("@firebase/firestore");function TM(){return uf.logLevel}function Fe(n,...e){if(uf.logLevel<=Bi.in.DEBUG){const t=e.map(DM);uf.debug(`Firestore (${K_}): ${n}`,...t)}}function Pr(n,...e){if(uf.logLevel<=Bi.in.ERROR){const t=e.map(DM);uf.error(`Firestore (${K_}): ${n}`,...t)}}function vg(n,...e){if(uf.logLevel<=Bi.in.WARN){const t=e.map(DM);uf.warn(`Firestore (${K_}): ${n}`,...t)}}function DM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Je(n="Unexpected state"){const e=`FIRESTORE (${K_}) INTERNAL ASSERTION FAILED: `+n;throw Pr(e),new Error(e)}function pt(n,e){n||Je()}function Ze(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class di{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class eL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class y3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bi.UNAUTHENTICATED))}shutdown(){}}class v3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class w3{constructor(e){this.t=e,this.currentUser=bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new di;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new di,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const w=l;e.enqueueRetryable((0,_e.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new di)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt("string"==typeof r.accessToken),new eL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pt(null===e||"string"==typeof e),new bi(e)}}class E3{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=bi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(pt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class I3{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new E3(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C3{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pt("string"==typeof t.token),this.A=t.token,new tL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function b3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class nL{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=b3(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function Y_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function rL(n){return n+"\0"}class sr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return sr.fromMillis(Date.now())}static fromDate(e){return sr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new sr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new sr(0,0))}static max(){return new vt(new sr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Sw{constructor(e,t,r){void 0===t?t=0:t>e.length&&Je(),void 0===r?r=e.length-t:r>e.length-t&&Je(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Sw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ln extends Sw{construct(e,t,r){return new ln(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ln(t)}static emptyPath(){return new ln([])}}const T3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Er extends Sw{construct(e,t,r){return new Er(e,t,r)}static isValidIdentifier(e){return T3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Er(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ne(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ne(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Ne(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Er(t)}static emptyPath(){return new Er([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(ln.fromString(e))}static fromName(e){return new qe(ln.fromString(e).popFirst(5))}static empty(){return new qe(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new ln(e.slice()))}}class zT{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function SM(n){return n.fields.find(e=>2===e.kind)}function wg(n){return n.fields.filter(e=>2!==e.kind)}zT.UNKNOWN_ID=-1;class WT{constructor(e,t){this.fieldPath=e,this.kind=t}}class Aw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Aw(0,Oo.min())}}function iL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=vt.fromTimestamp(1e9===r?new sr(t+1,0):new sr(t,r));return new Oo(i,qe.empty(),e)}function sL(n){return new Oo(n.readTime,n.key,-1)}class Oo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Oo(vt.min(),qe.empty(),-1)}static max(){return new Oo(vt.max(),qe.empty(),-1)}}function AM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}const oL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function lf(n){return xM.apply(this,arguments)}function xM(){return xM=(0,_e.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==oL)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),xM.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},_=>r(_))}),l=!0,a===i&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(i=>i?ue.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(C=>{l[w]=C,++f,f===a&&r(l)},C=>i(C))}})}static doWhile(e,t){return new ue((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class ZT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new di,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new xw(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=RM(r.target.error);this.v.reject(new xw(e,i))}}static open(e,t,r,i){try{return new ZT(t,e.transaction(i,r))}catch(a){throw new xw(t,a)}}get P(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new x3(t)}}class vu{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===vu.D((0,k.z$)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Eg(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,k.hl)())return!1;if(vu.N())return!0;const e=(0,k.z$)(),t=vu.D(e),r=0<t&&t<10,i=vu.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new xw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Ne(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ne(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new xw(e,f))},a.onupgradeneeded=l=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,_e.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.F(e);const _=ZT.open(a.db,e,l?"readonly":"readwrite",r),w=i(_).next(C=>(_.V(),C)).catch(C=>(_.abort(C),ue.reject(C))).toPromise();return w.catch(()=>{}),yield _.P,w}catch(_){const w=_,C="FirebaseError"!==w.name&&f<3;if(Fe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),a.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class A3{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Eg(this.q.delete())}}class xw extends Ne{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function cf(n){return"IndexedDbTransactionError"===n.name}class x3{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Eg(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Eg(this.store.add(e))}get(e){return Eg(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Eg(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Eg(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ue((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const i=this.cursor(r);return this.H(i,(a,l,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ue((r,i)=>{t.onerror=a=>{const l=RM(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}H(e,t){const r=[];return new ue((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const _=new A3(f),w=t(f.primaryKey,f.value,_);if(w instanceof ue){const C=w.catch(S=>(_.done(),ue.reject(S)));r.push(C)}_.isDone?i():null===_.G?f.continue():f.continue(_.G)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Eg(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=RM(r.target.error);t(i)}})}let uL=!1;function RM(n){const e=vu.D((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uL||(uL=!0,setTimeout(()=>{throw r},0)),r}}return n}class R3{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){cf(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield lf(r)}yield t.nt(6e4)}))}}class M3{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return ue.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Fe("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(f=>(Fe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=sL(a);AM(l,r)>0&&(r=l)}),new Oo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Fo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class k3{constructor(e,t,r,i,a,l,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class df{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new df("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof df&&e.projectId===this.projectId&&e.database===this.database}}function lL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ig(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Rw(n){return null==n}function Mw(n){return 0===n&&1/n==-1/0}function dL(n){return"number"==typeof n&&Number.isInteger(n)&&!Mw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class O3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new O3("Invalid base64 string: "+i):i}}(e);return new hi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new hi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hi.EMPTY_BYTE_STRING=new hi("");const L3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hf(n){if(pt(!!n),"string"==typeof n){let e=0;const t=L3.exec(n);if(pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ir(n.seconds),nanos:Ir(n.nanos)}}function Ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Cg(n){return"string"==typeof n?hi.fromBase64String(n):hi.fromUint8Array(n)}function NM(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function hL(n){const e=n.mapValue.fields.__previous_value__;return NM(e)?hL(e):e}function Nw(n){const e=hf(n.mapValue.fields.__local_write_time__.timestampValue);return new sr(e.seconds,e.nanos)}const ff={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},KT={nullValue:"NULL_VALUE"};function bg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?NM(n)?4:mL(n)?9007199254740991:10:Je()}function ql(n,e){if(n===e)return!0;const t=bg(n);if(t!==bg(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nw(n).isEqual(Nw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=hf(r.timestampValue),l=hf(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Cg(n.bytesValue).isEqual(Cg(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Ir(r.geoPointValue.latitude)===Ir(i.geoPointValue.latitude)&&Ir(r.geoPointValue.longitude)===Ir(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ir(r.integerValue)===Ir(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Ir(r.doubleValue),l=Ir(i.doubleValue);return a===l?Mw(a)===Mw(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Y_(n.arrayValue.values||[],e.arrayValue.values||[],ql);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(lL(a)!==lL(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!ql(a[f],l[f])))return!1;return!0}(n,e);default:return Je()}var i}function Pw(n,e){return void 0!==(n.values||[]).find(t=>ql(t,e))}function pf(n,e){if(n===e)return 0;const t=bg(n),r=bg(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Ir(i.integerValue||i.doubleValue),f=Ir(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return fL(n.timestampValue,e.timestampValue);case 4:return fL(Nw(n),Nw(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Cg(i),f=Cg(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let _=0;_<l.length&&_<f.length;_++){const w=$t(l[_],f[_]);if(0!==w)return w}return $t(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=$t(Ir(i.latitude),Ir(a.latitude));return 0!==l?l:$t(Ir(i.longitude),Ir(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let _=0;_<l.length&&_<f.length;++_){const w=pf(l[_],f[_]);if(w)return w}return $t(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===ff.mapValue&&a===ff.mapValue)return 0;if(i===ff.mapValue)return 1;if(a===ff.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),_=a.fields||{},w=Object.keys(_);f.sort(),w.sort();for(let C=0;C<f.length&&C<w.length;++C){const S=$t(f[C],w[C]);if(0!==S)return S;const P=pf(l[f[C]],_[w[C]]);if(0!==P)return P}return $t(f.length,w.length)}(n.mapValue,e.mapValue);default:throw Je()}}function fL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=hf(n),r=hf(e),i=$t(t.seconds,r.seconds);return 0!==i?i:$t(t.nanos,r.nanos)}function Q_(n){return PM(n)}function PM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=hf(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Cg(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=PM(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${PM(r.fields[f])}`;return a+"}"}(n.mapValue):Je();var e}function Tg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kM(n){return!!n&&"integerValue"in n}function kw(n){return!!n&&"arrayValue"in n}function pL(n){return!!n&&"nullValue"in n}function gL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function YT(n){return!!n&&"mapValue"in n}function Ow(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ig(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ow(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ow(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function U3(n){return"nullValue"in n?KT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Tg(df.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Je()}function V3(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Tg(df.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ff:Je()}function _L(n,e){const t=pf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function yL(n,e){const t=pf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class gf{constructor(e,t){this.position=e,this.inclusive=t}}function vL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?qe.comparator(qe.fromName(l.referenceValue),t.key):pf(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function wL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ql(n.position[t],e.position[t]))return!1;return!0}class EL{}class rn extends EL{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new B3(e,t,r):"array-contains"===t?new H3(e,r):"in"===t?new SL(e,r):"not-in"===t?new G3(e,r):"array-contains-any"===t?new q3(e,r):new rn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new j3(e,r):new $3(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(pf(t,this.value)):null!==t&&bg(this.value)===bg(t)&&this.matchesComparison(pf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Je()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Tn extends EL{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new Tn(e,t)}matches(e){return X_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function X_(n){return"and"===n.op}function OM(n){return"or"===n.op}function FM(n){return IL(n)&&X_(n)}function IL(n){for(const e of n.filters)if(e instanceof Tn)return!1;return!0}function LM(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+Q_(n.value);if(FM(n))return n.filters.map(e=>LM(e)).join(",");{const e=n.filters.map(t=>LM(t)).join(",");return`${n.op}(${e})`}}function CL(n,e){return n instanceof rn?(t=n,(r=e)instanceof rn&&t.op===r.op&&t.field.isEqual(r.field)&&ql(t.value,r.value)):n instanceof Tn?function(t,r){return r instanceof Tn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&CL(a,r.filters[l]),!0)}(n,e):void Je();var t,r}function bL(n,e){const t=n.filters.concat(e);return Tn.create(t,n.op)}function TL(n){return n instanceof rn?`${(e=n).field.canonicalString()} ${e.op} ${Q_(e.value)}`:n instanceof Tn?function(e){return e.op.toString()+" {"+e.getFilters().map(TL).join(" ,")+"}"}(n):"Filter";var e}class B3 extends rn{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class j3 extends rn{constructor(e,t){super(e,"in",t),this.keys=DL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $3 extends rn{constructor(e,t){super(e,"not-in",t),this.keys=DL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function DL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class H3 extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kw(t)&&Pw(t.arrayValue,this.value)}}class SL extends rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Pw(this.value.arrayValue,t)}}class G3 extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Pw(this.value.arrayValue,t)}}class q3 extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Pw(this.value.arrayValue,r))}}class J_{constructor(e,t="asc"){this.field=e,this.dir=t}}function z3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Cr{constructor(e,t){this.comparator=e,this.root=t||Zi.EMPTY}insert(e,t){return new Cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zi.BLACK,null,null))}remove(e){return new Cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new QT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new QT(this.root,e,this.comparator,!1)}getReverseIterator(){return new QT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new QT(this.root,e,this.comparator,!0)}}class QT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Zi.RED,this.left=i??Zi.EMPTY,this.right=a??Zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Zi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Zi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Je();const e=this.left.check();if(e!==this.right.check())throw Je();return e+(this.isRed()?0:1)}}Zi.EMPTY=null,Zi.RED=!0,Zi.BLACK=!1,Zi.EMPTY=new class{constructor(){this.size=0}get key(){throw Je()}get value(){throw Je()}get color(){throw Je()}get left(){throw Je()}get right(){throw Je()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Zi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(e){this.comparator=e,this.data=new Cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new AL(this.data.getIterator())}getIteratorFrom(e){return new AL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class AL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ey(n){return n.hasNext()?n.getNext():void 0}class Qs{constructor(e){this.fields=e,e.sort(Er.comparator)}static empty(){return new Qs([])}unionWith(e){let t=new Rn(Er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Qs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Y_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ti{constructor(e){this.value=e}static empty(){return new Ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!YT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ow(t)}setAll(e){let t=Er.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=Ow(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());YT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ql(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];YT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ig(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ti(Ow(this.value))}}function xL(n){const e=[];return Ig(n.fields,(t,r)=>{const i=new Er([t]);if(YT(r)){const a=xL(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Qs(e)}class Kn{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new Kn(e,0,vt.min(),vt.min(),vt.min(),Ti.empty(),0)}static newFoundDocument(e,t,r,i){return new Kn(e,1,t,vt.min(),r,i,0)}static newNoDocument(e,t){return new Kn(e,2,t,vt.min(),vt.min(),Ti.empty(),0)}static newUnknownDocument(e,t){return new Kn(e,3,t,vt.min(),vt.min(),Ti.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class W3{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this._t=null}}function UM(n,e=null,t=[],r=[],i=null,a=null,l=null){return new W3(n,e,t,r,i,a,l)}function Dg(n){const e=Ze(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>LM(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Rw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Q_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Q_(r)).join(",")),e._t=t}return e._t}function Fw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!z3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wL(n.startAt,e.startAt)&&wL(n.endAt,e.endAt)}function XT(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function JT(n,e){return n.filters.filter(t=>t instanceof rn&&t.field.isEqual(e))}function RL(n,e,t){let r=KT,i=!0;for(const a of JT(n,e)){let l=KT,f=!0;switch(a.op){case"<":case"<=":l=U3(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=KT}_L({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];_L({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function ML(n,e,t){let r=ff,i=!0;for(const a of JT(n,e)){let l=ff,f=!0;switch(a.op){case">=":case">":l=V3(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=ff}yL({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];yL({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class vd{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=_,this.wt=null,this.gt=null}}function NL(n,e,t,r,i,a,l,f){return new vd(n,e,t,r,i,a,l,f)}function ty(n){return new vd(n)}function PL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function VM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function eD(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function BM(n){return null!==n.collectionGroup}function Sg(n){const e=Ze(n);if(null===e.wt){e.wt=[];const t=eD(e),r=VM(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new J_(t)),e.wt.push(new J_(Er.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new J_(Er.keyField(),a))}}}return e.wt}function Rs(n){const e=Ze(n);if(!e.gt)if("F"===e.limitType)e.gt=UM(e.path,e.collectionGroup,Sg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Sg(e))t.push(new J_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new gf(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new gf(e.startAt.position,e.startAt.inclusive):null;e.gt=UM(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.gt}function jM(n,e){e.getFirstInequalityField(),eD(n);const t=n.filters.concat([e]);return new vd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function tD(n,e,t){return new vd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lw(n,e){return Fw(Rs(n),Rs(e))&&n.limitType===e.limitType}function kL(n){return`${Dg(Rs(n))}|lt:${n.limitType}`}function $M(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>TL(r)).join(", ")}]`),Rw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Q_(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Q_(r)).join(",")),`Target(${t})`}(Rs(n))}; limitType=${n.limitType})`}function Uw(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Sg(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=vL(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,Sg(t),r)||t.endAt&&!function(i,a,l){const f=vL(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,Sg(t),r)));var t,r}function OL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FL(n){return(e,t)=>{let r=!1;for(const i of Sg(n)){const a=Z3(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Z3(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),_=l.data.field(i);return null!==f&&null!==_?pf(f,_):Je()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Je()}}function LL(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mw(e)?"-0":e}}function UL(n){return{integerValue:""+n}}function VL(n,e){return dL(e)?UL(e):LL(n,e)}class nD{constructor(){this._=void 0}}function K3(n,e,t){return n instanceof ny?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Ag?jL(n,e):n instanceof xg?$L(n,e):function(r,i){const a=BL(r,i),l=HL(a)+HL(r.It);return kM(a)&&kM(r.It)?UL(l):LL(r.Tt,l)}(n,e)}function Y3(n,e,t){return n instanceof Ag?jL(n,e):n instanceof xg?$L(n,e):t}function BL(n,e){return n instanceof ry?kM(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ny extends nD{}class Ag extends nD{constructor(e){super(),this.elements=e}}function jL(n,e){const t=GL(e);for(const r of n.elements)t.some(i=>ql(i,r))||t.push(r);return{arrayValue:{values:t}}}class xg extends nD{constructor(e){super(),this.elements=e}}function $L(n,e){let t=GL(e);for(const r of n.elements)t=t.filter(i=>!ql(i,r));return{arrayValue:{values:t}}}class ry extends nD{constructor(e,t){super(),this.Tt=e,this.It=t}}function HL(n){return Ir(n.integerValue||n.doubleValue)}function GL(n){return kw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Vw{constructor(e,t){this.field=e,this.transform=t}}class X3{constructor(e,t){this.version=e,this.transformResults=t}}class or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class iD{}function qL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new sy(n.key,or.none()):new iy(n.key,n.data,or.none());{const t=n.data,r=Ti.empty();let i=new Rn(Er.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new wd(n.key,r,new Qs(i.toArray()),or.none())}}function J3(n,e,t){n instanceof iy?function(r,i,a){const l=r.value.clone(),f=ZL(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof wd?function(r,i,a){if(!rD(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=ZL(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(WL(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Bw(n,e,t,r){return n instanceof iy?function(i,a,l,f){if(!rD(i.precondition,a))return l;const _=i.value.clone(),w=KL(i.fieldTransforms,f,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof wd?function(i,a,l,f){if(!rD(i.precondition,a))return l;const _=KL(i.fieldTransforms,f,a),w=a.data;return w.setAll(WL(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(l=t,rD(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function eq(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=BL(r.transform,i||null);null!=a&&(null===t&&(t=Ti.empty()),t.set(r.field,a))}return t||null}function zL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Y_(t,r,(i,a)=>function Q3(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ag&&r instanceof Ag||t instanceof xg&&r instanceof xg?Y_(t.elements,r.elements,ql):t instanceof ry&&r instanceof ry?ql(t.It,r.It):t instanceof ny&&r instanceof ny);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class iy extends iD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wd extends iD{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function WL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ZL(n,e,t){const r=new Map;pt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,Y3(l,f,t[i]))}return r}function KL(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,K3(a,l,e))}return r}class sy extends iD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HM extends iD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tq{constructor(e){this.count=e}}var Qr,cn;function YL(n){switch(n){default:return Je();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function QL(n){if(void 0===n)return Pr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Qr.OK:return ce.OK;case Qr.CANCELLED:return ce.CANCELLED;case Qr.UNKNOWN:return ce.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return ce.INTERNAL;case Qr.UNAVAILABLE:return ce.UNAVAILABLE;case Qr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Qr.NOT_FOUND:return ce.NOT_FOUND;case Qr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Qr.ABORTED:return ce.ABORTED;case Qr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Qr.DATA_LOSS:return ce.DATA_LOSS;default:return Je()}}(cn=Qr||(Qr={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class mf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ig(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return cL(this.inner)}size(){return this.innerSize}}const nq=new Cr(qe.comparator);function Xs(){return nq}const XL=new Cr(qe.comparator);function jw(...n){let e=XL;for(const t of n)e=e.insert(t.key,t);return e}function JL(n){let e=XL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function zl(){return $w()}function eU(){return $w()}function $w(){return new mf(n=>n.toString(),(n,e)=>n.isEqual(e))}const rq=new Cr(qe.comparator),iq=new Rn(qe.comparator);function Wt(...n){let e=iq;for(const t of n)e=e.add(t);return e}const sq=new Rn($t);function sD(){return sq}class Hw{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Gw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Hw(vt.min(),i,sD(),Xs(),Wt())}}class Gw{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Gw(r,t,Wt(),Wt(),Wt())}}class oD{constructor(e,t,r,i){this.Et=e,this.removedTargetIds=t,this.key=r,this.At=i}}class tU{constructor(e,t){this.targetId=e,this.Rt=t}}class nU{constructor(e,t,r=hi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class rU{constructor(){this.bt=0,this.vt=sU(),this.Pt=hi.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return 0!==this.bt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}Nt(){let e=Wt(),t=Wt(),r=Wt();return this.vt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Je()}}),new Gw(this.Pt,this.Vt,e,t,r)}kt(){this.St=!1,this.vt=sU()}Ot(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class oq{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Xs(),this.Kt=iU(),this.Gt=new Rn($t)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const r=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&r.xt(e.resumeToken);break;case 1:r.$t(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.$t(),r.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),r.xt(e.resumeToken));break;default:Je()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((r,i)=>{this.Jt(i)&&t(i)})}Zt(e){const t=e.targetId,r=e.Rt.count,i=this.Xt(t);if(i){const a=i.target;if(XT(a))if(0===r){const l=new qe(a.path);this.zt(t,l,Kn.newNoDocument(l,vt.min()))}else pt(1===r);else this.te(t)!==r&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((a,l)=>{const f=this.Xt(l);if(f){if(a.current&&XT(f.target)){const _=new qe(f.target.path);null!==this.Ut.get(_)||this.ne(l,_)||this.zt(l,_,Kn.newNoDocument(_,e))}a.Ct&&(t.set(l,a.Nt()),a.kt())}});let r=Wt();this.Kt.forEach((a,l)=>{let f=!0;l.forEachWhile(_=>{const w=this.Xt(_);return!w||2===w.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new Hw(e,t,this.Gt,this.Ut,r);return this.Ut=Xs(),this.Kt=iU(),this.Gt=new Rn($t),i}jt(e,t){if(!this.Jt(e))return;const r=this.ne(e,t.key)?2:0;this.Ht(e).Ot(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,t)?i.Ot(t,1):i.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ft(e){this.Ht(e).Ft()}Ht(e){let t=this.qt.get(e);return t||(t=new rU,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new Rn($t),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new rU),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function iU(){return new Cr(qe.comparator)}function sU(){return new Cr(qe.comparator)}const aq={asc:"ASCENDING",desc:"DESCENDING"},uq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lq={and:"AND",or:"OR"};class cq{constructor(e,t){this.databaseId=e,this.yt=t}}function oy(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oU(n,e){return n.yt?e.toBase64():e.toUint8Array()}function dq(n,e){return oy(n,e.toTimestamp())}function kr(n){return pt(!!n),vt.fromTimestamp(function(e){const t=hf(e);return new sr(t.seconds,t.nanos)}(n))}function GM(n,e){return(t=n,new ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function aU(n){const e=ln.fromString(n);return pt(mU(e)),e}function qw(n,e){return GM(n.databaseId,e.path)}function Wl(n,e){const t=aU(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(lU(t))}function qM(n,e){return GM(n.databaseId,e)}function uU(n){const e=aU(n);return 4===e.length?ln.emptyPath():lU(e)}function zw(n){return new ln(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lU(n){return pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function cU(n,e,t){return{name:qw(n,e),fields:t.value.mapValue.fields}}function dU(n,e,t){const r=Wl(n,e.name),i=kr(e.updateTime),a=e.createTime?kr(e.createTime):vt.min(),l=new Ti({mapValue:{fields:e.fields}}),f=Kn.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function Ww(n,e){let t;if(e instanceof iy)t={update:cU(n,e.key,e.value)};else if(e instanceof sy)t={delete:qw(n,e.key)};else if(e instanceof wd)t={update:cU(n,e.key,e.data),updateMask:vq(e.fieldMask)};else{if(!(e instanceof HM))return Je();t={verify:qw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof ny)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ag)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof xg)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ry)return{fieldPath:a.field.canonicalString(),increment:l.It};throw Je()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:dq(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Je()),t;var i}function zM(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?or.updateTime(kr(i.updateTime)):void 0!==i.exists?or.exists(i.exists):or.none():or.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(pt("REQUEST_TIME"===l.setToServerValue),f=new ny):"appendMissingElements"in l?f=new Ag(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new xg(l.removeAllFromArray.values||[]):"increment"in l?f=new ry(a,l.increment):Je();const _=Er.fromServerFormat(l.fieldPath);return new Vw(_,f)}(n,i)):[];var i;if(e.update){const i=Wl(n,e.update.name),a=new Ti({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Qs((e.updateMask.fieldPaths||[]).map(w=>Er.fromServerFormat(w)));return new wd(i,a,l,t,r)}return new iy(i,a,t,r)}if(e.delete){const i=Wl(n,e.delete);return new sy(i,t)}if(e.verify){const i=Wl(n,e.verify);return new HM(i,t)}return Je()}function hU(n,e){return{documents:[qM(n,e.path)]}}function WM(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=qM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=qM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return gU(Tn.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:_f((C=w).field),direction:mq(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.yt||Rw(w)?w:{value:w});var w,f,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function fU(n){let e=uU(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){pt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=function(C){const S=pU(C);return S instanceof Tn&&FM(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(C=>{return new J_(ay((S=C).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(C){let S;return S="object"==typeof C?C.value:C,Rw(S)?null:S}(t.limit));let _=null;var C;t.startAt&&(_=new gf((C=t.startAt).values||[],!!C.before));let w=null;return t.endAt&&(w=function(C){return new gf(C.values||[],!C.before)}(t.endAt)),NL(e,i,l,a,f,"F",_,w)}function pU(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ay(e.unaryFilter.field);return rn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=ay(e.unaryFilter.field);return rn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ay(e.unaryFilter.field);return rn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ay(e.unaryFilter.field);return rn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Je()}}(n):void 0!==n.fieldFilter?rn.create(ay((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Je()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Tn.create(e.compositeFilter.filters.map(t=>pU(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Je()}}(e.compositeFilter.op))}(n):Je();var e}function mq(n){return aq[n]}function _q(n){return uq[n]}function yq(n){return lq[n]}function _f(n){return{fieldPath:n.canonicalString()}}function ay(n){return Er.fromServerFormat(n.fieldPath)}function gU(n){return n instanceof rn?function(e){if("=="===e.op){if(gL(e.value))return{unaryFilter:{field:_f(e.field),op:"IS_NAN"}};if(pL(e.value))return{unaryFilter:{field:_f(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gL(e.value))return{unaryFilter:{field:_f(e.field),op:"IS_NOT_NAN"}};if(pL(e.value))return{unaryFilter:{field:_f(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_f(e.field),op:_q(e.op),value:e.value}}}(n):n instanceof Tn?function(e){const t=e.getFilters().map(r=>gU(r));return 1===t.length?t[0]:{compositeFilter:{op:yq(e.op),filters:t}}}(n):Je()}function vq(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ms(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_U(e)),e=wq(n.get(t),e);return _U(e)}function wq(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function _U(n){return n+"\x01\x01"}function Zl(n){const e=n.length;if(pt(e>=2),2===e)return pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),ln.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&Je(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:Je()}a=l+2}return new ln(r)}const yU=["userId","batchId"];function aD(n,e){return[n,Ms(e)]}function vU(n,e,t){return[n,Ms(e),t]}const Eq={},Iq=["prefixPath","collectionGroup","readTime","documentId"],Cq=["prefixPath","collectionGroup","documentId"],bq=["collectionGroup","readTime","prefixPath","documentId"],Tq=["canonicalId","targetId"],Dq=["targetId","path"],Sq=["path","targetId"],Aq=["collectionId","parent"],xq=["indexId","uid"],Rq=["uid","sequenceNumber"],Mq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Nq=["indexId","uid","orderedDocumentKey"],Pq=["userId","collectionPath","documentId"],kq=["userId","collectionPath","largestBatchId"],Oq=["userId","collectionGroup","largestBatchId"],wU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fq=[...wU,"documentOverlays"],EU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IU=EU,Lq=[...IU,"indexConfiguration","indexState","indexEntries"];class ZM extends aL{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function Di(n,e){const t=Ze(n);return vu.M(t.re,e)}class KM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&J3(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=eU();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const _=qL(l,f);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wt())}isEqual(e){return this.batchId===e.batchId&&Y_(this.mutations,e.mutations,(t,r)=>zL(t,r))&&Y_(this.baseMutations,e.baseMutations,(t,r)=>zL(t,r))}}class YM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){pt(e.mutations.length===r.length);let i=rq;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new YM(e,t,r,i)}}class QM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yf{constructor(e,t,r,i,a=vt.min(),l=vt.min(),f=hi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(e){return new yf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new yf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new yf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class CU{constructor(e){this.oe=e}}function bU(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:uD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:qw(i=n.oe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:oy(i,a.version.toTimestamp()),createTime:oy(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Rg(e.version)};else{if(!e.isUnknownDocument())return Je();r.unknownDocument={path:t.path.toArray(),version:Rg(e.version)}}var i,a;return r}function uD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Rg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mg(n){const e=new sr(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function Ng(n,e){const t=(e.baseMutations||[]).map(a=>zM(n.oe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>zM(n.oe,a)),i=sr.fromMillis(e.localWriteTimeMs);return new KM(e.batchId,i,t,r)}function Zw(n){const e=Mg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Mg(n.lastLimboFreeSnapshotVersion):vt.min();let r;var i;return void 0!==n.query.documents?(pt(1===(i=n.query).documents.length),r=Rs(ty(uU(i.documents[0])))):r=Rs(fU(n.query)),new yf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,hi.fromBase64String(n.resumeToken))}function TU(n,e){const t=Rg(e.snapshotVersion),r=Rg(e.lastLimboFreeSnapshotVersion);let i;i=XT(e.target)?hU(n.oe,e.target):WM(n.oe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Dg(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function XM(n){const e=fU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?tD(e,e.limit,"L"):e}function JM(n,e){return new QM(e.largestBatchId,zM(n.oe,e.overlayMutation))}function DU(n,e){const t=e.path.lastSegment();return[n,Ms(e.path.popLast()),t]}function SU(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Rg(r.readTime),documentKey:Ms(r.documentKey.path),largestBatchId:r.largestBatchId}}class Vq{getBundleMetadata(e,t){return AU(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Mg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return AU(e).put({bundleId:(r=t).id,createTime:Rg(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return xU(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:XM(i.bundledQuery),readTime:Mg(i.readTime)};var i})}saveNamedQuery(e,t){return xU(e).put({name:(r=t).name,readTime:Rg(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function AU(n){return Di(n,"bundles")}function xU(n){return Di(n,"namedQueries")}class lD{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new lD(e,t.uid||"")}getOverlay(e,t){return Kw(e).get(DU(this.userId,t)).next(r=>r?JM(this.Tt,r):null)}getOverlays(e,t){const r=zl();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new QM(t,l);i.push(this.ce(e,f))}),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ms(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Kw(e).Y("collectionPathOverlayIndex",f))}),ue.waitFor(a)}getOverlaysForCollection(e,t,r){const i=zl(),a=Ms(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Kw(e).W("collectionPathOverlayIndex",l).next(f=>{for(const _ of f){const w=JM(this.Tt,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=zl();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kw(e).X({index:"collectionGroupOverlayIndex",range:f},(_,w,C)=>{const S=JM(this.Tt,w);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):C.done()}).next(()=>a)}ce(e,t){return Kw(e).put(function(r,i,a){const[l,f,_]=DU(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Ww(r.oe,a.mutation)}}(this.Tt,this.userId,t))}}function Kw(n){return Di(n,"documentOverlays")}class Pg{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(Ir(e.integerValue));else if("doubleValue"in e){const r=Ir(e.doubleValue);isNaN(r)?this.fe(t,13):(this.fe(t,15),Mw(r)?t.de(0):t.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e(`${r.seconds||""}`),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(Cg(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(t,45),t.de(r.latitude||0),t.de(r.longitude||0)}else"mapValue"in e?mL(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):Je()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const r=e.fields||{};this.fe(t,55);for(const i of Object.keys(r))this.we(i,t),this.he(r[i],t)}Ie(e,t){const r=e.values||[];this.fe(t,50);for(const i of r)this.he(i,t)}ye(e,t){this.fe(t,37),qe.fromName(e).path.forEach(r=>{this.fe(t,60),this.Te(r,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function Bq(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function RU(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=Bq(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Pg.Ee=new Pg;class jq{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.be()}ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.Ve()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=t.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.be()}De(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.Ve()}Ce(e){const t=this.xe(e),r=RU(t);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}ke(e){const t=this.xe(e),r=RU(t);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Oe(){this.Me(255),this.Me(255)}Fe(){this.$e(255),this.$e(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.$e(0),this.$e(255)):255===t?(this.$e(255),this.$e(0)):this.$e(e)}be(){this.Me(0),this.Me(1)}Ve(){this.$e(0),this.$e(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}$e(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class $q{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.Oe()}}class Hq{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Fe()}}class Yw{constructor(){this.Le=new jq,this.qe=new $q(this.Le),this.Ue=new Hq(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class kg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new kg(this.indexId,this.documentKey,this.arrayValue,r)}}function vf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=MU(n.arrayValue,e.arrayValue),0!==t?t:(t=MU(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function MU(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Gq{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const r=t;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){pt(e.collectionGroup===this.collectionId);const t=SM(e);if(void 0!==t&&!this.He(t))return!1;const r=wg(e);let i=0,a=0;for(;i<r.length&&this.He(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.ze){const l=r[i];if(!this.Je(this.ze,l)||!this.Ye(this.Qe[a++],l))return!1;++i}for(;i<r.length;++i)if(a>=this.Qe.length||!this.Ye(this.Qe[a++],r[i]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function NU(n){var e,t;if(pt(n instanceof rn||n instanceof Tn),n instanceof rn){if(n instanceof SL){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>rn.create(n.field,"==",a)))||[];return Tn.create(i,"or")}return n}const r=n.filters.map(i=>NU(i));return Tn.create(r,n.op)}function qq(n){if(0===n.getFilters().length)return[];const e=nN(NU(n));return pt(PU(e)),eN(e)||tN(e)?[e]:e.getFilters()}function eN(n){return n instanceof rn}function tN(n){return n instanceof Tn&&FM(n)}function PU(n){return eN(n)||tN(n)||function(e){if(e instanceof Tn&&OM(e)){for(const t of e.getFilters())if(!eN(t)&&!tN(t))return!1;return!0}return!1}(n)}function nN(n){if(pt(n instanceof rn||n instanceof Tn),n instanceof rn)return n;if(1===n.filters.length)return nN(n.filters[0]);const e=n.filters.map(r=>nN(r));let t=Tn.create(e,n.op);return t=cD(t),PU(t)?t:(pt(t instanceof Tn),pt(X_(t)),pt(t.filters.length>1),t.filters.reduce((r,i)=>rN(r,i)))}function rN(n,e){let t;return pt(n instanceof rn||n instanceof Tn),pt(e instanceof rn||e instanceof Tn),t=n instanceof rn?e instanceof rn?Tn.create([n,e],"and"):kU(n,e):e instanceof rn?kU(e,n):function(r,i){if(pt(r.filters.length>0&&i.filters.length>0),X_(r)&&X_(i))return bL(r,i.getFilters());const a=OM(r)?r:i,l=OM(r)?i:r,f=a.filters.map(_=>rN(_,l));return Tn.create(f,"or")}(n,e),cD(t)}function kU(n,e){if(X_(e))return bL(e,n.getFilters());{const t=e.filters.map(r=>rN(n,r));return Tn.create(t,"or")}}function cD(n){if(pt(n instanceof rn||n instanceof Tn),n instanceof rn)return n;const e=n.getFilters();if(1===e.length)return cD(e[0]);if(IL(n))return n;const t=e.map(i=>cD(i)),r=[];return t.forEach(i=>{i instanceof rn?r.push(i):i instanceof Tn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Tn.create(r,n.op)}class zq{constructor(){this.Ze=new iN}addToCollectionParentIndex(e,t){return this.Ze.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Oo.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Oo.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class iN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Rn(ln.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rn(ln.comparator)).toArray()}}const dD=new Uint8Array(0);class Wq{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new iN,this.tn=new mf(r=>Dg(r),(r,i)=>Fw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Ms(i)};return OU(e).put(a)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[rL(t),""],!1,!0);return OU(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Zl(l.parent))}return r})}addFieldIndex(e,t){const r=hD(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=Xw(e);return a.next(f=>{l.put(SU(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=hD(e),i=Xw(e),a=Qw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Qw(e);let i=!0;const a=new Map;return ue.forEach(this.en(t),l=>this.nn(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=Wt();const f=[];return ue.forEach(a,(_,w)=>{var C;Fe("IndexedDbIndexManager",`Using index ${C=_,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(Xe=>`${Xe.fieldPath}:${Xe.kind}`).join(",")}`} to execute ${Dg(t)}`);const S=function(Xe,ot){const St=SM(ot);if(void 0===St)return null;for(const Lt of JT(Xe,St.fieldPath))switch(Lt.op){case"array-contains-any":return Lt.value.arrayValue.values||[];case"array-contains":return[Lt.value]}return null}(w,_),P=function(Xe,ot){const St=new Map;for(const Lt of wg(ot))for(const fr of JT(Xe,Lt.fieldPath))switch(fr.op){case"==":case"in":St.set(Lt.fieldPath.canonicalString(),fr.value);break;case"not-in":case"!=":return St.set(Lt.fieldPath.canonicalString(),fr.value),Array.from(St.values())}return null}(w,_),U=function(Xe,ot){const St=[];let Lt=!0;for(const fr of wg(ot)){const wu=0===fr.kind?RL(Xe,fr.fieldPath,Xe.startAt):ML(Xe,fr.fieldPath,Xe.startAt);St.push(wu.value),Lt&&(Lt=wu.inclusive)}return new gf(St,Lt)}(w,_),$=function(Xe,ot){const St=[];let Lt=!0;for(const fr of wg(ot)){const wu=0===fr.kind?ML(Xe,fr.fieldPath,Xe.endAt):RL(Xe,fr.fieldPath,Xe.endAt);St.push(wu.value),Lt&&(Lt=wu.inclusive)}return new gf(St,Lt)}(w,_),le=this.sn(_,w,U),ge=this.sn(_,w,$),st=this.rn(_,w,P),ct=this.on(_.indexId,S,le,U.inclusive,ge,$.inclusive,st);return ue.forEach(ct,Xe=>r.J(Xe,t.limit).next(ot=>{ot.forEach(St=>{const Lt=qe.fromSegments(St.documentKey);l.has(Lt)||(l=l.add(Lt),f.push(Lt))})}))}).next(()=>f)}return ue.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:qq(Tn.create(e.filters,"and")).map(r=>UM(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,r,i,a,l,f){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),C=[];for(let S=0;S<_;++S){const P=t?this.un(t[S/w]):dD,U=this.cn(e,P,r[S%w],i),$=this.an(e,P,a[S%w],l),le=f.map(ge=>this.cn(e,P,ge,!0));C.push(...this.createRange(U,$,le))}return C}cn(e,t,r,i){const a=new kg(e,qe.empty(),t,r);return i?a:a.Ge()}an(e,t,r,i){const a=new kg(e,qe.empty(),t,r);return i?a.Ge():a}nn(e,t){const r=new Gq(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.We(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.en(t);return ue.forEach(i,a=>this.nn(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let _=new Rn(Er.comparator),w=!1;for(const C of f.filters)for(const S of C.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?w=!0:_=_.add(S.field));for(const C of f.orderBy)C.field.isKeyField()||(_=_.add(C.field));return _.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}hn(e,t){const r=new Yw;for(const i of wg(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ke(i.kind);Pg.Ee.ae(a,l)}return r.Be()}un(e){const t=new Yw;return Pg.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const r=new Yw;return Pg.Ee.ae(Tg(this.databaseId,t),r.Ke(function(i){const a=wg(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Be()}rn(e,t,r){if(null===r)return[];let i=[];i.push(new Yw);let a=0;for(const l of wg(e)){const f=r[a++];for(const _ of i)if(this.fn(t,l.fieldPath)&&kw(f))i=this.dn(i,l,f);else{const w=_.Ke(l.kind);Pg.Ee.ae(f,w)}}return this._n(i)}sn(e,t,r){return this.rn(e,t,r.position)}_n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Be();return t}dn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const _=new Yw;_.seed(f.Be()),Pg.Ee.ae(l,_.Ke(t.kind)),a.push(_)}return a}fn(e,t){return!!e.filters.find(r=>r instanceof rn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=hD(e),i=Xw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return ue.forEach(a,f=>i.get([f.indexId,this.uid]).next(_=>{l.push(function(w,C){const S=C?new Aw(C.sequenceNumber,new Oo(Mg(C.readTime),new qe(Zl(C.documentKey)),C.largestBatchId)):Aw.empty(),P=w.fields.map(([U,$])=>new WT(Er.fromServerFormat(U),$));return new zT(w.indexId,w.collectionGroup,P,S)}(f,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:$t(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=hD(e),a=Xw(e);return this.wn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ue.forEach(f,_=>a.put(SU(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ue.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ue.forEach(f,_=>this.mn(e,i,_).next(w=>{const C=this.gn(a,_);return w.isEqual(C)?ue.resolve():this.yn(e,a,_,w,C)}))))})}pn(e,t,r,i){return Qw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.ln(r,t.key),documentKey:t.key.path.toArray()})}In(e,t,r,i){return Qw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.ln(r,t.key),t.key.path.toArray()])}mn(e,t,r){const i=Qw(e);let a=new Rn(vf);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,t)])},(l,f)=>{a=a.add(new kg(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}gn(e,t){let r=new Rn(vf);const i=this.hn(t,e);if(null==i)return r;const a=SM(t);if(null!=a){const l=e.data.field(a.fieldPath);if(kw(l))for(const f of l.arrayValue.values||[])r=r.add(new kg(t.indexId,e.key,this.un(f),i))}else r=r.add(new kg(t.indexId,e.key,dD,i));return r}yn(e,t,r,i,a){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,_,w,C,S){const P=f.getIterator(),U=_.getIterator();let $=ey(P),le=ey(U);for(;$||le;){let ge=!1,st=!1;if($&&le){const ct=w($,le);ct<0?st=!0:ct>0&&(ge=!0)}else null!=$?st=!0:ge=!0;ge?(C(le),le=ey(U)):st?(S($),$=ey(P)):($=ey(P),le=ey(U))}}(i,a,vf,f=>{l.push(this.pn(e,t,r,f))},f=>{l.push(this.In(e,t,r,f))}),ue.waitFor(l)}wn(e){let t=1;return Xw(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>vf(l,f)).filter((l,f,_)=>!f||0!==vf(l,_[f-1]));const i=[];i.push(e);for(const l of r){const f=vf(l,e),_=vf(l,t);if(0===f)i[0]=e.Ge();else if(f>0&&_<0)i.push(l),i.push(l.Ge());else if(_>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.Tn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,dD,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,dD,[]]))}return a}Tn(e,t){return vf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(FU)}getMinOffset(e,t){return ue.mapArray(this.en(t),r=>this.nn(e,r).next(i=>i||Je())).next(FU)}}function OU(n){return Di(n,"collectionParents")}function Qw(n){return Di(n,"indexEntries")}function hD(n){return Di(n,"indexConfiguration")}function Xw(n){return Di(n,"indexState")}function FU(n){pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;AM(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Oo(e.readTime,e.documentKey,t)}const LU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Js{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Js(e,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function UU(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const _=r.X({range:l},(C,S,P)=>(f++,P.delete()));a.push(_.next(()=>{pt(1===f)}));const w=[];for(const C of t.mutations){const S=vU(e,C.key.path,t.batchId);a.push(i.delete(S)),w.push(C.key)}return ue.waitFor(a).next(()=>w)}function fD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Je();e=n.noDocument}return JSON.stringify(e).length}Js.DEFAULT_COLLECTION_PERCENTILE=10,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Js.DEFAULT=new Js(41943040,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Js.DISABLED=new Js(-1,0,0);class pD{constructor(e,t,r,i){this.userId=e,this.Tt=t,this.indexManager=r,this.referenceDelegate=i,this.En={}}static ue(e,t,r,i){pt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new pD(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wf(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=uy(e),l=wf(e);return l.add({}).next(f=>{pt("number"==typeof f);const _=new KM(f,t,r,i),w=function(P,U,$){const le=$.baseMutations.map(st=>Ww(P.oe,st)),ge=$.mutations.map(st=>Ww(P.oe,st));return{userId:U,batchId:$.batchId,localWriteTimeMs:$.localWriteTime.toMillis(),baseMutations:le,mutations:ge}}(this.Tt,this.userId,_),C=[];let S=new Rn((P,U)=>$t(P.canonicalString(),U.canonicalString()));for(const P of i){const U=vU(this.userId,P.key.path,f);S=S.add(P.key.path.popLast()),C.push(l.put(w)),C.push(a.put(U,Eq))}return S.forEach(P=>{C.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.En[f]=_.keys()}),ue.waitFor(C).next(()=>_)})}lookupMutationBatch(e,t){return wf(e).get(t).next(r=>r?(pt(r.userId===this.userId),Ng(this.Tt,r)):null)}An(e,t){return this.En[t]?ue.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.En[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return wf(e).X({index:"userMutationsIndex",range:i},(l,f,_)=>{f.userId===this.userId&&(pt(f.batchId>=r),a=Ng(this.Tt,f)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return wf(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wf(e).W("userMutationsIndex",t).next(r=>r.map(i=>Ng(this.Tt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=aD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return uy(e).X({range:i},(l,f,_)=>{const[w,C,S]=l,P=Zl(C);if(w===this.userId&&t.path.isEqual(P))return wf(e).get(S).next(U=>{if(!U)throw Je();pt(U.userId===this.userId),a.push(Ng(this.Tt,U))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn($t);const i=[];return t.forEach(a=>{const l=aD(this.userId,a.path),f=IDBKeyRange.lowerBound(l),_=uy(e).X({range:f},(w,C,S)=>{const[P,U,$]=w,le=Zl(U);P===this.userId&&a.path.isEqual(le)?r=r.add($):S.done()});i.push(_)}),ue.waitFor(i).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=aD(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new Rn($t);return uy(e).X({range:l},(_,w,C)=>{const[S,P,U]=_,$=Zl(P);S===this.userId&&r.isPrefixOf($)?$.length===i&&(f=f.add(U)):C.done()}).next(()=>this.Rn(e,f))}Rn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(wf(e).get(a).next(l=>{if(null===l)throw Je();pt(l.userId===this.userId),r.push(Ng(this.Tt,l))}))}),ue.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return UU(e.re,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.bn(t.batchId)}),ue.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}bn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return uy(e).X({range:r},(a,l,f)=>{if(a[0]===this.userId){const _=Zl(a[1]);i.push(_)}else f.done()}).next(()=>{pt(0===i.length)})})}containsKey(e,t){return VU(e,this.userId,t)}vn(e){return BU(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function VU(n,e,t){const r=aD(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return uy(n).X({range:a,Z:!0},(f,_,w)=>{const[C,S,P]=f;C===e&&S===i&&(l=!0),w.done()}).next(()=>l)}function wf(n){return Di(n,"mutations")}function uy(n){return Di(n,"documentMutations")}function BU(n){return Di(n,"mutationQueues")}class Og{constructor(e){this.Pn=e}next(){return this.Pn+=2,this.Pn}static Vn(){return new Og(0)}static Sn(){return new Og(-1)}}class Zq{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const r=new Og(t.highestTargetId);return t.highestTargetId=r.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>vt.fromTimestamp(new sr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Dn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Cn(e,i)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(t,r),this.Cn(e,r))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ly(e).delete(t.targetId)).next(()=>this.Dn(e)).next(r=>(pt(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ly(e).X((l,f)=>{const _=Zw(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>ue.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ly(e).X((r,i)=>{const a=Zw(i);t(a)})}Dn(e){return jU(e).get("targetGlobalKey").next(t=>(pt(null!==t),t))}Cn(e,t){return jU(e).put("targetGlobalKey",t)}xn(e,t){return ly(e).put(TU(this.Tt,t))}Nn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Dg(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ly(e).X({range:i,index:"queryTargetsIndex"},(l,f,_)=>{const w=Zw(f);Fw(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Ef(e);return t.forEach(l=>{const f=Ms(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ef(e);return ue.forEach(t,a=>{const l=Ms(a.path);return ue.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Ef(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ef(e);let a=Wt();return i.X({range:r,Z:!0},(l,f,_)=>{const w=Zl(l[1]),C=new qe(w);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=Ms(t.path),i=IDBKeyRange.bound([r],[rL(r)],!1,!0);let a=0;return Ef(e).X({index:"documentTargetsIndex",Z:!0,range:i},([l,f],_,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}ie(e,t){return ly(e).get(t).next(r=>r?Zw(r):null)}}function ly(n){return Di(n,"targets")}function jU(n){return Di(n,"targetGlobal")}function Ef(n){return Di(n,"targetDocuments")}function $U([n,e],[t,r]){const i=$t(n,t);return 0===i?$t(e,r):i}class Kq{constructor(e){this.kn=e,this.buffer=new Rn($U),this.On=0}Mn(){return++this.On}Fn(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();$U(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Yq{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.$n=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.$n&&(this.$n.cancel(),this.$n=null)}get started(){return null!==this.$n}Bn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.$n=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.$n=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){cf(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield lf(r)}yield t.Bn(3e5)}))}}class Qq{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Fo.at);const r=new Kq(t);return this.Ln.forEachTarget(e,i=>r.Fn(i.sequenceNumber)).next(()=>this.Ln.Un(e,i=>r.Fn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Ln.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(LU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LU):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let r,i,a,l,f,_,w;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),TM()<=Bi.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-C}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(_-f)+`ms\n\tRemoved ${S} documents in `+(w-_)+`ms\nTotal Duration: ${w-C}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class Xq{constructor(e,t){this.db=e,this.garbageCollector=new Qq(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Gn(e){let t=0;return this.Un(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(r,i)=>t(i))}addReference(e,t,r){return gD(e,r)}removeReference(e,t,r){return gD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gD(e,t)}jn(e,t){return function(r,i){let a=!1;return BU(r).tt(l=>VU(r,l,i).next(f=>(f&&(a=!0),ue.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Qn(e,(l,f)=>{if(f<=t){const _=this.jn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,vt.min()),Ef(e).delete([0,Ms(l.path)])))});i.push(_)}}).next(()=>ue.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gD(e,t)}Qn(e,t){const r=Ef(e);let i,a=Fo.at;return r.X({index:"documentTargetsIndex"},([l,f],{path:_,sequenceNumber:w})=>{0===l?(a!==Fo.at&&t(new qe(Zl(i)),a),a=w,i=_):a=Fo.at}).next(()=>{a!==Fo.at&&t(new qe(Zl(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gD(n,e){return Ef(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ms(e.path),sequenceNumber:r}));var r}class HU{constructor(){this.changes=new mf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Jq{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Fg(e).put(r)}removeEntry(e,t,r){return Fg(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],uD(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.zn(e,r)))}getEntry(e,t){let r=Kn.newInvalidDocument(t);return Fg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Jw(t))},(i,a)=>{r=this.Wn(t,a)}).next(()=>r)}Hn(e,t){let r={size:0,document:Kn.newInvalidDocument(t)};return Fg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Jw(t))},(i,a)=>{r={document:this.Wn(t,a),size:fD(a)}}).next(()=>r)}getEntries(e,t){let r=Xs();return this.Jn(e,t,(i,a)=>{const l=this.Wn(i,a);r=r.insert(i,l)}).next(()=>r)}Yn(e,t){let r=Xs(),i=new Cr(qe.comparator);return this.Jn(e,t,(a,l)=>{const f=this.Wn(a,l);r=r.insert(a,f),i=i.insert(a,fD(l))}).next(()=>({documents:r,Zn:i}))}Jn(e,t,r){if(t.isEmpty())return ue.resolve();let i=new Rn(WU);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(Jw(i.first()),Jw(i.last())),l=i.getIterator();let f=l.getNext();return Fg(e).X({index:"documentKeyIndex",range:a},(_,w,C)=>{const S=qe.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&WU(f,S)<0;)r(f,null),f=l.getNext();f&&f.isEqual(S)&&(r(f,w),f=l.hasNext()?l.getNext():null),f?C.j(Jw(f)):C.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),uD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fg(e).W(IDBKeyRange.bound(l,f,!0)).next(_=>{let w=Xs();for(const C of _){const S=this.Wn(qe.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);S.isFoundDocument()&&(Uw(t,S)||i.has(S.key))&&(w=w.insert(S.key,S))}return w})}getAllFromCollectionGroup(e,t,r,i){let a=Xs();const l=zU(t,r),f=zU(t,Oo.max());return Fg(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(_,w,C)=>{const S=this.Wn(qe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(S.key,S),a.size===i&&C.done()}).next(()=>a)}newChangeBuffer(e){return new ez(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qU(e).get("remoteDocumentGlobalKey").next(t=>(pt(!!t),t))}zn(e,t){return qU(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const r=function Uq(n,e){let t;if(e.document)t=dU(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),i=Mg(e.noDocument.readTime);t=Kn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Je();{const r=qe.fromSegments(e.unknownDocument.path),i=Mg(e.unknownDocument.version);t=Kn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new sr(r[0],r[1]);return vt.fromTimestamp(i)}(e.readTime)),t}(this.Tt,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Kn.newInvalidDocument(e)}}function GU(n){return new Jq(n)}class ez extends HU{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new mf(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Rn((a,l)=>$t(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.ts.get(a);if(t.push(this.Xn.removeEntry(e,a,f.readTime)),l.isValidDocument()){const _=bU(this.Xn.Tt,l);i=i.add(a.path.popLast());const w=fD(_);r+=w-f.size,t.push(this.Xn.addEntry(e,a,_))}else if(r-=f.size,this.trackRemovals){const _=bU(this.Xn.Tt,l.convertToNoDocument(vt.min()));t.push(this.Xn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Xn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(r=>(this.ts.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:r,Zn:i})=>(i.forEach((a,l)=>{this.ts.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function qU(n){return Di(n,"remoteDocumentGlobal")}function Fg(n){return Di(n,"remoteDocumentsV14")}function Jw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zU(n,e){const t=e.documentKey.path.toArray();return[n,uD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function WU(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=$t(t[a],r[a]),i)return i;return i=$t(t.length,r.length),i||(i=$t(t[t.length-2],r[r.length-2]),i||$t(t[t.length-1],r[r.length-1]))}class tz{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ZU{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Bw(r.mutation,i,Qs.empty(),sr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Wt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Wt()){const i=zl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=jw();return a.forEach((f,_)=>{l=l.insert(f,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=zl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Wt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=Xs();const l=$w(),f=$w();return t.forEach((_,w)=>{const C=r.get(w.key);i.has(w.key)&&(void 0===C||C.mutation instanceof wd)?a=a.insert(w.key,w):void 0!==C?(l.set(w.key,C.mutation.getFieldMask()),Bw(C.mutation,w,C.mutation.getFieldMask(),sr.now())):l.set(w.key,Qs.empty())}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,C)=>l.set(w,C)),t.forEach((w,C)=>{var S;return f.set(w,new tz(C,null!==(S=l.get(w))&&void 0!==S?S:null))}),f))}recalculateAndSaveOverlays(e,t){const r=$w();let i=new Cr((l,f)=>l-f),a=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let C=r.get(_)||Qs.empty();C=f.applyToLocalView(w,C),r.set(_,C);const S=(i.get(f.batchId)||Wt()).add(_);i=i.insert(f.batchId,S)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const _=f.getNext(),w=_.key,C=_.value,S=eU();C.forEach(P=>{if(!a.has(P)){const U=qL(t.get(P),r.get(P));null!==U&&S.set(P,U),a=a.add(P)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,S))}return ue.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):BM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ue.resolve(zl());let f=-1,_=a;return l.next(w=>ue.forEach(w,(C,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),a.get(C)?ue.resolve():this.remoteDocumentCache.getEntry(e,C).next(P=>{_=_.insert(C,P)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,Wt())).next(C=>({batchId:f,changes:JL(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let i=jw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=jw();return this.indexManager.getCollectionParents(e,i).next(l=>ue.forEach(l,f=>{const _=(w=t,C=f.child(i),new vd(C,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,C;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((C,S)=>{a=a.insert(C,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,_)=>{const w=_.getKey();null===a.get(w)&&(a=a.insert(w,Kn.newInvalidDocument(w)))});let l=jw();return a.forEach((f,_)=>{const w=i.get(f);void 0!==w&&Bw(w.mutation,_,Qs.empty(),sr.now()),Uw(t,_)&&(l=l.insert(f,_))}),l})}}class nz{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return ue.resolve(this.es.get(t))}saveBundleMetadata(e,t){var r;return this.es.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(r=t).name,query:XM(r.bundledQuery),readTime:kr(r.readTime)}),ue.resolve();var r}}class rz{constructor(){this.overlays=new Cr(qe.comparator),this.ss=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=zl();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ce(e,t,a)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ss.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ss.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=zl(),a=t.length+1,l=new qe(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const _=f.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Cr((w,C)=>w-C);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let C=a.get(w.largestBatchId);null===C&&(C=zl(),a=a.insert(w.largestBatchId,C)),C.set(w.getKey(),w)}}const f=zl(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,C)=>f.set(w,C)),!(f.size()>=i)););return ue.resolve(f)}ce(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new QM(t,r));let a=this.ss.get(t);void 0===a&&(a=Wt(),this.ss.set(t,a)),this.ss.set(t,a.add(r.key))}}class sN{constructor(){this.rs=new Rn(Si.os),this.us=new Rn(Si.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const r=new Si(e,t);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ls(new Si(e,t))}fs(e,t){e.forEach(r=>this.removeReference(r,t))}ds(e){const t=new qe(new ln([])),r=new Si(t,e),i=new Si(t,e+1),a=[];return this.us.forEachInRange([r,i],l=>{this.ls(l),a.push(l.key)}),a}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new qe(new ln([])),r=new Si(t,e),i=new Si(t,e+1);let a=Wt();return this.us.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Si(e,0),r=this.rs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Si{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return qe.comparator(e.key,t.key)||$t(e.gs,t.gs)}static cs(e,t){return $t(e.gs,t.gs)||qe.comparator(e.key,t.key)}}class iz{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new Rn(Si.os)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ys;this.ys++;const l=new KM(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.ps=this.ps.add(new Si(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,t){return ue.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ts(t+1),a=i<0?0:i;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Si(t,0),i=new Si(t,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],l=>{const f=this.Is(l.gs);a.push(f)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn($t);return t.forEach(i=>{const a=new Si(i,0),l=new Si(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([a,l],f=>{r=r.add(f.gs)})}),ue.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;qe.isDocumentKey(a)||(a=a.child(""));const l=new Si(new qe(a),0);let f=new Rn($t);return this.ps.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(f=f.add(_.gs)),!0)},l),ue.resolve(this.Es(f))}Es(e){const t=[];return e.forEach(r=>{const i=this.Is(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){pt(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ps;return ue.forEach(t.mutations,i=>{const a=new Si(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}bn(e){}containsKey(e,t){const r=new Si(t,0),i=this.ps.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ue.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class sz{constructor(e){this.Rs=e,this.docs=new Cr(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Rs(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Kn.newInvalidDocument(t))}getEntries(e,t){let r=Xs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Kn.newInvalidDocument(i))}),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Xs();const l=t.path,f=new qe(l.child("")),_=this.docs.getIteratorFrom(f);for(;_.hasNext();){const{key:w,value:{document:C}}=_.getNext();if(!l.isPrefixOf(w.path))break;w.path.length>l.length+1||AM(sL(C),r)<=0||(i.has(C.key)||Uw(t,C))&&(a=a.insert(C.key,C.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Je()}bs(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new oz(this)}getSize(e){return ue.resolve(this.size)}}class oz extends HU{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class az{constructor(e){this.persistence=e,this.vs=new mf(t=>Dg(t),Fw),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new sN,this.targetCount=0,this.Ss=Og.Vn()}forEachTarget(e,t){return this.vs.forEach((r,i)=>t(i)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.Ps)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ps&&(this.Ps=t),ue.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new Og(t),this.highestTargetId=t),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.xn(t),ue.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.vs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.vs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ue.waitFor(a).next(()=>i)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.vs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Vs.hs(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Vs.fs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Vs.ws(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Vs.containsKey(t))}}class KU{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new Fo(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new az(this),this.indexManager=new zq,this.remoteDocumentCache=new sz(r=>this.referenceDelegate.ks(r)),this.Tt=new CU(t),this.Os=new nz(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rz,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ds[e.toKey()];return r||(r=new iz(t,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new uz(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(a=>this.referenceDelegate.Fs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}$s(e,t){return ue.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,t)))}}class uz extends aL{constructor(e){super(),this.currentSequenceNumber=e}}class mD{constructor(e){this.persistence=e,this.Bs=new sN,this.Ls=null}static qs(e){return new mD(e)}get Us(){if(this.Ls)return this.Ls;throw Je()}addReference(e,t,r){return this.Bs.addReference(r,t),this.Us.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Bs.removeReference(r,t),this.Us.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Us.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ms(){this.Ls=new Set}Fs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Us,r=>{const i=qe.fromPath(r);return this.Ks(e,i).next(a=>{a||t.removeEntry(i,vt.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(r=>{r?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return ue.or([()=>ue.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.$s(e,t)])}}class lz{constructor(e){this.Tt=e}$(e,t,r,i){const a=new ZT("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yU,{unique:!0}),f.createObjectStore("documentMutations"),YU(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=ue.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),YU(e)),l=l.next(()=>function(f){const _=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,_){return _.store("mutations").W().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yU,{unique:!0});const C=_.store("mutations"),S=w.map(P=>C.put(P));return ue.waitFor(S)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Gs(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(a)))),r<7&&i>=7&&(l=l.next(()=>this.js(a))),r<8&&i>=8&&(l=l.next(()=>this.zs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Ws(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:Pq});_.createIndex("collectionPathOverlayIndex",kq,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",Oq,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:Iq});_.createIndex("documentKeyIndex",Cq),_.createIndex("collectionGroupIndex",bq)}(e)).next(()=>this.Hs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.Js(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:xq}).createIndex("sequenceNumberIndex",Rq,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:Mq}).createIndex("documentKeyIndex",Nq,{unique:!1})}(e))),l}Qs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=fD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ue.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(f=>ue.forEach(f,_=>{pt(_.userId===a.userId);const w=Ng(this.Tt,_);return UU(e,a.userId,w).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,f)=>{const _=new ln(l),w=[0,Ms(_)];a.push(t.get(w).next(C=>C?ue.resolve():t.put({targetId:0,path:Ms(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ue.waitFor(a))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:Aq});const r=t.store("collectionParents"),i=new iN,a=l=>{if(i.add(l)){const f=l.lastSegment(),_=l.popLast();return r.put({collectionId:f,parent:Ms(_)})}};return t.store("remoteDocuments").X({Z:!0},(l,f)=>{const _=new ln(l);return a(_.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([l,f,_],w)=>{const C=Zl(f);return a(C.popLast())}))}Ws(e){const t=e.store("targets");return t.X((r,i)=>{const a=Zw(i),l=TU(this.Tt,a);return t.put(l)})}Hs(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,l)=>{const f=t.store("remoteDocumentsV14"),_=(w=l,w.document?new qe(ln.fromString(w.document.name).popFirst(5)):w.noDocument?qe.fromSegments(w.noDocument.path):w.unknownDocument?qe.fromSegments(w.unknownDocument.path):Je()).path.toArray();var w;const C={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(C))}).next(()=>ue.waitFor(i))}Js(e,t){const r=t.store("mutations"),i=GU(this.Tt),a=new KU(mD.qs,this.Tt.oe);return r.W().next(l=>{const f=new Map;return l.forEach(_=>{var w;let C=null!==(w=f.get(_.userId))&&void 0!==w?w:Wt();Ng(this.Tt,_).keys().forEach(S=>C=C.add(S)),f.set(_.userId,C)}),ue.forEach(f,(_,w)=>{const C=new bi(w),S=lD.ue(this.Tt,C),P=a.getIndexManager(C),U=pD.ue(C,this.Tt,P,a.referenceDelegate);return new ZU(i,U,S,P).recalculateAndSaveOverlaysForDocumentKeys(new ZM(t,Fo.at),_).next()})})}}function YU(n){n.createObjectStore("targetDocuments",{keyPath:Dq}).createIndex("documentTargetsIndex",Sq,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Tq,{unique:!0}),n.createObjectStore("targetGlobal")}const oN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class aN{constructor(e,t,r,i,a,l,f,_,w,C,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ys=a,this.window=l,this.document=f,this.Zs=w,this.Xs=C,this.ti=S,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=P=>Promise.resolve(),!aN.C())throw new Ne(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Xq(this,i),this.oi=t+"main",this.Tt=new CU(_),this.ui=new vu(this.oi,this.ti,new lz(this.Tt)),this.Ns=new Zq(this.referenceDelegate,this.Tt),this.remoteDocumentCache=GU(this.Tt),this.Os=new Vq,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===C&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,oN);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Fo(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_D(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(cf(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return eE(e).get("owner").next(t=>ue.resolve(this.yi(t)))}pi(e){return _D(e).delete(this.clientId)}Ii(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Di(r,"clientMetadata");return i.W().next(a=>{const l=e.Ei(a,18e5),f=a.filter(_=>-1===l.indexOf(_));return ue.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ci)for(const r of t)e.ci.removeItem(e.Ai(r.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?ue.resolve(!0):eE(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,oN);return!1}}return!(!this.networkEnabled||!this.inForeground)||_D(e).W().next(r=>void 0===this.Ei(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.xs=!1,e.bi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.Pi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new ZM(t,Fo.at);return e.mi(r).next(()=>e.pi(r))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(r=>this.Ti(r.updateTimeMs,t)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>_D(e).W().next(t=>this.Ei(t,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return pD.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wq(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return lD.ue(this.Tt,e)}getBundleCache(){return this.Os}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.ti)?Lq:14===l?IU:13===l?EU:12===l?Fq:11===l?wU:void Je();var l;let f;return this.ui.runTransaction(e,i,a,_=>(f=new ZM(_,this.Cs?this.Cs.next():Fo.at),"readwrite-primary"===t?this._i(f).next(w=>!!w||this.wi(f)).next(w=>{if(!w)throw Pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Ne(ce.FAILED_PRECONDITION,oL);return r(f)}).next(w=>this.gi(f).next(()=>w)):this.Di(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}Di(e){return eE(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ce.FAILED_PRECONDITION,oN)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return eE(e).put("owner",t)}static C(){return vu.C()}mi(e){const t=eE(e);return t.get("owner").next(r=>this.yi(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}Ti(e,t){const r=Date.now();return!(e<r-t||e>r&&(Pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.bi(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}Pi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const r=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}bi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function eE(n){return Di(n,"owner")}function _D(n){return Di(n,"clientMetadata")}function uN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class lN{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ci=r,this.xi=i}static Ni(e,t){let r=Wt(),i=Wt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new lN(e,t.fromCache,r,i)}}class QU{constructor(){this.ki=!1}initialize(e,t){this.Oi=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Mi(e,t).next(a=>a||this.Fi(e,t,i,r)).next(a=>a||this.$i(e,t))}Mi(e,t){if(PL(t))return ue.resolve(null);let r=Rs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=tD(t,null,"F"),r=Rs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Wt(...a);return this.Oi.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.Bi(t,f);return this.Li(t,w,l,_.readTime)?this.Mi(e,tD(t,null,"F")):this.qi(e,w,t,_)}))})))}Fi(e,t,r,i){return PL(t)||i.isEqual(vt.min())?this.$i(e,t):this.Oi.getDocuments(e,r).next(a=>{const l=this.Bi(t,a);return this.Li(t,l,r,i)?this.$i(e,t):(TM()<=Bi.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$M(t)),this.qi(e,l,t,iL(i,-1)))})}Bi(e,t){let r=new Rn(FL(e));return t.forEach((i,a)=>{Uw(e,a)&&(r=r.add(a))}),r}Li(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}$i(e,t){return TM()<=Bi.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",$M(t)),this.Oi.getDocumentsMatchingQuery(e,t,Oo.min())}qi(e,t,r,i){return this.Oi.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class cz{constructor(e,t,r,i){this.persistence=e,this.Ui=t,this.Tt=i,this.Ki=new Cr($t),this.Gi=new mf(a=>Dg(a),Fw),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.Os=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZU(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function XU(n,e,t,r){return new cz(n,e,t,r)}function JU(n,e){return cN.apply(this,arguments)}function cN(){return cN=(0,_e.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.zi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let _=Wt();for(const w of i){l.push(w.batchId);for(const C of w.mutations)_=_.add(C.key)}for(const w of a){f.push(w.batchId);for(const C of w.mutations)_=_.add(C.key)}return t.localDocuments.getDocuments(r,_).next(w=>({Wi:w,removedBatchIds:l,addedBatchIds:f}))})})}),cN.apply(this,arguments)}function dz(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.ji.newChangeBuffer({trackRemovals:!0});return function(l,f,_,w){const C=_.batch,S=C.keys();let P=ue.resolve();return S.forEach(U=>{P=P.next(()=>w.getEntry(f,U)).next($=>{const le=_.docVersions.get(U);pt(null!==le),$.version.compareTo(le)<0&&(C.applyToRemoteDocument($,_),$.isValidDocument()&&($.setReadTime(_.commitVersion),w.addEntry($)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(f,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=Wt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(f=f.add(l.batch.mutations[_].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function eV(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function hz(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.ji.newChangeBuffer({trackRemovals:!0});i=t.Ki;const f=[];e.targetChanges.forEach((C,S)=>{const P=i.get(S);if(!P)return;f.push(t.Ns.removeMatchingKeys(a,C.removedDocuments,S).next(()=>t.Ns.addMatchingKeys(a,C.addedDocuments,S)));let U=P.withSequenceNumber(a.currentSequenceNumber);var $,le,ge;e.targetMismatches.has(S)?U=U.withResumeToken(hi.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):C.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(C.resumeToken,r)),i=i.insert(S,U),le=U,ge=C,(0===($=P).resumeToken.approximateByteSize()||le.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8||ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0)&&f.push(t.Ns.updateTargetData(a,U))});let _=Xs(),w=Wt();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,C))}),f.push(tV(a,l,e.documentUpdates).next(C=>{_=C.Hi,w=C.Ji})),!r.isEqual(vt.min())){const C=t.Ns.getLastRemoteSnapshotVersion(a).next(S=>t.Ns.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(C)}return ue.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.Ki=i,a))}function tV(n,e,t){let r=Wt(),i=Wt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Xs();return t.forEach((f,_)=>{const w=a.get(f);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(f)),_.isNoDocument()&&_.version.isEqual(vt.min())?(e.removeEntry(f,_.readTime),l=l.insert(f,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),l=l.insert(f,_)):Fe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",w.version," Watch version:",_.version)}),{Hi:l,Ji:i}})}function fz(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cy(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ns.getTargetData(r,e).next(a=>a?(i=a,ue.resolve(i)):t.Ns.allocateTargetId(r).next(l=>(i=new yf(e,l,0,r.currentSequenceNumber),t.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ki.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(r.targetId,r),t.Gi.set(e,r.targetId)),r})}function dy(n,e,t){return dN.apply(this,arguments)}function dN(){return dN=(0,_e.Z)(function*(n,e,t){const r=Ze(n),i=r.Ki.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!cf(l))throw l;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}),dN.apply(this,arguments)}function yD(n,e,t){const r=Ze(n);let i=vt.min(),a=Wt();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,_,w){const C=Ze(f),S=C.Gi.get(w);return void 0!==S?ue.resolve(C.Ki.get(S)):C.Ns.getTargetData(_,w)}(r,l,Rs(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(l,f.targetId).next(_=>{a=_})}).next(()=>r.Ui.getDocumentsMatchingQuery(l,e,t?i:vt.min(),t?a:Wt())).next(f=>(iV(r,OL(e),f),{documents:f,Yi:a})))}function nV(n,e){const t=Ze(n),r=Ze(t.Ns),i=t.Ki.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ie(a,e).next(l=>l?l.target:null))}function rV(n,e){const t=Ze(n),r=t.Qi.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ji.getAllFromCollectionGroup(i,e,iL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(iV(t,e,i),i))}function iV(n,e,t){let r=n.Qi.get(e)||vt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Qi.set(e,r)}function hN(){return hN=(0,_e.Z)(function*(n,e,t,r){const i=Ze(n);let a=Wt(),l=Xs();for(const w of t){const C=e.Zi(w.metadata.name);w.document&&(a=a.add(C));const S=e.Xi(w);S.setReadTime(e.tr(w.metadata.readTime)),l=l.insert(C,S)}const f=i.ji.newChangeBuffer({trackRemovals:!0}),_=yield cy(i,(w=r,Rs(ty(ln.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>tV(w,f,l).next(C=>(f.apply(w),C)).next(C=>i.Ns.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Ns.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,C.Hi,C.Ji)).next(()=>C.Hi)))}),hN.apply(this,arguments)}function gz(n,e){return fN.apply(this,arguments)}function fN(){return fN=(0,_e.Z)(function*(n,e,t=Wt()){const r=yield cy(n,Rs(XM(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=kr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Os.saveNamedQuery(a,e);const f=r.withResumeToken(hi.EMPTY_BYTE_STRING,l);return i.Ki=i.Ki.insert(f.targetId,f),i.Ns.updateTargetData(a,f).next(()=>i.Ns.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Ns.addMatchingKeys(a,t,r.targetId)).next(()=>i.Os.saveNamedQuery(a,e))})}),fN.apply(this,arguments)}function sV(n,e){return`firestore_clients_${n}_${e}`}function oV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function pN(n,e){return`firestore_targets_${n}_${e}`}class vD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static er(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ne(i.error.code,i.error.message))),l?new vD(e,t,i.state,a):(Pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static er(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ne(r.error.code,r.error.message))),a?new tE(e,r.state,i):(Pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=sD();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=dL(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new wD(e,a):(Pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class gN{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new gN(t.clientId,t.onlineState):(Pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class mN{constructor(){this.activeTargetIds=sD()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _N{constructor(e,t,r,i,a){this.window=e,this.Ys=t,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new Cr($t),this.started=!1,this.hr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.lr=sV(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new mN),this._r=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Si();for(const i of t){if(i===e.rr)continue;const a=e.getItem(sV(e.persistenceKey,i));if(a){const l=wD.er(i,a);l&&(e.ar=e.ar.insert(l.clientId,l))}}e.pr();const r=e.storage.getItem(e.gr);if(r){const i=e.Ir(r);i&&e.Tr(i)}for(const i of e.hr)e.cr(i);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,r){this.Ar(e,t,r),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(pN(this.persistenceKey,e));if(r){const i=tE.er(e,r);i&&(t=i.state)}}return this.br.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.br.ir(e),this.pr()}isLocalQueryTarget(e){return this.br.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pN(this.persistenceKey,e))}updateQueryState(e,t,r){this.vr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Rr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.lr)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t._r.test(r.key)){if(null==r.newValue){const i=t.Sr(r.key);return t.Dr(i,null)}{const i=t.Cr(r.key,r.newValue);if(i)return t.Dr(i.clientId,i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(t.mr.test(r.key)){if(null!==r.newValue){const i=t.Or(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.gr){if(null!==r.newValue){const i=t.Ir(r.newValue);if(i)return t.Tr(i)}}else if(r.key===t.dr){const i=function(a){let l=Fo.at;if(null!=a)try{const f=JSON.parse(a);pt("number"==typeof f),l=f}catch(f){Pr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==Fo.at&&t.sequenceNumberHandler(i)}else if(r.key===t.yr){const i=t.Fr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.$r(a)))}}else t.hr.push(r)}))}}get br(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.br.nr())}Ar(e,t,r){const i=new vD(this.currentUser,e,t,r),a=oV(this.persistenceKey,this.currentUser,e);this.setItem(a,i.nr())}Rr(e){const t=oV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,r){const i=pN(this.persistenceKey,e),a=new tE(e,t,r);this.setItem(i,a.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const r=this.Sr(e);return wD.er(r,t)}Nr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return vD.er(new bi(void 0!==r[2]?r[2]:null),i,t)}Or(e,t){const r=this.mr.exec(e),i=Number(r[1]);return tE.er(i,t)}Ir(e){return gN.er(e)}Fr(e){return JSON.parse(e)}kr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Er(this.ar),a=this.Er(r),l=[],f=[];return a.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{a.has(_)||f.push(_)}),this.syncEngine.qr(l,f).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=sD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class aV{constructor(){this.Ur=new mN,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,r){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new mN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mz{Gr(e){}shutdown(){}}class uV{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const _z={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yz{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}class vz extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,r,i,a){const l=this.fo(e,t);Fe("RestConnection","Sending: ",l,r);const f={};return this._o(f,i,a),this.wo(e,l,f,r).then(_=>(Fe("RestConnection","Received: ",_),_),_=>{throw vg("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}mo(e,t,r,i,a,l){return this.lo(e,t,r,i,a)}_o(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+K_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}fo(e,t){return`${this.co}/v1/${t}:${_z[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,r,i){return new Promise((a,l)=>{const f=new g3;f.setWithCredentials(!0),f.listenOnce(h3.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case bM.NO_ERROR:const w=f.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(w)),a(w);break;case bM.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),l(new Ne(ce.DEADLINE_EXCEEDED,"Request time out"));break;case bM.HTTP_ERROR:const C=f.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',C,"response text:",f.getResponseText()),C>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const P=S?.error;if(P&&P.status&&P.message){const U=function($){const le=$.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(le)>=0?le:ce.UNKNOWN}(P.status);l(new Ne(U,P.message))}else l(new Ne(ce.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new Ne(ce.UNAVAILABLE,"Connection failed."));break;default:Je()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);f.send(t,"POST",_,r,15)})}yo(e,t,r){const i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=c3(),l=d3(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new p3({})),this._o(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=i.join("");Fe("Connection","Creating WebChannel: "+_,f);const w=a.createWebChannel(_,f);let C=!1,S=!1;const P=new yz({Yr:$=>{S?Fe("Connection","Not sending because WebChannel is closed:",$):(C||(Fe("Connection","Opening WebChannel transport."),w.open(),C=!0),Fe("Connection","WebChannel sending:",$),w.send($))},Zr:()=>w.close()}),U=($,le,ge)=>{$.listen(le,st=>{try{ge(st)}catch(ct){setTimeout(()=>{throw ct},0)}})};return U(w,qT.EventType.OPEN,()=>{S||Fe("Connection","WebChannel transport opened.")}),U(w,qT.EventType.CLOSE,()=>{S||(S=!0,Fe("Connection","WebChannel transport closed"),P.oo())}),U(w,qT.EventType.ERROR,$=>{S||(S=!0,vg("Connection","WebChannel transport errored:",$),P.oo(new Ne(ce.UNAVAILABLE,"The operation could not be completed")))}),U(w,qT.EventType.MESSAGE,$=>{var le;if(!S){const ge=$.data[0];pt(!!ge);const ct=ge.error||(null===(le=ge[0])||void 0===le?void 0:le.error);if(ct){Fe("Connection","WebChannel received error:",ct);const Xe=ct.status;let ot=function(Lt){const fr=Qr[Lt];if(void 0!==fr)return QL(fr)}(Xe),St=ct.message;void 0===ot&&(ot=ce.INTERNAL,St="Unknown error status: "+Xe+" with message "+ct.message),S=!0,P.oo(new Ne(ot,St)),w.close()}else Fe("Connection","WebChannel received:",ge),P.uo(ge)}}),U(l,f3.STAT_EVENT,$=>{$.stat===XF.PROXY?Fe("Connection","Detected buffering proxy"):$.stat===XF.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.ro()},0),P}}function lV(){return typeof window<"u"?window:null}function ED(){return typeof document<"u"?document:null}function nE(n){return new cq(n,!0)}class yN{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Ys=e,this.timerId=t,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.Po()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}class cV{constructor(e,t,r,i,a,l,f,_){this.Ys=e,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new yN(e,t)}Oo(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Fo()}stop(){var e=this;return(0,_e.Z)(function*(){e.Oo()&&(yield e.close(0))})()}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,_e.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Uo(),r.Ko(),r.ko.cancel(),r.Co++,4!==e?r.ko.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),r.ko.bo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Go(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===t&&this.jo(r,i)},r=>{e(()=>{const i=new Ne(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,t){const r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Fo(){var e=this;this.state=5,this.ko.vo((0,_e.Z)(function*(){e.state=0,e.start()}))}zo(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wz extends cV{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.Tt=a}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function fq(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:Je(),i=e.targetChange.targetIds||[],a=function(_,w){return _.yt?(pt(void 0===w||"string"==typeof w),hi.fromBase64String(w||"")):(pt(void 0===w||w instanceof Uint8Array),hi.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(_){const w=void 0===_.code?ce.UNKNOWN:QL(_.code);return new Ne(w,_.message||"")}(l);t=new nU(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Wl(n,r.document.name),a=kr(r.document.updateTime),l=r.document.createTime?kr(r.document.createTime):vt.min(),f=new Ti({mapValue:{fields:r.document.fields}}),_=Kn.newFoundDocument(i,a,l,f);t=new oD(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=Wl(n,r.document),a=r.readTime?kr(r.readTime):vt.min(),l=Kn.newNoDocument(i,a);t=new oD([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Wl(n,r.document);t=new oD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Je();{const r=e.filter,a=new tq(r.count||0);t=new tU(r.targetId,a)}}var _;return t}(this.Tt,e),r=function(i){if(!("targetChange"in i))return vt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?vt.min():a.readTime?kr(a.readTime):vt.min()}(e);return this.listener.Ho(t,r)}Jo(e){const t={};t.database=zw(this.Tt),t.addTarget=function(i,a){let l;const f=a.target;return l=XT(f)?{documents:hU(i,f)}:{query:WM(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=oU(i,a.resumeToken):a.snapshotVersion.compareTo(vt.min())>0&&(l.readTime=oy(i,a.snapshotVersion.toTimestamp())),l}(this.Tt,e);const r=function gq(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Je()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.qo(t)}Yo(e){const t={};t.database=zw(this.Tt),t.removeTarget=e,this.qo(t)}}class Ez extends cV{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.Tt=a,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function pq(n,e){return n&&n.length>0?(pt(void 0!==e),n.map(t=>function(r,i){let a=kr(r.updateTime?r.updateTime:i);return a.isEqual(vt.min())&&(a=kr(i)),new X3(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.eu(r,t)}return pt(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=zw(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ww(this.Tt,r))};this.qo(t)}}class Iz extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.lo(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(ce.UNKNOWN,i.toString())})}mo(e,t,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.mo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(ce.UNKNOWN,a.toString())})}terminate(){this.iu=!0}}class bz{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Pr(t),this.cu=!1):Fe("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class Tz{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr(f=>{r.enqueueAndForget((0,_e.Z)(function*(){var _;Ed(l)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,_e.Z)(function*(w){const C=Ze(w);C.mu.add(4),yield hy(C),C.pu.set("Unknown"),C.mu.delete(4),yield rE(C)}),function(w){return _.apply(this,arguments)})(l))}))}),this.pu=new bz(r,i)}}function rE(n){return wN.apply(this,arguments)}function wN(){return wN=(0,_e.Z)(function*(n){if(Ed(n))for(const e of n.gu)yield e(!0)}),wN.apply(this,arguments)}function hy(n){return EN.apply(this,arguments)}function EN(){return EN=(0,_e.Z)(function*(n){for(const e of n.gu)yield e(!1)}),EN.apply(this,arguments)}function ID(n,e){const t=Ze(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),bN(t)?CN(t):py(t).Mo()&&IN(t,e))}function iE(n,e){const t=Ze(n),r=py(t);t.wu.delete(e),r.Mo()&&dV(t,e),0===t.wu.size&&(r.Mo()?r.Bo():Ed(t)&&t.pu.set("Unknown"))}function IN(n,e){n.Iu.Ft(e.targetId),py(n).Jo(e)}function dV(n,e){n.Iu.Ft(e),py(n).Yo(e)}function CN(n){n.Iu=new oq({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),py(n).start(),n.pu.au()}function bN(n){return Ed(n)&&!py(n).Oo()&&n.wu.size>0}function Ed(n){return 0===Ze(n).mu.size}function hV(n){n.Iu=void 0}function Dz(n){return TN.apply(this,arguments)}function TN(){return TN=(0,_e.Z)(function*(n){n.wu.forEach((e,t)=>{IN(n,e)})}),TN.apply(this,arguments)}function Sz(n,e){return DN.apply(this,arguments)}function DN(){return DN=(0,_e.Z)(function*(n,e){hV(n),bN(n)?(n.pu.fu(e),CN(n)):n.pu.set("Unknown")}),DN.apply(this,arguments)}function Az(n,e,t){return SN.apply(this,arguments)}function SN(){return SN=(0,_e.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof nU&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.wu.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.wu.delete(f),i.Iu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield CD(n,r)}else if(e instanceof oD?n.Iu.Qt(e):e instanceof tU?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(vt.min()))try{const r=yield eV(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Iu.ee(a);return l.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const w=i.wu.get(_);w&&i.wu.set(_,w.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach(f=>{const _=i.wu.get(f);if(!_)return;i.wu.set(f,_.withResumeToken(hi.EMPTY_BYTE_STRING,_.snapshotVersion)),dV(i,f);const w=new yf(_.target,f,1,_.sequenceNumber);IN(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield CD(n,r)}var r}),SN.apply(this,arguments)}function CD(n,e,t){return AN.apply(this,arguments)}function AN(){return AN=(0,_e.Z)(function*(n,e,t){if(!cf(e))throw e;n.mu.add(1),yield hy(n),n.pu.set("Offline"),t||(t=()=>eV(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield rE(n)}))}),AN.apply(this,arguments)}function fV(n,e){return e().catch(t=>CD(n,t,e))}function fy(n){return xN.apply(this,arguments)}function xN(){return xN=(0,_e.Z)(function*(n){const e=Ze(n),t=If(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;xz(e);)try{const i=yield fz(e.localStore,r);if(null===i){0===e._u.length&&t.Bo();break}r=i.batchId,Rz(e,i)}catch(i){yield CD(e,i)}pV(e)&&gV(e)}),xN.apply(this,arguments)}function xz(n){return Ed(n)&&n._u.length<10}function Rz(n,e){n._u.push(e);const t=If(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function pV(n){return Ed(n)&&!If(n).Oo()&&n._u.length>0}function gV(n){If(n).start()}function Mz(n){return RN.apply(this,arguments)}function RN(){return RN=(0,_e.Z)(function*(n){If(n).su()}),RN.apply(this,arguments)}function Nz(n){return MN.apply(this,arguments)}function MN(){return MN=(0,_e.Z)(function*(n){const e=If(n);for(const t of n._u)e.tu(t.mutations)}),MN.apply(this,arguments)}function Pz(n,e,t){return NN.apply(this,arguments)}function NN(){return NN=(0,_e.Z)(function*(n,e,t){const r=n._u.shift(),i=YM.from(r,e,t);yield fV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield fy(n)}),NN.apply(this,arguments)}function kz(n,e){return PN.apply(this,arguments)}function PN(){return PN=(0,_e.Z)(function*(n,e){var t;e&&If(n).Xo&&(yield(t=(0,_e.Z)(function*(r,i){if(YL(a=i.code)&&a!==ce.ABORTED){const l=r._u.shift();If(r).$o(),yield fV(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield fy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),pV(n)&&gV(n)}),PN.apply(this,arguments)}function mV(n,e){return kN.apply(this,arguments)}function kN(){return kN=(0,_e.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Ed(t);t.mu.add(3),yield hy(t),r&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield rE(t)}),kN.apply(this,arguments)}function ON(n,e){return FN.apply(this,arguments)}function FN(){return FN=(0,_e.Z)(function*(n,e){const t=Ze(n);e?(t.mu.delete(2),yield rE(t)):e||(t.mu.add(2),yield hy(t),t.pu.set("Unknown"))}),FN.apply(this,arguments)}function py(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ze(e);return i.ru(),new wz(t,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(n.datastore,n.asyncQueue,{Xr:Dz.bind(null,n),no:Sz.bind(null,n),Ho:Az.bind(null,n)}),n.gu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Tu.$o(),bN(n)?CN(n):n.pu.set("Unknown")):(yield n.Tu.stop(),hV(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function If(n){return n.Eu||(n.Eu=function(e,t,r){const i=Ze(e);return i.ru(),new Ez(t,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(n.datastore,n.asyncQueue,{Xr:Mz.bind(null,n),no:kz.bind(null,n),nu:Nz.bind(null,n),eu:Pz.bind(null,n)}),n.gu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Eu.$o(),yield fy(n)):(yield n.Eu.stop(),n._u.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class LN{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new LN(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gy(n,e){if(Pr("AsyncQueue",`${e}: ${n}`),cf(n))return new Ne(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class my{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=jw(),this.sortedSet=new Cr(this.comparator)}static emptySet(e){return new my(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof my)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new my;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class _V{constructor(){this.Au=new Cr(qe.comparator)}track(e){const t=e.doc.key,r=this.Au.get(t);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(t):1===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):Je():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,r)=>{e.push(r)}),e}}class _y{constructor(e,t,r,i,a,l,f,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new _y(e,t,my.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Oz{constructor(){this.bu=void 0,this.listeners=[]}}class Fz{constructor(){this.queries=new mf(e=>kL(e),Lw),this.onlineState="Unknown",this.vu=new Set}}function UN(n,e){return VN.apply(this,arguments)}function VN(){return VN=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new Oz),i)try{a.bu=yield t.onListen(r)}catch(l){const f=gy(l,`Initialization of query '${$M(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Pu(t.onlineState),a.bu&&e.Vu(a.bu)&&$N(t)}),VN.apply(this,arguments)}function BN(n,e){return jN.apply(this,arguments)}function jN(){return jN=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),jN.apply(this,arguments)}function Lz(n,e){const t=Ze(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.Vu(i)&&(r=!0);l.bu=i}}r&&$N(t)}function Uz(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function $N(n){n.vu.forEach(e=>{e.next()})}class HN{constructor(e,t,r){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new _y(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.Ou||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=_y.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class Vz{constructor(e,t){this.Mu=e,this.byteLength=t}Fu(){return"metadata"in this.Mu}}class yV{constructor(e){this.Tt=e}Zi(e){return Wl(this.Tt,e)}Xi(e){return e.metadata.exists?dU(this.Tt,e.document,!1):Kn.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return kr(e)}}class Bz{constructor(e,t,r){this.$u=e,this.localStore=t,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vV(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const r=ln.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,r=new yV(this.Tt);for(const i of e)if(i.metadata.queries){const a=r.Zi(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||Wt()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function pz(n,e,t,r){return hN.apply(this,arguments)}(e.localStore,new yV(e.Tt),e.documents,e.$u.id),r=e.Lu(e.documents);for(const i of e.queries)yield gz(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function vV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class wV{constructor(e){this.key=e}}class EV{constructor(e){this.key=e}}class IV{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Wt(),this.mutatedKeys=Wt(),this.ju=FL(e),this.zu=new my(this.ju)}get Wu(){return this.Ku}Hu(e,t){const r=t?t.Ju:new _V,i=t?t.zu:this.zu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,S)=>{const P=i.get(C),U=Uw(this.query,S)?S:null,$=!!P&&this.mutatedKeys.has(P.key),le=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let ge=!1;P&&U?P.data.isEqual(U.data)?$!==le&&(r.track({type:3,doc:U}),ge=!0):this.Yu(P,U)||(r.track({type:2,doc:U}),ge=!0,(_&&this.ju(U,_)>0||w&&this.ju(U,w)<0)&&(f=!0)):!P&&U?(r.track({type:0,doc:U}),ge=!0):P&&!U&&(r.track({type:1,doc:P}),ge=!0,(_||w)&&(f=!0)),ge&&(U?(l=l.add(U),a=le?a.add(C):a.delete(C)):(l=l.delete(C),a=a.delete(C)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const C="F"===this.query.limitType?l.last():l.first();l=l.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{zu:l,Ju:r,Li:f,mutatedKeys:a}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const a=e.Ju.Ru();a.sort((w,C)=>function(S,P){const U=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je()}};return U(S)-U(P)}(w.type,C.type)||this.ju(w.doc,C.doc)),this.Zu(r);const l=t?this.Xu():[],f=0===this.Qu.size&&this.current?1:0,_=f!==this.Gu;return this.Gu=f,0!==a.length||_?{snapshot:new _y(this.query,e.zu,i,a,e.mutatedKeys,0===f,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:l}:{tc:l}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new _V,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=Wt(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const t=[];return e.forEach(r=>{this.Qu.has(r)||t.push(new EV(r))}),this.Qu.forEach(r=>{e.has(r)||t.push(new wV(r))}),t}nc(e){this.Ku=e.Yi,this.Qu=Wt();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return _y.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class jz{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class $z{constructor(e){this.key=e,this.ic=!1}}class Hz{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.rc={},this.oc=new mf(f=>kL(f),Lw),this.uc=new Map,this.cc=new Set,this.ac=new Cr(qe.comparator),this.hc=new Map,this.lc=new sN,this.fc={},this.dc=new Map,this._c=Og.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function Gz(n,e){return GN.apply(this,arguments)}function GN(){return GN=(0,_e.Z)(function*(n,e){const t=fP(n);let r,i;const a=t.oc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.sc();else{const l=yield cy(t.localStore,Rs(e));t.isPrimaryClient&&ID(t.remoteStore,l);const f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield qN(t,e,r,"current"===f,l.resumeToken)}return i}),GN.apply(this,arguments)}function qN(n,e,t,r,i){return zN.apply(this,arguments)}function zN(){return zN=(0,_e.Z)(function*(n,e,t,r,i){n.mc=(S,P,U)=>{return($=(0,_e.Z)(function*(le,ge,st,ct){let Xe=ge.view.Hu(st);Xe.Li&&(Xe=yield yD(le.localStore,ge.query,!1).then(({documents:Lt})=>ge.view.Hu(Lt,Xe)));const ot=ct&&ct.targetChanges.get(ge.targetId),St=ge.view.applyChanges(Xe,le.isPrimaryClient,ot);return nP(le,ge.targetId,St.tc),St.snapshot}),function(le,ge,st,ct){return $.apply(this,arguments)})(n,S,P,U);var $};const a=yield yD(n.localStore,e,!0),l=new IV(e,a.Yi),f=l.Hu(a.documents),_=Gw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=l.applyChanges(f,n.isPrimaryClient,_);nP(n,t,w.tc);const C=new jz(e,t,l);return n.oc.set(e,C),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),w.snapshot}),zN.apply(this,arguments)}function qz(n,e){return WN.apply(this,arguments)}function WN(){return WN=(0,_e.Z)(function*(n,e){const t=Ze(n),r=t.oc.get(e),i=t.uc.get(r.targetId);if(i.length>1)return t.uc.set(r.targetId,i.filter(a=>!Lw(a,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield dy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),iE(t.remoteStore,r.targetId),yy(t,r.targetId)}).catch(lf))):(yy(t,r.targetId),yield dy(t.localStore,r.targetId,!0))}),WN.apply(this,arguments)}function ZN(){return ZN=(0,_e.Z)(function*(n,e,t){const r=pP(n);try{const i=yield function(a,l){const f=Ze(a),_=sr.now(),w=l.reduce((P,U)=>P.add(U.key),Wt());let C,S;return f.persistence.runTransaction("Locally write mutations","readwrite",P=>{let U=Xs(),$=Wt();return f.ji.getEntries(P,w).next(le=>{U=le,U.forEach((ge,st)=>{st.isValidDocument()||($=$.add(ge))})}).next(()=>f.localDocuments.getOverlayedDocuments(P,U)).next(le=>{C=le;const ge=[];for(const st of l){const ct=eq(st,C.get(st.key).overlayedDocument);null!=ct&&ge.push(new wd(st.key,ct,xL(ct.value.mapValue),or.exists(!0)))}return f.mutationQueue.addMutationBatch(P,_,ge,l)}).next(le=>{S=le;const ge=le.applyToLocalDocumentSet(C,$);return f.documentOverlayCache.saveOverlays(P,le.batchId,ge)})}).then(()=>({batchId:S.batchId,changes:JL(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let _=a.fc[a.currentUser.toKey()];_||(_=new Cr($t)),_=_.insert(l,f),a.fc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield Id(r,i.changes),yield fy(r.remoteStore)}catch(i){const a=gy(i,"Failed to persist write");t.reject(a)}}),ZN.apply(this,arguments)}function CV(n,e){return KN.apply(this,arguments)}function KN(){return KN=(0,_e.Z)(function*(n,e){const t=Ze(n);try{const r=yield hz(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.hc.get(a);l&&(pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ic=!0:i.modifiedDocuments.size>0?pt(l.ic):i.removedDocuments.size>0&&(pt(l.ic),l.ic=!1))}),yield Id(t,r,e)}catch(r){yield lf(r)}}),KN.apply(this,arguments)}function bV(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.oc.forEach((a,l)=>{const f=l.view.Pu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=Ze(a);f.onlineState=l;let _=!1;f.queries.forEach((w,C)=>{for(const S of C.listeners)S.Pu(l)&&(_=!0)}),_&&$N(f)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Wz(n,e,t){return YN.apply(this,arguments)}function YN(){return YN=(0,_e.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.hc.get(e),a=i&&i.key;if(a){let l=new Cr(qe.comparator);l=l.insert(a,Kn.newNoDocument(a,vt.min()));const f=Wt().add(a),_=new Hw(vt.min(),new Map,new Rn($t),l,f);yield CV(r,_),r.ac=r.ac.remove(a),r.hc.delete(e),rP(r)}else yield dy(r.localStore,e,!1).then(()=>yy(r,e,t)).catch(lf)}),YN.apply(this,arguments)}function Zz(n,e){return QN.apply(this,arguments)}function QN(){return QN=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield dz(t.localStore,e);tP(t,r,null),eP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Id(t,i)}catch(i){yield lf(i)}}),QN.apply(this,arguments)}function Kz(n,e,t){return XN.apply(this,arguments)}function XN(){return XN=(0,_e.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(a,l){const f=Ze(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return f.mutationQueue.lookupMutationBatch(_,l).next(C=>(pt(null!==C),w=C.keys(),f.mutationQueue.removeMutationBatch(_,C))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,w,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>f.localDocuments.getDocuments(_,w))})}(r.localStore,e);tP(r,e,t),eP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Id(r,i)}catch(i){yield lf(i)}}),XN.apply(this,arguments)}function JN(){return JN=(0,_e.Z)(function*(n,e){const t=Ze(n);Ed(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ze(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.dc.get(r)||[];i.push(e),t.dc.set(r,i)}catch(r){const i=gy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),JN.apply(this,arguments)}function eP(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function tP(n,e,t){const r=Ze(n);let i=r.fc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function yy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.uc.get(e))n.oc.delete(r),t&&n.rc.gc(r,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(r=>{n.lc.containsKey(r)||TV(n,r)})}function TV(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(iE(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),rP(n))}function nP(n,e,t){for(const r of t)r instanceof wV?(n.lc.addReference(r.key,e),Qz(n,r)):r instanceof EV?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.lc.removeReference(r.key,e),n.lc.containsKey(r.key)||TV(n,r.key)):Je()}function Qz(n,e){const t=e.key,r=t.path.canonicalString();n.ac.get(t)||n.cc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.cc.add(r),rP(n))}function rP(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new qe(ln.fromString(e)),r=n._c.next();n.hc.set(r,new $z(t)),n.ac=n.ac.insert(t,r),ID(n.remoteStore,new yf(Rs(ty(t.path)),r,2,Fo.at))}}function Id(n,e,t){return iP.apply(this,arguments)}function iP(){return iP=(0,_e.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[],l=[];var f;r.oc.isEmpty()||(r.oc.forEach((f,_)=>{l.push(r.mc(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const C=lN.Ni(_.targetId,w);a.push(C)}}))}),yield Promise.all(l),r.rc.Ho(i),yield(f=(0,_e.Z)(function*(_,w){const C=Ze(_);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ue.forEach(w,P=>ue.forEach(P.Ci,U=>C.persistence.referenceDelegate.addReference(S,P.targetId,U)).next(()=>ue.forEach(P.xi,U=>C.persistence.referenceDelegate.removeReference(S,P.targetId,U)))))}catch(S){if(!cf(S))throw S;Fe("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const P=S.targetId;if(!S.fromCache){const U=C.Ki.get(P),le=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);C.Ki=C.Ki.insert(P,le)}}}),function(_,w){return f.apply(this,arguments)})(r.localStore,a))}),iP.apply(this,arguments)}function Xz(n,e){return sP.apply(this,arguments)}function sP(){return sP=(0,_e.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield JU(t.localStore,e);t.currentUser=e,(i=t).dc.forEach(l=>{l.forEach(f=>{f.reject(new Ne(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.dc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Id(t,r.Wi)}var i}),sP.apply(this,arguments)}function Jz(n,e){const t=Ze(n),r=t.hc.get(e);if(r&&r.ic)return Wt().add(r.key);{let i=Wt();const a=t.uc.get(e);if(!a)return i;for(const l of a){const f=t.oc.get(l);i=i.unionWith(f.view.Wu)}return i}}function e6(n,e){return oP.apply(this,arguments)}function oP(){return oP=(0,_e.Z)(function*(n,e){const t=Ze(n),r=yield yD(t.localStore,e.query,!0),i=e.view.nc(r);return t.isPrimaryClient&&nP(t,e.targetId,i.tc),i}),oP.apply(this,arguments)}function t6(n,e){return aP.apply(this,arguments)}function aP(){return aP=(0,_e.Z)(function*(n,e){const t=Ze(n);return rV(t.localStore,e).then(r=>Id(t,r))}),aP.apply(this,arguments)}function n6(n,e,t,r){return uP.apply(this,arguments)}function uP(){return uP=(0,_e.Z)(function*(n,e,t,r){const i=Ze(n),a=yield function(l,f){const _=Ze(l),w=Ze(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",C=>w.An(C,f).next(S=>S?_.localDocuments.getDocuments(C,S):ue.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield fy(i.remoteStore):"acknowledged"===t||"rejected"===t?(tP(i,e,r||null),eP(i,e),f=e,Ze(Ze(i.localStore).mutationQueue).bn(f)):Je(),yield Id(i,a)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),uP.apply(this,arguments)}function lP(){return lP=(0,_e.Z)(function*(n,e){const t=Ze(n);if(fP(t),pP(t),!0===e&&!0!==t.wc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield DV(t,r.toArray());t.wc=!0,yield ON(t.remoteStore,!0);for(const a of i)ID(t.remoteStore,a)}else if(!1===e&&!1!==t.wc){const r=[];let i=Promise.resolve();t.uc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(yy(t,l),dy(t.localStore,l,!0))),iE(t.remoteStore,l)}),yield i,yield DV(t,r),function(a){const l=Ze(a);l.hc.forEach((f,_)=>{iE(l.remoteStore,_)}),l.lc._s(),l.hc=new Map,l.ac=new Cr(qe.comparator)}(t),t.wc=!1,yield ON(t.remoteStore,!1)}}),lP.apply(this,arguments)}function DV(n,e,t){return cP.apply(this,arguments)}function cP(){return cP=(0,_e.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[];for(const l of e){let f;const _=r.uc.get(l);if(_&&0!==_.length){f=yield cy(r.localStore,Rs(_[0]));for(const w of _){const C=r.oc.get(w),S=yield e6(r,C);S.snapshot&&a.push(S.snapshot)}}else{const w=yield nV(r.localStore,l);f=yield cy(r.localStore,w),yield qN(r,SV(w),l,!1,f.resumeToken)}i.push(f)}return r.rc.Ho(a),i}),cP.apply(this,arguments)}function SV(n){return NL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function i6(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Si()}function s6(n,e,t,r){return dP.apply(this,arguments)}function dP(){return dP=(0,_e.Z)(function*(n,e,t,r){const i=Ze(n);if(i.wc)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const a=i.uc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield rV(i.localStore,OL(a[0])),f=Hw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,hi.EMPTY_BYTE_STRING);yield Id(i,l,f);break}case"rejected":yield dy(i.localStore,e,!0),yy(i,e,r);break;default:Je()}}),dP.apply(this,arguments)}function o6(n,e,t){return hP.apply(this,arguments)}function hP(){return hP=(0,_e.Z)(function*(n,e,t){const r=fP(n);if(r.wc){for(const i of e){if(r.uc.has(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const a=yield nV(r.localStore,i),l=yield cy(r.localStore,a);yield qN(r,SV(a),l.targetId,!1,l.resumeToken),ID(r.remoteStore,l)}for(const i of t)r.uc.has(i)&&(yield dy(r.localStore,i,!1).then(()=>{iE(r.remoteStore,i),yy(r,i)}).catch(lf))}}),hP.apply(this,arguments)}function fP(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wz.bind(null,e),e.rc.Ho=Lz.bind(null,e.eventManager),e.rc.gc=Uz.bind(null,e.eventManager),e}function pP(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kz.bind(null,e),e}class AV{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.Tt=nE(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return XU(this.persistence,new QU,e.initialUser,this.Tt)}Tc(e){return new KU(mD.qs,this.Tt)}Ic(e){return new aV}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class xV extends AV{constructor(e,t,r){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.bc.initialize(r,e),yield pP(r.bc.syncEngine),yield fy(r.bc.remoteStore),yield r.persistence.di(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return XU(this.persistence,new QU,e.initialUser,this.Tt)}Ac(e,t){return new Yq(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const r=new M3(t,this.persistence);return new R3(e.asyncQueue,r)}Tc(e){const t=uN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Js.withCacheSize(this.cacheSizeBytes):Js.DEFAULT;return new aN(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,lV(),ED(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new aV}}class u6 extends xV{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.bc.syncEngine;r.sharedClientState instanceof _N&&(r.sharedClientState.syncEngine={Br:n6.bind(null,i),Lr:s6.bind(null,i),qr:o6.bind(null,i),Si:i6.bind(null,i),$r:t6.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.di(function(){var a=(0,_e.Z)(function*(l){yield function r6(n,e){return lP.apply(this,arguments)}(r.bc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}Ic(e){const t=lV();if(!_N.C(t))throw new Ne(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=uN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _N(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class gP{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>bV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Xz.bind(null,r.syncEngine),yield ON(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Fz}createDatastore(e){const t=nE(e.databaseInfo.databaseId),r=new vz(e.databaseInfo);return new Iz(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>bV(this.syncEngine,f,0),l=uV.C()?new uV:new mz,new Tz(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,_,w){const C=new Hz(r,i,a,l,f,_);return w&&(C.wc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=Ze(t);Fe("RemoteStore","RemoteStore shutting down."),r.mu.add(5),yield hy(r),r.yu.shutdown(),r.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function RV(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class bD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString())}Pc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class l6{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new di,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Fu()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const r=e.Sc.decode(t),i=Number(r);isNaN(i)&&e.xc(`length string (${r}) is not valid number`);const a=yield e.Nc(i);return new Vz(JSON.parse(a),t.length+i)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,_e.Z)(function*(){for(;e.kc()<0&&!(yield e.Oc()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Nc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Oc())&&t.xc("Reached the end of bundle when more is expected.");const r=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}Oc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class c6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,_e.Z)(function*(a,l){const f=Ze(a),_=zw(f.Tt)+"/documents",w={documents:l.map(U=>qw(f.Tt,U))},C=yield f.mo("BatchGetDocuments",_,w,l.length),S=new Map;C.forEach(U=>{const $=function hq(n,e){return"found"in e?function(t,r){pt(!!r.found);const i=Wl(t,r.found.name),a=kr(r.found.updateTime),l=r.found.createTime?kr(r.found.createTime):vt.min(),f=new Ti({mapValue:{fields:r.found.fields}});return Kn.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){pt(!!r.missing),pt(!!r.readTime);const i=Wl(t,r.missing),a=kr(r.readTime);return Kn.newNoDocument(i,a)}(n,e):Je()}(f.Tt,U);S.set($.key.toString(),$)});const P=[];return l.forEach(U=>{const $=S.get(U.toString());pt(!!$),P.push($)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new sy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=qe.fromPath(i);e.mutations.push(new HM(a,e.precondition(a)))}),yield(r=(0,_e.Z)(function*(i,a){const l=Ze(i),f=zw(l.Tt)+"/documents",_={writes:a.map(w=>Ww(l.Tt,w))};yield l.lo("Commit",f,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Je();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?or.exists(!1):or.updateTime(t):or.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Ne(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return or.updateTime(t)}return or.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class d6{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Mc=r.maxAttempts,this.ko=new yN(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Fc()}Fc(){var e=this;this.ko.vo((0,_e.Z)(function*(){const t=new c6(e.datastore),r=e.$c(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Bc(a)}))}).catch(i=>{e.Bc(i)})}))}$c(e){try{const t=this.updateFunction(e);return!Rw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Fc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!YL(t)}return!1}}class h6{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bi.UNAUTHENTICATED,this.clientId=nL.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,_e.Z)(function*(f){Fe("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Fe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=gy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function MV(n,e){return mP.apply(this,arguments)}function mP(){return mP=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(a){r.isEqual(a)||(yield JU(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),mP.apply(this,arguments)}function NV(n,e){return _P.apply(this,arguments)}function _P(){return _P=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield yP(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>mV(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>mV(e.remoteStore,a)),n.onlineComponents=e}),_P.apply(this,arguments)}function yP(n){return vP.apply(this,arguments)}function vP(){return vP=(0,_e.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield MV(n,new AV)),n.offlineComponents}),vP.apply(this,arguments)}function TD(n){return wP.apply(this,arguments)}function wP(){return wP=(0,_e.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield NV(n,new gP)),n.onlineComponents}),wP.apply(this,arguments)}function PV(n){return yP(n).then(e=>e.persistence)}function DD(n){return yP(n).then(e=>e.localStore)}function EP(n){return TD(n).then(e=>e.remoteStore)}function IP(n){return TD(n).then(e=>e.syncEngine)}function vy(n){return CP.apply(this,arguments)}function CP(){return CP=(0,_e.Z)(function*(n){const e=yield TD(n),t=e.eventManager;return t.onListen=Gz.bind(null,e.syncEngine),t.onUnlisten=qz.bind(null,e.syncEngine),t}),CP.apply(this,arguments)}function OV(n,e,t={}){const r=new di;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,f,_){const w=new bD({next:S=>{a.enqueueAndForget(()=>BN(i,C));const P=S.docs.has(l);!P&&S.fromCache?_.reject(new Ne(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&f&&"server"===f.source?_.reject(new Ne(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),C=new HN(ty(l.path),w,{includeMetadataChanges:!0,Ou:!0});return UN(i,C)}(yield vy(n),n.asyncQueue,e,t,r)})),r.promise}function FV(n,e,t={}){const r=new di;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,f,_){const w=new bD({next:S=>{a.enqueueAndForget(()=>BN(i,C)),S.fromCache&&"server"===f.source?_.reject(new Ne(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),C=new HN(l,w,{includeMetadataChanges:!0,Ou:!0});return UN(i,C)}(yield vy(n),n.asyncQueue,e,t,r)})),r.promise}const LV=new Map;function bP(n,e,t){if(!t)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function UV(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function VV(n){if(!qe.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function BV(n){if(qe.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Je()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=SD(n);throw new Ne(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jV(n,e){if(e<=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class $V{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,UV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $V({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $V(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new y3;switch(t.type){case"gapi":return new I3(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=LV.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),LV.delete(e),t.terminate())}(this),Promise.resolve()}}class Yn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yn(this.firestore,e,this._key)}}class Ki{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ki(this.firestore,e,this._query)}}class Kl extends Ki{constructor(e,t,r){super(e,t,ty(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new qe(e))}withConverter(e){return new Kl(this.firestore,e,this._path)}}function GV(n,e,...t){if(n=(0,k.m9)(n),bP("collection","path",e),n instanceof sE){const r=ln.fromString(e,...t);return BV(r),new Kl(n,null,r)}{if(!(n instanceof Yn||n instanceof Kl))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return BV(r),new Kl(n.firestore,null,r)}}function AD(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=nL.R()),bP("doc","path",e),n instanceof sE){const r=ln.fromString(e,...t);return VV(r),new Yn(n,null,new qe(r))}{if(!(n instanceof Yn||n instanceof Kl))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return VV(r),new Yn(n.firestore,n instanceof Kl?n.converter:null,new qe(r))}}function qV(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof Yn||n instanceof Kl)&&(e instanceof Yn||e instanceof Kl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function TP(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof Ki&&e instanceof Ki&&n.firestore===e.firestore&&Lw(n._query,e._query)&&n.converter===e.converter}class E6{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new yN(this,"async_queue_retry"),this.Hc=()=>{const t=ED();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=ED();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=ED();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new di;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!cf(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(r=>{throw this.Qc=r,this.jc=!1,Pr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.jc=!1,r))));return this.qc=t,t}enqueueAfterDelay(e,t,r){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const i=LN.createAndSchedule(this,e,t,r,a=>this.Xc(a));return this.Gc.push(i),i}Jc(){this.Qc&&Je()}verifyOperationInProgress(){}ta(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function DP(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class I6{constructor(){this._progressObserver={},this._taskCompletionResolver=new di,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Qn extends sE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new E6,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||zV(this),this._firestoreClient.terminate()}}function Or(n){return n._firestoreClient||zV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function zV(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new k3(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new h6(n._authCredentials,n._appCheckCredentials,n._queue,r)}function WV(n,e,t){const r=new di;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield MV(n,t),yield NV(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===ce.FAILED_PRECONDITION||l.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;vg("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function ZV(n){if(n._initialized||n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Yl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yl(hi.fromBase64String(e))}catch(t){throw new Ne(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yl(hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lg{constructor(e){this._methodName=e}}class xD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const P6=/^__.*__$/;class k6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new wd(e,this.data,this.fieldMask,t,this.fieldTransforms):new iy(e,this.data,t,this.fieldTransforms)}}class KV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function YV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je()}}class RD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new RD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return PD(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(YV(this.ra)&&P6.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class O6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=r||nE(e)}wa(e,t,r,i=!1){return new RD({ra:e,methodName:t,_a:r,path:Er.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Ug(n){const e=n._freezeSettings(),t=nE(n._databaseId);return new O6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function MD(n,e,t,r,i,a={}){const l=n.wa(a.merge||a.mergeFields?2:0,e,t,i);RP("Data must be an object, but it was:",l,r);const f=JV(r,l);let _,w;if(a.merge)_=new Qs(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const C=[];for(const S of a.mergeFields){const P=uE(e,S,t);if(!l.contains(P))throw new Ne(ce.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);t2(C,P)||C.push(P)}_=new Qs(C),w=l.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,w=l.fieldTransforms;return new k6(new Ti(f),_,w)}class aE extends Lg{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof aE}}function QV(n,e,t){return new RD({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class SP extends Lg{_toFieldTransform(e){return new Vw(e.path,new ny)}isEqual(e){return e instanceof SP}}class F6 extends Lg{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=QV(this,e,!0),r=this.ma.map(a=>Vg(a,t)),i=new Ag(r);return new Vw(e.path,i)}isEqual(e){return this===e}}class L6 extends Lg{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=QV(this,e,!0),r=this.ma.map(a=>Vg(a,t)),i=new xg(r);return new Vw(e.path,i)}isEqual(e){return this===e}}class U6 extends Lg{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new ry(e.Tt,VL(e.Tt,this.ga));return new Vw(e.path,t)}isEqual(e){return this===e}}function AP(n,e,t,r){const i=n.wa(1,e,t);RP("Data must be an object, but it was:",i,r);const a=[],l=Ti.empty();Ig(r,(_,w)=>{const C=ND(e,_,t);w=(0,k.m9)(w);const S=i.ha(C);if(w instanceof aE)a.push(C);else{const P=Vg(w,S);null!=P&&(a.push(C),l.set(C,P))}});const f=new Qs(a);return new KV(l,f,i.fieldTransforms)}function xP(n,e,t,r,i,a){const l=n.wa(1,e,t),f=[uE(e,r,t)],_=[i];if(a.length%2!=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)f.push(uE(e,a[P])),_.push(a[P+1]);const w=[],C=Ti.empty();for(let P=f.length-1;P>=0;--P)if(!t2(w,f[P])){const U=f[P];let $=_[P];$=(0,k.m9)($);const le=l.ha(U);if($ instanceof aE)w.push(U);else{const ge=Vg($,le);null!=ge&&(w.push(U),C.set(U,ge))}}const S=new Qs(w);return new KV(C,S,l.fieldTransforms)}function XV(n,e,t,r=!1){return Vg(t,n.wa(r?4:3,e))}function Vg(n,e){if(e2(n=(0,k.m9)(n)))return RP("Unsupported field value:",e,n),JV(n,e);if(n instanceof Lg)return function(t,r){if(!YV(r.ra))throw r.fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=Vg(l,r.la(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return VL(r.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=sr.fromDate(t);return{timestampValue:oy(r.Tt,i)}}if(t instanceof sr){const i=new sr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:oy(r.Tt,i)}}if(t instanceof xD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Yl)return{bytesValue:oU(r.Tt,t._byteString)};if(t instanceof Yn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.fa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:GM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.fa(`Unsupported field value: ${SD(t)}`)}(n,e)}function JV(n,e){const t={};return cL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ig(n,(r,i)=>{const a=Vg(i,e.ua(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function e2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof sr||n instanceof xD||n instanceof Yl||n instanceof Yn||n instanceof Lg)}function RP(n,e,t){if(!e2(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=SD(t);throw e.fa("an object"===r?n+" a custom object":n+" "+r)}var r}function uE(n,e,t){if((e=(0,k.m9)(e))instanceof Cd)return e._internalPath;if("string"==typeof e)return ND(n,e);throw PD("Field path arguments must be of type string or ",n,!1,void 0,t)}const V6=new RegExp("[~\\*/\\[\\]]");function ND(n,e,t){if(e.search(V6)>=0)throw PD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cd(...e.split("."))._internalPath}catch{throw PD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function PD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(a||l)&&(_+=" (found",a&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Ne(ce.INVALID_ARGUMENT,f+n+_)}function t2(n,e){return n.some(t=>t.isEqual(e))}class lE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new B6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class B6 extends lE{data(){return super.data()}}function kD(n,e){return"string"==typeof e?ND(n,e):e instanceof Cd?e._internalPath:e._delegate._internalPath}function n2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class MP{}class cE extends MP{}function Cf(n,e,...t){let r=[];e instanceof MP&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof wy).length,l=i.filter(f=>f instanceof dE).length;if(a>1||a>0&&l>0)throw new Ne(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class dE extends cE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new dE(e,t,r)}_apply(e){const t=this._parse(e);return o2(e._query,t),new Ki(e.firestore,e.converter,jM(e._query,t))}_parse(e){const t=Ug(e.firestore);return function(i,a,l,f,_,w,C){let S;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){s2(C,w);const P=[];for(const U of C)P.push(i2(f,i,U));S={arrayValue:{values:P}}}else S=i2(f,i,C)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||s2(C,w),S=XV(l,"where",C,"in"===w||"not-in"===w);return rn.create(_,w,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class wy extends MP{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Tn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)o2(a,f),a=jM(a,f)}(e._query,t),new Ki(e.firestore,e.converter,jM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class NP extends cE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new NP(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new J_(i,a);return function(f,_){if(null===VM(f)){const w=eD(f);null!==w&&a2(0,w,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new Ki(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new vd(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class OD extends cE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new OD(e,t,r)}_apply(e){return new Ki(e.firestore,e.converter,tD(e._query,this._limit,this._limitType))}}class FD extends cE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new FD(e,t,r)}_apply(e){const t=r2(e,this.type,this._docOrFields,this._inclusive);return new Ki(e.firestore,e.converter,(i=t,new vd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class LD extends cE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new LD(e,t,r)}_apply(e){const t=r2(e,this.type,this._docOrFields,this._inclusive);return new Ki(e.firestore,e.converter,(i=t,new vd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function r2(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof lE)return function(i,a,l,f,_){if(!f)throw new Ne(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const C of Sg(i))if(C.field.isKeyField())w.push(Tg(a,f.key));else{const S=f.data.field(C.field);if(NM(S))throw new Ne(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=C.field.canonicalString();throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}w.push(S)}return new gf(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Ug(n.firestore);return function(a,l,f,_,w,C){const S=a.explicitOrderBy;if(w.length>S.length)throw new Ne(ce.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let U=0;U<w.length;U++){const $=w[U];if(S[U].field.isKeyField()){if("string"!=typeof $)throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof $}`);if(!BM(a)&&-1!==$.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${$}' contains a slash.`);const le=a.path.child(ln.fromString($));if(!qe.isDocumentKey(le))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${le}' is not because it contains an odd number of segments.`);const ge=new qe(le);P.push(Tg(l,ge))}else{const le=XV(f,_,$);P.push(le)}}return new gf(P,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function i2(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BM(e)&&-1!==t.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ln.fromString(t));if(!qe.isDocumentKey(r))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tg(n,new qe(r))}if(t instanceof Yn)return Tg(n,t._key);throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${SD(t)}.`)}function s2(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function o2(n,e){if(e.isInequality()){const r=eD(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=VM(n);null!==a&&a2(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ne(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function a2(n,e,t){if(!t.isEqual(e))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class PP{convertValue(e,t="none"){switch(bg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Je()}}convertObject(e,t){const r={};return Ig(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new xD(Ir(e.latitude),Ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=hL(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nw(e));default:return null}}convertTimestamp(e){const t=hf(e);return new sr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ln.fromString(e);pt(mU(r));const i=new df(r.get(1),r.get(3)),a=new qe(r.popFirst(5));return i.isEqual(t)||Pr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function UD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class K6 extends PP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}class Bg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bd extends lE{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(kD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class hE extends bd{data(e={}){return super.data(e)}}class bf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hE(this._firestore,this._userDataWriter,r.key,r,new Bg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new hE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Bg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new hE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Bg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==l.type&&(_=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:Q6(l.type),doc:f,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Q6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je()}}function l2(n,e){return n instanceof bd&&e instanceof bd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bf&&e instanceof bf&&n._firestore===e._firestore&&TP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Tf extends PP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}function c2(n,e,t){n=sn(n,Yn);const r=sn(n.firestore,Qn),i=UD(n.converter,e,t);return Ey(r,[MD(Ug(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,or.none())])}function d2(n,e,t,...r){n=sn(n,Yn);const i=sn(n.firestore,Qn),a=Ug(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof Cd?xP(a,"updateDoc",n._key,e,t,r):AP(a,"updateDoc",n._key,e),Ey(i,[l.toMutation(n._key,or.exists(!0))])}function h2(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||DP(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(DP(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,w,C;if(n instanceof Yn)w=sn(n.firestore,Qn),C=ty(n._key.path),_={next:S=>{e[l]&&e[l](kP(w,n,S))},error:e[l+1],complete:e[l+2]};else{const S=sn(n,Ki);w=sn(S.firestore,Qn),C=S._query;const P=new Tf(w);_={next:U=>{e[l]&&e[l](new bf(w,P,S,U))},error:e[l+1],complete:e[l+2]},n2(n._query)}return function(S,P,U,$){const le=new bD($),ge=new HN(P,le,U);return S.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return UN(yield vy(S),ge)})),()=>{le.Pc(),S.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return BN(yield vy(S),ge)}))}}(Or(w),C,f,_)}function Ey(n,e){return function(t,r){const i=new di;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function zz(n,e,t){return ZN.apply(this,arguments)}(yield IP(t),r,i)})),i.promise}(Or(n),e)}function kP(n,e,t){const r=t.docs.get(e._key),i=new Tf(n);return new bd(n,i,e._key,r,new Bg(t.hasPendingWrites,t.fromCache),e.converter)}const uW={maxAttempts:5};class f2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ug(e)}set(e,t,r){this._verifyNotCommitted();const i=Df(e,this._firestore),a=UD(i.converter,t,r),l=MD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,or.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Df(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Cd?xP(this._dataReader,"WriteBatch.update",a._key,t,r,i):AP(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,or.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Df(e,this._firestore);return this._mutations=this._mutations.concat(new sy(t._key,or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Df(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Ne(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class lW extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ug(e)}get(e){const t=Df(e,this._firestore),r=new K6(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Je();const a=i[0];if(a.isFoundDocument())return new lE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new lE(this._firestore,r,t._key,null,t.converter);throw Je()})}set(e,t,r){const i=Df(e,this._firestore),a=UD(i.converter,t,r),l=MD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Df(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Cd?xP(this._dataReader,"Transaction.update",a._key,t,r,i):AP(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Df(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Df(e,this._firestore),r=new Tf(this._firestore);return super.get(e).then(i=>new bd(this._firestore,r,t._key,i._document,new Bg(!1,!1),t.converter))}}function OP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function g2(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function m2(){if(!function F3(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){K_=Vi.SDK_VERSION,(0,Vi._registerComponent)(new Ws.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new Qn(new w3(t.getProvider("auth-internal")),new C3(t.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ne(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new df(f.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Vi.registerVersion)(JF,"3.8.4",n),(0,Vi.registerVersion)(JF,"3.8.4","esm2017")}();class fE{constructor(e){this._delegate=e}static fromBase64String(e){return m2(),new fE(Yl.fromBase64String(e))}static fromUint8Array(e){return g2(),new fE(Yl.fromUint8Array(e))}toBase64(){return m2(),this._delegate.toBase64()}toUint8Array(){return g2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function FP(n){return function yW(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class vW{enableIndexedDbPersistence(e,t){return function b6(n,e){ZV(n=sn(n,Qn));const t=Or(n),r=n._freezeSettings(),i=new gP;return WV(t,i,new xV(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function T6(n){ZV(n=sn(n,Qn));const e=Or(n),t=n._freezeSettings(),r=new gP;return WV(e,r,new u6(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function D6(n){if(n._initialized&&!n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new di;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!vu.C())return Promise.resolve();const i=r+"main";yield vu.delete(i)}),function(r){return t.apply(this,arguments)})(uN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof df||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&vg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function HV(n,e,t,r={}){var i;const a=(n=sn(n,sE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&vg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=bi.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ne(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new bi(_)}n._authCredentials=new v3(new eL(l,f))}}(this._delegate,e,t,r)}enableNetwork(){return function A6(n){return function f6(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield PV(n),t=yield EP(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i.mu.delete(0),rE(i)}(t)}))}(Or(n=sn(n,Qn)))}(this._delegate)}disableNetwork(){return function x6(n){return function p6(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield PV(n),t=yield EP(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(i){const a=Ze(i);a.mu.add(0),yield hy(a),a.pu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Or(n=sn(n,Qn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,UV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function S6(n){return function(e){const t=new di;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function Yz(n,e){return JN.apply(this,arguments)}(yield IP(e),t)})),t.promise}(Or(n=sn(n,Qn)))}(this._delegate)}onSnapshotsInSync(e){return function oW(n,e){return function _6(n,e){const t=new bD(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield vy(n),i=t,Ze(r).vu.add(i),void i.next();var r,i})),()=>{t.Pc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield vy(n),i=t,void Ze(r).vu.delete(i);var r,i}))}}(Or(n=sn(n,Qn)),DP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Iy(this,GV(this._delegate,e))}catch(t){throw Ns(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ca(this,AD(this._delegate,e))}catch(t){throw Ns(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ps(this,function w6(n,e){if(n=sn(n,sE),bP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ki(n,null,(t=e,new vd(ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ns(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function cW(n,e,t){n=sn(n,Qn);const r=Object.assign(Object.assign({},uW),t);return function(i){if(i.maxAttempts<1)throw new Ne(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new di;return i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const _=yield function kV(n){return TD(n).then(e=>e.datastore)}(i);new d6(i.asyncQueue,_,l,a,f).run()})),f.promise}(Or(n),i=>e(new lW(n,i)),r)}(this._delegate,t=>e(new y2(this,t)))}batch(){return Or(this._delegate),new v2(new f2(this._delegate,e=>Ey(this._delegate,e)))}loadBundle(e){return function R6(n,e){const t=Or(n=sn(n,Qn)),r=new I6;return function y6(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return RV(_,w);if(_ instanceof ArrayBuffer)return RV(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new l6(_,l);var _}(t,nE(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function a6(n,e,t){const r=Ze(n);var i;(i=(0,_e.Z)(function*(a,l,f){try{const _=yield l.getMetadata();if(yield function(P,U){const $=Ze(P),le=kr(U.createTime);return $.persistence.runTransaction("hasNewerBundle","readonly",ge=>$.Os.getBundleMetadata(ge,U.id)).then(ge=>!!ge&&ge.createTime.compareTo(le)>=0)}(a.localStore,_))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(P=_).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);f._updateProgress(vV(_));const w=new Bz(_,a.localStore,l.Tt);let C=yield l.yc();for(;C;){const P=yield w.Bu(C);P&&f._updateProgress(P),C=yield l.yc()}const S=yield w.complete();return yield Id(a,S.Uu,void 0),yield function(P,U){const $=Ze(P);return $.persistence.runTransaction("Save bundle","readwrite",le=>$.Os.saveBundleMetadata(le,U))}(a.localStore,_),f._completeWith(S.progress),Promise.resolve(S.qu)}catch(_){return vg("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var P}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield IP(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function M6(n,e){return function v6(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Os.getNamedQuery(a,r))}(yield DD(n),e)}))}(Or(n=sn(n,Qn)),e).then(t=>t?new Ki(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ps(this,t):null)}}class VD extends PP{constructor(e){super(),this.firestore=e}convertBytes(e){return new fE(new Yl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ca.forKey(t,this.firestore,null)}}class y2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new VD(e)}get(e){const t=$g(e);return this._delegate.get(t).then(r=>new pE(this._firestore,new bd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=$g(e);return r?(OP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=$g(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=$g(e);return this._delegate.delete(t),this}}class v2{constructor(e){this._delegate=e}set(e,t,r){const i=$g(e);return r?(OP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=$g(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=$g(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class jg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new hE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=jg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new jg(e,new VD(e),t),i.set(t,a)),a}}jg.INSTANCES=new WeakMap;class Ca{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new VD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ca(t,new Yn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new Ca(t,new Yn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Iy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Iy(this.firestore,GV(this._delegate,e))}catch(t){throw Ns(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof Yn&&qV(this._delegate,e)}set(e,t){t=OP("DocumentReference.set",t);try{return t?c2(this._delegate,e,t):c2(this._delegate,e)}catch(r){throw Ns(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?d2(this._delegate,e):d2(this._delegate,e,t,...r)}catch(i){throw Ns(i,"updateDoc()","DocumentReference.update()")}}delete(){return function iW(n){return Ey(sn(n.firestore,Qn),[new sy(n._key,or.none())])}(this._delegate)}onSnapshot(...e){const t=w2(e),r=E2(e,i=>new pE(this.firestore,new bd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return h2(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function J6(n){n=sn(n,Yn);const e=sn(n.firestore,Qn),t=Or(e),r=new Tf(e);return function g6(n,e){const t=new di;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const f=yield function(_,w){const C=Ze(_);return C.persistence.runTransaction("read document","readonly",S=>C.localDocuments.getDocument(S,w))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Ne(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=gy(f,`Failed to get document '${a} from cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield DD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new bd(e,r,n._key,i,new Bg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function eW(n){n=sn(n,Yn);const e=sn(n.firestore,Qn);return OV(Or(e),n._key,{source:"server"}).then(t=>kP(e,n,t))}(this._delegate):function X6(n){n=sn(n,Yn);const e=sn(n.firestore,Qn);return OV(Or(e),n._key).then(t=>kP(e,n,t))}(this._delegate),t.then(r=>new pE(this.firestore,new bd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ca(this.firestore,this._delegate.withConverter(e?jg.getInstance(this.firestore,e):null))}}function Ns(n,e,t){return n.message=n.message.replace(e,t),n}function w2(n){for(const e of n)if("object"==typeof e&&!FP(e))return e;return{}}function E2(n,e){var t,r;let i;return i=FP(n[0])?n[0]:FP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class pE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ca(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return l2(this._delegate,e._delegate)}}class gE extends pE{data(e){const t=this._delegate.data(e);return function _3(n,e){n||Je()}(void 0!==t),t}}class Ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new VD(e)}where(e,t,r){try{return new Ps(this.firestore,Cf(this._delegate,function j6(n,e,t){const r=e,i=kD("where",n);return dE._create(i,r,t)}(e,t,r)))}catch(i){throw Ns(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ps(this.firestore,Cf(this._delegate,function $6(n,e="asc"){const t=e,r=kD("orderBy",n);return NP._create(r,t)}(e,t)))}catch(r){throw Ns(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ps(this.firestore,Cf(this._delegate,function H6(n){return jV("limit",n),OD._create("limit",n,"F")}(e)))}catch(t){throw Ns(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ps(this.firestore,Cf(this._delegate,function G6(n){return jV("limitToLast",n),OD._create("limitToLast",n,"L")}(e)))}catch(t){throw Ns(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ps(this.firestore,Cf(this._delegate,function q6(...n){return FD._create("startAt",n,!0)}(...e)))}catch(t){throw Ns(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ps(this.firestore,Cf(this._delegate,function z6(...n){return FD._create("startAfter",n,!1)}(...e)))}catch(t){throw Ns(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ps(this.firestore,Cf(this._delegate,function W6(...n){return LD._create("endBefore",n,!1)}(...e)))}catch(t){throw Ns(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ps(this.firestore,Cf(this._delegate,function Z6(...n){return LD._create("endAt",n,!0)}(...e)))}catch(t){throw Ns(t,"endAt()","Query.endAt()")}}isEqual(e){return TP(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function nW(n){n=sn(n,Ki);const e=sn(n.firestore,Qn),t=Or(e),r=new Tf(e);return function m6(n,e){const t=new di;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const f=yield yD(i,a,!0),_=new IV(a,f.Yi),w=_.Hu(f.documents),C=_.applyChanges(w,!1);l.resolve(C.snapshot)}catch(f){const _=gy(f,`Failed to execute query '${a} against cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield DD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new bf(e,r,n,i))}(this._delegate):"server"===e?.source?function rW(n){n=sn(n,Ki);const e=sn(n.firestore,Qn),t=Or(e),r=new Tf(e);return FV(t,n._query,{source:"server"}).then(i=>new bf(e,r,n,i))}(this._delegate):function tW(n){n=sn(n,Ki);const e=sn(n.firestore,Qn),t=Or(e),r=new Tf(e);return n2(n._query),FV(t,n._query).then(i=>new bf(e,r,n,i))}(this._delegate),t.then(r=>new LP(this.firestore,new bf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=w2(e),r=E2(e,i=>new LP(this.firestore,new bf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return h2(this._delegate,t,r)}withConverter(e){return new Ps(this.firestore,this._delegate.withConverter(e?jg.getInstance(this.firestore,e):null))}}class EW{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new gE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class LP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new EW(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new gE(this._firestore,r))})}isEqual(e){return l2(this._delegate,e._delegate)}}class Iy extends Ps{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ca(this.firestore,e):null}doc(e){try{return new Ca(this.firestore,void 0===e?AD(this._delegate):AD(this._delegate,e))}catch(t){throw Ns(t,"doc()","CollectionReference.doc()")}}add(e){return function sW(n,e){const t=sn(n.firestore,Qn),r=AD(n),i=UD(n.converter,e);return Ey(t,[MD(Ug(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,or.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ca(this.firestore,t))}isEqual(e){return qV(this._delegate,e._delegate)}withConverter(e){return new Iy(this.firestore,this._delegate.withConverter(e?jg.getInstance(this.firestore,e):null))}}function $g(n){return sn(n,Yn)}class UP{constructor(...e){this._delegate=new Cd(...e)}static documentId(){return new UP(Er.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof Cd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function hW(){return new SP("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hg(e)}static delete(){const e=function dW(){return new aE("deleteField")}();return e._methodName="FieldValue.delete",new Hg(e)}static arrayUnion(...e){const t=function fW(...n){return new F6("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Hg(t)}static arrayRemove(...e){const t=function pW(...n){return new L6("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Hg(t)}static increment(e){const t=function gW(n){return new U6("increment",n)}(e);return t._methodName="FieldValue.increment",new Hg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const IW={Firestore:_2,GeoPoint:xD,Timestamp:sr,Blob:fE,Transaction:y2,WriteBatch:v2,DocumentReference:Ca,DocumentSnapshot:pE,Query:Ps,QueryDocumentSnapshot:gE,QuerySnapshot:LP,CollectionReference:Iy,FieldPath:UP,FieldValue:Hg,setLogLevel:function wW(n){!function m3(n){uf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function I2(n,e){return function TW(n,e=Ml.z){return new qn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function VP(n,e){return I2(n,e).pipe((0,D.U)(t=>({payload:t,type:"query"})))}function BD(n,e){return VP(n,e).pipe(Mc(void 0),UR(),(0,D.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const _=i.find(C=>C.doc.ref.isEqual(l.ref)),w=t?.payload.docs.find(C=>C.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function C2(n,e,t){return BD(n,t).pipe(Eo((r,i)=>function SW(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function AW(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return BP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return BP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return BP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Gp(),(0,D.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function BP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function b2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function bW(n){(function CW(n,e){n.INTERNAL.registerComponent(new Ws.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},IW)))})(n,(e,t)=>new _2(e,t,new vW)),n.registerVersion("@firebase/firestore-compat","0.3.4")}(Xm.Z);class T2{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=BD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,D.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Mc(void 0),UR(),ws(([r,i])=>i.length>0||!r),(0,D.U)(([r,i])=>i),an.iC)}auditTrail(e){return this.stateChanges(e).pipe(Eo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=b2(e);return C2(this.query,t,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(e={}){return VP(this.query,this.afs.schedulers.outsideAngular).pipe((0,D.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),an.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(an.iC)}add(e){return this.ref.add(e)}doc(e){return new D2(this.ref.doc(e),this.afs)}}class D2{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=x2(r,t);return new T2(i,a,this.afs)}snapshotChanges(){return function DW(n,e){return I2(n,e).pipe(Mc(void 0),UR(),(0,D.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,D.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,en.D)(this.ref.get(e)).pipe(an.iC)}}class xW{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?BD(this.query,this.afs.schedulers.outsideAngular).pipe((0,D.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ws(t=>t.length>0),an.iC):BD(this.query,this.afs.schedulers.outsideAngular).pipe(an.iC)}auditTrail(e){return this.stateChanges(e).pipe(Eo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=b2(e);return C2(this.query,t,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(e={}){return VP(this.query,this.afs.schedulers.outsideAngular).pipe((0,D.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),an.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(an.iC)}}const S2=new c.OlP("angularfire2.enableFirestorePersistence"),A2=new c.OlP("angularfire2.firestore.persistenceSettings"),RW=new c.OlP("angularfire2.firestore.settings"),MW=new c.OlP("angularfire2.firestore.use-emulator");function x2(n,e=(t=>t)){return{query:e(n),ref:n}}let NW=(()=>{class n{constructor(t,r,i,a,l,f,_,w,C,S,P,U,$,le,ge,st,ct){this.schedulers=_;const Xe=(0,vr.on)(t,f,r),ot=C;S&&TR(Xe,f,P,$,le,ge,U,st),[this.firestore,this.persistenceEnabled$]=(0,vr.cc)(`${Xe.name}.firestore`,"AngularFirestore",Xe.name,()=>{const St=f.runOutsideAngular(()=>Xe.firestore());if(a&&St.settings(a),ot&&St.useEmulator(...ot),i&&!Iu(l)){const Lt=()=>{try{return(0,en.D)(St.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(fr){return typeof console<"u"&&console.warn(fr),Ye(!1)}};return[St,f.runOutsideAngular(Lt)]}return[St,Ye(!1)]},[a,ot,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=x2(i,r),f=this.schedulers.ngZone.run(()=>a);return new T2(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new xW(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new D2(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(vr.Dh),c.LFG(vr.xv,8),c.LFG(S2,8),c.LFG(RW,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(an.HU),c.LFG(A2,8),c.LFG(MW,8),c.LFG(dT,8),c.LFG(vR,8),c.LFG(wR,8),c.LFG(ER,8),c.LFG(IR,8),c.LFG(CR,8),c.LFG(bR,8),c.LFG(J0,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),PW=(()=>{class n{constructor(){cT.Z.registerVersion("angularfire",an.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:S2,useValue:!0},{provide:A2,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[NW]}),n})();class Cy{}Cy.\u0275fac=function(e){return new(e||Cy)},Cy.\u0275mod=c.oAB({type:Cy,bootstrap:[iw]}),Cy.\u0275inj=c.cJS({imports:[$d,j_,fg,vr.hO.initializeApp({apiKey:"AIzaSyDQniFv0MVk-P6av15M29jGCCthbXwk_DE",authDomain:"infoblink-8a750.firebaseapp.com",databaseURL:"https://infoblink-8a750-default-rtdb.firebaseio.com",projectId:"infoblink-8a750",storageBucket:"infoblink-8a750.appspot.com",messagingSenderId:"847119905541",appId:"1:847119905541:web:50896fbc5d85a5338e3d6c",measurementId:"G-MD5VB7MNDS"}),Hj,PW,fG,r$]}),Fi().bootstrapModule(Cy).catch(n=>console.error(n))},9751:(at,Te,F)=>{F.d(Te,{y:()=>fe});var c=F(930),J=F(727),O=F(8822),ae=F(9635),oe=F(2416),ne=F(576),me=F(2806);let fe=(()=>{class Y{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const He=new Y;return He.source=this,He.operator=Ae,He}subscribe(Ae,He,nt){const pe=function q(Y){return Y&&Y instanceof c.Lv||function H(Y){return Y&&(0,ne.m)(Y.next)&&(0,ne.m)(Y.error)&&(0,ne.m)(Y.complete)}(Y)&&(0,J.Nn)(Y)}(Ae)?Ae:new c.Hp(Ae,He,nt);return(0,me.x)(()=>{const{operator:De,source:Se}=this;pe.add(De?De.call(pe,Se):Se?this._subscribe(pe):this._trySubscribe(pe))}),pe}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(He){Ae.error(He)}}forEach(Ae,He){return new(He=de(He))((nt,pe)=>{const De=new c.Hp({next:Se=>{try{Ae(Se)}catch(Oe){pe(Oe),De.unsubscribe()}},error:pe,complete:nt});this.subscribe(De)})}_subscribe(Ae){var He;return null===(He=this.source)||void 0===He?void 0:He.subscribe(Ae)}[O.L](){return this}pipe(...Ae){return(0,ae.U)(Ae)(this)}toPromise(Ae){return new(Ae=de(Ae))((He,nt)=>{let pe;this.subscribe(De=>pe=De,De=>nt(De),()=>He(pe))})}}return Y.create=Be=>new Y(Be),Y})();function de(Y){var Be;return null!==(Be=Y??oe.v.Promise)&&void 0!==Be?Be:Promise}},7579:(at,Te,F)=>{F.d(Te,{x:()=>me});var c=F(9751),J=F(727);const ae=(0,F(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=F(8737),ne=F(2806);let me=(()=>{class de extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const Y=new fe(this,this);return Y.operator=q,Y}_throwIfClosed(){if(this.closed)throw new ae}next(q){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(q)}})}error(q){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:Y}=this;for(;Y.length;)Y.shift().error(q)}})}complete(){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:Y,isStopped:Be,observers:Ae}=this;return Y||Be?J.Lc:(this.currentObservers=null,Ae.push(q),new J.w0(()=>{this.currentObservers=null,(0,oe.P)(Ae,q)}))}_checkFinalizedStatuses(q){const{hasError:Y,thrownError:Be,isStopped:Ae}=this;Y?q.error(Be):Ae&&q.complete()}asObservable(){const q=new c.y;return q.source=this,q}}return de.create=(H,q)=>new fe(H,q),de})();class fe extends me{constructor(H,q){super(),this.destination=H,this.source=q}next(H){var q,Y;null===(Y=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===Y||Y.call(q,H)}error(H){var q,Y;null===(Y=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===Y||Y.call(q,H)}complete(){var H,q;null===(q=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===q||q.call(H)}_subscribe(H){var q,Y;return null!==(Y=null===(q=this.source)||void 0===q?void 0:q.subscribe(H))&&void 0!==Y?Y:J.Lc}}},930:(at,Te,F)=>{F.d(Te,{Hp:()=>nt,Lv:()=>Y});var c=F(576),J=F(727),O=F(2416),ae=F(7849),oe=F(5032);const ne=de("C",void 0,void 0);function de(Re,Ce,xe){return{kind:Re,value:Ce,error:xe}}var H=F(3410),q=F(2806);class Y extends J.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,J.Nn)(Ce)&&Ce.add(this)):this.destination=Oe}static create(Ce,xe,Ve){return new nt(Ce,xe,Ve)}next(Ce){this.isStopped?Se(function fe(Re){return de("N",Re,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?Se(function me(Re){return de("E",void 0,Re)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?Se(ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Ae(Re,Ce){return Be.call(Re,Ce)}class He{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:xe}=this;if(xe.next)try{xe.next(Ce)}catch(Ve){pe(Ve)}}error(Ce){const{partialObserver:xe}=this;if(xe.error)try{xe.error(Ce)}catch(Ve){pe(Ve)}else pe(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(xe){pe(xe)}}}class nt extends Y{constructor(Ce,xe,Ve){let Pe;if(super(),(0,c.m)(Ce)||!Ce)Pe={next:Ce??void 0,error:xe??void 0,complete:Ve??void 0};else{let G;this&&O.v.useDeprecatedNextContext?(G=Object.create(Ce),G.unsubscribe=()=>this.unsubscribe(),Pe={next:Ce.next&&Ae(Ce.next,G),error:Ce.error&&Ae(Ce.error,G),complete:Ce.complete&&Ae(Ce.complete,G)}):Pe=Ce}this.destination=new He(Pe)}}function pe(Re){O.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Re):(0,ae.h)(Re)}function Se(Re,Ce){const{onStoppedNotification:xe}=O.v;xe&&H.z.setTimeout(()=>xe(Re,Ce))}const Oe={closed:!0,next:oe.Z,error:function De(Re){throw Re},complete:oe.Z}},727:(at,Te,F)=>{F.d(Te,{Lc:()=>ne,w0:()=>oe,Nn:()=>me});var c=F(576);const O=(0,F(3888).d)(de=>function(q){de(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((Y,Be)=>`${Be+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var ae=F(8737);class oe{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Ae of q)Ae.remove(this);else q.remove(this);const{initialTeardown:Y}=this;if((0,c.m)(Y))try{Y()}catch(Ae){H=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Ae of Be)try{fe(Ae)}catch(He){H=H??[],He instanceof O?H=[...H,...He.errors]:H.push(He)}}if(H)throw new O(H)}}add(H){var q;if(H&&H!==this)if(this.closed)fe(H);else{if(H instanceof oe){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(H)}}_hasParent(H){const{_parentage:q}=this;return q===H||Array.isArray(q)&&q.includes(H)}_addParent(H){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(H),q):q?[q,H]:H}_removeParent(H){const{_parentage:q}=this;q===H?this._parentage=null:Array.isArray(q)&&(0,ae.P)(q,H)}remove(H){const{_finalizers:q}=this;q&&(0,ae.P)(q,H),H instanceof oe&&H._removeParent(this)}}oe.EMPTY=(()=>{const de=new oe;return de.closed=!0,de})();const ne=oe.EMPTY;function me(de){return de instanceof oe||de&&"closed"in de&&(0,c.m)(de.remove)&&(0,c.m)(de.add)&&(0,c.m)(de.unsubscribe)}function fe(de){(0,c.m)(de)?de():de.unsubscribe()}},2416:(at,Te,F)=>{F.d(Te,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,Te,F)=>{F.d(Te,{E:()=>J});const J=new(F(9751).y)(oe=>oe.complete())},8996:(at,Te,F)=>{F.d(Te,{D:()=>Ce});var c=F(8421),J=F(5363),O=F(9468),ne=F(9751),fe=F(2202),de=F(576),H=F(9672);function Y(xe,Ve){if(!xe)throw new Error("Iterable cannot be null");return new ne.y(Pe=>{(0,H.f)(Pe,Ve,()=>{const G=xe[Symbol.asyncIterator]();(0,H.f)(Pe,Ve,()=>{G.next().then(Ie=>{Ie.done?Pe.complete():Pe.next(Ie.value)})},0,!0)})})}var Be=F(3670),Ae=F(8239),He=F(1144),nt=F(6495),pe=F(2206),De=F(4532),Se=F(3260);function Ce(xe,Ve){return Ve?function Re(xe,Ve){if(null!=xe){if((0,Be.c)(xe))return function ae(xe,Ve){return(0,c.Xf)(xe).pipe((0,O.R)(Ve),(0,J.Q)(Ve))}(xe,Ve);if((0,He.z)(xe))return function me(xe,Ve){return new ne.y(Pe=>{let G=0;return Ve.schedule(function(){G===xe.length?Pe.complete():(Pe.next(xe[G++]),Pe.closed||this.schedule())})})}(xe,Ve);if((0,Ae.t)(xe))return function oe(xe,Ve){return(0,c.Xf)(xe).pipe((0,O.R)(Ve),(0,J.Q)(Ve))}(xe,Ve);if((0,pe.D)(xe))return Y(xe,Ve);if((0,nt.T)(xe))return function q(xe,Ve){return new ne.y(Pe=>{let G;return(0,H.f)(Pe,Ve,()=>{G=xe[fe.h](),(0,H.f)(Pe,Ve,()=>{let Ie,Z;try{({value:Ie,done:Z}=G.next())}catch(X){return void Pe.error(X)}Z?Pe.complete():Pe.next(Ie)},0,!0)}),()=>(0,de.m)(G?.return)&&G.return()})}(xe,Ve);if((0,Se.L)(xe))return function Oe(xe,Ve){return Y((0,Se.Q)(xe),Ve)}(xe,Ve)}throw(0,De.z)(xe)}(xe,Ve):(0,c.Xf)(xe)}},8421:(at,Te,F)=>{F.d(Te,{Xf:()=>Be});var c=F(655),J=F(1144),O=F(8239),ae=F(9751),oe=F(3670),ne=F(2206),me=F(4532),fe=F(6495),de=F(3260),H=F(576),q=F(7849),Y=F(8822);function Be(Re){if(Re instanceof ae.y)return Re;if(null!=Re){if((0,oe.c)(Re))return function Ae(Re){return new ae.y(Ce=>{const xe=Re[Y.L]();if((0,H.m)(xe.subscribe))return xe.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,J.z)(Re))return function He(Re){return new ae.y(Ce=>{for(let xe=0;xe<Re.length&&!Ce.closed;xe++)Ce.next(Re[xe]);Ce.complete()})}(Re);if((0,O.t)(Re))return function nt(Re){return new ae.y(Ce=>{Re.then(xe=>{Ce.closed||(Ce.next(xe),Ce.complete())},xe=>Ce.error(xe)).then(null,q.h)})}(Re);if((0,ne.D)(Re))return De(Re);if((0,fe.T)(Re))return function pe(Re){return new ae.y(Ce=>{for(const xe of Re)if(Ce.next(xe),Ce.closed)return;Ce.complete()})}(Re);if((0,de.L)(Re))return function Se(Re){return De((0,de.Q)(Re))}(Re)}throw(0,me.z)(Re)}function De(Re){return new ae.y(Ce=>{(function Oe(Re,Ce){var xe,Ve,Pe,G;return(0,c.mG)(this,void 0,void 0,function*(){try{for(xe=(0,c.KL)(Re);!(Ve=yield xe.next()).done;)if(Ce.next(Ve.value),Ce.closed)return}catch(Ie){Pe={error:Ie}}finally{try{Ve&&!Ve.done&&(G=xe.return)&&(yield G.call(xe))}finally{if(Pe)throw Pe.error}}Ce.complete()})})(Re,Ce).catch(xe=>Ce.error(xe))})}},6451:(at,Te,F)=>{F.d(Te,{T:()=>ne});var c=F(8189),J=F(8421),O=F(515),ae=F(7669),oe=F(8996);function ne(...me){const fe=(0,ae.yG)(me),de=(0,ae._6)(me,1/0),H=me;return H.length?1===H.length?(0,J.Xf)(H[0]):(0,c.J)(de)((0,oe.D)(H,fe)):O.E}},5403:(at,Te,F)=>{F.d(Te,{x:()=>J});var c=F(930);function J(ae,oe,ne,me,fe){return new O(ae,oe,ne,me,fe)}class O extends c.Lv{constructor(oe,ne,me,fe,de,H){super(oe),this.onFinalize=de,this.shouldUnsubscribe=H,this._next=ne?function(q){try{ne(q)}catch(Y){oe.error(Y)}}:super._next,this._error=fe?function(q){try{fe(q)}catch(Y){oe.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(q){oe.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ne}=this;super.unsubscribe(),!ne&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(at,Te,F)=>{F.d(Te,{U:()=>O});var c=F(4482),J=F(5403);function O(ae,oe){return(0,c.e)((ne,me)=>{let fe=0;ne.subscribe((0,J.x)(me,de=>{me.next(ae.call(oe,de,fe++))}))})}},8189:(at,Te,F)=>{F.d(Te,{J:()=>O});var c=F(5577),J=F(4671);function O(ae=1/0){return(0,c.z)(J.y,ae)}},5577:(at,Te,F)=>{F.d(Te,{z:()=>fe});var c=F(4004),J=F(8421),O=F(4482),ae=F(9672),oe=F(5403),me=F(576);function fe(de,H,q=1/0){return(0,me.m)(H)?fe((Y,Be)=>(0,c.U)((Ae,He)=>H(Y,Ae,Be,He))((0,J.Xf)(de(Y,Be))),q):("number"==typeof H&&(q=H),(0,O.e)((Y,Be)=>function ne(de,H,q,Y,Be,Ae,He,nt){const pe=[];let De=0,Se=0,Oe=!1;const Re=()=>{Oe&&!pe.length&&!De&&H.complete()},Ce=Ve=>De<Y?xe(Ve):pe.push(Ve),xe=Ve=>{Ae&&H.next(Ve),De++;let Pe=!1;(0,J.Xf)(q(Ve,Se++)).subscribe((0,oe.x)(H,G=>{Be?.(G),Ae?Ce(G):H.next(G)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(De--;pe.length&&De<Y;){const G=pe.shift();He?(0,ae.f)(H,He,()=>xe(G)):xe(G)}Re()}catch(G){H.error(G)}}))};return de.subscribe((0,oe.x)(H,Ce,()=>{Oe=!0,Re()})),()=>{nt?.()}}(Y,Be,de,q)))}},5363:(at,Te,F)=>{F.d(Te,{Q:()=>ae});var c=F(9672),J=F(4482),O=F(5403);function ae(oe,ne=0){return(0,J.e)((me,fe)=>{me.subscribe((0,O.x)(fe,de=>(0,c.f)(fe,oe,()=>fe.next(de),ne),()=>(0,c.f)(fe,oe,()=>fe.complete(),ne),de=>(0,c.f)(fe,oe,()=>fe.error(de),ne)))})}},3099:(at,Te,F)=>{F.d(Te,{B:()=>oe});var c=F(8421),J=F(7579),O=F(930),ae=F(4482);function oe(me={}){const{connector:fe=(()=>new J.x),resetOnError:de=!0,resetOnComplete:H=!0,resetOnRefCountZero:q=!0}=me;return Y=>{let Be,Ae,He,nt=0,pe=!1,De=!1;const Se=()=>{Ae?.unsubscribe(),Ae=void 0},Oe=()=>{Se(),Be=He=void 0,pe=De=!1},Re=()=>{const Ce=Be;Oe(),Ce?.unsubscribe()};return(0,ae.e)((Ce,xe)=>{nt++,!De&&!pe&&Se();const Ve=He=He??fe();xe.add(()=>{nt--,0===nt&&!De&&!pe&&(Ae=ne(Re,q))}),Ve.subscribe(xe),!Be&&nt>0&&(Be=new O.Hp({next:Pe=>Ve.next(Pe),error:Pe=>{De=!0,Se(),Ae=ne(Oe,de,Pe),Ve.error(Pe)},complete:()=>{pe=!0,Se(),Ae=ne(Oe,H),Ve.complete()}}),(0,c.Xf)(Ce).subscribe(Be))})(Y)}}function ne(me,fe,...de){if(!0===fe)return void me();if(!1===fe)return;const H=new O.Hp({next:()=>{H.unsubscribe(),me()}});return(0,c.Xf)(fe(...de)).subscribe(H)}},9468:(at,Te,F)=>{F.d(Te,{R:()=>J});var c=F(4482);function J(O,ae=0){return(0,c.e)((oe,ne)=>{ne.add(O.schedule(()=>oe.subscribe(ne),ae))})}},8505:(at,Te,F)=>{F.d(Te,{b:()=>oe});var c=F(576),J=F(4482),O=F(5403),ae=F(4671);function oe(ne,me,fe){const de=(0,c.m)(ne)||me||fe?{next:ne,error:me,complete:fe}:ne;return de?(0,J.e)((H,q)=>{var Y;null===(Y=de.subscribe)||void 0===Y||Y.call(de);let Be=!0;H.subscribe((0,O.x)(q,Ae=>{var He;null===(He=de.next)||void 0===He||He.call(de,Ae),q.next(Ae)},()=>{var Ae;Be=!1,null===(Ae=de.complete)||void 0===Ae||Ae.call(de),q.complete()},Ae=>{var He;Be=!1,null===(He=de.error)||void 0===He||He.call(de,Ae),q.error(Ae)},()=>{var Ae,He;Be&&(null===(Ae=de.unsubscribe)||void 0===Ae||Ae.call(de)),null===(He=de.finalize)||void 0===He||He.call(de)}))}):ae.y}},4408:(at,Te,F)=>{F.d(Te,{o:()=>oe});var c=F(727);class J extends c.w0{constructor(me,fe){super()}schedule(me,fe=0){return this}}const O={setInterval(ne,me,...fe){const{delegate:de}=O;return de?.setInterval?de.setInterval(ne,me,...fe):setInterval(ne,me,...fe)},clearInterval(ne){const{delegate:me}=O;return(me?.clearInterval||clearInterval)(ne)},delegate:void 0};var ae=F(8737);class oe extends J{constructor(me,fe){super(me,fe),this.scheduler=me,this.work=fe,this.pending=!1}schedule(me,fe=0){var de;if(this.closed)return this;this.state=me;const H=this.id,q=this.scheduler;return null!=H&&(this.id=this.recycleAsyncId(q,H,fe)),this.pending=!0,this.delay=fe,this.id=null!==(de=this.id)&&void 0!==de?de:this.requestAsyncId(q,this.id,fe),this}requestAsyncId(me,fe,de=0){return O.setInterval(me.flush.bind(me,this),de)}recycleAsyncId(me,fe,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return fe;null!=fe&&O.clearInterval(fe)}execute(me,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(me,fe);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,fe){let H,de=!1;try{this.work(me)}catch(q){de=!0,H=q||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:me,scheduler:fe}=this,{actions:de}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(de,this),null!=me&&(this.id=this.recycleAsyncId(fe,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,Te,F)=>{F.d(Te,{v:()=>O});var c=F(6063);class J{constructor(oe,ne=J.now){this.schedulerActionCtor=oe,this.now=ne}schedule(oe,ne=0,me){return new this.schedulerActionCtor(this,oe).schedule(me,ne)}}J.now=c.l.now;class O extends J{constructor(oe,ne=J.now){super(oe,ne),this.actions=[],this._active=!1}flush(oe){const{actions:ne}=this;if(this._active)return void ne.push(oe);let me;this._active=!0;do{if(me=oe.execute(oe.state,oe.delay))break}while(oe=ne.shift());if(this._active=!1,me){for(;oe=ne.shift();)oe.unsubscribe();throw me}}}},4986:(at,Te,F)=>{F.d(Te,{z:()=>O});var c=F(4408);const O=new(F(7565).v)(c.o)},6063:(at,Te,F)=>{F.d(Te,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(at,Te,F)=>{F.d(Te,{z:()=>c});const c={setTimeout(J,O,...ae){const{delegate:oe}=c;return oe?.setTimeout?oe.setTimeout(J,O,...ae):setTimeout(J,O,...ae)},clearTimeout(J){const{delegate:O}=c;return(O?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(at,Te,F)=>{F.d(Te,{h:()=>J});const J=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,Te,F)=>{F.d(Te,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,Te,F)=>{F.d(Te,{_6:()=>ne,jO:()=>ae,yG:()=>oe});var c=F(576);function O(me){return me[me.length-1]}function ae(me){return(0,c.m)(O(me))?me.pop():void 0}function oe(me){return function J(me){return me&&(0,c.m)(me.schedule)}(O(me))?me.pop():void 0}function ne(me,fe){return"number"==typeof O(me)?me.pop():fe}},8737:(at,Te,F)=>{function c(J,O){if(J){const ae=J.indexOf(O);0<=ae&&J.splice(ae,1)}}F.d(Te,{P:()=>c})},3888:(at,Te,F)=>{function c(J){const ae=J(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}F.d(Te,{d:()=>c})},2806:(at,Te,F)=>{F.d(Te,{O:()=>ae,x:()=>O});var c=F(2416);let J=null;function O(oe){if(c.v.useDeprecatedSynchronousErrorHandling){const ne=!J;if(ne&&(J={errorThrown:!1,error:null}),oe(),ne){const{errorThrown:me,error:fe}=J;if(J=null,me)throw fe}}else oe()}function ae(oe){c.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=oe)}},9672:(at,Te,F)=>{function c(J,O,ae,oe=0,ne=!1){const me=O.schedule(function(){ae(),ne?J.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(J.add(me),!ne)return me}F.d(Te,{f:()=>c})},4671:(at,Te,F)=>{function c(J){return J}F.d(Te,{y:()=>c})},1144:(at,Te,F)=>{F.d(Te,{z:()=>c});const c=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(at,Te,F)=>{F.d(Te,{D:()=>J});var c=F(576);function J(O){return Symbol.asyncIterator&&(0,c.m)(O?.[Symbol.asyncIterator])}},576:(at,Te,F)=>{function c(J){return"function"==typeof J}F.d(Te,{m:()=>c})},3670:(at,Te,F)=>{F.d(Te,{c:()=>O});var c=F(8822),J=F(576);function O(ae){return(0,J.m)(ae[c.L])}},6495:(at,Te,F)=>{F.d(Te,{T:()=>O});var c=F(2202),J=F(576);function O(ae){return(0,J.m)(ae?.[c.h])}},8239:(at,Te,F)=>{F.d(Te,{t:()=>J});var c=F(576);function J(O){return(0,c.m)(O?.then)}},3260:(at,Te,F)=>{F.d(Te,{L:()=>ae,Q:()=>O});var c=F(655),J=F(576);function O(oe){return(0,c.FC)(this,arguments,function*(){const me=oe.getReader();try{for(;;){const{value:fe,done:de}=yield(0,c.qq)(me.read());if(de)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(fe)}}finally{me.releaseLock()}})}function ae(oe){return(0,J.m)(oe?.getReader)}},4482:(at,Te,F)=>{F.d(Te,{A:()=>J,e:()=>O});var c=F(576);function J(ae){return(0,c.m)(ae?.lift)}function O(ae){return oe=>{if(J(oe))return oe.lift(function(ne){try{return ae(ne,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(at,Te,F)=>{function c(){}F.d(Te,{Z:()=>c})},9635:(at,Te,F)=>{F.d(Te,{U:()=>O,z:()=>J});var c=F(4671);function J(...ae){return O(ae)}function O(ae){return 0===ae.length?c.y:1===ae.length?ae[0]:function(ne){return ae.reduce((me,fe)=>fe(me),ne)}}},7849:(at,Te,F)=>{F.d(Te,{h:()=>O});var c=F(2416),J=F(3410);function O(ae){J.z.setTimeout(()=>{const{onUnhandledError:oe}=c.v;if(!oe)throw ae;oe(ae)})}},4532:(at,Te,F)=>{function c(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Te,{z:()=>c})},655:(at,Te,F)=>{function ae(Z,X){var ie={};for(var re in Z)Object.prototype.hasOwnProperty.call(Z,re)&&X.indexOf(re)<0&&(ie[re]=Z[re]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(re=Object.getOwnPropertySymbols(Z);Le<re.length;Le++)X.indexOf(re[Le])<0&&Object.prototype.propertyIsEnumerable.call(Z,re[Le])&&(ie[re[Le]]=Z[re[Le]])}return ie}function fe(Z,X,ie,re){return new(ie||(ie=Promise))(function(ke,ut){function nn(Ut){try{Nt(re.next(Ut))}catch(_t){ut(_t)}}function pn(Ut){try{Nt(re.throw(Ut))}catch(_t){ut(_t)}}function Nt(Ut){Ut.done?ke(Ut.value):function Le(ke){return ke instanceof ie?ke:new ie(function(ut){ut(ke)})}(Ut.value).then(nn,pn)}Nt((re=re.apply(Z,X||[])).next())})}function pe(Z){return this instanceof pe?(this.v=Z,this):new pe(Z)}function De(Z,X,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,re=ie.apply(Z,X||[]),ke=[];return Le={},ut("next"),ut("throw"),ut("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function ut(Kt){re[Kt]&&(Le[Kt]=function(pr){return new Promise(function(Fr,gt){ke.push([Kt,pr,Fr,gt])>1||nn(Kt,pr)})})}function nn(Kt,pr){try{!function pn(Kt){Kt.value instanceof pe?Promise.resolve(Kt.value.v).then(Nt,Ut):_t(ke[0][2],Kt)}(re[Kt](pr))}catch(Fr){_t(ke[0][3],Fr)}}function Nt(Kt){nn("next",Kt)}function Ut(Kt){nn("throw",Kt)}function _t(Kt,pr){Kt(pr),ke.shift(),ke.length&&nn(ke[0][0],ke[0][1])}}function Oe(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,X=Z[Symbol.asyncIterator];return X?X.call(Z):(Z=function Y(Z){var X="function"==typeof Symbol&&Symbol.iterator,ie=X&&Z[X],re=0;if(ie)return ie.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&re>=Z.length&&(Z=void 0),{value:Z&&Z[re++],done:!Z}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ie={},re("next"),re("throw"),re("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function re(ke){ie[ke]=Z[ke]&&function(ut){return new Promise(function(nn,pn){!function Le(ke,ut,nn,pn){Promise.resolve(pn).then(function(Nt){ke({value:Nt,done:nn})},ut)}(nn,pn,(ut=Z[ke](ut)).done,ut.value)})}}}F.d(Te,{FC:()=>De,KL:()=>Oe,_T:()=>ae,mG:()=>fe,qq:()=>pe})},4650:(at,Te,F)=>{F.d(Te,{$8M:()=>Dc,$WT:()=>$n,$Z:()=>rI,AFp:()=>A0,ALo:()=>tb,AaK:()=>fe,AsE:()=>Qm,BQk:()=>Al,CHM:()=>cc,CRH:()=>d_,CZH:()=>wa,CqO:()=>Xc,D6c:()=>jx,EJc:()=>_x,EiD:()=>HD,EpF:()=>tA,F4k:()=>nA,FYo:()=>Qy,FiY:()=>Ju,GfV:()=>NE,Gpc:()=>q,JOm:()=>yt,JVY:()=>K,JZr:()=>nt,KtG:()=>Pd,L6k:()=>he,LAX:()=>ze,LFG:()=>$e,Lbi:()=>w_,Lck:()=>d0,MAs:()=>Ah,MGl:()=>$m,MMx:()=>n_,NdJ:()=>xh,OlP:()=>Qt,Oqu:()=>Bv,P3R:()=>CE,PXZ:()=>Mb,Q6J:()=>Pp,QGY:()=>Vm,Qsj:()=>eS,R0b:()=>Ks,RDi:()=>bo,Rgc:()=>Ht,SBq:()=>yh,Sil:()=>Ex,Suo:()=>Xp,TTD:()=>Cu,TgZ:()=>Lm,Tol:()=>$I,Udp:()=>Zm,VKq:()=>dn,X6Q:()=>Vl,XFs:()=>lt,Xpm:()=>ba,Xts:()=>jy,Y36:()=>Eh,YKP:()=>lu,YNc:()=>Np,Yjl:()=>Da,Yz7:()=>gt,Z0I:()=>Lr,ZZ4:()=>cg,_Bn:()=>BC,_UZ:()=>Um,_Vd:()=>_h,_c5:()=>P_,_uU:()=>Ym,aQg:()=>Xh,c2e:()=>gx,cJS:()=>cs,cg1:()=>$p,d8E:()=>Gv,dDg:()=>Sb,dqk:()=>xt,eBb:()=>je,eFA:()=>k0,ekj:()=>Fv,eoX:()=>Ab,f3M:()=>Ke,g9A:()=>x0,h0i:()=>Lh,hGG:()=>Wb,hij:()=>Bp,iGM:()=>lb,ifc:()=>mt,ip1:()=>v_,jDz:()=>$C,kL8:()=>fC,lG2:()=>Ta,lqb:()=>Zc,lri:()=>ag,mCW:()=>ca,n5z:()=>Tc,oAB:()=>An,oJD:()=>wE,oxw:()=>Bm,pB0:()=>It,q3G:()=>Wn,q4F:()=>PE,qLn:()=>_p,qOj:()=>Nm,qZA:()=>Yc,qzn:()=>x,rWj:()=>b_,sBO:()=>Nx,s_b:()=>od,soG:()=>E_,tb:()=>Ib,tp0:()=>D,uIk:()=>Sp,vHH:()=>pe,vpe:()=>_a,wAp:()=>Tt,xi3:()=>kl,xp6:()=>vp,ynx:()=>Qc,z2F:()=>lg,z3N:()=>E,zSh:()=>vl,zs3:()=>wl});var c=F(7579),J=F(727),O=F(9751),ae=F(6451),oe=F(3099);function ne(s){for(let o in s)if(s[o]===ne)return o;throw Error("Could not find renamed property on target object.")}function me(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function de(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=ne({__forward_ref__:ne});function q(s){return s.__forward_ref__=q,s.toString=function(){return fe(this())},s}function Y(s){return Be(s)?s():s}function Be(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===q}function Ae(s){return s&&!!s.\u0275providers}const nt="https://g.co/ng/security#xss";class pe extends Error{constructor(o,u){super(function De(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function Se(s){return"string"==typeof s?s:null==s?"":String(s)}function Ve(s,o){throw new pe(-201,!1)}function Ut(s,o){null==s&&function _t(s,o,u,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${u} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function gt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function cs(s){return{providers:s.providers||[],imports:s.imports||[]}}function ar(s){return Ur(s,Vr)||Ur(s,_n)}function Lr(s){return null!==ar(s)}function Ur(s,o){return s.hasOwnProperty(o)?s[o]:null}function fi(s){return s&&(s.hasOwnProperty(Os)||s.hasOwnProperty(Xr))?s[Os]:null}const Vr=ne({\u0275prov:ne}),Os=ne({\u0275inj:ne}),_n=ne({ngInjectableDef:ne}),Xr=ne({ngInjectorDef:ne});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let Fs;function Dn(s){const o=Fs;return Fs=s,o}function br(s,o,u){const d=ar(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&lt.Optional?null:void 0!==o?o:void Ve(fe(s))}const xt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),yn={},kn="__NG_DI_FLAG__",Tr="ngTempTokenPath",Lo=/\n/gm,Yi="__source";let Yt;function Br(s){const o=Yt;return Yt=s,o}function Qi(s,o=lt.Default){if(void 0===Yt)throw new pe(-203,!1);return null===Yt?br(s,void 0,o):Yt.get(s,o&lt.Optional?null:void 0,o)}function $e(s,o=lt.Default){return(function Ai(){return Fs}()||Qi)(Y(s),o)}function Ke(s,o=lt.Default){return $e(s,Ct(o))}function Ct(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Rt(s){const o=[];for(let u=0;u<s.length;u++){const d=Y(s[u]);if(Array.isArray(d)){if(0===d.length)throw new pe(900,!1);let h,g=lt.Default;for(let y=0;y<d.length;y++){const I=d[y],b=Sr(I);"number"==typeof b?-1===b?h=I.token:g|=b:h=I}o.push($e(h,g))}else o.push($e(d))}return o}function Ot(s,o){return s[kn]=o,s.prototype[kn]=o,s}function Sr(s){return s[kn]}function W(s){return{toString:s}.toString()}var ve=(()=>((ve=ve||{})[ve.OnPush=0]="OnPush",ve[ve.Default=1]="Default",ve))(),mt=(()=>{return(s=mt||(mt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",mt;var s})();const tn={},wt=[],Sn=ne({\u0275cmp:ne}),jn=ne({\u0275dir:ne}),Gt=ne({\u0275pipe:ne}),xi=ne({\u0275mod:ne}),Xn=ne({\u0275fac:ne}),no=ne({__NG_ELEMENT_ID__:ne});let Sf=0;function ba(s){return W(()=>{const u=!0===s.standalone,d={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===ve.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||wt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||mt.Emulated,id:"c"+Sf++,styles:s.styles||wt,_:null,setInput:null,schemas:s.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},g=s.dependencies,y=s.features;return h.inputs=Xl(s.inputs,d),h.outputs=Xl(s.outputs),y&&y.forEach(I=>I(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(Ql).filter(Td):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(On).filter(Td):null,h})}function Ql(s){return Xt(s)||Jn(s)}function Td(s){return null!==s}function An(s){return W(()=>({type:s.type,bootstrap:s.bootstrap||wt,declarations:s.declarations||wt,imports:s.imports||wt,exports:s.exports||wt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Xl(s,o){if(null==s)return tn;const u={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),u[h]=d,o&&(o[h]=g)}return u}const Ta=ba;function Da(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Xt(s){return s[Sn]||null}function Jn(s){return s[jn]||null}function On(s){return s[Gt]||null}function $n(s){const o=Xt(s)||Jn(s)||On(s);return null!==o&&o.standalone}function Ar(s,o){const u=s[xi]||null;if(!u&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return u}function ei(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ni(s){return Array.isArray(s)&&!0===s[1]}function Sa(s){return 0!=(4&s.flags)}function Pi(s){return s.componentOffset>-1}function tc(s){return 1==(1&s.flags)}function ti(s){return null!==s.template}function Aa(s){return 0!=(256&s[2])}function oo(s,o){return s.hasOwnProperty(Xn)?s[Xn]:null}class ao{constructor(o,u,d){this.previousValue=o,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function Cu(){return Go}function Go(s){return s.type.prototype.ngOnChanges&&(s.setInput=qo),bu}function bu(){const s=Ra(this),o=s?.current;if(o){const u=s.previous;if(u===tn)s.previous=o;else for(let d in o)u[d]=o[d];s.current=null,this.ngOnChanges(o)}}function qo(s,o,u,d){const h=this.declaredInputs[u],g=Ra(s)||function Md(s,o){return s[uo]=o}(s,{previous:tn,current:null}),y=g.current||(g.current={}),I=g.previous,b=I[h];y[h]=new ao(b&&b.currentValue,o,I===tn),s[d]=o}Cu.ngInherit=!0;const uo="__ngSimpleChanges__";function Ra(s){return s[uo]||null}function Fn(s){for(;Array.isArray(s);)s=s[0];return s}function lo(s,o){return Fn(o[s])}function Gn(s,o){return Fn(o[s.index])}function Zo(s,o){return s.data[o]}function co(s,o){return s[o]}function ur(s,o){const u=o[s];return ei(u)?u:u[0]}function Ko(s){return 64==(64&s[2])}function ps(s,o){return null==o?null:s[o]}function Na(s){s[18]=0}function Pa(s,o){s[5]+=o;let u=s,d=s[3];for(;null!==d&&(1===o&&1===u[5]||-1===o&&0===u[5]);)d[5]+=o,u=d,d=d[3]}const At={lFrame:by(null),bindingsEnabled:!0};function Ru(){return At.bindingsEnabled}function ye(){return At.lFrame.lView}function Jt(){return At.lFrame.tView}function cc(s){return At.lFrame.contextLView=s,s[8]}function Pd(s){return At.lFrame.contextLView=null,s}function gr(){let s=ka();for(;null!==s&&64===s.type;)s=s.parent;return s}function ka(){return At.lFrame.currentTNode}function ri(s,o){const u=At.lFrame;u.currentTNode=s,u.isParent=o}function Nu(){return At.lFrame.isParent}function Pu(){At.lFrame.isParent=!1}function er(){const s=At.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function ho(){return At.lFrame.bindingIndex++}function es(s){const o=At.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function Fd(s,o){const u=At.lFrame;u.bindingIndex=u.bindingRootIndex=s,fc(o)}function fc(s){At.lFrame.currentDirectiveIndex=s}function gs(s){const o=At.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function Ld(){return At.lFrame.currentQueryIndex}function pc(s){At.lFrame.currentQueryIndex=s}function Ud(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Nf(s,o,u){if(u&lt.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||u&lt.Host||(h=Ud(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const d=At.lFrame=Pf();return d.currentTNode=o,d.lView=s,!0}function Ou(s){const o=Pf(),u=s[1];At.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Pf(){const s=At.lFrame,o=null===s?null:s.child;return null===o?by(s):o}function by(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function zg(){const s=At.lFrame;return At.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const gc=zg;function Wg(){const s=zg();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Gr(){return At.lFrame.selectedIndex}function Yo(s){At.lFrame.selectedIndex=s}function wn(){const s=At.lFrame;return Zo(s.tView,s.selectedIndex)}function Fa(s,o){for(let u=o.directiveStart,d=o.directiveEnd;u<d;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:M}=g;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(u,M)}}function js(s,o,u){_c(s,o,3,u)}function Xo(s,o,u,d){(3&s[2])===u&&_c(s,o,u,d)}function _i(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function _c(s,o,u,d){const g=d??-1,y=o.length-1;let I=0;for(let b=void 0!==d?65535&s[18]:0;b<y;b++)if("number"==typeof o[b+1]){if(I=o[b],null!=d&&I>=d)break}else o[b]<0&&(s[18]+=65536),(I<g||-1==g)&&(Fu(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Fu(s,o,u,d){const h=u[d]<0,g=u[d+1],I=s[h?-u[d]:u[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(I)}finally{}}}else try{g.call(I)}finally{}}class ea{constructor(o,u,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function gn(s,o,u){let d=0;for(;d<u.length;){const h=u[d];if("number"==typeof h){if(0!==h)break;d++;const g=u[d++],y=u[d++],I=u[d++];s.setAttribute(o,y,I,g)}else{const g=h,y=u[++d];po(g)?s.setProperty(o,g,y):s.setAttribute(o,g,y),d++}}return d}function Va(s){return 3===s||4===s||6===s}function po(s){return 64===s.charCodeAt(0)}function ms(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?u=h:0===u||Ba(s,u,h,null,-1===u||2===u?o[++d]:null)}}return s}function Ba(s,o,u,d,h){let g=0,y=s.length;if(-1===o)y=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){y=-1;break}if(I>o){y=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===u){if(null===d)return void(null!==h&&(s[g+1]=h));if(d===s[g+1])return void(s[g+2]=h)}g++,null!==d&&g++,null!==h&&g++}-1!==y&&(s.splice(y,0,o),g=y+1),s.splice(g++,0,u),null!==d&&s.splice(g++,0,d),null!==h&&s.splice(g++,0,h)}function wc(s){return-1!==s}function Uu(s){return 32767&s}function Bu(s,o){let u=function Vu(s){return s>>16}(s),d=o;for(;u>0;)d=d[15],u--;return d}let $s=!0;function go(s){const o=$s;return $s=s,o}let Ec=0;const qr={};function na(s,o){const u=$u(s,o);if(-1!==u)return u;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,yo(d.data,s),yo(o,null),yo(d.blueprint,null));const h=ja(s,o),g=s.injectorIndex;if(wc(h)){const y=Uu(h),I=Bu(h,o),b=I[1].data;for(let A=0;A<8;A++)o[g+A]=I[y+A]|b[y+A]}return o[g+8]=h,g}function yo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function $u(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ja(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,d=null,h=o;for(;null!==h;){if(d=Lf(h),null===d)return-1;if(u++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function Ic(s,o,u){!function ju(s,o,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(no)&&(d=u[no]),null==d&&(d=u[no]=Ec++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function vo(s,o,u){if(u&lt.Optional||void 0!==s)return s;Ve()}function ra(s,o,u,d){if(u&lt.Optional&&void 0===d&&(d=null),!(u&(lt.Self|lt.Host))){const h=s[9],g=Dn(void 0);try{return h?h.get(o,d,u&lt.Optional):br(o,d,u&lt.Optional)}finally{Dn(g)}}return vo(d,0,u)}function Of(s,o,u,d=lt.Default,h){if(null!==s){if(1024&o[2]){const y=function $d(s,o,u,d,h){let g=s,y=o;for(;null!==g&&null!==y&&1024&y[2]&&!(256&y[2]);){const I=_s(g,y,u,d|lt.Self,qr);if(I!==qr)return I;let b=g.parent;if(!b){const A=y[21];if(A){const M=A.get(u,qr,d);if(M!==qr)return M}b=Lf(y),y=y[15]}g=b}return h}(s,o,u,d,qr);if(y!==qr)return y}const g=_s(s,o,u,d,qr);if(g!==qr)return g}return ra(o,u,d,h)}function _s(s,o,u,d,h){const g=function Cc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(no)?s[no]:void 0;return"number"==typeof o?o>=0?255&o:Ff:o}(u);if("function"==typeof g){if(!Nf(o,s,d))return d&lt.Host?vo(h,0,d):ra(o,u,d,h);try{const y=g(d);if(null!=y||d&lt.Optional)return y;Ve()}finally{gc()}}else if("number"==typeof g){let y=null,I=$u(s,o),b=-1,A=d&lt.Host?o[16][6]:null;for((-1===I||d&lt.SkipSelf)&&(b=-1===I?ja(s,o):o[I+8],-1!==b&&Oi(d,!1)?(y=o[1],I=Uu(b),o=Bu(b,o)):I=-1);-1!==I;){const M=o[1];if(bc(g,I,M.data)){const L=$a(I,o,u,y,d,A);if(L!==qr)return L}b=o[I+8],-1!==b&&Oi(d,o[1].data[I+8]===A)&&bc(g,I,o)?(y=M,I=Uu(b),o=Bu(b,o)):I=-1}}return h}function $a(s,o,u,d,h,g){const y=o[1],I=y.data[s+8],M=Hu(I,y,u,null==d?Pi(I)&&$s:d!=y&&0!=(3&I.type),h&lt.Host&&g===I);return null!==M?ki(o,y,M,I):qr}function Hu(s,o,u,d,h){const g=s.providerIndexes,y=o.data,I=1048575&g,b=s.directiveStart,M=g>>20,z=h?I+M:s.directiveEnd;for(let ee=d?I:I+M;ee<z;ee++){const Ee=y[ee];if(ee<b&&u===Ee||ee>=b&&Ee.type===u)return ee}if(h){const ee=y[b];if(ee&&ti(ee)&&ee.type===u)return b}return null}function ki(s,o,u,d){let h=s[u];const g=o.data;if(function yi(s){return s instanceof ea}(h)){const y=h;y.resolving&&function Re(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new pe(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Oe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Se(s)}(g[u]));const I=go(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?Dn(y.injectImpl):null;Nf(s,d,lt.Default);try{h=s[u]=y.factory(void 0,g,s,d),o.firstCreatePass&&u>=d.directiveStart&&function Kg(s,o,u){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(d){const y=Go(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==b&&Dn(b),go(I),y.resolving=!1,gc()}}return h}function bc(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Oi(s,o){return!(s&lt.Self||s&lt.Host&&o)}class Fi{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,d){return Of(this._tNode,this._lView,o,Ct(d),u)}}function Ff(){return new Fi(gr(),ye())}function Tc(s){return W(()=>{const o=s.prototype.constructor,u=o[Xn]||Gu(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const g=h[Xn]||Gu(h);if(g&&g!==u)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Gu(s){return Be(s)?()=>{const o=Gu(Y(s));return o&&o()}:oo(s)}function Lf(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Dc(s){return function jd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const d=u.length;let h=0;for(;h<d;){const g=u[h];if(Va(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<d&&"string"==typeof u[h];)h++;else{if(g===o)return u[h+1];h+=2}}}return null}(gr(),s)}const Ha="__parameters__";function qu(s,o,u){return W(()=>{const d=function Gd(s){return function(...u){if(s){const d=s(...u);for(const h in d)this[h]=d[h]}}}(o);function h(...g){if(this instanceof h)return d.apply(this,g),this;const y=new h(...g);return I.annotation=y,I;function I(b,A,M){const L=b.hasOwnProperty(Ha)?b[Ha]:Object.defineProperty(b,Ha,{value:[]})[Ha];for(;L.length<=M;)L.push(null);return(L[M]=L[M]||[]).push(y),b}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Qt{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=gt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ts(s,o){s.forEach(u=>Array.isArray(u)?ts(u,o):o(u))}function Yu(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Ga(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function zr(s,o,u){let d=lr(s,o);return d>=0?s[1|d]=u:(d=~d,function zd(s,o,u,d){let h=s.length;if(h==o)s.push(u,d);else if(1===h)s.push(d,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=d}}(s,d,o,u)),d}function en(s,o){const u=lr(s,o);if(u>=0)return s[1|u]}function lr(s,o){return function _r(s,o,u){let d=0,h=s.length>>u;for(;h!==d;){const g=d+(h-d>>1),y=s[g<<u];if(o===y)return g<<u;y>o?h=g:d=g+1}return~(h<<u)}(s,o,1)}const Ju=Ot(qu("Optional"),8),D=Ot(qu("SkipSelf"),4);var yt=(()=>((yt=yt||{})[yt.Important=1]="Important",yt[yt.DashCase=2]="DashCase",yt))();const Pc=new Map;let Hs=0;const th="__ngContext__";function Mr(s,o){ei(o)?(s[th]=o[20],function nm(s){Pc.set(s[20],s)}(o)):s[th]=o}function Ya(s,o){return undefined(s,o)}function Qa(s){const o=s[3];return Ni(o)?o[3]:o}function il(s){return im(s[13])}function sl(s){return im(s[4])}function im(s){for(;null!==s&&!Ni(s);)s=s[4];return s}function la(s,o,u,d,h){if(null!=d){let g,y=!1;Ni(d)?g=d:ei(d)&&(y=!0,d=d[0]);const I=Fn(d);0===s&&null!==u?null==h?ll(o,u,I):Ja(o,u,I,h||null,!0):1===s&&null!==u?Ja(o,u,I,h||null,!0):2===s?function eu(s,o,u){const d=Io(s,o);d&&function cl(s,o,u,d){s.removeChild(o,u,d)}(s,d,o,u)}(o,I,y):3===s&&o.destroyNode(I),null!=g&&function Hc(s,o,u,d,h){const g=u[7];g!==Fn(u)&&la(o,s,d,g,h);for(let I=10;I<u.length;I++){const b=u[I];jc(b[1],b,s,o,d,g)}}(o,s,g,u,h)}}function Lc(s,o,u){return s.createElement(o,u)}function Uc(s,o){const u=s[9],d=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Pa(h,-1)),u.splice(d,1)}function rp(s,o){if(s.length<=10)return;const u=10+o,d=s[u];if(d){const h=d[17];null!==h&&h!==s&&Uc(h,d),o>0&&(s[u-1][4]=d[4]);const g=Ga(s,10+o);!function xy(s,o){jc(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const y=g[19];null!==y&&y.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function rh(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&jc(s,o,u,3,null,null),function np(s){let o=s[13];if(!o)return ul(s[1],s);for(;o;){let u=null;if(ei(o))u=o[13];else{const d=o[10];d&&(u=d)}if(!u){for(;o&&!o[4]&&o!==s;)ei(o)&&ul(o[1],o),o=o[3];null===o&&(o=s),ei(o)&&ul(o[1],o),u=o&&o[4]}o=u}}(o)}}function ul(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Xa(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let d=0;d<u.length;d+=2){const h=o[u[d]];if(!(h instanceof ea)){const g=u[d+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const I=h[g[y]],b=g[y+1];try{b.call(I)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function sm(s,o){const u=s.cleanup,d=o[7];let h=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const y=u[g+3];y>=0?d[h=y]():d[h=-y].unsubscribe(),g+=2}else{const y=d[h=u[g+1]];u[g].call(y)}if(null!==d){for(let g=h+1;g<d.length;g++)(0,d[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&Ni(o[3])){u!==o[3]&&Uc(u,o);const d=o[19];null!==d&&d.detachView(s)}!function _E(s){Pc.delete(s[20])}(o)}}function ih(s,o,u){return function Py(s,o,u){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return u[0];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:g}=s.data[d.directiveStart+h];if(g===mt.None||g===mt.Emulated)return null}return Gn(d,u)}}(s,o.parent,u)}function Ja(s,o,u,d,h){s.insertBefore(o,u,d,h)}function ll(s,o,u){s.appendChild(o,u)}function om(s,o,u,d,h){null!==d?Ja(s,o,u,d,h):ll(s,o,u)}function Io(s,o){return s.parentNode(o)}let Gc,up,qc,Co=function oh(s,o,u){return 40&s.type?Gn(s,u):null};function Bc(s,o,u,d){const h=ih(s,d,o),g=o[11],I=function ip(s,o,u){return Co(s,o,u)}(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(u))for(let b=0;b<u.length;b++)om(g,h,u[b],I,!1);else om(g,h,u,I,!1)}function dl(s,o){if(null!==o){const u=o.type;if(3&u)return Gn(o,s);if(4&u)return nr(-1,s[o.index]);if(8&u){const d=o.child;if(null!==d)return dl(s,d);{const h=s[o.index];return Ni(h)?nr(-1,h):Fn(h)}}if(32&u)return Ya(o,s)()||Fn(s[o.index]);{const d=ah(s,o);return null!==d?Array.isArray(d)?d[0]:dl(Qa(s[16]),d):dl(s,o.next)}}return null}function ah(s,o){return null!==o?s[16][6].projection[o.projection]:null}function nr(s,o){const u=10+s+1;if(u<o.length){const d=o[u],h=d[1].firstChild;if(null!==h)return dl(d,h)}return o[7]}function hl(s,o,u,d,h,g,y){for(;null!=u;){const I=d[u.index],b=u.type;if(y&&0===o&&(I&&Mr(Fn(I),d),u.flags|=2),32!=(32&u.flags))if(8&b)hl(s,o,u.child,d,h,g,!1),la(o,s,h,I,g);else if(32&b){const A=Ya(u,d);let M;for(;M=A();)la(o,s,h,M,g);la(o,s,h,I,g)}else 16&b?$c(s,o,d,u,h,g):la(o,s,h,I,g);u=y?u.projectionNext:u.next}}function jc(s,o,u,d,h,g){hl(u,d,s.firstChild,o,h,g,!1)}function $c(s,o,u,d,h,g){const y=u[16],b=y[6].projection[d.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)la(o,s,h,b[A],g);else hl(s,o,b,y[3],h,g,!0)}function ci(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function fl(s,o,u){const{mergedAttrs:d,classes:h,styles:g}=u;null!==d&&gn(s,o,d),null!==h&&ci(s,o,h),null!==g&&function op(s,o,u){s.setAttribute(o,"style",u)}(s,o,g)}function tu(s){return function lh(){if(void 0===Gc&&(Gc=null,xt.trustedTypes))try{Gc=xt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Gc}()?.createHTML(s)||s}function bo(s){up=s}function ch(){if(void 0===qc&&(qc=null,xt.trustedTypes))try{qc=xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return qc}function cm(s){return ch()?.createHTML(s)||s}function dm(s){return ch()?.createScriptURL(s)||s}class gl{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nt})`}}class ky extends gl{getTypeName(){return"HTML"}}class yE extends gl{getTypeName(){return"Style"}}class v extends gl{getTypeName(){return"Script"}}class p extends gl{getTypeName(){return"URL"}}class m extends gl{getTypeName(){return"ResourceURL"}}function E(s){return s instanceof gl?s.changingThisBreaksApplicationSecurity:s}function x(s,o){const u=function N(s){return s instanceof gl&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${nt})`)}return u===o}function K(s){return new ky(s)}function he(s){return new yE(s)}function je(s){return new v(s)}function ze(s){return new p(s)}function It(s){return new m(s)}class Vn{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(tu(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch{return null}}}class ns{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const d=this.inertDocument.createElement("body");u.appendChild(d)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=tu(o),u;const d=this.inertDocument.createElement("body");return d.innerHTML=tu(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(o){const u=o.attributes;for(let h=u.length-1;0<h;h--){const y=u.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let d=o.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const lp=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function ca(s){return(s=String(s)).match(lp)?s:"unsafe:"+s}function rs(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function _l(...s){const o={};for(const u of s)for(const d in u)u.hasOwnProperty(d)&&(o[d]=!0);return o}const da=rs("area,br,col,hr,img,wbr"),cp=rs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dp=rs("rp,rt"),yl=_l(da,_l(cp,rs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),_l(dp,rs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),_l(dp,cp)),hh=rs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hp=_l(hh,rs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),rs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Fy=rs("script,style,template");class jD{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,d=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?d=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,d&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let h=this.checkClobberedElement(u,u.nextSibling);if(h){u=h;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!yl.hasOwnProperty(u))return this.sanitizedSomething=!0,!Fy.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const d=o.attributes;for(let h=0;h<d.length;h++){const g=d.item(h),y=g.name,I=y.toLowerCase();if(!hp.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let b=g.value;hh[I]&&(b=ca(b)),this.buf.push(" ",y,'="',Uy(b),'"')}return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();yl.hasOwnProperty(u)&&!da.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(Uy(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const $D=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ly=/([^\#-~ |!])/g;function Uy(s){return s.replace(/&/g,"&amp;").replace($D,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Ly,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Vy;function HD(s,o){let u=null;try{Vy=Vy||function ht(s){const o=new ns(s);return function ml(){try{return!!(new window.DOMParser).parseFromString(tu(""),"text/html")}catch{return!1}}()?new Vn(o):o}(s);let d=o?String(o):"";u=Vy.getInertBodyElement(d);let h=5,g=d;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,d=g,g=u.innerHTML,u=Vy.getInertBodyElement(d)}while(d!==g);return tu((new jD).sanitizeChildren(vE(u)||u))}finally{if(u){const d=vE(u)||u;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function vE(s){return"content"in s&&function HP(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Wn=(()=>((Wn=Wn||{})[Wn.NONE=0]="NONE",Wn[Wn.HTML=1]="HTML",Wn[Wn.STYLE=2]="STYLE",Wn[Wn.SCRIPT=3]="SCRIPT",Wn[Wn.URL=4]="URL",Wn[Wn.RESOURCE_URL=5]="RESOURCE_URL",Wn))();function wE(s){const o=pp();return o?cm(o.sanitize(Wn.HTML,s)||""):x(s,"HTML")?cm(E(s)):HD(function pl(){return void 0!==up?up:typeof document<"u"?document:void 0}(),Se(s))}function EE(s){const o=pp();return o?o.sanitize(Wn.URL,s)||"":x(s,"URL")?E(s):ca(Se(s))}function pm(s){const o=pp();if(o)return dm(o.sanitize(Wn.RESOURCE_URL,s)||"");if(x(s,"ResourceURL"))return dm(E(s));throw new pe(904,!1)}function CE(s,o,u){return function qD(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?pm:EE}(o,u)(s)}function pp(){const s=ye();return s&&s[12]}const jy=new Qt("ENVIRONMENT_INITIALIZER"),Wc=new Qt("INJECTOR",-1),fh=new Qt("INJECTOR_DEF_TYPES");class bE{get(o,u=yn){if(u===yn){const d=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw d.name="NullInjectorError",d}return u}}function gp(...s){return{\u0275providers:ph(0,s),\u0275fromNgModule:!0}}function ph(s,...o){const u=[],d=new Set;let h;return ts(o,g=>{const y=g;$y(y,u,[],d)&&(h||(h=[]),h.push(y))}),void 0!==h&&TE(h,u),u}function TE(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];Hy(h,g=>{o.push(g)})}}function $y(s,o,u,d){if(!(s=Y(s)))return!1;let h=null,g=fi(s);const y=!g&&Xt(s);if(g||y){if(y&&!y.standalone)return!1;h=s}else{const b=s.ngModule;if(g=fi(b),!g)return!1;h=b}const I=d.has(h);if(y){if(I)return!1;if(d.add(h),y.dependencies){const b="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of b)$y(A,o,u,d)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let A;d.add(h);try{ts(g.imports,M=>{$y(M,o,u,d)&&(A||(A=[]),A.push(M))})}finally{}void 0!==A&&TE(A,o)}if(!I){const A=oo(h)||(()=>new h);o.push({provide:h,useFactory:A,deps:wt},{provide:fh,useValue:h,multi:!0},{provide:jy,useValue:()=>$e(h),multi:!0})}const b=g.providers;null==b||I||Hy(b,M=>{o.push(M)})}}return h!==s&&void 0!==s.providers}function Hy(s,o){for(let u of s)Ae(u)&&(u=u.\u0275providers),Array.isArray(u)?Hy(u,o):o(u)}const WD=ne({provide:String,useValue:ne});function Gy(s){return null!==s&&"object"==typeof s&&WD in s}function nu(s){return"function"==typeof s}const vl=new Qt("Set Injector scope."),mm={},KD={};let qy;function _m(){return void 0===qy&&(qy=new bE),qy}class Zc{}class SE extends Zc{get destroyed(){return this._destroyed}constructor(o,u,d,h){super(),this.parent=u,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mh(o,y=>this.processProvider(y)),this.records.set(Wc,gh(void 0,this)),h.has("environment")&&this.records.set(Zc,gh(void 0,this));const g=this.records.get(vl);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(fh.multi,wt,lt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Br(this),d=Dn(void 0);try{return o()}finally{Br(u),Dn(d)}}get(o,u=yn,d=lt.Default){this.assertNotDestroyed(),d=Ct(d);const h=Br(this),g=Dn(void 0);try{if(!(d&lt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const b=function Ky(s){return"function"==typeof s||"object"==typeof s&&s instanceof Qt}(o)&&ar(o);I=b&&this.injectableDefInScope(b)?gh(zy(o),mm):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(d&lt.Self?_m():this.parent).get(o,u=d&lt.Optional&&u===yn?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Tr]=y[Tr]||[]).unshift(fe(o)),h)throw y;return function j(s,o,u,d){const h=s[Tr];throw o[Yi]&&h.unshift(o[Yi]),s.message=function B(s,o,u,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=fe(o);if(Array.isArray(o))h=o.map(fe).join(" -> ");else if("object"==typeof o){let g=[];for(let y in o)if(o.hasOwnProperty(y)){let I=o[y];g.push(y+":"+("string"==typeof I?JSON.stringify(I):fe(I)))}h=`{${g.join(", ")}}`}return`${u}${d?"("+d+")":""}[${h}]: ${s.replace(Lo,"\n  ")}`}("\n"+s.message,h,u,d),s.ngTokenPath=h,s[Tr]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Dn(g),Br(h)}}resolveInjectorInitializers(){const o=Br(this),u=Dn(void 0);try{const d=this.get(jy.multi,wt,lt.Self);for(const h of d)h()}finally{Br(o),Dn(u)}}toString(){const o=[],u=this.records;for(const d of u.keys())o.push(fe(d));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(o){let u=nu(o=Y(o))?o:Y(o&&o.provide);const d=function QD(s){return Gy(s)?gh(void 0,s.useValue):gh(Wy(s),mm)}(o);if(nu(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=gh(void 0,mm,!0),h.factory=()=>Rt(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,d)}hydrate(o,u){return u.value===mm&&(u.value=KD,u.value=u.factory()),"object"==typeof u.value&&u.value&&function AE(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Y(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function zy(s){const o=ar(s),u=null!==o?o.factory:oo(s);if(null!==u)return u;if(s instanceof Qt)throw new pe(204,!1);if(s instanceof Function)return function YD(s){const o=s.length;if(o>0)throw function sa(s,o){const u=[];for(let d=0;d<s;d++)u.push(o);return u}(o,"?"),new pe(204,!1);const u=function eo(s){const o=s&&(s[Vr]||s[_n]);if(o){const u=function ks(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new pe(204,!1)}function Wy(s,o,u){let d;if(nu(s)){const h=Y(s);return oo(h)||zy(h)}if(Gy(s))d=()=>Y(s.useValue);else if(function DE(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Rt(s.deps||[]));else if(function ZD(s){return!(!s||!s.useExisting)}(s))d=()=>$e(Y(s.useExisting));else{const h=Y(s&&(s.useClass||s.provide));if(!function Zy(s){return!!s.deps}(s))return oo(h)||zy(h);d=()=>new h(...Rt(s.deps))}return d}function gh(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function mh(s,o){for(const u of s)Array.isArray(u)?mh(u,o):u&&Ae(u)?mh(u.\u0275providers,o):o(u)}class XD{}class xE{}class ME{resolveComponentFactory(o){throw function JD(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let _h=(()=>{class s{}return s.NULL=new ME,s})();function ym(){return ru(gr(),ye())}function ru(s,o){return new yh(Gn(s,o))}let yh=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=ym,s})();function mp(s){return s instanceof yh?s.nativeElement:s}class Qy{}let eS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function tS(){const s=ye(),u=ur(gr().index,s);return(ei(u)?u:s)[11]}(),s})(),nS=(()=>{class s{}return s.\u0275prov=gt({token:s,providedIn:"root",factory:()=>null}),s})();class NE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const PE=new NE("15.1.2"),vm={};function Jy(s){return s.ngOriginalError}class _p{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Jy(o);for(;u&&Jy(u);)u=Jy(u);return u||null}}function ha(s){return s instanceof Function?s():s}function VE(s,o,u){let d=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===d||s.charCodeAt(h+g)<=32)return h}u=h+1}}const ev="ng-template";function tv(s,o,u){let d=0;for(;d<s.length;){let h=s[d++];if(u&&"class"===h){if(h=s[d],-1!==VE(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function BE(s){return 4===s.type&&s.value!==ev}function jE(s,o,u){return o===(4!==s.type||u?s.value:ev)}function vh(s,o,u){let d=4;const h=s.attrs||[],g=function Em(s){for(let o=0;o<s.length;o++)if(Va(s[o]))return o;return s.length}(h);let y=!1;for(let I=0;I<o.length;I++){const b=o[I];if("number"!=typeof b){if(!y)if(4&d){if(d=2|1&d,""!==b&&!jE(s,b,u)||""===b&&1===o.length){if(Is(d))return!1;y=!0}}else{const A=8&d?b:o[++I];if(8&d&&null!==s.attrs){if(!tv(s.attrs,A,u)){if(Is(d))return!1;y=!0}continue}const L=lS(8&d?"class":b,h,BE(s),u);if(-1===L){if(Is(d))return!1;y=!0;continue}if(""!==A){let z;z=L>g?"":h[L+1].toLowerCase();const ee=8&d?z:null;if(ee&&-1!==VE(ee,A,0)||2&d&&A!==z){if(Is(d))return!1;y=!0}}}}else{if(!y&&!Is(d)&&!Is(b))return!1;if(y&&Is(b))continue;y=!1,d=b|1&d}}return Is(d)||y}function Is(s){return 0==(1&s)}function lS(s,o,u,d){if(null===o)return-1;let h=0;if(d||!u){let g=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)g=!0;else{if(1===y||2===y){let I=o[++h];for(;"string"==typeof I;)I=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=g?1:2}return-1}return function $E(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const d=s[u];if("number"==typeof d)return-1;if(d===o)return u;u++}return-1}(o,s)}function nv(s,o,u=!1){for(let d=0;d<o.length;d++)if(vh(s,o[d],u))return!0;return!1}function GE(s,o){return s?":not("+o.trim()+")":o}function cS(s){let o=s[0],u=1,d=2,h="",g=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&d){const I=s[++u];h+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&d?h+="."+y:4&d&&(h+=" "+y);else""!==h&&!Is(y)&&(o+=GE(g,h),h=""),d=y,g=g||!Is(d);u++}return""!==h&&(o+=GE(g,h)),o}const Vt={};function vp(s){qE(Jt(),ye(),Gr()+s,!1)}function qE(s,o,u,d){if(!d)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&js(o,g,u)}else{const g=s.preOrderHooks;null!==g&&Xo(o,g,0,u)}Yo(u)}function YE(s,o=null,u=null,d){const h=QE(s,o,u,d);return h.resolveInjectorInitializers(),h}function QE(s,o=null,u=null,d,h=new Set){const g=[u||wt,gp(s)];return d=d||("object"==typeof s?void 0:fe(s)),new SE(g,o||_m(),d||null,h)}let wl=(()=>{class s{static create(u,d){if(Array.isArray(u))return YE({name:""},d,u,"");{const h=u.name??"";return YE({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=yn,s.NULL=new bE,s.\u0275prov=gt({token:s,providedIn:"any",factory:()=>$e(Wc)}),s.__NG_ELEMENT_ID__=-1,s})();function Eh(s,o=lt.Default){const u=ye();return null===u?$e(s,o):Of(gr(),u,Y(s),o)}function rI(){throw new Error("invalid")}function lv(s,o){const u=s.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const g=u[d+1];if(-1!==g){const y=s.data[g];pc(u[d]),y.contentQueries(2,o[g],g)}}}function Cm(s,o,u,d,h,g,y,I,b,A,M){const L=o.blueprint.slice();return L[0]=h,L[2]=76|d,(null!==M||s&&1024&s[2])&&(L[2]|=1024),Na(L),L[3]=L[15]=s,L[8]=u,L[10]=y||s&&s[10],L[11]=I||s&&s[11],L[12]=b||s&&s[12]||null,L[9]=A||s&&s[9]||null,L[6]=g,L[20]=function Jd(){return Hs++}(),L[21]=M,L[16]=2==o.type?s[16]:L,L}function Ih(s,o,u,d,h){let g=s.data[o];if(null===g)g=function cv(s,o,u,d,h){const g=ka(),y=Nu(),b=s.data[o]=function hv(s,o,u,d,h,g){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,u,o,d,h);return null===s.firstChild&&(s.firstChild=b),null!==g&&(y?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b)),b}(s,o,u,d,h),function Od(){return At.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=d,g.attrs=h;const y=function Mu(){const s=At.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return ri(g,!0),g}function bp(s,o,u,d){if(0===u)return-1;const h=o.length;for(let g=0;g<u;g++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function dv(s,o,u){Ou(o);try{const d=s.viewQuery;null!==d&&fI(1,d,u);const h=s.template;null!==h&&Ch(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&lv(s,o),s.staticViewQueries&&fI(2,s.viewQuery,u);const g=s.components;null!==g&&function ek(s,o){for(let u=0;u<o.length;u++)hI(s,o[u])}(o,g)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,Wg()}}function bm(s,o,u,d){const h=o[2];if(128!=(128&h)){Ou(o);try{Na(o),function Bs(s){return At.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Ch(s,o,u,2,d);const y=3==(3&h);if(y){const A=s.preOrderCheckHooks;null!==A&&js(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Xo(o,A,0,null),_i(o,0)}if(function VS(s){for(let o=il(s);null!==o;o=sl(o)){if(!o[2])continue;const u=o[9];for(let d=0;d<u.length;d++){const h=u[d];512&h[2]||Pa(h[3],1),h[2]|=512}}}(o),function US(s){for(let o=il(s);null!==o;o=sl(o))for(let u=10;u<o.length;u++){const d=o[u],h=d[1];Ko(d)&&bm(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&lv(s,o),y){const A=s.contentCheckHooks;null!==A&&js(o,A)}else{const A=s.contentHooks;null!==A&&Xo(o,A,1),_i(o,1)}!function bS(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const h=u[d];if(h<0)Yo(~h);else{const g=h,y=u[++d],I=u[++d];Fd(y,g),I(2,o[g])}}}finally{Yo(-1)}}(s,o);const I=s.components;null!==I&&function TS(s,o){for(let u=0;u<o.length;u++)Sm(s,o[u])}(o,I);const b=s.viewQuery;if(null!==b&&fI(2,b,d),y){const A=s.viewCheckHooks;null!==A&&js(o,A)}else{const A=s.viewHooks;null!==A&&Xo(o,A,2),_i(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Pa(o[3],-1))}finally{Wg()}}}function Ch(s,o,u,d,h){const g=Gr(),y=2&d;try{Yo(-1),y&&o.length>22&&qE(s,o,22,!1),u(d,h)}finally{Yo(g)}}function iI(s,o,u){if(Sa(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const y=s.data[g];y.contentQueries&&y.contentQueries(1,u[g],g)}}}function sI(s,o,u){Ru()&&(function RS(s,o,u,d){const h=u.directiveStart,g=u.directiveEnd;Pi(u)&&function LS(s,o,u){const d=Gn(o,s),h=aI(u),g=s[10],y=xm(s,Cm(s,h,null,u.onPush?32:16,d,o,g,g.createRenderer(d,u),null,null,null));s[o.index]=y}(o,u,s.data[h+u.componentOffset]),s.firstCreatePass||na(u,o),Mr(d,o);const y=u.initialInputs;for(let I=h;I<g;I++){const b=s.data[I],A=ki(o,s,I,u);Mr(A,o),null!==y&&ak(0,I-h,A,b,0,y),ti(b)&&(ur(u.index,o)[8]=ki(o,s,I,u))}}(s,o,u,Gn(u,o)),64==(64&u.flags)&&cI(s,o,u))}function oI(s,o,u=Gn){const d=o.localNames;if(null!==d){let h=o.index+1;for(let g=0;g<d.length;g+=2){const y=d[g+1],I=-1===y?u(o,s):s[y];s[h++]=I}}}function aI(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Tm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Tm(s,o,u,d,h,g,y,I,b,A){const M=22+d,L=M+h,z=function tk(s,o){const u=[];for(let d=0;d<o;d++)u.push(d<s?null:Vt);return u}(M,L),ee="function"==typeof A?A():A;return z[1]={type:s,blueprint:z,template:u,queries:null,viewQuery:I,declTNode:o,data:z.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:ee,incompleteFirstPass:!1}}function Dm(s,o,u,d){const h=pI(o);null===u?h.push(d):(h.push(u),s.firstCreatePass&&jS(s).push(d,h.length-1))}function DS(s,o,u,d){for(let h in s)if(s.hasOwnProperty(h)){u=null===u?{}:u;const g=s[h];null===d?fv(u,o,h,g):d.hasOwnProperty(h)&&fv(u,o,d[h],g)}return u}function fv(s,o,u,d){s.hasOwnProperty(u)?s[u].push(o,d):s[u]=[o,d]}function qs(s,o,u,d,h,g,y,I){const b=Gn(o,u);let M,A=o.inputs;!I&&null!=A&&(M=A[d])?(gI(s,u,M,d,h),Pi(o)&&SS(u,o.index)):3&o.type&&(d=function ik(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=y?y(h,o.value||"",d):h,g.setProperty(b,d,h))}function SS(s,o){const u=ur(o,s);16&u[2]||(u[2]|=32)}function uI(s,o,u,d){let h=!1;if(Ru()){const g=null===d?null:{"":-1},y=function NS(s,o){const u=s.directiveRegistry;let d=null,h=null;if(u)for(let g=0;g<u.length;g++){const y=u[g];if(nv(o,y.selectors,!1))if(d||(d=[]),ti(y))if(null!==y.findHostDirectiveDefs){const I=[];h=h||new Map,y.findHostDirectiveDefs(y,I,h),d.unshift(...I,y),pv(s,o,I.length)}else d.unshift(y),pv(s,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,d,h),d.push(y)}return null===d?null:[d,h]}(s,u);let I,b;null===y?I=b=null:[I,b]=y,null!==I&&(h=!0,xS(s,o,u,I,g,b)),g&&function PS(s,o,u){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=u[o[h+1]];if(null==g)throw new pe(-301,!1);d.push(o[h],g)}}}(u,d,g)}return u.mergedAttrs=ms(u.mergedAttrs,u.attrs),h}function xS(s,o,u,d,h,g){for(let A=0;A<d.length;A++)Ic(na(u,o),s,d[A].type);!function OS(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,d.length);for(let A=0;A<d.length;A++){const M=d[A];M.providersResolver&&M.providersResolver(M)}let y=!1,I=!1,b=bp(s,o,d.length,null);for(let A=0;A<d.length;A++){const M=d[A];u.mergedAttrs=ms(u.mergedAttrs,M.hostAttrs),FS(s,u,o,b,M),kS(b,M,h),null!==M.contentQueries&&(u.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(u.flags|=64);const L=M.type.prototype;!y&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),y=!0),!I&&(L.ngOnChanges||L.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),b++}!function rk(s,o,u){const h=o.directiveEnd,g=s.data,y=o.attrs,I=[];let b=null,A=null;for(let M=o.directiveStart;M<h;M++){const L=g[M],z=u?u.get(L):null,Ee=z?z.outputs:null;b=DS(L.inputs,M,b,z?z.inputs:null),A=DS(L.outputs,M,A,Ee);const Ue=null===b||null===y||BE(o)?null:uk(b,M,y);I.push(Ue)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=b,o.outputs=A}(s,u,g)}function cI(s,o,u){const d=u.directiveStart,h=u.directiveEnd,g=u.index,y=function hc(){return At.lFrame.currentDirectiveIndex}();try{Yo(g);for(let I=d;I<h;I++){const b=s.data[I],A=o[I];fc(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&MS(b,A)}}finally{Yo(-1),fc(y)}}function MS(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function pv(s,o,u){o.componentOffset=u,(s.components||(s.components=[])).push(o.index)}function kS(s,o,u){if(u){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)u[o.exportAs[d]]=s;ti(o)&&(u[""]=s)}}function FS(s,o,u,d,h){s.data[d]=h;const g=h.factory||(h.factory=oo(h.type)),y=new ea(g,ti(h),Eh);s.blueprint[d]=y,u[d]=y,function ok(s,o,u,d,h){const g=h.hostBindings;if(g){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const I=~o.index;(function lI(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(y)!=I&&y.push(I),y.push(u,d,g)}}(s,o,d,bp(s,u,h.hostVars,Vt),h)}function fa(s,o,u,d,h,g){const y=Gn(s,o);!function gv(s,o,u,d,h,g,y){if(null==g)s.removeAttribute(o,h,u);else{const I=null==y?Se(g):y(g,d||"",h);s.setAttribute(o,h,I,u)}}(o[11],y,g,s.value,u,d,h)}function ak(s,o,u,d,h,g){const y=g[o];if(null!==y){const I=d.setInput;for(let b=0;b<y.length;){const A=y[b++],M=y[b++],L=y[b++];null!==I?d.setInput(u,L,A,M):u[M]=L}}}function uk(s,o,u){let d=null,h=0;for(;h<u.length;){const g=u[h];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===d&&(d=[]);const y=s[g];for(let I=0;I<y.length;I+=2)if(y[I]===o){d.push(g,y[I+1],u[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function dI(s,o,u,d){return[s,!0,!1,o,null,0,d,u,null,null]}function Sm(s,o){const u=ur(o,s);if(Ko(u)){const d=u[1];48&u[2]?bm(d,u,d.template,u[8]):u[5]>0&&Am(u)}}function Am(s){for(let d=il(s);null!==d;d=sl(d))for(let h=10;h<d.length;h++){const g=d[h];if(Ko(g))if(512&g[2]){const y=g[1];bm(y,g,y.template,g[8])}else g[5]>0&&Am(g)}const u=s[1].components;if(null!==u)for(let d=0;d<u.length;d++){const h=ur(u[d],s);Ko(h)&&h[5]>0&&Am(h)}}function hI(s,o){const u=ur(o,s),d=u[1];(function BS(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(d,u),dv(d,u,u[8])}function xm(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function mv(s){for(;s;){s[2]|=32;const o=Qa(s);if(Aa(s)&&!o)return s;s=o}return null}function Rm(s,o,u,d=!0){const h=o[10];h.begin&&h.begin();try{bm(s,o,s.template,u)}catch(y){throw d&&HS(o,y),y}finally{h.end&&h.end()}}function fI(s,o,u){pc(0),o(s,u)}function pI(s){return s[7]||(s[7]=[])}function jS(s){return s.cleanup||(s.cleanup=[])}function HS(s,o){const u=s[9],d=u?u.get(_p,null):null;d&&d.handleError(o)}function gI(s,o,u,d,h){for(let g=0;g<u.length;){const y=u[g++],I=u[g++],b=o[y],A=s.data[y];null!==A.setInput?A.setInput(b,h,d,I):b[I]=h}}function iu(s,o,u){const d=lo(o,s);!function ep(s,o,u){s.setValue(o,u)}(s[11],d,u)}function Tp(s,o,u){let d=u?s.styles:null,h=u?s.classes:null,g=0;if(null!==o)for(let y=0;y<o.length;y++){const I=o[y];"number"==typeof I?g=I:1==g?h=de(h,I):2==g&&(d=de(d,I+": "+o[++y]+";"))}u?s.styles=d:s.stylesWithoutHost=d,u?s.classes=h:s.classesWithoutHost=h}function pa(s,o,u,d,h=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&d.push(Fn(g)),Ni(g))for(let I=10;I<g.length;I++){const b=g[I],A=b[1].firstChild;null!==A&&pa(b[1],b,A,d)}const y=u.type;if(8&y)pa(s,o,u.child,d);else if(32&y){const I=Ya(u,o);let b;for(;b=I();)d.push(b)}else if(16&y){const I=ah(o,u);if(Array.isArray(I))d.push(...I);else{const b=Qa(o[16]);pa(b[1],b,I,d,!0)}}u=h?u.projectionNext:u.next}return d}class ss{get rootNodes(){const o=this._lView,u=o[1];return pa(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ni(o)){const u=o[8],d=u?u.indexOf(this):-1;d>-1&&(rp(o,d),Ga(u,d))}this._attachedToViewContainer=!1}rh(this._lView[1],this._lView)}onDestroy(o){Dm(this._lView[1],this._lView,null,o)}markForCheck(){mv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Rm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function al(s,o){jc(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=o}}class GS extends ss{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Rm(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class _v extends _h{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Xt(o);return new su(u,this.ngModule)}}function mI(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class zS{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,d){d=Ct(d);const h=this.injector.get(o,vm,d);return h!==vm||u===vm?h:this.parentInjector.get(o,u,d)}}class su extends xE{get inputs(){return mI(this.componentDef.inputs)}get outputs(){return mI(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function dS(s){return s.map(cS).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,d,h){let g=(h=h||this.ngModule)instanceof Zc?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const y=g?new zS(o,g):o,I=y.get(Qy,null);if(null===I)throw new pe(407,!1);const b=y.get(nS,null),A=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",L=d?function nk(s,o,u){return s.selectRootElement(o,u===mt.ShadowDom)}(A,d,this.componentDef.encapsulation):Lc(A,M,function qS(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),z=this.componentDef.onPush?288:272,ee=Tm(0,null,null,1,0,null,null,null,null,null),Ee=Cm(null,ee,null,z,null,null,I,A,b,y,null);let Ue,Ge;Ou(Ee);try{const tt=this.componentDef;let Dt,Me=null;tt.findHostDirectiveDefs?(Dt=[],Me=new Map,tt.findHostDirectiveDefs(tt,Dt,Me),Dt.push(tt)):Dt=[tt];const kt=function _I(s,o){const u=s[1];return s[22]=o,Ih(u,22,2,"#host",null)}(Ee,L),Pn=function Ei(s,o,u,d,h,g,y,I){const b=h[1];!function Il(s,o,u,d){for(const h of s)o.mergedAttrs=ms(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(Tp(o,o.mergedAttrs,!0),null!==u&&fl(d,u,o))}(d,s,o,y);const A=g.createRenderer(o,u),M=Cm(h,aI(u),null,u.onPush?32:16,h[s.index],s,g,A,I||null,null,null);return b.firstCreatePass&&pv(b,s,d.length-1),xm(h,M),h[s.index]=M}(kt,L,tt,Dt,Ee,I,A);Ge=Zo(ee,22),L&&function zs(s,o,u,d){if(d)gn(s,u,["ng-version",PE.full]);else{const{attrs:h,classes:g}=function hS(s){const o=[],u=[];let d=1,h=2;for(;d<s.length;){let g=s[d];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++d]):8===h&&u.push(g);else{if(!Is(h))break;h=g}d++}return{attrs:o,classes:u}}(o.selectors[0]);h&&gn(s,u,h),g&&g.length>0&&ci(s,u,g.join(" "))}}(A,tt,L,d),void 0!==u&&function yI(s,o,u){const d=s.projection=[];for(let h=0;h<o.length;h++){const g=u[h];d.push(null!=g?Array.from(g):null)}}(Ge,this.ngContentSelectors,u),Ue=function ZS(s,o,u,d,h,g){const y=gr(),I=h[1],b=Gn(y,h);xS(I,h,y,u,null,d);for(let M=0;M<u.length;M++)Mr(ki(h,I,y.directiveStart+M,y),h);cI(I,h,y),b&&Mr(b,h);const A=ki(h,I,y.directiveStart+y.componentOffset,y);if(s[8]=h[8]=A,null!==g)for(const M of g)M(A,o);return iI(I,y,s),A}(Pn,tt,Dt,Me,Ee,[vI]),dv(ee,Ee,null)}finally{Wg()}return new WS(this.componentType,Ue,ru(Ge,Ee),Ee,Ge)}}class WS extends XD{constructor(o,u,d,h,g){super(),this.location=d,this._rootLView=h,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new GS(h),this.componentType=o}setInput(o,u){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[o])){const g=this._rootLView;gI(g[1],g,h,o,u),SS(g,this._tNode.index)}}get injector(){return new Fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function vI(){const s=gr();Fa(ye()[1],s)}function Nm(s){let o=function yv(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const d=[s];for(;o;){let h;if(ti(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new pe(903,!1);h=o.\u0275dir}if(h){if(u){d.push(h);const y=s;y.inputs=Pm(s.inputs),y.declaredInputs=Pm(s.declaredInputs),y.outputs=Pm(s.outputs);const I=h.hostBindings;I&&km(s,I);const b=h.viewQuery,A=h.contentQueries;if(b&&EI(s,b),A&&II(s,A),me(s.inputs,h.inputs),me(s.declaredInputs,h.declaredInputs),me(s.outputs,h.outputs),ti(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let y=0;y<g.length;y++){const I=g[y];I&&I.ngInherit&&I(s),I===Nm&&(u=!1)}}o=Object.getPrototypeOf(o)}!function wI(s){let o=0,u=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=ms(h.hostAttrs,u=ms(u,h.hostAttrs))}}(d)}function Pm(s){return s===tn?{}:s===wt?[]:s}function EI(s,o){const u=s.viewQuery;s.viewQuery=u?(d,h)=>{o(d,h),u(d,h)}:o}function II(s,o){const u=s.contentQueries;s.contentQueries=u?(d,h,g)=>{o(d,h,g),u(d,h,g)}:o}function km(s,o){const u=s.hostBindings;s.hostBindings=u?(d,h)=>{o(d,h),u(d,h)}:o}let bh=null;function Cl(){if(!bh){const s=xt.Symbol;if(s&&s.iterator)bh=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const d=o[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(bh=d)}}}return bh}function Dp(s){return!!Fm(s)&&(Array.isArray(s)||!(s instanceof Map)&&Cl()in s)}function Fm(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function To(s,o,u){return s[o]=u}function Zn(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function bl(s,o,u,d){const h=Zn(s,o,u);return Zn(s,o+1,d)||h}function Sp(s,o,u,d){const h=ye();return Zn(h,ho(),o)&&(Jt(),fa(wn(),h,s,o,u,d)),Sp}function Dl(s,o,u,d){return Zn(s,ho(),u)?o+Se(u)+d:Vt}function ou(s,o,u,d,h,g){const I=bl(s,function ii(){return At.lFrame.bindingIndex}(),u,h);return es(2),I?o+Se(u)+d+Se(h)+g:Vt}function Np(s,o,u,d,h,g,y,I){const b=ye(),A=Jt(),M=s+22,L=A.firstCreatePass?function Mp(s,o,u,d,h,g,y,I,b){const A=o.consts,M=Ih(o,s,4,y||null,ps(A,I));uI(o,u,M,ps(A,b)),Fa(o,M);const L=M.tViews=Tm(2,M,d,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,M),L.queries=o.queries.embeddedTView(M)),M}(M,A,b,o,u,d,h,g,y):A.data[M];ri(L,!1);const z=b[11].createComment("");Bc(A,b,z,L),Mr(z,b),xm(b,b[M]=dI(z,b,z,L)),tc(L)&&sI(A,b,L),null!=y&&oI(b,L,I)}function Ah(s){return co(function kd(){return At.lFrame.contextLView}(),22+s)}function Pp(s,o,u){const d=ye();return Zn(d,ho(),o)&&qs(Jt(),wn(),d,s,o,d[11],u,!1),Pp}function Tv(s,o,u,d,h){const y=h?"class":"style";gI(s,u,o.inputs[y],y,d)}function Lm(s,o,u,d){const h=ye(),g=Jt(),y=22+s,I=h[11],b=h[y]=Lc(I,o,function Zg(){return At.lFrame.currentNamespace}()),A=g.firstCreatePass?function Dv(s,o,u,d,h,g,y){const I=o.consts,A=Ih(o,s,2,h,ps(I,g));return uI(o,u,A,ps(I,y)),null!==A.attrs&&Tp(A,A.attrs,!1),null!==A.mergedAttrs&&Tp(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,g,h,0,o,u,d):g.data[y];return ri(A,!0),fl(I,b,A),32!=(32&A.flags)&&Bc(g,h,b,A),0===function xu(){return At.lFrame.elementDepthCount}()&&Mr(b,h),function ac(){At.lFrame.elementDepthCount++}(),tc(A)&&(sI(g,h,A),iI(g,A,h)),null!==d&&oI(h,A),Lm}function Yc(){let s=gr();Nu()?Pu():(s=s.parent,ri(s,!1));const o=s;!function uc(){At.lFrame.elementDepthCount--}();const u=Jt();return u.firstCreatePass&&(Fa(u,s),Sa(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function La(s){return 0!=(8&s.flags)}(o)&&Tv(u,o,ye(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Lu(s){return 0!=(16&s.flags)}(o)&&Tv(u,o,ye(),o.stylesWithoutHost,!1),Yc}function Um(s,o,u,d){return Lm(s,o,u,d),Yc(),Um}function Qc(s,o,u){const d=ye(),h=Jt(),g=s+22,y=h.firstCreatePass?function OI(s,o,u,d,h){const g=o.consts,y=ps(g,d),I=Ih(o,s,8,"ng-container",y);return null!==y&&Tp(I,y,!0),uI(o,u,I,ps(g,h)),null!==o.queries&&o.queries.elementStart(o,I),I}(g,h,d,o,u):h.data[g];ri(y,!0);const I=d[g]=d[11].createComment("");return Bc(h,d,I,y),Mr(I,d),tc(y)&&(sI(h,d,y),iI(h,y,d)),null!=u&&oI(d,y),Qc}function Al(){let s=gr();const o=Jt();return Nu()?Pu():(s=s.parent,ri(s,!1)),o.firstCreatePass&&(Fa(o,s),Sa(s)&&o.queries.elementEnd(s)),Al}function tA(){return ye()}function Vm(s){return!!s&&"function"==typeof s.then}function nA(s){return!!s&&"function"==typeof s.subscribe}const Xc=nA;function xh(s,o,u,d){const h=ye(),g=Jt(),y=gr();return function Fp(s,o,u,d,h,g,y){const I=tc(d),A=s.firstCreatePass&&jS(s),M=o[8],L=pI(o);let z=!0;if(3&d.type||y){const Ue=Gn(d,o),Ge=y?y(Ue):Ue,tt=L.length,Dt=y?kt=>y(Fn(kt[d.index])):d.index;let Me=null;if(!y&&I&&(Me=function Op(s,o,u,d){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const y=h[g];if(y===u&&h[g+1]===d){const I=o[7],b=h[g+2];return I.length>b?I[b]:null}"string"==typeof y&&(g+=2)}return null}(s,o,h,d.index)),null!==Me)(Me.__ngLastListenerFn__||Me).__ngNextListenerFn__=g,Me.__ngLastListenerFn__=g,z=!1;else{g=FI(d,o,M,g,!1);const kt=u.listen(Ge,h,g);L.push(g,kt),A&&A.push(h,Dt,tt,tt+1)}}else g=FI(d,o,M,g,!1);const ee=d.outputs;let Ee;if(z&&null!==ee&&(Ee=ee[h])){const Ue=Ee.length;if(Ue)for(let Ge=0;Ge<Ue;Ge+=2){const Pn=o[Ee[Ge]][Ee[Ge+1]].subscribe(g),dr=L.length;L.push(g,Pn),A&&A.push(h,d.index,dr,-(dr+1))}}}(g,h,h[11],y,s,o,d),xh}function Lp(s,o,u,d){try{return!1!==u(d)}catch(h){return HS(s,h),!1}}function FI(s,o,u,d,h){return function g(y){if(y===Function)return d;mv(s.componentOffset>-1?ur(s.index,o):o);let b=Lp(o,0,d,y),A=g.__ngNextListenerFn__;for(;A;)b=Lp(o,0,A,y)&&b,A=A.__ngNextListenerFn__;return h&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function Bm(s=1){return function Ty(s){return(At.lFrame.contextLView=function Vd(s,o){for(;s>0;)o=o[15],s--;return o}(s,At.lFrame.contextLView))[8]}(s)}function $m(s,o,u,d,h){const g=ye(),y=Dl(g,o,u,d);return y!==Vt&&qs(Jt(),wn(),g,s,y,g[11],h,!1),$m}function qm(s,o){return s<<17|o<<2}function au(s){return s>>17&32767}function VI(s){return 2|s}function Jc(s){return(131068&s)>>2}function ed(s,o){return-131069&s|o<<2}function zm(s){return 1|s}function Mv(s,o,u,d,h){const g=s[u+1],y=null===o;let I=d?au(g):Jc(g),b=!1;for(;0!==I&&(!1===b||y);){const M=s[I+1];dk(s[I],o)&&(b=!0,s[I+1]=d?zm(M):VI(M)),I=d?au(M):Jc(M)}b&&(s[u+1]=d?VI(g):zm(g))}function dk(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&lr(s,o)>=0}const Zr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function dA(s){return s.substring(Zr.key,Zr.keyEnd)}function Nv(s,o){const u=Zr.textEnd;return u===o?-1:(o=Zr.keyEnd=function pA(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,Zr.key=o,u),xl(s,o,u))}function xl(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function Zm(s,o,u){return xo(s,o,u,!1),Zm}function Fv(s,o){return xo(s,o,null,!0),Fv}function $I(s){!function Ui(s,o,u,d){const h=Jt(),g=es(2);h.firstUpdatePass&&Km(h,null,g,d);const y=ye();if(u!==Vt&&Zn(y,g,u)){const I=h.data[Gr()];if(yA(I,d)&&!HI(h,g)){let b=d?I.classesWithoutHost:I.stylesWithoutHost;null!==b&&(u=de(b,u||"")),Tv(h,I,y,u,d)}else!function Vv(s,o,u,d,h,g,y,I){h===Vt&&(h=wt);let b=0,A=0,M=0<h.length?h[0]:null,L=0<g.length?g[0]:null;for(;null!==M||null!==L;){const z=b<h.length?h[b+1]:void 0,ee=A<g.length?g[A+1]:void 0;let Ue,Ee=null;M===L?(b+=2,A+=2,z!==ee&&(Ee=L,Ue=ee)):null===L||null!==M&&M<L?(b+=2,Ee=M):(A+=2,Ee=L,Ue=ee),null!==Ee&&WI(s,o,u,d,Ee,Ue,y,I),M=b<h.length?h[b]:null,L=A<g.length?g[A]:null}}(h,I,y,y[11],y[g+1],y[g+1]=function qI(s,o,u){if(null==u||""===u)return wt;const d=[],h=E(u);if(Array.isArray(h))for(let g=0;g<h.length;g++)s(d,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&s(d,g,h[g]);else"string"==typeof h&&o(d,h);return d}(s,o,u),d,g)}}(zr,Ao,s,!0)}function Ao(s,o){for(let u=function hA(s){return function kv(s){Zr.key=0,Zr.keyEnd=0,Zr.value=0,Zr.valueEnd=0,Zr.textEnd=s.length}(s),Nv(s,xl(s,0,Zr.textEnd))}(o);u>=0;u=Nv(o,u))zr(s,dA(o),!0)}function xo(s,o,u,d){const h=ye(),g=Jt(),y=es(2);g.firstUpdatePass&&Km(g,s,y,d),o!==Vt&&Zn(h,y,o)&&WI(g,g.data[Gr()],h,h[11],s,h[y+1]=function _A(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(E(s)))),s}(o,u),d,y)}function HI(s,o){return o>=s.expandoStartIndex}function Km(s,o,u,d){const h=s.data;if(null===h[u+1]){const g=h[Gr()],y=HI(s,u);yA(g,d)&&null===o&&!y&&(o=!1),o=function gA(s,o,u,d){const h=gs(s);let g=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(u=Up(u=Rh(null,s,o,u,d),o.attrs,d),g=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(u=Rh(h,s,o,u,d),null===g){let b=function Uv(s,o,u){const d=u?o.classBindings:o.styleBindings;if(0!==Jc(d))return s[au(d)]}(s,o,d);void 0!==b&&Array.isArray(b)&&(b=Rh(null,s,o,b[1],d),b=Up(b,o.attrs,d),function GI(s,o,u,d){s[au(u?o.classBindings:o.styleBindings)]=d}(s,o,d,b))}else g=function mA(s,o,u){let d;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)d=Up(d,s[g].hostAttrs,u);return Up(d,o.attrs,u)}(s,o,d)}return void 0!==g&&(d?o.residualClasses=g:o.residualStyles=g),u}(h,g,o,d),function ck(s,o,u,d,h,g){let y=g?o.classBindings:o.styleBindings,I=au(y),b=Jc(y);s[d]=u;let M,A=!1;if(Array.isArray(u)?(M=u[1],(null===M||lr(u,M)>0)&&(A=!0)):M=u,h)if(0!==b){const z=au(s[I+1]);s[d+1]=qm(z,I),0!==z&&(s[z+1]=ed(s[z+1],d)),s[I+1]=function uA(s,o){return 131071&s|o<<17}(s[I+1],d)}else s[d+1]=qm(I,0),0!==I&&(s[I+1]=ed(s[I+1],d)),I=d;else s[d+1]=qm(b,0),0===I?I=d:s[b+1]=ed(s[b+1],d),b=d;A&&(s[d+1]=VI(s[d+1])),Mv(s,M,d,!0),Mv(s,M,d,!1),function cA(s,o,u,d,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&lr(g,o)>=0&&(u[d+1]=zm(u[d+1]))}(o,M,s,d,g),y=qm(I,b),g?o.classBindings=y:o.styleBindings=y}(h,g,o,u,y,d)}}function Rh(s,o,u,d,h){let g=null;const y=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<y&&(g=o[I],d=Up(d,g.hostAttrs,h),g!==s);)I++;return null!==s&&(u.directiveStylingLast=I),d}function Up(s,o,u){const d=u?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const y=o[g];"number"==typeof y?h=y:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),zr(s,y,!!u||o[++g]))}return void 0===s?null:s}function WI(s,o,u,d,h,g,y,I){if(!(3&o.type))return;const b=s.data,A=b[I+1],M=function Rv(s){return 1==(1&s)}(A)?ZI(b,o,u,h,Jc(A),y):void 0;Vp(M)||(Vp(g)||function xv(s){return 2==(2&s)}(A)&&(g=ZI(b,null,u,h,I,y)),function Es(s,o,u,d,h){if(o)h?s.addClass(u,d):s.removeClass(u,d);else{let g=-1===d.indexOf("-")?void 0:yt.DashCase;null==h?s.removeStyle(u,d,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=yt.Important),s.setStyle(u,d,h,g))}}(d,y,lo(Gr(),u),h,g))}function ZI(s,o,u,d,h,g){const y=null===o;let I;for(;h>0;){const b=s[h],A=Array.isArray(b),M=A?b[1]:b,L=null===M;let z=u[h+1];z===Vt&&(z=L?wt:void 0);let ee=L?en(z,d):M===d?z:void 0;if(A&&!Vp(ee)&&(ee=en(b,d)),Vp(ee)&&(I=ee,y))return I;const Ee=s[h+1];h=y?au(Ee):Jc(Ee)}if(null!==o){let b=g?o.residualClasses:o.residualStyles;null!=b&&(I=en(b,d))}return I}function Vp(s){return void 0!==s}function yA(s,o){return 0!=(s.flags&(o?8:16))}function Ym(s,o=""){const u=ye(),d=Jt(),h=s+22,g=d.firstCreatePass?Ih(d,h,1,o,null):d.data[h],y=u[h]=function ol(s,o){return s.createText(o)}(u[11],o);Bc(d,u,y,g),ri(g,!1)}function Bv(s){return Bp("",s,""),Bv}function Bp(s,o,u){const d=ye(),h=Dl(d,s,o,u);return h!==Vt&&iu(d,Gr(),h),Bp}function Qm(s,o,u,d,h){const g=ye(),y=ou(g,s,o,u,d,h);return y!==Vt&&iu(g,Gr(),y),Qm}function Gv(s,o,u){const d=ye();if(Zn(d,ho(),o)){const g=Jt(),y=wn();qs(g,y,d,s,o,function $S(s,o,u){return(null===s||ti(s))&&(u=function Du(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(u[o.index])),u[11]}(gs(g.data),y,d),u,!0)}return Gv}const td=void 0;var SA=["en",[["a","p"],["AM","PM"],td],[["AM","PM"],td,td],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],td,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],td,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",td,"{1} 'at' {0}",td],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function DA(s){const u=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let Mh={};function $p(s){const o=function qv(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=AA(o);if(u)return u;const d=o.split("-")[0];if(u=AA(d),u)return u;if("en"===d)return SA;throw new pe(701,!1)}function fC(s){return $p(s)[Tt.PluralCase]}function AA(s){return s in Mh||(Mh[s]=xt.ng&&xt.ng.common&&xt.ng.common.locales&&xt.ng.common.locales[s]),Mh[s]}var Tt=(()=>((Tt=Tt||{})[Tt.LocaleId=0]="LocaleId",Tt[Tt.DayPeriodsFormat=1]="DayPeriodsFormat",Tt[Tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tt[Tt.DaysFormat=3]="DaysFormat",Tt[Tt.DaysStandalone=4]="DaysStandalone",Tt[Tt.MonthsFormat=5]="MonthsFormat",Tt[Tt.MonthsStandalone=6]="MonthsStandalone",Tt[Tt.Eras=7]="Eras",Tt[Tt.FirstDayOfWeek=8]="FirstDayOfWeek",Tt[Tt.WeekendRange=9]="WeekendRange",Tt[Tt.DateFormat=10]="DateFormat",Tt[Tt.TimeFormat=11]="TimeFormat",Tt[Tt.DateTimeFormat=12]="DateTimeFormat",Tt[Tt.NumberSymbols=13]="NumberSymbols",Tt[Tt.NumberFormats=14]="NumberFormats",Tt[Tt.CurrencyCode=15]="CurrencyCode",Tt[Tt.CurrencySymbol=16]="CurrencySymbol",Tt[Tt.CurrencyName=17]="CurrencyName",Tt[Tt.Currencies=18]="Currencies",Tt[Tt.Directionality=19]="Directionality",Tt[Tt.PluralCase=20]="PluralCase",Tt[Tt.ExtraData=21]="ExtraData",Tt))();const Ml="en-US";let pC=Ml;function u0(s,o,u,d,h){if(s=Y(s),Array.isArray(s))for(let g=0;g<s.length;g++)u0(s[g],o,u,d,h);else{const g=Jt(),y=ye();let I=nu(s)?s:Y(s.provide),b=Wy(s);const A=gr(),M=1048575&A.providerIndexes,L=A.directiveStart,z=A.providerIndexes>>20;if(nu(s)||!s.multi){const ee=new ea(b,h,Eh),Ee=c0(I,o,h?M:M+z,L);-1===Ee?(Ic(na(A,y),g,I),l0(g,s,o.length),o.push(I),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),u.push(ee),y.push(ee)):(u[Ee]=ee,y[Ee]=ee)}else{const ee=c0(I,o,M+z,L),Ee=c0(I,o,M,M+z),Ge=Ee>=0&&u[Ee];if(h&&!Ge||!h&&!(ee>=0&&u[ee])){Ic(na(A,y),g,I);const tt=function GA(s,o,u,d,h){const g=new ea(s,u,Eh);return g.multi=[],g.index=o,g.componentProviders=0,UC(g,h,d&&!u),g}(h?VC:HA,u.length,h,d,b);!h&&Ge&&(u[Ee].providerFactory=tt),l0(g,s,o.length,0),o.push(I),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),u.push(tt),y.push(tt)}else l0(g,s,ee>-1?ee:Ee,UC(u[h?Ee:ee],b,!h&&d));!h&&d&&Ge&&u[Ee].componentProviders++}}}function l0(s,o,u,d){const h=nu(o),g=function gm(s){return!!s.useClass}(o);if(h||g){const b=(g?Y(o.useClass):o).prototype.ngOnDestroy;if(b){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=A.indexOf(u);-1===M?A.push(u,[d,b]):A[M+1].push(d,b)}else A.push(u,b)}}}function UC(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function c0(s,o,u,d){for(let h=u;h<d;h++)if(o[h]===s)return h;return-1}function HA(s,o,u,d){return t_(this.multi,[])}function VC(s,o,u,d){const h=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,I=ki(u,u[1],this.providerFactory.index,d);g=I.slice(0,y),t_(h,g);for(let b=y;b<I.length;b++)g.push(I[b])}else g=[],t_(h,g);return g}function t_(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function BC(s,o=[]){return u=>{u.providersResolver=(d,h)=>function LC(s,o,u){const d=Jt();if(d.firstCreatePass){const h=ti(s);u0(u,d.data,d.blueprint,h,!0),u0(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class Lh{}class lu{}function d0(s,o){return new jC(s,o??null)}class jC extends Lh{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _v(this);const d=Ar(o);this._bootstrapComponents=ha(d.bootstrap),this._r3Injector=QE(o,u,[{provide:Lh,useValue:this},{provide:_h,useValue:this.componentFactoryResolver}],fe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Uh extends lu{constructor(o){super(),this.moduleType=o}create(o){return new jC(this.moduleType,o)}}class Vh extends Lh{constructor(o,u,d){super(),this.componentFactoryResolver=new _v(this),this.instance=null;const h=new SE([...o,{provide:Lh,useValue:this},{provide:_h,useValue:this.componentFactoryResolver}],u||_m(),d,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function n_(s,o,u=null){return new Vh(s,o,u).injector}let qA=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const d=ph(0,u.type),h=d.length>0?n_([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=gt({token:s,providedIn:"environment",factory:()=>new s($e(Zc))}),s})();function $C(s){s.getStandaloneInjector=o=>o.get(qA).getOrCreateStandaloneInjector(s)}function dn(s,o,u,d){return function zt(s,o,u,d,h,g){const y=o+u;return Zn(s,y,h)?To(s,y+1,g?d.call(g,h):d(h)):En(s,y+1)}(ye(),er(),s,o,u,d)}function En(s,o){const u=s[o];return u===Vt?void 0:u}function tb(s,o){const u=Jt();let d;const h=s+22;u.firstCreatePass?(d=function YA(s,o){if(o)for(let u=o.length-1;u>=0;u--){const d=o[u];if(s===d.name)return d}}(o,u.pipeRegistry),u.data[h]=d,d.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(h,d.onDestroy)):d=u.data[h];const g=d.factory||(d.factory=oo(d.type)),y=Dn(Eh);try{const I=go(!1),b=g();return go(I),function Sh(s,o,u,d){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=d}(u,ye(),h,b),b}finally{Dn(y)}}function kl(s,o,u,d){const h=s+22,g=ye(),y=co(g,h);return function Bh(s,o){return s[1].data[o].pure}(g,h)?function Ii(s,o,u,d,h,g,y){const I=o+u;return bl(s,I,h,g)?To(s,I+2,y?d.call(y,h,g):d(h,g)):En(s,I+2)}(g,er(),o,y.transform,u,d,y):y.transform(u,d)}function _0(s){return o=>{setTimeout(s,void 0,o)}}const _a=class XA extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,d){let h=o,g=u||(()=>null),y=d;if(o&&"object"==typeof o){const b=o;h=b.next?.bind(b),g=b.error?.bind(b),y=b.complete?.bind(b)}this.__isAsync&&(g=_0(g),h&&(h=_0(h)),y&&(y=_0(y)));const I=super.subscribe({next:h,error:g,complete:y});return o instanceof J.w0&&o.add(I),I}};function rb(){return this._results[Cl()]()}class cu{get changes(){return this._changes||(this._changes=new _a)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Cl(),d=cu.prototype;d[u]||(d[u]=rb)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const d=this;d.dirty=!1;const h=function si(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Rc(s,o,u){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],g=o[d];if(u&&(h=u(h),g=u(g)),g!==h)return!1}return!0}(d._results,h,u))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ht=(()=>{class s{}return s.__NG_ELEMENT_ID__=ib,s})();const o_=Ht,a_=class extends o_{constructor(o,u,d){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(o,u){const d=this._declarationTContainer.tViews,h=Cm(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(d)),dv(d,h,o),new ss(h)}};function ib(){return bs(gr(),ye())}function bs(s,o){return 4&s.type?new a_(o,s,ru(s,o)):null}let od=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ro,s})();function Ro(){return u_(gr(),ye())}const JA=od,$i=class extends JA{constructor(o,u,d){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=d}get element(){return ru(this._hostTNode,this._hostLView)}get injector(){return new Fi(this._hostTNode,this._hostLView)}get parentInjector(){const o=ja(this._hostTNode,this._hostLView);if(wc(o)){const u=Bu(o,this._hostLView),d=Uu(o);return new Fi(u[1].data[d+8],u)}return new Fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=sb(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,d){let h,g;"number"==typeof d?h=d:null!=d&&(h=d.index,g=d.injector);const y=o.createEmbeddedView(u||{},g);return this.insert(y,h),y}createComponent(o,u,d,h,g){const y=o&&!function Ku(s){return"function"==typeof s}(o);let I;if(y)I=u;else{const L=u||{};I=L.index,d=L.injector,h=L.projectableNodes,g=L.environmentInjector||L.ngModuleRef}const b=y?o:new su(Xt(o)),A=d||this.parentInjector;if(!g&&null==b.ngModule){const z=(y?A:this.parentInjector).get(Zc,null);z&&(g=z)}const M=b.create(A,h,void 0,g);return this.insert(M.hostView,I),M}insert(o,u){const d=o._lView,h=d[1];if(function Su(s){return Ni(s[3])}(d)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const L=d[3],z=new $i(L,L[6],L[3]);z.detach(z.indexOf(o))}}const g=this._adjustIndex(u),y=this._lContainer;!function My(s,o,u,d){const h=10+d,g=u.length;d>0&&(u[h-1][4]=o),d<g-10?(o[4]=u[h],Yu(u,10+d,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function Ny(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(h,d,y,g);const I=nr(g,y),b=d[11],A=Io(b,y[7]);return null!==A&&function Ry(s,o,u,d,h,g){d[0]=h,d[6]=o,jc(s,d,u,1,h,g)}(h,y[6],b,d,A,I),o.attachToViewContainerRef(),Yu(Qp(y),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=sb(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),d=rp(this._lContainer,u);d&&(Ga(Qp(this._lContainer),u),rh(d[1],d))}detach(o){const u=this._adjustIndex(o,-1),d=rp(this._lContainer,u);return d&&null!=Ga(Qp(this._lContainer),u)?new ss(d):null}_adjustIndex(o,u=0){return o??this.length+u}};function sb(s){return s[8]}function Qp(s){return s[8]||(s[8]=[])}function u_(s,o){let u;const d=o[s.index];if(Ni(d))u=d;else{let h;if(8&s.type)h=Fn(d);else{const g=o[11];h=g.createComment("");const y=Gn(s,o);Ja(g,Io(g,y),h,function am(s,o){return s.nextSibling(o)}(g,y),!1)}o[s.index]=u=dI(d,o,h,s),xm(o,u)}return new $i(u,s,o)}class y0{constructor(o){this.queryList=o,this.matches=null}clone(){return new y0(this.queryList)}setDirty(){this.queryList.setDirty()}}class l_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const d=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let g=0;g<d;g++){const y=u.getByIndex(g);h.push(this.queries[y.indexInDeclarationView].clone())}return new l_(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==cb(o,u).matches&&this.queries[u].setDirty()}}class v0{constructor(o,u,d=null){this.predicate=o,this.flags=u,this.read=d}}class c_{constructor(o=[]){this.queries=o}elementStart(o,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let d=0;d<this.length;d++){const h=null!==u?u.length:0,g=this.getByIndex(d).embeddedTView(o,h);g&&(g.indexInDeclarationView=d,null!==u?u.push(g):u=[g])}return null!==u?new c_(u):null}template(o,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Ol{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Ol(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const g=d[h];this.matchTNodeWithReadOption(o,u,ob(u,g)),this.matchTNodeWithReadOption(o,u,Hu(u,o,g,!1,!1))}else d===Ht?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Hu(u,o,d,!1,!1))}matchTNodeWithReadOption(o,u,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===yh||h===od||h===Ht&&4&u.type)this.addMatch(u.index,-2);else{const g=Hu(u,o,h,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,d)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function ob(s,o){const u=s.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===o)return u[d+1];return null}function ex(s,o,u,d){return-1===u?function ab(s,o){return 11&s.type?ru(s,o):4&s.type?bs(s,o):null}(o,s):-2===u?function tx(s,o,u){return u===yh?ru(o,s):u===Ht?bs(o,s):u===od?u_(o,s):void 0}(s,o,d):ki(s,s[1],u,o)}function ub(s,o,u,d){const h=o[19].queries[d];if(null===h.matches){const g=s.data,y=u.matches,I=[];for(let b=0;b<y.length;b+=2){const A=y[b];I.push(A<0?null:ex(o,g[A],y[b+1],u.metadata.read))}h.matches=I}return h.matches}function In(s,o,u,d){const h=s.queries.getByIndex(u),g=h.matches;if(null!==g){const y=ub(s,o,h,u);for(let I=0;I<g.length;I+=2){const b=g[I];if(b>0)d.push(y[I/2]);else{const A=g[I+1],M=o[-b];for(let L=10;L<M.length;L++){const z=M[L];z[17]===z[3]&&In(z[1],z,A,d)}if(null!==M[9]){const L=M[9];for(let z=0;z<L.length;z++){const ee=L[z];In(ee[1],ee,A,d)}}}}}return d}function lb(s){const o=ye(),u=Jt(),d=Ld();pc(d+1);const h=cb(u,d);if(s.dirty&&function Ma(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?In(u,o,d,[]):ub(u,o,h,d);s.reset(g,mp),s.notifyOnChanges()}return!0}return!1}function Xp(s,o,u,d){const h=Jt();if(h.firstCreatePass){const g=gr();(function $h(s,o,u){null===s.queries&&(s.queries=new c_),s.queries.track(new Ol(o,u))})(h,new v0(o,u,d),g.index),function Bt(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function ya(s,o,u){const d=new cu(4==(4&u));Dm(s,o,d,d.destroy),null===o[19]&&(o[19]=new l_),o[19].queries.push(new y0(d))}(h,ye(),u)}function d_(){return function jh(s,o){return s[19].queries[o].queryList}(ye(),Ld())}function cb(s,o){return s.queries.getByIndex(o)}function Yh(...s){}const v_=new Qt("Application Initializer");let wa=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Yh,this.reject=Yh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(Vm(g))u.push(g);else if(Xc(g)){const y=new Promise((I,b)=>{g.subscribe({complete:I,error:b})});u.push(y)}}Promise.all(u).then(()=>{d()}).catch(h=>{this.reject(h)}),0===u.length&&d(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)($e(v_,8))},s.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const A0=new Qt("AppId",{providedIn:"root",factory:function fu(){return`${Ll()}${Ll()}${Ll()}`}});function Ll(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const x0=new Qt("Platform Initializer"),w_=new Qt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ib=new Qt("appBootstrapListener");let gx=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const E_=new Qt("LocaleId",{providedIn:"root",factory:()=>Ke(E_,lt.Optional|lt.SkipSelf)||function mx(){return typeof $localize<"u"&&$localize.locale||Ml}()}),_x=new Qt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class wx{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Ex=(()=>{class s{compileModuleSync(u){return new Uh(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),g=ha(Ar(u).declarations).reduce((y,I)=>{const b=Xt(I);return b&&y.push(new su(b)),y},[]);return new wx(d,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Tx=(()=>Promise.resolve(0))();function og(s){typeof Zone>"u"?Tx.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ks{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _a(!1),this.onMicrotaskEmpty=new _a(!1),this.onStable=new _a(!1),this.onError=new _a(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&u,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Cb(){let s=xt.requestAnimationFrame,o=xt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Ax(s){const o=()=>{!function R0(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(xt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,M0(s),s.isCheckStableRunning=!0,C_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),M0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,h,g,y,I)=>{try{return bb(s),u.invokeTask(h,g,y,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Tb(s)}},onInvoke:(u,d,h,g,y,I,b)=>{try{return bb(s),u.invoke(h,g,y,I,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),Tb(s)}},onHasTask:(u,d,h,g)=>{u.hasTask(h,g),d===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,M0(s),C_(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,d,h,g)=>(u.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ks.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(Ks.isInAngularZone())throw new pe(909,!1)}run(o,u,d){return this._inner.run(o,u,d)}runTask(o,u,d,h){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+h,o,Sx,Yh,Yh);try{return g.runTask(y,u,d)}finally{g.cancelTask(y)}}runGuarded(o,u,d){return this._inner.runGuarded(o,u,d)}runOutsideAngular(o){return this._outer.run(o)}}const Sx={};function C_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function M0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function bb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Tb(s){s._nesting--,C_(s)}class Db{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _a,this.onMicrotaskEmpty=new _a,this.onStable=new _a,this.onError=new _a}run(o,u,d){return o.apply(u,d)}runGuarded(o,u,d){return o.apply(u,d)}runOutsideAngular(o){return o()}runTask(o,u,d,h){return o.apply(u,d)}}const ag=new Qt(""),b_=new Qt("");let ug,Sb=(()=>{class s{constructor(u,d,h){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ug||(function xb(s){ug=s}(h),h.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ks.assertNotInAngularZone(),og(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())og(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,h){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:h})}whenStable(u,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,h){return[]}}return s.\u0275fac=function(u){return new(u||s)($e(Ks),$e(Ab),$e(b_))},s.\u0275prov=gt({token:s,factory:s.\u0275fac}),s})(),Ab=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return ug?.findTestabilityInTree(this,u,d)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Ul=null;const Rb=new Qt("AllowMultipleToken"),N0=new Qt("PlatformDestroyListeners");class Mb{constructor(o,u){this.name=o,this.token=u}}function k0(s,o,u=[]){const d=`Platform: ${o}`,h=new Qt(d);return(g=[])=>{let y=F0();if(!y||y.injector.get(Rb,!1)){const I=[...u,...g,{provide:h,useValue:!0}];s?s(I):function Mx(s){if(Ul&&!Ul.get(Rb,!1))throw new pe(400,!1);Ul=s;const o=s.get(Pb);(function P0(s){const o=s.get(x0,null);o&&o.forEach(u=>u())})(s)}(function O0(s=[],o){return wl.create({name:o,providers:[{provide:vl,useValue:"platform"},{provide:N0,useValue:new Set([()=>Ul=null])},...s]})}(I,d))}return function T_(s){const o=F0();if(!o)throw new pe(401,!1);return o}()}}function F0(){return Ul?.get(Pb)??null}let Pb=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const h=function L0(s,o){let u;return u="noop"===s?new Db:("zone.js"===s?void 0:s)||new Ks(o),u}(d?.ngZone,function D_(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),g=[{provide:Ks,useValue:h}];return h.run(()=>{const y=wl.create({providers:g,parent:this.injector,name:u.moduleType.name}),I=u.create(y),b=I.injector.get(_p,null);if(!b)throw new pe(402,!1);return h.runOutsideAngular(()=>{const A=h.onError.subscribe({next:M=>{b.handleError(M)}});I.onDestroy(()=>{Mo(this._modules,I),A.unsubscribe()})}),function kb(s,o,u){try{const d=u();return Vm(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(b,h,()=>{const A=I.injector.get(wa);return A.runInitializers(),A.donePromise.then(()=>(function gC(s){Ut(s,"Expected localeId to be defined"),"string"==typeof s&&(pC=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(E_,Ml)||Ml),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,d=[]){const h=Ob({},d);return function xx(s,o,u){const d=new Uh(u);return Promise.resolve(d)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(u){const d=u.injector.get(lg);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new pe(-403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(N0,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)($e(wl))},s.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Ob(s,o){return Array.isArray(o)?o.reduce(Ob,s):{...s,...o}}let lg=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,d,h){this._zone=u,this._injector=d,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new O.y(I=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Ks.assertNotInAngularZone(),og(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Ks.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{b.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ae.T)(g,y.pipe((0,oe.B)()))}bootstrap(u,d){const h=u instanceof xE;if(!this._injector.get(wa).done)throw!h&&$n(u),new pe(405,false);let y;y=h?u:this._injector.get(_h).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const I=function Rx(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Lh),A=y.create(wl.NULL,[],d||y.selector,I),M=A.location.nativeElement,L=A.injector.get(ag,null);return L?.registerApplication(M),A.onDestroy(()=>{this.detachView(A.hostView),Mo(this.components,A),L?.unregisterApplication(M)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;Mo(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const d=this._injector.get(Ib,[]);d.push(...this._bootstrapListeners),d.forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Mo(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new pe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)($e(Ks),$e(Zc),$e(_p))},s.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Mo(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function Vl(){return!1}let Nx=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ub,s})();function Ub(s){return function j0(s,o,u){if(Pi(s)&&!u){const d=ur(s.index,o);return new ss(d,d)}return 47&s.type?new ss(o[16],o):null}(gr(),ye(),16==(16&s))}class Qh{constructor(){}supports(o){return Dp(o)}create(o){return new Fx(o)}}const Ox=(s,o)=>o;class Fx{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Ox}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,d=this._removalsHead,h=0,g=null;for(;u||d;){const y=!d||u&&u.currentIndex<qb(d,h,g)?u:d,I=qb(y,h,g),b=y.currentIndex;if(y===d)h--,d=d._nextRemoved;else if(u=u._next,null==y.previousIndex)h++;else{g||(g=[]);const A=I-h,M=b-h;if(A!=M){for(let z=0;z<A;z++){const ee=z<g.length?g[z]:g[z]=0,Ee=ee+z;M<=Ee&&Ee<A&&(g[z]=ee+1)}g[y.previousIndex]=M-A}}I!==b&&o(y,I,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Dp(o))throw new pe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,y,u=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],y=this._trackByFn(I,g),null!==u&&Object.is(u.trackById,y)?(d&&(u=this._verifyReinsertion(u,g,y,I)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,y,I),d=!0),u=u._next}else h=0,function Om(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Cl()]();let d;for(;!(d=u.next()).done;)o(d.value)}}(o,I=>{y=this._trackByFn(h,I),null!==u&&Object.is(u.trackById,y)?(d&&(u=this._verifyReinsertion(u,I,y,h)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,y,h),d=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,d,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,h)):o=this._addAfter(new Lx(u,d),g,h),o}_verifyReinsertion(o,u,d,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,u,d),this._addToMoves(o,d),o}_moveAfter(o,u,d){return this._unlink(o),this._insertAfter(o,u,d),this._addToMoves(o,d),o}_addAfter(o,u,d){return this._insertAfter(o,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,d){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new M_),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,d=o._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new M_),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Lx{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $0{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const u=o._prevDup,d=o._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class M_{constructor(){this.map=new Map}put(o){const u=o.trackById;let d=this.map.get(u);d||(d=new $0,this.map.set(u,d)),d.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qb(s,o,u){const d=s.previousIndex;if(null===d)return d;let h=0;return u&&d<u.length&&(h=u[d]),d+o+h}class H0{constructor(){}supports(o){return o instanceof Map||Fm(o)}create(){return new Ux}}class Ux{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Fm(o)))throw new pe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(h,d);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const d=o._prev;return u._next=o,u._prev=d,o._prev=u,d&&(d._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const g=h._prev,y=h._next;return g&&(g._next=y),y&&(y._prev=g),h._next=null,h._prev=null,h}const d=new Vx(o);return this._records.set(o,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(d=>u(o[d],d))}}class Vx{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function G0(){return new cg([new Qh])}let cg=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(null!=d){const h=d.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||G0()),deps:[[s,new D,new Ju]]}}find(u){const d=this.factories.find(h=>h.supports(u));if(null!=d)return d;throw new pe(901,!1)}}return s.\u0275prov=gt({token:s,providedIn:"root",factory:G0}),s})();function N_(){return new Xh([new H0])}let Xh=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(d){const h=d.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||N_()),deps:[[s,new D,new Ju]]}}find(u){const d=this.factories.find(h=>h.supports(u));if(d)return d;throw new pe(901,!1)}}return s.\u0275prov=gt({token:s,providedIn:"root",factory:N_}),s})();const P_=k0(null,"core",[]);let Wb=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)($e(lg))},s.\u0275mod=An({type:s}),s.\u0275inj=cs({}),s})();function jx(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(at,Te,F)=>{F.d(Te,{Z:()=>He});var c=F(2090),J=F(4859),O=F(9681),ae=F(1877);class oe{constructor(pe,De){this._delegate=pe,this.firebase=De,(0,O._addComponent)(pe,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(pe,De=O._DEFAULT_ENTRY_NAME){var Se;this._delegate.checkDestroyed();const Oe=this._delegate.container.getProvider(pe);return!Oe.isInitialized()&&"EXPLICIT"===(null===(Se=Oe.getComponent())||void 0===Se?void 0:Se.instantiationMode)&&Oe.initialize(),Oe.getImmediate({identifier:De})}_removeServiceInstance(pe,De=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(De)}_addComponent(pe){(0,O._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,O._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function de(){const nt=function fe(nt){const pe={},De={__esModule:!0,initializeApp:function Re(Pe,G={}){const Ie=O.initializeApp(Pe,G);if((0,c.r3)(pe,Ie.name))return pe[Ie.name];const Z=new nt(Ie,De);return pe[Ie.name]=Z,Z},app:Oe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function xe(Pe){const G=Pe.name,Ie=G.replace("-compat","");if(O._registerComponent(Pe)&&"PUBLIC"===Pe.type){const Z=(X=Oe())=>{if("function"!=typeof X[Ie])throw me.create("invalid-app-argument",{appName:G});return X[Ie]()};void 0!==Pe.serviceProps&&(0,c.ZB)(Z,Pe.serviceProps),De[Ie]=Z,nt.prototype[Ie]=function(...X){return this._getService.bind(this,G).apply(this,Pe.multipleInstances?X:[])}}return"PUBLIC"===Pe.type?De[Ie]:null},removeApp:function Se(Pe){delete pe[Pe]},useAsService:function Ve(Pe,G){return"serverAuth"===G?null:G},modularAPIs:O}};function Oe(Pe){if(!(0,c.r3)(pe,Pe=Pe||O._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:Pe});return pe[Pe]}return De.default=De,Object.defineProperty(De,"apps",{get:function Ce(){return Object.keys(pe).map(Pe=>pe[Pe])}}),Oe.App=nt,De}(oe);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function pe(De){(0,c.ZB)(nt,De)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),nt}(),q=new ae.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=H;!function Ae(nt){(0,O.registerVersion)("@firebase/app-compat","0.2.4",nt)}()},9681:(at,Te,F)=>{F.r(Te),F.d(Te,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>eo,_DEFAULT_ENTRY_NAME:()=>pn,_addComponent:()=>Kt,_addOrOverwriteComponent:()=>pr,_apps:()=>Ut,_clearComponents:()=>cs,_components:()=>_t,_getProvider:()=>gt,_registerComponent:()=>Fr,_removeServiceInstance:()=>hn,deleteApp:()=>Os,getApp:()=>fi,getApps:()=>Vr,initializeApp:()=>ks,onLog:()=>lt,registerVersion:()=>Xr,setLogLevel:()=>Fs});var c=F(5861),J=F(4859),O=F(1877),ae=F(2090),oe=F(8766);class ne{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Ke=>{if(function me($e){return"VERSION"===$e.getComponent()?.type}(Ke)){const Ct=Ke.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(Ke=>Ke).join(" ")}}const fe="@firebase/app",H=new O.Yd("@firebase/app"),pn="[DEFAULT]",Nt={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ut=new Map,_t=new Map;function Kt($e,be){try{$e.container.addComponent(be)}catch(Ke){H.debug(`Component ${be.name} failed to register with FirebaseApp ${$e.name}`,Ke)}}function pr($e,be){$e.container.addOrOverwriteComponent(be)}function Fr($e){const be=$e.name;if(_t.has(be))return H.debug(`There were multiple attempts to register component ${be}.`),!1;_t.set(be,$e);for(const Ke of Ut.values())Kt(Ke,$e);return!0}function gt($e,be){const Ke=$e.container.getProvider("heartbeat").getImmediate({optional:!0});return Ke&&Ke.triggerHeartbeat(),$e.container.getProvider(be)}function hn($e,be,Ke=pn){gt($e,be).clearInstance(Ke)}function cs(){_t.clear()}const Lr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ur{constructor(be,Ke,Ct){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Ke),this._name=Ke.name,this._automaticDataCollectionEnabled=Ke.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}const eo="9.17.2";function ks($e,be={}){let Ke=$e;"object"!=typeof be&&(be={name:be});const Ct=Object.assign({name:pn,automaticDataCollectionEnabled:!1},be),Rt=Ct.name;if("string"!=typeof Rt||!Rt)throw Lr.create("bad-app-name",{appName:String(Rt)});if(Ke||(Ke=(0,ae.aH)()),!Ke)throw Lr.create("no-options");const Ot=Ut.get(Rt);if(Ot){if((0,ae.vZ)(Ke,Ot.options)&&(0,ae.vZ)(Ct,Ot.config))return Ot;throw Lr.create("duplicate-app",{appName:Rt})}const Sr=new J.H0(Rt);for(const B of _t.values())Sr.addComponent(B);const j=new Ur(Ke,Ct,Sr);return Ut.set(Rt,j),j}function fi($e=pn){const be=Ut.get($e);if(!be&&$e===pn)return ks();if(!be)throw Lr.create("no-app",{appName:$e});return be}function Vr(){return Array.from(Ut.values())}function Os($e){return _n.apply(this,arguments)}function _n(){return(_n=(0,c.Z)(function*($e){const be=$e.name;Ut.has(be)&&(Ut.delete(be),yield Promise.all($e.container.getProviders().map(Ke=>Ke.delete())),$e.isDeleted=!0)})).apply(this,arguments)}function Xr($e,be,Ke){var Ct;let Rt=null!==(Ct=Nt[$e])&&void 0!==Ct?Ct:$e;Ke&&(Rt+=`-${Ke}`);const Ot=Rt.match(/\s|\//),Sr=be.match(/\s|\//);if(Ot||Sr){const j=[`Unable to register library "${Rt}" with version "${be}":`];return Ot&&j.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),Ot&&Sr&&j.push("and"),Sr&&j.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void H.warn(j.join(" "))}Fr(new J.wA(`${Rt}-version`,()=>({library:Rt,version:be}),"VERSION"))}function lt($e,be){if(null!==$e&&"function"!=typeof $e)throw Lr.create("invalid-log-argument");(0,O.Am)($e,be)}function Fs($e){(0,O.Ub)($e)}const br="firebase-heartbeat-store";let Ls=null;function xt(){return Ls||(Ls=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:($e,be)=>{0===be&&$e.createObjectStore(br)}}).catch($e=>{throw Lr.create("idb-open",{originalErrorMessage:$e.message})})),Ls}function bt(){return(bt=(0,c.Z)(function*($e){try{return(yield xt()).transaction(br).objectStore(br).get(kn($e))}catch(be){if(be instanceof ae.ZR)H.warn(be.message);else{const Ke=Lr.create("idb-get",{originalErrorMessage:be?.message});H.warn(Ke.message)}}})).apply(this,arguments)}function to($e,be){return yn.apply(this,arguments)}function yn(){return(yn=(0,c.Z)(function*($e,be){try{const Ct=(yield xt()).transaction(br,"readwrite");return yield Ct.objectStore(br).put(be,kn($e)),Ct.done}catch(Ke){if(Ke instanceof ae.ZR)H.warn(Ke.message);else{const Ct=Lr.create("idb-set",{originalErrorMessage:Ke?.message});H.warn(Ct.message)}}})).apply(this,arguments)}function kn($e){return`${$e.name}!${$e.options.appId}`}class Lo{constructor(be){this.container=be,this._heartbeatsCache=null;const Ke=this.container.getProvider("app").getImmediate();this._storage=new Yt(Ke),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var be=this;return(0,c.Z)(function*(){const Ct=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=on();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!be._heartbeatsCache.heartbeats.some(Ot=>Ot.date===Rt))return be._heartbeatsCache.heartbeats.push({date:Rt,agent:Ct}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(Ot=>{const Sr=new Date(Ot.date).valueOf();return Date.now()-Sr<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,c.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Ke=on(),{heartbeatsToSend:Ct,unsentEntries:Rt}=function Yi($e,be=1024){const Ke=[];let Ct=$e.slice();for(const Rt of $e){const Ot=Ke.find(Sr=>Sr.agent===Rt.agent);if(Ot){if(Ot.dates.push(Rt.date),Br(Ke)>be){Ot.dates.pop();break}}else if(Ke.push({agent:Rt.agent,dates:[Rt.date]}),Br(Ke)>be){Ke.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:Ke,unsentEntries:Ct}}(be._heartbeatsCache.heartbeats),Ot=(0,ae.L)(JSON.stringify({version:2,heartbeats:Ct}));return be._heartbeatsCache.lastSentHeartbeatDate=Ke,Rt.length>0?(be._heartbeatsCache.heartbeats=Rt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),Ot})()}}function on(){return(new Date).toISOString().substring(0,10)}class Yt{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,c.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function dt($e){return bt.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Ke=this;return(0,c.Z)(function*(){var Ct;if(yield Ke._canUseIndexedDBPromise){const Ot=yield Ke.read();return to(Ke.app,{lastSentHeartbeatDate:null!==(Ct=be.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Ot.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Ke=this;return(0,c.Z)(function*(){var Ct;if(yield Ke._canUseIndexedDBPromise){const Ot=yield Ke.read();return to(Ke.app,{lastSentHeartbeatDate:null!==(Ct=be.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Ot.lastSentHeartbeatDate,heartbeats:[...Ot.heartbeats,...be.heartbeats]})}})()}}function Br($e){return(0,ae.L)(JSON.stringify({version:2,heartbeats:$e})).length}!function Qi($e){Fr(new J.wA("platform-logger",be=>new ne(be),"PRIVATE")),Fr(new J.wA("heartbeat",be=>new Lo(be),"PRIVATE")),Xr(fe,"0.9.4",$e),Xr(fe,"0.9.4","esm2017"),Xr("fire-js","")}("")},4859:(at,Te,F)=>{F.d(Te,{H0:()=>fe,wA:()=>O,zt:()=>oe});var c=F(5861),J=F(2090);class O{constructor(H,q,Y){this.name=H,this.instanceFactory=q,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ae="[DEFAULT]";class oe{constructor(H,q){this.name=H,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const q=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(q)){const Y=new J.BH;if(this.instancesDeferred.set(q,Y),this.isInitialized(q)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:q});Be&&Y.resolve(Be)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(H){var q;const Y=this.normalizeInstanceIdentifier(H?.identifier),Be=null!==(q=H?.optional)&&void 0!==q&&q;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Ae){if(Be)return null;throw Ae}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function me(de){return"EAGER"===de.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[q,Y]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(q);try{const Ae=this.getOrInitializeService({instanceIdentifier:Be});Y.resolve(Ae)}catch{}}}}clearInstance(H=ae){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,c.Z)(function*(){const q=Array.from(H.instances.values());yield Promise.all([...q.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...q.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ae){return this.instances.has(H)}getOptions(H=ae){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:q={}}=H,Y=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:Y,options:q});for(const[Ae,He]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Ae)&&He.resolve(Be);return Be}onInit(H,q){var Y;const Be=this.normalizeInstanceIdentifier(q),Ae=null!==(Y=this.onInitCallbacks.get(Be))&&void 0!==Y?Y:new Set;Ae.add(H),this.onInitCallbacks.set(Be,Ae);const He=this.instances.get(Be);return He&&H(He,Be),()=>{Ae.delete(H)}}invokeOnInitCallbacks(H,q){const Y=this.onInitCallbacks.get(q);if(Y)for(const Be of Y)try{Be(H,q)}catch{}}getOrInitializeService({instanceIdentifier:H,options:q={}}){let Y=this.instances.get(H);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(de=H,de===ae?void 0:de),options:q}),this.instances.set(H,Y),this.instancesOptions.set(H,q),this.invokeOnInitCallbacks(Y,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,Y)}catch{}var de;return Y||null}normalizeInstanceIdentifier(H=ae){return this.component?this.component.multipleInstances?H:ae:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const q=this.getProvider(H.name);if(q.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);q.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const q=new oe(H,this);return this.providers.set(H,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(at,Te,F)=>{F.d(Te,{Am:()=>de,Ub:()=>fe,Yd:()=>me,in:()=>J});const c=[];var J=(()=>{return(H=J||(J={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",J;var H})();const O={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ae=J.INFO,oe={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ne=(H,q,...Y)=>{if(q<H.logLevel)return;const Be=(new Date).toISOString(),Ae=oe[q];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Ae](`[${Be}]  ${H.name}:`,...Y)};class me{constructor(q){this.name=q,this._logLevel=ae,this._logHandler=ne,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in J))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?O[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...q),this._logHandler(this,J.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...q),this._logHandler(this,J.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,J.INFO,...q),this._logHandler(this,J.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,J.WARN,...q),this._logHandler(this,J.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...q),this._logHandler(this,J.ERROR,...q)}}function fe(H){c.forEach(q=>{q.setLogLevel(H)})}function de(H,q){for(const Y of c){let Be=null;q&&q.level&&(Be=O[q.level]),Y.userLogHandler=null===H?null:(Ae,He,...nt)=>{const pe=nt.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch{return null}}).filter(De=>De).join(" ");He>=(Be??Ae.logLevel)&&H({level:J[He].toLowerCase(),message:pe,args:nt,type:Ae.name})}}}},259:(at,Te,F)=>{F.d(Te,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=F(9681);(0,c.registerVersion)("firebase","9.17.2","app")},9260:(at,Te,F)=>{F.d(Te,{Z:()=>c.Z});var c=F(3942);c.Z.registerVersion("firebase","9.17.2","app-compat")},4217:(at,Te,F)=>{F.r(Te);var c=F(5861),J=F(3942),O=F(2090),ae=F(9681),oe=F(1877),ne=F(655),me=F(4859);const He=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Se=new oe.Yd("@firebase/auth");function Oe(v,...p){Se.logLevel<=oe.in.ERROR&&Se.error(`Auth (${ae.SDK_VERSION}): ${v}`,...p)}function Re(v,...p){throw Pe(v,...p)}function Ce(v,...p){return Pe(v,...p)}function xe(v,p,m){const E=Object.assign(Object.assign({},nt()),{[p]:m});return new O.LL("auth","Firebase",E).create(p,{appName:v.name})}function Ve(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Re(v,"argument-error"),xe(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pe(v,...p){if("string"!=typeof v){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return pe.create(v,...p)}function G(v,p,...m){if(!v)throw Pe(p,...m)}function Ie(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Oe(p),new Error(p)}function Z(v,p){v||Ie(p)}const X=new Map;function ie(v){Z(v instanceof Function,"Expected a class definition");let p=X.get(v);return p?(Z(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,X.set(v,p),p)}function ke(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ut(){return"http:"===nn()||"https:"===nn()}function nn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ut{constructor(p,m){this.shortDelay=p,this.longDelay=m,Z(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function pn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _t(v,p){Z(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Kt{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Fr=new Ut(3e4,6e4);function gt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function hn(v,p,m,E){return cs.apply(this,arguments)}function cs(){return(cs=(0,c.Z)(function*(v,p,m,E,x={}){return ar(v,x,(0,c.Z)(function*(){let N={},K={};E&&("GET"===p?K=E:N={body:JSON.stringify(E)});const he=(0,O.xO)(Object.assign({key:v.config.apiKey},K)).slice(1),je=yield v._getAdditionalHeaders();return je["Content-Type"]="application/json",v.languageCode&&(je["X-Firebase-Locale"]=v.languageCode),Kt.fetch()(ks(v,v.config.apiHost,m,he),Object.assign({method:p,headers:je,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function ar(v,p,m){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,c.Z)(function*(v,p,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},pr),p);try{const x=new fi(v),N=yield Promise.race([m(),x.promise]);x.clearNetworkTimeout();const K=yield N.json();if("needConfirmation"in K)throw Vr(v,"account-exists-with-different-credential",K);if(N.ok&&!("errorMessage"in K))return K;{const he=N.ok?K.errorMessage:K.error.message,[je,ze]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw Vr(v,"credential-already-in-use",K);if("EMAIL_EXISTS"===je)throw Vr(v,"email-already-in-use",K);if("USER_DISABLED"===je)throw Vr(v,"user-disabled",K);const It=E[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(ze)throw xe(v,It,ze);Re(v,It)}}catch(x){if(x instanceof O.ZR)throw x;Re(v,"internal-error",{message:String(x)})}})).apply(this,arguments)}function Ur(v,p,m,E){return eo.apply(this,arguments)}function eo(){return(eo=(0,c.Z)(function*(v,p,m,E,x={}){const N=yield hn(v,p,m,E,x);return"mfaPendingCredential"in N&&Re(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function ks(v,p,m,E){const x=`${p}${m}?${E}`;return v.config.emulator?_t(v.config,x):`${v.config.apiScheme}://${x}`}class fi{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ce(this.auth,"network-request-failed")),Fr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vr(v,p,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const x=Ce(v,p,E);return x.customData._tokenResponse=m,x}function _n(){return(_n=(0,c.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Xr(v,p){return lt.apply(this,arguments)}function lt(){return(lt=(0,c.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Fs(v,p){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,c.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Dn(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function xt(){return(xt=(0,c.Z)(function*(v,p=!1){const m=(0,O.m9)(v),E=yield m.getIdToken(p),x=bt(E);G(x&&x.exp&&x.auth_time&&x.iat,m.auth,"internal-error");const N="object"==typeof x.firebase?x.firebase:void 0,K=N?.sign_in_provider;return{claims:x,token:E,authTime:Dn(dt(x.auth_time)),issuedAtTime:Dn(dt(x.iat)),expirationTime:Dn(dt(x.exp)),signInProvider:K||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function dt(v){return 1e3*Number(v)}function bt(v){const[p,m,E]=v.split(".");if(void 0===p||void 0===m||void 0===E)return Oe("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,O.tV)(m);return x?JSON.parse(x):(Oe("Failed to decode base64 JWT payload"),null)}catch(x){return Oe("Caught error parsing JWT payload as JSON",x?.toString()),null}}function yn(v,p){return kn.apply(this,arguments)}function kn(){return(kn=(0,c.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof O.ZR&&Tr(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function Tr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Dr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,c.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,c.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class Lo{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dn(this.lastLoginAt),this.creationTime=Dn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function on(v){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,c.Z)(function*(v){var p;const m=v.auth,E=yield v.getIdToken(),x=yield yn(v,Fs(m,{idToken:E}));G(x?.users.length,m,"internal-error");const N=x.users[0];v._notifyReloadListener(N);const K=null!==(p=N.providerUserInfo)&&void 0!==p&&p.length?$e(N.providerUserInfo):[],he=Qi(v.providerData,K),It=!!v.isAnonymous&&!(v.email&&N.passwordHash||he?.length),ht={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:he,metadata:new Lo(N.createdAt,N.lastLoginAt),isAnonymous:It};Object.assign(v,ht)})).apply(this,arguments)}function Br(){return(Br=(0,c.Z)(function*(v){const p=(0,O.m9)(v);yield on(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Qi(v,p){return[...v.filter(E=>!p.some(x=>x.providerId===E.providerId)),...p]}function $e(v){return v.map(p=>{var{providerId:m}=p,E=(0,ne._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ke(){return(Ke=(0,c.Z)(function*(v,p){const m=yield ar(v,{},(0,c.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:N}=v.config,K=ks(v,x,"/v1/token",`key=${N}`),he=yield v._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",Kt.fetch()(K,{method:"POST",headers:he,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){G(p.idToken,"internal-error"),G(typeof p.idToken<"u","internal-error"),G(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function to(v){const p=bt(v);return G(p,"internal-error"),G(typeof p.exp<"u","internal-error"),G(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,c.Z)(function*(){return G(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,c.Z)(function*(){const{accessToken:x,refreshToken:N,expiresIn:K}=yield function be(v,p){return Ke.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(x,N,Number(K))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:x,expirationTime:N}=m,K=new Ct;return E&&(G("string"==typeof E,"internal-error",{appName:p}),K.refreshToken=E),x&&(G("string"==typeof x,"internal-error",{appName:p}),K.accessToken=x),N&&(G("number"==typeof N,"internal-error",{appName:p}),K.expirationTime=N),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Ct,this.toJSON())}_performRefresh(){return Ie("not implemented")}}function Rt(v,p){G("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Ot{constructor(p){var{uid:m,auth:E,stsTokenManager:x}=p,N=(0,ne._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Lo(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,c.Z)(function*(){const E=yield yn(m,m.stsTokenManager.getToken(m.auth,p));return G(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function Ls(v){return xt.apply(this,arguments)}(this,p)}reload(){return function Yt(v){return Br.apply(this,arguments)}(this)}_assign(p){this!==p&&(G(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Ot(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,c.Z)(function*(){let x=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),x=!0),m&&(yield on(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,c.Z)(function*(){const m=yield p.getIdToken();return yield yn(p,function Os(v,p){return _n.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,x,N,K,he,je,ze,It;const ht=null!==(E=m.displayName)&&void 0!==E?E:void 0,Vn=null!==(x=m.email)&&void 0!==x?x:void 0,ns=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,ml=null!==(K=m.photoURL)&&void 0!==K?K:void 0,lp=null!==(he=m.tenantId)&&void 0!==he?he:void 0,ca=null!==(je=m._redirectEventId)&&void 0!==je?je:void 0,rs=null!==(ze=m.createdAt)&&void 0!==ze?ze:void 0,_l=null!==(It=m.lastLoginAt)&&void 0!==It?It:void 0,{uid:da,emailVerified:cp,isAnonymous:dp,providerData:dh,stsTokenManager:hm}=m;G(da&&hm,p,"internal-error");const Oy=Ct.fromJSON(this.name,hm);G("string"==typeof da,p,"internal-error"),Rt(ht,p.name),Rt(Vn,p.name),G("boolean"==typeof cp,p,"internal-error"),G("boolean"==typeof dp,p,"internal-error"),Rt(ns,p.name),Rt(ml,p.name),Rt(lp,p.name),Rt(ca,p.name),Rt(rs,p.name),Rt(_l,p.name);const yl=new Ot({uid:da,auth:p,email:Vn,emailVerified:cp,displayName:ht,isAnonymous:dp,photoURL:ml,phoneNumber:ns,tenantId:lp,stsTokenManager:Oy,createdAt:rs,lastLoginAt:_l});return dh&&Array.isArray(dh)&&(yl.providerData=dh.map(hh=>Object.assign({},hh))),ca&&(yl._redirectEventId=ca),yl}static _fromIdTokenResponse(p,m,E=!1){return(0,c.Z)(function*(){const x=new Ct;x.updateFromServerResponse(m);const N=new Ot({uid:m.localId,auth:p,stsTokenManager:x,isAnonymous:E});return yield on(N),N})()}}const j=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(m,E){var x=this;return(0,c.Z)(function*(){x.storage[m]=E})()}_get(m){var E=this;return(0,c.Z)(function*(){const x=E.storage[m];return void 0===x?null:x})()}_remove(m){var E=this;return(0,c.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function B(v,p,m){return`firebase:${v}:${p}:${m}`}class W{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:x,name:N}=this.auth;this.fullUserKey=B(this.userKey,x.apiKey,N),this.fullPersistenceKey=B("persistence",x.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,c.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Ot._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,c.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,c.Z)(function*(){if(!m.length)return new W(ie(j),p,E);const x=(yield Promise.all(m.map(function(){var ze=(0,c.Z)(function*(It){if(yield It._isAvailable())return It});return function(It){return ze.apply(this,arguments)}}()))).filter(ze=>ze);let N=x[0]||ie(j);const K=B(E,p.config.apiKey,p.name);let he=null;for(const ze of m)try{const It=yield ze._get(K);if(It){const ht=Ot._fromJSON(p,It);ze!==N&&(he=ht),N=ze;break}}catch{}const je=x.filter(ze=>ze._shouldAllowMigration);return N._shouldAllowMigration&&je.length?(N=je[0],he&&(yield N._set(K,he.toJSON())),yield Promise.all(m.map(function(){var ze=(0,c.Z)(function*(It){if(It!==N)try{yield It._remove(K)}catch{}});return function(It){return ze.apply(this,arguments)}}())),new W(N,p,E)):new W(N,p,E)})()}}function ve(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(tn(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(se(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Sn(p))return"Blackberry";if(jn(p))return"Webos";if(et(p))return"Safari";if((p.includes("chrome/")||mt(p))&&!p.includes("edge/"))return"Chrome";if(wt(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function se(v=(0,O.z$)()){return/firefox\//i.test(v)}function et(v=(0,O.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function mt(v=(0,O.z$)()){return/crios\//i.test(v)}function tn(v=(0,O.z$)()){return/iemobile/i.test(v)}function wt(v=(0,O.z$)()){return/android/i.test(v)}function Sn(v=(0,O.z$)()){return/blackberry/i.test(v)}function jn(v=(0,O.z$)()){return/webos/i.test(v)}function Gt(v=(0,O.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Sf(v=(0,O.z$)()){return Gt(v)||wt(v)||jn(v)||Sn(v)||/windows phone/i.test(v)||tn(v)}function Eu(v,p=[]){let m;switch(v){case"Browser":m=ve((0,O.z$)());break;case"Worker":m=`${ve((0,O.z$)())}-${v}`;break;default:m=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${ae.SDK_VERSION}/${E}`}class Ql{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=N=>new Promise((K,he)=>{try{K(p(N))}catch(je){he(je)}});E.onAbort=m,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,c.Z)(function*(){if(m.auth.currentUser===p)return;const E=[];try{for(const x of m.queue)yield x(p),x.onAbort&&E.push(x.onAbort)}catch(x){E.reverse();for(const N of E)try{N()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:x?.message})}})()}}class Td{constructor(p,m,E){this.app=p,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dd(this),this.idTokenSubscription=new Dd(this),this.beforeStateQueue=new Ql(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=ie(m)),this._initializationPromise=this.queue((0,c.Z)(function*(){var x,N;if(!E._deleted&&(E.persistenceManager=yield W.create(E,p),!E._deleted)){if(null!==(x=E._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,c.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,c.Z)(function*(){var E;const x=yield m.assertedPersistence.getCurrentUser();let N=x,K=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const he=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,je=N?._redirectEventId,ze=yield m.tryRedirectSignIn(p);(!he||he===je)&&ze?.user&&(N=ze.user,K=!0)}if(!N)return m.directlySetCurrentUser(null);if(!N._redirectEventId){if(K)try{yield m.beforeStateQueue.runMiddleware(N)}catch(he){N=x,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(he))}return N?m.reloadAndSetCurrentUserOrClear(N):m.directlySetCurrentUser(null)}return G(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===N._redirectEventId?m.directlySetCurrentUser(N):m.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(p){var m=this;return(0,c.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,c.Z)(function*(){try{yield on(p)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Nt(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,c.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,c.Z)(function*(){const E=p?(0,O.m9)(p):null;return E&&G(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,c.Z)(function*(){if(!E._deleted)return p&&G(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,c.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,c.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,c.Z)(function*(){yield m.assertedPersistence.setPersistence(ie(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new O.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,c.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(m);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,c.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&ie(p)||m._popupRedirectResolver;G(E,m,"argument-error"),m.redirectPersistenceManager=yield W.create(m,[ie(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,c.Z)(function*(){var E,x;return m._isInitialized&&(yield m.queue((0,c.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(x=m.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,c.Z)(function*(){if(p===m.currentUser)return m.queue((0,c.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,x){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),K=this._isInitialized?Promise.resolve():this._initializationPromise;return G(K,this,"internal-error"),K.then(()=>N(this.currentUser)),"function"==typeof m?p.addObserver(m,E,x):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,c.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Eu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,c.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function An(v){return(0,O.m9)(v)}class Dd{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,O.ne)(m=>this.observer=m)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ta(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Xt(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class On{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Ie("not implemented")}_getIdTokenResponse(p){return Ie("not implemented")}_linkToIdToken(p,m){return Ie("not implemented")}_getReauthenticationResolver(p){return Ie("not implemented")}}function $n(v,p){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,c.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:resetPassword",gt(v,p))})).apply(this,arguments)}function pi(v,p){return We.apply(this,arguments)}function We(){return(We=(0,c.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Pt(v,p){return vn.apply(this,arguments)}function vn(){return(vn=(0,c.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:update",gt(v,p))})).apply(this,arguments)}function ds(){return(ds=(0,c.Z)(function*(v,p){return Ur(v,"POST","/v1/accounts:signInWithPassword",gt(v,p))})).apply(this,arguments)}function Hn(v,p){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,c.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:sendOobCode",gt(v,p))})).apply(this,arguments)}function xn(v,p){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,c.Z)(function*(v,p){return Hn(v,p)})).apply(this,arguments)}function gi(v,p){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,c.Z)(function*(v,p){return Hn(v,p)})).apply(this,arguments)}function Jl(v,p){return Us.apply(this,arguments)}function Us(){return(Us=(0,c.Z)(function*(v,p){return Hn(v,p)})).apply(this,arguments)}function ec(v,p){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,c.Z)(function*(v,p){return Hn(v,p)})).apply(this,arguments)}function Vo(){return(Vo=(0,c.Z)(function*(v,p){return Ur(v,"POST","/v1/accounts:signInWithEmailLink",gt(v,p))})).apply(this,arguments)}function Mi(){return(Mi=(0,c.Z)(function*(v,p){return Ur(v,"POST","/v1/accounts:signInWithEmailLink",gt(v,p))})).apply(this,arguments)}class Vs extends On{constructor(p,m,E,x=null){super("password",E),this._email=p,this._password=m,this._tenantId=x}static _fromEmailAndPassword(p,m){return new Vs(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new Vs(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,c.Z)(function*(){switch(m.signInMethod){case"password":return function jr(v,p){return ds.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function xr(v,p){return Vo.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Re(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,c.Z)(function*(){switch(E.signInMethod){case"password":return pi(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function ro(v,p){return Mi.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:Re(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function hs(v,p){return fn.apply(this,arguments)}function fn(){return(fn=(0,c.Z)(function*(v,p){return Ur(v,"POST","/v1/accounts:signInWithIdp",gt(v,p))})).apply(this,arguments)}class mi extends On{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new mi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Re("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:x}=m,N=(0,ne._T)(m,["providerId","signInMethod"]);if(!E||!x)return null;const K=new mi(E,x);return K.idToken=N.idToken||void 0,K.accessToken=N.accessToken||void 0,K.secret=N.secret,K.nonce=N.nonce,K.pendingToken=N.pendingToken||null,K}_getIdTokenResponse(p){return hs(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,hs(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,hs(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,O.xO)(m)}return p}}function Sd(v,p){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,c.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:sendVerificationCode",gt(v,p))})).apply(this,arguments)}function $r(){return($r=(0,c.Z)(function*(v,p){return Ur(v,"POST","/v1/accounts:signInWithPhoneNumber",gt(v,p))})).apply(this,arguments)}function Ad(){return(Ad=(0,c.Z)(function*(v,p){const m=yield Ur(v,"POST","/v1/accounts:signInWithPhoneNumber",gt(v,p));if(m.temporaryProof)throw Vr(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const ei={USER_NOT_FOUND:"user-not-found"};function Sa(){return(Sa=(0,c.Z)(function*(v,p){return Ur(v,"POST","/v1/accounts:signInWithPhoneNumber",gt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ei)})).apply(this,arguments)}class Pi extends On{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Pi({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Pi({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function io(v,p){return $r.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Rr(v,p){return Ad.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Ni(v,p){return Sa.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:x}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:x,temporaryProof:N}=p;return E||m||x||N?new Pi({verificationId:m,verificationCode:E,phoneNumber:x,temporaryProof:N}):null}}class Aa{constructor(p){var m,E,x,N,K,he;const je=(0,O.zd)((0,O.pd)(p)),ze=null!==(m=je.apiKey)&&void 0!==m?m:null,It=null!==(E=je.oobCode)&&void 0!==E?E:null,ht=function tc(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=je.mode)&&void 0!==x?x:null);G(ze&&It&&ht,"argument-error"),this.apiKey=ze,this.operation=ht,this.code=It,this.continueUrl=null!==(N=je.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(K=je.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(he=je.tenantId)&&void 0!==he?he:null}static parseLink(p){const m=function ti(v){const p=(0,O.zd)((0,O.pd)(v)).link,m=p?(0,O.zd)((0,O.pd)(p)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(v)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||m||p||v}(p);try{return new Aa(m)}catch{return null}}}let nc=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return Vs._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const x=Aa.parseLink(E);return G(x,"argument-error"),Vs._fromEmailAndCode(m,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class fs{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class jo extends fs{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class xa extends jo{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return G("providerId"in m&&"signInMethod"in m,"argument-error"),mi._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return G(p.idToken||p.accessToken,"argument-error"),mi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return xa.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return xa.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:N,nonce:K,providerId:he}=p;if(!E&&!x&&!m&&!N||!he)return null;try{return new xa(he)._credential({idToken:m,accessToken:E,nonce:K,pendingToken:N})}catch{return null}}}let rc=(()=>{class v extends jo{constructor(){super("facebook.com")}static credential(m){return mi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),xd=(()=>{class v extends jo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return mi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:x}=m;if(!E&&!x)return null;try{return v.credential(E,x)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),xf=(()=>{class v extends jo{constructor(){super("github.com")}static credential(m){return mi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class $o extends On{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return hs(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,hs(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,hs(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:x,pendingToken:N}=m;return E&&x&&N&&E===x?new $o(E,N):null}static _create(p,m){return new $o(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ji extends fs{constructor(p){G(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Ji.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Ji.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=$o.fromJSON(p);return G(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return $o._create(E,m)}catch{return null}}}let qg=(()=>{class v extends jo{constructor(){super("twitter.com")}static credential(m,E){return mi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=m;if(!E||!x)return null;try{return v.credential(E,x)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Ho(v,p){return ic.apply(this,arguments)}function ic(){return(ic=(0,c.Z)(function*(v,p){return Ur(v,"POST","/v1/accounts:signUp",gt(v,p))})).apply(this,arguments)}class Hr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,x=!1){return(0,c.Z)(function*(){const N=yield Ot._fromIdTokenResponse(p,E,x),K=sc(E);return new Hr({user:N,providerId:K,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,c.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const x=sc(E);return new Hr({user:p,providerId:x,_tokenResponse:E,operationType:m})})()}}function sc(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Rf(){return(Rf=(0,c.Z)(function*(v){var p;const m=An(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Hr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Ho(m,{returnSecureToken:!0}),x=yield Hr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class Iu extends O.ZR{constructor(p,m,E,x){var N;super(m.code,m.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,Iu.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,x){return new Iu(p,m,E,x)}}function oo(v,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Iu._fromErrorAndOperation(v,N,p,E):N})}function ao(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Go(){return(Go=(0,c.Z)(function*(v,p){const m=(0,O.m9)(v);yield uo(!0,m,p);const{providerUserInfo:E}=yield Xr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),x=ao(E||[]);return m.providerData=m.providerData.filter(N=>x.has(N.providerId)),x.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function bu(v,p){return qo.apply(this,arguments)}function qo(){return(qo=(0,c.Z)(function*(v,p,m=!1){const E=yield yn(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Hr._forOperation(v,"link",E)})).apply(this,arguments)}function uo(v,p,m){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,c.Z)(function*(v,p,m){yield on(p);const x=!1===v?"provider-already-linked":"no-such-provider";G(ao(p.providerData).has(m)===v,p.auth,x)})).apply(this,arguments)}function Md(v,p){return zo.apply(this,arguments)}function zo(){return(zo=(0,c.Z)(function*(v,p,m=!1){const{auth:E}=v,x="reauthenticate";try{const N=yield yn(v,oo(E,x,p,v),m);G(N.idToken,E,"internal-error");const K=bt(N.idToken);G(K,E,"internal-error");const{sub:he}=K;return G(v.uid===he,E,"user-mismatch"),Hr._forOperation(v,x,N)}catch(N){throw"auth/user-not-found"===N?.code&&Re(E,"user-mismatch"),N}})).apply(this,arguments)}function Wo(v,p){return ni.apply(this,arguments)}function ni(){return(ni=(0,c.Z)(function*(v,p,m=!1){const E="signIn",x=yield oo(v,E,p),N=yield Hr._fromIdTokenResponse(v,E,x);return m||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Mn(v,p){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,c.Z)(function*(v,p){return Wo(An(v),p)})).apply(this,arguments)}function Fn(v,p){return Du.apply(this,arguments)}function Du(){return(Du=(0,c.Z)(function*(v,p){const m=(0,O.m9)(v);return yield uo(!1,m,p.providerId),bu(m,p)})).apply(this,arguments)}function lo(v,p){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,c.Z)(function*(v,p){return Md((0,O.m9)(v),p)})).apply(this,arguments)}function oc(v,p){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,c.Z)(function*(v,p){return Ur(v,"POST","/v1/accounts:signInWithCustomToken",gt(v,p))})).apply(this,arguments)}function ur(){return(ur=(0,c.Z)(function*(v,p){const m=An(v),E=yield oc(m,{token:p,returnSecureToken:!0}),x=yield Hr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class Ma{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Ko._fromServerResponse(p,m):Re(p,"internal-error")}}class Ko extends Ma{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Ko(m)}}function Su(v,p,m){var E;G((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),G(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(G(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(G(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Na(){return(Na=(0,c.Z)(function*(v,p,m){const E=(0,O.m9)(v),x={requestType:"PASSWORD_RESET",email:p};m&&Su(E,x,m),yield gi(E,x)})).apply(this,arguments)}function At(){return(At=(0,c.Z)(function*(v,p,m){yield $n((0,O.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Nd(){return(Nd=(0,c.Z)(function*(v,p){yield Pt((0,O.m9)(v),{oobCode:p})})).apply(this,arguments)}function xu(v,p){return ac.apply(this,arguments)}function ac(){return(ac=(0,c.Z)(function*(v,p){const m=(0,O.m9)(v),E=yield $n(m,{oobCode:p}),x=E.requestType;switch(G(x,m,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(E.mfaInfo,m,"internal-error");default:G(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=Ma._fromServerResponse(An(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:x}})).apply(this,arguments)}function Ru(){return(Ru=(0,c.Z)(function*(v,p){const{data:m}=yield xu((0,O.m9)(v),p);return m.email})).apply(this,arguments)}function lc(){return(lc=(0,c.Z)(function*(v,p,m){const E=An(v),x=yield Ho(E,{returnSecureToken:!0,email:p,password:m}),N=yield Hr._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function cc(){return(cc=(0,c.Z)(function*(v,p,m){const E=(0,O.m9)(v),x={requestType:"EMAIL_SIGNIN",email:p};G(m.handleCodeInApp,E,"argument-error"),m&&Su(E,x,m),yield Jl(E,x)})).apply(this,arguments)}function ka(){return(ka=(0,c.Z)(function*(v,p,m){const E=(0,O.m9)(v),x=nc.credentialWithLink(p,m||ke());return G(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Mn(E,x)})).apply(this,arguments)}function Mu(v,p){return ri.apply(this,arguments)}function ri(){return(ri=(0,c.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:createAuthUri",gt(v,p))})).apply(this,arguments)}function Pu(){return(Pu=(0,c.Z)(function*(v,p){const E={identifier:p,continueUri:ut()?ke():"http://localhost"},{signinMethods:x}=yield Mu((0,O.m9)(v),E);return x||[]})).apply(this,arguments)}function dc(){return(dc=(0,c.Z)(function*(v,p){const m=(0,O.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Su(m.auth,x,p);const{email:N}=yield xn(m.auth,x);N!==v.email&&(yield v.reload())})).apply(this,arguments)}function er(){return(er=(0,c.Z)(function*(v,p,m){const E=(0,O.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Su(E.auth,N,m);const{email:K}=yield ec(E.auth,N);K!==v.email&&(yield v.reload())})).apply(this,arguments)}function ii(v,p){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,c.Z)(function*(v,p){return hn(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function es(){return(es=(0,c.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,O.m9)(v),N={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},K=yield yn(E,ii(E.auth,N));E.displayName=K.displayName||null,E.photoURL=K.photoUrl||null;const he=E.providerData.find(({providerId:je})=>"password"===je);he&&(he.displayName=E.displayName,he.photoURL=E.photoURL),yield E._updateTokensIfNecessary(K)})).apply(this,arguments)}function Fd(v,p,m){return hc.apply(this,arguments)}function hc(){return(hc=(0,c.Z)(function*(v,p,m){const{auth:E}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(N.email=p),m&&(N.password=m);const K=yield yn(v,pi(E,N));yield v._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class gs{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class Ld extends gs{constructor(p,m,E,x){super(p,m,E),this.username=x}}class pc extends gs{constructor(p,m){super(p,"facebook.com",m)}}class Ud extends Ld{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Nf extends gs{constructor(p,m){super(p,"google.com",m)}}class Ou extends Ld{constructor(p,m,E){super(p,"twitter.com",m,E)}}function Pf(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function fc(v){var p,m;if(!v)return null;const{providerId:E}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const K=null===(m=null===(p=bt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(K)return new gs(N,"anonymous"!==K&&"custom"!==K?K:null)}if(!E)return null;switch(E){case"facebook.com":return new pc(N,x);case"github.com":return new Ud(N,x);case"google.com":return new Nf(N,x);case"twitter.com":return new Ou(N,x,v.screenName||null);case"custom":case"anonymous":return new gs(N,null);default:return new gs(N,E,x)}}(m)}class Qo{constructor(p,m,E){this.type=p,this.credential=m,this.auth=E}static _fromIdtoken(p,m){return new Qo("enroll",p,m)}static _fromMfaPendingCredential(p){return new Qo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Qo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return Qo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class mc{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=An(p),x=m.customData._serverResponse,N=(x.mfaInfo||[]).map(he=>Ma._fromServerResponse(E,he));G(x.mfaPendingCredential,E,"internal-error");const K=Qo._fromMfaPendingCredential(x.mfaPendingCredential);return new mc(K,N,function(){var he=(0,c.Z)(function*(je){const ze=yield je._process(E,K);delete x.mfaInfo,delete x.mfaPendingCredential;const It=Object.assign(Object.assign({},x),{idToken:ze.idToken,refreshToken:ze.refreshToken});switch(m.operationType){case"signIn":const ht=yield Hr._fromIdTokenResponse(E,m.operationType,It);return yield E._updateCurrentUser(ht.user),ht;case"reauthenticate":return G(m.user,E,"internal-error"),Hr._forOperation(m.user,m.operationType,It);default:Re(E,"internal-error")}});return function(je){return he.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,c.Z)(function*(){return m.signInResolver(p)})()}}function kf(v,p){return hn(v,"POST","/v2/accounts/mfaEnrollment:start",gt(v,p))}class Fa{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Ma._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Fa(p)}getSession(){var p=this;return(0,c.Z)(function*(){return Qo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var E=this;return(0,c.Z)(function*(){const x=p,N=yield E.getSession(),K=yield yn(E.user,x._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(K),E.user.reload()})()}unenroll(p){var m=this;return(0,c.Z)(function*(){const E="string"==typeof p?p:p.uid,x=yield m.user.getIdToken();try{const N=yield yn(m.user,function Kg(v,p){return hn(v,"POST","/v2/accounts/mfaEnrollment:withdraw",gt(v,p))}(m.user.auth,{idToken:x,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:K})=>K!==E),yield m.user._updateTokensIfNecessary(N),yield m.user.reload()}catch(N){throw N}})()}}const js=new WeakMap,_i="__sak";class _c{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(_i,"1"),this.storage.removeItem(_i),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const yc=(()=>{class v extends _c{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Fu(){const v=(0,O.z$)();return et(v)||Gt(v)}()&&function ba(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Sf(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),N=this.localCache[E];x!==N&&m(E,N,x)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((he,je,ze)=>{this.notifyListeners(he,ze)});const x=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(x);if(m.newValue!==he)null!==m.newValue?this.storage.setItem(x,m.newValue):this.storage.removeItem(x);else if(this.localCache[x]===m.newValue&&!E)return}const N=()=>{const he=this.storage.getItem(x);!E&&this.localCache[x]===he||this.notifyListeners(x,he)},K=this.storage.getItem(x);!function no(){return(0,O.w1)()&&10===document.documentMode}()||K===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const x=this.listeners[m];if(x)for(const N of Array.from(x))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var x=()=>super._set,N=this;return(0,c.Z)(function*(){yield x().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,x=this;return(0,c.Z)(function*(){const N=yield E().call(x,m);return x.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,x=this;return(0,c.Z)(function*(){yield E().call(x,m),delete x.localCache[m]})()}}return v.type="LOCAL",v})(),fo=(()=>{class v extends _c{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let Lu=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const x=new v(m);return this.receivers.push(x),x}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,c.Z)(function*(){const x=m,{eventId:N,eventType:K,data:he}=x.data,je=E.handlersMap[K];if(!je?.size)return;x.ports[0].postMessage({status:"ack",eventId:N,eventType:K});const ze=Array.from(je).map(function(){var ht=(0,c.Z)(function*(Vn){return Vn(x.origin,he)});return function(Vn){return ht.apply(this,arguments)}}()),It=yield function La(v){return Promise.all(v.map(function(){var p=(0,c.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(ze);x.ports[0].postMessage({status:"done",eventId:N,eventType:K,response:It})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ua(v="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return v+m}class vc{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var x=this;return(0,c.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let K,he;return new Promise((je,ze)=>{const It=Ua("",20);N.port1.start();const ht=setTimeout(()=>{ze(new Error("unsupported_event"))},E);he={messageChannel:N,onMessage(Vn){const ns=Vn;if(ns.data.eventId===It)switch(ns.data.status){case"ack":clearTimeout(ht),K=setTimeout(()=>{ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),je(ns.data.response);break;default:clearTimeout(ht),clearTimeout(K),ze(new Error("invalid_response"))}}},x.handlers.add(he),N.port1.addEventListener("message",he.onMessage),x.target.postMessage({eventType:p,eventId:It,data:m},[N.port2])}).finally(()=>{he&&x.removeMessageHandler(he)})})()}}function gn(){return window}function po(){return typeof gn().WorkerGlobalScope<"u"&&"function"==typeof gn().importScripts}function Ba(){return(Ba=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Vu="firebaseLocalStorageDb",$s="firebaseLocalStorage",go="fbase_key";class mo{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function _o(v,p){return v.transaction([$s],p?"readwrite":"readonly").objectStore($s)}function Ec(){const v=indexedDB.open(Vu,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore($s,{keyPath:go})}catch(x){m(x)}}),v.addEventListener("success",(0,c.Z)(function*(){const E=v.result;E.objectStoreNames.contains($s)?p(E):(E.close(),yield function ta(){const v=indexedDB.deleteDatabase(Vu);return new mo(v).toPromise()}(),p(yield Ec()))}))})}function qr(v,p,m){return ju.apply(this,arguments)}function ju(){return(ju=(0,c.Z)(function*(v,p,m){const E=_o(v,!0).put({[go]:p,value:m});return new mo(E).toPromise()})).apply(this,arguments)}function yo(){return(yo=(0,c.Z)(function*(v,p){const m=_o(v,!1).get(p),E=yield new mo(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function $u(v,p){const m=_o(v,!0).delete(p);return new mo(m).toPromise()}const vo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,c.Z)(function*(){return m.db||(m.db=yield Ec()),m.db})()}_withRetries(m){var E=this;return(0,c.Z)(function*(){let x=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(x++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,c.Z)(function*(){return po()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,c.Z)(function*(){m.receiver=Lu._getInstance(function Uu(){return po()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,c.Z)(function*(x,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(x,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,c.Z)(function*(x,N){return["keyChanged"]});return function(x,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,c.Z)(function*(){var E,x;if(m.activeServiceWorker=yield function ms(){return Ba.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new vc(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);N&&null!==(E=N[0])&&void 0!==E&&E.fulfilled&&null!==(x=N[0])&&void 0!==x&&x.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,c.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function wc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Ec();return yield qr(m,_i,"1"),yield $u(m,_i),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,c.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var x=this;return(0,c.Z)(function*(){return x._withPendingWrite((0,c.Z)(function*(){return yield x._withRetries(N=>qr(N,m,E)),x.localCache[m]=E,x.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,c.Z)(function*(){const x=yield E._withRetries(N=>function na(v,p){return yo.apply(this,arguments)}(N,m));return E.localCache[m]=x,x})()}_remove(m){var E=this;return(0,c.Z)(function*(){return E._withPendingWrite((0,c.Z)(function*(){return yield E._withRetries(x=>$u(x,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,c.Z)(function*(){const E=yield m._withRetries(K=>{const he=_o(K,!1).getAll();return new mo(he).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const x=[],N=new Set;for(const{fbase_key:K,value:he}of E)N.add(K),JSON.stringify(m.localCache[K])!==JSON.stringify(he)&&(m.notifyListeners(K,he),x.push(K));for(const K of Object.keys(m.localCache))m.localCache[K]&&!N.has(K)&&(m.notifyListeners(K,null),x.push(K));return x})()}notifyListeners(m,E){this.localCache[m]=E;const x=this.listeners[m];if(x)for(const N of Array.from(x))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function ra(v,p){return hn(v,"POST","/v2/accounts/mfaSignIn:start",gt(v,p))}function $a(){return($a=(0,c.Z)(function*(v){return(yield hn(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ki(v){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=x=>{const N=Ce("internal-error");N.customData=x,m(N)},E.type="text/javascript",E.charset="UTF-8",function Hu(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function Cc(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Fi=1e12;class Ff{constructor(p){this.auth=p,this.counter=Fi,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new Tc(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||Fi;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Fi))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,c.Z)(function*(){var E;return null===(E=m._widgets.get(p||Fi))||void 0===E||E.execute(),""})()}}class Tc{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;G(x,"argument-error",{appName:m}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Gu(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $d=Cc("rcb"),Lf=new Ut(3e4,6e4);class wo{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=gn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return G(function Ha(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(gn().grecaptcha):new Promise((E,x)=>{const N=gn().setTimeout(()=>{x(Ce(p,"network-request-failed"))},Lf.get());gn()[$d]=()=>{gn().clearTimeout(N),delete gn()[$d];const he=gn().grecaptcha;if(!he)return void x(Ce(p,"internal-error"));const je=he.render;he.render=(ze,It)=>{const ht=je(ze,It);return this.counter++,ht},this.hostLanguage=m,E(he)},ki(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:$d,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),x(Ce(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=gn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ia{load(p){return(0,c.Z)(function*(){return new Ff(p)})()}clearedOneInstance(){}}const Hd="recaptcha",Gd={theme:"light",type:"image"};class qu{constructor(p,m=Object.assign({},Gd),E){this.parameters=m,this.type=Hd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=An(E),this.isInvisible="invisible"===this.parameters.size,G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;G(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ia:new wo,this.validateStartingState()}verify(){var p=this;return(0,c.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const K=he=>{he&&(p.tokenChangeListeners.delete(K),N(he))};p.tokenChangeListeners.add(K),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=gn()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,c.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,c.Z)(function*(){G(ut()&&!po(),p.auth,"internal-error"),yield function Dy(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function _s(v){return $a.apply(this,arguments)}(p.auth);G(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Sc{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Pi._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Ac(){return(Ac=(0,c.Z)(function*(v,p,m){const E=An(v),x=yield qd(E,p,(0,O.m9)(m));return new Sc(x,N=>Mn(E,N))})).apply(this,arguments)}function zu(){return(zu=(0,c.Z)(function*(v,p,m){const E=(0,O.m9)(v);yield uo(!1,E,"phone");const x=yield qd(E.auth,p,(0,O.m9)(m));return new Sc(x,N=>Fn(E,N))})).apply(this,arguments)}function Vf(){return(Vf=(0,c.Z)(function*(v,p,m){const E=(0,O.m9)(v),x=yield qd(E.auth,p,(0,O.m9)(m));return new Sc(x,N=>lo(E,N))})).apply(this,arguments)}function qd(v,p,m){return Bf.apply(this,arguments)}function Bf(){return(Bf=(0,c.Z)(function*(v,p,m){var E;const x=yield m.verify();try{let N;if(G("string"==typeof x,v,"argument-error"),G(m.type===Hd,v,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const K=N.session;if("phoneNumber"in N)return G("enroll"===K.type,v,"internal-error"),(yield kf(v,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{G("signin"===K.type,v,"internal-error");const he=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return G(he,v,"missing-multi-factor-info"),(yield ra(v,{mfaPendingCredential:K.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield Sd(v,{phoneNumber:N.phoneNumber,recaptchaToken:x});return K}}finally{m._reset()}})).apply(this,arguments)}function jf(){return(jf=(0,c.Z)(function*(v,p){yield bu((0,O.m9)(v),p)})).apply(this,arguments)}let xc=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=An(m)}verifyPhoneNumber(m,E){return qd(this.auth,m,(0,O.m9)(E))}static credential(m,E){return Pi._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:x}=m;return E&&x?Pi._fromTokenResponse(E,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function mn(v,p){return p?ie(p):(G(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Zu extends On{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return hs(p,this._buildIdpRequest())}_linkToIdToken(p,m){return hs(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return hs(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Ku(v){return Wo(v.auth,new Zu(v),v.bypassAuthState)}function Rc(v){const{auth:p,user:m}=v;return G(m,p,"internal-error"),Md(m,new Zu(v),v.bypassAuthState)}function si(v){return ts.apply(this,arguments)}function ts(){return(ts=(0,c.Z)(function*(v){const{auth:p,user:m}=v;return G(m,p,"internal-error"),bu(m,new Zu(v),v.bypassAuthState)})).apply(this,arguments)}class Yu{constructor(p,m,E,x,N=!1){this.auth=p,this.resolver=E,this.user=x,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,c.Z)(function*(E,x){p.pendingPromise={resolve:E,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(E,x){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,c.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:N,tenantId:K,error:he,type:je}=p;if(he)return void m.reject(he);const ze={auth:m.auth,requestUri:E,sessionId:x,tenantId:K||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(je)(ze))}catch(It){m.reject(It)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Ku;case"linkViaPopup":case"linkViaRedirect":return si;case"reauthViaPopup":case"reauthViaRedirect":return Rc;default:Re(this.auth,"internal-error")}}resolve(p){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ga=new Ut(2e3,1e4);function Qu(){return(Qu=(0,c.Z)(function*(v,p,m){const E=An(v);Ve(v,p,fs);const x=mn(E,m);return new en(E,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function zd(){return(zd=(0,c.Z)(function*(v,p,m){const E=(0,O.m9)(v);Ve(E.auth,p,fs);const x=mn(E.auth,m);return new en(E.auth,"reauthViaPopup",p,x,E).executeNotNull()})).apply(this,arguments)}function zr(){return(zr=(0,c.Z)(function*(v,p,m){const E=(0,O.m9)(v);Ve(E.auth,p,fs);const x=mn(E.auth,m);return new en(E.auth,"linkViaPopup",p,x,E).executeNotNull()})).apply(this,arguments)}let en=(()=>{class v extends Yu{constructor(m,E,x,N,K){super(m,E,N,K),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,c.Z)(function*(){const E=yield m.execute();return G(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,c.Z)(function*(){Z(1===m.filter.length,"Popup operations only handle one event");const E=Ua();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(x=>{m.reject(x)}),m.resolver._isIframeWebStorageSupported(m.auth,x=>{x||m.reject(Ce(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,x;this.pollId=null!==(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Ga.get())};m()}}return v.currentPopupAction=null,v})();const Ye=new Map;class _r extends Yu{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,c.Z)(function*(){let E=Ye.get(m.auth._key());if(!E){try{const N=(yield function Li(v,p){return ys.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(N)}catch(x){E=()=>Promise.reject(x)}Ye.set(m.auth._key(),E)}return m.bypassAuthState||Ye.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,c.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const x=yield E.auth._redirectUserForId(p.eventId);if(x)return E.user=x,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function ys(){return(ys=(0,c.Z)(function*(v,p){const m=za(p),E=qa(v);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(m));return yield E._remove(m),x})).apply(this,arguments)}function oa(v,p){return qn.apply(this,arguments)}function qn(){return(qn=(0,c.Z)(function*(v,p){return qa(v)._set(za(p),"true")})).apply(this,arguments)}function Wd(v,p){Ye.set(v._key(),p)}function qa(v){return ie(v._redirectPersistence)}function za(v){return B("pendingRedirect",v.config.apiKey,v.name)}function T(){return(T=(0,c.Z)(function*(v,p,m){const E=An(v);Ve(v,p,fs),yield E._initializationPromise;const x=mn(E,m);return yield oa(x,E),x._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function V(){return(V=(0,c.Z)(function*(v,p,m){const E=(0,O.m9)(v);Ve(E.auth,p,fs),yield E.auth._initializationPromise;const x=mn(E.auth,m);yield oa(x,E.auth);const N=yield Et(E);return x._openRedirect(E.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function we(){return(we=(0,c.Z)(function*(v,p,m){const E=(0,O.m9)(v);Ve(E.auth,p,fs),yield E.auth._initializationPromise;const x=mn(E.auth,m);yield uo(!1,E,p.providerId),yield oa(x,E.auth);const N=yield Et(E);return x._openRedirect(E.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function it(){return(it=(0,c.Z)(function*(v,p){return yield An(v)._initializationPromise,rt(v,p,!1)})).apply(this,arguments)}function rt(v,p){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,c.Z)(function*(v,p,m=!1){const E=An(v),x=mn(E,p),K=yield new _r(E,x,m).execute();return K&&!m&&(delete K.user._redirectEventId,yield E._persistUserIfCurrent(K.user),yield E._setRedirectUser(null,p)),K})).apply(this,arguments)}function Et(v){return oi.apply(this,arguments)}function oi(){return(oi=(0,c.Z)(function*(v){const p=Ua(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class vs{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function ai(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aa(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!aa(p)){const x=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ce(this.auth,x))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(el(p))}saveEventToCache(p){this.cachedEventUids.add(el(p)),this.lastProcessedEventTime=Date.now()}}function el(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function aa({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function ui(v){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,c.Z)(function*(v,p={}){return hn(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Hf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yr=/^https?/;function Gf(){return(Gf=(0,c.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield ui(v);for(const m of p)try{if(Un(m))return}catch{}Re(v,"unauthorized-domain")})).apply(this,arguments)}function Un(v){const p=ke(),{protocol:m,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const K=new URL(v);return""===K.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&K.hostname===E}if(!yr.test(m))return!1;if(Hf.test(v))return E===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const Kd=new Ut(3e4,6e4);function Mc(){const v=gn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let tr=null;function qf(v){return tr=tr||function ws(v){return new Promise((p,m)=>{var E,x,N;function K(){Mc(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Mc(),m(Ce(v,"network-request-failed"))},timeout:Kd.get()})}if(null!==(x=null===(E=gn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==x&&x.Iframe)p(gapi.iframes.getContext());else{if(null===(N=gn().gapi)||void 0===N||!N.load){const he=Cc("iframefcb");return gn()[he]=()=>{gapi.load?K():m(Ce(v,"network-request-failed"))},ki(`https://apis.google.com/js/api.js?onload=${he}`).catch(je=>m(je))}K()}}).catch(p=>{throw tr=null,p})}(v),tr}const Sy=new Ut(5e3,15e3),tl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},li=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wa(v){const p=v.config;G(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?_t(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:v.name,v:ae.SDK_VERSION},x=li.get(v.config.apiHost);x&&(E.eid=x);const N=v._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,O.xO)(E).slice(1)}`}function Eo(){return Eo=(0,c.Z)(function*(v){const p=yield qf(v),m=gn().gapi;return G(m,v,"internal-error"),p.open({where:document.body,url:Wa(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tl,dontclear:!0},E=>new Promise(function(){var x=(0,c.Z)(function*(N,K){yield E.restyle({setHideOnLeave:!1});const he=Ce(v,"network-request-failed"),je=gn().setTimeout(()=>{K(he)},Sy.get());function ze(){gn().clearTimeout(je),N(E)}E.ping(ze).then(ze,()=>{K(he)})});return function(N,K){return x.apply(this,arguments)}}()))}),Eo.apply(this,arguments)}const Yd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class yt{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pc(v,p,m,E,x,N){G(v.config.authDomain,v,"auth-domain-config-required"),G(v.config.apiKey,v,"invalid-api-key");const K={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:ae.SDK_VERSION,eventId:x};if(p instanceof fs){p.setDefaultLanguage(v.languageCode),K.providerId=p.providerId||"",(0,O.xb)(p.getCustomParameters())||(K.customParameters=JSON.stringify(p.getCustomParameters()));for(const[je,ze]of Object.entries(N||{}))K[je]=ze}if(p instanceof jo){const je=p.getScopes().filter(ze=>""!==ze);je.length>0&&(K.scopes=je.join(","))}v.tenantId&&(K.tid=v.tenantId);const he=K;for(const je of Object.keys(he))void 0===he[je]&&delete he[je];return`${function Hs({config:v}){return v.emulator?_t(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,O.xO)(he).slice(1)}`}const Jd="webStorageSupport",eh=class nm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fo,this._completeRedirectFn=rt,this._overrideRedirectResult=Wd}_openPopup(p,m,E,x){var N=this;return(0,c.Z)(function*(){var K;Z(null===(K=N.eventManagers[p._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const he=Pc(p,m,E,ke(),x);return function Nc(v,p,m,E=500,x=600){const N=Math.max((window.screen.availHeight-x)/2,0).toString(),K=Math.max((window.screen.availWidth-E)/2,0).toString();let he="";const je=Object.assign(Object.assign({},Yd),{width:E.toString(),height:x.toString(),top:N,left:K}),ze=(0,O.z$)().toLowerCase();m&&(he=mt(ze)?"_blank":m),se(ze)&&(p=p||"http://localhost",je.scrollbars="yes");const It=Object.entries(je).reduce((Vn,[ns,ml])=>`${Vn}${ns}=${ml},`,"");if(function Xn(v=(0,O.z$)()){var p;return Gt(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(ze)&&"_self"!==he)return function Ay(v,p){const m=document.createElement("a");m.href=v,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",he),new yt(null);const ht=window.open(p||"",he,It);G(ht,v,"popup-blocked");try{ht.focus()}catch{}return new yt(ht)}(p,he,Ua())})()}_openRedirect(p,m,E,x){var N=this;return(0,c.Z)(function*(){return yield N._originValidation(p),function Va(v){gn().location.href=v}(Pc(p,m,E,ke(),x)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:x,promise:N}=this.eventManagers[m];return x?Promise.resolve(x):(Z(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,c.Z)(function*(){const E=yield function mE(v){return Eo.apply(this,arguments)}(p),x=new vs(p);return E.register("authEvent",N=>(G(N?.authEvent,p,"invalid-auth-event"),{status:x.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:x},m.iframes[p._key()]=E,x})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Jd,{type:Jd},x=>{var N;const K=null===(N=x?.[0])||void 0===N?void 0:N[Jd];void 0!==K&&m(!!K),Re(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Zd(v){return Gf.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Sf()||et()||Gt()}};class _E{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return Ie("unexpected MultiFactorSessionType")}}}class cr extends _E{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new cr(p)}_finalizeEnroll(p,m,E){return function Zg(v,p){return hn(v,"POST","/v2/accounts/mfaEnrollment:finalize",gt(v,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Of(v,p){return hn(v,"POST","/v2/accounts/mfaSignIn:finalize",gt(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zn=(()=>{class v{constructor(){}static assertion(m){return cr._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Za="@firebase/auth";class th{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,c.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vi(){return window}function Xf(){return(Xf=(0,c.Z)(function*(v,p,m){var E;const{BuildInfo:x}=vi();Z(p.sessionId,"AuthEvent did not contain a session ID");const N=yield Fc(p.sessionId),K={};return Gt()?K.ibi=x.packageName:wt()?K.apn=x.packageName:Re(v,"operation-not-supported-in-this-environment"),x.displayName&&(K.appDisplayName=x.displayName),K.sessionId=N,Pc(v,m,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,K)})).apply(this,arguments)}function Oc(){return(Oc=(0,c.Z)(function*(v){const{BuildInfo:p}=vi(),m={};Gt()?m.iosBundleId=p.packageName:wt()?m.androidPackageName=p.packageName:Re(v,"operation-not-supported-in-this-environment"),yield ui(v,m)})).apply(this,arguments)}function Qa(){return(Qa=(0,c.Z)(function*(v,p,m){const{cordova:E}=vi();let x=()=>{};try{yield new Promise((N,K)=>{let he=null;function je(){var ht;N();const Vn=null===(ht=E.plugins.browsertab)||void 0===ht?void 0:ht.close;"function"==typeof Vn&&Vn(),"function"==typeof m?.close&&m.close()}function ze(){he||(he=window.setTimeout(()=>{K(Ce(v,"redirect-cancelled-by-user"))},2e3))}function It(){"visible"===document?.visibilityState&&ze()}p.addPassiveListener(je),document.addEventListener("resume",ze,!1),wt()&&document.addEventListener("visibilitychange",It,!1),x=()=>{p.removePassiveListener(je),document.removeEventListener("resume",ze,!1),document.removeEventListener("visibilitychange",It,!1),he&&window.clearTimeout(he)}})}finally{x()}})).apply(this,arguments)}function Fc(v){return il.apply(this,arguments)}function il(){return(il=(0,c.Z)(function*(v){const p=sl(v),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function sl(v){if(Z(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),m=new Uint8Array(p);for(let E=0;E<v.length;E++)m[E]=v.charCodeAt(E);return m}(0,O.Pz)("authIdTokenMaxAge"),function kc(v){(0,ae._registerComponent)(new me.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),{apiKey:N,authDomain:K}=E.options;return((he,je)=>{G(N&&!N.includes(":"),"invalid-api-key",{appName:he.name}),G(!K?.includes(":"),"argument-error",{appName:he.name});const ze={apiKey:N,authDomain:K,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Eu(v)},It=new Td(he,je,ze);return function Le(v,p){const m=p?.persistence||[],E=(Array.isArray(m)?m:[m]).map(ie);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,p?.popupRedirectResolver)}(It,m),It})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new me.wA("auth-internal",p=>{const m=An(p.getProvider("auth").getImmediate());return new th(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Za,"0.21.4",function Mr(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ae.registerVersion)(Za,"0.21.4","esm2017")}("Browser");class la extends vs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,c.Z)(function*(){yield p.initPromise})()}}function tp(v){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,c.Z)(function*(v){const p=yield al()._get(np(v));return p&&(yield al()._remove(np(v))),p})).apply(this,arguments)}function Ry(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*p.length);v.push(p.charAt(E))}return v.join("")}function al(){return ie(yc)}function np(v){return B("authEvent",v.config.apiKey,v.name)}function Uc(v){if(!v?.includes("?"))return{};const[p,...m]=v.split("?");return(0,O.zd)(m.join("?"))}const ul=class rh{constructor(){this._redirectPersistence=fo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=rt,this._overrideRedirectResult=Wd}_initialize(p){var m=this;return(0,c.Z)(function*(){const E=p._key();let x=m.eventManagers.get(E);return x||(x=new la(p),m.eventManagers.set(E,x),m.attachCallbackListeners(p,x)),x})()}_openPopup(p){Re(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,E,x){var N=this;return(0,c.Z)(function*(){!function nh(v){var p,m,E,x,N,K,he,je,ze,It;const ht=vi();G("function"==typeof(null===(p=ht?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof(null===(m=ht?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(N=null===(x=null===(E=ht?.cordova)||void 0===E?void 0:E.plugins)||void 0===x?void 0:x.browsertab)||void 0===N?void 0:N.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(je=null===(he=null===(K=ht?.cordova)||void 0===K?void 0:K.plugins)||void 0===he?void 0:he.browsertab)||void 0===je?void 0:je.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(It=null===(ze=ht?.cordova)||void 0===ze?void 0:ze.InAppBrowser)||void 0===It?void 0:It.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const K=yield N._initialize(p);yield K.initialized(),K.resetRedirect(),function $f(){Ye.clear()}(),yield N._originValidation(p);const he=function ol(v,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:Ry(),postBody:null,tenantId:v.tenantId,error:Ce(v,"no-auth-event")}}(p,E,x);yield function ep(v,p){return al()._set(np(v),p)}(p,he);const je=yield function rl(v,p,m){return Xf.apply(this,arguments)}(p,he,m),ze=yield function Ya(v){const{cordova:p}=vi();return new Promise(m=>{p.plugins.browsertab.isAvailable(E=>{let x=null;E?p.plugins.browsertab.openUrl(v):x=p.InAppBrowser.open(v,function xi(v=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(x)})})}(je);return function Jf(v,p,m){return Qa.apply(this,arguments)}(p,K,ze)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ka(v){return Oc.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:E,handleOpenURL:x,BuildInfo:N}=vi(),K=setTimeout((0,c.Z)(function*(){yield tp(p),m.onEvent(sm())}),500),he=function(){var It=(0,c.Z)(function*(ht){clearTimeout(K);const Vn=yield tp(p);let ns=null;Vn&&ht?.url&&(ns=function xy(v,p){var m,E;const x=function Ny(v){const p=Uc(v),m=p.link?decodeURIComponent(p.link):void 0,E=Uc(m).link,x=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Uc(x).link||x||E||m||v}(p);if(x.includes("/__/auth/callback")){const N=Uc(x),K=N.firebaseError?function My(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,he=null===(E=null===(m=K?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],je=he?Ce(he):null;return je?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:je,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:x,postBody:null}}return null}(Vn,ht.url)),m.onEvent(ns||sm())});return function(Vn){return It.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,he);const je=x,ze=`${N.packageName.toLowerCase()}://`;vi().handleOpenURL=function(){var It=(0,c.Z)(function*(ht){if(ht.toLowerCase().startsWith(ze)&&he({url:ht}),"function"==typeof je)try{je(ht)}catch(Vn){console.error(Vn)}});return function(ht){return It.apply(this,arguments)}}()}};function sm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}function ll(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function cl(v=(0,O.z$)()){return!("file:"!==ll()&&"ionic:"!==ll()&&"capacitor:"!==ll()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function oh(){try{const v=self.localStorage,p=Ua();if(v)return v.setItem(p,"1"),v.removeItem(p),!function ip(v=(0,O.z$)()){return function Io(){return(0,O.w1)()&&11===document?.documentMode}()||function am(v=(0,O.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,O.hl)()}catch{return Co()&&(0,O.hl)()}return!1}function Co(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vc(){return(function om(){return"http:"===ll()||"https:"===ll()}()||(0,O.ru)()||cl())&&!function sh(){return(0,O.b$)()||(0,O.UG)()}()&&oh()&&!Co()}function sp(){return cl()&&typeof document<"u"}function dl(){return(dl=(0,c.Z)(function*(){return!!sp()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const nr={LOCAL:"local",NONE:"none",SESSION:"session"},eu=G,hl="persistence";function uh(v){return $c.apply(this,arguments)}function $c(){return($c=(0,c.Z)(function*(v){yield v._initializationPromise;const p=Es(),m=B(hl,v.config.apiKey,v.name);p&&p.setItem(m,v._getPersistence())})).apply(this,arguments)}function Es(){var v;try{return(null===(v=function ah(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const op=G;class ci{constructor(){this.browserResolver=ie(eh),this.cordovaResolver=ie(ul),this.underlyingResolver=null,this._redirectPersistence=fo,this._completeRedirectFn=rt,this._overrideRedirectResult=Wd}_initialize(p){var m=this;return(0,c.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,E,x){var N=this;return(0,c.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(p,m,E,x)})()}_openRedirect(p,m,E,x){var N=this;return(0,c.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(p,m,E,x)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return sp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return op(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,c.Z)(function*(){if(p.underlyingResolver)return;const m=yield function Bc(){return dl.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function fl(v){return v.unwrap()}function lh(v){return um(v)}function um(v){const{_tokenResponse:p}=v instanceof O.ZR?v.customData:v;if(!p)return null;if(!(v instanceof O.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return xc.credentialFromResult(v);const m=p.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=xd;break;case"facebook.com":E=rc;break;case"github.com":E=xf;break;case"twitter.com":E=qg;break;default:const{oauthIdToken:x,oauthAccessToken:N,oauthTokenSecret:K,pendingToken:he,nonce:je}=p;return N||K||x||he?he?m.startsWith("saml.")?$o._create(m,he):mi._fromParams({providerId:m,signInMethod:m,pendingToken:he,idToken:x,accessToken:N}):new xa(m).credential({idToken:x,accessToken:N,rawNonce:je}):null}return v instanceof O.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function wi(v,p){return p.catch(m=>{throw m instanceof O.ZR&&function tu(v,p){var m;const E=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new up(v,function mr(v,p){var m;const E=(0,O.m9)(v),x=p;return G(p.customData.operationType,E,"argument-error"),G(null===(m=x.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),mc._fromError(E,x)}(v,p));else if(E){const x=um(p),N=p;x&&(N.credential=x,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(v,m),m}).then(m=>{const x=m.user;return{operationType:m.operationType,credential:lh(m),additionalUserInfo:Pf(m),user:bo.getOrCreate(x)}})}function lm(v,p){return ap.apply(this,arguments)}function ap(){return(ap=(0,c.Z)(function*(v,p){const m=yield p;return{verificationId:m.verificationId,confirm:E=>wi(v,m.confirm(E))}})).apply(this,arguments)}class up{constructor(p,m){this.resolver=m,this.auth=function Gc(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return wi(fl(this.auth),this.resolver.resolveSignIn(p))}}class bo{constructor(p){this._delegate=p,this.multiFactor=function Xo(v){const p=(0,O.m9)(v);return js.has(p)||js.set(p,Fa._fromUser(p)),js.get(p)}(p)}static getOrCreate(p){return bo.USER_MAP.has(p)||bo.USER_MAP.set(p,new bo(p)),bo.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,c.Z)(function*(){return wi(m.auth,Fn(m._delegate,p))})()}linkWithPhoneNumber(p,m){var E=this;return(0,c.Z)(function*(){return lm(E.auth,function Yg(v,p,m){return zu.apply(this,arguments)}(E._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,c.Z)(function*(){return wi(m.auth,function Xg(v,p,m){return zr.apply(this,arguments)}(m._delegate,p,ci))})()}linkWithRedirect(p){var m=this;return(0,c.Z)(function*(){return yield uh(An(m.auth)),function Q(v,p,m){return function te(v,p,m){return we.apply(this,arguments)}(v,p,m)}(m._delegate,p,ci)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,c.Z)(function*(){return wi(m.auth,lo(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return lm(this.auth,function Uf(v,p,m){return Vf.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return wi(this.auth,function Qg(v,p,m){return zd.apply(this,arguments)}(this._delegate,p,ci))}reauthenticateWithRedirect(p){var m=this;return(0,c.Z)(function*(){return yield uh(An(m.auth)),function D(v,p,m){return function R(v,p,m){return V.apply(this,arguments)}(v,p,m)}(m._delegate,p,ci)})()}sendEmailVerification(p){return function kd(v,p){return dc.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,c.Z)(function*(){return yield function Cu(v,p){return Go.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function Od(v,p){return Fd((0,O.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function Oa(v,p){return Fd((0,O.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Wu(v,p){return jf.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function ho(v,p){return es.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function ku(v,p,m){return er.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}bo.USER_MAP=new WeakMap;const pl=G;let qc=(()=>{class v{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=m.options;pl(x,"invalid-api-key",{appName:m.name}),pl(x,"invalid-api-key",{appName:m.name});const N=typeof window<"u"?ci:void 0;this._delegate=E.initialize({options:{persistence:cm(x,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(He),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?bo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Xl(v,p,m){const E=An(v);G(E._canInitEmulator,E,"emulator-config-failed"),G(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const x=!!m?.disableWarnings,N=Ta(p),{host:K,port:he}=function Da(v){const p=Ta(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const N=x[1];return{host:N,port:Xt(E.substr(N.length+1))}}{const[N,K]=E.split(":");return{host:N,port:Xt(K)}}}(p);E.config.emulator={url:`${N}//${K}${null===he?"":`:${he}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:K,port:he,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Jn(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,E)}applyActionCode(m){return function Au(v,p){return Nd.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return xu(this._delegate,m)}confirmPasswordReset(m,E){return function Pa(v,p,m){return At.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var x=this;return(0,c.Z)(function*(){return wi(x._delegate,function Mf(v,p,m){return lc.apply(this,arguments)}(x._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Nu(v,p){return Pu.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Pd(v,p){return"EMAIL_SIGNIN"===Aa.parseLink(p)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,c.Z)(function*(){pl(Vc(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function Qe(v,p){return it.apply(this,arguments)}(m._delegate,ci);return E?wi(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Xa(v,p){An(v)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,E,x){const{next:N,error:K,complete:he}=ch(m,E,x);return this._delegate.onAuthStateChanged(N,K,he)}onIdTokenChanged(m,E,x){const{next:N,error:K,complete:he}=ch(m,E,x);return this._delegate.onIdTokenChanged(N,K,he)}sendSignInLinkToEmail(m,E){return function Jt(v,p,m){return cc.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function ps(v,p,m){return Na.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,c.Z)(function*(){let x;switch(function jc(v,p){eu(Object.values(nr).includes(p),v,"invalid-persistence-type"),(0,O.b$)()?eu(p!==nr.SESSION,v,"unsupported-persistence-type"):(0,O.UG)()?eu(p===nr.NONE,v,"unsupported-persistence-type"):Co()?eu(p===nr.NONE||p===nr.LOCAL&&(0,O.hl)(),v,"unsupported-persistence-type"):eu(p===nr.NONE||oh(),v,"unsupported-persistence-type")}(E._delegate,m),m){case nr.SESSION:x=fo;break;case nr.LOCAL:x=(yield ie(vo)._isAvailable())?vo:yc;break;case nr.NONE:x=j;break;default:return Re("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return wi(this._delegate,function Rd(v){return Rf.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return wi(this._delegate,Mn(this._delegate,m))}signInWithCustomToken(m){return wi(this._delegate,function co(v,p){return ur.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return wi(this._delegate,function ye(v,p,m){return Mn((0,O.m9)(v),nc.credential(p,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return wi(this._delegate,function gr(v,p,m){return ka.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return lm(this._delegate,function Qt(v,p,m){return Ac.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,c.Z)(function*(){return pl(Vc(),E._delegate,"operation-not-supported-in-this-environment"),wi(E._delegate,function sa(v,p,m){return Qu.apply(this,arguments)}(E._delegate,m,ci))})()}signInWithRedirect(m){var E=this;return(0,c.Z)(function*(){return pl(Vc(),E._delegate,"operation-not-supported-in-this-environment"),yield uh(E._delegate),function Xu(v,p,m){return function Ju(v,p,m){return T.apply(this,arguments)}(v,p,m)}(E._delegate,m,ci)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function uc(v,p){return Ru.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=nr,v})();function ch(v,p,m){let E=v;"function"!=typeof v&&({next:E,error:p,complete:m}=v);const x=E;return{next:K=>x(K&&bo.getOrCreate(K)),error:p,complete:m}}function cm(v,p){const m=function Hc(v,p){const m=Es();if(!m)return[];const E=B(hl,v,p);switch(m.getItem(E)){case nr.NONE:return[j];case nr.LOCAL:return[vo,fo];case nr.SESSION:return[fo];default:return[]}}(v,p);if(typeof self<"u"&&!m.includes(vo)&&m.push(vo),typeof window<"u")for(const E of[yc,fo])m.includes(E)||m.push(E);return m.includes(j)||m.push(j),m}class zc{constructor(){this.providerId="phone",this._delegate=new xc(fl(J.Z.auth()))}static credential(p,m){return xc.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}zc.PHONE_SIGN_IN_METHOD=xc.PHONE_SIGN_IN_METHOD,zc.PROVIDER_ID=xc.PROVIDER_ID;const dm=G;class gl{constructor(p,m,E=J.Z.app()){var x;dm(null===(x=E.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new qu(p,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function yE(v){v.INTERNAL.registerComponent(new me.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new qc(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:nc,FacebookAuthProvider:rc,GithubAuthProvider:xf,GoogleAuthProvider:xd,OAuthProvider:xa,SAMLAuthProvider:Ji,PhoneAuthProvider:zc,PhoneMultiFactorGenerator:zn,RecaptchaVerifier:gl,TwitterAuthProvider:qg,Auth:qc,AuthCredential:On,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.3.4")}(J.Z)},8766:(at,Te,F)=>{F.d(Te,{Lj:()=>Re,X3:()=>Oe});var c=F(5861);let O,ae;const me=new WeakMap,fe=new WeakMap,de=new WeakMap,H=new WeakMap,q=new WeakMap;let Ae={get(G,Ie,Z){if(G instanceof IDBTransaction){if("done"===Ie)return fe.get(G);if("objectStoreNames"===Ie)return G.objectStoreNames||de.get(G);if("store"===Ie)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return De(G[Ie])},set:(G,Ie,Z)=>(G[Ie]=Z,!0),has:(G,Ie)=>G instanceof IDBTransaction&&("done"===Ie||"store"===Ie)||Ie in G};function pe(G){return"function"==typeof G?function nt(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ne(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(...Ie){return G.apply(Se(this),Ie),De(me.get(this))}:function(...Ie){return De(G.apply(Se(this),Ie))}:function(Ie,...Z){const X=G.call(Se(this),Ie,...Z);return de.set(X,Ie.sort?Ie.sort():[Ie]),De(X)}}(G):(G instanceof IDBTransaction&&function Be(G){if(fe.has(G))return;const Ie=new Promise((Z,X)=>{const ie=()=>{G.removeEventListener("complete",re),G.removeEventListener("error",Le),G.removeEventListener("abort",Le)},re=()=>{Z(),ie()},Le=()=>{X(G.error||new DOMException("AbortError","AbortError")),ie()};G.addEventListener("complete",re),G.addEventListener("error",Le),G.addEventListener("abort",Le)});fe.set(G,Ie)}(G),((G,Ie)=>Ie.some(Z=>G instanceof Z))(G,function oe(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,Ae):G)}function De(G){if(G instanceof IDBRequest)return function Y(G){const Ie=new Promise((Z,X)=>{const ie=()=>{G.removeEventListener("success",re),G.removeEventListener("error",Le)},re=()=>{Z(De(G.result)),ie()},Le=()=>{X(G.error),ie()};G.addEventListener("success",re),G.addEventListener("error",Le)});return Ie.then(Z=>{Z instanceof IDBCursor&&me.set(Z,G)}).catch(()=>{}),q.set(Ie,G),Ie}(G);if(H.has(G))return H.get(G);const Ie=pe(G);return Ie!==G&&(H.set(G,Ie),q.set(Ie,G)),Ie}const Se=G=>q.get(G);function Oe(G,Ie,{blocked:Z,upgrade:X,blocking:ie,terminated:re}={}){const Le=indexedDB.open(G,Ie),ke=De(Le);return X&&Le.addEventListener("upgradeneeded",ut=>{X(De(Le.result),ut.oldVersion,ut.newVersion,De(Le.transaction))}),Z&&Le.addEventListener("blocked",()=>Z()),ke.then(ut=>{re&&ut.addEventListener("close",()=>re()),ie&&ut.addEventListener("versionchange",()=>ie())}).catch(()=>{}),ke}function Re(G,{blocked:Ie}={}){const Z=indexedDB.deleteDatabase(G);return Ie&&Z.addEventListener("blocked",()=>Ie()),De(Z).then(()=>{})}const Ce=["get","getKey","getAll","getAllKeys","count"],xe=["put","add","delete","clear"],Ve=new Map;function Pe(G,Ie){if(!(G instanceof IDBDatabase)||Ie in G||"string"!=typeof Ie)return;if(Ve.get(Ie))return Ve.get(Ie);const Z=Ie.replace(/FromIndex$/,""),X=Ie!==Z,ie=xe.includes(Z);if(!(Z in(X?IDBIndex:IDBObjectStore).prototype)||!ie&&!Ce.includes(Z))return;const re=function(){var Le=(0,c.Z)(function*(ke,...ut){const nn=this.transaction(ke,ie?"readwrite":"readonly");let pn=nn.store;return X&&(pn=pn.index(ut.shift())),(yield Promise.all([pn[Z](...ut),ie&&nn.done]))[0]});return function(ut){return Le.apply(this,arguments)}}();return Ve.set(Ie,re),re}!function He(G){Ae=G(Ae)}(G=>({...G,get:(Ie,Z,X)=>Pe(Ie,Z)||G.get(Ie,Z,X),has:(Ie,Z)=>!!Pe(Ie,Z)||G.has(Ie,Z)}))},5861:(at,Te,F)=>{function c(O,ae,oe,ne,me,fe,de){try{var H=O[fe](de),q=H.value}catch(Y){return void oe(Y)}H.done?ae(q):Promise.resolve(q).then(ne,me)}function J(O){return function(){var ae=this,oe=arguments;return new Promise(function(ne,me){var fe=O.apply(ae,oe);function de(q){c(fe,ne,me,de,H,"next",q)}function H(q){c(fe,ne,me,de,H,"throw",q)}de(void 0)})}}F.d(Te,{Z:()=>J})}},at=>{at(at.s=3272)}]);
"use strict";(self.webpackChunkmyApp=self.webpackChunkmyApp||[]).push([[179],{6217:(Kt,qe,Y)=>{Y.d(qe,{nm:()=>dr});var A=Y(2122);Y(4650),Y(259);var gt=Y(5861),it=Y(9681),Je=Y(4859),Tt=Y(2090),wt=Y(1877);const z=new Map,tt={activated:!1,tokenObservers:[]},we={initialized:!1,enabled:!1};function Te(Ee){return z.get(Ee)||Object.assign({},tt)}function Ue(){return we}class jt{constructor(be,Ve,Ge,dt,St){if(this.operation=be,this.retryPolicy=Ve,this.getWaitDuration=Ge,this.lowerBound=dt,this.upperBound=St,this.pending=null,this.nextErrorWaitInterval=dt,dt>St)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(be){var Ve=this;return(0,gt.Z)(function*(){Ve.stop();try{Ve.pending=new Tt.BH,yield function Ot(Ee){return new Promise(be=>{setTimeout(be,Ee)})}(Ve.getNextRun(be)),Ve.pending.resolve(),yield Ve.pending.promise,Ve.pending=new Tt.BH,yield Ve.operation(),Ve.pending.resolve(),yield Ve.pending.promise,Ve.process(!0).catch(()=>{})}catch(Ge){Ve.retryPolicy(Ge)?Ve.process(!1).catch(()=>{}):Ve.stop()}})()}getNextRun(be){if(be)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ve=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ve}}}const Gt=new Tt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nn(Ee){if(!Te(Ee).activated)throw Gt.create("use-before-activation",{appName:Ee.name})}function Ur(Ee,be){return gr.apply(this,arguments)}function gr(){return(gr=(0,gt.Z)(function*({url:Ee,body:be},Ve){const Ge={"Content-Type":"application/json"},dt=Ve.getImmediate({optional:!0});if(dt){const Di=yield dt.getHeartbeatsHeader();Di&&(Ge["X-Firebase-Client"]=Di)}const St={method:"POST",body:JSON.stringify(be),headers:Ge};let wn,Ut;try{wn=yield fetch(Ee,St)}catch(Di){throw Gt.create("fetch-network-error",{originalErrorMessage:Di?.message})}if(200!==wn.status)throw Gt.create("fetch-status-error",{httpStatus:wn.status});try{Ut=yield wn.json()}catch(Di){throw Gt.create("fetch-parse-error",{originalErrorMessage:Di?.message})}const hr=Ut.ttl.match(/^([\d.]+)(s)$/);if(!hr||!hr[2]||isNaN(Number(hr[1])))throw Gt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Ut.ttl}`});const di=1e3*Number(hr[1]),Kr=Date.now();return{token:Ut.token,expireTimeMillis:Kr+di,issuedAtTimeMillis:Kr}})).apply(this,arguments)}function Xt(Ee,be){const{projectId:Ve,appId:Ge,apiKey:dt}=Ee.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Ve}/apps/${Ge}:exchangeDebugToken?key=${dt}`,body:{debug_token:be}}}const lr="firebase-app-check-store";let Ir=null;function kt(){return Ir||(Ir=new Promise((Ee,be)=>{try{const Ve=indexedDB.open("firebase-app-check-database",1);Ve.onsuccess=Ge=>{Ee(Ge.target.result)},Ve.onerror=Ge=>{var dt;be(Gt.create("storage-open",{originalErrorMessage:null===(dt=Ge.target.error)||void 0===dt?void 0:dt.message}))},Ve.onupgradeneeded=Ge=>{0===Ge.oldVersion&&Ge.target.result.createObjectStore(lr,{keyPath:"compositeKey"})}}catch(Ve){be(Gt.create("storage-open",{originalErrorMessage:Ve?.message}))}}),Ir)}function fn(){return(fn=(0,gt.Z)(function*(Ee,be){const Ge=(yield kt()).transaction(lr,"readwrite"),St=Ge.objectStore(lr).put({compositeKey:Ee,value:be});return new Promise((wn,Ut)=>{St.onsuccess=hr=>{wn()},Ge.onerror=hr=>{var di;Ut(Gt.create("storage-set",{originalErrorMessage:null===(di=hr.target.error)||void 0===di?void 0:di.message}))}})})).apply(this,arguments)}const zn=new wt.Yd("@firebase/app-check");function Tr(Ee,be){return(0,Tt.hl)()?function Wi(Ee,be){return function Cr(Ee,be){return fn.apply(this,arguments)}(function cs(Ee){return`${Ee.options.appId}-${Ee.name}`}(Ee),be)}(Ee,be).catch(Ve=>{zn.warn(`Failed to write token to IndexedDB. Error: ${Ve}`)}):Promise.resolve()}function bi(){return Ue().enabled}function Pn(){return pn.apply(this,arguments)}function pn(){return(pn=(0,gt.Z)(function*(){const Ee=Ue();if(Ee.enabled&&Ee.token)return Ee.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const xt={error:"UNKNOWN_ERROR"};function at(Ee){return Tt.US.encodeString(JSON.stringify(Ee),!1)}function Pt(Ee){return vn.apply(this,arguments)}function vn(){return(vn=(0,gt.Z)(function*(Ee,be=!1){const Ve=Ee.app;nn(Ve);const Ge=Te(Ve);let St,dt=Ge.token;if(dt&&!Ce(dt)&&(Ge.token=void 0,dt=void 0),!dt){const hr=yield Ge.cachedTokenPromise;hr&&(Ce(hr)?dt=hr:yield Tr(Ve,void 0))}if(!be&&dt&&Ce(dt))return{token:dt.token};let Ut,wn=!1;if(bi()){Ge.exchangeTokenPromise||(Ge.exchangeTokenPromise=Ur(Xt(Ve,yield Pn()),Ee.heartbeatServiceProvider).finally(()=>{Ge.exchangeTokenPromise=void 0}),wn=!0);const hr=yield Ge.exchangeTokenPromise;return yield Tr(Ve,hr),Ge.token=hr,{token:hr.token}}try{Ge.exchangeTokenPromise||(Ge.exchangeTokenPromise=Ge.provider.getToken().finally(()=>{Ge.exchangeTokenPromise=void 0}),wn=!0),dt=yield Te(Ve).exchangeTokenPromise}catch(hr){"appCheck/throttled"===hr.code?zn.warn(hr.message):zn.error(hr),St=hr}return dt?St?Ut=Ce(dt)?{token:dt.token,internalError:St}:st(St):(Ut={token:dt.token},Ge.token=dt,yield Tr(Ve,dt)):Ut=st(St),wn&&he(Ve,Ut),Ut})).apply(this,arguments)}function Dn(Ee,be){const Ve=Te(Ee),Ge=Ve.tokenObservers.filter(dt=>dt.next!==be);0===Ge.length&&Ve.tokenRefresher&&Ve.tokenRefresher.isRunning()&&Ve.tokenRefresher.stop(),Ve.tokenObservers=Ge}function ni(Ee){const{app:be}=Ee,Ve=Te(be);let Ge=Ve.tokenRefresher;Ge||(Ge=function pe(Ee){const{app:be}=Ee;return new jt((0,gt.Z)(function*(){let Ge;if(Ge=Te(be).token?yield Pt(Ee,!0):yield Pt(Ee),Ge.error)throw Ge.error;if(Ge.internalError)throw Ge.internalError}),()=>!0,()=>{const Ve=Te(be);if(Ve.token){let Ge=Ve.token.issuedAtTimeMillis+.5*(Ve.token.expireTimeMillis-Ve.token.issuedAtTimeMillis)+3e5;return Ge=Math.min(Ge,Ve.token.expireTimeMillis-3e5),Math.max(0,Ge-Date.now())}return 0},3e4,96e4)}(Ee),Ve.tokenRefresher=Ge),!Ge.isRunning()&&Ve.isTokenAutoRefreshEnabled&&Ge.start()}function he(Ee,be){const Ve=Te(Ee).tokenObservers;for(const Ge of Ve)try{"EXTERNAL"===Ge.type&&null!=be.error?Ge.error(be.error):Ge.next(be)}catch{}}function Ce(Ee){return Ee.expireTimeMillis-Date.now()>0}function st(Ee){return{token:at(xt),error:Ee}}class je{constructor(be,Ve){this.app=be,this.heartbeatServiceProvider=Ve}_delete(){const{tokenObservers:be}=Te(this.app);for(const Ve of be)Dn(this.app,Ve.next);return Promise.resolve()}}const Sn="app-check-internal";!function cr(){(0,it._registerComponent)(new Je.wA("app-check",Ee=>function en(Ee,be){return new je(Ee,be)}(Ee.getProvider("app").getImmediate(),Ee.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ee,be,Ve)=>{Ee.getProvider(Sn).initialize()})),(0,it._registerComponent)(new Je.wA(Sn,Ee=>function yn(Ee){return{getToken:be=>Pt(Ee,be),addTokenListener:be=>function qt(Ee,be,Ve,Ge){const{app:dt}=Ee,St=Te(dt);if(St.tokenObservers=[...St.tokenObservers,{next:Ve,error:Ge,type:be}],St.token&&Ce(St.token)){const Ut=St.token;Promise.resolve().then(()=>{Ve({token:Ut.token}),ni(Ee)}).catch(()=>{})}St.cachedTokenPromise.then(()=>ni(Ee))}(Ee,"INTERNAL",be),removeTokenListener:be=>Dn(Ee.app,be)}}(Ee.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,it.registerVersion)("@firebase/app-check","0.6.4")}();class dr{constructor(){return(0,A.vb)("app-check")}}typeof window<"u"&&window},1205:(Kt,qe,Y)=>{Y.d(qe,{zQ:()=>_e,ww:()=>Ct,rT:()=>we,f7:()=>Ie,L6:()=>z,_Q:()=>tt,lh:()=>Te,Qv:()=>wt,nw:()=>Ue});var A=Y(4650),y=Y(7579),O=Y(9646),xe=Y(9751),Se=Y(8996),Me=Y(6451),Le=Y(5363),Fe=Y(3900),Be=Y(4004),fe=Y(6063);class ge extends y.x{constructor(Rt=1/0,cn=1/0,Nt=fe.l){super(),this._bufferSize=Rt,this._windowTime=cn,this._timestampProvider=Nt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=cn===1/0,this._bufferSize=Math.max(1,Rt),this._windowTime=Math.max(1,cn)}next(Rt){const{isStopped:cn,_buffer:Nt,_infiniteTimeWindow:jt,_timestampProvider:Ot,_windowTime:dn}=this;cn||(Nt.push(Rt),!jt&&Nt.push(Ot.now()+dn)),this._trimBuffer(),super.next(Rt)}_subscribe(Rt){this._throwIfClosed(),this._trimBuffer();const cn=this._innerSubscribe(Rt),{_infiniteTimeWindow:Nt,_buffer:jt}=this,Ot=jt.slice();for(let dn=0;dn<Ot.length&&!Rt.closed;dn+=Nt?1:2)Rt.next(Ot[dn]);return this._checkFinalizedStatuses(Rt),cn}_trimBuffer(){const{_bufferSize:Rt,_timestampProvider:cn,_buffer:Nt,_infiniteTimeWindow:jt}=this,Ot=(jt?1:2)*Rt;if(Rt<1/0&&Ot<Nt.length&&Nt.splice(0,Nt.length-Ot),!jt){const dn=cn.now();let Gt=0;for(let un=1;un<Nt.length&&Nt[un]<=dn;un+=2)Gt=un;Gt&&Nt.splice(0,Gt+1)}}}var De=Y(3099);function mt(Xe,Rt,cn){let Nt,jt=!1;return Xe&&"object"==typeof Xe?({bufferSize:Nt=1/0,windowTime:Rt=1/0,refCount:jt=!1,scheduler:cn}=Xe):Nt=Xe??1/0,(0,De.B)({connector:()=>new ge(Nt,Rt,cn),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:jt})}var pt=Y(590),At=Y(576);function Ht(Xe,Rt){return(0,At.m)(Rt)?(0,Fe.w)(()=>Xe,Rt):(0,Fe.w)(()=>Xe)}var Ze=Y(9468),ft=Y(9300),et=Y(2122),yt=Y(2011),gt=Y(6895),it=Y(6217),Je=Y(9260);const wt=new A.OlP("angularfire2.auth.use-emulator"),z=new A.OlP("angularfire2.auth.settings"),tt=new A.OlP("angularfire2.auth.tenant-id"),we=new A.OlP("angularfire2.auth.langugage-code"),Te=new A.OlP("angularfire2.auth.use-device-language"),Ie=new A.OlP("angularfire.auth.persistence"),Ue=(Xe,Rt,cn,Nt,jt,Ot,dn,Gt)=>(0,yt.cc)(`${Xe.name}.auth`,"AngularFireAuth",Xe.name,()=>{const un=Rt.runOutsideAngular(()=>Xe.auth());if(cn&&un.useEmulator(...cn),Nt&&(un.tenantId=Nt),un.languageCode=jt,Ot&&un.useDeviceLanguage(),dn)for(const[nn,En]of Object.entries(dn))un.settings[nn]=En;return Gt&&un.setPersistence(Gt),un},[cn,Nt,jt,Ot,dn,Gt]);let _e=(()=>{class Xe{constructor(cn,Nt,jt,Ot,dn,Gt,un,nn,En,ti,Ur,gr){const Zn=new y.x,Vi=(0,O.of)(void 0).pipe((0,Le.Q)(dn.outsideAngular),(0,Fe.w)(()=>Ot.runOutsideAngular(()=>Promise.resolve().then(Y.bind(Y,4217)))),(0,Be.U)(()=>(0,yt.on)(cn,Ot,Nt)),(0,Be.U)(Xt=>Ue(Xt,Ot,Gt,nn,En,ti,un,Ur)),mt({bufferSize:1,refCount:!1}));if((0,gt.PM)(jt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,O.of)(null);else{Vi.pipe((0,pt.P)()).subscribe();const zr=Vi.pipe((0,Fe.w)(Tn=>Tn.getRedirectResult().then(Ir=>Ir,()=>null)),et.iC,mt({bufferSize:1,refCount:!1})),Er=Vi.pipe((0,Fe.w)(Tn=>new xe.y(Ir=>({unsubscribe:Ot.runOutsideAngular(()=>Tn.onAuthStateChanged(kt=>Ir.next(kt),kt=>Ir.error(kt),()=>Ir.complete()))})))),lr=Vi.pipe((0,Fe.w)(Tn=>new xe.y(Ir=>({unsubscribe:Ot.runOutsideAngular(()=>Tn.onIdTokenChanged(kt=>Ir.next(kt),kt=>Ir.error(kt),()=>Ir.complete()))}))));this.authState=zr.pipe(Ht(Er),(0,Ze.R)(dn.outsideAngular),(0,Le.Q)(dn.insideAngular)),this.user=zr.pipe(Ht(lr),(0,Ze.R)(dn.outsideAngular),(0,Le.Q)(dn.insideAngular)),this.idToken=this.user.pipe((0,Fe.w)(Tn=>Tn?(0,Se.D)(Tn.getIdToken()):(0,O.of)(null))),this.idTokenResult=this.user.pipe((0,Fe.w)(Tn=>Tn?(0,Se.D)(Tn.getIdTokenResult()):(0,O.of)(null))),this.credential=(0,Me.T)(zr,Zn,this.authState.pipe((0,ft.h)(Tn=>!Tn))).pipe((0,Be.U)(Tn=>Tn?.user?Tn:null),(0,Ze.R)(dn.outsideAngular),(0,Le.Q)(dn.insideAngular))}return(0,yt.pX)(this,Vi,Ot,{spy:{apply:(Xt,zr,Er)=>{(Xt.startsWith("signIn")||Xt.startsWith("createUser"))&&Er.then(lr=>Zn.next(lr))}}})}}return Xe.\u0275fac=function(cn){return new(cn||Xe)(A.LFG(yt.Dh),A.LFG(yt.xv,8),A.LFG(A.Lbi),A.LFG(A.R0b),A.LFG(et.HU),A.LFG(wt,8),A.LFG(z,8),A.LFG(tt,8),A.LFG(we,8),A.LFG(Te,8),A.LFG(Ie,8),A.LFG(it.nm,8))},Xe.\u0275prov=A.Yz7({token:Xe,factory:Xe.\u0275fac,providedIn:"any"}),Xe})(),Ct=(()=>{class Xe{constructor(){Je.Z.registerVersion("angularfire",et.q4.full,"auth-compat")}}return Xe.\u0275fac=function(cn){return new(cn||Xe)},Xe.\u0275mod=A.oAB({type:Xe}),Xe.\u0275inj=A.cJS({providers:[_e]}),Xe})()},5197:(Kt,qe,Y)=>{Y.d(qe,{KQ:()=>Ci,JS:()=>$c});var A=Y(4650),y=Y(4986),O=Y(9751),xe=Y(9646),Se=Y(6451),Me=Y(4004),Le=Y(3099),Fe=Y(3900),Be=Y(5026),fe=Y(1884),ge=Y(4482),De=Y(5403),mt=Y(8421),pt=Y(4671),At=Y(5032),Ht=Y(7669),et=Y(2122),yt=Y(2011),it=(Y(4217),Y(3942)),Je=Y(4859),Tt=Y(5861),wt=Y(9681),z=Y(2090),tt=Y(1877);const we="@firebase/database";let Ie="";function Ue(h){Ie=h}class _e{constructor(l){this.domStorage_=l,this.prefix_="firebase:"}set(l,c){null==c?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),(0,z.Wl)(c))}get(l){const c=this.domStorage_.getItem(this.prefixedName_(l));return null==c?null:(0,z.cI)(c)}remove(l){this.domStorage_.removeItem(this.prefixedName_(l))}prefixedName_(l){return this.prefix_+l}toString(){return this.domStorage_.toString()}}class Ct{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(l,c){null==c?delete this.cache_[l]:this.cache_[l]=c}get(l){return(0,z.r3)(this.cache_,l)?this.cache_[l]:null}remove(l){delete this.cache_[l]}}const Xe=function(h){try{if(typeof window<"u"&&typeof window[h]<"u"){const l=window[h];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new _e(l)}}catch{}return new Ct},Rt=Xe("localStorage"),cn=Xe("sessionStorage"),Nt=new tt.Yd("@firebase/database"),jt=function(){let h=1;return function(){return h++}}(),Ot=function(h){const l=(0,z.dS)(h),c=new z.gQ;c.update(l);const m=c.digest();return z.US.encodeByteArray(m)},dn=function(...h){let l="";for(let c=0;c<h.length;c++){const m=h[c];Array.isArray(m)||m&&"object"==typeof m&&"number"==typeof m.length?l+=dn.apply(null,m):l+="object"==typeof m?(0,z.Wl)(m):m,l+=" "}return l};let Gt=null,un=!0;const nn=function(h,l){(0,z.hu)(!l||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(Nt.logLevel=tt.in.VERBOSE,Gt=Nt.log.bind(Nt),l&&cn.set("logging_enabled",!0)):"function"==typeof h?Gt=h:(Gt=null,cn.remove("logging_enabled"))},En=function(...h){if(!0===un&&(un=!1,null===Gt&&!0===cn.get("logging_enabled")&&nn(!0)),Gt){const l=dn.apply(null,h);Gt(l)}},ti=function(h){return function(...l){En(h,...l)}},Ur=function(...h){const l="FIREBASE INTERNAL ERROR: "+dn(...h);Nt.error(l)},gr=function(...h){const l=`FIREBASE FATAL ERROR: ${dn(...h)}`;throw Nt.error(l),new Error(l)},Zn=function(...h){const l="FIREBASE WARNING: "+dn(...h);Nt.warn(l)},Xt=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},Er="[MIN_NAME]",lr="[MAX_NAME]",Tn=function(h,l){if(h===l)return 0;if(h===Er||l===lr)return-1;if(l===Er||h===lr)return 1;{const c=Wr(h),m=Wr(l);return null!==c?null!==m?c-m==0?h.length-l.length:c-m:-1:null!==m?1:h<l?-1:1}},Ir=function(h,l){return h===l?0:h<l?-1:1},kt=function(h,l){if(l&&h in l)return l[h];throw new Error("Missing required key ("+h+") in object: "+(0,z.Wl)(l))},ls=function(h){if("object"!=typeof h||null===h)return(0,z.Wl)(h);const l=[];for(const m in h)l.push(m);l.sort();let c="{";for(let m=0;m<l.length;m++)0!==m&&(c+=","),c+=(0,z.Wl)(l[m]),c+=":",c+=ls(h[l[m]]);return c+="}",c},Wi=function(h,l){const c=h.length;if(c<=l)return[h];const m=[];for(let T=0;T<c;T+=l)m.push(h.substring(T,T+l>c?c:T+l));return m};function On(h,l){for(const c in h)h.hasOwnProperty(c)&&l(c,h[c])}const hi=function(h){(0,z.hu)(!Xt(h),"Invalid JSON number");const m=1023;let T,F,G,te,se;0===h?(F=0,G=0,T=1/h==-1/0?1:0):(T=h<0,(h=Math.abs(h))>=Math.pow(2,1-m)?(te=Math.min(Math.floor(Math.log(h)/Math.LN2),m),F=te+m,G=Math.round(h*Math.pow(2,52-te)-Math.pow(2,52))):(F=0,G=Math.round(h/Math.pow(2,-1074))));const me=[];for(se=52;se;se-=1)me.push(G%2?1:0),G=Math.floor(G/2);for(se=11;se;se-=1)me.push(F%2?1:0),F=Math.floor(F/2);me.push(T?1:0),me.reverse();const rt=me.join("");let ut="";for(se=0;se<64;se+=8){let It=parseInt(rt.substr(se,8),2).toString(16);1===It.length&&(It="0"+It),ut+=It}return ut.toLowerCase()},rn=new RegExp("^-?(0*)\\d{1,10}$"),Wr=function(h){if(rn.test(h)){const l=Number(h);if(l>=-2147483648&&l<=2147483647)return l}return null},Rr=function(h){try{h()}catch(l){setTimeout(()=>{throw Zn("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},qr=function(h,l){const c=setTimeout(h,l);return"number"==typeof c&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class Jn{constructor(l,c){this.appName_=l,this.appCheckProvider=c,this.appCheck=c?.getImmediate({optional:!0}),this.appCheck||c?.get().then(m=>this.appCheck=m)}getToken(l){return this.appCheck?this.appCheck.getToken(l):new Promise((c,m)=>{setTimeout(()=>{this.appCheck?this.getToken(l).then(c,m):c(null)},0)})}addTokenChangeListener(l){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(m=>m.addTokenListener(l))}notifyForInvalidToken(){Zn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class bi{constructor(l,c,m){this.appName_=l,this.firebaseOptions_=c,this.authProvider_=m,this.auth_=null,this.auth_=m.getImmediate({optional:!0}),this.auth_||m.onInit(T=>this.auth_=T)}getToken(l){return this.auth_?this.auth_.getToken(l).catch(c=>c&&"auth/token-not-initialized"===c.code?(En("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,m)=>{setTimeout(()=>{this.auth_?this.getToken(l).then(c,m):c(null)},0)})}addTokenChangeListener(l){this.auth_?this.auth_.addAuthTokenListener(l):this.authProvider_.get().then(c=>c.addAuthTokenListener(l))}removeTokenChangeListener(l){this.authProvider_.get().then(c=>c.removeAuthTokenListener(l))}notifyForInvalidToken(){let l='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';l+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zn(l)}}let Pn=(()=>{class h{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const vn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pe="websocket",he="long_polling";class Ce{constructor(l,c,m,T,F=!1,G="",te=!1,se=!1){this.secure=c,this.namespace=m,this.webSocketOnly=T,this.nodeAdmin=F,this.persistenceKey=G,this.includeNamespaceInQueryParams=te,this.isUsingEmulator=se,this._host=l.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rt.get("host:"+l)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&Rt.set("host:"+this._host,this.internalHost))}toString(){let l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function je(h,l,c){let m;if((0,z.hu)("string"==typeof l,"typeof type must == string"),(0,z.hu)("object"==typeof c,"typeof params must == object"),l===pe)m=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(l!==he)throw new Error("Unknown connection type: "+l);m=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function st(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(c.ns=h.namespace);const T=[];return On(c,(F,G)=>{T.push(F+"="+G)}),m+T.join("&")}class en{constructor(){this.counters_={}}incrementCounter(l,c=1){(0,z.r3)(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=c}get(){return(0,z.p$)(this.counters_)}}const yn={},xn={};function ve(h){const l=h.toString();return yn[l]||(yn[l]=new en),yn[l]}class oe{constructor(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(l,c){this.closeAfterResponse=l,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(l,c){for(this.pendingResponses[l]=c;this.pendingResponses[this.currentResponseNum];){const m=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let T=0;T<m.length;++T)m[T]&&Rr(()=>{this.onMessage_(m[T])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ln{constructor(l,c,m,T,F,G,te){this.connId=l,this.repoInfo=c,this.applicationId=m,this.appCheckToken=T,this.authToken=F,this.transportSessionId=G,this.lastSessionId=te,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ti(l),this.stats_=ve(c),this.urlFn=se=>(this.appCheckToken&&(se.ac=this.appCheckToken),je(c,he,se))}open(l,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new oe(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,z.Yr)()||"complete"===document.readyState)h();else{let l=!1;const c=function(){document.body?l||(l=!0,h()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new br((...F)=>{const[G,te,se,me,rt]=F;if(this.incrementIncomingBytes_(F),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===G)this.id=te,this.password=se;else{if("close"!==G)throw new Error("Unrecognized command received: "+G);te?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(te,()=>{this.onClosed_()})):this.onClosed_()}},(...F)=>{const[G,te]=F;this.incrementIncomingBytes_(F),this.myPacketOrderer.handleResponse(G,te)},()=>{this.onClosed_()},this.urlFn);const m={start:"t"};m.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(m.cb=this.scriptTagHolder.uniqueCallbackIdentifier),m.v="5",this.transportSessionId&&(m.s=this.transportSessionId),this.lastSessionId&&(m.ls=this.lastSessionId),this.applicationId&&(m.p=this.applicationId),this.appCheckToken&&(m.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&vn.test(location.hostname)&&(m.r="f");const T=this.urlFn(m);this.log_("Connecting via long-poll to "+T),this.scriptTagHolder.addTag(T,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ln.forceAllow_=!0}static forceDisallow(){Ln.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!Ln.forceAllow_&&(Ln.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(l){const c=(0,z.Wl)(l);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const m=(0,z.h$)(c),T=Wi(m,1840);for(let F=0;F<T.length;F++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,T.length,T[F]),this.curSegmentNum++}addDisconnectPingFrame(l,c){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const m={dframe:"t"};m.id=l,m.pw=c,this.myDisconnFrame.src=this.urlFn(m),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(l){const c=(0,z.Wl)(l).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class br{constructor(l,c,m,T){if(this.onDisconnect=m,this.urlFn=T,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=l,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=jt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=br.createIFrame_();let F="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(F='<script>document.domain="'+document.domain+'";<\/script>');const G="<html><body>"+F+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(G),this.myIFrame.doc.close()}catch(te){En("frame writing exception"),te.stack&&En(te.stack),En(te)}}}static createIFrame_(){const l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||En("No IE domain setting required")}catch{const m=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+m+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const l=this.onDisconnect;l&&(this.onDisconnect=null,l())}startLongPoll(l,c){for(this.myID=l,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;let c=this.urlFn(l),m="",T=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+m.length<=1870;){const G=this.pendingSegs.shift();m=m+"&seg"+T+"="+G.seg+"&ts"+T+"="+G.ts+"&d"+T+"="+G.d,T++}return c+=m,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(l,c,m){this.pendingSegs.push({seg:l,ts:c,d:m}),this.alive&&this.newRequest_()}addLongPollTag_(l,c){this.outstandingRequests.add(c);const m=()=>{this.outstandingRequests.delete(c),this.newRequest_()},T=setTimeout(m,Math.floor(25e3));this.addTag(l,()=>{clearTimeout(T),m()})}addTag(l,c){(0,z.Yr)()?this.doNodeLongPoll(l,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const m=this.myIFrame.doc.createElement("script");m.type="text/javascript",m.async=!0,m.src=l,m.onload=m.onreadystatechange=function(){const T=m.readyState;(!T||"loaded"===T||"complete"===T)&&(m.onload=m.onreadystatechange=null,m.parentNode&&m.parentNode.removeChild(m),c())},m.onerror=()=>{En("Long-poll script failed to load: "+l),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(m)}catch{}},Math.floor(1))}}let Sn=null;typeof MozWebSocket<"u"?Sn=MozWebSocket:typeof WebSocket<"u"&&(Sn=WebSocket);let cr=(()=>{class h{constructor(c,m,T,F,G,te,se){this.connId=c,this.applicationId=T,this.appCheckToken=F,this.authToken=G,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ti(this.connId),this.stats_=ve(m),this.connURL=h.connectionURL_(m,te,se,F,T),this.nodeAdmin=m.nodeAdmin}static connectionURL_(c,m,T,F,G){const te={v:"5"};return!(0,z.Yr)()&&typeof location<"u"&&location.hostname&&vn.test(location.hostname)&&(te.r="f"),m&&(te.s=m),T&&(te.ls=T),F&&(te.ac=F),G&&(te.p=G),je(c,pe,te)}open(c,m){this.onDisconnect=m,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rt.set("previous_websocket_failure",!0);try{let T;if((0,z.Yr)()){T={headers:{"User-Agent":`Firebase/5/${Ie}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(T.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(T.headers["X-Firebase-AppCheck"]=this.appCheckToken);const G=process.env,te=0===this.connURL.indexOf("wss://")?G.HTTPS_PROXY||G.https_proxy:G.HTTP_PROXY||G.http_proxy;te&&(T.proxy={origin:te})}this.mySock=new Sn(this.connURL,[],T)}catch(T){this.log_("Error instantiating WebSocket.");const F=T.message||T.data;return F&&this.log_(F),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=T=>{this.handleIncomingFrame(T)},this.mySock.onerror=T=>{this.log_("WebSocket error.  Closing connection.");const F=T.message||T.data;F&&this.log_(F),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let c=!1;if(typeof navigator<"u"&&navigator.userAgent){const T=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);T&&T.length>1&&parseFloat(T[1])<4.4&&(c=!0)}return!c&&null!==Sn&&!h.forceDisallow_}static previouslyFailed(){return Rt.isInMemoryStorage||!0===Rt.get("previous_websocket_failure")}markConnectionHealthy(){Rt.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const m=this.frames.join("");this.frames=null;const T=(0,z.cI)(m);this.onMessage(T)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const m=Number(c);if(!isNaN(m))return this.handleNewFrameCount_(m),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const m=c.data;if(this.bytesReceived+=m.length,this.stats_.incrementCounter("bytes_received",m.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(m);else{const T=this.extractFrameCount_(m);null!==T&&this.appendFrame_(T)}}send(c){this.resetKeepAlive();const m=(0,z.Wl)(c);this.bytesSent+=m.length,this.stats_.incrementCounter("bytes_sent",m.length);const T=Wi(m,16384);T.length>1&&this.sendString_(String(T.length));for(let F=0;F<T.length;F++)this.sendString_(T[F])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(m){this.log_("Exception thrown from WebSocket.send():",m.message||m.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),vi=(()=>{class h{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[Ln,cr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const m=cr&&cr.isAvailable();let T=m&&!cr.previouslyFailed();if(c.webSocketOnly&&(m||Zn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),T=!0),T)this.transports_=[cr];else{const F=this.transports_=[];for(const G of h.ALL_TRANSPORTS)G&&G.isAvailable()&&F.push(G);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class fs{constructor(l,c,m,T,F,G,te,se,me,rt){this.id=l,this.repoInfo_=c,this.applicationId_=m,this.appCheckToken_=T,this.authToken_=F,this.onMessage_=G,this.onReady_=te,this.onDisconnect_=se,this.onKill_=me,this.lastSessionId=rt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ti("c:"+this.id+":"),this.transportManager_=new vi(c),this.log_("Connection created"),this.start_()}start_(){const l=this.transportManager_.initialTransport();this.conn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),m=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,m)},Math.floor(0));const T=l.healthyTimeout||0;T>0&&(this.healthyTimeout_=qr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(T)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(l){return c=>{l===this.conn_?this.onConnectionLost_(c):l===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(l){return c=>{2!==this.state_&&(l===this.rx_?this.onPrimaryMessageReceived_(c):l===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(l){this.sendData_({t:"d",d:l})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(l){if("t"in l){const c=l.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(l){const c=kt("t",l),m=kt("d",l);if("c"===c)this.onSecondaryControl_(m);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(m)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(l){const c=kt("t",l),m=kt("d",l);"c"===c?this.onControl_(m):"d"===c&&this.onDataMessage_(m)}onDataMessage_(l){this.onPrimaryResponse_(),this.onMessage_(l)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(l){const c=kt("t",l);if("d"in l){const m=l.d;if("h"===c){const T=Object.assign({},m);this.repoInfo_.isUsingEmulator&&(T.h=this.repoInfo_.host),this.onHandshake_(T)}else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let T=0;T<this.pendingDataMessages.length;++T)this.onDataMessage_(this.pendingDataMessages[T]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(m):"r"===c?this.onReset_(m):"e"===c?Ur("Server Error: "+m):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ur("Unknown control packet command: "+c)}}onHandshake_(l){const c=l.ts,m=l.v,T=l.h;this.sessionId=l.s,this.repoInfo_.host=T,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==m&&Zn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)}startUpgrade_(l){this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),m=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,m),qr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.host=l,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(l,c){this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()}onConnectionLost_(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class xs{put(l,c,m,T){}merge(l,c,m,T){}refreshAuthToken(l){}refreshAppCheckToken(l){}onDisconnectPut(l,c,m){}onDisconnectMerge(l,c,m){}onDisconnectCancel(l,c){}reportStats(l){}}class Ms{constructor(l){this.allowedEvents_=l,this.listeners_={},(0,z.hu)(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}trigger(l,...c){if(Array.isArray(this.listeners_[l])){const m=[...this.listeners_[l]];for(let T=0;T<m.length;T++)m[T].callback.apply(m[T].context,c)}}on(l,c,m){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:c,context:m});const T=this.getInitialEvent(l);T&&c.apply(m,T)}off(l,c,m){this.validateEventType_(l);const T=this.listeners_[l]||[];for(let F=0;F<T.length;F++)if(T[F].callback===c&&(!m||m===T[F].context))return void T.splice(F,1)}validateEventType_(l){(0,z.hu)(this.allowedEvents_.find(c=>c===l),"Unknown event: "+l)}}class Ee extends Ms{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ee}getInitialEvent(l){return(0,z.hu)("online"===l,"Unknown event type: "+l),[this.online_]}currentlyOnline(){return this.online_}}class Ge{constructor(l,c){if(void 0===c){this.pieces_=l.split("/");let m=0;for(let T=0;T<this.pieces_.length;T++)this.pieces_[T].length>0&&(this.pieces_[m]=this.pieces_[T],m++);this.pieces_.length=m,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=c}toString(){let l="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(l+="/"+this.pieces_[c]);return l||"/"}}function dt(){return new Ge("")}function St(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function wn(h){return h.pieces_.length-h.pieceNum_}function Ut(h){let l=h.pieceNum_;return l<h.pieces_.length&&l++,new Ge(h.pieces_,l)}function hr(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function Kr(h,l=0){return h.pieces_.slice(h.pieceNum_+l)}function Di(h){if(h.pieceNum_>=h.pieces_.length)return null;const l=[];for(let c=h.pieceNum_;c<h.pieces_.length-1;c++)l.push(h.pieces_[c]);return new Ge(l,0)}function nr(h,l){const c=[];for(let m=h.pieceNum_;m<h.pieces_.length;m++)c.push(h.pieces_[m]);if(l instanceof Ge)for(let m=l.pieceNum_;m<l.pieces_.length;m++)c.push(l.pieces_[m]);else{const m=l.split("/");for(let T=0;T<m.length;T++)m[T].length>0&&c.push(m[T])}return new Ge(c,0)}function Bn(h){return h.pieceNum_>=h.pieces_.length}function or(h,l){const c=St(h),m=St(l);if(null===c)return l;if(c===m)return or(Ut(h),Ut(l));throw new Error("INTERNAL ERROR: innerPath ("+l+") is not within outerPath ("+h+")")}function ou(h,l){const c=Kr(h,0),m=Kr(l,0);for(let T=0;T<c.length&&T<m.length;T++){const F=Tn(c[T],m[T]);if(0!==F)return F}return c.length===m.length?0:c.length<m.length?-1:1}function ja(h,l){if(wn(h)!==wn(l))return!1;for(let c=h.pieceNum_,m=l.pieceNum_;c<=h.pieces_.length;c++,m++)if(h.pieces_[c]!==l.pieces_[m])return!1;return!0}function ns(h,l){let c=h.pieceNum_,m=l.pieceNum_;if(wn(h)>wn(l))return!1;for(;c<h.pieces_.length;){if(h.pieces_[c]!==l.pieces_[m])return!1;++c,++m}return!0}class Zi{constructor(l,c){this.errorPrefix_=c,this.parts_=Kr(l,0),this.byteLength_=Math.max(1,this.parts_.length);for(let m=0;m<this.parts_.length;m++)this.byteLength_+=(0,z.ug)(this.parts_[m]);Io(this)}}function Io(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Rs(h))}function Rs(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class ia extends Ms{constructor(){let l,c;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(c="visibilitychange",l="hidden"):typeof document.mozHidden<"u"?(c="mozvisibilitychange",l="mozHidden"):typeof document.msHidden<"u"?(c="msvisibilitychange",l="msHidden"):typeof document.webkitHidden<"u"&&(c="webkitvisibilitychange",l="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const m=!document[l];m!==this.visible_&&(this.visible_=m,this.trigger("visible",m))},!1)}static getInstance(){return new ia}getInitialEvent(l){return(0,z.hu)("visible"===l,"Unknown event type: "+l),[this.visible_]}}const oo=1e3;let bo,ui=(()=>{class h extends xs{constructor(c,m,T,F,G,te,se,me){if(super(),this.repoInfo_=c,this.applicationId_=m,this.onDataUpdate_=T,this.onConnectStatus_=F,this.onServerInfoUpdate_=G,this.authTokenProvider_=te,this.appCheckTokenProvider_=se,this.authOverride_=me,this.id=h.nextPersistentConnectionId_++,this.log_=ti("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=oo,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,me&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ia.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&Ee.getInstance().on("online",this.onOnline_,this)}sendRequest(c,m,T){const F=++this.requestNumber_,G={r:F,a:c,b:m};this.log_((0,z.Wl)(G)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(G),T&&(this.requestCBHash_[F]=T)}get(c){this.initConnection_();const m=new z.BH,F={action:"g",request:{p:c._path.toString(),q:c._queryObject},onComplete:te=>{const se=te.d;"ok"===te.s?m.resolve(se):m.reject(se)}};return this.outstandingGets_.push(F),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),m.promise}listen(c,m,T,F){this.initConnection_();const G=c._queryIdentifier,te=c._path.toString();this.log_("Listen called for "+te+" "+G),this.listens.has(te)||this.listens.set(te,new Map),(0,z.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(te).has(G),"listen() called twice for same path/queryId.");const se={onComplete:F,hashFn:m,query:c,tag:T};this.listens.get(te).set(G,se),this.connected_&&this.sendListen_(se)}sendGet_(c){const m=this.outstandingGets_[c];this.sendRequest("g",m.request,T=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),m.onComplete&&m.onComplete(T)})}sendListen_(c){const m=c.query,T=m._path.toString(),F=m._queryIdentifier;this.log_("Listen on "+T+" for "+F);const G={p:T};c.tag&&(G.q=m._queryObject,G.t=c.tag),G.h=c.hashFn(),this.sendRequest("q",G,se=>{const me=se.d,rt=se.s;h.warnOnListenWarnings_(me,m),(this.listens.get(T)&&this.listens.get(T).get(F))===c&&(this.log_("listen response",se),"ok"!==rt&&this.removeListen_(T,F),c.onComplete&&c.onComplete(rt,me))})}static warnOnListenWarnings_(c,m){if(c&&"object"==typeof c&&(0,z.r3)(c,"w")){const T=(0,z.DV)(c,"w");if(Array.isArray(T)&&~T.indexOf("no_index")){const F='".indexOn": "'+m._queryParams.getIndex().toString()+'"',G=m._path.toString();Zn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${F} at ${G} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,z.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,m=(0,z.w9)(c)?"auth":"gauth",T={cred:c};null===this.authOverride_?T.noauth=!0:"object"==typeof this.authOverride_&&(T.authvar=this.authOverride_),this.sendRequest(m,T,F=>{const G=F.s,te=F.d||"error";this.authToken_===c&&("ok"===G?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(G,te))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const m=c.s,T=c.d||"error";"ok"===m?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(m,T)})}unlisten(c,m){const T=c._path.toString(),F=c._queryIdentifier;this.log_("Unlisten called for "+T+" "+F),(0,z.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(T,F)&&this.connected_&&this.sendUnlisten_(T,F,c._queryObject,m)}sendUnlisten_(c,m,T,F){this.log_("Unlisten on "+c+" for "+m);const G={p:c};F&&(G.q=T,G.t=F),this.sendRequest("n",G)}onDisconnectPut(c,m,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,m,T):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:m,onComplete:T})}onDisconnectMerge(c,m,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,m,T):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:m,onComplete:T})}onDisconnectCancel(c,m){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,m):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:m})}sendOnDisconnect_(c,m,T,F){const G={p:m,d:T};this.log_("onDisconnect "+c,G),this.sendRequest(c,G,te=>{F&&setTimeout(()=>{F(te.s,te.d)},Math.floor(0))})}put(c,m,T,F){this.putInternal("p",c,m,T,F)}merge(c,m,T,F){this.putInternal("m",c,m,T,F)}putInternal(c,m,T,F,G){this.initConnection_();const te={p:m,d:T};void 0!==G&&(te.h=G),this.outstandingPuts_.push({action:c,request:te,onComplete:F}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+m)}sendPut_(c){const m=this.outstandingPuts_[c].action,T=this.outstandingPuts_[c].request,F=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(m,T,G=>{this.log_(m+" response",G),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),F&&F(G.s,G.d)})}reportStats(c){if(this.connected_){const m={c};this.log_("reportStats",m),this.sendRequest("s",m,T=>{"ok"!==T.s&&this.log_("reportStats","Error sending stats: "+T.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,z.Wl)(c));const m=c.r,T=this.requestCBHash_[m];T&&(delete this.requestCBHash_[m],T(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,m){this.log_("handleServerMessage",c,m),"d"===c?this.onDataUpdate_(m.p,m.d,!1,m.t):"m"===c?this.onDataUpdate_(m.p,m.d,!0,m.t):"c"===c?this.onListenRevoked_(m.p,m.q):"ac"===c?this.onAuthRevoked_(m.s,m.d):"apc"===c?this.onAppCheckRevoked_(m.s,m.d):"sd"===c?this.onSecurityDebugPacket_(m):Ur("Unrecognized action received from server: "+(0,z.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,m){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=m,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=oo,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=oo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=oo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let m=Math.max(0,this.reconnectDelay_-c);m=Math.random()*m,this.log_("Trying to reconnect in "+m+"ms"),this.scheduleConnect_(m),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,Tt.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const m=c.onDataMessage_.bind(c),T=c.onReady_.bind(c),F=c.onRealtimeDisconnect_.bind(c),G=c.id+":"+h.nextConnectionId_++,te=c.lastSessionId;let se=!1,me=null;const rt=function(){me?me.close():(se=!0,F())};c.realtime_={close:rt,sendRequest:function(on){(0,z.hu)(me,"sendRequest call when we're not connected not allowed."),me.sendRequest(on)}};const It=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[on,Rn]=yield Promise.all([c.authTokenProvider_.getToken(It),c.appCheckTokenProvider_.getToken(It)]);se?En("getToken() completed but was canceled"):(En("getToken() completed. Creating connection."),c.authToken_=on&&on.accessToken,c.appCheckToken_=Rn&&Rn.token,me=new fs(G,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,m,T,F,Or=>{Zn(Or+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},te))}catch(on){c.log_("Failed to get token: "+on),se||(c.repoInfo_.nodeAdmin&&Zn(on),rt())}}})()}interrupt(c){En("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){En("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=oo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const m=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:m})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const m=this.outstandingPuts_[c];m&&"h"in m.request&&m.queued&&(m.onComplete&&m.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,m){let T;T=m?m.map(G=>ls(G)).join("$"):"default";const F=this.removeListen_(c,T);F&&F.onComplete&&F.onComplete("permission_denied")}removeListen_(c,m){const T=new Ge(c).toString();let F;if(this.listens.has(T)){const G=this.listens.get(T);F=G.get(m),G.delete(m),0===G.size&&this.listens.delete(T)}else F=void 0;return F}onAuthRevoked_(c,m){En("Auth token revoked: "+c+"/"+m),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,m){En("App check token revoked: "+c+"/"+m),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const m of c.values())this.sendListen_(m);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let m="js";(0,z.Yr)()&&(m=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+m+"."+Ie.replace(/\./g,"-")]=1,(0,z.uI)()?c["framework.cordova"]=1:(0,z.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=Ee.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&c}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class Hn{constructor(l,c){this.name=l,this.node=c}static Wrap(l,c){return new Hn(l,c)}}class au{getCompare(){return this.compare.bind(this)}indexedValueChanged(l,c){const m=new Hn(Er,l),T=new Hn(Er,c);return 0!==this.compare(m,T)}minPost(){return Hn.MIN}}class Ia extends au{static get __EMPTY_NODE(){return bo}static set __EMPTY_NODE(l){bo=l}compare(l,c){return Tn(l.name,c.name)}isDefinedOn(l){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(l,c){return!1}minPost(){return Hn.MIN}maxPost(){return new Hn(lr,bo)}makePost(l,c){return(0,z.hu)("string"==typeof l,"KeyIndex indexValue must always be a string."),new Hn(l,bo)}toString(){return".key"}}const rs=new Ia;class Ns{constructor(l,c,m,T,F=null){this.isReverse_=T,this.resultGenerator_=F,this.nodeStack_=[];let G=1;for(;!l.isEmpty();)if(G=c?m(l.key,c):1,T&&(G*=-1),G<0)l=this.isReverse_?l.left:l.right;else{if(0===G){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,l=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}}}let qs,Bi=(()=>{class h{constructor(c,m,T,F,G){this.key=c,this.value=m,this.color=T??h.RED,this.left=F??Ai.EMPTY_NODE,this.right=G??Ai.EMPTY_NODE}copy(c,m,T,F,G){return new h(c??this.key,m??this.value,T??this.color,F??this.left,G??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,m,T){let F=this;const G=T(c,F.key);return F=G<0?F.copy(null,null,null,F.left.insert(c,m,T),null):0===G?F.copy(null,m,null,null,null):F.copy(null,null,null,null,F.right.insert(c,m,T)),F.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ai.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,m){let T,F;if(T=this,m(c,T.key)<0)!T.left.isEmpty()&&!T.left.isRed_()&&!T.left.left.isRed_()&&(T=T.moveRedLeft_()),T=T.copy(null,null,null,T.left.remove(c,m),null);else{if(T.left.isRed_()&&(T=T.rotateRight_()),!T.right.isEmpty()&&!T.right.isRed_()&&!T.right.left.isRed_()&&(T=T.moveRedRight_()),0===m(c,T.key)){if(T.right.isEmpty())return Ai.EMPTY_NODE;F=T.right.min_(),T=T.copy(F.key,F.value,null,null,T.right.removeMin_())}T=T.copy(null,null,null,null,T.right.remove(c,m))}return T.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),m=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,m)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class Ai{constructor(l,c=Ai.EMPTY_NODE){this.comparator_=l,this.root_=c}insert(l,c){return new Ai(this.comparator_,this.root_.insert(l,c,this.comparator_).copy(null,null,Bi.BLACK,null,null))}remove(l){return new Ai(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,Bi.BLACK,null,null))}get(l){let c,m=this.root_;for(;!m.isEmpty();){if(c=this.comparator_(l,m.key),0===c)return m.value;c<0?m=m.left:c>0&&(m=m.right)}return null}getPredecessorKey(l){let c,m=this.root_,T=null;for(;!m.isEmpty();){if(c=this.comparator_(l,m.key),0===c){if(m.left.isEmpty())return T?T.key:null;for(m=m.left;!m.right.isEmpty();)m=m.right;return m.key}c<0?m=m.left:c>0&&(T=m,m=m.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(l){return this.root_.inorderTraversal(l)}reverseTraversal(l){return this.root_.reverseTraversal(l)}getIterator(l){return new Ns(this.root_,null,this.comparator_,!1,l)}getIteratorFrom(l,c){return new Ns(this.root_,l,this.comparator_,!1,c)}getReverseIteratorFrom(l,c){return new Ns(this.root_,l,this.comparator_,!0,c)}getReverseIterator(l){return new Ns(this.root_,null,this.comparator_,!0,l)}}function Ws(h,l){return Tn(h.name,l.name)}function ao(h,l){return Tn(h,l)}Ai.EMPTY_NODE=new class Bo{copy(l,c,m,T,F){return this}insert(l,c,m){return new Bi(l,c,null)}remove(l,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ps=function(h){return"number"==typeof h?"number:"+hi(h):"string:"+h},jo=function(h){if(h.isLeafNode()){const l=h.val();(0,z.hu)("string"==typeof l||"number"==typeof l||"object"==typeof l&&(0,z.r3)(l,".sv"),"Priority must be a string or number.")}else(0,z.hu)(h===qs||h.isEmpty(),"priority of unexpected type.");(0,z.hu)(h===qs||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let gs,uo,xi,Sr=(()=>{class h{constructor(c,m=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=m,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),jo(this.priorityNode_)}static set __childrenNodeConstructor(c){gs=c}static get __childrenNodeConstructor(){return gs}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new h(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return Bn(c)?this:".priority"===St(c)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,m){return null}updateImmediateChild(c,m){return".priority"===c?this.updatePriority(m):m.isEmpty()&&".priority"!==c?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,m).updatePriority(this.priorityNode_)}updateChild(c,m){const T=St(c);return null===T?m:m.isEmpty()&&".priority"!==T?this:((0,z.hu)(".priority"!==T||1===wn(c),".priority must be the last token in a path"),this.updateImmediateChild(T,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ut(c),m)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,m){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+Ps(this.priorityNode_.val())+":");const m=typeof this.value_;c+=m+":",c+="number"===m?hi(this.value_):this.value_,this.lazyHash_=Ot(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===h.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof h.__childrenNodeConstructor?-1:((0,z.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const m=typeof c.value_,T=typeof this.value_,F=h.VALUE_TYPE_ORDER.indexOf(m),G=h.VALUE_TYPE_ORDER.indexOf(T);return(0,z.hu)(F>=0,"Unknown leaf type: "+m),(0,z.hu)(G>=0,"Unknown leaf type: "+T),F===G?"object"===T?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:G-F}withIndex(){return this}isIndexed(){return!0}equals(c){return c===this||!!c.isLeafNode()&&(this.value_===c.value_&&this.priorityNode_.equals(c.priorityNode_))}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const Ar=new class ji extends au{compare(l,c){const m=l.node.getPriority(),T=c.node.getPriority(),F=m.compareTo(T);return 0===F?Tn(l.name,c.name):F}isDefinedOn(l){return!l.getPriority().isEmpty()}indexedValueChanged(l,c){return!l.getPriority().equals(c.getPriority())}minPost(){return Hn.MIN}maxPost(){return new Hn(lr,new Sr("[PRIORITY-POST]",xi))}makePost(l,c){const m=uo(l);return new Hn(c,new Sr("[PRIORITY-POST]",m))}toString(){return".priority"}},ba=Math.log(2);class Ta{constructor(l){this.count=parseInt(Math.log(l+1)/ba,10),this.current_=this.count-1;const T=(F=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=l+1&T}nextBitIsOne(){const l=!(this.bits_&1<<this.current_);return this.current_--,l}}const Mi=function(h,l,c,m){h.sort(l);const T=function(se,me){const rt=me-se;let ut,It;if(0===rt)return null;if(1===rt)return ut=h[se],It=c?c(ut):ut,new Bi(It,ut.node,Bi.BLACK,null,null);{const on=parseInt(rt/2,10)+se,Rn=T(se,on),Or=T(on+1,me);return ut=h[on],It=c?c(ut):ut,new Bi(It,ut.node,Bi.BLACK,Rn,Or)}},te=function(se){let me=null,rt=null,ut=h.length;const It=function(Rn,Or){const Lo=ut-Rn,yi=ut;ut-=Rn;const Wu=T(Lo+1,yi),js=h[Lo],Pi=c?c(js):js;on(new Bi(Pi,js.node,Or,null,Wu))},on=function(Rn){me?(me.left=Rn,me=Rn):(rt=Rn,me=Rn)};for(let Rn=0;Rn<se.count;++Rn){const Or=se.nextBitIsOne(),Lo=Math.pow(2,se.count-(Rn+1));Or?It(Lo,Bi.BLACK):(It(Lo,Bi.BLACK),It(Lo,Bi.RED))}return rt}(new Ta(h.length));return new Ai(m||l,te)};let Zs;const pi={};class ws{constructor(l,c){this.indexes_=l,this.indexSet_=c}static get Default(){return(0,z.hu)(pi&&Ar,"ChildrenNode.ts has not been loaded"),Zs=Zs||new ws({".priority":pi},{".priority":Ar}),Zs}get(l){const c=(0,z.DV)(this.indexes_,l);if(!c)throw new Error("No index defined for "+l);return c instanceof Ai?c:null}hasIndex(l){return(0,z.r3)(this.indexSet_,l.toString())}addIndex(l,c){(0,z.hu)(l!==rs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const m=[];let T=!1;const F=c.getIterator(Hn.Wrap);let te,G=F.getNext();for(;G;)T=T||l.isDefinedOn(G.node),m.push(G),G=F.getNext();te=T?Mi(m,l.getCompare()):pi;const se=l.toString(),me=Object.assign({},this.indexSet_);me[se]=l;const rt=Object.assign({},this.indexes_);return rt[se]=te,new ws(rt,me)}addToIndexes(l,c){const m=(0,z.UI)(this.indexes_,(T,F)=>{const G=(0,z.DV)(this.indexSet_,F);if((0,z.hu)(G,"Missing index implementation for "+F),T===pi){if(G.isDefinedOn(l.node)){const te=[],se=c.getIterator(Hn.Wrap);let me=se.getNext();for(;me;)me.name!==l.name&&te.push(me),me=se.getNext();return te.push(l),Mi(te,G.getCompare())}return pi}{const te=c.get(l.name);let se=T;return te&&(se=se.remove(new Hn(l.name,te))),se.insert(l,l.node)}});return new ws(m,this.indexSet_)}removeFromIndexes(l,c){const m=(0,z.UI)(this.indexes_,T=>{if(T===pi)return T;{const F=c.get(l.name);return F?T.remove(new Hn(l.name,F)):T}});return new ws(m,this.indexSet_)}}let ki,kn=(()=>{class h{constructor(c,m,T){this.children_=c,this.priorityNode_=m,this.indexMap_=T,this.lazyHash_=null,this.priorityNode_&&jo(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ki||(ki=new h(new Ai(ao),null,ws.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ki}updatePriority(c){return this.children_.isEmpty()?this:new h(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const m=this.children_.get(c);return null===m?ki:m}}getChild(c){const m=St(c);return null===m?this:this.getImmediateChild(m).getChild(Ut(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,m){if((0,z.hu)(m,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(m);{const T=new Hn(c,m);let F,G;m.isEmpty()?(F=this.children_.remove(c),G=this.indexMap_.removeFromIndexes(T,this.children_)):(F=this.children_.insert(c,m),G=this.indexMap_.addToIndexes(T,this.children_));const te=F.isEmpty()?ki:this.priorityNode_;return new h(F,te,G)}}updateChild(c,m){const T=St(c);if(null===T)return m;{(0,z.hu)(".priority"!==St(c)||1===wn(c),".priority must be the last token in a path");const F=this.getImmediateChild(T).updateChild(Ut(c),m);return this.updateImmediateChild(T,F)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const m={};let T=0,F=0,G=!0;if(this.forEachChild(Ar,(te,se)=>{m[te]=se.val(c),T++,G&&h.INTEGER_REGEXP_.test(te)?F=Math.max(F,Number(te)):G=!1}),!c&&G&&F<2*T){const te=[];for(const se in m)te[se]=m[se];return te}return c&&!this.getPriority().isEmpty()&&(m[".priority"]=this.getPriority().val()),m}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+Ps(this.getPriority().val())+":"),this.forEachChild(Ar,(m,T)=>{const F=T.hash();""!==F&&(c+=":"+m+":"+F)}),this.lazyHash_=""===c?"":Ot(c)}return this.lazyHash_}getPredecessorChildName(c,m,T){const F=this.resolveIndex_(T);if(F){const G=F.getPredecessorKey(new Hn(c,m));return G?G.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const m=this.resolveIndex_(c);if(m){const T=m.minKey();return T&&T.name}return this.children_.minKey()}getFirstChild(c){const m=this.getFirstChildName(c);return m?new Hn(m,this.children_.get(m)):null}getLastChildName(c){const m=this.resolveIndex_(c);if(m){const T=m.maxKey();return T&&T.name}return this.children_.maxKey()}getLastChild(c){const m=this.getLastChildName(c);return m?new Hn(m,this.children_.get(m)):null}forEachChild(c,m){const T=this.resolveIndex_(c);return T?T.inorderTraversal(F=>m(F.name,F.node)):this.children_.inorderTraversal(m)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,m){const T=this.resolveIndex_(m);if(T)return T.getIteratorFrom(c,F=>F);{const F=this.children_.getIteratorFrom(c.name,Hn.Wrap);let G=F.peek();for(;null!=G&&m.compare(G,c)<0;)F.getNext(),G=F.peek();return F}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,m){const T=this.resolveIndex_(m);if(T)return T.getReverseIteratorFrom(c,F=>F);{const F=this.children_.getReverseIteratorFrom(c.name,Hn.Wrap);let G=F.peek();for(;null!=G&&m.compare(G,c)>0;)F.getNext(),G=F.peek();return F}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===An?-1:0}withIndex(c){if(c===rs||this.indexMap_.hasIndex(c))return this;{const m=this.indexMap_.addIndex(c,this.children_);return new h(this.children_,this.priorityNode_,m)}}isIndexed(c){return c===rs||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const m=c;if(this.getPriority().equals(m.getPriority())){if(this.children_.count()===m.children_.count()){const T=this.getIterator(Ar),F=m.getIterator(Ar);let G=T.getNext(),te=F.getNext();for(;G&&te;){if(G.name!==te.name||!G.node.equals(te.node))return!1;G=T.getNext(),te=F.getNext()}return null===G&&null===te}return!1}return!1}}resolveIndex_(c){return c===rs?null:this.indexMap_.get(c.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const An=new class $o extends kn{constructor(){super(new Ai(ao),kn.EMPTY_NODE,ws.Default)}compareTo(l){return l===this?0:1}equals(l){return l===this}getPriority(){return this}getImmediateChild(l){return kn.EMPTY_NODE}isEmpty(){return!1}};function vr(h,l=null){if(null===h)return kn.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(l=h[".priority"]),(0,z.hu)(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new Sr(h,vr(l));if(h instanceof Array){let c=kn.EMPTY_NODE;return On(h,(m,T)=>{if((0,z.r3)(h,m)&&"."!==m.substring(0,1)){const F=vr(T);(F.isLeafNode()||!F.isEmpty())&&(c=c.updateImmediateChild(m,F))}}),c.updatePriority(vr(l))}{const c=[];let m=!1;if(On(h,(G,te)=>{if("."!==G.substring(0,1)){const se=vr(te);se.isEmpty()||(m=m||!se.getPriority().isEmpty(),c.push(new Hn(G,se)))}}),0===c.length)return kn.EMPTY_NODE;const F=Mi(c,Ws,G=>G.name,ao);if(m){const G=Mi(c,Ar.getCompare());return new kn(F,vr(l),new ws({".priority":G},{".priority":Ar}))}return new kn(F,vr(l),ws.Default)}}Object.defineProperties(Hn,{MIN:{value:new Hn(Er,kn.EMPTY_NODE)},MAX:{value:new Hn(lr,An)}}),Ia.__EMPTY_NODE=kn.EMPTY_NODE,Sr.__childrenNodeConstructor=kn,function Ca(h){qs=h}(An),function oa(h){xi=h}(An),function Tu(h){uo=h}(vr);class Go extends au{constructor(l){super(),this.indexPath_=l,(0,z.hu)(!Bn(l)&&".priority"!==St(l),"Can't create PathIndex with empty path or .priority key")}extractChild(l){return l.getChild(this.indexPath_)}isDefinedOn(l){return!l.getChild(this.indexPath_).isEmpty()}compare(l,c){const m=this.extractChild(l.node),T=this.extractChild(c.node),F=m.compareTo(T);return 0===F?Tn(l.name,c.name):F}makePost(l,c){const m=vr(l),T=kn.EMPTY_NODE.updateChild(this.indexPath_,m);return new Hn(c,T)}maxPost(){const l=kn.EMPTY_NODE.updateChild(this.indexPath_,An);return new Hn(lr,l)}toString(){return Kr(this.indexPath_,0).join("/")}}const lo=new class To extends au{compare(l,c){const m=l.node.compareTo(c.node);return 0===m?Tn(l.name,c.name):m}isDefinedOn(l){return!0}indexedValueChanged(l,c){return!l.equals(c)}minPost(){return Hn.MIN}maxPost(){return Hn.MAX}makePost(l,c){const m=vr(l);return new Hn(c,m)}toString(){return".value"}};function Ha(h){return{type:"value",snapshotNode:h}}function aa(h,l){return{type:"child_added",snapshotNode:l,childName:h}}function Es(h,l){return{type:"child_removed",snapshotNode:l,childName:h}}function nt(h,l,c){return{type:"child_changed",snapshotNode:l,childName:h,oldSnap:c}}class Da{constructor(l){this.index_=l}updateChild(l,c,m,T,F,G){(0,z.hu)(l.isIndexed(this.index_),"A node must be indexed if only a child is updated");const te=l.getImmediateChild(c);return te.getChild(T).equals(m.getChild(T))&&te.isEmpty()===m.isEmpty()||(null!=G&&(m.isEmpty()?l.hasChild(c)?G.trackChildChange(Es(c,te)):(0,z.hu)(l.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):te.isEmpty()?G.trackChildChange(aa(c,m)):G.trackChildChange(nt(c,m,te))),l.isLeafNode()&&m.isEmpty())?l:l.updateImmediateChild(c,m).withIndex(this.index_)}updateFullNode(l,c,m){return null!=m&&(l.isLeafNode()||l.forEachChild(Ar,(T,F)=>{c.hasChild(T)||m.trackChildChange(Es(T,F))}),c.isLeafNode()||c.forEachChild(Ar,(T,F)=>{if(l.hasChild(T)){const G=l.getImmediateChild(T);G.equals(F)||m.trackChildChange(nt(T,F,G))}else m.trackChildChange(aa(T,F))})),c.withIndex(this.index_)}updatePriority(l,c){return l.isEmpty()?kn.EMPTY_NODE:l.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class co{constructor(l){this.indexedFilter_=new Da(l.getIndex()),this.index_=l.getIndex(),this.startPost_=co.getStartPost_(l),this.endPost_=co.getEndPost_(l),this.startIsInclusive_=!l.startAfterSet_,this.endIsInclusive_=!l.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(l){const c=this.startIsInclusive_?this.index_.compare(this.getStartPost(),l)<=0:this.index_.compare(this.getStartPost(),l)<0,m=this.endIsInclusive_?this.index_.compare(l,this.getEndPost())<=0:this.index_.compare(l,this.getEndPost())<0;return c&&m}updateChild(l,c,m,T,F,G){return this.matches(new Hn(c,m))||(m=kn.EMPTY_NODE),this.indexedFilter_.updateChild(l,c,m,T,F,G)}updateFullNode(l,c,m){c.isLeafNode()&&(c=kn.EMPTY_NODE);let T=c.withIndex(this.index_);T=T.updatePriority(kn.EMPTY_NODE);const F=this;return c.forEachChild(Ar,(G,te)=>{F.matches(new Hn(G,te))||(T=T.updateImmediateChild(G,kn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(l,T,m)}updatePriority(l,c){return l}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(l){if(l.hasStart()){const c=l.getIndexStartName();return l.getIndex().makePost(l.getIndexStartValue(),c)}return l.getIndex().minPost()}static getEndPost_(l){if(l.hasEnd()){const c=l.getIndexEndName();return l.getIndex().makePost(l.getIndexEndValue(),c)}return l.getIndex().maxPost()}}class $i{constructor(l){this.withinDirectionalStart=c=>this.reverse_?this.withinEndPost(c):this.withinStartPost(c),this.withinDirectionalEnd=c=>this.reverse_?this.withinStartPost(c):this.withinEndPost(c),this.withinStartPost=c=>{const m=this.index_.compare(this.rangedFilter_.getStartPost(),c);return this.startIsInclusive_?m<=0:m<0},this.withinEndPost=c=>{const m=this.index_.compare(c,this.rangedFilter_.getEndPost());return this.endIsInclusive_?m<=0:m<0},this.rangedFilter_=new co(l),this.index_=l.getIndex(),this.limit_=l.getLimit(),this.reverse_=!l.isViewFromLeft(),this.startIsInclusive_=!l.startAfterSet_,this.endIsInclusive_=!l.endBeforeSet_}updateChild(l,c,m,T,F,G){return this.rangedFilter_.matches(new Hn(c,m))||(m=kn.EMPTY_NODE),l.getImmediateChild(c).equals(m)?l:l.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(l,c,m,T,F,G):this.fullLimitUpdateChild_(l,c,m,F,G)}updateFullNode(l,c,m){let T;if(c.isLeafNode()||c.isEmpty())T=kn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let F;T=kn.EMPTY_NODE.withIndex(this.index_),F=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let G=0;for(;F.hasNext()&&G<this.limit_;){const te=F.getNext();if(this.withinDirectionalStart(te)){if(!this.withinDirectionalEnd(te))break;T=T.updateImmediateChild(te.name,te.node),G++}}}else{let F;T=c.withIndex(this.index_),T=T.updatePriority(kn.EMPTY_NODE),F=this.reverse_?T.getReverseIterator(this.index_):T.getIterator(this.index_);let G=0;for(;F.hasNext();){const te=F.getNext();G<this.limit_&&this.withinDirectionalStart(te)&&this.withinDirectionalEnd(te)?G++:T=T.updateImmediateChild(te.name,kn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(l,T,m)}updatePriority(l,c){return l}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(l,c,m,T,F){let G;if(this.reverse_){const ut=this.index_.getCompare();G=(It,on)=>ut(on,It)}else G=this.index_.getCompare();const te=l;(0,z.hu)(te.numChildren()===this.limit_,"");const se=new Hn(c,m),me=this.reverse_?te.getFirstChild(this.index_):te.getLastChild(this.index_),rt=this.rangedFilter_.matches(se);if(te.hasChild(c)){const ut=te.getImmediateChild(c);let It=T.getChildAfterChild(this.index_,me,this.reverse_);for(;null!=It&&(It.name===c||te.hasChild(It.name));)It=T.getChildAfterChild(this.index_,It,this.reverse_);const on=null==It?1:G(It,se);if(rt&&!m.isEmpty()&&on>=0)return F?.trackChildChange(nt(c,m,ut)),te.updateImmediateChild(c,m);{F?.trackChildChange(Es(c,ut));const Or=te.updateImmediateChild(c,kn.EMPTY_NODE);return null!=It&&this.rangedFilter_.matches(It)?(F?.trackChildChange(aa(It.name,It.node)),Or.updateImmediateChild(It.name,It.node)):Or}}return m.isEmpty()?l:rt&&G(me,se)>=0?(null!=F&&(F.trackChildChange(Es(me.name,me.node)),F.trackChildChange(aa(c,m))),te.updateImmediateChild(c,m).updateImmediateChild(me.name,kn.EMPTY_NODE)):l}}class Is{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ar}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Er}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ar}copy(){const l=new Is;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.startAfterSet_=this.startAfterSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.endBeforeSet_=this.endBeforeSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l}}function zo(h,l,c){const m=h.copy();return m.startSet_=!0,void 0===l&&(l=null),m.indexStartValue_=l,null!=c?(m.startNameSet_=!0,m.indexStartName_=c):(m.startNameSet_=!1,m.indexStartName_=""),m}function Do(h,l,c){const m=h.copy();return m.endSet_=!0,void 0===l&&(l=null),m.indexEndValue_=l,void 0!==c?(m.endNameSet_=!0,m.indexEndName_=c):(m.endNameSet_=!1,m.indexEndName_=""),m}function gi(h,l){const c=h.copy();return c.index_=l,c}function Fi(h){const l={};if(h.isDefault())return l;let c;if(h.index_===Ar?c="$priority":h.index_===lo?c="$value":h.index_===rs?c="$key":((0,z.hu)(h.index_ instanceof Go,"Unrecognized index type!"),c=h.index_.toString()),l.orderBy=(0,z.Wl)(c),h.startSet_){const m=h.startAfterSet_?"startAfter":"startAt";l[m]=(0,z.Wl)(h.indexStartValue_),h.startNameSet_&&(l[m]+=","+(0,z.Wl)(h.indexStartName_))}if(h.endSet_){const m=h.endBeforeSet_?"endBefore":"endAt";l[m]=(0,z.Wl)(h.indexEndValue_),h.endNameSet_&&(l[m]+=","+(0,z.Wl)(h.indexEndName_))}return h.limitSet_&&(h.isViewFromLeft()?l.limitToFirst=h.limit_:l.limitToLast=h.limit_),l}function Ks(h){const l={};if(h.startSet_&&(l.sp=h.indexStartValue_,h.startNameSet_&&(l.sn=h.indexStartName_),l.sin=!h.startAfterSet_),h.endSet_&&(l.ep=h.indexEndValue_,h.endNameSet_&&(l.en=h.indexEndName_),l.ein=!h.endBeforeSet_),h.limitSet_){l.l=h.limit_;let c=h.viewFrom_;""===c&&(c=h.isViewFromLeft()?"l":"r"),l.vf=c}return h.index_!==Ar&&(l.i=h.index_.toString()),l}class Os extends xs{constructor(l,c,m,T){super(),this.repoInfo_=l,this.onDataUpdate_=c,this.authTokenProvider_=m,this.appCheckTokenProvider_=T,this.log_=ti("p:rest:"),this.listens_={}}reportStats(l){throw new Error("Method not implemented.")}static getListenId_(l,c){return void 0!==c?"tag$"+c:((0,z.hu)(l._queryParams.isDefault(),"should have a tag if it's not a default query."),l._path.toString())}listen(l,c,m,T){const F=l._path.toString();this.log_("Listen called for "+F+" "+l._queryIdentifier);const G=Os.getListenId_(l,m),te={};this.listens_[G]=te;const se=Fi(l._queryParams);this.restRequest_(F+".json",se,(me,rt)=>{let ut=rt;if(404===me&&(ut=null,me=null),null===me&&this.onDataUpdate_(F,ut,!1,m),(0,z.DV)(this.listens_,G)===te){let It;It=me?401===me?"permission_denied":"rest_error:"+me:"ok",T(It,null)}})}unlisten(l,c){const m=Os.getListenId_(l,c);delete this.listens_[m]}get(l){const c=Fi(l._queryParams),m=l._path.toString(),T=new z.BH;return this.restRequest_(m+".json",c,(F,G)=>{let te=G;404===F&&(te=null,F=null),null===F?(this.onDataUpdate_(m,te,!1,null),T.resolve(te)):T.reject(new Error(te))}),T.promise}refreshAuthToken(l){}restRequest_(l,c={},m){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([T,F])=>{T&&T.accessToken&&(c.auth=T.accessToken),F&&F.token&&(c.ac=F.token);const G=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+l+"?ns="+this.repoInfo_.namespace+(0,z.xO)(c);this.log_("Sending REST request for "+G);const te=new XMLHttpRequest;te.onreadystatechange=()=>{if(m&&4===te.readyState){this.log_("REST Response for "+G+" received. status:",te.status,"response:",te.responseText);let se=null;if(te.status>=200&&te.status<300){try{se=(0,z.cI)(te.responseText)}catch{Zn("Failed to parse JSON response for "+G+": "+te.responseText)}m(null,se)}else 401!==te.status&&404!==te.status&&Zn("Got unsuccessful REST response for "+G+" Status: "+te.status),m(te.status);m=null}},te.open("GET",G,!0),te.send()})}}class Ys{constructor(){this.rootNode_=kn.EMPTY_NODE}getNode(l){return this.rootNode_.getChild(l)}updateSnapshot(l,c){this.rootNode_=this.rootNode_.updateChild(l,c)}}function Sa(){return{value:null,children:new Map}}function qo(h,l,c){if(Bn(l))h.value=c,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(l,c);else{const m=St(l);h.children.has(m)||h.children.set(m,Sa()),qo(h.children.get(m),l=Ut(l),c)}}function ks(h,l){if(Bn(l))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const c=h.value;return h.value=null,c.forEachChild(Ar,(m,T)=>{qo(h,new Ge(m),T)}),ks(h,l)}}if(h.children.size>0){const c=St(l);return l=Ut(l),h.children.has(c)&&ks(h.children.get(c),l)&&h.children.delete(c),0===h.children.size}return!0}function Aa(h,l,c){null!==h.value?c(l,h.value):function Fs(h,l){h.children.forEach((c,m)=>{l(m,c)})}(h,(m,T)=>{Aa(T,new Ge(l.toString()+"/"+m),c)})}class Yt{constructor(l){this.collection_=l,this.last_=null}get(){const l=this.collection_.get(),c=Object.assign({},l);return this.last_&&On(this.last_,(m,T)=>{c[m]=c[m]-T}),this.last_=l,c}}class lu{constructor(l,c){this.server_=c,this.statsToReport_={},this.statsListener_=new Yt(l);const m=1e4+2e4*Math.random();qr(this.reportStats_.bind(this),Math.floor(m))}reportStats_(){const l=this.statsListener_.get(),c={};let m=!1;On(l,(T,F)=>{F>0&&(0,z.r3)(this.statsToReport_,T)&&(c[T]=F,m=!0)}),m&&this.server_.reportStats(c),qr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var wi=(()=>{return(h=wi||(wi={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",wi;var h})();function Ao(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class Zo{constructor(l,c,m){this.path=l,this.affectedTree=c,this.revert=m,this.type=wi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(l){if(Bn(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new Ge(l));return new Zo(dt(),c,this.revert)}}return(0,z.hu)(St(this.path)===l,"operationForChild called for unrelated child."),new Zo(Ut(this.path),this.affectedTree,this.revert)}}class Wa{constructor(l,c){this.source=l,this.path=c,this.type=wi.LISTEN_COMPLETE}operationForChild(l){return Bn(this.path)?new Wa(this.source,dt()):new Wa(this.source,Ut(this.path))}}class ii{constructor(l,c,m){this.source=l,this.path=c,this.snap=m,this.type=wi.OVERWRITE}operationForChild(l){return Bn(this.path)?new ii(this.source,dt(),this.snap.getImmediateChild(l)):new ii(this.source,Ut(this.path),this.snap)}}class Cs{constructor(l,c,m){this.source=l,this.path=c,this.children=m,this.type=wi.MERGE}operationForChild(l){if(Bn(this.path)){const c=this.children.subtree(new Ge(l));return c.isEmpty()?null:c.value?new ii(this.source,dt(),c.value):new Cs(this.source,dt(),c)}return(0,z.hu)(St(this.path)===l,"Can't get a merge for a child not on the path of the operation"),new Cs(this.source,Ut(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Kn{constructor(l,c,m){this.node_=l,this.fullyInitialized_=c,this.filtered_=m}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(l){if(Bn(l))return this.isFullyInitialized()&&!this.filtered_;const c=St(l);return this.isCompleteForChild(c)}isCompleteForChild(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)}getNode(){return this.node_}}class Hi{constructor(l){this.query_=l,this.index_=this.query_._queryParams.getIndex()}}function Qs(h,l,c,m,T,F){const G=m.filter(te=>te.type===c);G.sort((te,se)=>function Ki(h,l,c){if(null==l.childName||null==c.childName)throw(0,z.g5)("Should only compare child_ events.");const m=new Hn(l.childName,l.snapshotNode),T=new Hn(c.childName,c.snapshotNode);return h.index_.compare(m,T)}(h,te,se)),G.forEach(te=>{const se=function xa(h,l,c){return"value"===l.type||"child_removed"===l.type||(l.prevName=c.getPredecessorChildName(l.childName,l.snapshotNode,h.index_)),l}(h,te,F);T.forEach(me=>{me.respondsTo(te.type)&&l.push(me.createEvent(se,h.query_))})})}function Li(h,l){return{eventCache:h,serverCache:l}}function Au(h,l,c,m){return Li(new Kn(l,c,m),h.serverCache)}function Ma(h,l,c,m){return Li(h.eventCache,new Kn(l,c,m))}function ho(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function k(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let K;class Q{constructor(l,c=(()=>(K||(K=new Ai(Ir)),K))()){this.value=l,this.children=c}static fromObject(l){let c=new Q(null);return On(l,(m,T)=>{c=c.set(new Ge(m),T)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(l,c){if(null!=this.value&&c(this.value))return{path:dt(),value:this.value};if(Bn(l))return null;{const m=St(l),T=this.children.get(m);if(null!==T){const F=T.findRootMostMatchingPathAndValue(Ut(l),c);return null!=F?{path:nr(new Ge(m),F.path),value:F.value}:null}return null}}findRootMostValueAndPath(l){return this.findRootMostMatchingPathAndValue(l,()=>!0)}subtree(l){if(Bn(l))return this;{const c=St(l),m=this.children.get(c);return null!==m?m.subtree(Ut(l)):new Q(null)}}set(l,c){if(Bn(l))return new Q(c,this.children);{const m=St(l),F=(this.children.get(m)||new Q(null)).set(Ut(l),c),G=this.children.insert(m,F);return new Q(this.value,G)}}remove(l){if(Bn(l))return this.children.isEmpty()?new Q(null):new Q(null,this.children);{const c=St(l),m=this.children.get(c);if(m){const T=m.remove(Ut(l));let F;return F=T.isEmpty()?this.children.remove(c):this.children.insert(c,T),null===this.value&&F.isEmpty()?new Q(null):new Q(this.value,F)}return this}}get(l){if(Bn(l))return this.value;{const c=St(l),m=this.children.get(c);return m?m.get(Ut(l)):null}}setTree(l,c){if(Bn(l))return c;{const m=St(l),F=(this.children.get(m)||new Q(null)).setTree(Ut(l),c);let G;return G=F.isEmpty()?this.children.remove(m):this.children.insert(m,F),new Q(this.value,G)}}fold(l){return this.fold_(dt(),l)}fold_(l,c){const m={};return this.children.inorderTraversal((T,F)=>{m[T]=F.fold_(nr(l,T),c)}),c(l,this.value,m)}findOnPath(l,c){return this.findOnPath_(l,dt(),c)}findOnPath_(l,c,m){const T=!!this.value&&m(c,this.value);if(T)return T;if(Bn(l))return null;{const F=St(l),G=this.children.get(F);return G?G.findOnPath_(Ut(l),nr(c,F),m):null}}foreachOnPath(l,c){return this.foreachOnPath_(l,dt(),c)}foreachOnPath_(l,c,m){if(Bn(l))return this;{this.value&&m(c,this.value);const T=St(l),F=this.children.get(T);return F?F.foreachOnPath_(Ut(l),nr(c,T),m):new Q(null)}}foreach(l){this.foreach_(dt(),l)}foreach_(l,c){this.children.inorderTraversal((m,T)=>{T.foreach_(nr(l,m),c)}),this.value&&c(l,this.value)}foreachChild(l){this.children.inorderTraversal((c,m)=>{m.value&&l(c,m.value)})}}class ce{constructor(l){this.writeTree_=l}static empty(){return new ce(new Q(null))}}function ze(h,l,c){if(Bn(l))return new ce(new Q(c));{const m=h.writeTree_.findRootMostValueAndPath(l);if(null!=m){const T=m.path;let F=m.value;const G=or(T,l);return F=F.updateChild(G,c),new ce(h.writeTree_.set(T,F))}{const T=new Q(c),F=h.writeTree_.setTree(l,T);return new ce(F)}}}function lt(h,l,c){let m=h;return On(c,(T,F)=>{m=ze(m,nr(l,T),F)}),m}function Vt(h,l){if(Bn(l))return ce.empty();{const c=h.writeTree_.setTree(l,new Q(null));return new ce(c)}}function Xn(h,l){return null!=Yn(h,l)}function Yn(h,l){const c=h.writeTree_.findRootMostValueAndPath(l);return null!=c?h.writeTree_.get(c.path).getChild(or(c.path,l)):null}function ur(h){const l=[],c=h.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(Ar,(m,T)=>{l.push(new Hn(m,T))}):h.writeTree_.children.inorderTraversal((m,T)=>{null!=T.value&&l.push(new Hn(m,T.value))}),l}function jn(h,l){if(Bn(l))return h;{const c=Yn(h,l);return new ce(null!=c?new Q(c):h.writeTree_.subtree(l))}}function Yr(h){return h.writeTree_.isEmpty()}function rr(h,l){return mi(dt(),h.writeTree_,l)}function mi(h,l,c){if(null!=l.value)return c.updateChild(h,l.value);{let m=null;return l.children.inorderTraversal((T,F)=>{".priority"===T?((0,z.hu)(null!==F.value,"Priority writes must always be leaf nodes"),m=F.value):c=mi(nr(h,T),F,c)}),!c.getChild(h).isEmpty()&&null!==m&&(c=c.updateChild(nr(h,".priority"),m)),c}}function _r(h,l){return Pa(l,h)}function Ra(h,l){if(h.snap)return ns(h.path,l);for(const c in h.children)if(h.children.hasOwnProperty(c)&&ns(nr(h.path,c),l))return!0;return!1}function Uu(h){return h.visible}function eo(h,l,c){let m=ce.empty();for(let T=0;T<h.length;++T){const F=h[T];if(l(F)){const G=F.path;let te;if(F.snap)ns(c,G)?(te=or(c,G),m=ze(m,te,F.snap)):ns(G,c)&&(te=or(G,c),m=ze(m,dt(),F.snap.getChild(te)));else{if(!F.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(ns(c,G))te=or(c,G),m=lt(m,te,F.children);else if(ns(G,c))if(te=or(G,c),Bn(te))m=lt(m,dt(),F.children);else{const se=(0,z.DV)(F.children,St(te));if(se){const me=se.getChild(Ut(te));m=ze(m,dt(),me)}}}}}return m}function Mo(h,l,c,m,T){if(m||T){const F=jn(h.visibleWrites,l);return!T&&Yr(F)?c:T||null!=c||Xn(F,dt())?rr(eo(h.allWrites,function(me){return(me.visible||T)&&(!m||!~m.indexOf(me.writeId))&&(ns(me.path,l)||ns(l,me.path))},l),c||kn.EMPTY_NODE):null}{const F=Yn(h.visibleWrites,l);if(null!=F)return F;{const G=jn(h.visibleWrites,l);return Yr(G)?c:null!=c||Xn(G,dt())?rr(G,c||kn.EMPTY_NODE):null}}}function ua(h,l,c,m){return Mo(h.writeTree,h.treePath,l,c,m)}function Qo(h,l){return function qa(h,l,c){let m=kn.EMPTY_NODE;const T=Yn(h.visibleWrites,l);if(T)return T.isLeafNode()||T.forEachChild(Ar,(F,G)=>{m=m.updateImmediateChild(F,G)}),m;if(c){const F=jn(h.visibleWrites,l);return c.forEachChild(Ar,(G,te)=>{const se=rr(jn(F,new Ge(G)),te);m=m.updateImmediateChild(G,se)}),ur(F).forEach(G=>{m=m.updateImmediateChild(G.name,G.node)}),m}return ur(jn(h.visibleWrites,l)).forEach(G=>{m=m.updateImmediateChild(G.name,G.node)}),m}(h.writeTree,h.treePath,l)}function Jo(h,l,c,m){return function Ko(h,l,c,m,T){(0,z.hu)(m||T,"Either existingEventSnap or existingServerSnap must exist");const F=nr(l,c);if(Xn(h.visibleWrites,F))return null;{const G=jn(h.visibleWrites,F);return Yr(G)?T.getChild(c):rr(G,T.getChild(c))}}(h.writeTree,h.treePath,l,c,m)}function la(h,l){return function Ts(h,l){return Yn(h.visibleWrites,l)}(h.writeTree,nr(h.treePath,l))}function ca(h,l,c){return function Yo(h,l,c,m){const T=nr(l,c),F=Yn(h.visibleWrites,T);return null!=F?F:m.isCompleteForChild(c)?rr(jn(h.visibleWrites,T),m.getNode().getImmediateChild(c)):null}(h.writeTree,h.treePath,l,c)}function Na(h,l){return Pa(nr(h.treePath,l),h.writeTree)}function Pa(h,l){return{treePath:h,writeTree:l}}class du{constructor(){this.changeMap=new Map}trackChildChange(l){const c=l.type,m=l.childName;(0,z.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==m,"Only non-priority child changes can be tracked.");const T=this.changeMap.get(m);if(T){const F=T.type;if("child_added"===c&&"child_removed"===F)this.changeMap.set(m,nt(m,l.snapshotNode,T.snapshotNode));else if("child_removed"===c&&"child_added"===F)this.changeMap.delete(m);else if("child_removed"===c&&"child_changed"===F)this.changeMap.set(m,Es(m,T.oldSnap));else if("child_changed"===c&&"child_added"===F)this.changeMap.set(m,aa(m,l.snapshotNode));else{if("child_changed"!==c||"child_changed"!==F)throw(0,z.g5)("Illegal combination of changes: "+l+" occurred after "+T);this.changeMap.set(m,nt(m,l.snapshotNode,T.oldSnap))}}else this.changeMap.set(m,l)}getChanges(){return Array.from(this.changeMap.values())}}const to=new class Ku{getCompleteChild(l){return null}getChildAfterChild(l,c,m){return null}};class Za{constructor(l,c,m=null){this.writes_=l,this.viewCache_=c,this.optCompleteServerCache_=m}getCompleteChild(l){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(l))return c.getNode().getImmediateChild(l);{const m=null!=this.optCompleteServerCache_?new Kn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ca(this.writes_,l,m)}}getChildAfterChild(l,c,m){const T=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:k(this.viewCache_),F=function cu(h,l,c,m,T,F){return function xu(h,l,c,m,T,F,G){let te;const se=jn(h.visibleWrites,l),me=Yn(se,dt());if(null!=me)te=me;else{if(null==c)return[];te=rr(se,c)}if(te=te.withIndex(G),te.isEmpty()||te.isLeafNode())return[];{const rt=[],ut=G.getCompare(),It=F?te.getReverseIteratorFrom(m,G):te.getIteratorFrom(m,G);let on=It.getNext();for(;on&&rt.length<T;)0!==ut(on,m)&&rt.push(on),on=It.getNext();return rt}}(h.writeTree,h.treePath,l,c,m,T,F)}(this.writes_,T,c,1,m,l);return 0===F.length?null:F[0]}}function kr(h,l,c,m,T,F){const G=l.eventCache;if(null!=la(m,c))return l;{let te,se;if(Bn(c))if((0,z.hu)(l.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),l.serverCache.isFiltered()){const me=k(l),ut=Qo(m,me instanceof kn?me:kn.EMPTY_NODE);te=h.filter.updateFullNode(l.eventCache.getNode(),ut,F)}else{const me=ua(m,k(l));te=h.filter.updateFullNode(l.eventCache.getNode(),me,F)}else{const me=St(c);if(".priority"===me){(0,z.hu)(1===wn(c),"Can't have a priority with additional path components");const rt=G.getNode();se=l.serverCache.getNode();const ut=Jo(m,c,rt,se);te=null!=ut?h.filter.updatePriority(rt,ut):G.getNode()}else{const rt=Ut(c);let ut;if(G.isCompleteForChild(me)){se=l.serverCache.getNode();const It=Jo(m,c,G.getNode(),se);ut=null!=It?G.getNode().getImmediateChild(me).updateChild(rt,It):G.getNode().getImmediateChild(me)}else ut=ca(m,me,l.serverCache);te=null!=ut?h.filter.updateChild(G.getNode(),me,ut,rt,T,F):G.getNode()}}return Au(l,te,G.isFullyInitialized()||Bn(c),h.filter.filtersNodes())}}function Pr(h,l,c,m,T,F,G,te){const se=l.serverCache;let me;const rt=G?h.filter:h.filter.getIndexedFilter();if(Bn(c))me=rt.updateFullNode(se.getNode(),m,null);else if(rt.filtersNodes()&&!se.isFiltered()){const on=se.getNode().updateChild(c,m);me=rt.updateFullNode(se.getNode(),on,null)}else{const on=St(c);if(!se.isCompleteForPath(c)&&wn(c)>1)return l;const Rn=Ut(c),Lo=se.getNode().getImmediateChild(on).updateChild(Rn,m);me=".priority"===on?rt.updatePriority(se.getNode(),Lo):rt.updateChild(se.getNode(),on,Lo,Rn,to,null)}const ut=Ma(l,me,se.isFullyInitialized()||Bn(c),rt.filtersNodes());return kr(h,ut,c,T,new Za(T,ut,F),te)}function hu(h,l,c,m,T,F,G){const te=l.eventCache;let se,me;const rt=new Za(T,l,F);if(Bn(c))me=h.filter.updateFullNode(l.eventCache.getNode(),m,G),se=Au(l,me,!0,h.filter.filtersNodes());else{const ut=St(c);if(".priority"===ut)me=h.filter.updatePriority(l.eventCache.getNode(),m),se=Au(l,me,te.isFullyInitialized(),te.isFiltered());else{const It=Ut(c),on=te.getNode().getImmediateChild(ut);let Rn;if(Bn(It))Rn=m;else{const Or=rt.getCompleteChild(ut);Rn=null!=Or?".priority"===hr(It)&&Or.getChild(Di(It)).isEmpty()?Or:Or.updateChild(It,m):kn.EMPTY_NODE}se=on.equals(Rn)?l:Au(l,h.filter.updateChild(te.getNode(),ut,Rn,It,rt,G),te.isFullyInitialized(),h.filter.filtersNodes())}}return se}function Vu(h,l){return h.eventCache.isCompleteForChild(l)}function Ka(h,l,c){return c.foreach((m,T)=>{l=l.updateChild(m,T)}),l}function Ya(h,l,c,m,T,F,G,te){if(l.serverCache.getNode().isEmpty()&&!l.serverCache.isFullyInitialized())return l;let me,se=l;me=Bn(c)?m:new Q(null).setTree(c,m);const rt=l.serverCache.getNode();return me.children.inorderTraversal((ut,It)=>{if(rt.hasChild(ut)){const Rn=Ka(0,l.serverCache.getNode().getImmediateChild(ut),It);se=Pr(h,se,new Ge(ut),Rn,T,F,G,te)}}),me.children.inorderTraversal((ut,It)=>{const on=!l.serverCache.isCompleteForChild(ut)&&null===It.value;if(!rt.hasChild(ut)&&!on){const Or=Ka(0,l.serverCache.getNode().getImmediateChild(ut),It);se=Pr(h,se,new Ge(ut),Or,T,F,G,te)}}),se}class D{constructor(l,c){this.query_=l,this.eventRegistrations_=[];const m=this.query_._queryParams,T=new Da(m.getIndex()),F=function uu(h){return h.loadsAllData()?new Da(h.getIndex()):h.hasLimit()?new $i(h):new co(h)}(m);this.processor_=function Mu(h){return{filter:h}}(F);const G=c.serverCache,te=c.eventCache,se=T.updateFullNode(kn.EMPTY_NODE,G.getNode(),null),me=F.updateFullNode(kn.EMPTY_NODE,te.getNode(),null),rt=new Kn(se,G.isFullyInitialized(),T.filtersNodes()),ut=new Kn(me,te.isFullyInitialized(),F.filtersNodes());this.viewCache_=Li(ut,rt),this.eventGenerator_=new Hi(this.query_)}get query(){return this.query_}}function le(h,l){const c=k(h.viewCache_);return c&&(h.query._queryParams.loadsAllData()||!Bn(l)&&!c.getImmediateChild(St(l)).isEmpty())?c.getChild(l):null}function Ke(h){return 0===h.eventRegistrations_.length}function ln(h,l,c){const m=[];if(c){(0,z.hu)(null==l,"A cancel should cancel all event registrations.");const T=h.query._path;h.eventRegistrations_.forEach(F=>{const G=F.createCancelEvent(c,T);G&&m.push(G)})}if(l){let T=[];for(let F=0;F<h.eventRegistrations_.length;++F){const G=h.eventRegistrations_[F];if(G.matches(l)){if(l.hasAnyCallback()){T=T.concat(h.eventRegistrations_.slice(F+1));break}}else T.push(G)}h.eventRegistrations_=T}else h.eventRegistrations_=[];return m}function Fr(h,l,c,m){l.type===wi.MERGE&&null!==l.source.queryId&&((0,z.hu)(k(h.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(ho(h.viewCache_),"Missing event cache, even though we have a server cache"));const T=h.viewCache_,F=function da(h,l,c,m,T){const F=new du;let G,te;if(c.type===wi.OVERWRITE){const me=c;me.source.fromUser?G=hu(h,l,me.path,me.snap,m,T,F):((0,z.hu)(me.source.fromServer,"Unknown source."),te=me.source.tagged||l.serverCache.isFiltered()&&!Bn(me.path),G=Pr(h,l,me.path,me.snap,m,T,te,F))}else if(c.type===wi.MERGE){const me=c;me.source.fromUser?G=function ul(h,l,c,m,T,F,G){let te=l;return m.foreach((se,me)=>{const rt=nr(c,se);Vu(l,St(rt))&&(te=hu(h,te,rt,me,T,F,G))}),m.foreach((se,me)=>{const rt=nr(c,se);Vu(l,St(rt))||(te=hu(h,te,rt,me,T,F,G))}),te}(h,l,me.path,me.children,m,T,F):((0,z.hu)(me.source.fromServer,"Unknown source."),te=me.source.tagged||l.serverCache.isFiltered(),G=Ya(h,l,me.path,me.children,m,T,te,F))}else if(c.type===wi.ACK_USER_WRITE){const me=c;G=me.revert?function R(h,l,c,m,T,F){let G;if(null!=la(m,c))return l;{const te=new Za(m,l,T),se=l.eventCache.getNode();let me;if(Bn(c)||".priority"===St(c)){let rt;if(l.serverCache.isFullyInitialized())rt=ua(m,k(l));else{const ut=l.serverCache.getNode();(0,z.hu)(ut instanceof kn,"serverChildren would be complete if leaf node"),rt=Qo(m,ut)}me=h.filter.updateFullNode(se,rt,F)}else{const rt=St(c);let ut=ca(m,rt,l.serverCache);null==ut&&l.serverCache.isCompleteForChild(rt)&&(ut=se.getImmediateChild(rt)),me=null!=ut?h.filter.updateChild(se,rt,ut,Ut(c),te,F):l.eventCache.getNode().hasChild(rt)?h.filter.updateChild(se,rt,kn.EMPTY_NODE,Ut(c),te,F):se,me.isEmpty()&&l.serverCache.isFullyInitialized()&&(G=ua(m,k(l)),G.isLeafNode()&&(me=h.filter.updateFullNode(me,G,F)))}return G=l.serverCache.isFullyInitialized()||null!=la(m,dt()),Au(l,me,G,h.filter.filtersNodes())}}(h,l,me.path,m,T,F):function ha(h,l,c,m,T,F,G){if(null!=la(T,c))return l;const te=l.serverCache.isFiltered(),se=l.serverCache;if(null!=m.value){if(Bn(c)&&se.isFullyInitialized()||se.isCompleteForPath(c))return Pr(h,l,c,se.getNode().getChild(c),T,F,te,G);if(Bn(c)){let me=new Q(null);return se.getNode().forEachChild(rs,(rt,ut)=>{me=me.set(new Ge(rt),ut)}),Ya(h,l,c,me,T,F,te,G)}return l}{let me=new Q(null);return m.foreach((rt,ut)=>{const It=nr(c,rt);se.isCompleteForPath(It)&&(me=me.set(rt,se.getNode().getChild(It)))}),Ya(h,l,c,me,T,F,te,G)}}(h,l,me.path,me.affectedTree,m,T,F)}else{if(c.type!==wi.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+c.type);G=function Qi(h,l,c,m,T){const F=l.serverCache;return kr(h,Ma(l,F.getNode(),F.isFullyInitialized()||Bn(c),F.isFiltered()),c,m,to,T)}(h,l,c.path,m,F)}const se=F.getChanges();return function Oa(h,l,c){const m=l.eventCache;if(m.isFullyInitialized()){const T=m.getNode().isLeafNode()||m.getNode().isEmpty(),F=ho(h);(c.length>0||!h.eventCache.isFullyInitialized()||T&&!m.getNode().equals(F)||!m.getNode().getPriority().equals(F.getPriority()))&&c.push(Ha(ho(l)))}}(l,G,se),{viewCache:G,changes:se}}(h.processor_,T,l,c,m);return function Nr(h,l){(0,z.hu)(l.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(l.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,F.viewCache),(0,z.hu)(F.viewCache.serverCache.isFullyInitialized()||!T.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=F.viewCache,is(h,F.changes,F.viewCache.eventCache.getNode(),null)}function is(h,l,c,m){return function jr(h,l,c,m){const T=[],F=[];return l.forEach(G=>{"child_changed"===G.type&&h.index_.indexedValueChanged(G.oldSnap,G.snapshotNode)&&F.push(function ar(h,l){return{type:"child_moved",snapshotNode:l,childName:h}}(G.childName,G.snapshotNode))}),Qs(h,T,"child_removed",l,m,c),Qs(h,T,"child_added",l,m,c),Qs(h,T,"child_moved",F,m,c),Qs(h,T,"child_changed",l,m,c),Qs(h,T,"value",l,m,c),T}(h.eventGenerator_,l,c,m?[m]:h.eventRegistrations_)}let Ui,pa;class Ro{constructor(){this.views=new Map}}function Ja(h,l,c,m){const T=l.source.queryId;if(null!==T){const F=h.views.get(T);return(0,z.hu)(null!=F,"SyncTree gave us an op for an invalid query."),Fr(F,l,c,m)}{let F=[];for(const G of h.views.values())F=F.concat(Fr(G,l,c,m));return F}}function fa(h,l,c,m,T){const G=h.views.get(l._queryIdentifier);if(!G){let te=ua(c,T?m:null),se=!1;te?se=!0:m instanceof kn?(te=Qo(c,m),se=!1):(te=kn.EMPTY_NODE,se=!1);const me=Li(new Kn(te,se,!1),new Kn(m,T,!1));return new D(l,me)}return G}function ju(h){const l=[];for(const c of h.views.values())c.query._queryParams.loadsAllData()||l.push(c);return l}function Us(h,l){let c=null;for(const m of h.views.values())c=c||le(m,l);return c}function Vs(h,l){return l._queryParams.loadsAllData()?Po(h):h.views.get(l._queryIdentifier)}function no(h,l){return null!=Vs(h,l)}function No(h){return null!=Po(h)}function Po(h){for(const l of h.views.values())if(l.query._queryParams.loadsAllData())return l;return null}let $u=1;class sc{constructor(l){this.listenProvider_=l,this.syncPointTree_=new Q(null),this.pendingWriteTree_=function Ei(){return{visibleWrites:ce.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function b(h,l,c,m,T){return function bs(h,l,c,m,T){(0,z.hu)(m>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===T&&(T=!0),h.allWrites.push({path:l,snap:c,writeId:m,visible:T}),T&&(h.visibleWrites=ze(h.visibleWrites,l,c)),h.lastWriteId=m}(h.pendingWriteTree_,l,c,m,T),T?_s(h,new ii({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,c)):[]}function E(h,l,c=!1){const m=function Yi(h,l){for(let c=0;c<h.allWrites.length;c++){const m=h.allWrites[c];if(m.writeId===l)return m}return null}(h.pendingWriteTree_,l);if(function Xs(h,l){const c=h.allWrites.findIndex(te=>te.writeId===l);(0,z.hu)(c>=0,"removeWrite called with nonexistent writeId.");const m=h.allWrites[c];h.allWrites.splice(c,1);let T=m.visible,F=!1,G=h.allWrites.length-1;for(;T&&G>=0;){const te=h.allWrites[G];te.visible&&(G>=c&&Ra(te,m.path)?T=!1:ns(m.path,te.path)&&(F=!0)),G--}return!!T&&(F?(function xo(h){h.visibleWrites=eo(h.allWrites,Uu,dt()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(m.snap?h.visibleWrites=Vt(h.visibleWrites,m.path):On(m.children,se=>{h.visibleWrites=Vt(h.visibleWrites,nr(m.path,se))}),!0))}(h.pendingWriteTree_,l)){let F=new Q(null);return null!=m.snap?F=F.set(dt(),!0):On(m.children,G=>{F=F.set(new Ge(G),!0)}),_s(h,new Zo(m.path,F,c))}return[]}function P(h,l,c){return _s(h,new ii({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,c))}function Re(h,l,c,m,T=!1){const F=l._path,G=h.syncPointTree_.get(F);let te=[];if(G&&("default"===l._queryIdentifier||no(G,l))){const se=function Bu(h,l,c,m){const T=l._queryIdentifier,F=[];let G=[];const te=No(h);if("default"===T)for(const[se,me]of h.views.entries())G=G.concat(ln(me,c,m)),Ke(me)&&(h.views.delete(se),me.query._queryParams.loadsAllData()||F.push(me.query));else{const se=h.views.get(T);se&&(G=G.concat(ln(se,c,m)),Ke(se)&&(h.views.delete(T),se.query._queryParams.loadsAllData()||F.push(se.query)))}return te&&!No(h)&&F.push(new(function Qa(){return(0,z.hu)(Ui,"Reference.ts has not been loaded"),Ui}())(l._repo,l._path)),{removed:F,events:G}}(G,l,c,m);(function Xo(h){return 0===h.views.size})(G)&&(h.syncPointTree_=h.syncPointTree_.remove(F));const me=se.removed;if(te=se.events,!T){const rt=-1!==me.findIndex(It=>It._queryParams.loadsAllData()),ut=h.syncPointTree_.findOnPath(F,(It,on)=>No(on));if(rt&&!ut){const It=h.syncPointTree_.subtree(F);if(!It.isEmpty()){const on=function gn(h){return h.fold((l,c,m)=>{if(c&&No(c))return[Po(c)];{let T=[];return c&&(T=ju(c)),On(m,(F,G)=>{T=T.concat(G)}),T}})}(It);for(let Rn=0;Rn<on.length;++Rn){const Or=on[Rn],Lo=Or.query,yi=H(h,Or);h.listenProvider_.startListening(mn(Lo),X(h,Lo),yi.hashFn,yi.onComplete)}}}!ut&&me.length>0&&!m&&(rt?h.listenProvider_.stopListening(mn(l),null):me.forEach(It=>{const on=h.queryToTagMap.get(ue(It));h.listenProvider_.stopListening(mn(It),on)}))}!function In(h,l){for(let c=0;c<l.length;++c){const m=l[c];if(!m._queryParams.loadsAllData()){const T=ue(m),F=h.queryToTagMap.get(T);h.queryToTagMap.delete(T),h.tagToQueryMap.delete(F)}}}(h,me)}return te}function ct(h,l,c,m){const T=Oe(h,m);if(null!=T){const F=$e(T),G=F.path,te=F.queryId,se=or(G,l);return bt(h,G,new ii(Ao(te),se,c))}return[]}function Qt(h,l,c,m=!1){const T=l._path;let F=null,G=!1;h.syncPointTree_.foreachOnPath(T,(It,on)=>{const Rn=or(It,T);F=F||Us(on,Rn),G=G||No(on)});let se,te=h.syncPointTree_.get(T);te?(G=G||No(te),F=F||Us(te,dt())):(te=new Ro,h.syncPointTree_=h.syncPointTree_.set(T,te)),null!=F?se=!0:(se=!1,F=kn.EMPTY_NODE,h.syncPointTree_.subtree(T).foreachChild((on,Rn)=>{const Or=Us(Rn,dt());Or&&(F=F.updateImmediateChild(on,Or))}));const me=no(te,l);if(!me&&!l._queryParams.loadsAllData()){const It=ue(l);(0,z.hu)(!h.queryToTagMap.has(It),"View does not exist, but we have a tag");const on=function ir(){return $u++}();h.queryToTagMap.set(It,on),h.tagToQueryMap.set(on,It)}let ut=function $r(h,l,c,m,T,F){const G=fa(h,l,m,T,F);return h.views.has(l._queryIdentifier)||h.views.set(l._queryIdentifier,G),function sn(h,l){h.eventRegistrations_.push(l)}(G,c),function Ri(h,l){const c=h.viewCache_.eventCache,m=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(Ar,(F,G)=>{m.push(aa(F,G))}),c.isFullyInitialized()&&m.push(Ha(c.getNode())),is(h,m,c.getNode(),l)}(G,c)}(te,l,c,_r(h.pendingWriteTree_,T),F,se);if(!me&&!G&&!m){const It=Vs(te,l);ut=ut.concat(function Wn(h,l,c){const m=l._path,T=X(h,l),F=H(h,c),G=h.listenProvider_.startListening(mn(l),T,F.hashFn,F.onComplete),te=h.syncPointTree_.subtree(m);if(T)(0,z.hu)(!No(te.value),"If we're adding a query, it shouldn't be shadowed");else{const se=te.fold((me,rt,ut)=>{if(!Bn(me)&&rt&&No(rt))return[Po(rt).query];{let It=[];return rt&&(It=It.concat(ju(rt).map(on=>on.query))),On(ut,(on,Rn)=>{It=It.concat(Rn)}),It}});for(let me=0;me<se.length;++me){const rt=se[me];h.listenProvider_.stopListening(mn(rt),X(h,rt))}}return G}(h,l,It))}return ut}function fr(h,l,c){const T=h.pendingWriteTree_,F=h.syncPointTree_.findOnPath(l,(G,te)=>{const me=Us(te,or(G,l));if(me)return me});return Mo(T,l,F,c,!0)}function _s(h,l){return ro(l,h.syncPointTree_,null,_r(h.pendingWriteTree_,dt()))}function ro(h,l,c,m){if(Bn(h.path))return V(h,l,c,m);{const T=l.get(dt());null==c&&null!=T&&(c=Us(T,dt()));let F=[];const G=St(h.path),te=h.operationForChild(G),se=l.children.get(G);if(se&&te){const me=c?c.getImmediateChild(G):null,rt=Na(m,G);F=F.concat(ro(te,se,me,rt))}return T&&(F=F.concat(Ja(T,h,m,c))),F}}function V(h,l,c,m){const T=l.get(dt());null==c&&null!=T&&(c=Us(T,dt()));let F=[];return l.children.inorderTraversal((G,te)=>{const se=c?c.getImmediateChild(G):null,me=Na(m,G),rt=h.operationForChild(G);rt&&(F=F.concat(V(rt,te,se,me)))}),T&&(F=F.concat(Ja(T,h,m,c))),F}function H(h,l){const c=l.query,m=X(h,c);return{hashFn:()=>(function w(h){return h.viewCache_.serverCache.getNode()}(l)||kn.EMPTY_NODE).hash(),onComplete:T=>{if("ok"===T)return m?function re(h,l,c){const m=Oe(h,c);if(m){const T=$e(m),F=T.path,G=T.queryId,te=or(F,l);return bt(h,F,new Wa(Ao(G),te))}return[]}(h,c._path,m):function J(h,l){return _s(h,new Wa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l))}(h,c._path);{const F=function an(h,l){let c="Unknown Error";"too_big"===h?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?c="Client doesn't have permission to access the desired data.":"unavailable"===h&&(c="The service is unavailable");const m=new Error(h+" at "+l._path.toString()+": "+c);return m.code=h.toUpperCase(),m}(T,c);return Re(h,c,null,F)}}}}function X(h,l){const c=ue(l);return h.queryToTagMap.get(c)}function ue(h){return h._path.toString()+"$"+h._queryIdentifier}function Oe(h,l){return h.tagToQueryMap.get(l)}function $e(h){const l=h.indexOf("$");return(0,z.hu)(-1!==l&&l<h.length-1,"Bad queryKey."),{queryId:h.substr(l+1),path:new Ge(h.substr(0,l))}}function bt(h,l,c){const m=h.syncPointTree_.get(l);return(0,z.hu)(m,"Missing sync point for query tag that we're tracking"),Ja(m,c,_r(h.pendingWriteTree_,l),null)}function mn(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function Nc(){return(0,z.hu)(pa,"Reference.ts has not been loaded"),pa}())(h._repo,h._path):h}class po{constructor(l){this.node_=l}getImmediateChild(l){const c=this.node_.getImmediateChild(l);return new po(c)}node(){return this.node_}}class os{constructor(l,c){this.syncTree_=l,this.path_=c}getImmediateChild(l){const c=nr(this.path_,l);return new os(this.syncTree_,c)}node(){return fr(this.syncTree_,this.path_)}}const fu=function(h,l,c){return h&&"object"==typeof h?((0,z.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?ea(h[".sv"],l,c):"object"==typeof h[".sv"]?ta(h[".sv"],l):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},ea=function(h,l,c){if("timestamp"===h)return c.timestamp;(0,z.hu)(!1,"Unexpected server value: "+h)},ta=function(h,l,c){h.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const m=h.increment;"number"!=typeof m&&(0,z.hu)(!1,"Unexpected increment value: "+m);const T=l.node();if((0,z.hu)(null!==T&&typeof T<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!T.isLeafNode())return m;const G=T.getValue();return"number"!=typeof G?m:G+m},ga=function(h,l,c,m){return Ni(l,new os(c,h),m)},pu=function(h,l,c){return Ni(h,new po(l),c)};function Ni(h,l,c){const m=h.getPriority().val(),T=fu(m,l.getImmediateChild(".priority"),c);let F;if(h.isLeafNode()){const G=h,te=fu(G.getValue(),l,c);return te!==G.getValue()||T!==G.getPriority().val()?new Sr(te,vr(T)):h}{const G=h;return F=G,T!==G.getPriority().val()&&(F=F.updatePriority(new Sr(T))),G.forEachChild(Ar,(te,se)=>{const me=Ni(se,l.getImmediateChild(te),c);me!==se&&(F=F.updateImmediateChild(te,me))}),F}}class oc{constructor(l="",c=null,m={children:{},childCount:0}){this.name=l,this.parent=c,this.node=m}}function Yu(h,l){let c=l instanceof Ge?l:new Ge(l),m=h,T=St(c);for(;null!==T;){const F=(0,z.DV)(m.node.children,T)||{children:{},childCount:0};m=new oc(T,m,F),c=Ut(c),T=St(c)}return m}function gu(h){return h.node.value}function td(h,l){h.node.value=l,mu(h)}function Oh(h){return h.node.childCount>0}function nd(h,l){On(h.node.children,(c,m)=>{l(new oc(c,h,m))})}function Al(h,l,c,m){c&&!m&&l(h),nd(h,T=>{Al(T,l,!0,m)}),c&&m&&l(h)}function ll(h){return new Ge(null===h.parent?h.name:ll(h.parent)+"/"+h.name)}function mu(h){null!==h.parent&&function Lf(h,l,c){const m=function kh(h){return void 0===gu(h)&&!Oh(h)}(c),T=(0,z.r3)(h.node.children,l);m&&T?(delete h.node.children[l],h.node.childCount--,mu(h)):!m&&!T&&(h.node.children[l]=c.node,h.node.childCount++,mu(h))}(h.parent,h.name,h)}const Uf=/[\[\].#$\/\u0000-\u001F\u007F]/,Vf=/[\[\].#$\u0000-\u001F\u007F]/,xl=10485760,Ld=function(h){return"string"==typeof h&&0!==h.length&&!Uf.test(h)},rd=function(h){return"string"==typeof h&&0!==h.length&&!Vf.test(h)},Ml=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!Xt(h)||h&&"object"==typeof h&&(0,z.r3)(h,".sv")},_u=function(h,l,c,m){m&&void 0===l||Rl((0,z.gK)(h,"value"),l,c)},Rl=function(h,l,c){const m=c instanceof Ge?new Zi(c,h):c;if(void 0===l)throw new Error(h+"contains undefined "+Rs(m));if("function"==typeof l)throw new Error(h+"contains a function "+Rs(m)+" with contents = "+l.toString());if(Xt(l))throw new Error(h+"contains "+l.toString()+" "+Rs(m));if("string"==typeof l&&l.length>xl/3&&(0,z.ug)(l)>xl)throw new Error(h+"contains a string greater than "+xl+" utf8 bytes "+Rs(m)+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){let T=!1,F=!1;if(On(l,(G,te)=>{if(".value"===G)T=!0;else if(".priority"!==G&&".sv"!==G&&(F=!0,!Ld(G)))throw new Error(h+" contains an invalid key ("+G+") "+Rs(m)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Oi(h,l){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(l),h.byteLength_+=(0,z.ug)(l),Io(h)})(m,G),Rl(h,te,m),function Si(h){const l=h.parts_.pop();h.byteLength_-=(0,z.ug)(l),h.parts_.length>0&&(h.byteLength_-=1)}(m)}),T&&F)throw new Error(h+' contains ".value" child '+Rs(m)+" in addition to actual children.")}},ka=function(h,l,c,m){if(m&&void 0===l)return;const T=(0,z.gK)(h,"values");if(!l||"object"!=typeof l||Array.isArray(l))throw new Error(T+" must be an object containing the children to replace.");const F=[];On(l,(G,te)=>{const se=new Ge(G);if(Rl(T,te,nr(c,se)),".priority"===hr(se)&&!Ml(te))throw new Error(T+"contains an invalid value for '"+se.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");F.push(se)}),function(h,l){let c,m;for(c=0;c<l.length;c++){m=l[c];const F=Kr(m);for(let G=0;G<F.length;G++)if((".priority"!==F[G]||G!==F.length-1)&&!Ld(F[G]))throw new Error(h+"contains an invalid key ("+F[G]+") in path "+m.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}l.sort(ou);let T=null;for(c=0;c<l.length;c++){if(m=l[c],null!==T&&ns(T,m))throw new Error(h+"contains a path "+T.toString()+" that is ancestor of another path "+m.toString());T=m}}(T,F)},sd=function(h,l,c){if(!c||void 0!==l){if(Xt(l))throw new Error((0,z.gK)(h,"priority")+"is "+l.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ml(l))throw new Error((0,z.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ac=function(h,l,c,m){if(!(m&&void 0===c||Ld(c)))throw new Error((0,z.gK)(h,l)+'was an invalid key = "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Nl=function(h,l,c,m){if(!(m&&void 0===c||rd(c)))throw new Error((0,z.gK)(h,l)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},na=function(h,l){if(".info"===St(l))throw new Error(h+" failed = Can't modify data under /.info/")},Lh=function(h,l){const c=l.path.toString();if("string"!=typeof l.repoInfo.host||0===l.repoInfo.host.length||!Ld(l.repoInfo.namespace)&&"localhost"!==l.repoInfo.host.split(":")[0]||0!==c.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),rd(h)}(c))throw new Error((0,z.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class uc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function cl(h,l){let c=null;for(let m=0;m<l.length;m++){const T=l[m],F=T.getPath();null!==c&&!ja(F,c.path)&&(h.eventLists_.push(c),c=null),null===c&&(c={events:[],path:F}),c.events.push(T)}c&&h.eventLists_.push(c)}function Pl(h,l,c){cl(h,c),Pc(h,m=>ja(m,l))}function ma(h,l,c){cl(h,c),Pc(h,m=>ns(m,l)||ns(l,m))}function Pc(h,l){h.recursionDepth_++;let c=!0;for(let m=0;m<h.eventLists_.length;m++){const T=h.eventLists_[m];T&&(l(T.path)?(go(h.eventLists_[m]),h.eventLists_[m]=null):c=!1)}c&&(h.eventLists_=[]),h.recursionDepth_--}function go(h){for(let l=0;l<h.events.length;l++){const c=h.events[l];if(null!==c){h.events[l]=null;const m=c.getEventRunner();Gt&&En("event: "+c.toString()),Rr(m)}}}const Qu="repo_interrupt";class Ji{constructor(l,c,m,T){this.repoInfo_=l,this.forceRestClient_=c,this.authTokenProvider_=m,this.appCheckProvider_=T,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new uc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Sa(),this.transactionQueueTree_=new oc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function lc(h){const c=h.infoData_.getNode(new Ge(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function cc(h){return function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h}({timestamp:lc(h)})}function Bd(h,l,c,m,T){h.dataUpdateCount++;const F=new Ge(l);c=h.interceptServerDataCallback_?h.interceptServerDataCallback_(l,c):c;let G=[];if(T)if(m){const se=(0,z.UI)(c,me=>vr(me));G=function tn(h,l,c,m){const T=Oe(h,m);if(T){const F=$e(T),G=F.path,te=F.queryId,se=or(G,l),me=Q.fromObject(c);return bt(h,G,new Cs(Ao(te),se,me))}return[]}(h.serverSyncTree_,F,se,T)}else{const se=vr(c);G=ct(h.serverSyncTree_,F,se,T)}else if(m){const se=(0,z.UI)(c,me=>vr(me));G=function $(h,l,c){const m=Q.fromObject(c);return _s(h,new Cs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,m))}(h.serverSyncTree_,F,se)}else{const se=vr(c);G=P(h.serverSyncTree_,F,se)}let te=F;G.length>0&&(te=Ll(h,F)),ma(h.eventQueue_,te,G)}function od(h,l){$d(h,"connected",l),!1===l&&function Vh(h){hl(h,"onDisconnectEvents");const l=cc(h),c=Sa();Aa(h.onDisconnect_,dt(),(T,F)=>{const G=ga(T,F,h.serverSyncTree_,l);qo(c,T,G)});let m=[];Aa(c,dt(),(T,F)=>{m=m.concat(P(h.serverSyncTree_,T,F));const G=pl(h,T);Ll(h,G)}),h.onDisconnect_=Sa(),ma(h.eventQueue_,dt(),m)}(h)}function $d(h,l,c){const m=new Ge("/.info/"+l),T=vr(c);h.infoData_.updateSnapshot(m,T);const F=P(h.infoSyncTree_,m,T);ma(h.eventQueue_,m,F)}function Fa(h){return h.nextWriteId_++}function yu(h,l,c,m,T){hl(h,"set",{path:l.toString(),value:c,priority:m});const F=cc(h),G=vr(c,m),te=fr(h.serverSyncTree_,l),se=pu(G,te,F),me=Fa(h),rt=b(h.serverSyncTree_,l,se,me,!0);cl(h.eventQueue_,rt),h.server_.put(l.toString(),G.val(!0),(It,on)=>{const Rn="ok"===It;Rn||Zn("set at "+l+" failed: "+It);const Or=E(h.serverSyncTree_,me,!Rn);ma(h.eventQueue_,l,Or),ko(0,T,It,on)});const ut=pl(h,l);Ll(h,ut),ma(h.eventQueue_,ut,[])}function Ol(h,l,c){h.server_.onDisconnectCancel(l.toString(),(m,T)=>{"ok"===m&&ks(h.onDisconnect_,l),ko(0,c,m,T)})}function dl(h,l,c,m){const T=vr(c);h.server_.onDisconnectPut(l.toString(),T.val(!0),(F,G)=>{"ok"===F&&qo(h.onDisconnect_,l,T),ko(0,m,F,G)})}function ld(h,l,c){let m;m=".info"===St(l._path)?Re(h.infoSyncTree_,l,c):Re(h.serverSyncTree_,l,c),Pl(h.eventQueue_,l._path,m)}function Xu(h){h.persistentConnection_&&h.persistentConnection_.interrupt(Qu)}function hl(h,...l){let c="";h.persistentConnection_&&(c=h.persistentConnection_.id+":"),En(c,...l)}function ko(h,l,c,m){l&&Rr(()=>{if("ok"===c)l(null);else{const T=(c||"error").toUpperCase();let F=T;m&&(F+=": "+m);const G=new Error(F);G.code=T,l(G)}})}function Oc(h,l,c){return fr(h.serverSyncTree_,l,c)||kn.EMPTY_NODE}function kl(h,l=h.transactionQueueTree_){if(l||Lc(h,l),gu(l)){const c=Fc(h,l);(0,z.hu)(c.length>0,"Sending zero length transaction queue"),c.every(T=>0===T.status)&&function Fl(h,l,c){const m=c.map(me=>me.currentWriteId),T=Oc(h,l,m);let F=T;const G=T.hash();for(let me=0;me<c.length;me++){const rt=c[me];(0,z.hu)(0===rt.status,"tryToSendTransactionQueue_: items in queue should all be run."),rt.status=1,rt.retryCount++;const ut=or(l,rt.path);F=F.updateChild(ut,rt.currentOutputSnapshotRaw)}const te=F.val(!0),se=l;h.server_.put(se.toString(),te,me=>{hl(h,"transaction put response",{path:se.toString(),status:me});let rt=[];if("ok"===me){const ut=[];for(let It=0;It<c.length;It++)c[It].status=2,rt=rt.concat(E(h.serverSyncTree_,c[It].currentWriteId)),c[It].onComplete&&ut.push(()=>c[It].onComplete(null,!0,c[It].currentOutputSnapshotResolved)),c[It].unwatcher();Lc(h,Yu(h.transactionQueueTree_,l)),kl(h,h.transactionQueueTree_),ma(h.eventQueue_,l,rt);for(let It=0;It<ut.length;It++)Rr(ut[It])}else{if("datastale"===me)for(let ut=0;ut<c.length;ut++)c[ut].status=3===c[ut].status?4:0;else{Zn("transaction at "+se.toString()+" failed: "+me);for(let ut=0;ut<c.length;ut++)c[ut].status=4,c[ut].abortReason=me}Ll(h,l)}},G)}(h,ll(l),c)}else Oh(l)&&nd(l,c=>{kl(h,c)})}function Ll(h,l){const c=kc(h,l),m=ll(c);return function dd(h,l,c){if(0===l.length)return;const m=[];let T=[];const G=l.filter(te=>0===te.status).map(te=>te.currentWriteId);for(let te=0;te<l.length;te++){const se=l[te],me=or(c,se.path);let ut,rt=!1;if((0,z.hu)(null!==me,"rerunTransactionsUnderNode_: relativePath should not be null."),4===se.status)rt=!0,ut=se.abortReason,T=T.concat(E(h.serverSyncTree_,se.currentWriteId,!0));else if(0===se.status)if(se.retryCount>=25)rt=!0,ut="maxretry",T=T.concat(E(h.serverSyncTree_,se.currentWriteId,!0));else{const It=Oc(h,se.path,G);se.currentInputSnapshot=It;const on=l[te].update(It.val());if(void 0!==on){Rl("transaction failed: Data returned ",on,se.path);let Rn=vr(on);"object"==typeof on&&null!=on&&(0,z.r3)(on,".priority")||(Rn=Rn.updatePriority(It.getPriority()));const Lo=se.currentWriteId,yi=cc(h),Wu=pu(Rn,It,yi);se.currentOutputSnapshotRaw=Rn,se.currentOutputSnapshotResolved=Wu,se.currentWriteId=Fa(h),G.splice(G.indexOf(Lo),1),T=T.concat(b(h.serverSyncTree_,se.path,Wu,se.currentWriteId,se.applyLocally)),T=T.concat(E(h.serverSyncTree_,Lo,!0))}else rt=!0,ut="nodata",T=T.concat(E(h.serverSyncTree_,se.currentWriteId,!0))}ma(h.eventQueue_,c,T),T=[],rt&&(l[te].status=2,setTimeout(l[te].unwatcher,Math.floor(0)),l[te].onComplete&&m.push("nodata"===ut?()=>l[te].onComplete(null,!1,l[te].currentInputSnapshot):()=>l[te].onComplete(new Error(ut),!1,null)))}Lc(h,h.transactionQueueTree_);for(let te=0;te<m.length;te++)Rr(m[te]);kl(h,h.transactionQueueTree_)}(h,Fc(h,c),m),m}function kc(h,l){let c,m=h.transactionQueueTree_;for(c=St(l);null!==c&&void 0===gu(m);)m=Yu(m,c),c=St(l=Ut(l));return m}function Fc(h,l){const c=[];return fl(h,l,c),c.sort((m,T)=>m.order-T.order),c}function fl(h,l,c){const m=gu(l);if(m)for(let T=0;T<m.length;T++)c.push(m[T]);nd(l,T=>{fl(h,T,c)})}function Lc(h,l){const c=gu(l);if(c){let m=0;for(let T=0;T<c.length;T++)2!==c[T].status&&(c[m]=c[T],m++);c.length=m,td(l,c.length>0?c:void 0)}nd(l,m=>{Lc(h,m)})}function pl(h,l){const c=ll(kc(h,l)),m=Yu(h.transactionQueueTree_,l);return function Wp(h,l,c){let m=c?h:h.parent;for(;null!==m;){if(l(m))return!0;m=m.parent}}(m,T=>{dc(h,T)}),dc(h,m),Al(m,T=>{dc(h,T)}),c}function dc(h,l){const c=gu(l);if(c){const m=[];let T=[],F=-1;for(let G=0;G<c.length;G++)3===c[G].status||(1===c[G].status?((0,z.hu)(F===G-1,"All SENT items should be at beginning of queue."),F=G,c[G].status=3,c[G].abortReason="set"):((0,z.hu)(0===c[G].status,"Unexpected transaction status in abort"),c[G].unwatcher(),T=T.concat(E(h.serverSyncTree_,c[G].currentWriteId,!0)),c[G].onComplete&&m.push(c[G].onComplete.bind(null,new Error("set"),!1,null))));-1===F?td(l,void 0):c.length=F+1,ma(h.eventQueue_,ll(l),T);for(let G=0;G<m.length;G++)Rr(m[G])}}const ra=function(h,l){const c=jh(h),m=c.namespace;return"firebase.com"===c.domain&&gr(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!m||"undefined"===m)&&"localhost"!==c.domain&&gr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Zn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ce(c.host,c.secure,m,"ws"===c.scheme||"wss"===c.scheme,l,"",m!==c.subdomain),path:new Ge(c.pathString)}},jh=function(h){let l="",c="",m="",T="",F="",G=!0,te="https",se=443;if("string"==typeof h){let me=h.indexOf("//");me>=0&&(te=h.substring(0,me-1),h=h.substring(me+2));let rt=h.indexOf("/");-1===rt&&(rt=h.length);let ut=h.indexOf("?");-1===ut&&(ut=h.length),l=h.substring(0,Math.min(rt,ut)),rt<ut&&(T=function Gd(h){let l="";const c=h.split("/");for(let m=0;m<c.length;m++)if(c[m].length>0){let T=c[m];try{T=decodeURIComponent(T.replace(/\+/g," "))}catch{}l+="/"+T}return l}(h.substring(rt,ut)));const It=function hc(h){const l={};"?"===h.charAt(0)&&(h=h.substring(1));for(const c of h.split("&")){if(0===c.length)continue;const m=c.split("=");2===m.length?l[decodeURIComponent(m[0])]=decodeURIComponent(m[1]):Zn(`Invalid query segment '${c}' in query '${h}'`)}return l}(h.substring(Math.min(h.length,ut)));me=l.indexOf(":"),me>=0?(G="https"===te||"wss"===te,se=parseInt(l.substring(me+1),10)):me=l.length;const on=l.slice(0,me);if("localhost"===on.toLowerCase())c="localhost";else if(on.split(".").length<=2)c=on;else{const Rn=l.indexOf(".");m=l.substring(0,Rn).toLowerCase(),c=l.substring(Rn+1),F=m}"ns"in It&&(F=It.ns)}return{host:l,port:se,domain:c,subdomain:m,secure:G,scheme:te,pathString:T,namespace:F}},hd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ul=function(){let h=0;const l=[];return function(c){const m=c===h;let T;h=c;const F=new Array(8);for(T=7;T>=0;T--)F[T]=hd.charAt(c%64),c=Math.floor(c/64);(0,z.hu)(0===c,"Cannot push at time == 0");let G=F.join("");if(m){for(T=11;T>=0&&63===l[T];T--)l[T]=0;l[T]++}else for(T=0;T<12;T++)l[T]=Math.floor(64*Math.random());for(T=0;T<12;T++)G+=hd.charAt(l[T]);return(0,z.hu)(20===G.length,"nextPushId: Length should be 20."),G}}();class gl{constructor(l,c,m,T){this.eventType=l,this.eventRegistration=c,this.snapshot=m,this.prevName=T}getPath(){const l=this.snapshot.ref;return"value"===this.eventType?l._path:l.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,z.Wl)(this.snapshot.exportVal())}}class Vl{constructor(l,c,m){this.eventRegistration=l,this.error=c,this.path=m}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class fc{constructor(l,c){this.snapshotCallback=l,this.cancelCallback=c}onValue(l,c){this.snapshotCallback.call(null,l,c)}onCancel(l){return(0,z.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,l)}get hasCancelCallback(){return!!this.cancelCallback}matches(l){return this.snapshotCallback===l.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===l.snapshotCallback.userCallback&&this.snapshotCallback.context===l.snapshotCallback.context}}class zd{constructor(l,c){this._repo=l,this._path=c}cancel(){const l=new z.BH;return Ol(this._repo,this._path,l.wrapCallback(()=>{})),l.promise}remove(){na("OnDisconnect.remove",this._path);const l=new z.BH;return dl(this._repo,this._path,null,l.wrapCallback(()=>{})),l.promise}set(l){na("OnDisconnect.set",this._path),_u("OnDisconnect.set",l,this._path,!1);const c=new z.BH;return dl(this._repo,this._path,l,c.wrapCallback(()=>{})),c.promise}setWithPriority(l,c){na("OnDisconnect.setWithPriority",this._path),_u("OnDisconnect.setWithPriority",l,this._path,!1),sd("OnDisconnect.setWithPriority",c,!1);const m=new z.BH;return function Bh(h,l,c,m,T){const F=vr(c,m);h.server_.onDisconnectPut(l.toString(),F.val(!0),(G,te)=>{"ok"===G&&qo(h.onDisconnect_,l,F),ko(0,T,G,te)})}(this._repo,this._path,l,c,m.wrapCallback(()=>{})),m.promise}update(l){na("OnDisconnect.update",this._path),ka("OnDisconnect.update",l,this._path,!1);const c=new z.BH;return function Ju(h,l,c,m){if((0,z.xb)(c))return En("onDisconnect().update() called with empty data.  Don't do anything."),void ko(0,m,"ok",void 0);h.server_.onDisconnectMerge(l.toString(),c,(T,F)=>{"ok"===T&&On(c,(G,te)=>{const se=vr(te);qo(h.onDisconnect_,nr(l,G),se)}),ko(0,m,T,F)})}(this._repo,this._path,l,c.wrapCallback(()=>{})),c.promise}}class Xa{constructor(l,c,m,T){this._repo=l,this._path=c,this._queryParams=m,this._orderByCalled=T}get key(){return Bn(this._path)?null:hr(this._path)}get ref(){return new La(this._repo,this._path)}get _queryIdentifier(){const l=Ks(this._queryParams),c=ls(l);return"{}"===c?"default":c}get _queryObject(){return Ks(this._queryParams)}isEqual(l){if(!((l=(0,z.m9)(l))instanceof Xa))return!1;const c=this._repo===l._repo,m=ja(this._path,l._path);return c&&m&&this._queryIdentifier===l._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function di(h){let l="";for(let c=h.pieceNum_;c<h.pieces_.length;c++)""!==h.pieces_[c]&&(l+="/"+encodeURIComponent(String(h.pieces_[c])));return l||"/"}(this._path)}}function ml(h,l){if(!0===h._orderByCalled)throw new Error(l+": You can't combine multiple orderBy calls.")}function _l(h){let l=null,c=null;if(h.hasStart()&&(l=h.getIndexStartValue()),h.hasEnd()&&(c=h.getIndexEndValue()),h.getIndex()===rs){const m="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",T="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==Er)throw new Error(m);if("string"!=typeof l)throw new Error(T)}if(h.hasEnd()){if(h.getIndexEndName()!==lr)throw new Error(m);if("string"!=typeof c)throw new Error(T)}}else if(h.getIndex()===Ar){if(null!=l&&!Ml(l)||null!=c&&!Ml(c))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,z.hu)(h.getIndex()instanceof Go||h.getIndex()===lo,"unknown index type."),null!=l&&"object"==typeof l||null!=c&&"object"==typeof c)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function yl(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class La extends Xa{constructor(l,c){super(l,c,new Is,!1)}get parent(){const l=Di(this._path);return null===l?null:new La(this._repo,l)}get root(){let l=this;for(;null!==l.parent;)l=l.parent;return l}}class Ru{constructor(l,c,m){this._node=l,this.ref=c,this._index=m}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(l){const c=new Ge(l),m=Fo(this.ref,l);return new Ru(this._node.getChild(c),m,Ar)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(l){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(m,T)=>l(new Ru(T,Fo(this.ref,m),Ar)))}hasChild(l){const c=new Ge(l);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function as(h,l){return(h=(0,z.m9)(h))._checkNotDeleted("ref"),void 0!==l?Fo(h._root,l):h._root}function el(h,l){(h=(0,z.m9)(h))._checkNotDeleted("refFromURL");const c=ra(l,h._repo.repoInfo_.nodeAdmin);Lh("refFromURL",c);const m=c.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&m.host!==h._repo.repoInfo_.host&&gr("refFromURL: Host name does not match the current database: (found "+m.host+" but expected "+h._repo.repoInfo_.host+")"),as(h,c.path.toString())}function Fo(h,l){return null===St((h=(0,z.m9)(h))._path)?((c=l)&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Nl("child","path",c,!1)):Nl("child","path",l,!1),new La(h._repo,nr(h._path,l));var c}function _i(h,l){h=(0,z.m9)(h),na("set",h._path),_u("set",l,h._path,!1);const c=new z.BH;return yu(h._repo,h._path,l,null,c.wrapCallback(()=>{})),c.promise}function _n(h,l){ka("update",l,h._path,!1);const c=new z.BH;return function ad(h,l,c,m){hl(h,"update",{path:l.toString(),value:c});let T=!0;const F=cc(h),G={};if(On(c,(te,se)=>{T=!1,G[te]=ga(nr(l,te),vr(se),h.serverSyncTree_,F)}),T)En("update() called with empty data.  Don't do anything."),ko(0,m,"ok",void 0);else{const te=Fa(h),se=function x(h,l,c,m){!function Js(h,l,c,m){(0,z.hu)(m>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:l,children:c,writeId:m,visible:!0}),h.visibleWrites=lt(h.visibleWrites,l,c),h.lastWriteId=m}(h.pendingWriteTree_,l,c,m);const T=Q.fromObject(c);return _s(h,new Cs({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,T))}(h.serverSyncTree_,l,G,te);cl(h.eventQueue_,se),h.server_.merge(l.toString(),c,(me,rt)=>{const ut="ok"===me;ut||Zn("update at "+l+" failed: "+me);const It=E(h.serverSyncTree_,te,!ut),on=It.length>0?Ll(h,l):l;ma(h.eventQueue_,on,It),ko(0,m,me,rt)}),On(c,me=>{const rt=pl(h,nr(l,me));Ll(h,rt)}),ma(h.eventQueue_,l,[])}}(h._repo,h._path,l,c.wrapCallback(()=>{})),c.promise}function Cn(h){h=(0,z.m9)(h);const l=new fc(()=>{}),c=new Uc(l);return function Uh(h,l,c){const m=function Ii(h,l){const c=l._path;let m=null;h.syncPointTree_.foreachOnPath(c,(me,rt)=>{const ut=or(me,c);m=m||Us(rt,ut)});let T=h.syncPointTree_.get(c);T?m=m||Us(T,dt()):(T=new Ro,h.syncPointTree_=h.syncPointTree_.set(c,T));const F=null!=m,G=F?new Kn(m,!0,!1):null;return function j(h){return ho(h.viewCache_)}(fa(T,l,_r(h.pendingWriteTree_,l._path),F?G.getNode():kn.EMPTY_NODE,F))}(h.serverSyncTree_,l);return null!=m?Promise.resolve(m):h.server_.get(l).then(T=>{const F=vr(T).withIndex(l._queryParams.getIndex());let G;if(Qt(h.serverSyncTree_,l,c,!0),l._queryParams.loadsAllData())G=P(h.serverSyncTree_,l._path,F);else{const te=X(h.serverSyncTree_,l);G=ct(h.serverSyncTree_,l._path,F,te)}return ma(h.eventQueue_,l._path,G),Re(h.serverSyncTree_,l,c,null,!0),F},T=>(hl(h,"get for query "+(0,z.Wl)(l)+" failed: "+T),Promise.reject(new Error(T))))}(h._repo,h,c).then(m=>new Ru(m,new La(h._repo,h._path),h._queryParams.getIndex()))}class Uc{constructor(l){this.callbackContext=l}respondsTo(l){return"value"===l}createEvent(l,c){const m=c._queryParams.getIndex();return new gl("value",this,new Ru(l.snapshotNode,new La(c._repo,c._path),m))}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,null)}createCancelEvent(l,c){return this.callbackContext.hasCancelCallback?new Vl(this,l,c):null}matches(l){return l instanceof Uc&&(!l.callbackContext||!this.callbackContext||l.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Wt{constructor(l,c){this.eventType=l,this.callbackContext=c}respondsTo(l){let c="children_added"===l?"child_added":l;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(l,c){return this.callbackContext.hasCancelCallback?new Vl(this,l,c):null}createEvent(l,c){(0,z.hu)(null!=l.childName,"Child events should have a childName.");const m=Fo(new La(c._repo,c._path),l.childName),T=c._queryParams.getIndex();return new gl(l.type,this,new Ru(l.snapshotNode,m,T),l.prevName)}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,l.prevName)}matches(l){return l instanceof Wt&&this.eventType===l.eventType&&(!this.callbackContext||!l.callbackContext||this.callbackContext.matches(l.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ye(h,l,c,m,T){let F;if("object"==typeof m&&(F=void 0,T=m),"function"==typeof m&&(F=m),T&&T.onlyOnce){const se=c,me=(rt,ut)=>{ld(h._repo,h,te),se(rt,ut)};me.userCallback=c.userCallback,me.context=c.context,c=me}const G=new fc(c,F||void 0),te="value"===l?new Uc(G):new Wt(l,G);return function ud(h,l,c){let m;m=".info"===St(l._path)?Qt(h.infoSyncTree_,l,c):Qt(h.serverSyncTree_,l,c),Pl(h.eventQueue_,l._path,m)}(h._repo,h,te),()=>ld(h._repo,h,te)}function Et(h,l,c,m){return Ye(h,"value",l,c,m)}function ys(h,l,c,m){return Ye(h,"child_added",l,c,m)}function pc(h,l,c,m){return Ye(h,"child_changed",l,c,m)}function fd(h,l,c,m){return Ye(h,"child_moved",l,c,m)}function vl(h,l,c,m){return Ye(h,"child_removed",l,c,m)}function Wd(h,l,c){let m=null;const T=c?new fc(c):null;"value"===l?m=new Uc(T):l&&(m=new Wt(l,T)),ld(h._repo,h,m)}class Xi{}class qd extends Xi{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){_u("endAt",this._value,l._path,!0);const c=Do(l._queryParams,this._value,this._key);if(yl(c),_l(c),l._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xa(l._repo,l._path,c,l._orderByCalled)}}class Zd extends Xi{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){_u("endBefore",this._value,l._path,!1);const c=function za(h,l,c){let m;return m=Do(h,l,h.index_===rs||c?c:Er),m.endBeforeSet_=!0,m}(l._queryParams,this._value,this._key);if(yl(c),_l(c),l._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xa(l._repo,l._path,c,l._orderByCalled)}}class $l extends Xi{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){_u("startAt",this._value,l._path,!0);const c=zo(l._queryParams,this._value,this._key);if(yl(c),_l(c),l._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Xa(l._repo,l._path,c,l._orderByCalled)}}class qn extends Xi{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){_u("startAfter",this._value,l._path,!1);const c=function Wo(h,l,c){let m;return m=zo(h,l,h.index_===rs||c?c:lr),m.startAfterSet_=!0,m}(l._queryParams,this._value,this._key);if(yl(c),_l(c),l._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Xa(l._repo,l._path,c,l._orderByCalled)}}class Vc extends Xi{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Xa(l._repo,l._path,function ms(h,l){const c=h.copy();return c.limitSet_=!0,c.limit_=l,c.viewFrom_="l",c}(l._queryParams,this._limit),l._orderByCalled)}}class bn extends Xi{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Xa(l._repo,l._path,function Ga(h,l){const c=h.copy();return c.limitSet_=!0,c.limit_=l,c.viewFrom_="r",c}(l._queryParams,this._limit),l._orderByCalled)}}class Hr extends Xi{constructor(l){super(),this._path=l}_apply(l){ml(l,"orderByChild");const c=new Ge(this._path);if(Bn(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const m=new Go(c),T=gi(l._queryParams,m);return _l(T),new Xa(l._repo,l._path,T,!0)}}class p extends Xi{_apply(l){ml(l,"orderByKey");const c=gi(l._queryParams,rs);return _l(c),new Xa(l._repo,l._path,c,!0)}}class S extends Xi{_apply(l){ml(l,"orderByPriority");const c=gi(l._queryParams,Ar);return _l(c),new Xa(l._repo,l._path,c,!0)}}class ie extends Xi{_apply(l){ml(l,"orderByValue");const c=gi(l._queryParams,lo);return _l(c),new Xa(l._repo,l._path,c,!0)}}class ot extends Xi{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){if(_u("equalTo",this._value,l._path,!1),l._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(l._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new qd(this._value,this._key)._apply(new $l(this._value,this._key)._apply(l))}}function zt(h,...l){let c=(0,z.m9)(h);for(const m of l)c=m._apply(c);return c}(function fo(h){(0,z.hu)(!Ui,"__referenceConstructor has already been defined"),Ui=h})(La),function ss(h){(0,z.hu)(!pa,"__referenceConstructor has already been defined"),pa=h}(La);const Mn={};function mc(h,l,c,m,T){let F=m||h.options.databaseURL;void 0===F&&(h.options.projectId||gr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),En("Using default host for project ",h.options.projectId),F=`${h.options.projectId}-default-rtdb.firebaseio.com`);let se,me,G=ra(F,T),te=G.repoInfo;typeof process<"u"&&process.env&&(me=process.env.FIREBASE_DATABASE_EMULATOR_HOST),me?(se=!0,F=`http://${me}?ns=${te.namespace}`,G=ra(F,T),te=G.repoInfo):se=!G.repoInfo.secure;const rt=T&&se?new Pn(Pn.OWNER):new bi(h.name,h.options,l);Lh("Invalid Firebase Database URL",G),Bn(G.path)||gr("Database URL must point to the root of a Firebase Database (not including a child path).");const ut=function tu(h,l,c,m){let T=Mn[l.name];T||(T={},Mn[l.name]=T);let F=T[h.toURLString()];return F&&gr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),F=new Ji(h,false,c,m),T[h.toURLString()]=F,F}(te,h,rt,new Jn(h.name,c));return new We(ut,h)}class We{constructor(l,c){this._repoInternal=l,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Oo(h,l,c){if(h.stats_=ve(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new Os(h.repoInfo_,(m,T,F,G)=>{Bd(h,m,T,F,G)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>od(h,!0),0);else{if(typeof c<"u"&&null!==c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Wl)(c)}catch(m){throw new Error("Invalid authOverride provided: "+m)}}h.persistentConnection_=new ui(h.repoInfo_,l,(m,T,F,G)=>{Bd(h,m,T,F,G)},m=>{od(h,m)},m=>{!function jd(h,l){On(l,(c,m)=>{$d(h,c,m)})}(h,m)},h.authTokenProvider_,h.appCheckProvider_,c),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(m=>{h.server_.refreshAuthToken(m)}),h.appCheckProvider_.addTokenChangeListener(m=>{h.server_.refreshAppCheckToken(m.token)}),h.statsReporter_=function ye(h,l){const c=h.toString();return xn[c]||(xn[c]=l()),xn[c]}(h.repoInfo_,()=>new lu(h.stats_,h.server_)),h.infoData_=new Ys,h.infoSyncTree_=new sc({startListening:(m,T,F,G)=>{let te=[];const se=h.infoData_.getNode(m._path);return se.isEmpty()||(te=P(h.infoSyncTree_,m._path,se),setTimeout(()=>{G("ok")},0)),te},stopListening:()=>{}}),$d(h,"connected",!1),h.serverSyncTree_=new sc({startListening:(m,T,F,G)=>(h.server_.listen(m,F,T,(te,se)=>{const me=G(te,se);ma(h.eventQueue_,m._path,me)}),[]),stopListening:(m,T)=>{h.server_.unlisten(m,T)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new La(this._repo,dt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Kd(h,l){const c=Mn[l];(!c||c[h.key]!==h)&&gr(`Database ${l}(${h.repoInfo_}) has already been deleted.`),Xu(h),delete c[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(l){null===this._rootInternal&&gr("Cannot call "+l+" on a deleted database.")}}function El(){vi.IS_TRANSPORT_INITIALIZED&&Zn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function nu(){El(),Ln.forceDisallow()}function Yd(){El(),cr.forceDisallow(),Ln.forceAllow()}function gd(h,l){nn(h,l)}const gy={".sv":"timestamp"};class pm{constructor(l,c){this.committed=l,this.snapshot=c}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ui.prototype.simpleListen=function(h,l){this.sendRequest("q",{p:h},l)},ui.prototype.echo=function(h,l){this.sendRequest("echo",{d:h},l)},function Zp(h){Ue(wt.SDK_VERSION),(0,wt._registerComponent)(new Je.wA("database",(l,{instanceIdentifier:c})=>mc(l.getProvider("app").getImmediate(),l.getProvider("auth-internal"),l.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,wt.registerVersion)(we,"0.14.4",h),(0,wt.registerVersion)(we,"0.14.4","esm2017")}();const Gl=new tt.Yd("@firebase/database-compat"),$f=function(h){Gl.warn("FIREBASE WARNING: "+h)};class Yp{constructor(l){this._delegate=l}cancel(l){(0,z.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,z.Wj)("OnDisconnect.cancel","onComplete",l,!0);const c=this._delegate.cancel();return l&&c.then(()=>l(null),m=>l(m)),c}remove(l){(0,z.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,z.Wj)("OnDisconnect.remove","onComplete",l,!0);const c=this._delegate.remove();return l&&c.then(()=>l(null),m=>l(m)),c}set(l,c){(0,z.Dv)("OnDisconnect.set",1,2,arguments.length),(0,z.Wj)("OnDisconnect.set","onComplete",c,!0);const m=this._delegate.set(l);return c&&m.then(()=>c(null),T=>c(T)),m}setWithPriority(l,c,m){(0,z.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,z.Wj)("OnDisconnect.setWithPriority","onComplete",m,!0);const T=this._delegate.setWithPriority(l,c);return m&&T.then(()=>m(null),F=>m(F)),T}update(l,c){if((0,z.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(l)){const T={};for(let F=0;F<l.length;++F)T[""+F]=l[F];l=T,$f("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,z.Wj)("OnDisconnect.update","onComplete",c,!0);const m=this._delegate.update(l);return c&&m.then(()=>c(null),T=>c(T)),m}}class Qp{constructor(l,c){this.committed=l,this.snapshot=c}toJSON(){return(0,z.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class zl{constructor(l,c){this._database=l,this._delegate=c}val(){return(0,z.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,z.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,z.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,z.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(l){return(0,z.Dv)("DataSnapshot.child",0,1,arguments.length),l=String(l),Nl("DataSnapshot.child","path",l,!1),new zl(this._database,this._delegate.child(l))}hasChild(l){return(0,z.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Nl("DataSnapshot.hasChild","path",l,!1),this._delegate.hasChild(l)}getPriority(){return(0,z.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(l){return(0,z.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,z.Wj)("DataSnapshot.forEach","action",l,!1),this._delegate.forEach(c=>l(new zl(this._database,c)))}hasChildren(){return(0,z.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,z.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,z.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ou(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Qr{constructor(l,c){this.database=l,this._delegate=c}on(l,c,m,T){var F;(0,z.Dv)("Query.on",2,4,arguments.length),(0,z.Wj)("Query.on","callback",c,!1);const G=Qr.getCancelAndContextArgs_("Query.on",m,T),te=(me,rt)=>{c.call(G.context,new zl(this.database,me),rt)};te.userCallback=c,te.context=G.context;const se=null===(F=G.cancel)||void 0===F?void 0:F.bind(G.context);switch(l){case"value":return Et(this._delegate,te,se),c;case"child_added":return ys(this._delegate,te,se),c;case"child_removed":return vl(this._delegate,te,se),c;case"child_changed":return pc(this._delegate,te,se),c;case"child_moved":return fd(this._delegate,te,se),c;default:throw new Error((0,z.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(l,c,m){if((0,z.Dv)("Query.off",0,3,arguments.length),function(h,l,c){if(void 0!==l)switch(l){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,z.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,l),(0,z.Wj)("Query.off","callback",c,!0),(0,z.lb)("Query.off","context",m,!0),c){const T=()=>{};T.userCallback=c,T.context=m,Wd(this._delegate,l,T)}else Wd(this._delegate,l)}get(){return Cn(this._delegate).then(l=>new zl(this.database,l))}once(l,c,m,T){(0,z.Dv)("Query.once",1,4,arguments.length),(0,z.Wj)("Query.once","callback",c,!0);const F=Qr.getCancelAndContextArgs_("Query.once",m,T),G=new z.BH,te=(me,rt)=>{const ut=new zl(this.database,me);c&&c.call(F.context,ut,rt),G.resolve(ut)};te.userCallback=c,te.context=F.context;const se=me=>{F.cancel&&F.cancel.call(F.context,me),G.reject(me)};switch(l){case"value":Et(this._delegate,te,se,{onlyOnce:!0});break;case"child_added":ys(this._delegate,te,se,{onlyOnce:!0});break;case"child_removed":vl(this._delegate,te,se,{onlyOnce:!0});break;case"child_changed":pc(this._delegate,te,se,{onlyOnce:!0});break;case"child_moved":fd(this._delegate,te,se,{onlyOnce:!0});break;default:throw new Error((0,z.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return G.promise}limitToFirst(l){return(0,z.Dv)("Query.limitToFirst",1,1,arguments.length),new Qr(this.database,zt(this._delegate,function Gi(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Vc(h)}(l)))}limitToLast(l){return(0,z.Dv)("Query.limitToLast",1,1,arguments.length),new Qr(this.database,zt(this._delegate,function Bc(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new bn(h)}(l)))}orderByChild(l){return(0,z.Dv)("Query.orderByChild",1,1,arguments.length),new Qr(this.database,zt(this._delegate,function I(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Nl("orderByChild","path",h,!1),new Hr(h)}(l)))}orderByKey(){return(0,z.Dv)("Query.orderByKey",0,0,arguments.length),new Qr(this.database,zt(this._delegate,function g(){return new p}()))}orderByPriority(){return(0,z.Dv)("Query.orderByPriority",0,0,arguments.length),new Qr(this.database,zt(this._delegate,function Z(){return new S}()))}orderByValue(){return(0,z.Dv)("Query.orderByValue",0,0,arguments.length),new Qr(this.database,zt(this._delegate,function Pe(){return new ie}()))}startAt(l=null,c){return(0,z.Dv)("Query.startAt",0,2,arguments.length),new Qr(this.database,zt(this._delegate,function gc(h=null,l){return ac("startAt","key",l,!0),new $l(h,l)}(l,c)))}startAfter(l=null,c){return(0,z.Dv)("Query.startAfter",0,2,arguments.length),new Qr(this.database,zt(this._delegate,function Hl(h,l){return ac("startAfter","key",l,!0),new qn(h,l)}(l,c)))}endAt(l=null,c){return(0,z.Dv)("Query.endAt",0,2,arguments.length),new Qr(this.database,zt(this._delegate,function pd(h,l){return ac("endAt","key",l,!0),new qd(h,l)}(l,c)))}endBefore(l=null,c){return(0,z.Dv)("Query.endBefore",0,2,arguments.length),new Qr(this.database,zt(this._delegate,function wl(h,l){return ac("endBefore","key",l,!0),new Zd(h,l)}(l,c)))}equalTo(l,c){return(0,z.Dv)("Query.equalTo",1,2,arguments.length),new Qr(this.database,zt(this._delegate,function Ft(h,l){return ac("equalTo","key",l,!0),new ot(h,l)}(l,c)))}toString(){return(0,z.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,z.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(l){if((0,z.Dv)("Query.isEqual",1,1,arguments.length),!(l instanceof Qr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(l._delegate)}static getCancelAndContextArgs_(l,c,m){const T={cancel:void 0,context:void 0};if(c&&m)T.cancel=c,(0,z.Wj)(l,"cancel",T.cancel,!0),T.context=m,(0,z.lb)(l,"context",T.context,!0);else if(c)if("object"==typeof c&&null!==c)T.context=c;else{if("function"!=typeof c)throw new Error((0,z.gK)(l,"cancelOrContext")+" must either be a cancel callback or a context object.");T.cancel=c}return T}get ref(){return new Ou(this.database,new La(this._delegate._repo,this._delegate._path))}}class Ou extends Qr{constructor(l,c){super(l,new Xa(c._repo,c._path,new Is,!1)),this.database=l,this._delegate=c}getKey(){return(0,z.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(l){return(0,z.Dv)("Reference.child",1,1,arguments.length),"number"==typeof l&&(l=String(l)),new Ou(this.database,Fo(this._delegate,l))}getParent(){(0,z.Dv)("Reference.parent",0,0,arguments.length);const l=this._delegate.parent;return l?new Ou(this.database,l):null}getRoot(){return(0,z.Dv)("Reference.root",0,0,arguments.length),new Ou(this.database,this._delegate.root)}set(l,c){(0,z.Dv)("Reference.set",1,2,arguments.length),(0,z.Wj)("Reference.set","onComplete",c,!0);const m=_i(this._delegate,l);return c&&m.then(()=>c(null),T=>c(T)),m}update(l,c){if((0,z.Dv)("Reference.update",1,2,arguments.length),Array.isArray(l)){const T={};for(let F=0;F<l.length;++F)T[""+F]=l[F];l=T,$f("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}na("Reference.update",this._delegate._path),(0,z.Wj)("Reference.update","onComplete",c,!0);const m=_n(this._delegate,l);return c&&m.then(()=>c(null),T=>c(T)),m}setWithPriority(l,c,m){(0,z.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,z.Wj)("Reference.setWithPriority","onComplete",m,!0);const T=function jl(h,l,c){if(na("setWithPriority",h._path),_u("setWithPriority",l,h._path,!1),sd("setWithPriority",c,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const m=new z.BH;return yu(h._repo,h._path,l,c,m.wrapCallback(()=>{})),m.promise}(this._delegate,l,c);return m&&T.then(()=>m(null),F=>m(F)),T}remove(l){(0,z.Dv)("Reference.remove",0,1,arguments.length),(0,z.Wj)("Reference.remove","onComplete",l,!0);const c=function Dt(h){return na("remove",h._path),_i(h,null)}(this._delegate);return l&&c.then(()=>l(null),m=>l(m)),c}transaction(l,c,m){(0,z.Dv)("Reference.transaction",1,3,arguments.length),(0,z.Wj)("Reference.transaction","transactionUpdate",l,!1),(0,z.Wj)("Reference.transaction","onComplete",c,!0),function(h,l,c,m){if(void 0!==c&&"boolean"!=typeof c)throw new Error((0,z.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,m);const T=function Bf(h,l,c){var m;if(h=(0,z.m9)(h),na("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const T=null===(m=c?.applyLocally)||void 0===m||m,F=new z.BH,te=Et(h,()=>{});return function cd(h,l,c,m,T,F){hl(h,"transaction on "+l);const G={path:l,update:c,onComplete:m,status:null,order:jt(),applyLocally:F,retryCount:0,unwatcher:T,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},te=Oc(h,l,void 0);G.currentInputSnapshot=te;const se=G.update(te.val());if(void 0===se)G.unwatcher(),G.currentOutputSnapshotRaw=null,G.currentOutputSnapshotResolved=null,G.onComplete&&G.onComplete(null,!1,G.currentInputSnapshot);else{Rl("transaction failed: Data returned ",se,G.path),G.status=0;const me=Yu(h.transactionQueueTree_,l),rt=gu(me)||[];let ut;rt.push(G),td(me,rt),"object"==typeof se&&null!==se&&(0,z.r3)(se,".priority")?(ut=(0,z.DV)(se,".priority"),(0,z.hu)(Ml(ut),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):ut=(fr(h.serverSyncTree_,l)||kn.EMPTY_NODE).getPriority().val();const It=cc(h),on=vr(se,ut),Rn=pu(on,te,It);G.currentOutputSnapshotRaw=on,G.currentOutputSnapshotResolved=Rn,G.currentWriteId=Fa(h);const Or=b(h.serverSyncTree_,l,Rn,G.currentWriteId,G.applyLocally);ma(h.eventQueue_,l,Or),kl(h,h.transactionQueueTree_)}}(h._repo,h._path,l,(se,me,rt)=>{let ut=null;se?F.reject(se):(ut=new Ru(rt,new La(h._repo,h._path),Ar),F.resolve(new pm(me,ut)))},te,T),F.promise}(this._delegate,l,{applyLocally:m}).then(F=>new Qp(F.committed,new zl(this.database,F.snapshot)));return c&&T.then(F=>c(null,F.committed,F.snapshot),F=>c(F,!1,null)),T}setPriority(l,c){(0,z.Dv)("Reference.setPriority",1,2,arguments.length),(0,z.Wj)("Reference.setPriority","onComplete",c,!0);const m=function Hu(h,l){h=(0,z.m9)(h),na("setPriority",h._path),sd("setPriority",l,!1);const c=new z.BH;return yu(h._repo,nr(h._path,".priority"),l,null,c.wrapCallback(()=>{})),c.promise}(this._delegate,l);return c&&m.then(()=>c(null),T=>c(T)),m}push(l,c){(0,z.Dv)("Reference.push",0,2,arguments.length),(0,z.Wj)("Reference.push","onComplete",c,!0);const m=function $h(h,l){h=(0,z.m9)(h),na("push",h._path),_u("push",l,h._path,!0);const c=lc(h._repo),m=Ul(c),T=Fo(h,m),F=Fo(h,m);let G;return G=null!=l?_i(F,l).then(()=>F):Promise.resolve(F),T.then=G.then.bind(G),T.catch=G.then.bind(G,void 0),T}(this._delegate,l),T=m.then(G=>new Ou(this.database,G));c&&T.then(()=>c(null),G=>c(G));const F=new Ou(this.database,m);return F.then=T.then.bind(T),F.catch=T.catch.bind(T,void 0),F}onDisconnect(){return na("Reference.onDisconnect",this._delegate._path),new Yp(new zd(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Gu{constructor(l,c){this._delegate=l,this.app=c,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:nu,forceLongPolling:Yd}}useEmulator(l,c,m={}){!function tl(h,l,c,m={}){(h=(0,z.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&gr("Cannot call useEmulator() after instance has already been initialized.");const T=h._repoInternal;let F;if(T.repoInfo_.nodeAdmin)m.mockUserToken&&gr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),F=new Pn(Pn.OWNER);else if(m.mockUserToken){const G="string"==typeof m.mockUserToken?m.mockUserToken:(0,z.Sg)(m.mockUserToken,h.app.options.projectId);F=new Pn(G)}!function eu(h,l,c,m){h.repoInfo_=new Ce(`${l}:${c}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams,!0),m&&(h.authTokenProvider_=m)}(T,l,c,F)}(this._delegate,l,c,m)}ref(l){if((0,z.Dv)("database.ref",0,1,arguments.length),l instanceof Ou){const c=el(this._delegate,l.toString());return new Ou(this,c)}{const c=as(this._delegate,l);return new Ou(this,c)}}refFromURL(l){(0,z.Dv)("database.refFromURL",1,1,arguments.length);const m=el(this._delegate,l);return new Ou(this,m)}goOffline(){return(0,z.Dv)("database.goOffline",0,0,arguments.length),function qp(h){(h=(0,z.m9)(h))._checkNotDeleted("goOffline"),Xu(h._repo)}(this._delegate)}goOnline(){return(0,z.Dv)("database.goOnline",0,0,arguments.length),function Nu(h){(h=(0,z.m9)(h))._checkNotDeleted("goOnline"),function Hd(h){h.persistentConnection_&&h.persistentConnection_.resume(Qu)}(h._repo)}(this._delegate)}}Gu.ServerValue={TIMESTAMP:function Kp(){return gy}(),increment:h=>function Pu(h){return{".sv":{increment:h}}}(h)};var _c=Object.freeze({__proto__:null,initStandalone:function Bs({app:h,url:l,version:c,customAuthImpl:m,namespace:T,nodeAdmin:F=!1}){Ue(c);const G=new Je.zt("auth-internal",new Je.H0("database-standalone"));return G.setComponent(new Je.wA("auth-internal",()=>m,"PRIVATE")),{instance:new Gu(mc(h,G,void 0,l,F),h),namespace:T}}});const Jp=Gu.ServerValue;!function mm(h){h.INTERNAL.registerComponent(new Je.wA("database-compat",(l,{instanceIdentifier:c})=>{const m=l.getProvider("app-compat").getImmediate(),T=l.getProvider("database").getImmediate({identifier:c});return new Gu(T,m)},"PUBLIC").setServiceProps({Reference:Ou,Query:Qr,Database:Gu,DataSnapshot:zl,enableLogging:gd,INTERNAL:_c,ServerValue:Jp}).setMultipleInstances(!0)),h.registerVersion("@firebase/database-compat","0.3.4")}(it.Z);var Ua=Y(1205),Il=Y(6217),Qd=Y(9260);function Jd(h){return null==h}function Wl(h){return"function"==typeof h.set}function Hh(h,l){return Wl(l)?l:h.ref(l)}function vc(h,l){if(function yc(h){return"string"==typeof h}(h))return l.stringCase();if(Wl(h))return l.firebaseCase();if(function rl(h){return"function"==typeof h.exportVal}(h))return l.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof h)}function ql(h,l,c="on",m=y.z){return new O.y(T=>{let F=null;return F=h[c](l,(G,te)=>{m.schedule(()=>{T.next({snapshot:G,prevKey:te})}),"once"===c&&m.schedule(()=>T.complete())},G=>{m.schedule(()=>T.error(G))}),"on"===c?{unsubscribe(){null!=F&&h.off(l,F)}}:{unsubscribe(){}}}).pipe((0,Me.U)(T=>{const{snapshot:F,prevKey:G}=T;let te=null;return F.exists()&&(te=F.key),{type:l,payload:F,prevKey:G,key:te}}),(0,Le.B)())}function yd(h,l){const c=h.length;for(let m=0;m<c;m++)if(h[m].payload.key===l)return m;return-1}function Gh(h,l){const{payload:c,prevKey:m,key:T}=l,F=yd(h,T),G=function Xd(h,l){if(Jd(l))return 0;{const c=yd(h,l);return-1===c?h.length:c+1}}(h,m);switch(l.type){case"value":if(l.payload&&l.payload.exists()){let te=null;l.payload.forEach(se=>{const me={payload:se,type:"value",prevKey:te,key:se.key};return te=se.key,h=[...h,me],!1})}return h;case"child_added":if(F>-1){const te=h[F-1];(te&&te.key||null)!==m&&(h=h.filter(se=>se.payload.key!==c.key)).splice(G,0,l)}else{if(null==m)return[l,...h];(h=h.slice()).splice(G,0,l)}return h;case"child_removed":return h.filter(te=>te.payload.key!==c.key);case"child_changed":return h.map(te=>te.payload.key===T?l:te);case"child_moved":if(F>-1){const te=h.splice(F,1)[0];return(h=h.slice()).splice(G,0,te),h}return h;default:return h}}function zh(h){return(Jd(h)||0===h.length)&&(h=["child_added","child_removed","child_changed","child_moved"]),h}function vd(h,l,c){return function _d(h,l,c){return ql(h,"value","once",c).pipe((0,Fe.w)(m=>{const T=[(0,xe.of)(m)];return l.forEach(F=>T.push(ql(h,F,"on",c))),(0,Se.T)(...T).pipe((0,Be.R)(Gh,[]))}),(0,fe.x)())}(h,l=zh(l),c)}function zu(h,l,c){const m=(l=zh(l)).map(T=>ql(h,T,"on",c));return(0,Se.T)(...m)}function Gf(h,l){return function(m,T){return vc(m,{stringCase:()=>h.child(m)[l](T),firebaseCase:()=>m[l](T),snapshotCase:()=>m.ref[l](T)})}}function qh(h){return function(c){return c?vc(c,{stringCase:()=>h.child(c).remove(),firebaseCase:()=>c.remove(),snapshotCase:()=>c.ref.remove()}):h.remove()}}function Zl(h,l){return function(){return ql(h,"value","on",l)}}const Zh=new A.OlP("angularfire2.realtimeDatabaseURL"),Gr=new A.OlP("angularfire2.database.use-emulator");let Ci=(()=>{class h{constructor(c,m,T,F,G,te,se,me,rt,ut,It,on,Rn,Or,Lo){this.schedulers=te;const yi=se,Wu=(0,yt.on)(c,G,m);me&&(0,Ua.nw)(Wu,G,rt,It,on,Rn,ut,Or),this.database=(0,yt.cc)(`${Wu.name}.database.${T}`,"AngularFireDatabase",Wu.name,()=>{const js=G.runOutsideAngular(()=>Wu.database(T||void 0));return yi&&js.useEmulator(...yi),js},[yi])}list(c,m){const T=this.schedulers.ngZone.runOutsideAngular(()=>Hh(this.database,c));let F=T;return m&&(F=m(T)),function il(h,l){const c=l.schedulers.outsideAngular,m=l.schedulers.ngZone.run(()=>h.ref);return{query:h,update:Gf(m,"update"),set:Gf(m,"set"),push:T=>m.push(T),remove:qh(m),snapshotChanges:T=>vd(h,T,c).pipe(et.iC),stateChanges:T=>zu(h,T,c).pipe(et.iC),auditTrail:T=>function Xp(h,l,c){return function Wh(h,l,c){return function Hf(h,l){return ql(h,"value","on",l).pipe((0,Me.U)(c=>{let m;return c.payload.forEach(T=>(m=T.key,!1)),{data:c,lastKeyToLoad:m}}))}(h,c).pipe(function Ze(...h){const l=(0,Ht.jO)(h);return(0,ge.e)((c,m)=>{const T=h.length,F=new Array(T);let G=h.map(()=>!1),te=!1;for(let se=0;se<T;se++)(0,mt.Xf)(h[se]).subscribe((0,De.x)(m,me=>{F[se]=me,!te&&!G[se]&&(G[se]=!0,(te=G.every(pt.y))&&(G=null))},At.Z));c.subscribe((0,De.x)(m,se=>{if(te){const me=[se,...F];m.next(l?l(...me):me)}}))})}(l),(0,Me.U)(([T,F])=>{const G=T.lastKeyToLoad,te=F.map(se=>se.key);return{actions:F,lastKeyToLoad:G,loadedKeys:te}}),function ft(h){return(0,ge.e)((l,c)=>{let m=!1,T=0;l.subscribe((0,De.x)(c,F=>(m||(m=!h(F,T++)))&&c.next(F)))})}(T=>-1===T.loadedKeys.indexOf(T.lastKeyToLoad)),(0,Me.U)(T=>T.actions))}(h,zu(h,l).pipe((0,Be.R)((T,F)=>[...T,F],[])),c)}(h,T,c).pipe(et.iC),valueChanges:(T,F)=>vd(h,T,c).pipe((0,Me.U)(te=>te.map(se=>F&&F.idField?Object.assign(Object.assign({},se.payload.val()),{[F.idField]:se.key}):se.payload.val())),et.iC)}}(F,this)}object(c){return function zf(h,l){return{query:h,snapshotChanges:()=>Zl(h,l.schedulers.outsideAngular)().pipe(et.iC),update:c=>h.ref.update(c),set:c=>h.ref.set(c),remove:()=>h.ref.remove(),valueChanges:()=>Zl(h,l.schedulers.outsideAngular)().pipe(et.iC,(0,Me.U)(m=>m.payload.exists()?m.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Hh(this.database,c)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return h.\u0275fac=function(c){return new(c||h)(A.LFG(yt.Dh),A.LFG(yt.xv,8),A.LFG(Zh,8),A.LFG(A.Lbi),A.LFG(A.R0b),A.LFG(et.HU),A.LFG(Gr,8),A.LFG(Ua.zQ,8),A.LFG(Ua.Qv,8),A.LFG(Ua.L6,8),A.LFG(Ua._Q,8),A.LFG(Ua.rT,8),A.LFG(Ua.lh,8),A.LFG(Ua.f7,8),A.LFG(Il.nm,8))},h.\u0275prov=A.Yz7({token:h,factory:h.\u0275fac,providedIn:"any"}),h})(),$c=(()=>{class h{constructor(){Qd.Z.registerVersion("angularfire",et.q4.full,"rtdb-compat")}}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=A.oAB({type:h}),h.\u0275inj=A.cJS({providers:[Ci]}),h})()},2011:(Kt,qe,Y)=>{Y.d(qe,{Dh:()=>Fe,GT:()=>Me,cc:()=>pt,hO:()=>mt,on:()=>fe,pX:()=>Se,xv:()=>Be});var A=Y(4650),y=Y(9260),O=Y(2122);Kt=Y.hmd(Kt);const xe=["ngOnDestroy"],Se=(ft,et,yt,gt={})=>new Proxy(ft,{get:(it,Je)=>yt.runOutsideAngular(()=>{var Tt;if(ft[Je])return!(null===(Tt=gt?.spy)||void 0===Tt)&&Tt.get&&gt.spy.get(Je,ft[Je]),ft[Je];if(xe.indexOf(Je)>-1)return()=>{};const wt=et.toPromise().then(z=>{const tt=z&&z[Je];return"function"==typeof tt?tt.bind(z):tt&&tt.then?tt.then(we=>yt.run(()=>we)):yt.run(()=>tt)});return new Proxy(()=>{},{get:(z,tt)=>wt[tt],apply:(z,tt,we)=>wt.then(Te=>{var Ie;const Ue=Te&&Te(...we);return!(null===(Ie=gt?.spy)||void 0===Ie)&&Ie.apply&&gt.spy.apply(Je,we,Ue),Ue})})})}),Me=(ft,et)=>{et.forEach(yt=>{Object.getOwnPropertyNames(yt.prototype||yt).forEach(gt=>{Object.defineProperty(ft.prototype,gt,Object.getOwnPropertyDescriptor(yt.prototype||yt,gt))})})};class Le{constructor(et){return et}}const Fe=new A.OlP("angularfire2.app.options"),Be=new A.OlP("angularfire2.app.name");function fe(ft,et,yt){const it="object"==typeof yt&&yt||{};it.name=it.name||"string"==typeof yt&&yt||"[DEFAULT]";const Tt=y.Z.apps.filter(wt=>wt&&wt.name===it.name)[0]||et.runOutsideAngular(()=>y.Z.initializeApp(ft,it));try{JSON.stringify(ft)!==JSON.stringify(Tt.options)&&ge("error",`${Tt.name} Firebase App already initialized with different options${Kt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Le(Tt)}const ge=(ft,...et)=>{(0,A.X6Q)()&&typeof console<"u"&&console[ft](...et)},De={provide:Le,useFactory:fe,deps:[Fe,A.R0b,[new A.FiY,Be]]};let mt=(()=>{class ft{constructor(yt){y.Z.registerVersion("angularfire",O.q4.full,"core"),y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),y.Z.registerVersion("angular",A.q4F.full,yt.toString())}static initializeApp(yt,gt){return{ngModule:ft,providers:[{provide:Fe,useValue:yt},{provide:Be,useValue:gt}]}}}return ft.\u0275fac=function(yt){return new(yt||ft)(A.LFG(A.Lbi))},ft.\u0275mod=A.oAB({type:ft}),ft.\u0275inj=A.cJS({providers:[De]}),ft})();function pt(ft,et,yt,gt,it){const[,Je,Tt]=globalThis.\u0275AngularfireInstanceCache.find(wt=>wt[0]===ft)||[];if(Je)return function At(ft,et){try{return ft.toString()===et.toString()}catch{return ft===et}}(it,Tt)||(Ze("error",`${et} was already initialized on the ${yt} Firebase App with different settings.${Ht?" You may need to reload as Firebase is not HMR aware.":""}`),Ze("warn",{is:it,was:Tt})),Je;{const wt=gt();return globalThis.\u0275AngularfireInstanceCache.push([ft,wt,it]),wt}}const Ht=!!Kt.hot,Ze=(ft,...et)=>{(0,A.X6Q)()&&typeof console<"u"&&console[ft](...et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Kt,qe,Y)=>{Y.d(qe,{q4:()=>ju,iC:()=>fr,fc:()=>tn,HU:()=>J,vb:()=>x,JM:()=>b});var A=Y(4650),y=Y(259),O=Y(5861),xe=Y(9681),Se=Y(2090),Me=Y(4859),Le=Y(1877),Fe=Y(8766);const Be="@firebase/installations",fe="0.6.4",De=`w:${fe}`,mt="FIS_v2",et=new Se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function yt(V){return V instanceof Se.ZR&&V.code.includes("request-failed")}function gt({projectId:V}){return`https://firebaseinstallations.googleapis.com/v1/projects/${V}/installations`}function it(V){return{token:V.token,requestStatus:2,expiresIn:Te(V.expiresIn),creationTime:Date.now()}}function Je(V,H){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,O.Z)(function*(V,H){const ue=(yield H.json()).error;return et.create("request-failed",{requestName:V,serverCode:ue.code,serverMessage:ue.message,serverStatus:ue.status})})).apply(this,arguments)}function wt({apiKey:V}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":V})}function z(V,{refreshToken:H}){const X=wt(V);return X.append("Authorization",function Ie(V){return`${mt} ${V}`}(H)),X}function tt(V){return we.apply(this,arguments)}function we(){return(we=(0,O.Z)(function*(V){const H=yield V();return H.status>=500&&H.status<600?V():H})).apply(this,arguments)}function Te(V){return Number(V.replace("s","000"))}function Ue(V,H){return _e.apply(this,arguments)}function _e(){return(_e=(0,O.Z)(function*({appConfig:V,heartbeatServiceProvider:H},{fid:X}){const ue=gt(V),Oe=wt(V),$e=H.getImmediate({optional:!0});if($e){const In=yield $e.getHeartbeatsHeader();In&&Oe.append("x-firebase-client",In)}const gn={method:"POST",headers:Oe,body:JSON.stringify({fid:X,authVersion:mt,appId:V.appId,sdkVersion:De})},mn=yield tt(()=>fetch(ue,gn));if(mn.ok){const In=yield mn.json();return{fid:In.fid||X,registrationStatus:2,refreshToken:In.refreshToken,authToken:it(In.authToken)}}throw yield Je("Create Installation",mn)})).apply(this,arguments)}function Ct(V){return new Promise(H=>{setTimeout(H,V)})}const Rt=/^[cdef][\w-]{21}$/;function Nt(){try{const V=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(V),V[0]=112+V[0]%16;const X=function jt(V){return function Xe(V){return btoa(String.fromCharCode(...V)).replace(/\+/g,"-").replace(/\//g,"_")}(V).substr(0,22)}(V);return Rt.test(X)?X:""}catch{return""}}function Ot(V){return`${V.appName}!${V.appId}`}const dn=new Map;function Gt(V,H){const X=Ot(V);En(X,H),function ti(V,H){const X=function gr(){return!Ur&&"BroadcastChannel"in self&&(Ur=new BroadcastChannel("[Firebase] FID Change"),Ur.onmessage=V=>{En(V.data.key,V.data.fid)}),Ur}();X&&X.postMessage({key:V,fid:H}),function Zn(){0===dn.size&&Ur&&(Ur.close(),Ur=null)}()}(X,H)}function En(V,H){const X=dn.get(V);if(X)for(const ue of X)ue(H)}let Ur=null;const zr="firebase-installations-store";let Er=null;function lr(){return Er||(Er=(0,Fe.X3)("firebase-installations-database",1,{upgrade:(V,H)=>{0===H&&V.createObjectStore(zr)}})),Er}function Tn(V,H){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,O.Z)(function*(V,H){const X=Ot(V),Oe=(yield lr()).transaction(zr,"readwrite"),$e=Oe.objectStore(zr),bt=yield $e.get(X);return yield $e.put(H,X),yield Oe.done,(!bt||bt.fid!==H.fid)&&Gt(V,H.fid),H})).apply(this,arguments)}function kt(V){return ls.apply(this,arguments)}function ls(){return(ls=(0,O.Z)(function*(V){const H=Ot(V),ue=(yield lr()).transaction(zr,"readwrite");yield ue.objectStore(zr).delete(H),yield ue.done})).apply(this,arguments)}function Wi(V,H){return On.apply(this,arguments)}function On(){return(On=(0,O.Z)(function*(V,H){const X=Ot(V),Oe=(yield lr()).transaction(zr,"readwrite"),$e=Oe.objectStore(zr),bt=yield $e.get(X),gn=H(bt);return void 0===gn?yield $e.delete(X):yield $e.put(gn,X),yield Oe.done,gn&&(!bt||bt.fid!==gn.fid)&&Gt(V,gn.fid),gn})).apply(this,arguments)}function hi(V){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,O.Z)(function*(V){let H;const X=yield Wi(V.appConfig,ue=>{const Oe=fn(ue),$e=an(V,Oe);return H=$e.registrationPromise,$e.installationEntry});return""===X.fid?{installationEntry:yield H}:{installationEntry:X,registrationPromise:H}})).apply(this,arguments)}function fn(V){return Tr(V||{fid:Nt(),registrationStatus:0})}function an(V,H){if(0===H.registrationStatus){if(!navigator.onLine)return{installationEntry:H,registrationPromise:Promise.reject(et.create("app-offline"))};const X={fid:H.fid,registrationStatus:1,registrationTime:Date.now()},ue=function rn(V,H){return cs.apply(this,arguments)}(V,X);return{installationEntry:X,registrationPromise:ue}}return 1===H.registrationStatus?{installationEntry:H,registrationPromise:zn(V)}:{installationEntry:H}}function cs(){return(cs=(0,O.Z)(function*(V,H){try{const X=yield Ue(V,H);return Tn(V.appConfig,X)}catch(X){throw yt(X)&&409===X.customData.serverCode?yield kt(V.appConfig):yield Tn(V.appConfig,{fid:H.fid,registrationStatus:0}),X}})).apply(this,arguments)}function zn(V){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,O.Z)(function*(V){let H=yield Rr(V.appConfig);for(;1===H.registrationStatus;)yield Ct(100),H=yield Rr(V.appConfig);if(0===H.registrationStatus){const{installationEntry:X,registrationPromise:ue}=yield hi(V);return ue||X}return H})).apply(this,arguments)}function Rr(V){return Wi(V,H=>{if(!H)throw et.create("installation-not-found");return Tr(H)})}function Tr(V){return function qr(V){return 1===V.registrationStatus&&V.registrationTime+1e4<Date.now()}(V)?{fid:V.fid,registrationStatus:0}:V}function Jn(V,H){return bi.apply(this,arguments)}function bi(){return(bi=(0,O.Z)(function*({appConfig:V,heartbeatServiceProvider:H},X){const ue=Pn(V,X),Oe=z(V,X),$e=H.getImmediate({optional:!0});if($e){const In=yield $e.getHeartbeatsHeader();In&&Oe.append("x-firebase-client",In)}const gn={method:"POST",headers:Oe,body:JSON.stringify({installation:{sdkVersion:De,appId:V.appId}})},mn=yield tt(()=>fetch(ue,gn));if(mn.ok)return it(yield mn.json());throw yield Je("Generate Auth Token",mn)})).apply(this,arguments)}function Pn(V,{fid:H}){return`${gt(V)}/${H}/authTokens:generate`}function pn(V){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,O.Z)(function*(V,H=!1){let X;const ue=yield Wi(V.appConfig,$e=>{if(!Dn($e))throw et.create("not-registered");const bt=$e.authToken;if(!H&&ni(bt))return $e;if(1===bt.requestStatus)return X=xt(V,H),$e;{if(!navigator.onLine)throw et.create("app-offline");const gn=he($e);return X=vn(V,gn),gn}});return X?yield X:ue.authToken})).apply(this,arguments)}function xt(V,H){return at.apply(this,arguments)}function at(){return(at=(0,O.Z)(function*(V,H){let X=yield Pt(V.appConfig);for(;1===X.authToken.requestStatus;)yield Ct(100),X=yield Pt(V.appConfig);const ue=X.authToken;return 0===ue.requestStatus?pn(V,H):ue})).apply(this,arguments)}function Pt(V){return Wi(V,H=>{if(!Dn(H))throw et.create("not-registered");return function Ce(V){return 1===V.requestStatus&&V.requestTime+1e4<Date.now()}(H.authToken)?Object.assign(Object.assign({},H),{authToken:{requestStatus:0}}):H})}function vn(V,H){return qt.apply(this,arguments)}function qt(){return(qt=(0,O.Z)(function*(V,H){try{const X=yield Jn(V,H),ue=Object.assign(Object.assign({},H),{authToken:X});return yield Tn(V.appConfig,ue),X}catch(X){if(!yt(X)||401!==X.customData.serverCode&&404!==X.customData.serverCode){const ue=Object.assign(Object.assign({},H),{authToken:{requestStatus:0}});yield Tn(V.appConfig,ue)}else yield kt(V.appConfig);throw X}})).apply(this,arguments)}function Dn(V){return void 0!==V&&2===V.registrationStatus}function ni(V){return 2===V.requestStatus&&!function pe(V){const H=Date.now();return H<V.creationTime||V.creationTime+V.expiresIn<H+36e5}(V)}function he(V){const H={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},V),{authToken:H})}function je(){return(je=(0,O.Z)(function*(V){const H=V,{installationEntry:X,registrationPromise:ue}=yield hi(H);return ue?ue.catch(console.error):pn(H).catch(console.error),X.fid})).apply(this,arguments)}function yn(){return(yn=(0,O.Z)(function*(V,H=!1){const X=V;return yield xn(X),(yield pn(X,H)).token})).apply(this,arguments)}function xn(V){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(V){const{registrationPromise:H}=yield hi(V);H&&(yield H)})).apply(this,arguments)}function oi(V){return et.create("missing-app-config-values",{valueName:V})}const ds="installations",mr=V=>{const H=V.getProvider("app").getImmediate(),X=function ri(V){if(!V||!V.options)throw oi("App Configuration");if(!V.name)throw oi("App Name");const H=["projectId","apiKey","appId"];for(const X of H)if(!V.options[X])throw oi(X);return{appName:V.name,projectId:V.options.projectId,apiKey:V.options.apiKey,appId:V.options.appId}}(H);return{app:H,appConfig:X,heartbeatServiceProvider:(0,xe._getProvider)(H,"heartbeat"),_delete:()=>Promise.resolve()}},wo=V=>{const H=V.getProvider("app").getImmediate(),X=(0,xe._getProvider)(H,ds).getImmediate();return{getId:()=>function st(V){return je.apply(this,arguments)}(X),getToken:Oe=>function en(V){return yn.apply(this,arguments)}(X,Oe)}};(function Ea(){(0,xe._registerComponent)(new Me.wA(ds,mr,"PUBLIC")),(0,xe._registerComponent)(new Me.wA("installations-internal",wo,"PRIVATE"))})(),(0,xe.registerVersion)(Be,fe),(0,xe.registerVersion)(Be,fe,"esm2017");const Zr="@firebase/remote-config",Ln=new Se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class As{constructor(H,X,ue,Oe){this.client=H,this.storage=X,this.storageCache=ue,this.logger=Oe}isCachedDataFresh(H,X){if(!X)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ue=Date.now()-X,Oe=ue<=H;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ue}. Cache max age millis (minimumFetchIntervalMillis setting): ${H}. Is cache hit: ${Oe}.`),Oe}fetch(H){var X=this;return(0,O.Z)(function*(){const[ue,Oe]=yield Promise.all([X.storage.getLastSuccessfulFetchTimestampMillis(),X.storage.getLastSuccessfulFetchResponse()]);if(Oe&&X.isCachedDataFresh(H.cacheMaxAgeMillis,ue))return Oe;H.eTag=Oe&&Oe.eTag;const $e=yield X.client.fetch(H),bt=[X.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===$e.status&&bt.push(X.storage.setLastSuccessfulFetchResponse($e)),yield Promise.all(bt),$e})()}}function fs(V=navigator){return V.languages&&V.languages[0]||V.language}class xs{constructor(H,X,ue,Oe,$e,bt){this.firebaseInstallations=H,this.sdkVersion=X,this.namespace=ue,this.projectId=Oe,this.apiKey=$e,this.appId=bt}fetch(H){var X=this;return(0,O.Z)(function*(){const[ue,Oe]=yield Promise.all([X.firebaseInstallations.getId(),X.firebaseInstallations.getToken()]),bt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${X.projectId}/namespaces/${X.namespace}:fetch?key=${X.apiKey}`,gn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":H.eTag||"*"},mn={sdk_version:X.sdkVersion,app_instance_id:ue,app_instance_id_token:Oe,app_id:X.appId,language_code:fs()},In={method:"POST",headers:gn,body:JSON.stringify(mn)},ir=fetch(bt,In),Wn=new Promise((ta,ga)=>{H.signal.addEventListener(()=>{const pu=new Error("The operation was aborted.");pu.name="AbortError",ga(pu)})});let po;try{yield Promise.race([ir,Wn]),po=yield ir}catch(ta){let ga="fetch-client-network";throw"AbortError"===ta?.name&&(ga="fetch-timeout"),Ln.create(ga,{originalErrorMessage:ta?.message})}let os=po.status;const Sl=po.headers.get("ETag")||void 0;let fu,ea;if(200===po.status){let ta;try{ta=yield po.json()}catch(ga){throw Ln.create("fetch-client-parse",{originalErrorMessage:ga?.message})}fu=ta.entries,ea=ta.state}if("INSTANCE_STATE_UNSPECIFIED"===ea?os=500:"NO_CHANGE"===ea?os=304:("NO_TEMPLATE"===ea||"EMPTY_CONFIG"===ea)&&(fu={}),304!==os&&200!==os)throw Ln.create("fetch-status",{httpStatus:os});return{status:os,eTag:Sl,config:fu}})()}}class be{constructor(H,X){this.client=H,this.storage=X}fetch(H){var X=this;return(0,O.Z)(function*(){const ue=(yield X.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return X.attemptFetch(H,ue)})()}attemptFetch(H,{throttleEndTimeMillis:X,backoffCount:ue}){var Oe=this;return(0,O.Z)(function*(){yield function Ms(V,H){return new Promise((X,ue)=>{const Oe=Math.max(H-Date.now(),0),$e=setTimeout(X,Oe);V.addEventListener(()=>{clearTimeout($e),ue(Ln.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}(H.signal,X);try{const $e=yield Oe.client.fetch(H);return yield Oe.storage.deleteThrottleMetadata(),$e}catch($e){if(!function Ee(V){if(!(V instanceof Se.ZR&&V.customData))return!1;const H=Number(V.customData.httpStatus);return 429===H||500===H||503===H||504===H}($e))throw $e;const bt={throttleEndTimeMillis:Date.now()+(0,Se.$s)(ue),backoffCount:ue+1};return yield Oe.storage.setThrottleMetadata(bt),Oe.attemptFetch(H,bt)}})()}}class dt{constructor(H,X,ue,Oe,$e){this.app=H,this._client=X,this._storageCache=ue,this._storage=Oe,this._logger=$e,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function St(V,H){const X=V.target.error||void 0;return Ln.create(H,{originalErrorMessage:X&&X?.message})}const wn="app_namespace_store";class Kr{constructor(H,X,ue,Oe=function di(){return new Promise((V,H)=>{try{const X=indexedDB.open("firebase_remote_config",1);X.onerror=ue=>{H(St(ue,"storage-open"))},X.onsuccess=ue=>{V(ue.target.result)},X.onupgradeneeded=ue=>{0===ue.oldVersion&&ue.target.result.createObjectStore(wn,{keyPath:"compositeKey"})}}catch(X){H(Ln.create("storage-open",{originalErrorMessage:X?.message}))}})}()){this.appId=H,this.appName=X,this.namespace=ue,this.openDbPromise=Oe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(H){return this.set("last_fetch_status",H)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(H){return this.set("last_successful_fetch_timestamp_millis",H)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(H){return this.set("last_successful_fetch_response",H)}getActiveConfig(){return this.get("active_config")}setActiveConfig(H){return this.set("active_config",H)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(H){return this.set("active_config_etag",H)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(H){return this.set("throttle_metadata",H)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(H){var X=this;return(0,O.Z)(function*(){const ue=yield X.openDbPromise;return new Promise((Oe,$e)=>{const gn=ue.transaction([wn],"readonly").objectStore(wn),mn=X.createCompositeKey(H);try{const In=gn.get(mn);In.onerror=ir=>{$e(St(ir,"storage-get"))},In.onsuccess=ir=>{const Wn=ir.target.result;Oe(Wn?Wn.value:void 0)}}catch(In){$e(Ln.create("storage-get",{originalErrorMessage:In?.message}))}})})()}set(H,X){var ue=this;return(0,O.Z)(function*(){const Oe=yield ue.openDbPromise;return new Promise(($e,bt)=>{const mn=Oe.transaction([wn],"readwrite").objectStore(wn),In=ue.createCompositeKey(H);try{const ir=mn.put({compositeKey:In,value:X});ir.onerror=Wn=>{bt(St(Wn,"storage-set"))},ir.onsuccess=()=>{$e()}}catch(ir){bt(Ln.create("storage-set",{originalErrorMessage:ir?.message}))}})})()}delete(H){var X=this;return(0,O.Z)(function*(){const ue=yield X.openDbPromise;return new Promise((Oe,$e)=>{const gn=ue.transaction([wn],"readwrite").objectStore(wn),mn=X.createCompositeKey(H);try{const In=gn.delete(mn);In.onerror=ir=>{$e(St(ir,"storage-delete"))},In.onsuccess=()=>{Oe()}}catch(In){$e(Ln.create("storage-delete",{originalErrorMessage:In?.message}))}})})()}createCompositeKey(H){return[this.appId,this.appName,this.namespace,H].join()}}class Di{constructor(H){this.storage=H}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var H=this;return(0,O.Z)(function*(){const X=H.storage.getLastFetchStatus(),ue=H.storage.getLastSuccessfulFetchTimestampMillis(),Oe=H.storage.getActiveConfig(),$e=yield X;$e&&(H.lastFetchStatus=$e);const bt=yield ue;bt&&(H.lastSuccessfulFetchTimestampMillis=bt);const gn=yield Oe;gn&&(H.activeConfig=gn)})()}setLastFetchStatus(H){return this.lastFetchStatus=H,this.storage.setLastFetchStatus(H)}setLastSuccessfulFetchTimestampMillis(H){return this.lastSuccessfulFetchTimestampMillis=H,this.storage.setLastSuccessfulFetchTimestampMillis(H)}setActiveConfig(H){return this.activeConfig=H,this.storage.setActiveConfig(H)}}function ou(){return ja.apply(this,arguments)}function ja(){return(ja=(0,O.Z)(function*(){if(!(0,Se.hl)())return!1;try{return yield(0,Se.eu)()}catch{return!1}})).apply(this,arguments)}!function nr(){(0,xe._registerComponent)(new Me.wA("remote-config",function V(H,{instanceIdentifier:X}){const ue=H.getProvider("app").getImmediate(),Oe=H.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ln.create("registration-window");if(!(0,Se.hl)())throw Ln.create("indexed-db-unavailable");const{projectId:$e,apiKey:bt,appId:gn}=ue.options;if(!$e)throw Ln.create("registration-project-id");if(!bt)throw Ln.create("registration-api-key");if(!gn)throw Ln.create("registration-app-id");const mn=new Kr(gn,ue.name,X=X||"firebase"),In=new Di(mn),ir=new Le.Yd(Zr);ir.logLevel=Le.in.ERROR;const Wn=new xs(Oe,xe.SDK_VERSION,X,$e,bt,gn),po=new be(Wn,mn),os=new As(po,mn,In,ir),Sl=new dt(ue,os,In,mn,ir);return function tr(V){const H=(0,Se.m9)(V);H._initializePromise||(H._initializePromise=H._storageCache.loadFromStorage().then(()=>{H._isInitializationComplete=!0}))}(Sl),Sl},"PUBLIC").setMultipleInstances(!0)),(0,xe.registerVersion)(Zr,"0.4.4"),(0,xe.registerVersion)(Zr,"0.4.4","esm2017")}();const ns="/firebase-messaging-sw.js",Zi="/firebase-cloud-messaging-push-scope",Oi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Io="google.c.a.c_id",Rs="google.c.a.c_l",ia="google.c.a.ts",oo="google.c.a.e";var zs=(()=>{return(V=zs||(zs={})).PUSH_RECEIVED="push-received",V.NOTIFICATION_CLICKED="notification-clicked",zs;var V})();function ps(V){const H=new Uint8Array(V);return btoa(String.fromCharCode(...H)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bu(V){const X=(V+"=".repeat((4-V.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ue=atob(X),Oe=new Uint8Array(ue.length);for(let $e=0;$e<ue.length;++$e)Oe[$e]=ue.charCodeAt($e);return Oe}const sa="fcm_token_details_db",ui="fcm_token_object_Store";function Hn(V){return au.apply(this,arguments)}function au(){return au=(0,O.Z)(function*(V){if("databases"in indexedDB&&!(yield indexedDB.databases()).map($e=>$e.name).includes(sa))return null;let H=null;return(yield(0,Fe.X3)(sa,5,{upgrade:(ue=(0,O.Z)(function*(Oe,$e,bt,gn){var mn;if($e<2||!Oe.objectStoreNames.contains(ui))return;const In=gn.objectStore(ui),ir=yield In.index("fcmSenderId").get(V);if(yield In.clear(),ir)if(2===$e){const Wn=ir;if(!Wn.auth||!Wn.p256dh||!Wn.endpoint)return;H={token:Wn.fcmToken,createTime:null!==(mn=Wn.createTime)&&void 0!==mn?mn:Date.now(),subscriptionOptions:{auth:Wn.auth,p256dh:Wn.p256dh,endpoint:Wn.endpoint,swScope:Wn.swScope,vapidKey:"string"==typeof Wn.vapidKey?Wn.vapidKey:ps(Wn.vapidKey)}}}else if(3===$e){const Wn=ir;H={token:Wn.fcmToken,createTime:Wn.createTime,subscriptionOptions:{auth:ps(Wn.auth),p256dh:ps(Wn.p256dh),endpoint:Wn.endpoint,swScope:Wn.swScope,vapidKey:ps(Wn.vapidKey)}}}else if(4===$e){const Wn=ir;H={token:Wn.fcmToken,createTime:Wn.createTime,subscriptionOptions:{auth:ps(Wn.auth),p256dh:ps(Wn.p256dh),endpoint:Wn.endpoint,swScope:Wn.swScope,vapidKey:ps(Wn.vapidKey)}}}}),function($e,bt,gn,mn){return ue.apply(this,arguments)})})).close(),yield(0,Fe.Lj)(sa),yield(0,Fe.Lj)("fcm_vapid_details_db"),yield(0,Fe.Lj)("undefined"),bo(H)?H:null;var ue}),au.apply(this,arguments)}function bo(V){if(!V||!V.subscriptionOptions)return!1;const{subscriptionOptions:H}=V;return"number"==typeof V.createTime&&V.createTime>0&&"string"==typeof V.token&&V.token.length>0&&"string"==typeof H.auth&&H.auth.length>0&&"string"==typeof H.p256dh&&H.p256dh.length>0&&"string"==typeof H.endpoint&&H.endpoint.length>0&&"string"==typeof H.swScope&&H.swScope.length>0&&"string"==typeof H.vapidKey&&H.vapidKey.length>0}const Ns="firebase-messaging-store";let Bi=null;function Bo(){return Bi||(Bi=(0,Fe.X3)("firebase-messaging-database",1,{upgrade:(V,H)=>{0===H&&V.createObjectStore(Ns)}})),Bi}function Ai(V){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,O.Z)(function*(V){const H=jo(V),ue=yield(yield Bo()).transaction(Ns).objectStore(Ns).get(H);if(ue)return ue;{const Oe=yield Hn(V.appConfig.senderId);if(Oe)return yield ao(V,Oe),Oe}})).apply(this,arguments)}function ao(V,H){return qs.apply(this,arguments)}function qs(){return(qs=(0,O.Z)(function*(V,H){const X=jo(V),Oe=(yield Bo()).transaction(Ns,"readwrite");return yield Oe.objectStore(Ns).put(H,X),yield Oe.done,H})).apply(this,arguments)}function Ca(V){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,O.Z)(function*(V){const H=jo(V),ue=(yield Bo()).transaction(Ns,"readwrite");yield ue.objectStore(Ns).delete(H),yield ue.done})).apply(this,arguments)}function jo({appConfig:V}){return V.appId}const Sr=new Se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function uo(V,H){return xi.apply(this,arguments)}function xi(){return(xi=(0,O.Z)(function*(V,H){const X=yield Ta(V),ue=Zs(H),Oe={method:"POST",headers:X,body:JSON.stringify(ue)};let $e;try{$e=yield(yield fetch(ba(V.appConfig),Oe)).json()}catch(bt){throw Sr.create("token-subscribe-failed",{errorInfo:bt?.toString()})}if($e.error)throw Sr.create("token-subscribe-failed",{errorInfo:$e.error.message});if(!$e.token)throw Sr.create("token-subscribe-no-token");return $e.token})).apply(this,arguments)}function Tu(V,H){return oa.apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(V,H){const X=yield Ta(V),ue=Zs(H.subscriptionOptions),Oe={method:"PATCH",headers:X,body:JSON.stringify(ue)};let $e;try{$e=yield(yield fetch(`${ba(V.appConfig)}/${H.token}`,Oe)).json()}catch(bt){throw Sr.create("token-update-failed",{errorInfo:bt?.toString()})}if($e.error)throw Sr.create("token-update-failed",{errorInfo:$e.error.message});if(!$e.token)throw Sr.create("token-update-no-token");return $e.token})).apply(this,arguments)}function ji(V,H){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,O.Z)(function*(V,H){const ue={method:"DELETE",headers:yield Ta(V)};try{const $e=yield(yield fetch(`${ba(V.appConfig)}/${H}`,ue)).json();if($e.error)throw Sr.create("token-unsubscribe-failed",{errorInfo:$e.error.message})}catch(Oe){throw Sr.create("token-unsubscribe-failed",{errorInfo:Oe?.toString()})}})).apply(this,arguments)}function ba({projectId:V}){return`https://fcmregistrations.googleapis.com/v1/projects/${V}/registrations`}function Ta(V){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,O.Z)(function*({appConfig:V,installations:H}){const X=yield H.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":V.apiKey,"x-goog-firebase-installations-auth":`FIS ${X}`})})).apply(this,arguments)}function Zs({p256dh:V,auth:H,endpoint:X,vapidKey:ue}){const Oe={web:{endpoint:X,auth:H,p256dh:V}};return ue!==Oi&&(Oe.web.applicationPubKey=ue),Oe}const pi=6048e5;function ws(V){return ki.apply(this,arguments)}function ki(){return(ki=(0,O.Z)(function*(V){const H=yield To(V.swRegistration,V.vapidKey),X={vapidKey:V.vapidKey,swScope:V.swRegistration.scope,endpoint:H.endpoint,auth:ps(H.getKey("auth")),p256dh:ps(H.getKey("p256dh"))},ue=yield Ai(V.firebaseDependencies);if(ue){if(Ha(ue.subscriptionOptions,X))return Date.now()>=ue.createTime+pi?An(V,{token:ue.token,createTime:Date.now(),subscriptionOptions:X}):ue.token;try{yield ji(V.firebaseDependencies,ue.token)}catch(Oe){console.warn(Oe)}return vr(V.firebaseDependencies,X)}return vr(V.firebaseDependencies,X)})).apply(this,arguments)}function kn(V){return $o.apply(this,arguments)}function $o(){return($o=(0,O.Z)(function*(V){const H=yield Ai(V.firebaseDependencies);H&&(yield ji(V.firebaseDependencies,H.token),yield Ca(V.firebaseDependencies));const X=yield V.swRegistration.pushManager.getSubscription();return!X||X.unsubscribe()})).apply(this,arguments)}function An(V,H){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,O.Z)(function*(V,H){try{const X=yield Tu(V.firebaseDependencies,H),ue=Object.assign(Object.assign({},H),{token:X,createTime:Date.now()});return yield ao(V.firebaseDependencies,ue),X}catch(X){throw yield kn(V),X}})).apply(this,arguments)}function vr(V,H){return Go.apply(this,arguments)}function Go(){return(Go=(0,O.Z)(function*(V,H){const ue={token:yield uo(V,H),createTime:Date.now(),subscriptionOptions:H};return yield ao(V,ue),ue.token})).apply(this,arguments)}function To(V,H){return lo.apply(this,arguments)}function lo(){return(lo=(0,O.Z)(function*(V,H){return(yield V.pushManager.getSubscription())||V.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bu(H)})})).apply(this,arguments)}function Ha(V,H){return H.vapidKey===V.vapidKey&&H.endpoint===V.endpoint&&H.auth===V.auth&&H.p256dh===V.p256dh}function aa(V){const H={from:V.from,collapseKey:V.collapse_key,messageId:V.fcmMessageId};return function Es(V,H){if(!H.notification)return;V.notification={};const X=H.notification.title;X&&(V.notification.title=X);const ue=H.notification.body;ue&&(V.notification.body=ue);const Oe=H.notification.image;Oe&&(V.notification.image=Oe);const $e=H.notification.icon;$e&&(V.notification.icon=$e)}(H,V),function nt(V,H){H.data&&(V.data=H.data)}(H,V),function ar(V,H){var X,ue,Oe,$e,bt;if(!(H.fcmOptions||null!==(X=H.notification)&&void 0!==X&&X.click_action))return;V.fcmOptions={};const gn=null!==(Oe=null===(ue=H.fcmOptions)||void 0===ue?void 0:ue.link)&&void 0!==Oe?Oe:null===($e=H.notification)||void 0===$e?void 0:$e.click_action;gn&&(V.fcmOptions.link=gn);const mn=null===(bt=H.fcmOptions)||void 0===bt?void 0:bt.analytics_label;mn&&(V.fcmOptions.analyticsLabel=mn)}(H,V),H}function Da(V){return"object"==typeof V&&!!V&&Io in V}function co(V,H){const X=[];for(let ue=0;ue<V.length;ue++)X.push(V.charAt(ue)),ue<H.length&&X.push(H.charAt(ue));return X.join("")}function Is(V){return Sr.create("missing-app-config-values",{valueName:V})}co("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),co("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class uu{constructor(H,X,ue){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Oe=function $i(V){if(!V||!V.options)throw Is("App Configuration Object");if(!V.name)throw Is("App Name");const H=["projectId","apiKey","appId","messagingSenderId"],{options:X}=V;for(const ue of H)if(!X[ue])throw Is(ue);return{appName:V.name,projectId:X.projectId,apiKey:X.apiKey,appId:X.appId,senderId:X.messagingSenderId}}(H);this.firebaseDependencies={app:H,appConfig:Oe,installations:X,analyticsProvider:ue}}_delete(){return Promise.resolve()}}function ms(V){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,O.Z)(function*(V){try{V.swRegistration=yield navigator.serviceWorker.register(ns,{scope:Zi}),V.swRegistration.update().catch(()=>{})}catch(H){throw Sr.create("failed-service-worker-registration",{browserErrorMessage:H?.message})}})).apply(this,arguments)}function zo(V,H){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,O.Z)(function*(V,H){if(!H&&!V.swRegistration&&(yield ms(V)),H||!V.swRegistration){if(!(H instanceof ServiceWorkerRegistration))throw Sr.create("invalid-sw-registration");V.swRegistration=H}})).apply(this,arguments)}function Do(V,H){return za.apply(this,arguments)}function za(){return(za=(0,O.Z)(function*(V,H){H?V.vapidKey=H:V.vapidKey||(V.vapidKey=Oi)})).apply(this,arguments)}function Fi(){return(Fi=(0,O.Z)(function*(V,H){if(!navigator)throw Sr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sr.create("permission-blocked");return yield Do(V,H?.vapidKey),yield zo(V,H?.serviceWorkerRegistration),ws(V)})).apply(this,arguments)}function Ks(V,H,X){return Os.apply(this,arguments)}function Os(){return(Os=(0,O.Z)(function*(V,H,X){const ue=Ys(H);(yield V.firebaseDependencies.analyticsProvider.get()).logEvent(ue,{message_id:X[Io],message_name:X[Rs],message_time:X[ia],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ys(V){switch(V){case zs.NOTIFICATION_CLICKED:return"notification_open";case zs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function qo(){return(qo=(0,O.Z)(function*(V,H){const X=H.data;if(!X.isFirebaseMessaging)return;V.onMessageHandler&&X.messageType===zs.PUSH_RECEIVED&&("function"==typeof V.onMessageHandler?V.onMessageHandler(aa(X)):V.onMessageHandler.next(aa(X)));const ue=X.data;Da(ue)&&"1"===ue[oo]&&(yield Ks(V,X.messageType,ue))})).apply(this,arguments)}const ks="@firebase/messaging",Fs=V=>{const H=new uu(V.getProvider("app").getImmediate(),V.getProvider("installations-internal").getImmediate(),V.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",X=>function Sa(V,H){return qo.apply(this,arguments)}(H,X)),H},Yt=V=>{const H=V.getProvider("messaging").getImmediate();return{getToken:ue=>function gi(V,H){return Fi.apply(this,arguments)}(H,ue)}};function Fn(){return So.apply(this,arguments)}function So(){return(So=(0,O.Z)(function*(){try{yield(0,Se.eu)()}catch{return!1}return typeof window<"u"&&(0,Se.hl)()&&(0,Se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ls(){(0,xe._registerComponent)(new Me.wA("messaging",Fs,"PUBLIC")),(0,xe._registerComponent)(new Me.wA("messaging-internal",Yt,"PRIVATE")),(0,xe.registerVersion)(ks,"0.12.4"),(0,xe.registerVersion)(ks,"0.12.4","esm2017")}();const Cs="analytics",Kn="firebase_id",Qs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xa="https://www.googletagmanager.com/gtag/js",Ki=new Le.Yd("@firebase/analytics");function Li(V){return Promise.all(V.map(H=>H.catch(X=>X)))}function Au(V,H){const X=document.createElement("script");X.src=`${xa}?l=${V}&id=${H}`,X.async=!0,document.head.appendChild(X)}function ho(V,H,X,ue,Oe,$e){return k.apply(this,arguments)}function k(){return(k=(0,O.Z)(function*(V,H,X,ue,Oe,$e){const bt=ue[Oe];try{if(bt)yield H[bt];else{const mn=(yield Li(X)).find(In=>In.measurementId===Oe);mn&&(yield H[mn.appId])}}catch(gn){Ki.error(gn)}V("config",Oe,$e)})).apply(this,arguments)}function K(V,H,X,ue,Oe){return L.apply(this,arguments)}function L(){return(L=(0,O.Z)(function*(V,H,X,ue,Oe){try{let $e=[];if(Oe&&Oe.send_to){let bt=Oe.send_to;Array.isArray(bt)||(bt=[bt]);const gn=yield Li(X);for(const mn of bt){const In=gn.find(Wn=>Wn.measurementId===mn),ir=In&&H[In.appId];if(!ir){$e=[];break}$e.push(ir)}}0===$e.length&&($e=Object.values(H)),yield Promise.all($e),V("event",ue,Oe||{})}catch($e){Ki.error($e)}})).apply(this,arguments)}function ze(V){const H=window.document.getElementsByTagName("script");for(const X of Object.values(H))if(X.src&&X.src.includes(xa)&&X.src.includes(V))return X;return null}const Vt=new Se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),jn=new class ur{constructor(H={},X=1e3){this.throttleMetadata=H,this.intervalMillis=X}getThrottleMetadata(H){return this.throttleMetadata[H]}setThrottleMetadata(H,X){this.throttleMetadata[H]=X}deleteThrottleMetadata(H){delete this.throttleMetadata[H]}};function Yr(V){return new Headers({Accept:"application/json","x-goog-api-key":V})}function rr(V){return mi.apply(this,arguments)}function mi(){return(mi=(0,O.Z)(function*(V){var H;const{appId:X,apiKey:ue}=V,Oe={method:"GET",headers:Yr(ue)},$e=Qs.replace("{app-id}",X),bt=yield fetch($e,Oe);if(200!==bt.status&&304!==bt.status){let gn="";try{const mn=yield bt.json();null!==(H=mn.error)&&void 0!==H&&H.message&&(gn=mn.error.message)}catch{}throw Vt.create("config-fetch-failed",{httpStatus:bt.status,responseMessage:gn})}return bt.json()})).apply(this,arguments)}function _r(V){return bs.apply(this,arguments)}function bs(){return(bs=(0,O.Z)(function*(V,H=jn,X){const{appId:ue,apiKey:Oe,measurementId:$e}=V.options;if(!ue)throw Vt.create("no-app-id");if(!Oe){if($e)return{measurementId:$e,appId:ue};throw Vt.create("no-api-key")}const bt=H.getThrottleMetadata(ue)||{backoffCount:0,throttleEndTimeMillis:Date.now()},gn=new xo;return setTimeout((0,O.Z)(function*(){gn.abort()}),void 0!==X?X:6e4),Js({appId:ue,apiKey:Oe,measurementId:$e},bt,gn,H)})).apply(this,arguments)}function Js(V,H,X){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,O.Z)(function*(V,{throttleEndTimeMillis:H,backoffCount:X},ue,Oe=jn){var $e;const{appId:bt,measurementId:gn}=V;try{yield Xs(ue,H)}catch(mn){if(gn)return Ki.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${gn} provided in the "measurementId" field in the local Firebase config. [${mn?.message}]`),{appId:bt,measurementId:gn};throw mn}try{const mn=yield rr(V);return Oe.deleteThrottleMetadata(bt),mn}catch(mn){const In=mn;if(!Ra(In)){if(Oe.deleteThrottleMetadata(bt),gn)return Ki.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${gn} provided in the "measurementId" field in the local Firebase config. [${In?.message}]`),{appId:bt,measurementId:gn};throw mn}const ir=503===Number(null===($e=In?.customData)||void 0===$e?void 0:$e.httpStatus)?(0,Se.$s)(X,Oe.intervalMillis,30):(0,Se.$s)(X,Oe.intervalMillis),Wn={throttleEndTimeMillis:Date.now()+ir,backoffCount:X+1};return Oe.setThrottleMetadata(bt,Wn),Ki.debug(`Calling attemptFetch again in ${ir} millis`),Js(V,Wn,ue,Oe)}})).apply(this,arguments)}function Xs(V,H){return new Promise((X,ue)=>{const Oe=Math.max(H-Date.now(),0),$e=setTimeout(X,Oe);V.addEventListener(()=>{clearTimeout($e),ue(Vt.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}function Ra(V){if(!(V instanceof Se.ZR&&V.customData))return!1;const H=Number(V.customData.httpStatus);return 429===H||500===H||503===H||504===H}class xo{constructor(){this.listeners=[]}addEventListener(H){this.listeners.push(H)}abort(){this.listeners.forEach(H=>H())}}let Uu,Jo;function Mo(){return(Mo=(0,O.Z)(function*(V,H,X,ue,Oe){if(Oe&&Oe.global)V("event",X,ue);else{const $e=yield H;V("event",X,Object.assign(Object.assign({},ue),{send_to:$e}))}})).apply(this,arguments)}function la(V){Jo=V}function cu(V){Uu=V}function ca(){return Na.apply(this,arguments)}function Na(){return(Na=(0,O.Z)(function*(){if(!(0,Se.hl)())return Ki.warn(Vt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Se.eu)()}catch(V){return Ki.warn(Vt.create("indexeddb-unavailable",{errorInfo:V?.toString()}).message),!1}return!0})).apply(this,arguments)}function du(){return(du=(0,O.Z)(function*(V,H,X,ue,Oe,$e,bt){var gn;const mn=_r(V);mn.then(os=>{X[os.measurementId]=os.appId,V.options.measurementId&&os.measurementId!==V.options.measurementId&&Ki.warn(`The measurement ID in the local Firebase config (${V.options.measurementId}) does not match the measurement ID fetched from the server (${os.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(os=>Ki.error(os)),H.push(mn);const In=ca().then(os=>{if(os)return ue.getId()}),[ir,Wn]=yield Promise.all([mn,In]);ze($e)||Au($e,ir.measurementId),Jo&&(Oe("consent","default",Jo),la(void 0)),Oe("js",new Date);const po=null!==(gn=bt?.config)&&void 0!==gn?gn:{};return po.origin="firebase",po.update=!0,null!=Wn&&(po[Kn]=Wn),Oe("config",ir.measurementId,po),Uu&&(Oe("set",Uu),cu(void 0)),ir.measurementId})).apply(this,arguments)}class Ku{constructor(H){this.app=H}_delete(){return delete to[this.app.options.appId],Promise.resolve()}}let to={},Za=[];const Mu={};let Oa,kr,Nr="dataLayer",Pr=!1;function ul(V,H,X){!function Vu(){const V=[];if((0,Se.ru)()&&V.push("This is a browser extension environment."),(0,Se.zI)()||V.push("Cookies are not available."),V.length>0){const H=V.map((ue,Oe)=>`(${Oe+1}) ${ue}`).join(" "),X=Vt.create("invalid-analytics-context",{errorInfo:H});Ki.warn(X.message)}}();const ue=V.options.appId;if(!ue)throw Vt.create("no-app-id");if(!V.options.apiKey){if(!V.options.measurementId)throw Vt.create("no-api-key");Ki.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${V.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=to[ue])throw Vt.create("already-exists",{id:ue});if(!Pr){!function Ma(V){let H=[];Array.isArray(window[V])?H=window[V]:window[V]=H}(Nr);const{wrappedGtag:$e,gtagCore:bt}=function ce(V,H,X,ue,Oe){let $e=function(...bt){window[ue].push(arguments)};return window[Oe]&&"function"==typeof window[Oe]&&($e=window[Oe]),window[Oe]=function Q(V,H,X,ue){function $e(){return($e=(0,O.Z)(function*(bt,gn,mn){try{"event"===bt?yield K(V,H,X,gn,mn):"config"===bt?yield ho(V,H,X,ue,gn,mn):"consent"===bt?V("consent","update",mn):V("set",gn)}catch(In){Ki.error(In)}})).apply(this,arguments)}return function Oe(bt,gn,mn){return $e.apply(this,arguments)}}($e,V,H,X),{gtagCore:$e,wrappedGtag:window[Oe]}}(to,Za,Mu,Nr,"gtag");kr=$e,Oa=bt,Pr=!0}return to[ue]=function Pa(V,H,X,ue,Oe,$e,bt){return du.apply(this,arguments)}(V,Za,Mu,H,Oa,Nr,X),new Ku(V)}function ha(){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,O.Z)(function*(){if((0,Se.ru)()||!(0,Se.zI)()||!(0,Se.hl)())return!1;try{return yield(0,Se.eu)()}catch{return!1}})).apply(this,arguments)}const ln="@firebase/analytics";!function Ri(){(0,xe._registerComponent)(new Me.wA(Cs,(H,{options:X})=>ul(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),X),"PUBLIC")),(0,xe._registerComponent)(new Me.wA("analytics-internal",function V(H){try{const X=H.getProvider(Cs).getImmediate();return{logEvent:(ue,Oe,$e)=>function Ke(V,H,X,ue){V=(0,Se.m9)(V),function eo(V,H,X,ue,Oe){return Mo.apply(this,arguments)}(kr,to[V.app.options.appId],H,X,ue).catch(Oe=>Ki.error(Oe))}(X,ue,Oe,$e)}}catch(X){throw Vt.create("interop-component-reg-failed",{reason:X})}},"PRIVATE")),(0,xe.registerVersion)(ln,"0.9.4"),(0,xe.registerVersion)(ln,"0.9.4","esm2017")}();var is=Y(4408),Ro=Y(7565);const Qa=new class fo extends Ro.v{}(class Ui extends is.o{constructor(H,X){super(H,X),this.scheduler=H,this.work=X}schedule(H,X=0){return X>0?super.schedule(H,X):(this.delay=X,this.state=H,this.scheduler.flush(this),this)}execute(H,X){return X>0||this.closed?super.execute(H,X):this._execute(H,X)}requestAsyncId(H,X,ue=0){return null!=ue&&ue>0||null==ue&&this.delay>0?super.requestAsyncId(H,X,ue):(H.flush(this),0)}});var Ja=Y(4986),fa=Y(8505),$r=Y(5363),Bu=Y(9468);const ju=new A.GfV("7.5.0"),Us="__angularfire_symbol__analyticsIsSupportedValue",Vs="__angularfire_symbol__analyticsIsSupported",no="__angularfire_symbol__remoteConfigIsSupportedValue",No="__angularfire_symbol__remoteConfigIsSupported",Po="__angularfire_symbol__messagingIsSupportedValue",pa="__angularfire_symbol__messagingIsSupported";function b(V,H,X){if(H){if(1===H.length)return H[0];const $e=H.filter(bt=>bt.app===X);if(1===$e.length)return $e[0]}return X.container.getProvider(V).getImmediate({optional:!0})}globalThis[Vs]||(globalThis[Vs]=ha().then(V=>globalThis[Us]=V).catch(()=>globalThis[Us]=!1)),globalThis[pa]||(globalThis[pa]=Fn().then(V=>globalThis[Po]=V).catch(()=>globalThis[Po]=!1)),globalThis[No]||(globalThis[No]=ou().then(V=>globalThis[no]=V).catch(()=>globalThis[no]=!1));const x=(V,H)=>{const X=H?[H]:(0,y.C6)(),ue=[];return X.forEach(Oe=>{Oe.container.getProvider(V).instances.forEach(bt=>{ue.includes(bt)||ue.push(bt)})}),ue};function E(){}class P{constructor(H,X=Qa){this.zone=H,this.delegate=X}now(){return this.delegate.now()}schedule(H,X,ue){const Oe=this.zone;return this.delegate.schedule(function(bt){Oe.runGuarded(()=>{H.apply(this,[bt])})},X,ue)}}class ${constructor(H){this.zone=H,this.task=null}call(H,X){const ue=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",E,{},E,E)),X.pipe((0,fa.b)({next:ue,complete:ue,error:ue})).subscribe(H).add(ue)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let J=(()=>{class V{constructor(X){this.ngZone=X,this.outsideAngular=X.runOutsideAngular(()=>new P(Zone.current)),this.insideAngular=X.run(()=>new P(Zone.current,Ja.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return V.\u0275fac=function(X){return new(X||V)(A.LFG(A.R0b))},V.\u0275prov=A.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();function re(){const V=globalThis.\u0275AngularFireScheduler;if(!V)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return V}function tn(V){return V.pipe((0,$r.Q)(re().outsideAngular))}function fr(V){return re(),function Ii(V){return function(X){return(X=X.lift(new $(V.ngZone))).pipe((0,Bu.R)(V.outsideAngular),(0,$r.Q)(V.insideAngular))}}(re())(V)}},2090:(Kt,qe,Y)=>{Y.d(qe,{$s:()=>vn,BH:()=>Je,DV:()=>Er,Dv:()=>Wr,G6:()=>Rt,GJ:()=>Xt,L:()=>Be,LL:()=>Gt,Pz:()=>it,Sg:()=>Tt,UG:()=>tt,UI:()=>Tn,US:()=>Me,Wj:()=>qr,Wl:()=>ti,Yr:()=>Xe,ZB:()=>De,ZR:()=>dn,aH:()=>gt,b$:()=>Ie,cI:()=>En,dS:()=>bi,eu:()=>Nt,g5:()=>O,gK:()=>Rr,gQ:()=>Cr,h$:()=>Fe,hl:()=>cn,hu:()=>y,jU:()=>we,lb:()=>Jn,m9:()=>ni,ne:()=>fn,p$:()=>ge,pd:()=>hi,r3:()=>zr,ru:()=>Te,tV:()=>fe,uI:()=>z,ug:()=>Pn,vZ:()=>Ir,w1:()=>_e,w9:()=>Vi,xO:()=>Wi,xb:()=>lr,z$:()=>wt,zI:()=>jt,zd:()=>On});const y=function(pe,he){if(!pe)throw O(he)},O=function(pe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+pe)},xe=function(pe){const he=[];let Ce=0;for(let st=0;st<pe.length;st++){let je=pe.charCodeAt(st);je<128?he[Ce++]=je:je<2048?(he[Ce++]=je>>6|192,he[Ce++]=63&je|128):55296==(64512&je)&&st+1<pe.length&&56320==(64512&pe.charCodeAt(st+1))?(je=65536+((1023&je)<<10)+(1023&pe.charCodeAt(++st)),he[Ce++]=je>>18|240,he[Ce++]=je>>12&63|128,he[Ce++]=je>>6&63|128,he[Ce++]=63&je|128):(he[Ce++]=je>>12|224,he[Ce++]=je>>6&63|128,he[Ce++]=63&je|128)}return he},Me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(pe,he){if(!Array.isArray(pe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ce=he?this.byteToCharMapWebSafe_:this.byteToCharMap_,st=[];for(let je=0;je<pe.length;je+=3){const en=pe[je],yn=je+1<pe.length,xn=yn?pe[je+1]:0,ve=je+2<pe.length,ye=ve?pe[je+2]:0;let _t=(15&xn)<<2|ye>>6,Zt=63&ye;ve||(Zt=64,yn||(_t=64)),st.push(Ce[en>>2],Ce[(3&en)<<4|xn>>4],Ce[_t],Ce[Zt])}return st.join("")},encodeString(pe,he){return this.HAS_NATIVE_SUPPORT&&!he?btoa(pe):this.encodeByteArray(xe(pe),he)},decodeString(pe,he){return this.HAS_NATIVE_SUPPORT&&!he?atob(pe):function(pe){const he=[];let Ce=0,st=0;for(;Ce<pe.length;){const je=pe[Ce++];if(je<128)he[st++]=String.fromCharCode(je);else if(je>191&&je<224){const en=pe[Ce++];he[st++]=String.fromCharCode((31&je)<<6|63&en)}else if(je>239&&je<365){const ve=((7&je)<<18|(63&pe[Ce++])<<12|(63&pe[Ce++])<<6|63&pe[Ce++])-65536;he[st++]=String.fromCharCode(55296+(ve>>10)),he[st++]=String.fromCharCode(56320+(1023&ve))}else{const en=pe[Ce++],yn=pe[Ce++];he[st++]=String.fromCharCode((15&je)<<12|(63&en)<<6|63&yn)}}return he.join("")}(this.decodeStringToByteArray(pe,he))},decodeStringToByteArray(pe,he){this.init_();const Ce=he?this.charToByteMapWebSafe_:this.charToByteMap_,st=[];for(let je=0;je<pe.length;){const en=Ce[pe.charAt(je++)],xn=je<pe.length?Ce[pe.charAt(je)]:0;++je;const ye=je<pe.length?Ce[pe.charAt(je)]:64;++je;const Ae=je<pe.length?Ce[pe.charAt(je)]:64;if(++je,null==en||null==xn||null==ye||null==Ae)throw new Le;st.push(en<<2|xn>>4),64!==ye&&(st.push(xn<<4&240|ye>>2),64!==Ae&&st.push(ye<<6&192|Ae))}return st},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let pe=0;pe<this.ENCODED_VALS.length;pe++)this.byteToCharMap_[pe]=this.ENCODED_VALS.charAt(pe),this.charToByteMap_[this.byteToCharMap_[pe]]=pe,this.byteToCharMapWebSafe_[pe]=this.ENCODED_VALS_WEBSAFE.charAt(pe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[pe]]=pe,pe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(pe)]=pe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(pe)]=pe)}}};class Le extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(pe){const he=xe(pe);return Me.encodeByteArray(he,!0)},Be=function(pe){return Fe(pe).replace(/\./g,"")},fe=function(pe){try{return Me.decodeString(pe,!0)}catch(he){console.error("base64Decode failed: ",he)}return null};function ge(pe){return De(void 0,pe)}function De(pe,he){if(!(he instanceof Object))return he;switch(he.constructor){case Date:return new Date(he.getTime());case Object:void 0===pe&&(pe={});break;case Array:pe=[];break;default:return he}for(const Ce in he)!he.hasOwnProperty(Ce)||!mt(Ce)||(pe[Ce]=De(pe[Ce],he[Ce]));return pe}function mt(pe){return"__proto__"!==pe}const ft=()=>{try{return function pt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const pe=process.env.__FIREBASE_DEFAULTS__;return pe?JSON.parse(pe):void 0})()||(()=>{if(typeof document>"u")return;let pe;try{pe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const he=pe&&fe(pe[1]);return he&&JSON.parse(he)})()}catch(pe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${pe}`)}},gt=()=>{var pe;return null===(pe=ft())||void 0===pe?void 0:pe.config},it=pe=>{var he;return null===(he=ft())||void 0===he?void 0:he[`_${pe}`]};class Je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((he,Ce)=>{this.resolve=he,this.reject=Ce})}wrapCallback(he){return(Ce,st)=>{Ce?this.reject(Ce):this.resolve(st),"function"==typeof he&&(this.promise.catch(()=>{}),1===he.length?he(Ce):he(Ce,st))}}}function Tt(pe,he){if(pe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const st=he||"demo-project",je=pe.iat||0,en=pe.sub||pe.user_id;if(!en)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const yn=Object.assign({iss:`https://securetoken.google.com/${st}`,aud:st,iat:je,exp:je+3600,auth_time:je,sub:en,user_id:en,firebase:{sign_in_provider:"custom",identities:{}}},pe);return[Be(JSON.stringify({alg:"none",type:"JWT"})),Be(JSON.stringify(yn)),""].join(".")}function wt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function z(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function tt(){var pe;const he=null===(pe=ft())||void 0===pe?void 0:pe.forceEnvironment;if("node"===he)return!0;if("browser"===he)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function we(){return"object"==typeof self&&self.self===self}function Te(){const pe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof pe&&void 0!==pe.id}function Ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){const pe=wt();return pe.indexOf("MSIE ")>=0||pe.indexOf("Trident/")>=0}function Xe(){return!1}function Rt(){return!tt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cn(){try{return"object"==typeof indexedDB}catch{return!1}}function Nt(){return new Promise((pe,he)=>{try{let Ce=!0;const st="validate-browser-context-for-indexeddb-analytics-module",je=self.indexedDB.open(st);je.onsuccess=()=>{je.result.close(),Ce||self.indexedDB.deleteDatabase(st),pe(!0)},je.onupgradeneeded=()=>{Ce=!1},je.onerror=()=>{var en;he((null===(en=je.error)||void 0===en?void 0:en.message)||"")}}catch(Ce){he(Ce)}})}function jt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class dn extends Error{constructor(he,Ce,st){super(Ce),this.code=he,this.customData=st,this.name="FirebaseError",Object.setPrototypeOf(this,dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gt.prototype.create)}}class Gt{constructor(he,Ce,st){this.service=he,this.serviceName=Ce,this.errors=st}create(he,...Ce){const st=Ce[0]||{},je=`${this.service}/${he}`,en=this.errors[he],yn=en?function un(pe,he){return pe.replace(nn,(Ce,st)=>{const je=he[st];return null!=je?String(je):`<${st}?>`})}(en,st):"Error";return new dn(je,`${this.serviceName}: ${yn} (${je}).`,st)}}const nn=/\{\$([^}]+)}/g;function En(pe){return JSON.parse(pe)}function ti(pe){return JSON.stringify(pe)}const Ur=function(pe){let he={},Ce={},st={},je="";try{const en=pe.split(".");he=En(fe(en[0])||""),Ce=En(fe(en[1])||""),je=en[2],st=Ce.d||{},delete Ce.d}catch{}return{header:he,claims:Ce,data:st,signature:je}},Vi=function(pe){const Ce=Ur(pe).claims;return!!Ce&&"object"==typeof Ce&&Ce.hasOwnProperty("iat")},Xt=function(pe){const he=Ur(pe).claims;return"object"==typeof he&&!0===he.admin};function zr(pe,he){return Object.prototype.hasOwnProperty.call(pe,he)}function Er(pe,he){if(Object.prototype.hasOwnProperty.call(pe,he))return pe[he]}function lr(pe){for(const he in pe)if(Object.prototype.hasOwnProperty.call(pe,he))return!1;return!0}function Tn(pe,he,Ce){const st={};for(const je in pe)Object.prototype.hasOwnProperty.call(pe,je)&&(st[je]=he.call(Ce,pe[je],je,pe));return st}function Ir(pe,he){if(pe===he)return!0;const Ce=Object.keys(pe),st=Object.keys(he);for(const je of Ce){if(!st.includes(je))return!1;const en=pe[je],yn=he[je];if(kt(en)&&kt(yn)){if(!Ir(en,yn))return!1}else if(en!==yn)return!1}for(const je of st)if(!Ce.includes(je))return!1;return!0}function kt(pe){return null!==pe&&"object"==typeof pe}function Wi(pe){const he=[];for(const[Ce,st]of Object.entries(pe))Array.isArray(st)?st.forEach(je=>{he.push(encodeURIComponent(Ce)+"="+encodeURIComponent(je))}):he.push(encodeURIComponent(Ce)+"="+encodeURIComponent(st));return he.length?"&"+he.join("&"):""}function On(pe){const he={};return pe.replace(/^\?/,"").split("&").forEach(st=>{if(st){const[je,en]=st.split("=");he[decodeURIComponent(je)]=decodeURIComponent(en)}}),he}function hi(pe){const he=pe.indexOf("?");if(!he)return"";const Ce=pe.indexOf("#",he);return pe.substring(he,Ce>0?Ce:void 0)}class Cr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let he=1;he<this.blockSize;++he)this.pad_[he]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(he,Ce){Ce||(Ce=0);const st=this.W_;if("string"==typeof he)for(let Ae=0;Ae<16;Ae++)st[Ae]=he.charCodeAt(Ce)<<24|he.charCodeAt(Ce+1)<<16|he.charCodeAt(Ce+2)<<8|he.charCodeAt(Ce+3),Ce+=4;else for(let Ae=0;Ae<16;Ae++)st[Ae]=he[Ce]<<24|he[Ce+1]<<16|he[Ce+2]<<8|he[Ce+3],Ce+=4;for(let Ae=16;Ae<80;Ae++){const _t=st[Ae-3]^st[Ae-8]^st[Ae-14]^st[Ae-16];st[Ae]=4294967295&(_t<<1|_t>>>31)}let ye,oe,je=this.chain_[0],en=this.chain_[1],yn=this.chain_[2],xn=this.chain_[3],ve=this.chain_[4];for(let Ae=0;Ae<80;Ae++){Ae<40?Ae<20?(ye=xn^en&(yn^xn),oe=1518500249):(ye=en^yn^xn,oe=1859775393):Ae<60?(ye=en&yn|xn&(en|yn),oe=2400959708):(ye=en^yn^xn,oe=3395469782);const _t=(je<<5|je>>>27)+ye+ve+oe+st[Ae]&4294967295;ve=xn,xn=yn,yn=4294967295&(en<<30|en>>>2),en=je,je=_t}this.chain_[0]=this.chain_[0]+je&4294967295,this.chain_[1]=this.chain_[1]+en&4294967295,this.chain_[2]=this.chain_[2]+yn&4294967295,this.chain_[3]=this.chain_[3]+xn&4294967295,this.chain_[4]=this.chain_[4]+ve&4294967295}update(he,Ce){if(null==he)return;void 0===Ce&&(Ce=he.length);const st=Ce-this.blockSize;let je=0;const en=this.buf_;let yn=this.inbuf_;for(;je<Ce;){if(0===yn)for(;je<=st;)this.compress_(he,je),je+=this.blockSize;if("string"==typeof he){for(;je<Ce;)if(en[yn]=he.charCodeAt(je),++yn,++je,yn===this.blockSize){this.compress_(en),yn=0;break}}else for(;je<Ce;)if(en[yn]=he[je],++yn,++je,yn===this.blockSize){this.compress_(en),yn=0;break}}this.inbuf_=yn,this.total_+=Ce}digest(){const he=[];let Ce=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let je=this.blockSize-1;je>=56;je--)this.buf_[je]=255&Ce,Ce/=256;this.compress_(this.buf_);let st=0;for(let je=0;je<5;je++)for(let en=24;en>=0;en-=8)he[st]=this.chain_[je]>>en&255,++st;return he}}function fn(pe,he){const Ce=new an(pe,he);return Ce.subscribe.bind(Ce)}class an{constructor(he,Ce){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ce,this.task.then(()=>{he(this)}).catch(st=>{this.error(st)})}next(he){this.forEachObserver(Ce=>{Ce.next(he)})}error(he){this.forEachObserver(Ce=>{Ce.error(he)}),this.close(he)}complete(){this.forEachObserver(he=>{he.complete()}),this.close()}subscribe(he,Ce,st){let je;if(void 0===he&&void 0===Ce&&void 0===st)throw new Error("Missing Observer.");je=function cs(pe,he){if("object"!=typeof pe||null===pe)return!1;for(const Ce of he)if(Ce in pe&&"function"==typeof pe[Ce])return!0;return!1}(he,["next","error","complete"])?he:{next:he,error:Ce,complete:st},void 0===je.next&&(je.next=zn),void 0===je.error&&(je.error=zn),void 0===je.complete&&(je.complete=zn);const en=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?je.error(this.finalError):je.complete()}catch{}}),this.observers.push(je),en}unsubscribeOne(he){void 0===this.observers||void 0===this.observers[he]||(delete this.observers[he],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(he){if(!this.finalized)for(let Ce=0;Ce<this.observers.length;Ce++)this.sendOne(Ce,he)}sendOne(he,Ce){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[he])try{Ce(this.observers[he])}catch(st){typeof console<"u"&&console.error&&console.error(st)}})}close(he){this.finalized||(this.finalized=!0,void 0!==he&&(this.finalError=he),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zn(){}const Wr=function(pe,he,Ce,st){let je;if(st<he?je="at least "+he:st>Ce&&(je=0===Ce?"none":"no more than "+Ce),je)throw new Error(pe+" failed: Was called with "+st+(1===st?" argument.":" arguments.")+" Expects "+je+".")};function Rr(pe,he){return`${pe} failed: ${he} argument `}function qr(pe,he,Ce,st){if((!st||Ce)&&"function"!=typeof Ce)throw new Error(Rr(pe,he)+"must be a valid function.")}function Jn(pe,he,Ce,st){if((!st||Ce)&&("object"!=typeof Ce||null===Ce))throw new Error(Rr(pe,he)+"must be a valid context object.")}const bi=function(pe){const he=[];let Ce=0;for(let st=0;st<pe.length;st++){let je=pe.charCodeAt(st);if(je>=55296&&je<=56319){const en=je-55296;st++,y(st<pe.length,"Surrogate pair missing trail surrogate."),je=65536+(en<<10)+(pe.charCodeAt(st)-56320)}je<128?he[Ce++]=je:je<2048?(he[Ce++]=je>>6|192,he[Ce++]=63&je|128):je<65536?(he[Ce++]=je>>12|224,he[Ce++]=je>>6&63|128,he[Ce++]=63&je|128):(he[Ce++]=je>>18|240,he[Ce++]=je>>12&63|128,he[Ce++]=je>>6&63|128,he[Ce++]=63&je|128)}return he},Pn=function(pe){let he=0;for(let Ce=0;Ce<pe.length;Ce++){const st=pe.charCodeAt(Ce);st<128?he++:st<2048?he+=2:st>=55296&&st<=56319?(he+=4,Ce++):he+=3}return he};function vn(pe,he=1e3,Ce=2){const st=he*Math.pow(Ce,pe),je=Math.round(.5*st*(Math.random()-.5)*2);return Math.min(144e5,st+je)}function ni(pe){return pe&&pe._delegate?pe._delegate:pe}},3494:(Kt,qe,Y)=>{Y.r(qe),Y.d(qe,{InfoBlinkModule:()=>Qi});var A=Y(6895),y=Y(4650);function Me(R,D){return{type:7,name:R,definitions:D,options:{}}}function Le(R,D=null){return{type:4,styles:D,timings:R}}function fe(R){return{type:6,styles:R,offset:null}}function ge(R,D,w){return{type:0,name:R,styles:D,options:w}}function mt(R,D,w=null){return{type:1,expr:R,animation:D,options:w}}var Je=Y(7579),Tt=Y(1481);const wt=["toast-component",""];function z(R,D){if(1&R){const w=y.EpF();y.TgZ(0,"button",5),y.NdJ("click",function(){y.CHM(w);const le=y.oxw();return y.KtG(le.remove())}),y.TgZ(1,"span",6),y._uU(2,"\xd7"),y.qZA()()}}function tt(R,D){if(1&R&&(y.ynx(0),y._uU(1),y.BQk()),2&R){const w=y.oxw(2);y.xp6(1),y.hij("[",w.duplicatesCount+1,"]")}}function we(R,D){if(1&R&&(y.TgZ(0,"div"),y._uU(1),y.YNc(2,tt,2,1,"ng-container",4),y.qZA()),2&R){const w=y.oxw();y.Tol(w.options.titleClass),y.uIk("aria-label",w.title),y.xp6(1),y.hij(" ",w.title," "),y.xp6(1),y.Q6J("ngIf",w.duplicatesCount)}}function Te(R,D){if(1&R&&y._UZ(0,"div",7),2&R){const w=y.oxw();y.Tol(w.options.messageClass),y.Q6J("innerHTML",w.message,y.oJD)}}function Ie(R,D){if(1&R&&(y.TgZ(0,"div",8),y._uU(1),y.qZA()),2&R){const w=y.oxw();y.Tol(w.options.messageClass),y.uIk("aria-label",w.message),y.xp6(1),y.hij(" ",w.message," ")}}function Ue(R,D){if(1&R&&(y.TgZ(0,"div"),y._UZ(1,"div",9),y.qZA()),2&R){const w=y.oxw();y.xp6(1),y.Udp("width",w.width+"%")}}class dn{constructor(D,w){this.component=D,this.injector=w}attach(D,w){return this._attachedHost=D,D.attach(this,w)}detach(){const D=this._attachedHost;if(D)return this._attachedHost=void 0,D.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(D){this._attachedHost=D}}class Gt{attach(D,w){return this._attachedPortal=D,this.attachComponentPortal(D,w)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(D){this._disposeFn=D}}class un{constructor(D){this._overlayRef=D,this.duplicatesCount=0,this._afterClosed=new Je.x,this._activate=new Je.x,this._manualClose=new Je.x,this._resetTimeout=new Je.x,this._countDuplicate=new Je.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(D,w){D&&this._resetTimeout.next(),w&&this._countDuplicate.next(++this.duplicatesCount)}}class nn{constructor(D,w,j,le,Ke,sn){this.toastId=D,this.config=w,this.message=j,this.title=le,this.toastType=Ke,this.toastRef=sn,this._onTap=new Je.x,this._onAction=new Je.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(D){this._onAction.next(D)}onAction(){return this._onAction.asObservable()}}const ti=new y.OlP("ToastConfig");class Ur extends Gt{constructor(D,w,j){super(),this._hostDomElement=D,this._componentFactoryResolver=w,this._appRef=j}attachComponentPortal(D,w){const j=this._componentFactoryResolver.resolveComponentFactory(D.component);let le;return le=j.create(D.injector),this._appRef.attachView(le.hostView),this.setDisposeFn(()=>{this._appRef.detachView(le.hostView),le.destroy()}),w?this._hostDomElement.insertBefore(this._getComponentRootNode(le),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(le)),le}_getComponentRootNode(D){return D.hostView.rootNodes[0]}}class gr{constructor(D){this._portalHost=D}attach(D,w=!0){return this._portalHost.attach(D,w)}detach(){return this._portalHost.detach()}}let Zn=(()=>{class R{constructor(w){this._document=w}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const w=this._document.createElement("div");w.classList.add("overlay-container"),w.setAttribute("aria-live","polite"),this._document.body.appendChild(w),this._containerElement=w}}return R.\u0275fac=function(w){return new(w||R)(y.LFG(A.K0))},R.\u0275prov=y.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),Vi=(()=>{class R{constructor(w,j,le,Ke){this._overlayContainer=w,this._componentFactoryResolver=j,this._appRef=le,this._document=Ke,this._paneElements=new Map}create(w,j){return this._createOverlayRef(this.getPaneElement(w,j))}getPaneElement(w="",j){return this._paneElements.get(j)||this._paneElements.set(j,{}),this._paneElements.get(j)[w]||(this._paneElements.get(j)[w]=this._createPaneElement(w,j)),this._paneElements.get(j)[w]}_createPaneElement(w,j){const le=this._document.createElement("div");return le.id="toast-container",le.classList.add(w),le.classList.add("toast-container"),j?j.getContainerElement().appendChild(le):this._overlayContainer.getContainerElement().appendChild(le),le}_createPortalHost(w){return new Ur(w,this._componentFactoryResolver,this._appRef)}_createOverlayRef(w){return new gr(this._createPortalHost(w))}}return R.\u0275fac=function(w){return new(w||R)(y.LFG(Zn),y.LFG(y._Vd),y.LFG(y.z2F),y.LFG(A.K0))},R.\u0275prov=y.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),Xt=(()=>{class R{constructor(w,j,le,Ke,sn){this.overlay=j,this._injector=le,this.sanitizer=Ke,this.ngZone=sn,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...w.default,...w.config},w.config.iconClasses&&(this.toastrConfig.iconClasses={...w.default.iconClasses,...w.config.iconClasses})}show(w,j,le={},Ke=""){return this._preBuildNotification(Ke,w,j,this.applyConfig(le))}success(w,j,le={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",w,j,this.applyConfig(le))}error(w,j,le={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",w,j,this.applyConfig(le))}info(w,j,le={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",w,j,this.applyConfig(le))}warning(w,j,le={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",w,j,this.applyConfig(le))}clear(w){for(const j of this.toasts)if(void 0!==w){if(j.toastId===w)return void j.toastRef.manualClose()}else j.toastRef.manualClose()}remove(w){const j=this._findToast(w);if(!j||(j.activeToast.toastRef.close(),this.toasts.splice(j.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const le=this.toasts[this.currentlyActive].toastRef;le.isInactive()||(this.currentlyActive=this.currentlyActive+1,le.activate())}return!0}findDuplicate(w="",j="",le,Ke){const{includeTitleDuplicates:sn}=this.toastrConfig;for(const ln of this.toasts)if((!sn||sn&&ln.title===w)&&ln.message===j)return ln.toastRef.onDuplicate(le,Ke),ln;return null}applyConfig(w={}){return{...this.toastrConfig,...w}}_findToast(w){for(let j=0;j<this.toasts.length;j++)if(this.toasts[j].toastId===w)return{index:j,activeToast:this.toasts[j]};return null}_preBuildNotification(w,j,le,Ke){return Ke.onActivateTick?this.ngZone.run(()=>this._buildNotification(w,j,le,Ke)):this._buildNotification(w,j,le,Ke)}_buildNotification(w,j,le,Ke){if(!Ke.toastComponent)throw new Error("toastComponent required");const sn=this.findDuplicate(le,j,this.toastrConfig.resetTimeoutOnDuplicate&&Ke.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&le||j)&&this.toastrConfig.preventDuplicates&&null!==sn)return sn;this.previousToastMessage=j;let ln=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(ln=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const Fr=this.overlay.create(Ke.positionClass,this.overlayContainer);this.index=this.index+1;let Ri=j;j&&Ke.enableHtml&&(Ri=this.sanitizer.sanitize(y.q3G.HTML,j));const is=new un(Fr),Ui=new nn(this.index,Ke,Ri,le,w,is),fo=y.zs3.create({providers:[{provide:nn,useValue:Ui}],parent:this._injector}),Qa=new dn(Ke.toastComponent,fo),Xo=Fr.attach(Qa,Ke.newestOnTop);is.componentInstance=Xo.instance;const Ja={toastId:this.index,title:le||"",message:j||"",toastRef:is,onShown:is.afterActivate(),onHidden:is.afterClosed(),onTap:Ui.onTap(),onAction:Ui.onAction(),portal:Xo};return ln||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Ja.toastRef.activate()})),this.toasts.push(Ja),Ja}}return R.\u0275fac=function(w){return new(w||R)(y.LFG(ti),y.LFG(Vi),y.LFG(y.zs3),y.LFG(Tt.H7),y.LFG(y.R0b))},R.\u0275prov=y.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();const Er={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class R{constructor(w,j,le){this.toastrService=w,this.toastPackage=j,this.ngZone=le,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=j.message,this.title=j.title,this.options=j.config,this.originalTimeout=j.config.timeOut,this.toastClasses=`${j.toastType} ${j.config.toastClass}`,this.sub=j.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=j.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=j.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=j.toastRef.countDuplicate().subscribe(Ke=>{this.duplicatesCount=Ke})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const w=(new Date).getTime();this.width=(this.hideTime-w)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(w,j){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(w),j)):this.timeout=setTimeout(()=>w(),j)}outsideInterval(w,j){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(w),j)):this.intervalId=setInterval(()=>w(),j)}runInsideAngular(w){this.ngZone?this.ngZone.run(()=>w()):w()}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(Xt),y.Y36(nn),y.Y36(y.R0b))},R.\u0275cmp=y.Xpm({type:R,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(w,j){1&w&&y.NdJ("click",function(){return j.tapToast()})("mouseenter",function(){return j.stickAround()})("mouseleave",function(){return j.delayedHideToast()}),2&w&&(y.d8E("@flyInOut",j.state),y.Tol(j.toastClasses),y.Udp("display",j.displayStyle))},attrs:wt,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(w,j){1&w&&(y.YNc(0,z,3,0,"button",0),y.YNc(1,we,3,5,"div",1),y.YNc(2,Te,1,3,"div",2),y.YNc(3,Ie,2,4,"div",3),y.YNc(4,Ue,2,2,"div",4)),2&w&&(y.Q6J("ngIf",j.options.closeButton),y.xp6(1),y.Q6J("ngIf",j.title),y.xp6(1),y.Q6J("ngIf",j.message&&j.options.enableHtml),y.xp6(1),y.Q6J("ngIf",j.message&&!j.options.enableHtml),y.xp6(1),y.Q6J("ngIf",j.options.progressBar))},dependencies:[A.O5],encapsulation:2,data:{animation:[Me("flyInOut",[ge("inactive",fe({opacity:0})),ge("active",fe({opacity:1})),ge("removed",fe({opacity:0})),mt("inactive => active",Le("{{ easeTime }}ms {{ easing }}")),mt("active => removed",Le("{{ easeTime }}ms {{ easing }}"))])]}}),R})()};let lr=(()=>{class R{static forRoot(w={}){return{ngModule:R,providers:[{provide:ti,useValue:{default:Er,config:w}}]}}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275mod=y.oAB({type:R}),R.\u0275inj=y.cJS({imports:[A.ez]}),R})();var Wi=Y(8996),On=Y(9751),hi=Y(4742),Cr=Y(8421),fn=Y(7669),an=Y(5403),rn=Y(3268),cs=Y(1810),Wr=Y(4004);let Rr=(()=>{class R{constructor(w,j){this._renderer=w,this._elementRef=j,this.onChange=le=>{},this.onTouched=()=>{}}setProperty(w,j){this._renderer.setProperty(this._elementRef.nativeElement,w,j)}registerOnTouched(w){this.onTouched=w}registerOnChange(w){this.onChange=w}setDisabledState(w){this.setProperty("disabled",w)}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(y.Qsj),y.Y36(y.SBq))},R.\u0275dir=y.lG2({type:R}),R})(),Tr=(()=>{class R extends Rr{}return R.\u0275fac=function(){let D;return function(j){return(D||(D=y.n5z(R)))(j||R)}}(),R.\u0275dir=y.lG2({type:R,features:[y.qOj]}),R})();const qr=new y.OlP("NgValueAccessor"),Pn={provide:qr,useExisting:(0,y.Gpc)(()=>xt),multi:!0},Vr=new y.OlP("CompositionEventMode");let xt=(()=>{class R extends Rr{constructor(w,j,le){super(w,j),this._compositionMode=le,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pn(){const R=(0,A.q)()?(0,A.q)().getUserAgent():"";return/android (\d+)/.test(R.toLowerCase())}())}writeValue(w){this.setProperty("value",w??"")}_handleInput(w){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(w)}_compositionStart(){this._composing=!0}_compositionEnd(w){this._composing=!1,this._compositionMode&&this.onChange(w)}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(Vr,8))},R.\u0275dir=y.lG2({type:R,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(w,j){1&w&&y.NdJ("input",function(Ke){return j._handleInput(Ke.target.value)})("blur",function(){return j.onTouched()})("compositionstart",function(){return j._compositionStart()})("compositionend",function(Ke){return j._compositionEnd(Ke.target.value)})},features:[y._Bn([Pn]),y.qOj]}),R})();function Pt(R){return null==R||("string"==typeof R||Array.isArray(R))&&0===R.length}function vn(R){return null!=R&&"number"==typeof R.length}const qt=new y.OlP("NgValidators"),Dn=new y.OlP("NgAsyncValidators"),ni=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class pe{static min(D){return function he(R){return D=>{if(Pt(D.value)||Pt(R))return null;const w=parseFloat(D.value);return!isNaN(w)&&w<R?{min:{min:R,actual:D.value}}:null}}(D)}static max(D){return function Ce(R){return D=>{if(Pt(D.value)||Pt(R))return null;const w=parseFloat(D.value);return!isNaN(w)&&w>R?{max:{max:R,actual:D.value}}:null}}(D)}static required(D){return st(D)}static requiredTrue(D){return function je(R){return!0===R.value?null:{required:!0}}(D)}static email(D){return function en(R){return Pt(R.value)||ni.test(R.value)?null:{email:!0}}(D)}static minLength(D){return function yn(R){return D=>Pt(D.value)||!vn(D.value)?null:D.value.length<R?{minlength:{requiredLength:R,actualLength:D.value.length}}:null}(D)}static maxLength(D){return function xn(R){return D=>vn(D.value)&&D.value.length>R?{maxlength:{requiredLength:R,actualLength:D.value.length}}:null}(D)}static pattern(D){return function ve(R){if(!R)return ye;let D,w;return"string"==typeof R?(w="","^"!==R.charAt(0)&&(w+="^"),w+=R,"$"!==R.charAt(R.length-1)&&(w+="$"),D=new RegExp(w)):(w=R.toString(),D=R),j=>{if(Pt(j.value))return null;const le=j.value;return D.test(le)?null:{pattern:{requiredPattern:w,actualValue:le}}}}(D)}static nullValidator(D){return null}static compose(D){return ri(D)}static composeAsync(D){return ds(D)}}function st(R){return Pt(R.value)?{required:!0}:null}function ye(R){return null}function oe(R){return null!=R}function Ae(R){return(0,y.QGY)(R)?(0,Wi.D)(R):R}function _t(R){let D={};return R.forEach(w=>{D=null!=w?{...D,...w}:D}),0===Object.keys(D).length?null:D}function Zt(R,D){return D.map(w=>w(R))}function fi(R){return R.map(D=>function Vn(R){return!R.validate}(D)?D:w=>D.validate(w))}function ri(R){if(!R)return null;const D=R.filter(oe);return 0==D.length?null:function(w){return _t(Zt(w,D))}}function oi(R){return null!=R?ri(fi(R)):null}function ds(R){if(!R)return null;const D=R.filter(oe);return 0==D.length?null:function(w){return function zn(...R){const D=(0,fn.jO)(R),{args:w,keys:j}=(0,hi.D)(R),le=new On.y(Ke=>{const{length:sn}=w;if(!sn)return void Ke.complete();const ln=new Array(sn);let Fr=sn,Ri=sn;for(let is=0;is<sn;is++){let Ui=!1;(0,Cr.Xf)(w[is]).subscribe((0,an.x)(Ke,Ro=>{Ui||(Ui=!0,Ri--),ln[is]=Ro},()=>Fr--,void 0,()=>{(!Fr||!Ui)&&(Ri||Ke.next(j?(0,cs.n)(j,ln):ln),Ke.complete())}))}});return D?le.pipe((0,rn.Z)(D)):le}(Zt(w,D).map(Ae)).pipe((0,Wr.U)(_t))}}function wa(R){return null!=R?ds(fi(R)):null}function mr(R,D){return null===R?[D]:Array.isArray(R)?[...R,D]:[R,D]}function wo(R){return R._rawValidators}function Ea(R){return R._rawAsyncValidators}function Zr(R){return R?Array.isArray(R)?R:[R]:[]}function es(R,D){return Array.isArray(R)?R.includes(D):R===D}function sr(R,D){const w=Zr(D);return Zr(R).forEach(le=>{es(w,le)||w.push(le)}),w}function Dr(R,D){return Zr(D).filter(w=>!es(R,w))}class Br{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(D){this._rawValidators=D||[],this._composedValidatorFn=oi(this._rawValidators)}_setAsyncValidators(D){this._rawAsyncValidators=D||[],this._composedAsyncValidatorFn=wa(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(D){this._onDestroyCallbacks.push(D)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(D=>D()),this._onDestroyCallbacks=[]}reset(D){this.control&&this.control.reset(D)}hasError(D,w){return!!this.control&&this.control.hasError(D,w)}getError(D,w){return this.control?this.control.getError(D,w):null}}class Ln extends Br{get formDirective(){return null}get path(){return null}}class br extends Br{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ts{constructor(D){this._cd=D}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let cr=(()=>{class R extends ts{constructor(w){super(w)}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(br,2))},R.\u0275dir=y.lG2({type:R,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(w,j){2&w&&y.ekj("ng-untouched",j.isUntouched)("ng-touched",j.isTouched)("ng-pristine",j.isPristine)("ng-dirty",j.isDirty)("ng-valid",j.isValid)("ng-invalid",j.isInvalid)("ng-pending",j.isPending)},features:[y.qOj]}),R})(),vi=(()=>{class R extends ts{constructor(w){super(w)}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(Ln,10))},R.\u0275dir=y.lG2({type:R,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(w,j){2&w&&y.ekj("ng-untouched",j.isUntouched)("ng-touched",j.isTouched)("ng-pristine",j.isPristine)("ng-dirty",j.isDirty)("ng-valid",j.isValid)("ng-invalid",j.isInvalid)("ng-pending",j.isPending)("ng-submitted",j.isSubmitted)},features:[y.qOj]}),R})();const be="VALID",Ve="INVALID",Ge="PENDING",dt="DISABLED";function St(R){return(di(R)?R.validators:R)||null}function Ut(R,D){return(di(D)?D.asyncValidators:R)||null}function di(R){return null!=R&&!Array.isArray(R)&&"object"==typeof R}function Kr(R,D,w){const j=R.controls;if(!(D?Object.keys(j):j).length)throw new y.vHH(1e3,"");if(!j[w])throw new y.vHH(1001,"")}function Di(R,D,w){R._forEachChild((j,le)=>{if(void 0===w[le])throw new y.vHH(1002,"")})}class nr{constructor(D,w){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(D),this._assignAsyncValidators(w)}get validator(){return this._composedValidatorFn}set validator(D){this._rawValidators=this._composedValidatorFn=D}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(D){this._rawAsyncValidators=this._composedAsyncValidatorFn=D}get parent(){return this._parent}get valid(){return this.status===be}get invalid(){return this.status===Ve}get pending(){return this.status==Ge}get disabled(){return this.status===dt}get enabled(){return this.status!==dt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(D){this._assignValidators(D)}setAsyncValidators(D){this._assignAsyncValidators(D)}addValidators(D){this.setValidators(sr(D,this._rawValidators))}addAsyncValidators(D){this.setAsyncValidators(sr(D,this._rawAsyncValidators))}removeValidators(D){this.setValidators(Dr(D,this._rawValidators))}removeAsyncValidators(D){this.setAsyncValidators(Dr(D,this._rawAsyncValidators))}hasValidator(D){return es(this._rawValidators,D)}hasAsyncValidator(D){return es(this._rawAsyncValidators,D)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(D={}){this.touched=!0,this._parent&&!D.onlySelf&&this._parent.markAsTouched(D)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(D=>D.markAllAsTouched())}markAsUntouched(D={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(w=>{w.markAsUntouched({onlySelf:!0})}),this._parent&&!D.onlySelf&&this._parent._updateTouched(D)}markAsDirty(D={}){this.pristine=!1,this._parent&&!D.onlySelf&&this._parent.markAsDirty(D)}markAsPristine(D={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(w=>{w.markAsPristine({onlySelf:!0})}),this._parent&&!D.onlySelf&&this._parent._updatePristine(D)}markAsPending(D={}){this.status=Ge,!1!==D.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!D.onlySelf&&this._parent.markAsPending(D)}disable(D={}){const w=this._parentMarkedDirty(D.onlySelf);this.status=dt,this.errors=null,this._forEachChild(j=>{j.disable({...D,onlySelf:!0})}),this._updateValue(),!1!==D.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...D,skipPristineCheck:w}),this._onDisabledChange.forEach(j=>j(!0))}enable(D={}){const w=this._parentMarkedDirty(D.onlySelf);this.status=be,this._forEachChild(j=>{j.enable({...D,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:D.emitEvent}),this._updateAncestors({...D,skipPristineCheck:w}),this._onDisabledChange.forEach(j=>j(!1))}_updateAncestors(D){this._parent&&!D.onlySelf&&(this._parent.updateValueAndValidity(D),D.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(D){this._parent=D}getRawValue(){return this.value}updateValueAndValidity(D={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===be||this.status===Ge)&&this._runAsyncValidator(D.emitEvent)),!1!==D.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!D.onlySelf&&this._parent.updateValueAndValidity(D)}_updateTreeValidity(D={emitEvent:!0}){this._forEachChild(w=>w._updateTreeValidity(D)),this.updateValueAndValidity({onlySelf:!0,emitEvent:D.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dt:be}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(D){if(this.asyncValidator){this.status=Ge,this._hasOwnPendingAsyncValidator=!0;const w=Ae(this.asyncValidator(this));this._asyncValidationSubscription=w.subscribe(j=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(j,{emitEvent:D})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(D,w={}){this.errors=D,this._updateControlsErrors(!1!==w.emitEvent)}get(D){let w=D;return null==w||(Array.isArray(w)||(w=w.split(".")),0===w.length)?null:w.reduce((j,le)=>j&&j._find(le),this)}getError(D,w){const j=w?this.get(w):this;return j&&j.errors?j.errors[D]:null}hasError(D,w){return!!this.getError(D,w)}get root(){let D=this;for(;D._parent;)D=D._parent;return D}_updateControlsErrors(D){this.status=this._calculateStatus(),D&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(D)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?dt:this.errors?Ve:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ge)?Ge:this._anyControlsHaveStatus(Ve)?Ve:be}_anyControlsHaveStatus(D){return this._anyControls(w=>w.status===D)}_anyControlsDirty(){return this._anyControls(D=>D.dirty)}_anyControlsTouched(){return this._anyControls(D=>D.touched)}_updatePristine(D={}){this.pristine=!this._anyControlsDirty(),this._parent&&!D.onlySelf&&this._parent._updatePristine(D)}_updateTouched(D={}){this.touched=this._anyControlsTouched(),this._parent&&!D.onlySelf&&this._parent._updateTouched(D)}_registerOnCollectionChange(D){this._onCollectionChange=D}_setUpdateStrategy(D){di(D)&&null!=D.updateOn&&(this._updateOn=D.updateOn)}_parentMarkedDirty(D){return!D&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(D){return null}_assignValidators(D){this._rawValidators=Array.isArray(D)?D.slice():D,this._composedValidatorFn=function wn(R){return Array.isArray(R)?oi(R):R||null}(this._rawValidators)}_assignAsyncValidators(D){this._rawAsyncValidators=Array.isArray(D)?D.slice():D,this._composedAsyncValidatorFn=function hr(R){return Array.isArray(R)?wa(R):R||null}(this._rawAsyncValidators)}}class Bn extends nr{constructor(D,w,j){super(St(w),Ut(j,w)),this.controls=D,this._initObservables(),this._setUpdateStrategy(w),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(D,w){return this.controls[D]?this.controls[D]:(this.controls[D]=w,w.setParent(this),w._registerOnCollectionChange(this._onCollectionChange),w)}addControl(D,w,j={}){this.registerControl(D,w),this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}removeControl(D,w={}){this.controls[D]&&this.controls[D]._registerOnCollectionChange(()=>{}),delete this.controls[D],this.updateValueAndValidity({emitEvent:w.emitEvent}),this._onCollectionChange()}setControl(D,w,j={}){this.controls[D]&&this.controls[D]._registerOnCollectionChange(()=>{}),delete this.controls[D],w&&this.registerControl(D,w),this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}contains(D){return this.controls.hasOwnProperty(D)&&this.controls[D].enabled}setValue(D,w={}){Di(this,0,D),Object.keys(D).forEach(j=>{Kr(this,!0,j),this.controls[j].setValue(D[j],{onlySelf:!0,emitEvent:w.emitEvent})}),this.updateValueAndValidity(w)}patchValue(D,w={}){null!=D&&(Object.keys(D).forEach(j=>{const le=this.controls[j];le&&le.patchValue(D[j],{onlySelf:!0,emitEvent:w.emitEvent})}),this.updateValueAndValidity(w))}reset(D={},w={}){this._forEachChild((j,le)=>{j.reset(D[le],{onlySelf:!0,emitEvent:w.emitEvent})}),this._updatePristine(w),this._updateTouched(w),this.updateValueAndValidity(w)}getRawValue(){return this._reduceChildren({},(D,w,j)=>(D[j]=w.getRawValue(),D))}_syncPendingControls(){let D=this._reduceChildren(!1,(w,j)=>!!j._syncPendingControls()||w);return D&&this.updateValueAndValidity({onlySelf:!0}),D}_forEachChild(D){Object.keys(this.controls).forEach(w=>{const j=this.controls[w];j&&D(j,w)})}_setUpControls(){this._forEachChild(D=>{D.setParent(this),D._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(D){for(const[w,j]of Object.entries(this.controls))if(this.contains(w)&&D(j))return!0;return!1}_reduceValue(){return this._reduceChildren({},(w,j,le)=>((j.enabled||this.disabled)&&(w[le]=j.value),w))}_reduceChildren(D,w){let j=D;return this._forEachChild((le,Ke)=>{j=w(j,le,Ke)}),j}_allControlsDisabled(){for(const D of Object.keys(this.controls))if(this.controls[D].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(D){return this.controls.hasOwnProperty(D)?this.controls[D]:null}}class ja extends Bn{}const Zi=new y.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Oi}),Oi="always";function Io(R,D,w=Oi){Co(R,D),D.valueAccessor.writeValue(R.value),(R.disabled||"always"===w)&&D.valueAccessor.setDisabledState?.(R.disabled),function ps(R,D){D.valueAccessor.registerOnChange(w=>{R._pendingValue=w,R._pendingChange=!0,R._pendingDirty=!0,"change"===R.updateOn&&sa(R,D)})}(R,D),function $a(R,D){const w=(j,le)=>{D.valueAccessor.writeValue(j),le&&D.viewToModelUpdate(j)};R.registerOnChange(w),D._registerOnDestroy(()=>{R._unregisterOnChange(w)})}(R,D),function bu(R,D){D.valueAccessor.registerOnTouched(()=>{R._pendingTouched=!0,"blur"===R.updateOn&&R._pendingChange&&sa(R,D),"submit"!==R.updateOn&&R.markAsTouched()})}(R,D),function oo(R,D){if(D.valueAccessor.setDisabledState){const w=j=>{D.valueAccessor.setDisabledState(j)};R.registerOnDisabledChange(w),D._registerOnDestroy(()=>{R._unregisterOnDisabledChange(w)})}}(R,D)}function Rs(R,D,w=!0){const j=()=>{};D.valueAccessor&&(D.valueAccessor.registerOnChange(j),D.valueAccessor.registerOnTouched(j)),zs(R,D),R&&(D._invokeOnDestroyCallbacks(),R._registerOnCollectionChange(()=>{}))}function ia(R,D){R.forEach(w=>{w.registerOnValidatorChange&&w.registerOnValidatorChange(D)})}function Co(R,D){const w=wo(R);null!==D.validator?R.setValidators(mr(w,D.validator)):"function"==typeof w&&R.setValidators([w]);const j=Ea(R);null!==D.asyncValidator?R.setAsyncValidators(mr(j,D.asyncValidator)):"function"==typeof j&&R.setAsyncValidators([j]);const le=()=>R.updateValueAndValidity();ia(D._rawValidators,le),ia(D._rawAsyncValidators,le)}function zs(R,D){let w=!1;if(null!==R){if(null!==D.validator){const le=wo(R);if(Array.isArray(le)&&le.length>0){const Ke=le.filter(sn=>sn!==D.validator);Ke.length!==le.length&&(w=!0,R.setValidators(Ke))}}if(null!==D.asyncValidator){const le=Ea(R);if(Array.isArray(le)&&le.length>0){const Ke=le.filter(sn=>sn!==D.asyncValidator);Ke.length!==le.length&&(w=!0,R.setAsyncValidators(Ke))}}}const j=()=>{};return ia(D._rawValidators,j),ia(D._rawAsyncValidators,j),w}function sa(R,D){R._pendingDirty&&R.markAsDirty(),R.setValue(R._pendingValue,{emitModelToViewChange:!1}),D.viewToModelUpdate(R._pendingValue),R._pendingChange=!1}function gs(R,D){const w=R.indexOf(D);w>-1&&R.splice(w,1)}function Sr(R){return"object"==typeof R&&null!==R&&2===Object.keys(R).length&&"value"in R&&"disabled"in R}const uo=class extends nr{constructor(D=null,w,j){super(St(w),Ut(j,w)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(D),this._setUpdateStrategy(w),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),di(w)&&(w.nonNullable||w.initialValueIsDefault)&&(this.defaultValue=Sr(D)?D.value:D)}setValue(D,w={}){this.value=this._pendingValue=D,this._onChange.length&&!1!==w.emitModelToViewChange&&this._onChange.forEach(j=>j(this.value,!1!==w.emitViewToModelChange)),this.updateValueAndValidity(w)}patchValue(D,w={}){this.setValue(D,w)}reset(D=this.defaultValue,w={}){this._applyFormState(D),this.markAsPristine(w),this.markAsUntouched(w),this.setValue(this.value,w),this._pendingChange=!1}_updateValue(){}_anyControls(D){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(D){this._onChange.push(D)}_unregisterOnChange(D){gs(this._onChange,D)}registerOnDisabledChange(D){this._onDisabledChange.push(D)}_unregisterOnDisabledChange(D){gs(this._onDisabledChange,D)}_forEachChild(D){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(D){Sr(D)?(this.value=this._pendingValue=D.value,D.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=D}};let kn=(()=>{class R{}return R.\u0275fac=function(w){return new(w||R)},R.\u0275dir=y.lG2({type:R,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),R})(),Go=(()=>{class R{}return R.\u0275fac=function(w){return new(w||R)},R.\u0275mod=y.oAB({type:R}),R.\u0275inj=y.cJS({}),R})();const Es=new y.OlP("NgModelWithFormControlWarning"),Da={provide:Ln,useExisting:(0,y.Gpc)(()=>co)};let co=(()=>{class R extends Ln{constructor(w,j,le){super(),this.callSetDisabledState=le,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(w),this._setAsyncValidators(j)}ngOnChanges(w){this._checkFormPresent(),w.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zs(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(w){const j=this.form.get(w.path);return Io(j,w,this.callSetDisabledState),j.updateValueAndValidity({emitEvent:!1}),this.directives.push(w),j}getControl(w){return this.form.get(w.path)}removeControl(w){Rs(w.control||null,w,!1),function ao(R,D){const w=R.indexOf(D);w>-1&&R.splice(w,1)}(this.directives,w)}addFormGroup(w){this._setUpFormContainer(w)}removeFormGroup(w){this._cleanUpFormContainer(w)}getFormGroup(w){return this.form.get(w.path)}addFormArray(w){this._setUpFormContainer(w)}removeFormArray(w){this._cleanUpFormContainer(w)}getFormArray(w){return this.form.get(w.path)}updateModel(w,j){this.form.get(w.path).setValue(j)}onSubmit(w){return this.submitted=!0,function Ai(R,D){R._syncPendingControls(),D.forEach(w=>{const j=w.control;"submit"===j.updateOn&&j._pendingChange&&(w.viewToModelUpdate(j._pendingValue),j._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(w),"dialog"===w?.target?.method}onReset(){this.resetForm()}resetForm(w){this.form.reset(w),this.submitted=!1}_updateDomValue(){this.directives.forEach(w=>{const j=w.control,le=this.form.get(w.path);j!==le&&(Rs(j||null,w),(R=>R instanceof uo)(le)&&(Io(le,w,this.callSetDisabledState),w.control=le))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(w){const j=this.form.get(w.path);(function ui(R,D){Co(R,D)})(j,w),j.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(w){if(this.form){const j=this.form.get(w.path);j&&function Hn(R,D){return zs(R,D)}(j,w)&&j.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Co(this.form,this),this._oldForm&&zs(this._oldForm,this)}_checkFormPresent(){}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(qt,10),y.Y36(Dn,10),y.Y36(Zi,8))},R.\u0275dir=y.lG2({type:R,selectors:[["","formGroup",""]],hostBindings:function(w,j){1&w&&y.NdJ("submit",function(Ke){return j.onSubmit(Ke)})("reset",function(){return j.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([Da]),y.qOj,y.TTD]}),R})();const zo={provide:br,useExisting:(0,y.Gpc)(()=>Wo)};let Wo=(()=>{class R extends br{set isDisabled(w){}constructor(w,j,le,Ke,sn){super(),this._ngModelWarningConfig=sn,this._added=!1,this.update=new y.vpe,this._ngModelWarningSent=!1,this._parent=w,this._setValidators(j),this._setAsyncValidators(le),this.valueAccessor=function Ws(R,D){if(!D)return null;let w,j,le;return Array.isArray(D),D.forEach(Ke=>{Ke.constructor===xt?w=Ke:function Bo(R){return Object.getPrototypeOf(R.constructor)===Tr}(Ke)?j=Ke:le=Ke}),le||j||w||null}(0,Ke)}ngOnChanges(w){this._added||this._setUpControl(),function Bi(R,D){if(!R.hasOwnProperty("model"))return!1;const w=R.model;return!!w.isFirstChange()||!Object.is(D,w.currentValue)}(w,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(w){this.viewModel=w,this.update.emit(w)}get path(){return function Si(R,D){return[...D.path,R]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return R._ngModelWarningSentOnce=!1,R.\u0275fac=function(w){return new(w||R)(y.Y36(Ln,13),y.Y36(qt,10),y.Y36(Dn,10),y.Y36(qr,10),y.Y36(Es,8))},R.\u0275dir=y.lG2({type:R,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[y._Bn([zo]),y.qOj,y.TTD]}),R})(),Ls=(()=>{class R{constructor(){this._validator=ye}ngOnChanges(w){if(this.inputName in w){const j=this.normalizeInput(w[this.inputName].currentValue);this._enabled=this.enabled(j),this._validator=this._enabled?this.createValidator(j):ye,this._onChange&&this._onChange()}}validate(w){return this._validator(w)}registerOnValidatorChange(w){this._onChange=w}enabled(w){return null!=w}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275dir=y.lG2({type:R,features:[y.TTD]}),R})();const Du={provide:qt,useExisting:(0,y.Gpc)(()=>Ao),multi:!0};let Ao=(()=>{class R extends Ls{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=y.D6c,this.createValidator=w=>st}enabled(w){return w}}return R.\u0275fac=function(){let D;return function(j){return(D||(D=y.n5z(R)))(j||R)}}(),R.\u0275dir=y.lG2({type:R,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(w,j){2&w&&y.uIk("required",j._enabled?"":null)},inputs:{required:"required"},features:[y._Bn([Du]),y.qOj]}),R})(),Ma=(()=>{class R{}return R.\u0275fac=function(w){return new(w||R)},R.\u0275mod=y.oAB({type:R}),R.\u0275inj=y.cJS({imports:[Go]}),R})();class ho extends nr{constructor(D,w,j){super(St(w),Ut(j,w)),this.controls=D,this._initObservables(),this._setUpdateStrategy(w),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(D){return this.controls[this._adjustIndex(D)]}push(D,w={}){this.controls.push(D),this._registerControl(D),this.updateValueAndValidity({emitEvent:w.emitEvent}),this._onCollectionChange()}insert(D,w,j={}){this.controls.splice(D,0,w),this._registerControl(w),this.updateValueAndValidity({emitEvent:j.emitEvent})}removeAt(D,w={}){let j=this._adjustIndex(D);j<0&&(j=0),this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),this.controls.splice(j,1),this.updateValueAndValidity({emitEvent:w.emitEvent})}setControl(D,w,j={}){let le=this._adjustIndex(D);le<0&&(le=0),this.controls[le]&&this.controls[le]._registerOnCollectionChange(()=>{}),this.controls.splice(le,1),w&&(this.controls.splice(le,0,w),this._registerControl(w)),this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(D,w={}){Di(this,0,D),D.forEach((j,le)=>{Kr(this,!1,le),this.at(le).setValue(j,{onlySelf:!0,emitEvent:w.emitEvent})}),this.updateValueAndValidity(w)}patchValue(D,w={}){null!=D&&(D.forEach((j,le)=>{this.at(le)&&this.at(le).patchValue(j,{onlySelf:!0,emitEvent:w.emitEvent})}),this.updateValueAndValidity(w))}reset(D=[],w={}){this._forEachChild((j,le)=>{j.reset(D[le],{onlySelf:!0,emitEvent:w.emitEvent})}),this._updatePristine(w),this._updateTouched(w),this.updateValueAndValidity(w)}getRawValue(){return this.controls.map(D=>D.getRawValue())}clear(D={}){this.controls.length<1||(this._forEachChild(w=>w._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:D.emitEvent}))}_adjustIndex(D){return D<0?D+this.length:D}_syncPendingControls(){let D=this.controls.reduce((w,j)=>!!j._syncPendingControls()||w,!1);return D&&this.updateValueAndValidity({onlySelf:!0}),D}_forEachChild(D){this.controls.forEach((w,j)=>{D(w,j)})}_updateValue(){this.value=this.controls.filter(D=>D.enabled||this.disabled).map(D=>D.value)}_anyControls(D){return this.controls.some(w=>w.enabled&&D(w))}_setUpControls(){this._forEachChild(D=>this._registerControl(D))}_allControlsDisabled(){for(const D of this.controls)if(D.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(D){D.setParent(this),D._registerOnCollectionChange(this._onCollectionChange)}_find(D){return this.at(D)??null}}function L(R){return!!R&&(void 0!==R.asyncValidators||void 0!==R.validators||void 0!==R.updateOn)}let Q=(()=>{class R{constructor(){this.useNonNullable=!1}get nonNullable(){const w=new R;return w.useNonNullable=!0,w}group(w,j=null){const le=this._reduceControls(w);let Ke={};return L(j)?Ke=j:null!==j&&(Ke.validators=j.validator,Ke.asyncValidators=j.asyncValidator),new Bn(le,Ke)}record(w,j=null){const le=this._reduceControls(w);return new ja(le,j)}control(w,j,le){let Ke={};return this.useNonNullable?(L(j)?Ke=j:(Ke.validators=j,Ke.asyncValidators=le),new uo(w,{...Ke,nonNullable:!0})):new uo(w,j,le)}array(w,j,le){const Ke=w.map(sn=>this._createControl(sn));return new ho(Ke,j,le)}_reduceControls(w){const j={};return Object.keys(w).forEach(le=>{j[le]=this._createControl(w[le])}),j}_createControl(w){return w instanceof uo||w instanceof nr?w:Array.isArray(w)?this.control(w[0],w.length>1?w[1]:null,w.length>2?w[2]:null):this.control(w)}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275prov=y.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),Vt=(()=>{class R{static withConfig(w){return{ngModule:R,providers:[{provide:Zi,useValue:w.callSetDisabledState??Oi}]}}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275mod=y.oAB({type:R}),R.\u0275inj=y.cJS({imports:[Ma]}),R})(),Xn=(()=>{class R{static withConfig(w){return{ngModule:R,providers:[{provide:Es,useValue:w.warnOnNgModelWithFormControl??"always"},{provide:Zi,useValue:w.callSetDisabledState??Oi}]}}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275mod=y.oAB({type:R}),R.\u0275inj=y.cJS({imports:[Ma]}),R})();function Yn(R,D){if(1&R){const w=y.EpF();y.TgZ(0,"a",12),y.NdJ("keyup.enter",function(){y.CHM(w),y.oxw(3);const le=y.MAs(1);return y.KtG(le.previous())})("click",function(){y.CHM(w),y.oxw(3);const le=y.MAs(1);return y.KtG(le.previous())}),y._uU(1),y.TgZ(2,"span",13),y._uU(3),y.qZA()()}if(2&R){const w=y.oxw(3);y.xp6(1),y.hij(" ",w.previousLabel," "),y.xp6(2),y.Oqu(w.screenReaderPageLabel)}}function ur(R,D){if(1&R&&(y.TgZ(0,"span",14),y._uU(1),y.TgZ(2,"span",13),y._uU(3),y.qZA()()),2&R){const w=y.oxw(3);y.xp6(1),y.hij(" ",w.previousLabel," "),y.xp6(2),y.Oqu(w.screenReaderPageLabel)}}function jn(R,D){if(1&R&&(y.TgZ(0,"li",9),y.YNc(1,Yn,4,2,"a",10),y.YNc(2,ur,4,2,"span",11),y.qZA()),2&R){y.oxw(2);const w=y.MAs(1);y.ekj("disabled",w.isFirstPage()),y.xp6(1),y.Q6J("ngIf",1<w.getCurrent()),y.xp6(1),y.Q6J("ngIf",w.isFirstPage())}}function Yr(R,D){if(1&R){const w=y.EpF();y.TgZ(0,"a",12),y.NdJ("keyup.enter",function(){y.CHM(w);const le=y.oxw().$implicit;y.oxw(2);const Ke=y.MAs(1);return y.KtG(Ke.setCurrent(le.value))})("click",function(){y.CHM(w);const le=y.oxw().$implicit;y.oxw(2);const Ke=y.MAs(1);return y.KtG(Ke.setCurrent(le.value))}),y.TgZ(1,"span",13),y._uU(2),y.qZA(),y.TgZ(3,"span"),y._uU(4),y.ALo(5,"number"),y.qZA()()}if(2&R){const w=y.oxw().$implicit,j=y.oxw(2);y.xp6(2),y.hij("",j.screenReaderPageLabel," "),y.xp6(2),y.Oqu("..."===w.label?w.label:y.xi3(5,2,w.label,""))}}function rr(R,D){if(1&R&&(y.ynx(0),y.TgZ(1,"span",16)(2,"span",13),y._uU(3),y.qZA(),y.TgZ(4,"span"),y._uU(5),y.ALo(6,"number"),y.qZA()(),y.BQk()),2&R){const w=y.oxw().$implicit,j=y.oxw(2);y.xp6(3),y.hij("",j.screenReaderCurrentLabel," "),y.xp6(2),y.Oqu("..."===w.label?w.label:y.xi3(6,2,w.label,""))}}function mi(R,D){if(1&R&&(y.TgZ(0,"li"),y.YNc(1,Yr,6,5,"a",10),y.YNc(2,rr,7,5,"ng-container",15),y.qZA()),2&R){const w=D.$implicit;y.oxw(2);const j=y.MAs(1);y.ekj("current",j.getCurrent()===w.value)("ellipsis","..."===w.label),y.xp6(1),y.Q6J("ngIf",j.getCurrent()!==w.value),y.xp6(1),y.Q6J("ngIf",j.getCurrent()===w.value)}}function _r(R,D){if(1&R){const w=y.EpF();y.TgZ(0,"a",12),y.NdJ("keyup.enter",function(){y.CHM(w),y.oxw(3);const le=y.MAs(1);return y.KtG(le.next())})("click",function(){y.CHM(w),y.oxw(3);const le=y.MAs(1);return y.KtG(le.next())}),y._uU(1),y.TgZ(2,"span",13),y._uU(3),y.qZA()()}if(2&R){const w=y.oxw(3);y.xp6(1),y.hij(" ",w.nextLabel," "),y.xp6(2),y.Oqu(w.screenReaderPageLabel)}}function bs(R,D){if(1&R&&(y.TgZ(0,"span",14),y._uU(1),y.TgZ(2,"span",13),y._uU(3),y.qZA()()),2&R){const w=y.oxw(3);y.xp6(1),y.hij(" ",w.nextLabel," "),y.xp6(2),y.Oqu(w.screenReaderPageLabel)}}function Js(R,D){if(1&R&&(y.TgZ(0,"li",17),y.YNc(1,_r,4,2,"a",10),y.YNc(2,bs,4,2,"span",11),y.qZA()),2&R){y.oxw(2);const w=y.MAs(1);y.ekj("disabled",w.isLastPage()),y.xp6(1),y.Q6J("ngIf",!w.isLastPage()),y.xp6(1),y.Q6J("ngIf",w.isLastPage())}}function Yi(R,D){if(1&R&&(y.TgZ(0,"ul",4),y.YNc(1,jn,3,4,"li",5),y.TgZ(2,"li",6),y._uU(3),y.qZA(),y.YNc(4,mi,3,6,"li",7),y.YNc(5,Js,3,4,"li",8),y.qZA()),2&R){const w=y.oxw(),j=y.MAs(1);y.ekj("responsive",w.responsive),y.xp6(1),y.Q6J("ngIf",w.directionLinks),y.xp6(2),y.AsE(" ",j.getCurrent()," / ",j.getLastPage()," "),y.xp6(1),y.Q6J("ngForOf",j.pages)("ngForTrackBy",w.trackByIndex),y.xp6(1),y.Q6J("ngIf",w.directionLinks)}}class Xs{constructor(){this.change=new y.vpe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(D){return null==D.id&&(D.id=this.DEFAULT_ID),this.instances[D.id]?this.updateInstance(D):(this.instances[D.id]=D,!0)}updateInstance(D){let w=!1;for(let j in this.instances[D.id])D[j]!==this.instances[D.id][j]&&(this.instances[D.id][j]=D[j],w=!0);return w}getCurrentPage(D){return this.instances[D]?this.instances[D].currentPage:1}setCurrentPage(D,w){if(this.instances[D]){let j=this.instances[D];w<=Math.ceil(j.totalItems/j.itemsPerPage)&&1<=w&&(this.instances[D].currentPage=w,this.change.emit(D))}}setTotalItems(D,w){this.instances[D]&&0<=w&&(this.instances[D].totalItems=w,this.change.emit(D))}setItemsPerPage(D,w){this.instances[D]&&(this.instances[D].itemsPerPage=w,this.change.emit(D))}getInstance(D=this.DEFAULT_ID){return this.instances[D]?this.clone(this.instances[D]):{}}clone(D){var w={};for(var j in D)D.hasOwnProperty(j)&&(w[j]=D[j]);return w}}const Ra=Number.MAX_SAFE_INTEGER;let xo=(()=>{class R{constructor(w){this.service=w,this.state={}}transform(w,j){if(!(w instanceof Array)){let Ui=j.id||this.service.defaultId();return this.state[Ui]?this.state[Ui].slice:w}let ln,Fr,le=j.totalItems&&j.totalItems!==w.length,Ke=this.createInstance(w,j),sn=Ke.id,Ri=Ke.itemsPerPage,is=this.service.register(Ke);if(!le&&w instanceof Array){if(Ri=+Ri||Ra,ln=(Ke.currentPage-1)*Ri,Fr=ln+Ri,this.stateIsIdentical(sn,w,ln,Fr))return this.state[sn].slice;{let Ro=w.slice(ln,Fr);return this.saveState(sn,w,Ro,ln,Fr),this.service.change.emit(sn),Ro}}return is&&this.service.change.emit(sn),this.saveState(sn,w,w,ln,Fr),w}createInstance(w,j){return this.checkConfig(j),{id:null!=j.id?j.id:this.service.defaultId(),itemsPerPage:+j.itemsPerPage||0,currentPage:+j.currentPage||1,totalItems:+j.totalItems||w.length}}checkConfig(w){const le=["itemsPerPage","currentPage"].filter(Ke=>!(Ke in w));if(0<le.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${le.join(", ")}`)}saveState(w,j,le,Ke,sn){this.state[w]={collection:j,size:j.length,slice:le,start:Ke,end:sn}}stateIsIdentical(w,j,le,Ke){let sn=this.state[w];return!(!sn||sn.size!==j.length||sn.start!==le||sn.end!==Ke)&&sn.slice.every((Fr,Ri)=>Fr===j[le+Ri])}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(Xs,16))},R.\u0275pipe=y.Yjl({name:"paginate",type:R,pure:!1}),R})(),Mo=(()=>{class R{constructor(w,j){this.service=w,this.changeDetectorRef=j,this.maxSize=7,this.pageChange=new y.vpe,this.pageBoundsCorrection=new y.vpe,this.pages=[],this.changeSub=this.service.change.subscribe(le=>{this.id===le&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(w){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return 1===this.getCurrent()}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(w){this.pageChange.emit(w)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let w=this.service.getInstance(this.id);return w.totalItems<1?1:Math.ceil(w.totalItems/w.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){null==this.service.getInstance(this.id).id&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let w=this.service.getInstance(this.id);const j=this.outOfBoundCorrection(w);j!==w.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(j),this.pages=this.createPageArray(w.currentPage,w.itemsPerPage,w.totalItems,this.maxSize)}):this.pages=this.createPageArray(w.currentPage,w.itemsPerPage,w.totalItems,this.maxSize)}outOfBoundCorrection(w){const j=Math.ceil(w.totalItems/w.itemsPerPage);return j<w.currentPage&&0<j?j:w.currentPage<1?1:w.currentPage}createPageArray(w,j,le,Ke){Ke=+Ke;let sn=[];const ln=Math.max(Math.ceil(le/j),1),Fr=Math.ceil(Ke/2),Ri=w<=Fr,is=ln-Fr<w,Ui=!Ri&&!is;let Ro=Ke<ln,fo=1;for(;fo<=ln&&fo<=Ke;){let Qa,Xo=this.calculatePageNumber(fo,w,Ke,ln);Qa=Ro&&(2===fo&&(Ui||is)||fo===Ke-1&&(Ui||Ri))?"...":Xo,sn.push({label:Qa,value:Xo}),fo++}return sn}calculatePageNumber(w,j,le,Ke){let sn=Math.ceil(le/2);return w===le?Ke:1===w?w:le<Ke?Ke-sn<j?Ke-le+w:sn<j?j-sn+w:w:w}}return R.\u0275fac=function(w){return new(w||R)(y.Y36(Xs),y.Y36(y.sBO))},R.\u0275dir=y.lG2({type:R,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[y.TTD]}),R})();function qa(R){return!!R&&"false"!==R}let Ko=(()=>{class R{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new y.vpe,this.pageBoundsCorrection=new y.vpe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(w){this._directionLinks=qa(w)}get autoHide(){return this._autoHide}set autoHide(w){this._autoHide=qa(w)}get responsive(){return this._responsive}set responsive(w){this._responsive=qa(w)}trackByIndex(w){return w}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275cmp=y.Xpm({type:R,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(w,j){if(1&w&&(y.TgZ(0,"pagination-template",0,1),y.NdJ("pageChange",function(Ke){return j.pageChange.emit(Ke)})("pageBoundsCorrection",function(Ke){return j.pageBoundsCorrection.emit(Ke)}),y.TgZ(2,"nav",2),y.YNc(3,Yi,6,8,"ul",3),y.qZA()()),2&w){const le=y.MAs(1);y.Q6J("id",j.id)("maxSize",j.maxSize),y.xp6(2),y.uIk("aria-label",j.screenReaderPaginationLabel),y.xp6(1),y.Q6J("ngIf",!(j.autoHide&&le.pages.length<=1))}},dependencies:[Mo,A.O5,A.sg,A.JJ],styles:['.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}\n'],encapsulation:2,changeDetection:0}),R})(),Yo=(()=>{class R{}return R.\u0275fac=function(w){return new(w||R)},R.\u0275mod=y.oAB({type:R}),R.\u0275inj=y.cJS({providers:[Xs],imports:[[A.ez]]}),R})();var Ts=Y(9051),xu=Y(5197);class Ei{constructor(D){this.db=D}AddStudent(D){this.studentsRef.push({firstName:D.firstName,lastName:D.lastName,email:D.email,mobileNumber:D.mobileNumber})}GetStudent(D){return this.studentRef=this.db.object("students-list/"+D),this.studentRef}GetStudentsList(){return this.studentsRef=this.db.list("students-list"),this.studentsRef}UpdateStudent(D){this.studentRef.update({firstName:D.firstName,lastName:D.lastName,email:D.email,mobileNumber:D.mobileNumber})}DeleteStudent(D){this.studentRef=this.db.object("students-list/"+D),this.studentRef.remove()}}function ua(R,D){1&R&&(y.TgZ(0,"p",14)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please enter atleast first name "),y.qZA())}function Qo(R,D){1&R&&(y.TgZ(0,"p",14)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Name shouldn't be less than 2 words "),y.qZA())}function Jo(R,D){1&R&&(y.TgZ(0,"p",14)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please provide email "),y.qZA())}function la(R,D){1&R&&(y.TgZ(0,"p",14)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please enter correct email "),y.qZA())}function cu(R,D){1&R&&(y.TgZ(0,"p",14)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please provide contact number "),y.qZA())}function ca(R,D){1&R&&(y.TgZ(0,"p",14)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Use numbers only number "),y.qZA())}Ei.\u0275fac=function(D){return new(D||Ei)(y.LFG(xu.KQ))},Ei.\u0275prov=y.Yz7({token:Ei,factory:Ei.\u0275fac,providedIn:"root"});class Na{constructor(D,w,j){this.crudApi=D,this.fb=w,this.toastr=j}ngOnInit(){this.crudApi.GetStudentsList(),this.studenForm()}studenForm(){this.studentForm=this.fb.group({firstName:["",[pe.required,pe.minLength(2)]],lastName:[""],email:["",[pe.required,pe.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],mobileNumber:["",[pe.required,pe.pattern("^[0-9]+$")]]})}get firstName(){return this.studentForm.get("firstName")}get lastName(){return this.studentForm.get("lastName")}get email(){return this.studentForm.get("email")}get mobileNumber(){return this.studentForm.get("mobileNumber")}ResetForm(){this.studentForm.reset()}submitStudentData(){this.crudApi.AddStudent(this.studentForm.value),this.toastr.success(this.studentForm.controls.firstName.value+" successfully added!"),this.ResetForm()}}function Pa(R,D){1&R&&(y.TgZ(0,"p",18)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please enter firstname "),y.qZA())}function du(R,D){1&R&&(y.TgZ(0,"p",18)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Name shouldn't be less than 2 words "),y.qZA())}function Ku(R,D){1&R&&(y.TgZ(0,"p",18)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please provide email "),y.qZA())}function to(R,D){1&R&&(y.TgZ(0,"p",18)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please enter correct email "),y.qZA())}function Za(R,D){1&R&&(y.TgZ(0,"p",18)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Please provide contact number "),y.qZA())}function Mu(R,D){1&R&&(y.TgZ(0,"p",18)(1,"sup"),y._uU(2,"*"),y.qZA(),y._uU(3,"Use numbers only number "),y.qZA())}Na.\u0275fac=function(D){return new(D||Na)(y.Y36(Ei),y.Y36(Q),y.Y36(Xt))},Na.\u0275cmp=y.Xpm({type:Na,selectors:[["app-add-student"]],decls:35,vars:8,consts:[[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2","first-text"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","firstName","required","",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["type","text","formControlName","mobileNumber","required","",1,"form-control"],[1,"form-group","text-right"],["type","button",1,"btn","btn-secondary","gap-right",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"error"]],template:function(D,w){1&D&&(y.TgZ(0,"div",0)(1,"h2",1),y._uU(2,"Add Member"),y.qZA()(),y.TgZ(3,"form",2),y.NdJ("ngSubmit",function(){return w.submitStudentData()}),y.TgZ(4,"div",3)(5,"div",4)(6,"div",3)(7,"div",5)(8,"label"),y._uU(9,"First name"),y.qZA(),y._UZ(10,"input",6),y.YNc(11,ua,4,0,"p",7),y.YNc(12,Qo,4,0,"p",7),y.qZA(),y.TgZ(13,"div",5)(14,"label"),y._uU(15,"Last name"),y.qZA(),y._UZ(16,"input",8),y.qZA()(),y.TgZ(17,"div",3)(18,"div",5)(19,"label"),y._uU(20,"Email"),y.qZA(),y._UZ(21,"input",9),y.YNc(22,Jo,4,0,"p",7),y.YNc(23,la,4,0,"p",7),y.qZA(),y.TgZ(24,"div",5)(25,"label"),y._uU(26,"Mobile number"),y.qZA(),y._UZ(27,"input",10),y.YNc(28,cu,4,0,"p",7),y.YNc(29,ca,4,0,"p",7),y.qZA()(),y.TgZ(30,"div",11)(31,"button",12),y.NdJ("click",function(){return w.ResetForm()}),y._uU(32," Reset "),y.qZA(),y.TgZ(33,"button",13),y._uU(34," Add Member "),y.qZA()()()()()),2&D&&(y.xp6(3),y.Q6J("formGroup",w.studentForm),y.xp6(8),y.Q6J("ngIf",w.firstName.touched&&w.firstName.invalid),y.xp6(1),y.Q6J("ngIf",null==w.firstName.errors?null:w.firstName.errors.minlength),y.xp6(10),y.Q6J("ngIf",w.email.touched&&w.email.invalid),y.xp6(1),y.Q6J("ngIf",null==w.email.errors?null:w.email.errors.pattern),y.xp6(5),y.Q6J("ngIf",w.mobileNumber.touched&&w.mobileNumber.invalid),y.xp6(1),y.Q6J("ngIf",null==w.mobileNumber.errors?null:w.mobileNumber.errors.pattern),y.xp6(4),y.Q6J("disabled",!w.studentForm.valid))},dependencies:[A.O5,kn,xt,cr,vi,Ao,co,Wo],styles:[".first-text[_ngcontent-%COMP%]{font-family:Lucida Sans Regular;font-size:26px}"]});class Nr{constructor(D,w,j,le,Ke,sn){this.crudApi=D,this.fb=w,this.location=j,this.actRoute=le,this.router=Ke,this.toastr=sn}ngOnInit(){this.updateStudentData();const D=this.actRoute.snapshot.paramMap.get("id");this.crudApi.GetStudent(D).valueChanges().subscribe(w=>{this.editForm.setValue(w)})}get firstName(){return this.editForm.get("firstName")}get lastName(){return this.editForm.get("lastName")}get email(){return this.editForm.get("email")}get mobileNumber(){return this.editForm.get("mobileNumber")}updateStudentData(){this.editForm=this.fb.group({firstName:["",[pe.required,pe.minLength(2)]],lastName:[""],email:["",[pe.required,pe.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],mobileNumber:["",[pe.required,pe.pattern("^[0-9]+$")]]})}goBack(){this.location.back()}updateForm(){this.crudApi.UpdateStudent(this.editForm.value),this.toastr.success(this.editForm.controls.firstName.value+" updated successfully"),this.router.navigate(["view-students"])}}Nr.\u0275fac=function(D){return new(D||Nr)(y.Y36(Ei),y.Y36(Q),y.Y36(A.Ye),y.Y36(Ts.gz),y.Y36(Ts.F0),y.Y36(Xt))},Nr.\u0275cmp=y.Xpm({type:Nr,selectors:[["app-edit-student"]],decls:40,vars:8,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],[1,"btn-toolbar","mb-2","mb-md-0"],[1,"btn-group"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"row"],[1,"col-lg-12"],[1,"pricing-header","form-block","mx-auto"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","firstName","required","",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["type","text","formControlName","mobileNumber","required","",1,"form-control"],[1,"form-group","text-right"],["type","submit",1,"btn","btn-success","btn-block",3,"disabled"],[1,"error"]],template:function(D,w){1&D&&(y.TgZ(0,"div",0)(1,"h1",1),y._uU(2,"Edit Student Details"),y.qZA(),y.TgZ(3,"div",2)(4,"div",3)(5,"button",4),y.NdJ("click",function(){return w.goBack()}),y._uU(6," Go Back "),y.qZA()()()(),y.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"form",8),y.NdJ("ngSubmit",function(){return w.updateForm()}),y.TgZ(11,"div",5)(12,"div",9)(13,"div",5)(14,"div",10)(15,"label"),y._uU(16,"First name"),y.qZA(),y._UZ(17,"input",11),y.YNc(18,Pa,4,0,"p",12),y.YNc(19,du,4,0,"p",12),y.qZA(),y.TgZ(20,"div",10)(21,"label"),y._uU(22,"Last name"),y.qZA(),y._UZ(23,"input",13),y.qZA()(),y.TgZ(24,"div",5)(25,"div",10)(26,"label"),y._uU(27,"Email"),y.qZA(),y._UZ(28,"input",14),y.YNc(29,Ku,4,0,"p",12),y.YNc(30,to,4,0,"p",12),y.qZA(),y.TgZ(31,"div",10)(32,"label"),y._uU(33,"Mobile number"),y.qZA(),y._UZ(34,"input",15),y.YNc(35,Za,4,0,"p",12),y.YNc(36,Mu,4,0,"p",12),y.qZA()(),y.TgZ(37,"div",16)(38,"button",17),y._uU(39," Update Student "),y.qZA()()()()()()()()),2&D&&(y.xp6(10),y.Q6J("formGroup",w.editForm),y.xp6(8),y.Q6J("ngIf",w.firstName.touched&&w.firstName.invalid),y.xp6(1),y.Q6J("ngIf",null==w.firstName.errors?null:w.firstName.errors.minlength),y.xp6(10),y.Q6J("ngIf",w.email.touched&&w.email.invalid),y.xp6(1),y.Q6J("ngIf",null==w.email.errors?null:w.email.errors.pattern),y.xp6(5),y.Q6J("ngIf",w.mobileNumber.touched&&w.mobileNumber.invalid),y.xp6(1),y.Q6J("ngIf",null==w.mobileNumber.errors?null:w.mobileNumber.errors.pattern),y.xp6(2),y.Q6J("disabled",!w.editForm.valid))},dependencies:[A.O5,kn,xt,cr,vi,Ao,co,Wo]});class da{constructor(){this.title="myApp"}}function Oa(R,D){1&R&&(y.TgZ(0,"a",7),y._uU(1," Add Member "),y.qZA())}function kr(R,D){1&R&&(y.TgZ(0,"div",8),y._UZ(1,"img",9),y.qZA())}function Pr(R,D){1&R&&(y.TgZ(0,"div",8),y._UZ(1,"img",10),y.TgZ(2,"p",11),y._uU(3,"No Member added yet!"),y.qZA(),y.TgZ(4,"a",7),y._uU(5," Add Member "),y.qZA()())}function hu(R,D){if(1&R){const w=y.EpF();y.TgZ(0,"tr")(1,"th",17),y._uU(2),y.qZA(),y.TgZ(3,"td"),y._uU(4),y.qZA(),y.TgZ(5,"td"),y._uU(6),y.qZA(),y.TgZ(7,"td"),y._uU(8),y.qZA(),y.TgZ(9,"td",18)(10,"span",19),y._uU(11,"Edit"),y.qZA(),y.TgZ(12,"span",20),y.NdJ("click",function(){const Ke=y.CHM(w).$implicit,sn=y.oxw(2);return y.KtG(sn.deleteStudent(Ke))}),y._uU(13,"Delete"),y.qZA()()()}if(2&R){const w=D.$implicit,j=D.index;y.xp6(2),y.Oqu(j),y.xp6(2),y.AsE("",w.firstName," ",w.lastName,""),y.xp6(2),y.Oqu(w.email),y.xp6(2),y.Oqu(w.mobileNumber),y.xp6(2),y.MGl("routerLink","/edit-student/",w.$key,"")}}da.\u0275fac=function(D){return new(D||da)},da.\u0275cmp=y.Xpm({type:da,selectors:[["app-infoblink"]],decls:25,vars:0,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],["routerLink","/documentation",1,"navbar-brand","col-sm-3","col-md-2","mr-0"],[1,"dasboard-text","first-text"],[1,"navbar-nav","px-3"],[1,"nav-item","text-nowrap"],["routerLink","/register-student",1,"nav-link","second-text"],[1,"user-image",2,"background-image","url('assets/user1.png')"],[1,"container-fluid"],[1,"row"],[1,"col-2","col-lg-2","col-mg-2"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item","third-text"],["routerLink","/register-student","routerLinkActive","active",1,"nav-link"],["routerLink","/view-students","routerLinkActive","active",1,"nav-link"],[1,"col-10","col-lg-10","col-mg-10"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"]],template:function(D,w){1&D&&(y.TgZ(0,"nav",0)(1,"a",1)(2,"span",2),y._uU(3,"InfoBlink"),y.qZA()(),y.TgZ(4,"ul",3)(5,"li",4)(6,"a",5),y._UZ(7,"span",6),y._uU(8," Hello Rupam "),y.qZA()()()(),y.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"nav",10)(13,"div",11)(14,"ul",12)(15,"li",13)(16,"a",14),y._uU(17," Add Member "),y.qZA()(),y.TgZ(18,"li",13)(19,"a",15),y._uU(20," Members List "),y.qZA()()()()()(),y.TgZ(21,"div",16)(22,"main",17)(23,"div",18),y._UZ(24,"router-outlet"),y.qZA()()()()())},dependencies:[Ts.lC,Ts.rH,Ts.Od],styles:[".first-text[_ngcontent-%COMP%]{color:#fff;font-family:Lucida Sans;font-size:26px}.second-text[_ngcontent-%COMP%]{color:#fff;font-family:Lucida Sans Regular;font-size:16px}.third-text[_ngcontent-%COMP%]{font-family:Lucida Sans Regular;font-size:18px;margin-top:18px;margin-bottom:18px}"]});const Vu=function(R){return{itemsPerPage:8,currentPage:R}};function ul(R,D){if(1&R&&(y.TgZ(0,"div",12)(1,"table",13)(2,"thead")(3,"tr")(4,"th",14),y._uU(5,"Member Id"),y.qZA(),y.TgZ(6,"th",14),y._uU(7,"Member name"),y.qZA(),y.TgZ(8,"th",14),y._uU(9,"Email"),y.qZA(),y.TgZ(10,"th",14),y._uU(11,"Mobile number"),y.qZA(),y.TgZ(12,"th",15),y._uU(13,"Edit"),y.qZA()()(),y.TgZ(14,"tbody"),y.YNc(15,hu,14,6,"tr",16),y.ALo(16,"paginate"),y.qZA()()()),2&R){const w=y.oxw();y.xp6(15),y.Q6J("ngForOf",y.xi3(16,1,w.Student,y.VKq(4,Vu,w.p)))}}class Ka{constructor(D,w){this.crudApi=D,this.toastr=w,this.p=1,this.hideWhenNoStudent=!1,this.noData=!1,this.preLoader=!0}ngOnInit(){this.dataState(),this.crudApi.GetStudentsList().snapshotChanges().subscribe(w=>{this.Student=[],w.forEach(j=>{let le=j.payload.toJSON();this.Student.push(le)})})}dataState(){this.crudApi.GetStudentsList().valueChanges().subscribe(D=>{this.preLoader=!1,D.length<=0?(this.hideWhenNoStudent=!1,this.noData=!0):(this.hideWhenNoStudent=!0,this.noData=!1)})}deleteStudent(D){window.confirm("Are sure you want to delete this student ?")&&(this.crudApi.DeleteStudent(D.$key),this.toastr.success(D.firstName+" successfully deleted!"))}}Ka.\u0275fac=function(D){return new(D||Ka)(y.Y36(Ei),y.Y36(Xt))},Ka.\u0275cmp=y.Xpm({type:Ka,selectors:[["app-student-list"]],decls:9,vars:4,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2","first-text"],["routerLink","/register-student","class","btn btn-success",4,"ngIf"],[1,"pricing-header","mx-auto"],["class","no-data text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],[3,"pageChange"],["routerLink","/register-student",1,"btn","btn-success"],[1,"no-data","text-center"],["src","assets/preloader.gif","alt","No student",1,"preloader-icon"],["src","assets/no-student.svg","alt","No student",1,"nodata-msg"],[1,"nodata-msg"],[1,"table-responsive"],[1,"table","table-bordered","table-responsive-sm","table-responsive-md","table-responsive-lg"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["scope","row"],[1,"text-center","action-block"],[1,"mr-2","btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm",3,"click"]],template:function(D,w){1&D&&(y.TgZ(0,"div",0)(1,"h2",1),y._uU(2,"Members List"),y.qZA(),y.YNc(3,Oa,2,0,"a",2),y.qZA(),y.TgZ(4,"div",3),y.YNc(5,kr,2,0,"div",4),y.YNc(6,Pr,6,0,"div",4),y.YNc(7,ul,17,6,"div",5),y.TgZ(8,"pagination-controls",6),y.NdJ("pageChange",function(le){return w.p=le}),y.qZA()()),2&D&&(y.xp6(3),y.Q6J("ngIf",w.hideWhenNoStudent),y.xp6(2),y.Q6J("ngIf",w.preLoader),y.xp6(1),y.Q6J("ngIf",w.noData),y.xp6(1),y.Q6J("ngIf",w.hideWhenNoStudent))},dependencies:[A.sg,A.O5,Ko,Ts.rH,xo],styles:[".first-text[_ngcontent-%COMP%]{font-family:Lucida Sans Regular;font-size:26px}"]});const Ya=[{path:"",component:da,children:[{path:"register-student",component:Na},{path:"view-students",component:Ka},{path:"edit-student/:id",component:Nr}]}];class ha{}ha.\u0275fac=function(D){return new(D||ha)},ha.\u0275mod=y.oAB({type:ha}),ha.\u0275inj=y.cJS({imports:[Ts.Bz.forChild(Ya),Ts.Bz]});class Qi{}Qi.\u0275fac=function(D){return new(D||Qi)},Qi.\u0275mod=y.oAB({type:Qi}),Qi.\u0275inj=y.cJS({imports:[A.ez,lr.forRoot(),Xn,Vt,Yo,ha]})},2417:(Kt,qe,Y)=>{var A=Y(1481),y=Y(9051),O=Y(4650),xe=Y(6895);function Se(n,e){if(1&n&&(O.TgZ(0,"li",29),O._uU(1),O.qZA()),2&n){const t=e.$implicit;O.xp6(1),O.Oqu(t)}}function Me(n,e){if(1&n&&(O.TgZ(0,"li",29),O._uU(1),O.qZA()),2&n){const t=e.$implicit;O.xp6(1),O.Oqu(t)}}function Le(n,e){if(1&n&&(O.TgZ(0,"li",29),O._uU(1),O.qZA()),2&n){const t=e.$implicit;O.xp6(1),O.Oqu(t)}}function Fe(n,e){if(1&n&&(O.TgZ(0,"li",29),O._uU(1),O.qZA()),2&n){const t=e.$implicit;O.xp6(1),O.Oqu(t)}}function Be(n,e){if(1&n&&(O.TgZ(0,"li",29),O._uU(1),O.qZA()),2&n){const t=e.$implicit;O.xp6(1),O.Oqu(t)}}function fe(n,e){if(1&n&&(O.TgZ(0,"li",29),O._uU(1),O.qZA()),2&n){const t=e.$implicit;O.xp6(1),O.Oqu(t)}}function ge(n,e){if(1&n&&(O.TgZ(0,"div",8)(1,"div",9)(2,"h5",10),O._uU(3,"Problem Statement"),O.qZA()(),O.TgZ(4,"div",11)(5,"p",12),O._uU(6),O.qZA(),O._UZ(7,"img",13),O.qZA(),O.TgZ(8,"div",9)(9,"h5",10),O._uU(10,"Problem with Team Lead"),O.qZA()(),O.TgZ(11,"div",11)(12,"ul"),O.YNc(13,Se,2,1,"li",14),O.qZA()(),O.TgZ(14,"div",9)(15,"h5",10),O._uU(16,"Problem with Members"),O.qZA()(),O.TgZ(17,"div",11)(18,"ul"),O.YNc(19,Me,2,1,"li",14),O.qZA()(),O.TgZ(20,"div",9)(21,"h5",10),O._uU(22,"Problem Extract"),O.qZA()(),O.TgZ(23,"div",11)(24,"p",12),O._uU(25),O.qZA(),O.TgZ(26,"span",15),O._uU(27,"Lead can"),O.qZA(),O.TgZ(28,"ul"),O.YNc(29,Le,2,1,"li",14),O.qZA(),O.TgZ(30,"span",15),O._uU(31,"Member can"),O.qZA(),O.TgZ(32,"ul"),O.YNc(33,Fe,2,1,"li",14),O.qZA()(),O.TgZ(34,"div",9)(35,"h5",10),O._uU(36,"Solution"),O.qZA()(),O.TgZ(37,"div",11)(38,"p",12),O._uU(39),O.qZA(),O.TgZ(40,"span",15),O._uU(41,"Facilities"),O.qZA(),O.TgZ(42,"div",16)(43,"div",17)(44,"div",18),O._UZ(45,"img",19),O.TgZ(46,"div",20)(47,"h4",21),O._uU(48,"Storage"),O.qZA(),O.TgZ(49,"p",22),O._uU(50,"Reports will be stored in Database"),O.qZA()()()(),O.TgZ(51,"div",17)(52,"div",18),O._UZ(53,"img",23),O.TgZ(54,"div",20)(55,"h4",21),O._uU(56,"Format"),O.qZA(),O.TgZ(57,"p",22),O._uU(58,"Report format will be set by lead"),O.qZA()()()()(),O.TgZ(59,"div",16)(60,"div",17)(61,"div",18),O._UZ(62,"img",24),O.TgZ(63,"div",20)(64,"h4",21),O._uU(65,"Analyse"),O.qZA(),O.TgZ(66,"p",22),O._uU(67,"Review and analyse report anytime"),O.qZA()()()(),O.TgZ(68,"div",17)(69,"div",18),O._UZ(70,"img",25),O.TgZ(71,"div",20)(72,"h4",21),O._uU(73,"Profile"),O.qZA(),O.TgZ(74,"p",22),O._uU(75,"Member can maintain their profile"),O.qZA()()()()(),O.TgZ(76,"div",16)(77,"div",17)(78,"div",18),O._UZ(79,"img",26),O.TgZ(80,"div",20)(81,"h4",21),O._uU(82,"Work Progress"),O.qZA(),O.TgZ(83,"p",22),O._uU(84,"Member working progress can be easily observed"),O.qZA()()()(),O.TgZ(85,"div",17)(86,"div",18),O._UZ(87,"img",27),O.TgZ(88,"div",20)(89,"h4",21),O._uU(90,"Time & Date"),O.qZA(),O.TgZ(91,"p",22),O._uU(92,"Reports will be stored based on time and date"),O.qZA()()()()()(),O.TgZ(93,"div",9)(94,"h5",10),O._uU(95,"Development Idea"),O.qZA()(),O.TgZ(96,"div",11)(97,"p",12),O._uU(98),O.qZA()(),O.TgZ(99,"div",9)(100,"h5",10),O._uU(101,"Tools and Technologies"),O.qZA()(),O.TgZ(102,"div",11)(103,"span",28),O._uU(104,"FrontEnd"),O.qZA(),O.TgZ(105,"ul"),O.YNc(106,Be,2,1,"li",14),O.qZA(),O.TgZ(107,"span",15),O._uU(108,"BackEnd & Database"),O.qZA(),O.TgZ(109,"ul"),O.YNc(110,fe,2,1,"li",14),O.qZA()(),O.TgZ(111,"div",9)(112,"h5",10),O._uU(113,"Deployment/Live"),O.qZA()(),O.TgZ(114,"div",11)(115,"p",12),O._uU(116),O.qZA()()()),2&n){const t=O.oxw();O.xp6(6),O.Oqu(t.PROB_STATEMENT),O.xp6(7),O.Q6J("ngForOf",t.LEAD_PROBLEM),O.xp6(6),O.Q6J("ngForOf",t.MEMBER_PROBLEM),O.xp6(6),O.Oqu(t.EXTRACT),O.xp6(4),O.Q6J("ngForOf",t.LEAD_CAN),O.xp6(4),O.Q6J("ngForOf",t.MEMBER_CAN),O.xp6(6),O.Oqu(t.SOLUTION),O.xp6(59),O.Oqu(t.DEV_IDEA),O.xp6(8),O.Q6J("ngForOf",t.FRONTEND),O.xp6(4),O.Q6J("ngForOf",t.BACKEND),O.xp6(6),O.Oqu(t.DEPLOY)}}function De(n,e){1&n&&(O.TgZ(0,"div",8)(1,"div",9)(2,"h5",10),O._uU(3,"Process Flow Diagram"),O.qZA()(),O.TgZ(4,"div",30),O._UZ(5,"img",31),O.qZA(),O._UZ(6,"hr"),O.TgZ(7,"div",9)(8,"h5",10),O._uU(9,"Login Page Flow"),O.qZA()(),O.TgZ(10,"div",30),O._UZ(11,"img",32),O.qZA(),O._UZ(12,"hr"),O.TgZ(13,"div",9)(14,"h5",10),O._uU(15,"Register Page Flow"),O.qZA()(),O.TgZ(16,"div",30),O._UZ(17,"img",33),O.qZA(),O._UZ(18,"hr"),O.TgZ(19,"div",9)(20,"h5",10),O._uU(21,"Dashboard Page Flow"),O.qZA()(),O.TgZ(22,"div",30),O._UZ(23,"img",34),O.qZA(),O._UZ(24,"hr"),O.TgZ(25,"div",9)(26,"h5",10),O._uU(27,"Dashboard:Profile Section"),O.qZA()(),O.TgZ(28,"div",30),O._UZ(29,"img",35),O.qZA(),O._UZ(30,"hr"),O.TgZ(31,"div",9)(32,"h5",10),O._uU(33,"Dashboard:Report Section"),O.qZA()(),O.TgZ(34,"div",30),O._UZ(35,"img",36),O.qZA(),O._UZ(36,"hr"),O.TgZ(37,"div",9)(38,"h5",10),O._uU(39,"Dashboard:Notification Section"),O.qZA()(),O.TgZ(40,"div",30),O._UZ(41,"img",37),O.qZA(),O._UZ(42,"hr"),O.TgZ(43,"div",9)(44,"h5",10),O._uU(45,"Dashboard:Lead/Member Section"),O.qZA()(),O.TgZ(46,"div",30),O._UZ(47,"img",38),O.qZA()())}class mt{constructor(e){this.router=e,this.PROB_STATEMENT="Team lead is managing a group of team members. Each members sending a daily status report about the work they did at the end of day. Members are using mail to send report. Team lead needs to review the reports and acknowledge it and sent suggestions",this.LEAD_PROBLEM=["Too much emails","High chance for not able to review reports","Unable to filter particular member report","Unable to categories important reports","Much Time consuming","Effect on lead work efficiency","No seperate platform for report","Unable to maintain report for longer time"],this.MEMBER_PROBLEM=[" Use of work mail"," Unaware of report format","Half information remain same","More time consuming","No platform for maintaining static info","less focus on actual content "],this.EXTRACT="Based on understanding the problems of Team Lead and Member, they need a seperate platform instead of work email ie. an application where",this.LEAD_CAN=["Review the report as per his convienence","Able to filter report on member name basis","Able to categorize report importance","Can be able to review report anytime","Able to Store report for longer time","Provide suggestions and comments on report","Analyse the work progress of member based on stored data","No need to use email","Less pressure to acknowledge report on time","Able to set report format"," Able to mention expected information by member"],this.MEMBER_CAN=["Have a particular report format","Auto populate repeated information","Able to create our own profile","No need to use email","Send report to lead in desired format"],this.SOLUTION="A web application needs to be created which will give facility to both Team lead and Member to manage daily reports instead of mail. In this application Members can send reports to TeamLead and TeamLead can provide his comment and suggestions to it.",this.FACILITY=["Reports Storage"," Paricular Report format","Review and analyse report anytime","Maintain members profile","Analyse work progress","Time and Date wise sorting"],this.DEV_IDEA="As this is a web application, its development will be divided in 2 parts.. Frontend and Backend .FrontEnd of application will be designed with Angular framework and for backend will be using Google Firebase..",this.FRONTEND=["HTML","CSS","Bootstrap","Typescript","Angular framework"],this.BACKEND=["Google Firebase noSql cloud data storage"],this.DEPLOY="No any paid services are used for deploying this application. For deploying frontend angular application , we are using Github Pages.. And for Backend apis and database.. we are using google Firebase, its a NoSQL cloud based data storage system",this.document=!1}toggleMethod(e){this.document=e,this.router.navigateByUrl("/documentation")}}mt.\u0275fac=function(e){return new(e||mt)(O.Y36(y.F0))},mt.\u0275cmp=O.Xpm({type:mt,selectors:[["app-document"]],decls:14,vars:2,consts:[[1,"navbar","navbar-dark","bg-primary"],[1,"navcont"],["type","button","routerLink","/app",1,"btn","btn-light","btn-lg",2,"margin-right","120px","color","black"],[1,"nav","nav-tabs","nav-justified"],[1,"active","topicj","card"],[1,"texsizr",3,"click"],[1,"topicj","card"],["class","container-fluid padd",4,"ngIf"],[1,"container-fluid","padd"],[1,"card","topic"],[1,"texsiz"],[1,"card","cardcont"],[1,"contentsize"],["src","/assets/infoblink.png","alt","Chania",1,"img-responsive","imagecenter"],["class","contentsizec",4,"ngFor","ngForOf"],[1,"texsizc"],[1,"row","padd"],[1,"col-6"],[1,"card",2,"width","400px"],["src","/assets/database.jpg","alt","Card image","width","50","height","200",1,"card-img-top"],[1,"card-body"],[1,"card-title","texsizcd"],[1,"card-text"],["src","/assets/report.png","alt","Card image","width","50","height","200",1,"card-img-top"],["src","/assets/analyse.png","alt","Card image","width","50","height","200",1,"card-img-top"],["src","/assets/profile.png","alt","Card image","width","50","height","200",1,"card-img-top"],["src","/assets/workprog.jpg","alt","Card image","width","50","height","200",1,"card-img-top"],["src","/assets/time.png","alt","Card image","width","50","height","200",1,"card-img-top"],[1,"texsizc",2,"margin-top","15px"],[1,"contentsizec"],[1,"card"],["src","/assets/swimlame.png","alt","Chania",1,"img-responsive","adjustImage"],["src","/assets/Login.drawio_1.png","alt","Chania",1,"img-responsive","adjustImageLR"],["src","/assets/register.drawio.png","alt","Chania",1,"img-responsive","adjustImageLR"],["src","/assets/Dashboard.drawio.png","alt","Chania",1,"img-responsive","adjustImageD"],["src","/assets/dashview_1.jpg","alt","Chania",1,"img-responsive","adjustImageD"],["src","/assets/dashview_2.jpg","alt","Chania",1,"img-responsive","adjustImageD"],["src","/assets/dashview_3.jpg","alt","Chania",1,"img-responsive","adjustImageD"],["src","/assets/dashview.drawio.png","alt","Chania",1,"img-responsive","adjustImageD"]],template:function(e,t){1&e&&(O.TgZ(0,"nav",0)(1,"h3",1),O._uU(2,"Report Mgmt. Project Idea Documentation"),O.qZA(),O.TgZ(3,"button",2),O._uU(4,"App"),O.qZA()(),O.TgZ(5,"ul",3)(6,"li",4)(7,"a",5),O.NdJ("click",function(){return t.toggleMethod(!0)}),O._uU(8,"1.Documentation"),O.qZA()(),O.TgZ(9,"li",6)(10,"a",5),O.NdJ("click",function(){return t.toggleMethod(!1)}),O._uU(11,"2. Design and Diagram"),O.qZA()()(),O.YNc(12,ge,117,11,"div",7),O.YNc(13,De,48,0,"div",7)),2&e&&(O.xp6(12),O.Q6J("ngIf",t.document),O.xp6(1),O.Q6J("ngIf",!t.document))},dependencies:[xe.sg,xe.O5,y.rH],styles:[".padd[_ngcontent-%COMP%]{padding:40px}.cardcont[_ngcontent-%COMP%]{background-color:#fff;margin-bottom:30px;box-shadow:10px 10px 5px 5px #add8e6}.imagecenter[_ngcontent-%COMP%]{height:640px;width:55%;margin-left:20%;padding-bottom:20px}.topic[_ngcontent-%COMP%]{box-shadow:10px 10px 5px 5px #add8e6;width:500px;margin-bottom:20px}.topicj[_ngcontent-%COMP%]{box-shadow:10px 10px 5px 5px #add8e6;width:50%;height:60px}.texsiz[_ngcontent-%COMP%]{font-family:Gill Sans;padding-left:10px;font-weight:700;padding-top:5px;font-size:22px}.texsizc[_ngcontent-%COMP%]{font-family:Gill Sans;padding-left:50px;font-weight:700;font-size:18px}.texsizcd[_ngcontent-%COMP%]{font-family:Gill Sans;padding-left:5px;font-weight:700;font-size:18px}.contentsize[_ngcontent-%COMP%]{font-family:Georgia;padding-left:50px;padding-right:100px;padding-top:40px;font-weight:100;font-size:18px}.contentsizec[_ngcontent-%COMP%]{font-family:Georgia;padding-left:50px;padding-right:100px;font-weight:100;font-size:18px;padding-top:4px}.navcont[_ngcontent-%COMP%]{color:#fff;font-family:Georgia;padding-left:40px;padding-top:30px;padding-bottom:30px}.adjustImage[_ngcontent-%COMP%]{width:70%;margin-left:15%}.adjustImageLR[_ngcontent-%COMP%]{width:40%;margin-left:15%}.adjustImageD[_ngcontent-%COMP%]{width:50%;margin-left:15%}.texsizr[_ngcontent-%COMP%]{font-family:Gill Sans;padding-left:30%;font-weight:700;padding-top:5px;font-size:30px;text-decoration:none}"]});const At=[{path:"",redirectTo:"/documentation",pathMatch:"full"},{path:"documentation",component:mt},{path:"app",loadChildren:()=>Promise.resolve().then(Y.bind(Y,3494)).then(n=>n.InfoBlinkModule)}];class Ht{}Ht.\u0275fac=function(e){return new(e||Ht)},Ht.\u0275mod=O.oAB({type:Ht}),Ht.\u0275inj=O.cJS({imports:[y.Bz.forRoot(At),y.Bz]});class Ze{constructor(){this.title="myApp"}}Ze.\u0275fac=function(e){return new(e||Ze)},Ze.\u0275cmp=O.Xpm({type:Ze,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&O._UZ(0,"router-outlet")},dependencies:[y.lC],styles:[".navcont[_ngcontent-%COMP%]{color:#fff;font-family:Georgia;padding-left:40px;padding-top:30px;padding-bottom:30px}"]});var ft=Y(3494),et=Y(2011),yt=Y(1205),gt=Y(9751),it=Y(9646),Je=Y(8996),Tt=Y(4986),wt=Y(4482),z=Y(5403),we=Y(4004),Te=Y(3900),Ie=Y(2122),Ue=Y(3942),_e=Y(5861),Ct=Y(9681),Xe=Y(2090),Rt=Y(4859);const cn="firebasestorage.googleapis.com",Nt="storageBucket";class Gt extends Xe.ZR{constructor(e,t,s=0){super(nn(e),`Firebase Storage: ${t} (${nn(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nn(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var un=(()=>{return(n=un||(un={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",un;var n})();function nn(n){return"storage/"+n}function En(){return new Gt(un.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Xt(){return new Gt(un.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zr(){return new Gt(un.CANCELED,"User canceled the upload/download.")}function Ir(){return new Gt(un.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function On(n){return new Gt(un.INVALID_ARGUMENT,n)}function hi(){return new Gt(un.APP_DELETED,"The Firebase app was deleted.")}function Cr(n){return new Gt(un.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fn(n,e){return new Gt(un.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function an(n){throw new Gt(un.INTERNAL_ERROR,"Internal error: "+n)}class rn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=rn.makeFromUrl(e,t)}catch{return new rn(e,"")}if(""===s.path)return s;throw function lr(n){return new Gt(un.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let s=null;const a="([A-Za-z0-9.\\-_]+)",M=new RegExp("^gs://"+a+"(/(.*))?$","i");function W(xr){xr.path_=decodeURIComponent(xr.path)}const de=t.replace(/[.]/g,"\\."),Qn=[{regex:M,indices:{bucket:1,path:3},postModify:function f(xr){"/"===xr.path.charAt(xr.path.length-1)&&(xr.path_=xr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${de}/v[A-Za-z0-9_]+/b/${a}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:W},{regex:new RegExp(`^https?://${t===cn?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${a}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:W}];for(let xr=0;xr<Qn.length;xr++){const Lr=Qn[xr],Mr=Lr.regex.exec(e);if(Mr){let Dl=Mr[Lr.indices.path];Dl||(Dl=""),s=new rn(Mr[Lr.indices.bucket],Dl),Lr.postModify(s);break}}if(null==s)throw function Er(n){return new Gt(un.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return s}}class cs{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Jn(n){return"string"==typeof n||n instanceof String}function bi(n){return Pn()&&n instanceof Blob}function Pn(){return typeof Blob<"u"&&!(0,Xe.UG)()}function pn(n,e,t,s){if(s<e)throw On(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw On(`Invalid value for '${n}'. Expected ${t} or less.`)}function Vr(n,e,t){let s=e;return null==t&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function xt(n){const e=encodeURIComponent;let t="?";for(const s in n)n.hasOwnProperty(s)&&(t=t+(e(s)+"=")+e(n[s])+"&");return t=t.slice(0,-1),t}var at=(()=>{return(n=at||(at={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",at;var n})();function Pt(n,e){const t=n>=500&&n<600,a=-1!==[408,429].indexOf(n),f=-1!==e.indexOf(n);return t||a||f}class vn{constructor(e,t,s,a,f,v,M,B,W,ee,de,ke=!0){this.url_=e,this.method_=t,this.headers_=s,this.body_=a,this.successCodes_=f,this.additionalRetryCodes_=v,this.callback_=M,this.errorCallback_=B,this.timeout_=W,this.progressCallback_=ee,this.connectionFactory_=de,this.retry=ke,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Qe,ht)=>{this.resolve_=Qe,this.reject_=ht,this.start_()})}start_(){const t=(s,a)=>{const f=this.resolve_,v=this.reject_,M=a.connection;if(a.wasSuccessCode)try{const B=this.callback_(M,M.getResponse());!function Rr(n){return void 0!==n}(B)?f():f(B)}catch(B){v(B)}else if(null!==M){const B=En();B.serverResponse=M.getErrorText(),v(this.errorCallback_?this.errorCallback_(M,B):B)}else v(a.canceled?this.appDelete_?hi():zr():Xt())};this.canceled_?t(0,new qt(!1,null,!0)):this.backoffId_=function zn(n,e,t){let s=1,a=null,f=null,v=!1,M=0;function B(){return 2===M}let W=!1;function ee(...Jt){W||(W=!0,e.apply(null,Jt))}function de(Jt){a=setTimeout(()=>{a=null,n(Qe,B())},Jt)}function ke(){f&&clearTimeout(f)}function Qe(Jt,...ei){if(W)return void ke();if(Jt)return ke(),void ee.call(null,Jt,...ei);if(B()||v)return ke(),void ee.call(null,Jt,...ei);let Qn;s<64&&(s*=2),1===M?(M=2,Qn=0):Qn=1e3*(s+Math.random()),de(Qn)}let ht=!1;function Bt(Jt){ht||(ht=!0,ke(),!W&&(null!==a?(Jt||(M=2),clearTimeout(a),de(0)):Jt||(M=1)))}return de(0),f=setTimeout(()=>{v=!0,Bt(!0)},t),Bt}((s,a)=>{if(a)return void s(!1,new qt(!1,null,!0));const f=this.connectionFactory_();this.pendingConnection_=f;const v=M=>{null!==this.progressCallback_&&this.progressCallback_(M.loaded,M.lengthComputable?M.total:-1)};null!==this.progressCallback_&&f.addUploadProgressListener(v),f.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&f.removeUploadProgressListener(v),this.pendingConnection_=null;const M=f.getErrorCode()===at.NO_ERROR,B=f.getStatus();if(!M||Pt(B,this.additionalRetryCodes_)&&this.retry){const ee=f.getErrorCode()===at.ABORT;return void s(!1,new qt(!1,null,ee))}const W=-1!==this.successCodes_.indexOf(B);s(!0,new qt(W,f))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Wr(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class qt{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function je(...n){const e=function st(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}if(Pn())return new Blob(n);throw new Gt(un.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const xn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ve{constructor(e,t){this.data=e,this.contentType=t||null}}function ye(n,e){switch(n){case xn.RAW:return new ve(oe(e));case xn.BASE64:case xn.BASE64URL:return new ve(_t(n,e));case xn.DATA_URL:return new ve(function Vn(n){const e=new Zt(n);return e.base64?_t(xn.BASE64,e.rest):function Ae(n){let e;try{e=decodeURIComponent(n)}catch{throw fn(xn.DATA_URL,"Malformed data URL.")}return oe(e)}(e.rest)}(e),function fi(n){return new Zt(n).contentType}(e))}throw En()}function oe(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);s<=127?e.push(s):s<=2047?e.push(192|s>>6,128|63&s):55296==(64512&s)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(s=65536|(1023&s)<<10|1023&n.charCodeAt(++t),e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s)):e.push(239,191,189):56320==(64512&s)?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|63&s)}return new Uint8Array(e)}function _t(n,e){switch(n){case xn.BASE64:{const a=-1!==e.indexOf("-"),f=-1!==e.indexOf("_");if(a||f)throw fn(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case xn.BASE64URL:{const a=-1!==e.indexOf("+"),f=-1!==e.indexOf("/");if(a||f)throw fn(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function yn(n){if(typeof atob>"u")throw function Wi(n){return new Gt(un.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(a){throw a.message.includes("polyfill")?a:fn(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}class Zt{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw fn(xn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;null!=s&&(this.base64=function ri(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}class oi{constructor(e,t){let s=0,a="";bi(e)?(this.data_=e,s=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(bi(this.data_)){const a=function en(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===a?null:new oi(a)}{const s=new Uint8Array(this.data_.buffer,e,t-e);return new oi(s,!0)}}static getBlob(...e){if(Pn()){const t=e.map(s=>s instanceof oi?s.data_:s);return new oi(je.apply(null,t))}{const t=e.map(v=>Jn(v)?ye(xn.RAW,v).data:v.data_);let s=0;t.forEach(v=>{s+=v.byteLength});const a=new Uint8Array(s);let f=0;return t.forEach(v=>{for(let M=0;M<v.length;M++)a[f++]=v[M]}),new oi(a,!0)}}uploadData(){return this.data_}}function ds(n){let e;try{e=JSON.parse(n)}catch{return null}return function qr(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function wo(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Ea(n,e){return e}class Zr{constructor(e,t,s,a){this.server=e,this.local=t||e,this.writable=!!s,this.xform=a||Ea}}let es=null;function Dr(){if(es)return es;const n=[];n.push(new Zr("bucket")),n.push(new Zr("generation")),n.push(new Zr("metageneration")),n.push(new Zr("name","fullPath",!0));const t=new Zr("name");t.xform=function e(f,v){return function sr(n){return!Jn(n)||n.length<2?n:wo(n)}(v)},n.push(t);const a=new Zr("size");return a.xform=function s(f,v){return void 0!==v?Number(v):v},n.push(a),n.push(new Zr("timeCreated")),n.push(new Zr("updated")),n.push(new Zr("md5Hash",null,!0)),n.push(new Zr("cacheControl",null,!0)),n.push(new Zr("contentDisposition",null,!0)),n.push(new Zr("contentEncoding",null,!0)),n.push(new Zr("contentLanguage",null,!0)),n.push(new Zr("contentType",null,!0)),n.push(new Zr("metadata","customMetadata",!0)),es=n,es}function br(n,e,t){const s=ds(e);return null===s?null:function Ln(n,e,t){const s={type:"file"},a=t.length;for(let f=0;f<a;f++){const v=t[f];s[v.local]=v.xform(s,e[v.server])}return function Br(n,e){Object.defineProperty(n,"ref",{get:function t(){const f=new rn(n.bucket,n.fullPath);return e._makeStorageReference(f)}})}(s,n),s}(n,s,t)}function $t(n,e){const t={},s=e.length;for(let a=0;a<s;a++){const f=e[a];f.writable&&(t[f.server]=n[f.local])}return JSON.stringify(t)}const Sn="prefixes";class dr{constructor(e,t,s,a){this.url=e,this.method=t,this.handler=s,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ai(n){if(!n)throw En()}function tr(n,e){return function t(s,a){const f=br(n,a,e);return ai(null!==f),f}}function Un(n){return function e(t,s){let a;return a=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Zn(){return new Gt(un.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function gr(){return new Gt(un.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Ur(n){return new Gt(un.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Vi(n){return new Gt(un.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):s,a.status=t.getStatus(),a.serverResponse=s.serverResponse,a}}function so(n){const e=Un(n);return function t(s,a){let f=e(s,a);return 404===s.getStatus()&&(f=function ti(n){return new Gt(un.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),f.serverResponse=a.serverResponse,f}}function Gs(n,e,t){const a=Vr(e.fullServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,M=new dr(a,"GET",tr(n,t),v);return M.errorHandler=so(e),M}function Vo(n,e,t,s,a){const f={};f.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(f.delimiter=t),s&&(f.pageToken=s),a&&(f.maxResults=a);const M=Vr(e.bucketOnlyServerUrl(),n.host,n._protocol),W=n.maxOperationRetryTime,ee=new dr(M,"GET",function Eo(n,e){return function t(s,a){const f=function qi(n,e,t){const s=ds(t);return null===s?null:function vi(n,e,t){const s={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Sn])for(const a of t[Sn]){const f=a.replace(/\/$/,""),v=n._makeStorageReference(new rn(e,f));s.prefixes.push(v)}if(t.items)for(const a of t.items){const f=n._makeStorageReference(new rn(e,a.name));s.items.push(f)}return s}(n,e,s)}(n,e,a);return ai(null!==f),f}}(n,e.bucket),W);return ee.urlParams=f,ee.errorHandler=Un(e),ee}function xs(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=function fs(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),s}class Ee{constructor(e,t,s,a){this.current=e,this.total=t,this.finalized=!!s,this.metadata=a||null}}function be(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ai(!1)}return ai(!!t&&-1!==(e||["active"]).indexOf(t)),t}const wn={STATE_CHANGED:"state_changed"},Ut={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hr(n){switch(n){case"running":case"pausing":case"canceling":return Ut.RUNNING;case"paused":return Ut.PAUSED;case"success":return Ut.SUCCESS;case"canceled":return Ut.CANCELED;default:return Ut.ERROR}}class di{constructor(e,t,s){if(function Tr(n){return"function"==typeof n}(e)||null!=t||null!=s)this.next=e,this.error=t??void 0,this.complete=s??void 0;else{const f=e;this.next=f.next,this.error=f.error,this.complete=f.complete}}}function Kr(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class nr{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=at.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=at.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=at.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,a){if(this.sent_)throw an("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==a)for(const f in a)a.hasOwnProperty(f)&&this.xhr_.setRequestHeader(f,a[f].toString());return void 0!==s?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw an("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw an("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw an("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw an("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Bn extends nr{initXhr(){this.xhr_.responseType="text"}}function or(){return new Bn}class Oi{constructor(e,t,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=s,this._mappings=Dr(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(un.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const f=this.isExponentialBackoffExpired();if(Pt(a.status,[])){if(!f)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();a=Xt()}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(un.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,f)=>{this._resolve=a,this._reject=f,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,s])=>{switch(this._state){case"running":e(t,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const s=function Ve(n,e,t,s,a){const f=e.bucketOnlyServerUrl(),v=xs(e,s,a),M={name:v.fullPath},B=Vr(f,n.host,n._protocol),ee={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":v.contentType,"Content-Type":"application/json; charset=utf-8"},de=$t(v,t),ht=new dr(B,"POST",function Qe(Bt){let Jt;be(Bt);try{Jt=Bt.getResponseHeader("X-Goog-Upload-URL")}catch{ai(!1)}return ai(Jn(Jt)),Jt},n.maxUploadRetryTime);return ht.urlParams=M,ht.headers=ee,ht.body=de,ht.errorHandler=Un(e),ht}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(s,or,e,t);this._request=a,a.getPromise().then(f=>{this._request=void 0,this._uploadUrl=f,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,s)=>{const a=function Ge(n,e,t,s){const B=new dr(t,"POST",function f(W){const ee=be(W,["active","final"]);let de=null;try{de=W.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ai(!1)}de||ai(!1);const ke=Number(de);return ai(!isNaN(ke)),new Ee(ke,s.size(),"final"===ee)},n.maxUploadRetryTime);return B.headers={"X-Goog-Upload-Command":"query"},B.errorHandler=Un(e),B}(this._ref.storage,this._ref._location,e,this._blob),f=this._ref.storage._makeRequest(a,or,t,s);this._request=f,f.getPromise().then(v=>{this._request=void 0,this._updateProgress(v.current),this._needToFetchStatus=!1,v.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Ee(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((a,f)=>{let v;try{v=function St(n,e,t,s,a,f,v,M){const B=new Ee(0,0);if(v?(B.current=v.current,B.total=v.total):(B.current=0,B.total=s.size()),s.size()!==B.total)throw function kt(){return new Gt(un.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const W=B.total-B.current;let ee=W;a>0&&(ee=Math.min(ee,a));const de=B.current;let Qe="";Qe=0===ee?"finalize":W===ee?"upload, finalize":"upload";const ht={"X-Goog-Upload-Command":Qe,"X-Goog-Upload-Offset":`${B.current}`},Bt=s.slice(de,de+ee);if(null===Bt)throw Ir();const Qn=new dr(t,"POST",function Jt(xr,Lr){const Mr=be(xr,["active","final"]),$s=B.current+ee,Dl=s.size();let fm;return fm="final"===Mr?tr(e,f)(xr,Lr):null,new Ee($s,Dl,"final"===Mr,fm)},e.maxUploadRetryTime);return Qn.headers=ht,Qn.body=Bt.uploadData(),Qn.progressCallback=M||null,Qn.errorHandler=Un(n),Qn}(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(B){return this._error=B,void this._transition("error")}const M=this._ref.storage._makeRequest(v,or,a,f,!1);this._request=M,M.getPromise().then(B=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(B.current),B.finalized?(this._metadata=B.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const s=Gs(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(s,or,e,t);this._request=a,a.getPromise().then(f=>{this._request=void 0,this._metadata=f,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const s=function Ms(n,e,t,s,a){const f=e.bucketOnlyServerUrl(),v={"X-Goog-Upload-Protocol":"multipart"},B=function M(){let Qn="";for(let xr=0;xr<2;xr++)Qn+=Math.random().toString().slice(2);return Qn}();v["Content-Type"]="multipart/related; boundary="+B;const W=xs(e,s,a),ee=$t(W,t),Qe=oi.getBlob("--"+B+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ee+"\r\n--"+B+"\r\nContent-Type: "+W.contentType+"\r\n\r\n",s,"\r\n--"+B+"--");if(null===Qe)throw Ir();const ht={name:W.fullPath},Bt=Vr(f,n.host,n._protocol),ei=n.maxUploadRetryTime,li=new dr(Bt,"POST",tr(n,t),ei);return li.urlParams=ht,li.headers=v,li.body=Qe.uploadData(),li.errorHandler=Un(e),li}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(s,or,e,t);this._request=a,a.getPromise().then(f=>{this._request=void 0,this._metadata=f,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=zr(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=hr(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,s,a){const f=new di(t||void 0,s||void 0,a||void 0);return this._addObserver(f),()=>{this._removeObserver(f)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(hr(this._state)){case Ut.SUCCESS:Kr(this._resolve.bind(null,this.snapshot))();break;case Ut.CANCELED:case Ut.ERROR:Kr(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(hr(this._state)){case Ut.RUNNING:case Ut.PAUSED:e.next&&Kr(e.next.bind(e,this.snapshot))();break;case Ut.SUCCESS:e.complete&&Kr(e.complete.bind(e))();break;default:e.error&&Kr(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Si{constructor(e,t){this._service=e,this._location=t instanceof rn?t:rn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Si(e,t)}get root(){const e=new rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wo(this._location.path)}get storage(){return this._service}get parent(){const e=function wa(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new rn(this._location.bucket,e);return new Si(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Cr(e)}}function ps(n,e,t){return bu.apply(this,arguments)}function bu(){return(bu=(0,_e.Z)(function*(n,e,t){const a=yield sa(n,{pageToken:t});e.prefixes.push(...a.prefixes),e.items.push(...a.items),null!=a.nextPageToken&&(yield ps(n,e,a.nextPageToken))})).apply(this,arguments)}function sa(n,e){null!=e&&"number"==typeof e.maxResults&&pn("options.maxResults",1,1e3,e.maxResults);const t=e||{},s=Vo(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(s,or)}function Hn(n){n._throwIfRoot("getDownloadURL");const e=function Ti(n,e,t){const a=Vr(e.fullServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,M=new dr(a,"GET",function Hs(n,e){return function t(s,a){const f=br(n,a,e);return ai(null!==f),function ts(n,e,t,s){const a=ds(e);if(null===a||!Jn(a.downloadTokens))return null;const f=a.downloadTokens;if(0===f.length)return null;const v=encodeURIComponent;return f.split(",").map(W=>{const de=n.fullPath;return Vr("/b/"+v(n.bucket)+"/o/"+v(de),t,s)+xt({alt:"media",token:W})})[0]}(f,a,n.host,n._protocol)}}(n,t),v);return M.errorHandler=so(e),M}(n.storage,n._location,Dr());return n.storage.makeRequestWithTokens(e,or).then(t=>{if(null===t)throw function ls(){return new Gt(un.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function bo(n,e){const t=function mr(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),s=new rn(n._location.bucket,t);return new Si(n.storage,s)}function Ns(n,e){if(n instanceof Ws){const t=n;if(null==t._bucket)throw function Tn(){return new Gt(un.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Nt+"' property when initializing the app?")}();const s=new Si(t,t._bucket);return null!=e?Ns(s,e):s}return void 0!==e?bo(n,e):n}function Bi(n,e){if(e&&function Ia(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Ws)return function rs(n,e){return new Si(n,e)}(n,e);throw On("To use ref(service, url), the first argument must be a Storage instance.")}return Ns(n,e)}function Bo(n,e){const t=e?.[Nt];return null==t?null:rn.makeFromBucketSpec(t,n)}class Ws{constructor(e,t,s,a,f){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=a,this._firebaseVersion=f,this._bucket=null,this._host=cn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=a?rn.makeFromBucketSpec(a,this._host):Bo(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?rn.makeFromBucketSpec(this._url,e):Bo(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pn("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pn("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,_e.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const s=yield t.getToken();if(null!==s)return s.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,_e.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Si(this,e)}_makeRequest(e,t,s,a,f=!0){if(this._deleted)return new cs(hi());{const v=function Ce(n,e,t,s,a,f,v=!0){const M=xt(n.urlParams),B=n.url+M,W=Object.assign({},n.headers);return function pe(n,e){e&&(n["X-Firebase-GMPID"]=e)}(W,e),function Dn(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(W,t),function ni(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(W,f),function he(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(W,s),new vn(B,n.method,W,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,v)}(e,this._appId,s,a,t,this._firebaseVersion,f);return this._requests.add(v),v.getPromise().then(()=>this._requests.delete(v),()=>this._requests.delete(v)),v}}makeRequestWithTokens(e,t){var s=this;return(0,_e.Z)(function*(){const[a,f]=yield Promise.all([s._getAuthToken(),s._getAppCheckToken()]);return s._makeRequest(e,t,a,f).getPromise()})()}}const ao="@firebase/storage";function ba(n,e){return Bi(n=(0,Xe.m9)(n),e)}function ki(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new Ws(t,s,a,e,Ct.SDK_VERSION)}!function kn(){(0,Ct._registerComponent)(new Rt.wA("storage",ki,"PUBLIC").setMultipleInstances(!0)),(0,Ct.registerVersion)(ao,"0.11.2",""),(0,Ct.registerVersion)(ao,"0.11.2","esm2017")}();class $o{constructor(e,t,s){this._delegate=e,this.task=t,this.ref=s}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class An{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new $o(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(s=>{if(e)return e(new $o(s,this,this._ref))},t)}on(e,t,s,a){let f;return t&&(f="function"==typeof t?v=>t(new $o(v,this,this._ref)):{next:t.next?v=>t.next(new $o(v,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,f,s||void 0,a||void 0)}}class Ho{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new vr(e,this._service))}get items(){return this._delegate.items.map(e=>new vr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class vr{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Ta(n,e){return bo(n,e)}(this._delegate,e);return new vr(t,this.storage)}get root(){return new vr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new vr(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new An(function Sr(n,e,t){return function oo(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Oi(n,new oi(e),t)}(n=(0,Xe.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=xn.RAW,s){this._throwIfRoot("putString");const a=ye(t,e),f=Object.assign({},s);return null==f.contentType&&null!=a.contentType&&(f.contentType=a.contentType),new An(new Oi(this._delegate,new oi(a.data,!0),f),this)}listAll(){return function oa(n){return function zs(n){const e={prefixes:[],items:[]};return ps(n,e).then(()=>e)}(n=(0,Xe.m9)(n))}(this._delegate).then(e=>new Ho(e,this.storage))}list(e){return function Tu(n,e){return sa(n=(0,Xe.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Ho(t,this.storage))}getMetadata(){return function uo(n){return function $a(n){n._throwIfRoot("getMetadata");const e=Gs(n.storage,n._location,Dr());return n.storage.makeRequestWithTokens(e,or)}(n=(0,Xe.m9)(n))}(this._delegate)}updateMetadata(e){return function xi(n,e){return function ui(n,e){n._throwIfRoot("updateMetadata");const t=function hs(n,e,t,s){const f=Vr(e.fullServerUrl(),n.host,n._protocol),M=$t(t,s),W=n.maxOperationRetryTime,ee=new dr(f,"PATCH",tr(n,s),W);return ee.headers={"Content-Type":"application/json; charset=utf-8"},ee.body=M,ee.errorHandler=so(e),ee}(n.storage,n._location,e,Dr());return n.storage.makeRequestWithTokens(t,or)}(n=(0,Xe.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function ji(n){return Hn(n=(0,Xe.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Ar(n){return function au(n){n._throwIfRoot("deleteObject");const e=function As(n,e){const s=Vr(e.fullServerUrl(),n.host,n._protocol),M=new dr(s,"DELETE",function v(B,W){},n.maxOperationRetryTime);return M.successCodes=[200,204],M.errorHandler=so(e),M}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,or)}(n=(0,Xe.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Cr(e)}}class Go{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(To(e))throw On("ref() expected a child path but got a URL, use refFromURL instead.");return new vr(ba(this._delegate,e),this)}refFromURL(e){if(!To(e))throw On("refFromURL() expected a full URL but got a child path, use ref() instead.");try{rn.makeFromUrl(e,this._delegate.host)}catch{throw On("refFromUrl() expected a valid full URL but got an invalid one.")}return new vr(ba(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,s={}){!function Zs(n,e,t,s={}){!function Ai(n,e,t,s={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:a}=s;a&&(n._overrideAuthToken="string"==typeof a?a:(0,Xe.Sg)(a,n.app.options.projectId))}(n,e,t,s)}(this._delegate,e,t,s)}}function To(n){return/^[A-Za-z]+:\/\//.test(n)}function Es(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),s=n.getProvider("storage").getImmediate({identifier:e});return new Go(t,s)}!function nt(n){const e={TaskState:Ut,TaskEvent:wn,StringFormat:xn,Storage:Go,Reference:vr};n.INTERNAL.registerComponent(new Rt.wA("storage-compat",Es,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Ue.Z);var ar=Y(6217),Da=Y(9260);function $i(n){const e=function co(n){return new gt.y(e=>{const t=v=>e.next(v);t(n.snapshot);const f=n.on("state_changed",t);return n.then(v=>{t(v),e.complete()},v=>{t(n.snapshot),(v=>{e.error(v)})(v)}),function(){f()}}).pipe(function tt(n,e=Tt.z){return(0,wt.e)((t,s)=>{let a=null,f=null,v=null;const M=()=>{if(a){a.unsubscribe(),a=null;const W=f;f=null,s.next(W)}};function B(){const W=v+n,ee=e.now();if(ee<W)return a=this.schedule(void 0,W-ee),void s.add(a);M()}t.subscribe((0,z.x)(s,W=>{f=W,v=e.now(),a||(a=e.schedule(B,n),s.add(a))},()=>{M(),s.complete()},void 0,()=>{f=a=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,we.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Is(n){return{getDownloadURL:()=>(0,it.of)(void 0).pipe(Ie.fc,(0,Te.w)(()=>n.getDownloadURL()),Ie.iC),getMetadata:()=>(0,it.of)(void 0).pipe(Ie.fc,(0,Te.w)(()=>n.getMetadata()),Ie.iC),delete:()=>(0,Je.D)(n.delete()),child:e=>Is(n.child(e)),updateMetadata:e=>(0,Je.D)(n.updateMetadata(e)),put:(e,t)=>$i(n.put(e,t)),putString:(e,t,s)=>$i(n.putString(e,t,s)),list:e=>(0,Je.D)(n.list(e)),listAll:()=>(0,Je.D)(n.listAll())}}const uu=new O.OlP("angularfire2.storageBucket"),ms=new O.OlP("angularfire2.storage.maxUploadRetryTime"),Ga=new O.OlP("angularfire2.storage.maxOperationRetryTime"),zo=new O.OlP("angularfire2.storage.use-emulator");let Wo=(()=>{class n{constructor(t,s,a,f,v,M,B,W,ee,de){const ke=(0,et.on)(t,v,s);this.storage=(0,et.cc)(`${ke.name}.storage.${a}`,"AngularFireStorage",ke.name,()=>{const Qe=v.runOutsideAngular(()=>ke.storage(a||void 0)),ht=ee;return ht&&Qe.useEmulator(...ht),B&&Qe.setMaxUploadRetryTime(B),W&&Qe.setMaxOperationRetryTime(W),Qe},[B,W])}ref(t){return Is(this.storage.ref(t))}refFromURL(t){return Is(this.storage.refFromURL(t))}upload(t,s,a){return Is(this.storage.ref(t)).put(s,a)}}return n.\u0275fac=function(t){return new(t||n)(O.LFG(et.Dh),O.LFG(et.xv,8),O.LFG(uu,8),O.LFG(O.Lbi),O.LFG(O.R0b),O.LFG(Ie.HU),O.LFG(ms,8),O.LFG(Ga,8),O.LFG(zo,8),O.LFG(ar.nm,8))},n.\u0275prov=O.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),za=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=O.oAB({type:n}),n.\u0275inj=O.cJS({}),n})(),gi=(()=>{class n{constructor(){Da.Z.registerVersion("angularfire",Ie.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=O.oAB({type:n}),n.\u0275inj=O.cJS({providers:[Wo],imports:[za]}),n})();var Fi=Y(8675);function Ks(){return(0,wt.e)((n,e)=>{let t,s=!1;n.subscribe((0,z.x)(e,a=>{const f=t;t=a,s&&e.next([f,a]),s=!0}))})}var Yt,Os=Y(5026),Ys=Y(1884),Sa=Y(9300),ks=(Y(4217),Y(1877)),Aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fs={},Ls=Ls||{},Fn=Aa||self;function So(){}function lu(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function wi(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Su="closure_uid_"+(1e9*Math.random()>>>0),Ao=0;function Zo(n,e,t){return n.call.apply(n.bind,arguments)}function Wa(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function ii(n,e,t){return(ii=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zo:Wa).apply(null,arguments)}function Cs(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function Kn(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(s,a,f){for(var v=Array(arguments.length-2),M=2;M<arguments.length;M++)v[M-2]=arguments[M];return e.prototype[a].apply(s,v)}}function Hi(){this.s=this.s,this.o=this.o}Hi.prototype.s=!1,Hi.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Du(n){Object.prototype.hasOwnProperty.call(n,Su)&&n[Su]||(n[Su]=++Ao)}(this)},Hi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qs=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function xa(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function Ki(n,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(lu(s)){const a=n.length||0,f=s.length||0;n.length=a+f;for(let v=0;v<f;v++)n[a+v]=s[v]}else n.push(s)}}function Li(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Li.prototype.h=function(){this.defaultPrevented=!0};var Au=function(){if(!Fn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Fn.addEventListener("test",So,e),Fn.removeEventListener("test",So,e)}catch{}return n}();function Ma(n){return/^[\s\xa0]*$/.test(n)}var ho=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function k(n,e){return n<e?-1:n>e?1:0}function K(){var n=Fn.navigator;return n&&(n=n.userAgent)?n:""}function L(n){return-1!=K().indexOf(n)}function Q(n){return Q[" "](n),n}Q[" "]=So;var Yr,n,ze=L("Opera"),lt=L("Trident")||L("MSIE"),Vt=L("Edge"),Xn=Vt||lt,Yn=L("Gecko")&&!(-1!=K().toLowerCase().indexOf("webkit")&&!L("Edge"))&&!(L("Trident")||L("MSIE"))&&!L("Edge"),ur=-1!=K().toLowerCase().indexOf("webkit")&&!L("Edge");function jn(){var n=Fn.document;return n?n.documentMode:void 0}e:{var rr="",mi=(n=K(),Yn?/rv:([^\);]+)(\)|;)/.exec(n):Vt?/Edge\/([\d\.]+)/.exec(n):lt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ur?/WebKit\/(\S+)/.exec(n):ze?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(mi&&(rr=mi?mi[1]:""),lt){var _r=jn();if(null!=_r&&_r>parseFloat(rr)){Yr=String(_r);break e}}Yr=rr}var bs={};var Ra=Fn.document&&lt&&(jn()||parseInt(Yr,10))||void 0;function xo(n,e){if(Li.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Yn){e:{try{Q(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Uu[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&xo.X.h.call(this)}}Kn(xo,Li);var Uu={2:"touch",3:"pen",4:"mouse"};xo.prototype.h=function(){xo.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var eo="closure_listenable_"+(1e6*Math.random()|0),Mo=0;function qa(n,e,t,s,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=a,this.key=++Mo,this.ba=this.ea=!1}function Ko(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Yo(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function Ts(n){const e={};for(const t in n)e[t]=n[t];return e}const xu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ei(n,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)n[t]=s[t];for(let f=0;f<xu.length;f++)t=xu[f],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function ua(n){this.src=n,this.g={},this.h=0}function Qo(n,e){var t=e.type;if(t in n.g){var f,s=n.g[t],a=Qs(s,e);(f=0<=a)&&Array.prototype.splice.call(s,a,1),f&&(Ko(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Jo(n,e,t,s){for(var a=0;a<n.length;++a){var f=n[a];if(!f.ba&&f.listener==e&&f.capture==!!t&&f.ha==s)return a}return-1}ua.prototype.add=function(n,e,t,s,a){var f=n.toString();(n=this.g[f])||(n=this.g[f]=[],this.h++);var v=Jo(n,e,s,a);return-1<v?(e=n[v],t||(e.ea=!1)):((e=new qa(e,this.src,f,!!s,a)).ea=t,n.push(e)),e};var la="closure_lm_"+(1e6*Math.random()|0),cu={};function ca(n,e,t,s,a){if(s&&s.once)return du(n,e,t,s,a);if(Array.isArray(e)){for(var f=0;f<e.length;f++)ca(n,e[f],t,s,a);return null}return t=Oa(t),n&&n[eo]?n.N(e,t,wi(s)?!!s.capture:!!s,a):Na(n,e,t,!1,s,a)}function Na(n,e,t,s,a,f){if(!e)throw Error("Invalid event type");var v=wi(a)?!!a.capture:!!a,M=Nr(n);if(M||(n[la]=M=new ua(n)),(t=M.add(e,t,s,v,f)).proxy)return t;if(s=function Pa(){const e=Mu;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)Au||(a=v),void 0===a&&(a=!1),n.addEventListener(e.toString(),s,a);else if(n.attachEvent)n.attachEvent(Za(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function du(n,e,t,s,a){if(Array.isArray(e)){for(var f=0;f<e.length;f++)du(n,e[f],t,s,a);return null}return t=Oa(t),n&&n[eo]?n.O(e,t,wi(s)?!!s.capture:!!s,a):Na(n,e,t,!0,s,a)}function Ku(n,e,t,s,a){if(Array.isArray(e))for(var f=0;f<e.length;f++)Ku(n,e[f],t,s,a);else s=wi(s)?!!s.capture:!!s,t=Oa(t),n&&n[eo]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Jo(f=n.g[e],t,s,a))&&(Ko(f[t]),Array.prototype.splice.call(f,t,1),0==f.length&&(delete n.g[e],n.h--))):n&&(n=Nr(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Jo(e,t,s,a)),(t=-1<n?e[n]:null)&&to(t))}function to(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[eo])Qo(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(Za(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Nr(e))?(Qo(t,n),0==t.h&&(t.src=null,e[la]=null)):Ko(n)}}}function Za(n){return n in cu?cu[n]:cu[n]="on"+n}function Mu(n,e){if(n.ba)n=!0;else{e=new xo(e,this);var t=n.listener,s=n.ha||n.src;n.ea&&to(n),n=t.call(s,e)}return n}function Nr(n){return(n=n[la])instanceof ua?n:null}var da="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oa(n){return"function"==typeof n?n:(n[da]||(n[da]=function(e){return n.handleEvent(e)}),n[da])}function kr(){Hi.call(this),this.i=new ua(this),this.P=this,this.I=null}function Pr(n,e){var t,s=n.I;if(s)for(t=[];s;s=s.I)t.push(s);if(n=n.P,s=e.type||e,"string"==typeof e)e=new Li(e,n);else if(e instanceof Li)e.target=e.target||n;else{var a=e;Ei(e=new Li(s,n),a)}if(a=!0,t)for(var f=t.length-1;0<=f;f--){var v=e.g=t[f];a=hu(v,s,!0,e)&&a}if(a=hu(v=e.g=n,s,!0,e)&&a,a=hu(v,s,!1,e)&&a,t)for(f=0;f<t.length;f++)a=hu(v=e.g=t[f],s,!1,e)&&a}function hu(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,f=0;f<e.length;++f){var v=e[f];if(v&&!v.ba&&v.capture==t){var M=v.listener,B=v.ha||v.src;v.ea&&Qo(n.i,v),a=!1!==M.call(B,s)&&a}}return a&&!s.defaultPrevented}Kn(kr,Hi),kr.prototype[eo]=!0,kr.prototype.removeEventListener=function(n,e,t,s){Ku(this,n,e,t,s)},kr.prototype.M=function(){if(kr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)Ko(t[s]);delete n.g[e],n.h--}}this.I=null},kr.prototype.N=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},kr.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var Vu=Fn.JSON.stringify;function ul(){var n=le;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var D,Ya=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ha,n=>n.reset());class ha{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Qi(n){Fn.setTimeout(()=>{throw n},0)}function R(n,e){D||function w(){var n=Fn.Promise.resolve(void 0);D=function(){n.then(Ke)}}(),j||(D(),j=!0),le.add(n,e)}var j=!1,le=new class Ka{constructor(){this.h=this.g=null}add(e,t){const s=Ya.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Ke(){for(var n;n=ul();){try{n.h.call(n.g)}catch(t){Qi(t)}var e=Ya;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}j=!1}function sn(n,e){kr.call(this),this.h=n||1,this.g=e||Fn,this.j=ii(this.lb,this),this.l=Date.now()}function ln(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Fr(n,e,t){if("function"==typeof n)t&&(n=ii(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ii(n.handleEvent,n)}return 2147483647<Number(e)?-1:Fn.setTimeout(n,e||0)}function Ri(n){n.g=Fr(()=>{n.g=null,n.i&&(n.i=!1,Ri(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Kn(sn,kr),(Yt=sn.prototype).ca=!1,Yt.R=null,Yt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Pr(this,"tick"),this.ca&&(ln(this),this.start()))}},Yt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Yt.M=function(){sn.X.M.call(this),ln(this),delete this.g};class is extends Hi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ri(this)}M(){super.M(),this.g&&(Fn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ui(n){Hi.call(this),this.h=n,this.g={}}Kn(Ui,Hi);var Ro=[];function fo(n,e,t,s){Array.isArray(t)||(t&&(Ro[0]=t.toString()),t=Ro);for(var a=0;a<t.length;a++){var f=ca(e,t[a],s||n.handleEvent,!1,n.h||n);if(!f)break;n.g[f.key]=f}}function Qa(n){Yo(n.g,function(e,t){this.g.hasOwnProperty(t)&&to(e)},n),n.g={}}function Xo(){this.g=!0}function $r(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ju(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var f=a[0];if("noop"!=f&&"stop"!=f&&"close"!=f)for(var v=1;v<a.length;v++)a[v]=""}}}return Vu(t)}catch{return e}}(n,t)+(s?" "+s:"")})}Ui.prototype.M=function(){Ui.X.M.call(this),Qa(this)},Ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xo.prototype.Aa=function(){this.g=!1},Xo.prototype.info=function(){};var Us={},Vs=null;function no(){return Vs=Vs||new kr}function No(n){Li.call(this,Us.Pa,n)}function Po(n){const e=no();Pr(e,new No(e))}function pa(n,e){Li.call(this,Us.STAT_EVENT,n),this.stat=e}function ss(n){const e=no();Pr(e,new pa(e,n))}function Nc(n,e){Li.call(this,Us.Qa,n),this.size=e}function $u(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Fn.setTimeout(function(){n()},e)}Us.Pa="serverreachability",Kn(No,Li),Us.STAT_EVENT="statevent",Kn(pa,Li),Us.Qa="timingevent",Kn(Nc,Li);var sc={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},b={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function x(){}function P(){}x.prototype.h=null;var Re,$={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function J(){Li.call(this,"d")}function re(){Li.call(this,"c")}function ct(){}function tn(n,e,t,s){this.l=n,this.j=e,this.m=t,this.U=s||1,this.S=new Ui(this),this.O=fr,this.T=new sn(n=Xn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Qt}function Qt(){this.i=null,this.g="",this.h=!1}Kn(J,Li),Kn(re,Li),Kn(ct,x),ct.prototype.g=function(){return new XMLHttpRequest},ct.prototype.i=function(){return{}},Re=new ct;var fr=45e3,Ii={},_s={};function ro(n,e,t){n.K=1,n.v=oc(ea(e)),n.s=t,n.P=!0,V(n,null)}function V(n,e){n.F=Date.now(),Oe(n),n.A=ea(n.v);var t=n.A,s=n.U;Array.isArray(s)||(s=[String(s)]),Vf(t.i,"t",s),n.C=0,t=n.l.H,n.h=new Qt,n.g=dc(n.l,t?e:null,!n.s),0<n.N&&(n.L=new is(ii(n.La,n,n.g),n.N)),fo(n.S,n.g,"readystatechange",n.ib),e=n.H?Ts(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Po(),function Ja(n,e,t,s,a,f){n.info(function(){if(n.g)if(f)for(var v="",M=f.split("&"),B=0;B<M.length;B++){var W=M[B].split("=");if(1<W.length){var ee=W[0];W=W[1];var de=ee.split("_");v=2<=de.length&&"type"==de[1]?v+(ee+"=")+W+"&":v+(ee+"=redacted&")}}else v=null;else v=f;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+v})}(n.j,n.u,n.A,n.m,n.U,n.s)}function H(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function X(n,e,t){let a,s=!0;for(;!n.I&&n.C<t.length;){if(a=ue(n,t),a==_s){4==e&&(n.o=4,ss(14),s=!1),$r(n.j,n.m,null,"[Incomplete Response]");break}if(a==Ii){n.o=4,ss(15),$r(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}$r(n.j,n.m,a,null),In(n,a)}H(n)&&a!=_s&&a!=Ii&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ss(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Fl(e),e.K=!0,ss(11))):($r(n.j,n.m,t,"[Invalid Chunked Response]"),mn(n),gn(n))}function ue(n,e){var t=n.C,s=e.indexOf("\n",t);return-1==s?_s:(t=Number(e.substring(t,s)),isNaN(t)?Ii:(s+=1)+t>e.length?_s:(e=e.substr(s,t),n.C=s+t,e))}function Oe(n){n.V=Date.now()+n.O,$e(n,n.O)}function $e(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=$u(ii(n.gb,n),e)}function bt(n){n.B&&(Fn.clearTimeout(n.B),n.B=null)}function gn(n){0==n.l.G||n.I||kc(n.l,n)}function mn(n){bt(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ln(n.T),Qa(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function In(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||id(t.h,n)))if(!n.J&&id(t.h,n)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;dd(t),ud(t)}kl(t),ss(18)}}else t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=$u(ii(t.cb,t),6e3));if(1>=Rl(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else fl(t,11)}else if((n.J||t.g==n)&&dd(t),!Ma(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let W=a[e];if(t.T=W[0],W=W[1],2==t.G)if("c"==W[0]){t.I=W[1],t.ka=W[2];const ee=W[3];null!=ee&&(t.ma=ee,t.j.info("VER="+t.ma));const de=W[4];null!=de&&(t.Ca=de,t.j.info("SVER="+t.Ca));const ke=W[5];null!=ke&&"number"==typeof ke&&0<ke&&(t.J=s=1.5*ke,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const Qe=n.g;if(Qe){const ht=Qe.g?Qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ht){var f=s.h;f.g||-1==ht.indexOf("spdy")&&-1==ht.indexOf("quic")&&-1==ht.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(ka(f,f.h),f.h=null))}if(s.D){const Bt=Qe.g?Qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Bt&&(s.za=Bt,Ni(s.F,s.D,Bt))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var v=n;if((s=t).sa=pl(s,s.H?s.ka:null,s.V),v.J){sd(s.h,v);var M=v,B=s.J;B&&M.setTimeout(B),M.B&&(bt(M),Oe(M)),s.g=v}else Oc(s);0<t.i.length&&Xu(t)}else"stop"!=W[0]&&"close"!=W[0]||fl(t,7);else 3==t.G&&("stop"==W[0]||"close"==W[0]?"stop"==W[0]?fl(t,7):Ju(t):"noop"!=W[0]&&t.l&&t.l.wa(W),t.A=0)}Po()}catch{}}function po(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(lu(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Wn(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(lu(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const s in n)e[t++]=s;return e}}}(n),s=function ir(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(lu(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n),a=s.length,f=0;f<a;f++)e.call(void 0,s[f],t&&t[f],n)}(Yt=tn.prototype).setTimeout=function(n){this.O=n},Yt.ib=function(n){n=n.target;const e=this.L;e&&3==yu(n)?e.l():this.La(n)},Yt.La=function(n){try{if(n==this.g)e:{const ee=yu(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ee)&&(3!=ee||Xn||this.g&&(this.h.h||this.g.fa()||ad(this.g)))){this.I||4!=ee||7==e||Po(),bt(this);var t=this.g.aa();this.Y=t;t:if(H(this)){var s=ad(this.g);n="";var a=s.length,f=4==yu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),gn(this);var v="";break t}this.h.i=new Fn.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:f&&e==a-1});s.splice(0,a),this.h.g+=n,this.C=0,v=this.h.g}else v=this.g.fa();if(this.i=200==t,function fa(n,e,t,s,a,f,v){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+f+" "+v})}(this.j,this.u,this.A,this.m,this.U,ee,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var M,B=this.g;if((M=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ma(M)){var W=M;break t}}W=null}if(!(t=W)){this.i=!1,this.o=3,ss(12),mn(this),gn(this);break e}$r(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,In(this,t)}this.P?(X(this,ee,v),Xn&&this.i&&3==ee&&(fo(this.S,this.T,"tick",this.hb),this.T.start())):($r(this.j,this.m,v,null),In(this,v)),4==ee&&mn(this),this.i&&!this.I&&(4==ee?kc(this.l,this):(this.i=!1,Oe(this)))}else 400==t&&0<v.indexOf("Unknown SID")?(this.o=3,ss(12)):(this.o=0,ss(13)),mn(this),gn(this)}}}catch{}},Yt.hb=function(){if(this.g){var n=yu(this.g),e=this.g.fa();this.C<e.length&&(bt(this),X(this,n,e),this.i&&4!=n&&Oe(this))}},Yt.cancel=function(){this.I=!0,mn(this)},Yt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Bu(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Po(),ss(17)),mn(this),this.o=2,gn(this)):$e(this,this.V-n)};var os=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fu(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof fu){this.h=void 0!==e?e:n.h,ta(this,n.j),this.s=n.s,this.g=n.g,ga(this,n.m),this.l=n.l,e=n.i;var t=new ll;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),pu(this,t),this.o=n.o}else n&&(t=String(n).match(os))?(this.h=!!e,ta(this,t[1]||"",!0),this.s=Yu(t[2]||""),this.g=Yu(t[3]||"",!0),ga(this,t[4]),this.l=Yu(t[5]||"",!0),pu(this,t[6]||"",!0),this.o=Yu(t[7]||"")):(this.h=!!e,this.i=new ll(null,this.h))}function ea(n){return new fu(n)}function ta(n,e,t){n.j=t?Yu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ga(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function pu(n,e,t){e instanceof ll?(n.i=e,function Ld(n,e){e&&!n.j&&(mu(n),n.i=null,n.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Lf(this,s),Vf(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=gu(e,Al)),n.i=new ll(e,n.h))}function Ni(n,e,t){n.i.set(e,t)}function oc(n){return Ni(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Yu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function gu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,td),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function td(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}fu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(gu(e,Oh,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(gu(e,Oh,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(gu(t,"/"==t.charAt(0)?nd:kh,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",gu(t,Wp)),n.join("")};var Oh=/[#\/\?@]/g,kh=/[#\?:]/g,nd=/[#\?]/g,Al=/[#\?@]/g,Wp=/#/g;function ll(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function mu(n){n.g||(n.g=new Map,n.h=0,n.i&&function Sl(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),a=null;if(0<=s){var f=n[t].substring(0,s);a=n[t].substring(s+1)}else f=n[t];e(f,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Lf(n,e){mu(n),e=xl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Uf(n,e){return mu(n),e=xl(n,e),n.g.has(e)}function Vf(n,e,t){Lf(n,e),0<t.length&&(n.i=null,n.g.set(xl(n,e),xa(t)),n.h+=t.length)}function xl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ud(n){this.l=n||Ml,n=Fn.PerformanceNavigationTiming?0<(n=Fn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Fn.g&&Fn.g.Ga&&Fn.g.Ga()&&Fn.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Yt=ll.prototype).add=function(n,e){mu(this),this.i=null,n=xl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Yt.forEach=function(n,e){mu(this),this.g.forEach(function(t,s){t.forEach(function(a){n.call(e,a,s,this)},this)},this)},Yt.oa=function(){mu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=n[s];for(let f=0;f<a.length;f++)t.push(e[s])}return t},Yt.W=function(n){mu(this);let e=[];if("string"==typeof n)Uf(this,n)&&(e=e.concat(this.g.get(xl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Yt.set=function(n,e){return mu(this),this.i=null,Uf(this,n=xl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Yt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Yt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const f=encodeURIComponent(String(s)),v=this.W(s);for(s=0;s<v.length;s++){var a=f;""!==v[s]&&(a+="="+encodeURIComponent(String(v[s]))),n.push(a)}}return this.i=n.join("&")};var Ml=10;function _u(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Rl(n){return n.h?1:n.g?n.g.size:0}function id(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ka(n,e){n.g?n.g.add(e):n.h=e}function sd(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ac(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return xa(n.i)}function Nl(){}function Fh(){this.g=new Nl}function na(n,e,t){const s=t||"";try{po(n,function(a,f){let v=a;wi(a)&&(v=Vu(a)),e.push(s+f+"="+encodeURIComponent(v))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function uc(n,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function cl(n){this.l=n.ac||null,this.j=n.jb||!1}function Pl(n,e){kr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ma,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ud.prototype.cancel=function(){if(this.i=ac(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Nl.prototype.stringify=function(n){return Fn.JSON.stringify(n,void 0)},Nl.prototype.parse=function(n){return Fn.JSON.parse(n,void 0)},Kn(cl,x),cl.prototype.g=function(){return new Pl(this.l,this.j)},cl.prototype.i=function(n){return function(){return n}}({}),Kn(Pl,kr);var ma=0;function Pc(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function go(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Qu(n)}function Qu(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Yt=Pl.prototype).open=function(n,e){if(this.readyState!=ma)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Qu(this)},Yt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Fn).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Yt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,go(this)),this.readyState=ma},Yt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Qu(this)),this.g&&(this.readyState=3,Qu(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Fn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pc(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Yt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?go(this):Qu(this),3==this.readyState&&Pc(this)}},Yt.Va=function(n){this.g&&(this.response=this.responseText=n,go(this))},Yt.Ua=function(n){this.g&&(this.response=n,go(this))},Yt.ga=function(){this.g&&go(this)},Yt.setRequestHeader=function(n,e){this.v.append(n,e)},Yt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Yt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Pl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Vd=Fn.JSON.parse;function Ji(n){kr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Oo,this.K=this.L=!1}Kn(Ji,kr);var Oo="",lc=/^https?$/i,cc=["POST","PUT"];function od(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,jd(n),Fa(n)}function jd(n){n.D||(n.D=!0,Pr(n,"complete"),Pr(n,"error"))}function $d(n){if(n.h&&typeof Ls<"u"&&(!n.C[1]||4!=yu(n)||2!=n.aa()))if(n.v&&4==yu(n))Fr(n.Ha,0,n);else if(Pr(n,"readystatechange"),4==yu(n)){n.h=!1;try{const M=n.aa();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===M){var a=String(n.H).match(os)[1]||null;if(!a&&Fn.self&&Fn.self.location){var f=Fn.self.location.protocol;a=f.substr(0,f.length-1)}s=!lc.test(a?a.toLowerCase():"")}t=s}if(t)Pr(n,"complete"),Pr(n,"success");else{n.m=6;try{var v=2<yu(n)?n.g.statusText:""}catch{v=""}n.j=v+" ["+n.aa()+"]",jd(n)}}finally{Fa(n)}}}function Fa(n,e){if(n.g){Uh(n);const t=n.g,s=n.C[0]?So:null;n.g=null,n.C=null,e||Pr(n,"ready");try{t.onreadystatechange=s}catch{}}}function Uh(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Fn.clearTimeout(n.A),n.A=null)}function yu(n){return n.g?n.g.readyState:0}function ad(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Oo:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Vh(n){let e="";return Yo(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Ol(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=Vh(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ni(n,e,t))}function dl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Bh(n){this.Ca=0,this.i=[],this.j=new Xo,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=dl("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=dl("baseRetryDelayMs",5e3,n),this.bb=dl("retryDelaySeedMs",1e4,n),this.$a=dl("forwardChannelMaxRetries",2,n),this.ta=dl("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Ud(n&&n.concurrentRequestLimit),this.Fa=new Fh,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Ju(n){if(ld(n),3==n.G){var e=n.U++,t=ea(n.F);Ni(t,"SID",n.I),Ni(t,"RID",e),Ni(t,"TYPE","terminate"),ko(n,t),(e=new tn(n,n.j,e,void 0)).K=2,e.v=oc(ea(t)),t=!1,Fn.navigator&&Fn.navigator.sendBeacon&&(t=Fn.navigator.sendBeacon(e.v.toString(),"")),!t&&Fn.Image&&((new Image).src=e.v,t=!0),t||(e.g=dc(e.l,null),e.g.da(e.v)),e.F=Date.now(),Oe(e)}Lc(n)}function ud(n){n.g&&(Fl(n),n.g.cancel(),n.g=null)}function ld(n){ud(n),n.u&&(Fn.clearTimeout(n.u),n.u=null),dd(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Fn.clearTimeout(n.m),n.m=null)}function Xu(n){_u(n.h)||n.m||(n.m=!0,R(n.Ja,n),n.C=0)}function hl(n,e){var t;t=e?e.m:n.U++;const s=ea(n.F);Ni(s,"SID",n.I),Ni(s,"RID",t),Ni(s,"AID",n.T),ko(n,s),n.o&&n.s&&Ol(s,n.o,n.s),t=new tn(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=cd(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),ka(n.h,t),ro(t,s,e)}function ko(n,e){n.ia&&Yo(n.ia,function(t,s){Ni(e,s,t)}),n.l&&po({},function(t,s){Ni(e,s,t)})}function cd(n,e,t){t=Math.min(n.i.length,t);var s=n.l?ii(n.l.Ra,n.l,n):null;e:{var a=n.i;let f=-1;for(;;){const v=["count="+t];-1==f?0<t?(f=a[0].h,v.push("ofs="+f)):f=0:v.push("ofs="+f);let M=!0;for(let B=0;B<t;B++){let W=a[B].h;const ee=a[B].g;if(W-=f,0>W)f=Math.max(0,a[B].h-100),M=!1;else try{na(ee,v,"req"+W+"_")}catch{s&&s(ee)}}if(M){s=v.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,s}function Oc(n){n.g||n.u||(n.Z=1,R(n.Ia,n),n.A=0)}function kl(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=$u(ii(n.Ia,n),Fc(n,n.A)),n.A++,0))}function Fl(n){null!=n.B&&(Fn.clearTimeout(n.B),n.B=null)}function Ll(n){n.g=new tn(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ea(n.sa);Ni(e,"RID","rpc"),Ni(e,"SID",n.I),Ni(e,"CI",n.L?"0":"1"),Ni(e,"AID",n.T),Ni(e,"TYPE","xmlhttp"),ko(n,e),n.o&&n.s&&Ol(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=oc(ea(e)),t.s=null,t.P=!0,V(t,n)}function dd(n){null!=n.v&&(Fn.clearTimeout(n.v),n.v=null)}function kc(n,e){var t=null;if(n.g==e){dd(n),Fl(n),n.g=null;var s=2}else{if(!id(n.h,e))return;t=e.D,sd(n.h,e),s=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Pr(s=no(),new Nc(s,t)),Xu(n)}else Oc(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==s&&function Hd(n,e){return!(Rl(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=$u(ii(n.Ja,n,e),Fc(n,n.C)),n.C++,0)))}(n,e)||2==s&&kl(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:fl(n,5);break;case 4:fl(n,10);break;case 3:fl(n,6);break;default:fl(n,2)}}function Fc(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function fl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var s=ii(n.kb,n);t||(t=new fu("//www.google.com/images/cleardot.gif"),Fn.location&&"http"==Fn.location.protocol||ta(t,"https"),oc(t)),function Lh(n,e){const t=new Xo;if(Fn.Image){const s=new Image;s.onload=Cs(uc,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Cs(uc,t,s,"TestLoadImage: error",!1,e),s.onabort=Cs(uc,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Cs(uc,t,s,"TestLoadImage: timeout",!1,e),Fn.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else ss(2);n.G=0,n.l&&n.l.va(e),Lc(n),ld(n)}function Lc(n){if(n.G=0,n.la=[],n.l){const e=ac(n.h);(0!=e.length||0!=n.i.length)&&(Ki(n.la,e),Ki(n.la,n.i),n.h.i.length=0,xa(n.i),n.i.length=0),n.l.ua()}}function pl(n,e,t){var s=t instanceof fu?ea(t):new fu(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),ga(s,s.m);else{var a=Fn.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var f=new fu(null,void 0);s&&ta(f,s),e&&(f.g=e),a&&ga(f,a),t&&(f.l=t),s=f}return e=n.za,(t=n.D)&&e&&Ni(s,t,e),Ni(s,"VER",n.ma),ko(n,s),s}function dc(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ji(t&&n.Da&&!n.ra?new cl({jb:!0}):n.ra)).Ka(n.H),e}function Gd(){}function hc(){if(lt&&!(10<=Number(Ra)))throw Error("Environmental error: no available transport.")}function ra(n,e){kr.call(this),this.g=new Bh(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Ma(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ma(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ul(this)}function jh(n){J.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function hd(){re.call(this),this.status=1}function Ul(n){this.g=n}(Yt=Ji.prototype).Ka=function(n){this.L=n},Yt.da=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Re.g(),this.C=function E(n){return n.h||(n.h=n.i())}(this.u?this.u:Re),this.g.onreadystatechange=ii(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(f){return void od(this,f)}if(n=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const f of s.keys())t.set(f,s.get(f))}s=Array.from(t.keys()).find(f=>"content-type"==f.toLowerCase()),a=Fn.FormData&&n instanceof Fn.FormData,!(0<=Qs(cc,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[f,v]of t)this.g.setRequestHeader(f,v);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Uh(this),0<this.B&&((this.K=function Bd(n){return lt&&function Js(){return function ce(n){var e=bs;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ho(String(Yr)).split("."),t=ho("9").split("."),s=Math.max(e.length,t.length);for(let v=0;0==n&&v<s;v++){var a=e[v]||"",f=t[v]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],0==a[0].length&&0==f[0].length)break;n=k(0==a[1].length?0:parseInt(a[1],10),0==f[1].length?0:parseInt(f[1],10))||k(0==a[2].length,0==f[2].length)||k(a[2],f[2]),a=a[3],f=f[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ii(this.qa,this)):this.A=Fr(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(f){od(this,f)}},Yt.qa=function(){typeof Ls<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pr(this,"timeout"),this.abort(8))},Yt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Pr(this,"complete"),Pr(this,"abort"),Fa(this))},Yt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fa(this,!0)),Ji.X.M.call(this)},Yt.Ha=function(){this.s||(this.F||this.v||this.l?$d(this):this.fb())},Yt.fb=function(){$d(this)},Yt.aa=function(){try{return 2<yu(this)?this.g.status:-1}catch{return-1}},Yt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Yt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Vd(e)}},Yt.Ea=function(){return this.m},Yt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Yt=Bh.prototype).ma=8,Yt.G=1,Yt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new tn(this,this.j,n,void 0);let f=this.s;if(this.S&&(f?(f=Ts(f),Ei(f,this.S)):f=this.S),null!==this.o||this.N||(a.H=f,f=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=cd(this,a,e),Ni(t=ea(this.F),"RID",n),Ni(t,"CVER",22),this.D&&Ni(t,"X-HTTP-Session-Id",this.D),ko(this,t),f&&(this.N?e="headers="+encodeURIComponent(String(Vh(f)))+"&"+e:this.o&&Ol(t,this.o,f)),ka(this.h,a),this.Ya&&Ni(t,"TYPE","init"),this.O?(Ni(t,"$req",e),Ni(t,"SID","null"),a.Z=!0,ro(a,t,null)):ro(a,t,e),this.G=2}}else 3==this.G&&(n?hl(this,n):0==this.i.length||_u(this.h)||hl(this))},Yt.Ia=function(){if(this.u=null,Ll(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=$u(ii(this.eb,this),n)}},Yt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ss(10),ud(this),Ll(this))},Yt.cb=function(){null!=this.v&&(this.v=null,ud(this),kl(this),ss(19))},Yt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),ss(2)):(this.j.info("Failed to ping google.com"),ss(1))},(Yt=Gd.prototype).xa=function(){},Yt.wa=function(){},Yt.va=function(){},Yt.ua=function(){},Yt.Ra=function(){},hc.prototype.g=function(n,e){return new ra(n,e)},Kn(ra,kr),ra.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ss(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=pl(n,null,n.V),Xu(n)},ra.prototype.close=function(){Ju(this.g)},ra.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Vu(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Xu(e)},ra.prototype.M=function(){this.g.l=null,delete this.j,Ju(this.g),delete this.g,ra.X.M.call(this)},Kn(jh,J),Kn(hd,re),Kn(Ul,Gd),Ul.prototype.xa=function(){Pr(this.g,"a")},Ul.prototype.wa=function(n){Pr(this.g,new jh(n))},Ul.prototype.va=function(n){Pr(this.g,new hd)},Ul.prototype.ua=function(){Pr(this.g,"b")},hc.prototype.createWebChannel=hc.prototype.g,ra.prototype.send=ra.prototype.u,ra.prototype.open=ra.prototype.m,ra.prototype.close=ra.prototype.close,sc.NO_ERROR=0,sc.TIMEOUT=8,sc.HTTP_ERROR=6,b.COMPLETE="complete",P.EventType=$,$.OPEN="a",$.CLOSE="b",$.ERROR="c",$.MESSAGE="d",kr.prototype.listen=kr.prototype.N,Ji.prototype.listenOnce=Ji.prototype.O,Ji.prototype.getLastError=Ji.prototype.Oa,Ji.prototype.getLastErrorCode=Ji.prototype.Ea,Ji.prototype.getStatus=Ji.prototype.aa,Ji.prototype.getResponseJson=Ji.prototype.Sa,Ji.prototype.getResponseText=Ji.prototype.fa,Ji.prototype.send=Ji.prototype.da,Ji.prototype.setWithCredentials=Ji.prototype.Ka;var gl=Fs.createWebChannelTransport=function(){return new hc},Vl=Fs.getStatEventTarget=function(){return no()},fc=Fs.ErrorCode=sc,zd=Fs.EventType=b,Xa=Fs.Event=Us,ml=Fs.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},_l=Fs.FetchXmlHttpFactory=cl,yl=Fs.WebChannel=P,La=Fs.XhrIo=Ji;const Ru="@firebase/firestore";class as{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}as.UNAUTHENTICATED=new as(null),as.GOOGLE_CREDENTIALS=new as("google-credentials-uid"),as.FIRST_PARTY=new as("first-party-uid"),as.MOCK_USER=new as("mock-user");let el="9.17.2";const Fo=new ks.Yd("@firebase/firestore");function Bl(){return Fo.logLevel}function Dt(n,...e){if(Fo.logLevel<=ks.in.DEBUG){const t=e.map(jl);Fo.debug(`Firestore (${el}): ${n}`,...t)}}function _i(n,...e){if(Fo.logLevel<=ks.in.ERROR){const t=e.map(jl);Fo.error(`Firestore (${el}): ${n}`,...t)}}function Hu(n,...e){if(Fo.logLevel<=ks.in.WARN){const t=e.map(jl);Fo.warn(`Firestore (${el}): ${n}`,...t)}}function jl(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function _n(n="Unexpected state"){const e=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: `+n;throw _i(e),new Error(e)}function Cn(n,e){n||_n()}function Wt(n,e){return n}const Ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends Xe.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ys{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class pc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(as.UNAUTHENTICATED))}shutdown(){}}class vl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Wd{constructor(e){this.t=e,this.currentUser=as.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const f=W=>this.i!==a?(a=this.i,t(W)):Promise.resolve();let v=new ys;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new ys,e.enqueueRetryable(()=>f(this.currentUser))};const M=()=>{const W=v;e.enqueueRetryable((0,_e.Z)(function*(){yield W.promise,yield f(s.currentUser)}))},B=W=>{Dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=W,this.auth.addAuthTokenListener(this.o),M()};this.t.onInit(W=>B(W)),setTimeout(()=>{if(!this.auth){const W=this.t.getImmediate({optional:!0});W?B(W):(Dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new ys)}},0),M()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Cn("string"==typeof s.accessToken),new pc(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Cn(null===e||"string"==typeof e),new as(e)}}class Xi{constructor(e,t,s,a){this.h=e,this.l=t,this.m=s,this.g=a,this.type="FirstParty",this.user=as.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Cn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class qd{constructor(e,t,s,a){this.h=e,this.l=t,this.m=s,this.g=a}getToken(){return Promise.resolve(new Xi(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(as.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zd{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const s=f=>{null!=f.error&&Dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const v=f.token!==this.A;return this.A=f.token,Dt("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>s(f))};const a=f=>{Dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.appCheck.addTokenListener(this.o)};this.T.onInit(f=>a(f)),setTimeout(()=>{if(!this.appCheck){const f=this.T.getImmediate({optional:!0});f?a(f):Dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Cn("string"==typeof t.token),this.A=t.token,new pd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $l(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}class gc{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=$l(40);for(let f=0;f<a.length;++f)s.length<20&&a[f]<t&&(s+=e.charAt(a[f]%e.length))}return s}}function qn(n,e){return n<e?-1:n>e?1:0}function Hl(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}function Vc(n){return n+"\0"}class Gi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Et(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Et(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Et(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Et(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gi.fromMillis(Date.now())}static fromDate(e){return Gi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Gi(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qn(this.nanoseconds,e.nanoseconds):qn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bn(e)}static min(){return new bn(new Gi(0,0))}static max(){return new bn(new Gi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bc{constructor(e,t,s){void 0===t?t=0:t>e.length&&_n(),void 0===s?s=e.length-t:s>e.length-t&&_n(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Bc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bc?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const f=e.get(a),v=t.get(a);if(f<v)return-1;if(f>v)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Hr extends Bc{construct(e,t,s){return new Hr(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Et(Ye.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Hr(t)}static emptyPath(){return new Hr([])}}const I=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class p extends Bc{construct(e,t,s){return new p(e,t,s)}static isValidIdentifier(e){return I.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),p.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new p(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const f=()=>{if(0===s.length)throw new Et(Ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let v=!1;for(;a<e.length;){const M=e[a];if("\\"===M){if(a+1===e.length)throw new Et(Ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const B=e[a+1];if("\\"!==B&&"."!==B&&"`"!==B)throw new Et(Ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=B,a+=2}else"`"===M?(v=!v,a++):"."!==M||v?(s+=M,a++):(f(),a++)}if(f(),v)throw new Et(Ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new p(t)}static emptyPath(){return new p([])}}class g{constructor(e){this.path=e}static fromPath(e){return new g(Hr.fromString(e))}static fromName(e){return new g(Hr.fromString(e).popFirst(5))}static empty(){return new g(Hr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Hr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Hr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new g(new Hr(e.slice()))}}class S{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function Z(n){return n.fields.find(e=>2===e.kind)}function ie(n){return n.fields.filter(e=>2!==e.kind)}S.UNKNOWN_ID=-1;class ot{constructor(e,t){this.fieldPath=e,this.kind=t}}class zt{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new zt(0,si.min())}}function $n(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=bn.fromTimestamp(1e9===s?new Gi(t+1,0):new Gi(t,s));return new si(a,g.empty(),e)}function Mn(n){return new si(n.readTime,n.key,-1)}class si{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new si(bn.min(),g.empty(),-1)}static max(){return new si(bn.max(),g.empty(),-1)}}function eu(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=g.comparator(n.documentKey,e.documentKey),0!==t?t:qn(n.largestBatchId,e.largestBatchId))}const mc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function tu(n){return vu.apply(this,arguments)}function vu(){return vu=(0,_e.Z)(function*(n){if(n.code!==Ye.FAILED_PRECONDITION||n.message!==mc)throw n;Dt("LocalStore","Unexpectedly lost primary lease")}),vu.apply(this,arguments)}class We{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_n(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new We((s,a)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(s,a)},this.catchCallback=f=>{this.wrapFailure(t,f).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof We?t:We.resolve(t)}catch(t){return We.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):We.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):We.reject(t)}static resolve(e){return new We((t,s)=>{t(e)})}static reject(e){return new We((t,s)=>{s(e)})}static waitFor(e){return new We((t,s)=>{let a=0,f=0,v=!1;e.forEach(M=>{++a,M.next(()=>{++f,v&&f===a&&t()},B=>s(B))}),v=!0,f===a&&t()})}static or(e){let t=We.resolve(!1);for(const s of e)t=t.next(a=>a?We.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,f)=>{s.push(t.call(this,a,f))}),this.waitFor(s)}static mapArray(e,t){return new We((s,a)=>{const f=e.length,v=new Array(f);let M=0;for(let B=0;B<f;B++){const W=B;t(e[W]).next(ee=>{v[W]=ee,++M,M===f&&s(v)},ee=>a(ee))}})}static doWhile(e,t){return new We((s,a)=>{const f=()=>{!0===e()?t().next(()=>{f()},a):s()};f()})}}class El{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ys,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new jc(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=Zp(s.target.error);this.v.reject(new jc(e,a))}}static open(e,t,s,a){try{return new El(t,e.transaction(a,s))}catch(f){throw new jc(t,f)}}get P(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Dt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new qp(t)}}class nu{constructor(e,t,s){this.name=e,this.version=t,this.S=s,12.2===nu.D((0,Xe.z$)())&&_i("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Dt("SimpleDb","Removing database:",e),Nu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Xe.hl)())return!1;if(nu.N())return!0;const e=(0,Xe.z$)(),t=nu.D(e),s=0<t&&t<10,a=nu.k(e),f=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||f)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static k(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}F(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Dt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const f=indexedDB.open(t.name,t.version);f.onsuccess=v=>{s(v.target.result)},f.onblocked=()=>{a(new jc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},f.onerror=v=>{const M=v.target.error;a("VersionError"===M.name?new Et(Ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===M.name?new Et(Ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+M):new jc(e,M))},f.onupgradeneeded=v=>{Dt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',v.oldVersion),t.S.$(v.target.result,f.transaction,v.oldVersion,t.version).next(()=>{Dt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var f=this;return(0,_e.Z)(function*(){const v="readonly"===t;let M=0;for(;;){++M;try{f.db=yield f.F(e);const B=El.open(f.db,e,v?"readonly":"readwrite",s),W=a(B).next(ee=>(B.V(),ee)).catch(ee=>(B.abort(ee),We.reject(ee))).toPromise();return W.catch(()=>{}),yield B.P,W}catch(B){const W=B,ee="FirebaseError"!==W.name&&M<3;if(Dt("SimpleDb","Transaction failed with error:",W.message,"Retrying:",ee),f.close(),!ee)return Promise.reject(W)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Yd{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Nu(this.q.delete())}}class jc extends Et{constructor(e,t){super(Ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function tl(n){return"IndexedDbTransactionError"===n.name}class qp{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Dt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Dt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Nu(s)}add(e){return Dt("SimpleDb","ADD",this.store.name,e,e),Nu(this.store.add(e))}get(e){return Nu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Dt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Dt("SimpleDb","DELETE",this.store.name,e),Nu(this.store.delete(e))}count(){return Dt("SimpleDb","COUNT",this.store.name),Nu(this.store.count())}W(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),f=[];return this.H(a,(v,M)=>{f.push(M)}).next(()=>f)}{const a=this.store.getAll(s.range);return new We((f,v)=>{a.onerror=M=>{v(M.target.error)},a.onsuccess=M=>{f(M.target.result)}})}}J(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new We((a,f)=>{s.onerror=v=>{f(v.target.error)},s.onsuccess=v=>{a(v.target.result)}})}Y(e,t){Dt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Z=!1;const a=this.cursor(s);return this.H(a,(f,v,M)=>M.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.H(a,t)}tt(e){const t=this.cursor({});return new We((s,a)=>{t.onerror=f=>{const v=Zp(f.target.error);a(v)},t.onsuccess=f=>{const v=f.target.result;v?e(v.primaryKey,v.value).next(M=>{M?v.continue():s()}):s()}})}H(e,t){const s=[];return new We((a,f)=>{e.onerror=v=>{f(v.target.error)},e.onsuccess=v=>{const M=v.target.result;if(!M)return void a();const B=new Yd(M),W=t(M.primaryKey,M.value,B);if(W instanceof We){const ee=W.catch(de=>(B.done(),We.reject(de)));s.push(ee)}B.isDone?a():null===B.G?M.continue():M.continue(B.G)}}).next(()=>We.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Z?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Nu(n){return new We((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const a=Zp(s.target.error);t(a)}})}let gd=!1;function Zp(n){const e=nu.D((0,Xe.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new Et("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gd||(gd=!0,setTimeout(()=>{throw s},0)),s}}return n}class gy{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Dt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Dt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(s){tl(s)?Dt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield tu(s)}yield t.nt(6e4)}))}}class Kp{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.it(s,e))})()}it(e,t){const s=new Set;let a=t,f=!0;return We.doWhile(()=>!0===f&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!s.has(v))return Dt("IndexBackiller",`Processing collection: ${v}`),this.rt(e,v,a).next(M=>{a-=M,s.add(v)});f=!1})).next(()=>t-a)}rt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(f=>{const v=f.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.ot(a,f)).next(M=>(Dt("IndexBackiller",`Updating offset: ${M}`),this.localStore.indexManager.updateCollectionGroup(e,t,M))).next(()=>v.size)}))}ot(e,t){let s=e;return t.changes.forEach((a,f)=>{const v=Mn(f);eu(v,s)>0&&(s=v)}),new si(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Pu=(()=>{class n{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ut(a),this.ct=a=>s.writeSequenceNumber(a))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class gm{constructor(e,t,s,a,f,v,M,B){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=f,this.forceLongPolling=v,this.autoDetectLongPolling=M,this.useFetchStreams=B}}class nl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nl&&e.projectId===this.projectId&&e.database===this.database}}function jf(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $f(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function us(n){return null==n}function md(n){return 0===n&&1/n==-1/0}function Yp(n){return"number"==typeof n&&Number.isInteger(n)&&!md(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Qp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw a instanceof DOMException?new Qp("Invalid base64 string: "+a):a}}(e);return new Qr(t)}static fromUint8Array(e){const t=function(s){let a="";for(let f=0;f<s.length;++f)a+=String.fromCharCode(s[f]);return a}(e);return new Qr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qr.EMPTY_BYTE_STRING=new Qr("");const Ou=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gu(n){if(Cn(!!n),"string"==typeof n){let e=0;const t=Ou.exec(n);if(Cn(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Bs(n.seconds),nanos:Bs(n.nanos)}}function Bs(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function _c(n){return"string"==typeof n?Qr.fromBase64String(n):Qr.fromUint8Array(n)}function Jp(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function mm(n){const e=n.mapValue.fields.__previous_value__;return Jp(e)?mm(e):e}function Ua(n){const e=Gu(n.mapValue.fields.__local_write_time__.timestampValue);return new Gi(e.seconds,e.nanos)}const Il={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qd={nullValue:"NULL_VALUE"};function yc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jp(n)?4:Xp(n)?9007199254740991:10:_n()}function rl(n,e){if(n===e)return!0;const t=yc(n);if(t!==yc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ua(n).isEqual(Ua(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const f=Gu(s.timestampValue),v=Gu(a.timestampValue);return f.seconds===v.seconds&&f.nanos===v.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,_c(n.bytesValue).isEqual(_c(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return Bs(s.geoPointValue.latitude)===Bs(a.geoPointValue.latitude)&&Bs(s.geoPointValue.longitude)===Bs(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Bs(s.integerValue)===Bs(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const f=Bs(s.doubleValue),v=Bs(a.doubleValue);return f===v?md(f)===md(v):isNaN(f)&&isNaN(v)}return!1}(n,e);case 9:return Hl(n.arrayValue.values||[],e.arrayValue.values||[],rl);case 10:return function(s,a){const f=s.mapValue.fields||{},v=a.mapValue.fields||{};if(jf(f)!==jf(v))return!1;for(const M in f)if(f.hasOwnProperty(M)&&(void 0===v[M]||!rl(f[M],v[M])))return!1;return!0}(n,e);default:return _n()}var a}function Jd(n,e){return void 0!==(n.values||[]).find(t=>rl(t,e))}function Wl(n,e){if(n===e)return 0;const t=yc(n),s=yc(e);if(t!==s)return qn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return qn(n.booleanValue,e.booleanValue);case 2:return function(a,f){const v=Bs(a.integerValue||a.doubleValue),M=Bs(f.integerValue||f.doubleValue);return v<M?-1:v>M?1:v===M?0:isNaN(v)?isNaN(M)?0:-1:1}(n,e);case 3:return Hh(n.timestampValue,e.timestampValue);case 4:return Hh(Ua(n),Ua(e));case 5:return qn(n.stringValue,e.stringValue);case 6:return function(a,f){const v=_c(a),M=_c(f);return v.compareTo(M)}(n.bytesValue,e.bytesValue);case 7:return function(a,f){const v=a.split("/"),M=f.split("/");for(let B=0;B<v.length&&B<M.length;B++){const W=qn(v[B],M[B]);if(0!==W)return W}return qn(v.length,M.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,f){const v=qn(Bs(a.latitude),Bs(f.latitude));return 0!==v?v:qn(Bs(a.longitude),Bs(f.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,f){const v=a.values||[],M=f.values||[];for(let B=0;B<v.length&&B<M.length;++B){const W=Wl(v[B],M[B]);if(W)return W}return qn(v.length,M.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,f){if(a===Il.mapValue&&f===Il.mapValue)return 0;if(a===Il.mapValue)return 1;if(f===Il.mapValue)return-1;const v=a.fields||{},M=Object.keys(v),B=f.fields||{},W=Object.keys(B);M.sort(),W.sort();for(let ee=0;ee<M.length&&ee<W.length;++ee){const de=qn(M[ee],W[ee]);if(0!==de)return de;const ke=Wl(v[M[ee]],B[W[ee]]);if(0!==ke)return ke}return qn(M.length,W.length)}(n.mapValue,e.mapValue);default:throw _n()}}function Hh(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return qn(n,e);const t=Gu(n),s=Gu(e),a=qn(t.seconds,s.seconds);return 0!==a?a:qn(t.nanos,s.nanos)}function vc(n){return ql(n)}function ql(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(s){const a=Gu(s);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?_c(n.bytesValue).toBase64():"referenceValue"in n?g.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(s){let a="[",f=!0;for(const v of s.values||[])f?f=!1:a+=",",a+=ql(v);return a+"]"}(n.arrayValue):"mapValue"in n?function(s){const a=Object.keys(s.fields||{}).sort();let f="{",v=!0;for(const M of a)v?v=!1:f+=",",f+=`${M}:${ql(s.fields[M])}`;return f+"}"}(n.mapValue):_n();var e}function _d(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yd(n){return!!n&&"integerValue"in n}function Xd(n){return!!n&&"arrayValue"in n}function Gh(n){return!!n&&"nullValue"in n}function zh(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vd(n){return!!n&&"mapValue"in n}function zu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Gl(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=zu(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Xp(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Hf(n){return"nullValue"in n?Qd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?_d(nl.empty(),g.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:_n()}function Wh(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?_d(nl.empty(),g.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Il:_n()}function Gf(n,e){const t=Wl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function qh(n,e){const t=Wl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class il{constructor(e,t){this.position=e,this.inclusive=t}}function Zl(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const f=e[a],v=n.position[a];if(s=f.field.isKeyField()?g.comparator(g.fromName(v.referenceValue),t.key):Wl(v,t.data.field(f.field)),"desc"===f.dir&&(s*=-1),0!==s)break}return s}function zf(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!rl(n.position[t],e.position[t]))return!1;return!0}class Zh{}class Gr extends Zh{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new te(e,t,s):"array-contains"===t?new ut(e,s):"in"===t?new It(e,s):"not-in"===t?new on(e,s):"array-contains-any"===t?new Rn(e,s):new Gr(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new se(e,s):new me(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Wl(t,this.value)):null!==t&&yc(this.value)===yc(t)&&this.matchesComparison(Wl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _n()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ci extends Zh{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new Ci(e,t)}matches(e){return $c(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function $c(n){return"and"===n.op}function h(n){return"or"===n.op}function l(n){return c(n)&&$c(n)}function c(n){for(const e of n.filters)if(e instanceof Ci)return!1;return!0}function m(n){if(n instanceof Gr)return n.field.canonicalString()+n.op.toString()+vc(n.value);if(l(n))return n.filters.map(e=>m(e)).join(",");{const e=n.filters.map(t=>m(t)).join(",");return`${n.op}(${e})`}}function T(n,e){return n instanceof Gr?(t=n,(s=e)instanceof Gr&&t.op===s.op&&t.field.isEqual(s.field)&&rl(t.value,s.value)):n instanceof Ci?function(t,s){return s instanceof Ci&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,f,v)=>a&&T(f,s.filters[v]),!0)}(n,e):void _n();var t,s}function F(n,e){const t=n.filters.concat(e);return Ci.create(t,n.op)}function G(n){return n instanceof Gr?`${(e=n).field.canonicalString()} ${e.op} ${vc(e.value)}`:n instanceof Ci?function(e){return e.op.toString()+" {"+e.getFilters().map(G).join(" ,")+"}"}(n):"Filter";var e}class te extends Gr{constructor(e,t,s){super(e,t,s),this.key=g.fromName(s.referenceValue)}matches(e){const t=g.comparator(e.key,this.key);return this.matchesComparison(t)}}class se extends Gr{constructor(e,t){super(e,"in",t),this.keys=rt(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class me extends Gr{constructor(e,t){super(e,"not-in",t),this.keys=rt(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rt(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>g.fromName(s.referenceValue))}class ut extends Gr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xd(t)&&Jd(t.arrayValue,this.value)}}class It extends Gr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Jd(this.value.arrayValue,t)}}class on extends Gr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Jd(this.value.arrayValue,t)}}class Rn extends Gr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Jd(this.value.arrayValue,s))}}class Or{constructor(e,t="asc"){this.field=e,this.dir=t}}function Lo(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class yi{constructor(e,t){this.comparator=e,this.root=t||js.EMPTY}insert(e,t){return new yi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,js.BLACK,null,null))}remove(e){return new yi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,js.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wu(this.root,e,this.comparator,!0)}}class Wu{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?s(e.key,t):1,t&&a&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(0===f){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class js{constructor(e,t,s,a,f){this.key=e,this.value=t,this.color=s??js.RED,this.left=a??js.EMPTY,this.right=f??js.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,f){return new js(e??this.key,t??this.value,s??this.color,a??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const f=s(e,a.key);return a=f<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===f?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return js.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return js.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,js.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,js.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _n();const e=this.left.check();if(e!==this.right.check())throw _n();return e+(this.isRed()?0:1)}}js.EMPTY=null,js.RED=!0,js.BLACK=!1,js.EMPTY=new class{constructor(){this.size=0}get key(){throw _n()}get value(){throw _n()}get color(){throw _n()}get left(){throw _n()}get right(){throw _n()}copy(n,e,t,s,a){return this}insert(n,e,t){return new js(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pi{constructor(e){this.comparator=e,this.data=new yi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _m(this.data.getIterator())}getIteratorFrom(e){return new _m(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Pi)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,f=s.getNext().key;if(0!==this.comparator(a,f))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pi(this.comparator);return t.data=e,t}}class _m{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wd(n){return n.hasNext()?n.getNext():void 0}class wu{constructor(e){this.fields=e,e.sort(p.comparator)}static empty(){return new wu([])}unionWith(e){let t=new Pi(p.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new wu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hl(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Va{constructor(e){this.value=e}static empty(){return new Va({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!vd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zu(t)}setAll(e){let t=p.emptyPath(),s={},a=[];e.forEach((v,M)=>{if(!t.isImmediateParentOf(M)){const B=this.getFieldsMap(t);this.applyChanges(B,s,a),s={},a=[],t=M.popLast()}v?s[M.lastSegment()]=zu(v):a.push(M.lastSegment())});const f=this.getFieldsMap(t);this.applyChanges(f,s,a)}delete(e){const t=this.field(e.popLast());vd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];vd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Gl(t,(a,f)=>e[a]=f);for(const a of s)delete e[a]}clone(){return new Va(zu(this.value))}}function eg(n){const e=[];return Gl(n.fields,(t,s)=>{const a=new p([t]);if(vd(s)){const f=eg(s.mapValue).fields;if(0===f.length)e.push(a);else for(const v of f)e.push(a.child(v))}else e.push(a)}),new wu(e)}class zi{constructor(e,t,s,a,f,v,M){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=f,this.data=v,this.documentState=M}static newInvalidDocument(e){return new zi(e,0,bn.min(),bn.min(),bn.min(),Va.empty(),0)}static newFoundDocument(e,t,s,a){return new zi(e,1,t,bn.min(),s,a,0)}static newNoDocument(e,t){return new zi(e,2,t,bn.min(),bn.min(),Va.empty(),0)}static newUnknownDocument(e,t){return new zi(e,3,t,bn.min(),bn.min(),Va.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(bn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Va.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Va.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof zi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sw{constructor(e,t=null,s=[],a=[],f=null,v=null,M=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=f,this.startAt=v,this.endAt=M,this._t=null}}function ym(n,e=null,t=[],s=[],a=null,f=null,v=null){return new sw(n,e,t,s,a,f,v)}function eh(n){const e=Wt(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>m(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),us(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>vc(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>vc(s)).join(",")),e._t=t}return e._t}function Wf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Lo(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!T(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zf(n.startAt,e.startAt)&&zf(n.endAt,e.endAt)}function tg(n){return g.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ng(n,e){return n.filters.filter(t=>t instanceof Gr&&t.field.isEqual(e))}function _y(n,e,t){let s=Qd,a=!0;for(const f of ng(n,e)){let v=Qd,M=!0;switch(f.op){case"<":case"<=":v=Hf(f.value);break;case"==":case"in":case">=":v=f.value;break;case">":v=f.value,M=!1;break;case"!=":case"not-in":v=Qd}Gf({value:s,inclusive:a},{value:v,inclusive:M})<0&&(s=v,a=M)}if(null!==t)for(let f=0;f<n.orderBy.length;++f)if(n.orderBy[f].field.isEqual(e)){const v=t.position[f];Gf({value:s,inclusive:a},{value:v,inclusive:t.inclusive})<0&&(s=v,a=t.inclusive);break}return{value:s,inclusive:a}}function th(n,e,t){let s=Il,a=!0;for(const f of ng(n,e)){let v=Il,M=!0;switch(f.op){case">=":case">":v=Wh(f.value),M=!1;break;case"==":case"in":case"<=":v=f.value;break;case"<":v=f.value,M=!1;break;case"!=":case"not-in":v=Il}qh({value:s,inclusive:a},{value:v,inclusive:M})>0&&(s=v,a=M)}if(null!==t)for(let f=0;f<n.orderBy.length;++f)if(n.orderBy[f].field.isEqual(e)){const v=t.position[f];qh({value:s,inclusive:a},{value:v,inclusive:t.inclusive})>0&&(s=v,a=t.inclusive);break}return{value:s,inclusive:a}}class ru{constructor(e,t=null,s=[],a=[],f=null,v="F",M=null,B=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=f,this.limitType=v,this.startAt=M,this.endAt=B,this.wt=null,this.gt=null}}function yy(n,e,t,s,a,f,v,M){return new ru(n,e,t,s,a,f,v,M)}function Kh(n){return new ru(n)}function ow(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function vy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function qf(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function wy(n){return null!==n.collectionGroup}function Ed(n){const e=Wt(n);if(null===e.wt){e.wt=[];const t=qf(e),s=vy(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new Or(t)),e.wt.push(new Or(p.keyField(),"asc"));else{let a=!1;for(const f of e.explicitOrderBy)e.wt.push(f),f.field.isKeyField()&&(a=!0);if(!a){const f=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Or(p.keyField(),f))}}}return e.wt}function Eu(n){const e=Wt(n);if(!e.gt)if("F"===e.limitType)e.gt=ym(e.path,e.collectionGroup,Ed(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const f of Ed(e))t.push(new Or(f.field,"desc"===f.dir?"asc":"desc"));const s=e.endAt?new il(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new il(e.startAt.position,e.startAt.inclusive):null;e.gt=ym(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e.gt}function vm(n,e){e.getFirstInequalityField(),qf(n);const t=n.filters.concat([e]);return new ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zf(n,e,t){return new ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kf(n,e){return Wf(Eu(n),Eu(e))&&n.limitType===e.limitType}function Ey(n){return`${eh(Eu(n))}|lt:${n.limitType}`}function sl(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>G(s)).join(", ")}]`),us(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>vc(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>vc(s)).join(",")),`Target(${t})`}(Eu(n))}; limitType=${n.limitType})`}function Yf(n,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):g.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,s){for(const a of Ed(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(n,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(n,e)&&(s=e,!((t=n).startAt&&!function(a,f,v){const M=Zl(a,f,v);return a.inclusive?M<=0:M<0}(t.startAt,Ed(t),s)||t.endAt&&!function(a,f,v){const M=Zl(a,f,v);return a.inclusive?M>=0:M>0}(t.endAt,Ed(t),s)));var t,s}function wm(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Iy(n){return(e,t)=>{let s=!1;for(const a of Ed(n)){const f=aw(a,e,t);if(0!==f)return f;s=s||a.field.isKeyField()}return 0}}function aw(n,e,t){const s=n.field.isKeyField()?g.comparator(e.key,t.key):function(a,f,v){const M=f.data.field(a),B=v.data.field(a);return null!==M&&null!==B?Wl(M,B):_n()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return _n()}}function Cy(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:md(e)?"-0":e}}function by(n){return{integerValue:""+n}}function Em(n,e){return Yp(e)?by(e):Cy(n,e)}class rg{constructor(){this._=void 0}}function uw(n,e,t){return n instanceof nh?function(s,a){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&(f.fields.__previous_value__=a),{mapValue:f}}(t,e):n instanceof Id?Im(n,e):n instanceof rh?Ty(n,e):function(s,a){const f=pr(s,a),v=Dy(f)+Dy(s.It);return yd(f)&&yd(s.It)?by(v):Cy(s.Tt,v)}(n,e)}function lw(n,e,t){return n instanceof Id?Im(n,e):n instanceof rh?Ty(n,e):t}function pr(n,e){return n instanceof ih?yd(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class nh extends rg{}class Id extends rg{constructor(e){super(),this.elements=e}}function Im(n,e){const t=Cm(e);for(const s of n.elements)t.some(a=>rl(a,s))||t.push(s);return{arrayValue:{values:t}}}class rh extends rg{constructor(e){super(),this.elements=e}}function Ty(n,e){let t=Cm(e);for(const s of n.elements)t=t.filter(a=>!rl(a,s));return{arrayValue:{values:t}}}class ih extends rg{constructor(e,t){super(),this.Tt=e,this.It=t}}function Dy(n){return Bs(n.integerValue||n.doubleValue)}function Cm(n){return Xd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Qf{constructor(e,t){this.field=e,this.transform=t}}class eI{constructor(e,t){this.version=e,this.transformResults=t}}class Ds{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ds}static exists(e){return new Ds(void 0,e)}static updateTime(e){return new Ds(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class wc{}function Sy(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Yh(n.key,Ds.none()):new Xf(n.key,n.data,Ds.none());{const t=n.data,s=Va.empty();let a=new Pi(p.comparator);for(let f of e.fields)if(!a.has(f)){let v=t.field(f);null===v&&f.length>1&&(f=f.popLast(),v=t.field(f)),null===v?s.delete(f):s.set(f,v),a=a.add(f)}return new Cd(n.key,s,new wu(a.toArray()),Ds.none())}}function bm(n,e,t){n instanceof Xf?function(s,a,f){const v=s.value.clone(),M=Tm(s.fieldTransforms,a,f.transformResults);v.setAll(M),a.convertToFoundDocument(f.version,v).setHasCommittedMutations()}(n,e,t):n instanceof Cd?function(s,a,f){if(!Jf(s.precondition,a))return void a.convertToUnknownDocument(f.version);const v=Tm(s.fieldTransforms,a,f.transformResults),M=a.data;M.setAll(Ay(s)),M.setAll(v),a.convertToFoundDocument(f.version,M).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function sh(n,e,t,s){return n instanceof Xf?function(a,f,v,M){if(!Jf(a.precondition,f))return v;const B=a.value.clone(),W=fw(a.fieldTransforms,M,f);return B.setAll(W),f.convertToFoundDocument(f.version,B).setHasLocalMutations(),null}(n,e,t,s):n instanceof Cd?function(a,f,v,M){if(!Jf(a.precondition,f))return v;const B=fw(a.fieldTransforms,M,f),W=f.data;return W.setAll(Ay(a)),W.setAll(B),f.convertToFoundDocument(f.version,W).setHasLocalMutations(),null===v?null:v.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(ee=>ee.field))}(n,e,t,s):(v=t,Jf(n.precondition,f=e)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):v);var f,v}function dw(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),f=pr(s.transform,a||null);null!=f&&(null===t&&(t=Va.empty()),t.set(s.field,f))}return t||null}function hw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===s||t&&s&&Hl(t,s,(a,f)=>function cw(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(t=n.transform)instanceof Id&&s instanceof Id||t instanceof rh&&s instanceof rh?Hl(t.elements,s.elements,rl):t instanceof ih&&s instanceof ih?rl(t.It,s.It):t instanceof nh&&s instanceof nh);var t,s}(a,f))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,s}class Xf extends wc{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Cd extends wc{constructor(e,t,s,a,f=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function Ay(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function Tm(n,e,t){const s=new Map;Cn(n.length===t.length);for(let a=0;a<t.length;a++){const f=n[a],v=f.transform,M=e.data.field(f.field);s.set(f.field,lw(v,M,t[a]))}return s}function fw(n,e,t){const s=new Map;for(const a of n){const f=a.transform,v=t.data.field(a.field);s.set(a.field,uw(f,v,e))}return s}class Yh extends wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bd extends wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pw{constructor(e){this.count=e}}var Uo,Jr;function xy(n){switch(n){default:return _n();case Ye.CANCELLED:case Ye.UNKNOWN:case Ye.DEADLINE_EXCEEDED:case Ye.RESOURCE_EXHAUSTED:case Ye.INTERNAL:case Ye.UNAVAILABLE:case Ye.UNAUTHENTICATED:return!1;case Ye.INVALID_ARGUMENT:case Ye.NOT_FOUND:case Ye.ALREADY_EXISTS:case Ye.PERMISSION_DENIED:case Ye.FAILED_PRECONDITION:case Ye.ABORTED:case Ye.OUT_OF_RANGE:case Ye.UNIMPLEMENTED:case Ye.DATA_LOSS:return!0}}function Dm(n){if(void 0===n)return _i("GRPC error has no .code"),Ye.UNKNOWN;switch(n){case Uo.OK:return Ye.OK;case Uo.CANCELLED:return Ye.CANCELLED;case Uo.UNKNOWN:return Ye.UNKNOWN;case Uo.DEADLINE_EXCEEDED:return Ye.DEADLINE_EXCEEDED;case Uo.RESOURCE_EXHAUSTED:return Ye.RESOURCE_EXHAUSTED;case Uo.INTERNAL:return Ye.INTERNAL;case Uo.UNAVAILABLE:return Ye.UNAVAILABLE;case Uo.UNAUTHENTICATED:return Ye.UNAUTHENTICATED;case Uo.INVALID_ARGUMENT:return Ye.INVALID_ARGUMENT;case Uo.NOT_FOUND:return Ye.NOT_FOUND;case Uo.ALREADY_EXISTS:return Ye.ALREADY_EXISTS;case Uo.PERMISSION_DENIED:return Ye.PERMISSION_DENIED;case Uo.FAILED_PRECONDITION:return Ye.FAILED_PRECONDITION;case Uo.ABORTED:return Ye.ABORTED;case Uo.OUT_OF_RANGE:return Ye.OUT_OF_RANGE;case Uo.UNIMPLEMENTED:return Ye.UNIMPLEMENTED;case Uo.DATA_LOSS:return Ye.DATA_LOSS;default:return _n()}}(Jr=Uo||(Uo={}))[Jr.OK=0]="OK",Jr[Jr.CANCELLED=1]="CANCELLED",Jr[Jr.UNKNOWN=2]="UNKNOWN",Jr[Jr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jr[Jr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jr[Jr.NOT_FOUND=5]="NOT_FOUND",Jr[Jr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jr[Jr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jr[Jr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jr[Jr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jr[Jr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jr[Jr.ABORTED=10]="ABORTED",Jr[Jr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jr[Jr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jr[Jr.INTERNAL=13]="INTERNAL",Jr[Jr.UNAVAILABLE=14]="UNAVAILABLE",Jr[Jr.DATA_LOSS=15]="DATA_LOSS";class Td{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,f]of s)if(this.equalsFn(a,e))return f}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let f=0;f<a.length;f++)if(this.equalsFn(a[f][0],e))return void(a[f]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Gl(this.inner,(t,s)=>{for(const[a,f]of s)e(a,f)})}isEmpty(){return $f(this.inner)}size(){return this.innerSize}}const gw=new yi(g.comparator);function qu(){return gw}const My=new yi(g.comparator);function ep(...n){let e=My;for(const t of n)e=e.insert(t.key,t);return e}function Sm(n){let e=My;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Ec(){return Qh()}function Am(){return Qh()}function Qh(){return new Td(n=>n.toString(),(n,e)=>n.isEqual(e))}const xm=new yi(g.comparator),tI=new Pi(g.comparator);function yr(...n){let e=tI;for(const t of n)e=e.add(t);return e}const mw=new Pi(qn);function Mm(){return mw}class Ic{constructor(e,t,s,a,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Jh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ic(bn.min(),a,Mm(),qu(),yr())}}class Jh{constructor(e,t,s,a,f){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Jh(s,t,yr(),yr(),yr())}}class ig{constructor(e,t,s,a){this.Et=e,this.removedTargetIds=t,this.key=s,this.At=a}}class Rm{constructor(e,t){this.targetId=e,this.Rt=t}}class Ry{constructor(e,t,s=Qr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Ny{constructor(){this.bt=0,this.vt=og(),this.Pt=Qr.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return 0!==this.bt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}Nt(){let e=yr(),t=yr(),s=yr();return this.vt.forEach((a,f)=>{switch(f){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:_n()}}),new Jh(this.Pt,this.Vt,e,t,s)}kt(){this.St=!1,this.vt=og()}Ot(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class sg{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=qu(),this.Kt=oh(),this.Gt=new Pi(qn)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const s=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&s.xt(e.resumeToken);break;case 1:s.$t(),s.Dt||s.kt(),s.xt(e.resumeToken);break;case 2:s.$t(),s.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(s.Bt(),s.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),s.xt(e.resumeToken));break;default:_n()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((s,a)=>{this.Jt(a)&&t(a)})}Zt(e){const t=e.targetId,s=e.Rt.count,a=this.Xt(t);if(a){const f=a.target;if(tg(f))if(0===s){const v=new g(f.path);this.zt(t,v,zi.newNoDocument(v,bn.min()))}else Cn(1===s);else this.te(t)!==s&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((f,v)=>{const M=this.Xt(v);if(M){if(f.current&&tg(M.target)){const B=new g(M.target.path);null!==this.Ut.get(B)||this.ne(v,B)||this.zt(v,B,zi.newNoDocument(B,e))}f.Ct&&(t.set(v,f.Nt()),f.kt())}});let s=yr();this.Kt.forEach((f,v)=>{let M=!0;v.forEachWhile(B=>{const W=this.Xt(B);return!W||2===W.purpose||(M=!1,!1)}),M&&(s=s.add(f))}),this.Ut.forEach((f,v)=>v.setReadTime(e));const a=new Ic(e,t,this.Gt,this.Ut,s);return this.Ut=qu(),this.Kt=oh(),this.Gt=new Pi(qn),a}jt(e,t){if(!this.Jt(e))return;const s=this.ne(e,t.key)?2:0;this.Ht(e).Ot(t.key,s),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,s){if(!this.Jt(e))return;const a=this.Ht(e);this.ne(e,t)?a.Ot(t,1):a.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),s&&(this.Ut=this.Ut.insert(t,s))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ft(e){this.Ht(e).Ft()}Ht(e){let t=this.qt.get(e);return t||(t=new Ny,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new Pi(qn),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||Dt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new Ny),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function oh(){return new yi(g.comparator)}function og(){return new yi(g.comparator)}const tp={asc:"ASCENDING",desc:"DESCENDING"},Nm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ag={and:"AND",or:"OR"};class Py{constructor(e,t){this.databaseId=e,this.yt=t}}function Dd(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ug(n,e){return n.yt?e.toBase64():e.toUint8Array()}function Pm(n,e){return Dd(n,e.toTimestamp())}function mo(n){return Cn(!!n),bn.fromTimestamp(function(e){const t=Gu(e);return new Gi(t.seconds,t.nanos)}(n))}function np(n,e){return(t=n,new Hr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Oy(n){const e=Hr.fromString(n);return Cn(Yl(e)),e}function rp(n,e){return np(n.databaseId,e.path)}function Kl(n,e){const t=Oy(e);if(t.get(1)!==n.databaseId.projectId)throw new Et(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Et(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new g(ky(t))}function Om(n,e){return np(n.databaseId,e)}function km(n){const e=Oy(n);return 4===e.length?Hr.emptyPath():ky(e)}function Xh(n){return new Hr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ky(n){return Cn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Fy(n,e,t){return{name:rp(n,e),fields:t.value.mapValue.fields}}function Zu(n,e,t){const s=Kl(n,e.name),a=mo(e.updateTime),f=e.createTime?mo(e.createTime):bn.min(),v=new Va({mapValue:{fields:e.fields}}),M=zi.newFoundDocument(s,a,f,v);return t&&M.setHasCommittedMutations(),t?M.setHasCommittedMutations():M}function lg(n,e){let t;if(e instanceof Xf)t={update:Fy(n,e.key,e.value)};else if(e instanceof Yh)t={delete:rp(n,e.key)};else if(e instanceof Cd)t={update:Fy(n,e.key,e.data),updateMask:ww(e.fieldMask)};else{if(!(e instanceof bd))return _n();t={verify:rp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,f){const v=f.transform;if(v instanceof nh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Id)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof rh)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof ih)return{fieldPath:f.field.canonicalString(),increment:v.It};throw _n()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:Pm(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:_n()),t;var a}function ip(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Ds.updateTime(mo(a.updateTime)):void 0!==a.exists?Ds.exists(a.exists):Ds.none():Ds.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(f,v){let M=null;"setToServerValue"in v?(Cn("REQUEST_TIME"===v.setToServerValue),M=new nh):"appendMissingElements"in v?M=new Id(v.appendMissingElements.values||[]):"removeAllFromArray"in v?M=new rh(v.removeAllFromArray.values||[]):"increment"in v?M=new ih(f,v.increment):_n();const B=p.fromServerFormat(v.fieldPath);return new Qf(B,M)}(n,a)):[];var a;if(e.update){const a=Kl(n,e.update.name),f=new Va({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new wu((e.updateMask.fieldPaths||[]).map(W=>p.fromServerFormat(W)));return new Cd(a,f,v,t,s)}return new Xf(a,f,t,s)}if(e.delete){const a=Kl(n,e.delete);return new Yh(a,t)}if(e.verify){const a=Kl(n,e.verify);return new bd(a,t)}return _n()}function Vy(n,e){return{documents:[Om(n,e.path)]}}function Fm(n,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Om(n,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Om(n,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(B){if(0!==B.length)return Hy(Ci.create(B,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const f=function(B){if(0!==B.length)return B.map(W=>{return{field:Sd((ee=W).field),direction:yw(ee.dir)};var ee})}(e.orderBy);f&&(t.structuredQuery.orderBy=f);const v=(W=e.limit,n.yt||us(W)?W:{value:W});var W,M,B;return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(M=e.startAt).inclusive,values:M.position}),e.endAt&&(t.structuredQuery.endAt={before:!(B=e.endAt).inclusive,values:B.position}),t}function By(n){let e=km(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Cn(1===s);const ee=t.from[0];ee.allDescendants?a=ee.collectionId:e=e.child(ee.collectionId)}let f=[];t.where&&(f=function(ee){const de=$y(ee);return de instanceof Ci&&l(de)?de.getFilters():[de]}(t.where));let v=[];t.orderBy&&(v=t.orderBy.map(ee=>{return new Or(ef((de=ee).field),function(ke){switch(ke){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(de.direction));var de}));let M=null;t.limit&&(M=function(ee){let de;return de="object"==typeof ee?ee.value:ee,us(de)?null:de}(t.limit));let B=null;var ee;t.startAt&&(B=new il((ee=t.startAt).values||[],!!ee.before));let W=null;return t.endAt&&(W=function(ee){return new il(ee.values||[],!ee.before)}(t.endAt)),yy(e,a,v,f,M,"F",B,W)}function $y(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ef(e.unaryFilter.field);return Gr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=ef(e.unaryFilter.field);return Gr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ef(e.unaryFilter.field);return Gr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=ef(e.unaryFilter.field);return Gr.create(f,"!=",{nullValue:"NULL_VALUE"});default:return _n()}}(n):void 0!==n.fieldFilter?Gr.create(ef((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _n()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Ci.create(e.compositeFilter.filters.map(t=>$y(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return _n()}}(e.compositeFilter.op))}(n):_n();var e}function yw(n){return tp[n]}function Lm(n){return Nm[n]}function vw(n){return ag[n]}function Sd(n){return{fieldPath:n.canonicalString()}}function ef(n){return p.fromServerFormat(n.fieldPath)}function Hy(n){return n instanceof Gr?function(e){if("=="===e.op){if(zh(e.value))return{unaryFilter:{field:Sd(e.field),op:"IS_NAN"}};if(Gh(e.value))return{unaryFilter:{field:Sd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zh(e.value))return{unaryFilter:{field:Sd(e.field),op:"IS_NOT_NAN"}};if(Gh(e.value))return{unaryFilter:{field:Sd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sd(e.field),op:Lm(e.op),value:e.value}}}(n):n instanceof Ci?function(e){const t=e.getFilters().map(s=>Hy(s));return 1===t.length?t[0]:{compositeFilter:{op:vw(e.op),filters:t}}}(n):_n()}function ww(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Yl(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function iu(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Gy(e)),e=Ew(n.get(t),e);return Gy(e)}function Ew(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const f=n.charAt(a);switch(f){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=f}}return t}function Gy(n){return n+"\x01\x01"}function Ql(n){const e=n.length;if(Cn(e>=2),2===e)return Cn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Hr.emptyPath();const t=e-2,s=[];let a="";for(let f=0;f<e;){const v=n.indexOf("\x01",f);switch((v<0||v>t)&&_n(),n.charAt(v+1)){case"\x01":const M=n.substring(f,v);let B;0===a.length?B=M:(a+=M,B=a,a=""),s.push(B);break;case"\x10":a+=n.substring(f,v),a+="\0";break;case"\x11":a+=n.substring(f,v+1);break;default:_n()}f=v+2}return new Hr(s)}const zy=["userId","batchId"];function cg(n,e){return[n,iu(e)]}function Wy(n,e,t){return[n,iu(e),t]}const Um={},Iw=["prefixPath","collectionGroup","readTime","documentId"],Cw=["prefixPath","collectionGroup","documentId"],dg=["collectionGroup","readTime","prefixPath","documentId"],Vm=["canonicalId","targetId"],hg=["targetId","path"],nI=["path","targetId"],Bm=["collectionId","parent"],rI=["indexId","uid"],qy=["uid","sequenceNumber"],Zy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ky=["indexId","uid","orderedDocumentKey"],Yy=["userId","collectionPath","documentId"],jm=["userId","collectionPath","largestBatchId"],Hc=["userId","collectionGroup","largestBatchId"],sp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fg=[...sp,"documentOverlays"],tf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Qy=tf,Jy=[...Qy,"indexConfiguration","indexState","indexEntries"];class pg extends Kd{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function Ba(n,e){const t=Wt(n);return nu.M(t.re,e)}class $m{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const f=this.mutations[a];f.key.isEqual(e.key)&&bm(f,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=sh(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=sh(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Am();return this.mutations.forEach(a=>{const f=e.get(a.key),v=f.overlayedDocument;let M=this.applyToLocalView(v,f.mutatedFields);M=t.has(a.key)?null:M;const B=Sy(v,M);null!==B&&s.set(a.key,B),v.isValidDocument()||v.convertToNoDocument(bn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yr())}isEqual(e){return this.batchId===e.batchId&&Hl(this.mutations,e.mutations,(t,s)=>hw(t,s))&&Hl(this.baseMutations,e.baseMutations,(t,s)=>hw(t,s))}}class ah{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Cn(e.mutations.length===s.length);let a=xm;const f=e.mutations;for(let v=0;v<f.length;v++)a=a.insert(f[v].key,s[v].version);return new ah(e,t,s,a)}}class Hm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uh{constructor(e,t,s,a,f=bn.min(),v=bn.min(),M=Qr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=M}withSequenceNumber(e){return new uh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new uh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new uh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Xy{constructor(e){this.oe=e}}function ev(n,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:rp(a=n.oe,(f=e).key),fields:f.data.value.mapValue.fields,updateTime:Dd(a,f.version.toTimestamp()),createTime:Dd(a,f.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:lh(e.version)};else{if(!e.isUnknownDocument())return _n();s.unknownDocument={path:t.path.toArray(),version:lh(e.version)}}var a,f;return s}function gg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ch(n){const e=new Gi(n.seconds,n.nanoseconds);return bn.fromTimestamp(e)}function dh(n,e){const t=(e.baseMutations||[]).map(f=>ip(n.oe,f));for(let f=0;f<e.mutations.length-1;++f)f+1<e.mutations.length&&void 0!==e.mutations[f+1].transform&&(e.mutations[f].updateTransforms=e.mutations[f+1].transform.fieldTransforms,e.mutations.splice(f+1,1),++f);const s=e.mutations.map(f=>ip(n.oe,f)),a=Gi.fromMillis(e.localWriteTimeMs);return new $m(e.batchId,a,t,s)}function nf(n){const e=ch(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ch(n.lastLimboFreeSnapshotVersion):bn.min();let s;var a;return void 0!==n.query.documents?(Cn(1===(a=n.query).documents.length),s=Eu(Kh(km(a.documents[0])))):s=Eu(By(n.query)),new uh(s,n.targetId,0,n.lastListenSequenceNumber,e,t,Qr.fromBase64String(n.resumeToken))}function mg(n,e){const t=lh(e.snapshotVersion),s=lh(e.lastLimboFreeSnapshotVersion);let a;a=tg(e.target)?Vy(n.oe,e.target):Fm(n.oe,e.target);const f=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:eh(e.target),readTime:t,resumeToken:f,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function Gm(n){const e=By({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Zf(e,e.limit,"L"):e}function op(n,e){return new Hm(e.largestBatchId,ip(n.oe,e.overlayMutation))}function tv(n,e){const t=e.path.lastSegment();return[n,iu(e.path.popLast()),t]}function nv(n,e,t,s){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:lh(s.readTime),documentKey:iu(s.documentKey.path),largestBatchId:s.largestBatchId}}class Tw{getBundleMetadata(e,t){return rv(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:ch(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return rv(e).put({bundleId:(s=t).id,createTime:lh(mo(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return iv(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:Gm(a.bundledQuery),readTime:ch(a.readTime)};var a})}saveNamedQuery(e,t){return iv(e).put({name:(s=t).name,readTime:lh(mo(s.readTime)),bundledQuery:s.bundledQuery});var s}}function rv(n){return Ba(n,"bundles")}function iv(n){return Ba(n,"namedQueries")}class _g{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new _g(e,t.uid||"")}getOverlay(e,t){return ap(e).get(tv(this.userId,t)).next(s=>s?op(this.Tt,s):null)}getOverlays(e,t){const s=Ec();return We.forEach(t,a=>this.getOverlay(e,a).next(f=>{null!==f&&s.set(a,f)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((f,v)=>{const M=new Hm(t,v);a.push(this.ce(e,M))}),We.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(v=>a.add(iu(v.getCollectionPath())));const f=[];return a.forEach(v=>{const M=IDBKeyRange.bound([this.userId,v,s],[this.userId,v,s+1],!1,!0);f.push(ap(e).Y("collectionPathOverlayIndex",M))}),We.waitFor(f)}getOverlaysForCollection(e,t,s){const a=Ec(),f=iu(t),v=IDBKeyRange.bound([this.userId,f,s],[this.userId,f,Number.POSITIVE_INFINITY],!0);return ap(e).W("collectionPathOverlayIndex",v).next(M=>{for(const B of M){const W=op(this.Tt,B);a.set(W.getKey(),W)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const f=Ec();let v;const M=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ap(e).X({index:"collectionGroupOverlayIndex",range:M},(B,W,ee)=>{const de=op(this.Tt,W);f.size()<a||de.largestBatchId===v?(f.set(de.getKey(),de),v=de.largestBatchId):ee.done()}).next(()=>f)}ce(e,t){return ap(e).put(function(s,a,f){const[v,M,B]=tv(a,f.mutation.key);return{userId:a,collectionPath:M,documentId:B,collectionGroup:f.mutation.key.getCollectionGroup(),largestBatchId:f.largestBatchId,overlayMutation:lg(s.oe,f.mutation)}}(this.Tt,this.userId,t))}}function ap(n){return Ba(n,"documentOverlays")}class Ad{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(Bs(e.integerValue));else if("doubleValue"in e){const s=Bs(e.doubleValue);isNaN(s)?this.fe(t,13):(this.fe(t,15),md(s)?t.de(0):t.de(s))}else if("timestampValue"in e){const s=e.timestampValue;this.fe(t,20),"string"==typeof s?t._e(s):(t._e(`${s.seconds||""}`),t.de(s.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(_c(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.fe(t,45),t.de(s.latitude||0),t.de(s.longitude||0)}else"mapValue"in e?Xp(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):_n()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const s=e.fields||{};this.fe(t,55);for(const a of Object.keys(s))this.we(a,t),this.he(s[a],t)}Ie(e,t){const s=e.values||[];this.fe(t,50);for(const a of s)this.he(a,t)}ye(e,t){this.fe(t,37),g.fromName(e).path.forEach(s=>{this.fe(t,60),this.Te(s,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function sv(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function ov(n){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const f=sv(255&t[a]);if(s+=f,8!==f)break}return s}(n);return Math.ceil(e/8)}Ad.Ee=new Ad;class iI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Re(s.value),s=t.next();this.be()}ve(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Pe(s.value),s=t.next();this.Ve()}Se(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Re(s);else if(s<2048)this.Re(960|s>>>6),this.Re(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Re(480|s>>>12),this.Re(128|63&s>>>6),this.Re(128|63&s);else{const a=t.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}this.be()}De(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Pe(s);else if(s<2048)this.Pe(960|s>>>6),this.Pe(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s);else{const a=t.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}this.Ve()}Ce(e){const t=this.xe(e),s=ov(t);this.Ne(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}ke(e){const t=this.xe(e),s=ov(t);this.Ne(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Oe(){this.Me(255),this.Me(255)}Fe(){this.$e(255),this.$e(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(a){const f=new DataView(new ArrayBuffer(8));return f.setFloat64(0,a,!1),new Uint8Array(f.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.$e(0),this.$e(255)):255===t?(this.$e(255),this.$e(0)):this.$e(e)}be(){this.Me(0),this.Me(1)}Ve(){this.$e(0),this.$e(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}$e(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class av{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.Oe()}}class yg{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Fe()}}class Jl{constructor(){this.Le=new iI,this.qe=new av(this.Le),this.Ue=new yg(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class rf{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new rf(this.indexId,this.documentKey,this.arrayValue,s)}}function Xl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=uv(n.arrayValue,e.arrayValue),0!==t?t:(t=uv(n.directionalValue,e.directionalValue),0!==t?t:g.comparator(n.documentKey,e.documentKey)))}function uv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const s=n[t]-e[t];if(0!==s)return s}return n.length-e.length}class Dw{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const s=t;s.isInequality()?this.ze=s:this.je.push(s)}}We(e){Cn(e.collectionGroup===this.collectionId);const t=Z(e);if(void 0!==t&&!this.He(t))return!1;const s=ie(e);let a=0,f=0;for(;a<s.length&&this.He(s[a]);++a);if(a===s.length)return!0;if(void 0!==this.ze){const v=s[a];if(!this.Je(this.ze,v)||!this.Ye(this.Qe[f++],v))return!1;++a}for(;a<s.length;++a)if(f>=this.Qe.length||!this.Ye(this.Qe[f++],s[a]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function vg(n){var e,t;if(Cn(n instanceof Gr||n instanceof Ci),n instanceof Gr){if(n instanceof It){const a=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(f=>Gr.create(n.field,"==",f)))||[];return Ci.create(a,"or")}return n}const s=n.filters.map(a=>vg(a));return Ci.create(s,n.op)}function Sw(n){if(0===n.getFilters().length)return[];const e=Gc(vg(n));return Cn(su(e)),Cl(e)||hh(e)?[e]:e.getFilters()}function Cl(n){return n instanceof Gr}function hh(n){return n instanceof Ci&&l(n)}function su(n){return Cl(n)||hh(n)||function(e){if(e instanceof Ci&&h(e)){for(const t of e.getFilters())if(!Cl(t)&&!hh(t))return!1;return!0}return!1}(n)}function Gc(n){if(Cn(n instanceof Gr||n instanceof Ci),n instanceof Gr)return n;if(1===n.filters.length)return Gc(n.filters[0]);const e=n.filters.map(s=>Gc(s));let t=Ci.create(e,n.op);return t=af(t),su(t)?t:(Cn(t instanceof Ci),Cn($c(t)),Cn(t.filters.length>1),t.filters.reduce((s,a)=>sf(s,a)))}function sf(n,e){let t;return Cn(n instanceof Gr||n instanceof Ci),Cn(e instanceof Gr||e instanceof Ci),t=n instanceof Gr?e instanceof Gr?Ci.create([n,e],"and"):ol(n,e):e instanceof Gr?ol(e,n):function(s,a){if(Cn(s.filters.length>0&&a.filters.length>0),$c(s)&&$c(a))return F(s,a.getFilters());const f=h(s)?s:a,v=h(s)?a:s,M=f.filters.map(B=>sf(B,v));return Ci.create(M,"or")}(n,e),af(t)}function ol(n,e){if($c(e))return F(e,n.getFilters());{const t=e.filters.map(s=>sf(n,s));return Ci.create(t,"or")}}function af(n){if(Cn(n instanceof Gr||n instanceof Ci),n instanceof Gr)return n;const e=n.getFilters();if(1===e.length)return af(e[0]);if(c(n))return n;const t=e.map(a=>af(a)),s=[];return t.forEach(a=>{a instanceof Gr?s.push(a):a instanceof Ci&&(a.op===n.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:Ci.create(s,n.op)}class uf{constructor(){this.Ze=new xd}addToCollectionParentIndex(e,t){return this.Ze.add(t),We.resolve()}getCollectionParents(e,t){return We.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return We.resolve()}deleteFieldIndex(e,t){return We.resolve()}getDocumentsMatchingTarget(e,t){return We.resolve(null)}getIndexType(e,t){return We.resolve(0)}getFieldIndexes(e,t){return We.resolve([])}getNextCollectionGroupToUpdate(e){return We.resolve(null)}getMinOffset(e,t){return We.resolve(si.min())}getMinOffsetFromCollectionGroup(e,t){return We.resolve(si.min())}updateCollectionGroup(e,t,s){return We.resolve()}updateIndexEntries(e,t){return We.resolve()}}class xd{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Pi(Hr.comparator),f=!a.has(s);return this.index[t]=a.add(s),f}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Pi(Hr.comparator)).toArray()}}const zc=new Uint8Array(0);class lf{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new xd,this.tn=new Td(s=>eh(s),(s,a)=>Wf(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const f={collectionId:s,parent:iu(a)};return fh(e).put(f)}return We.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[Vc(t),""],!1,!0);return fh(e).W(a).next(f=>{for(const v of f){if(v.collectionId!==t)break;s.push(Ql(v.parent))}return s})}addFieldIndex(e,t){const s=Wc(e),a={indexId:(v=t).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(M=>[M.fieldPath.canonicalString(),M.kind])};var v;delete a.indexId;const f=s.add(a);if(t.indexState){const v=bc(e);return f.next(M=>{v.put(nv(M,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return f.next()}deleteFieldIndex(e,t){const s=Wc(e),a=bc(e),f=Cc(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>f.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Cc(e);let a=!0;const f=new Map;return We.forEach(this.en(t),v=>this.nn(e,v).next(M=>{a&&(a=!!M),f.set(v,M)})).next(()=>{if(a){let v=yr();const M=[];return We.forEach(f,(B,W)=>{var ee;Dt("IndexedDbIndexManager",`Using index ${ee=B,`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map(Qn=>`${Qn.fieldPath}:${Qn.kind}`).join(",")}`} to execute ${eh(t)}`);const de=function(Qn,xr){const Lr=Z(xr);if(void 0===Lr)return null;for(const Mr of ng(Qn,Lr.fieldPath))switch(Mr.op){case"array-contains-any":return Mr.value.arrayValue.values||[];case"array-contains":return[Mr.value]}return null}(W,B),ke=function(Qn,xr){const Lr=new Map;for(const Mr of ie(xr))for(const $s of ng(Qn,Mr.fieldPath))switch($s.op){case"==":case"in":Lr.set(Mr.fieldPath.canonicalString(),$s.value);break;case"not-in":case"!=":return Lr.set(Mr.fieldPath.canonicalString(),$s.value),Array.from(Lr.values())}return null}(W,B),Qe=function(Qn,xr){const Lr=[];let Mr=!0;for(const $s of ie(xr)){const Dl=0===$s.kind?_y(Qn,$s.fieldPath,Qn.startAt):th(Qn,$s.fieldPath,Qn.startAt);Lr.push(Dl.value),Mr&&(Mr=Dl.inclusive)}return new il(Lr,Mr)}(W,B),ht=function(Qn,xr){const Lr=[];let Mr=!0;for(const $s of ie(xr)){const Dl=0===$s.kind?th(Qn,$s.fieldPath,Qn.endAt):_y(Qn,$s.fieldPath,Qn.endAt);Lr.push(Dl.value),Mr&&(Mr=Dl.inclusive)}return new il(Lr,Mr)}(W,B),Bt=this.sn(B,W,Qe),Jt=this.sn(B,W,ht),ei=this.rn(B,W,ke),li=this.on(B.indexId,de,Bt,Qe.inclusive,Jt,ht.inclusive,ei);return We.forEach(li,Qn=>s.J(Qn,t.limit).next(xr=>{xr.forEach(Lr=>{const Mr=g.fromSegments(Lr.documentKey);v.has(Mr)||(v=v.add(Mr),M.push(Mr))})}))}).next(()=>M)}return We.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:Sw(Ci.create(e.filters,"and")).map(s=>ym(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,s,a,f,v,M){const B=(null!=t?t.length:1)*Math.max(s.length,f.length),W=B/(null!=t?t.length:1),ee=[];for(let de=0;de<B;++de){const ke=t?this.un(t[de/W]):zc,Qe=this.cn(e,ke,s[de%W],a),ht=this.an(e,ke,f[de%W],v),Bt=M.map(Jt=>this.cn(e,ke,Jt,!0));ee.push(...this.createRange(Qe,ht,Bt))}return ee}cn(e,t,s,a){const f=new rf(e,g.empty(),t,s);return a?f:f.Ge()}an(e,t,s,a){const f=new rf(e,g.empty(),t,s);return a?f.Ge():f}nn(e,t){const s=new Dw(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(f=>{let v=null;for(const M of f)s.We(M)&&(!v||M.fields.length>v.fields.length)&&(v=M);return v})}getIndexType(e,t){let s=2;const a=this.en(t);return We.forEach(a,f=>this.nn(e,f).next(v=>{v?0!==s&&v.fields.length<function(M){let B=new Pi(p.comparator),W=!1;for(const ee of M.filters)for(const de of ee.getFlattenedFilters())de.field.isKeyField()||("array-contains"===de.op||"array-contains-any"===de.op?W=!0:B=B.add(de.field));for(const ee of M.orderBy)ee.field.isKeyField()||(B=B.add(ee.field));return B.size+(W?1:0)}(f)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}hn(e,t){const s=new Jl;for(const a of ie(e)){const f=t.data.field(a.fieldPath);if(null==f)return null;const v=s.Ke(a.kind);Ad.Ee.ae(f,v)}return s.Be()}un(e){const t=new Jl;return Ad.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const s=new Jl;return Ad.Ee.ae(_d(this.databaseId,t),s.Ke(function(a){const f=ie(a);return 0===f.length?0:f[f.length-1].kind}(e))),s.Be()}rn(e,t,s){if(null===s)return[];let a=[];a.push(new Jl);let f=0;for(const v of ie(e)){const M=s[f++];for(const B of a)if(this.fn(t,v.fieldPath)&&Xd(M))a=this.dn(a,v,M);else{const W=B.Ke(v.kind);Ad.Ee.ae(M,W)}}return this._n(a)}sn(e,t,s){return this.rn(e,t,s.position)}_n(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Be();return t}dn(e,t,s){const a=[...e],f=[];for(const v of s.arrayValue.values||[])for(const M of a){const B=new Jl;B.seed(M.Be()),Ad.Ee.ae(v,B.Ke(t.kind)),f.push(B)}return f}fn(e,t){return!!e.filters.find(s=>s instanceof Gr&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Wc(e),a=bc(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(f=>{const v=[];return We.forEach(f,M=>a.get([M.indexId,this.uid]).next(B=>{v.push(function(W,ee){const de=ee?new zt(ee.sequenceNumber,new si(ch(ee.readTime),new g(Ql(ee.documentKey)),ee.largestBatchId)):zt.empty(),ke=W.fields.map(([Qe,ht])=>new ot(p.fromServerFormat(Qe),ht));return new S(W.indexId,W.collectionGroup,ke,de)}(M,B))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const f=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==f?f:qn(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Wc(e),f=bc(e);return this.wn(e).next(v=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(M=>We.forEach(M,B=>f.put(nv(B.indexId,this.user,v,s)))))}updateIndexEntries(e,t){const s=new Map;return We.forEach(t,(a,f)=>{const v=s.get(a.collectionGroup);return(v?We.resolve(v):this.getFieldIndexes(e,a.collectionGroup)).next(M=>(s.set(a.collectionGroup,M),We.forEach(M,B=>this.mn(e,a,B).next(W=>{const ee=this.gn(f,B);return W.isEqual(ee)?We.resolve():this.yn(e,f,B,W,ee)}))))})}pn(e,t,s,a){return Cc(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.ln(s,t.key),documentKey:t.key.path.toArray()})}In(e,t,s,a){return Cc(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.ln(s,t.key),t.key.path.toArray()])}mn(e,t,s){const a=Cc(e);let f=new Pi(Xl);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.ln(s,t)])},(v,M)=>{f=f.add(new rf(s.indexId,t,M.arrayValue,M.directionalValue))}).next(()=>f)}gn(e,t){let s=new Pi(Xl);const a=this.hn(t,e);if(null==a)return s;const f=Z(t);if(null!=f){const v=e.data.field(f.fieldPath);if(Xd(v))for(const M of v.arrayValue.values||[])s=s.add(new rf(t.indexId,e.key,this.un(M),a))}else s=s.add(new rf(t.indexId,e.key,zc,a));return s}yn(e,t,s,a,f){Dt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const v=[];return function(M,B,W,ee,de){const ke=M.getIterator(),Qe=B.getIterator();let ht=wd(ke),Bt=wd(Qe);for(;ht||Bt;){let Jt=!1,ei=!1;if(ht&&Bt){const li=W(ht,Bt);li<0?ei=!0:li>0&&(Jt=!0)}else null!=ht?ei=!0:Jt=!0;Jt?(ee(Bt),Bt=wd(Qe)):ei?(de(ht),ht=wd(ke)):(ht=wd(ke),Bt=wd(Qe))}}(a,f,Xl,M=>{v.push(this.pn(e,t,s,M))},M=>{v.push(this.In(e,t,s,M))}),We.waitFor(v)}wn(e){let t=1;return bc(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,f)=>{f.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((v,M)=>Xl(v,M)).filter((v,M,B)=>!M||0!==Xl(v,B[M-1]));const a=[];a.push(e);for(const v of s){const M=Xl(v,e),B=Xl(v,t);if(0===M)a[0]=e.Ge();else if(M>0&&B<0)a.push(v),a.push(v.Ge());else if(B>0)break}a.push(t);const f=[];for(let v=0;v<a.length;v+=2){if(this.Tn(a[v],a[v+1]))return[];f.push(IDBKeyRange.bound([a[v].indexId,this.uid,a[v].arrayValue,a[v].directionalValue,zc,[]],[a[v+1].indexId,this.uid,a[v+1].arrayValue,a[v+1].directionalValue,zc,[]]))}return f}Tn(e,t){return Xl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ph)}getMinOffset(e,t){return We.mapArray(this.en(t),s=>this.nn(e,s).next(a=>a||_n())).next(ph)}}function fh(n){return Ba(n,"collectionParents")}function Cc(n){return Ba(n,"indexEntries")}function Wc(n){return Ba(n,"indexConfiguration")}function bc(n){return Ba(n,"indexState")}function ph(n){Cn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<n.length;s++){const a=n[s].indexState.offset;eu(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new si(e.readTime,e.documentKey,t)}const zm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ku{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new ku(e,ku.DEFAULT_COLLECTION_PERCENTILE,ku.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Wm(n,e,t){const s=n.store("mutations"),a=n.store("documentMutations"),f=[],v=IDBKeyRange.only(t.batchId);let M=0;const B=s.X({range:v},(ee,de,ke)=>(M++,ke.delete()));f.push(B.next(()=>{Cn(1===M)}));const W=[];for(const ee of t.mutations){const de=Wy(e,ee.key.path,t.batchId);f.push(a.delete(de)),W.push(ee.key)}return We.waitFor(f).next(()=>W)}function up(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw _n();e=n.noDocument}return JSON.stringify(e).length}ku.DEFAULT_COLLECTION_PERCENTILE=10,ku.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ku.DEFAULT=new ku(41943040,ku.DEFAULT_COLLECTION_PERCENTILE,ku.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ku.DISABLED=new ku(-1,0,0);class lp{constructor(e,t,s,a){this.userId=e,this.Tt=t,this.indexManager=s,this.referenceDelegate=a,this.En={}}static ue(e,t,s,a){Cn(""!==e.uid);const f=e.isAuthenticated()?e.uid:"";return new lp(f,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qc(e).X({index:"userMutationsIndex",range:s},(a,f,v)=>{t=!1,v.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const f=gh(e),v=qc(e);return v.add({}).next(M=>{Cn("number"==typeof M);const B=new $m(M,t,s,a),W=function(ke,Qe,ht){const Bt=ht.baseMutations.map(ei=>lg(ke.oe,ei)),Jt=ht.mutations.map(ei=>lg(ke.oe,ei));return{userId:Qe,batchId:ht.batchId,localWriteTimeMs:ht.localWriteTime.toMillis(),baseMutations:Bt,mutations:Jt}}(this.Tt,this.userId,B),ee=[];let de=new Pi((ke,Qe)=>qn(ke.canonicalString(),Qe.canonicalString()));for(const ke of a){const Qe=Wy(this.userId,ke.key.path,M);de=de.add(ke.key.path.popLast()),ee.push(v.put(W)),ee.push(f.put(Qe,Um))}return de.forEach(ke=>{ee.push(this.indexManager.addToCollectionParentIndex(e,ke))}),e.addOnCommittedListener(()=>{this.En[M]=B.keys()}),We.waitFor(ee).next(()=>B)})}lookupMutationBatch(e,t){return qc(e).get(t).next(s=>s?(Cn(s.userId===this.userId),dh(this.Tt,s)):null)}An(e,t){return this.En[t]?We.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.En[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let f=null;return qc(e).X({index:"userMutationsIndex",range:a},(v,M,B)=>{M.userId===this.userId&&(Cn(M.batchId>=s),f=dh(this.Tt,M)),B.done()}).next(()=>f)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return qc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,f,v)=>{s=f.batchId,v.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qc(e).W("userMutationsIndex",t).next(s=>s.map(a=>dh(this.Tt,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=cg(this.userId,t.path),a=IDBKeyRange.lowerBound(s),f=[];return gh(e).X({range:a},(v,M,B)=>{const[W,ee,de]=v,ke=Ql(ee);if(W===this.userId&&t.path.isEqual(ke))return qc(e).get(de).next(Qe=>{if(!Qe)throw _n();Cn(Qe.userId===this.userId),f.push(dh(this.Tt,Qe))});B.done()}).next(()=>f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Pi(qn);const a=[];return t.forEach(f=>{const v=cg(this.userId,f.path),M=IDBKeyRange.lowerBound(v),B=gh(e).X({range:M},(W,ee,de)=>{const[ke,Qe,ht]=W,Bt=Ql(Qe);ke===this.userId&&f.path.isEqual(Bt)?s=s.add(ht):de.done()});a.push(B)}),We.waitFor(a).next(()=>this.Rn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,f=cg(this.userId,s),v=IDBKeyRange.lowerBound(f);let M=new Pi(qn);return gh(e).X({range:v},(B,W,ee)=>{const[de,ke,Qe]=B,ht=Ql(ke);de===this.userId&&s.isPrefixOf(ht)?ht.length===a&&(M=M.add(Qe)):ee.done()}).next(()=>this.Rn(e,M))}Rn(e,t){const s=[],a=[];return t.forEach(f=>{a.push(qc(e).get(f).next(v=>{if(null===v)throw _n();Cn(v.userId===this.userId),s.push(dh(this.Tt,v))}))}),We.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return Wm(e.re,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.bn(t.batchId)}),We.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}bn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return We.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return gh(e).X({range:s},(f,v,M)=>{if(f[0]===this.userId){const B=Ql(f[1]);a.push(B)}else M.done()}).next(()=>{Cn(0===a.length)})})}containsKey(e,t){return qm(e,this.userId,t)}vn(e){return Zm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function qm(n,e,t){const s=cg(e,t.path),a=s[1],f=IDBKeyRange.lowerBound(s);let v=!1;return gh(n).X({range:f,Z:!0},(M,B,W)=>{const[ee,de,ke]=M;ee===e&&de===a&&(v=!0),W.done()}).next(()=>v)}function qc(n){return Ba(n,"mutations")}function gh(n){return Ba(n,"documentMutations")}function Zm(n){return Ba(n,"mutationQueues")}class mh{constructor(e){this.Pn=e}next(){return this.Pn+=2,this.Pn}static Vn(){return new mh(0)}static Sn(){return new mh(-1)}}class Aw{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const s=new mh(t.highestTargetId);return t.highestTargetId=s.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>bn.fromTimestamp(new Gi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Dn(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Cn(e,a)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(s=>(s.targetCount+=1,this.Nn(t,s),this.Cn(e,s))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>_h(e).delete(t.targetId)).next(()=>this.Dn(e)).next(s=>(Cn(s.targetCount>0),s.targetCount-=1,this.Cn(e,s)))}removeTargets(e,t,s){let a=0;const f=[];return _h(e).X((v,M)=>{const B=nf(M);B.sequenceNumber<=t&&null===s.get(B.targetId)&&(a++,f.push(this.removeTargetData(e,B)))}).next(()=>We.waitFor(f)).next(()=>a)}forEachTarget(e,t){return _h(e).X((s,a)=>{const f=nf(a);t(f)})}Dn(e){return lv(e).get("targetGlobalKey").next(t=>(Cn(null!==t),t))}Cn(e,t){return lv(e).put("targetGlobalKey",t)}xn(e,t){return _h(e).put(mg(this.Tt,t))}Nn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=eh(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let f=null;return _h(e).X({range:a,index:"queryTargetsIndex"},(v,M,B)=>{const W=nf(M);Wf(t,W.target)&&(f=W,B.done())}).next(()=>f)}addMatchingKeys(e,t,s){const a=[],f=Zc(e);return t.forEach(v=>{const M=iu(v.path);a.push(f.put({targetId:s,path:M})),a.push(this.referenceDelegate.addReference(e,s,v))}),We.waitFor(a)}removeMatchingKeys(e,t,s){const a=Zc(e);return We.forEach(t,f=>{const v=iu(f.path);return We.waitFor([a.delete([s,v]),this.referenceDelegate.removeReference(e,s,f)])})}removeMatchingKeysForTargetId(e,t){const s=Zc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Zc(e);let f=yr();return a.X({range:s,Z:!0},(v,M,B)=>{const W=Ql(v[1]),ee=new g(W);f=f.add(ee)}).next(()=>f)}containsKey(e,t){const s=iu(t.path),a=IDBKeyRange.bound([s],[Vc(s)],!1,!0);let f=0;return Zc(e).X({index:"documentTargetsIndex",Z:!0,range:a},([v,M],B,W)=>{0!==v&&(f++,W.done())}).next(()=>f>0)}ie(e,t){return _h(e).get(t).next(s=>s?nf(s):null)}}function _h(n){return Ba(n,"targets")}function lv(n){return Ba(n,"targetGlobal")}function Zc(n){return Ba(n,"targetDocuments")}function wg([n,e],[t,s]){const a=qn(n,t);return 0===a?qn(e,s):a}class Km{constructor(e){this.kn=e,this.buffer=new Pi(wg),this.On=0}Mn(){return++this.On}Fn(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();wg(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xw{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.$n=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.$n&&(this.$n.cancel(),this.$n=null)}get started(){return null!==this.$n}Bn(e){var t=this;Dt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.$n=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.$n=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){tl(s)?Dt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield tu(s)}yield t.Bn(3e5)}))}}class Eg{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return We.resolve(Pu.at);const s=new Km(t);return this.Ln.forEachTarget(e,a=>s.Fn(a.sequenceNumber)).next(()=>this.Ln.Un(e,a=>s.Fn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Ln.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Dt("LruGarbageCollector","Garbage collection skipped; disabled"),We.resolve(zm)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zm):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let s,a,f,v,M,B,W;const ee=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(de=>(de>this.params.maximumSequenceNumbersToCollect?(Dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${de}`),a=this.params.maximumSequenceNumbersToCollect):a=de,v=Date.now(),this.nthSequenceNumber(e,a))).next(de=>(s=de,M=Date.now(),this.removeTargets(e,s,t))).next(de=>(f=de,B=Date.now(),this.removeOrphanedDocuments(e,s))).next(de=>(W=Date.now(),Bl()<=ks.in.DEBUG&&Dt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-ee}ms\n\tDetermined least recently used ${a} in `+(M-v)+`ms\n\tRemoved ${f} targets in `+(B-M)+`ms\n\tRemoved ${de} documents in `+(W-B)+`ms\nTotal Duration: ${W-ee}ms`),We.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:f,documentsRemoved:de})))}}class Ig{constructor(e,t){this.db=e,this.garbageCollector=new Eg(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Gn(e){let t=0;return this.Un(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(s,a)=>t(a))}addReference(e,t,s){return cf(e,s)}removeReference(e,t,s){return cf(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return cf(e,t)}jn(e,t){return function(s,a){let f=!1;return Zm(s).tt(v=>qm(s,v,a).next(M=>(M&&(f=!0),We.resolve(!M)))).next(()=>f)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let f=0;return this.Qn(e,(v,M)=>{if(M<=t){const B=this.jn(e,v).next(W=>{if(!W)return f++,s.getEntry(e,v).next(()=>(s.removeEntry(v,bn.min()),Zc(e).delete([0,iu(v.path)])))});a.push(B)}}).next(()=>We.waitFor(a)).next(()=>s.apply(e)).next(()=>f)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return cf(e,t)}Qn(e,t){const s=Zc(e);let a,f=Pu.at;return s.X({index:"documentTargetsIndex"},([v,M],{path:B,sequenceNumber:W})=>{0===v?(f!==Pu.at&&t(new g(Ql(a)),f),f=W,a=B):f=Pu.at}).next(()=>{f!==Pu.at&&t(new g(Ql(a)),f)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cf(n,e){return Zc(n).put((s=n.currentSequenceNumber,{targetId:0,path:iu(e.path),sequenceNumber:s}));var s}class cv{constructor(){this.changes=new Td(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?We.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Cg{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Kc(e).put(s)}removeEntry(e,t,s){return Kc(e).delete(function(a,f){const v=a.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],gg(f),v[v.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.zn(e,s)))}getEntry(e,t){let s=zi.newInvalidDocument(t);return Kc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(df(t))},(a,f)=>{s=this.Wn(t,f)}).next(()=>s)}Hn(e,t){let s={size:0,document:zi.newInvalidDocument(t)};return Kc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(df(t))},(a,f)=>{s={document:this.Wn(t,f),size:up(f)}}).next(()=>s)}getEntries(e,t){let s=qu();return this.Jn(e,t,(a,f)=>{const v=this.Wn(a,f);s=s.insert(a,v)}).next(()=>s)}Yn(e,t){let s=qu(),a=new yi(g.comparator);return this.Jn(e,t,(f,v)=>{const M=this.Wn(f,v);s=s.insert(f,M),a=a.insert(f,up(v))}).next(()=>({documents:s,Zn:a}))}Jn(e,t,s){if(t.isEmpty())return We.resolve();let a=new Pi(bg);t.forEach(B=>a=a.add(B));const f=IDBKeyRange.bound(df(a.first()),df(a.last())),v=a.getIterator();let M=v.getNext();return Kc(e).X({index:"documentKeyIndex",range:f},(B,W,ee)=>{const de=g.fromSegments([...W.prefixPath,W.collectionGroup,W.documentId]);for(;M&&bg(M,de)<0;)s(M,null),M=v.getNext();M&&M.isEqual(de)&&(s(M,W),M=v.hasNext()?v.getNext():null),M?ee.j(df(M)):ee.done()}).next(()=>{for(;M;)s(M,null),M=v.hasNext()?v.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const f=t.path,v=[f.popLast().toArray(),f.lastSegment(),gg(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],M=[f.popLast().toArray(),f.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Kc(e).W(IDBKeyRange.bound(v,M,!0)).next(B=>{let W=qu();for(const ee of B){const de=this.Wn(g.fromSegments(ee.prefixPath.concat(ee.collectionGroup,ee.documentId)),ee);de.isFoundDocument()&&(Yf(t,de)||a.has(de.key))&&(W=W.insert(de.key,de))}return W})}getAllFromCollectionGroup(e,t,s,a){let f=qu();const v=Qm(t,s),M=Qm(t,si.max());return Kc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,M,!0)},(B,W,ee)=>{const de=this.Wn(g.fromSegments(W.prefixPath.concat(W.collectionGroup,W.documentId)),W);f=f.insert(de.key,de),f.size===a&&ee.done()}).next(()=>f)}newChangeBuffer(e){return new dv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ym(e).get("remoteDocumentGlobalKey").next(t=>(Cn(!!t),t))}zn(e,t){return Ym(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const s=function bw(n,e){let t;if(e.document)t=Zu(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=g.fromSegments(e.noDocument.path),a=ch(e.noDocument.readTime);t=zi.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _n();{const s=g.fromSegments(e.unknownDocument.path),a=ch(e.unknownDocument.version);t=zi.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new Gi(s[0],s[1]);return bn.fromTimestamp(a)}(e.readTime)),t}(this.Tt,t);if(!s.isNoDocument()||!s.version.isEqual(bn.min()))return s}return zi.newInvalidDocument(e)}}function cp(n){return new Cg(n)}class dv extends cv{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new Td(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new Pi((f,v)=>qn(f.canonicalString(),v.canonicalString()));return this.changes.forEach((f,v)=>{const M=this.ts.get(f);if(t.push(this.Xn.removeEntry(e,f,M.readTime)),v.isValidDocument()){const B=ev(this.Xn.Tt,v);a=a.add(f.path.popLast());const W=up(B);s+=W-M.size,t.push(this.Xn.addEntry(e,f,B))}else if(s-=M.size,this.trackRemovals){const B=ev(this.Xn.Tt,v.convertToNoDocument(bn.min()));t.push(this.Xn.addEntry(e,f,B))}}),a.forEach(f=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,f))}),t.push(this.Xn.updateMetadata(e,s)),We.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(s=>(this.ts.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:s,Zn:a})=>(a.forEach((f,v)=>{this.ts.set(f,{size:v,readTime:s.get(f).readTime})}),s))}}function Ym(n){return Ba(n,"remoteDocumentGlobal")}function Kc(n){return Ba(n,"remoteDocumentsV14")}function df(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Qm(n,e){const t=e.documentKey.path.toArray();return[n,gg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bg(n,e){const t=n.path.toArray(),s=e.path.toArray();let a=0;for(let f=0;f<t.length-2&&f<s.length-2;++f)if(a=qn(t[f],s[f]),a)return a;return a=qn(t.length,s.length),a||(a=qn(t[t.length-2],s[s.length-2]),a||qn(t[t.length-1],s[s.length-1]))}class hv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fv{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&sh(s.mutation,a,wu.empty(),Gi.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,yr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=yr()){const a=Ec();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(f=>{let v=ep();return f.forEach((M,B)=>{v=v.insert(M,B.overlayedDocument)}),v}))}getOverlayedDocuments(e,t){const s=Ec();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,yr()))}populateOverlays(e,t,s){const a=[];return s.forEach(f=>{t.has(f)||a.push(f)}),this.documentOverlayCache.getOverlays(e,a).next(f=>{f.forEach((v,M)=>{t.set(v,M)})})}computeViews(e,t,s,a){let f=qu();const v=Qh(),M=Qh();return t.forEach((B,W)=>{const ee=s.get(W.key);a.has(W.key)&&(void 0===ee||ee.mutation instanceof Cd)?f=f.insert(W.key,W):void 0!==ee?(v.set(W.key,ee.mutation.getFieldMask()),sh(ee.mutation,W,ee.mutation.getFieldMask(),Gi.now())):v.set(W.key,wu.empty())}),this.recalculateAndSaveOverlays(e,f).next(B=>(B.forEach((W,ee)=>v.set(W,ee)),t.forEach((W,ee)=>{var de;return M.set(W,new hv(ee,null!==(de=v.get(W))&&void 0!==de?de:null))}),M))}recalculateAndSaveOverlays(e,t){const s=Qh();let a=new yi((v,M)=>v-M),f=yr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(v=>{for(const M of v)M.keys().forEach(B=>{const W=t.get(B);if(null===W)return;let ee=s.get(B)||wu.empty();ee=M.applyToLocalView(W,ee),s.set(B,ee);const de=(a.get(M.batchId)||yr()).add(B);a=a.insert(M.batchId,de)})}).next(()=>{const v=[],M=a.getReverseIterator();for(;M.hasNext();){const B=M.getNext(),W=B.key,ee=B.value,de=Am();ee.forEach(ke=>{if(!f.has(ke)){const Qe=Sy(t.get(ke),s.get(ke));null!==Qe&&de.set(ke,Qe),f=f.add(ke)}}),v.push(this.documentOverlayCache.saveOverlays(e,W,de))}return We.waitFor(v)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return g.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):wy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(f=>{const v=a-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-f.size):We.resolve(Ec());let M=-1,B=f;return v.next(W=>We.forEach(W,(ee,de)=>(M<de.largestBatchId&&(M=de.largestBatchId),f.get(ee)?We.resolve():this.remoteDocumentCache.getEntry(e,ee).next(ke=>{B=B.insert(ee,ke)}))).next(()=>this.populateOverlays(e,W,f)).next(()=>this.computeViews(e,B,W,yr())).next(ee=>({batchId:M,changes:Sm(ee)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new g(t)).next(s=>{let a=ep();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let f=ep();return this.indexManager.getCollectionParents(e,a).next(v=>We.forEach(v,M=>{const B=(W=t,ee=M.child(a),new ru(ee,null,W.explicitOrderBy.slice(),W.filters.slice(),W.limit,W.limitType,W.startAt,W.endAt));var W,ee;return this.getDocumentsMatchingCollectionQuery(e,B,s).next(W=>{W.forEach((ee,de)=>{f=f.insert(ee,de)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(f=>(a=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(f=>{a.forEach((M,B)=>{const W=B.getKey();null===f.get(W)&&(f=f.insert(W,zi.newInvalidDocument(W)))});let v=ep();return f.forEach((M,B)=>{const W=a.get(M);void 0!==W&&sh(W.mutation,B,wu.empty(),Gi.now()),Yf(t,B)&&(v=v.insert(M,B))}),v})}}class pv{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return We.resolve(this.es.get(t))}saveBundleMetadata(e,t){var s;return this.es.set(t.id,{id:(s=t).id,version:s.version,createTime:mo(s.createTime)}),We.resolve()}getNamedQuery(e,t){return We.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(s=t).name,query:Gm(s.bundledQuery),readTime:mo(s.readTime)}),We.resolve();var s}}class gv{constructor(){this.overlays=new yi(g.comparator),this.ss=new Map}getOverlay(e,t){return We.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ec();return We.forEach(t,a=>this.getOverlay(e,a).next(f=>{null!==f&&s.set(a,f)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,f)=>{this.ce(e,t,f)}),We.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ss.get(s);return void 0!==a&&(a.forEach(f=>this.overlays=this.overlays.remove(f)),this.ss.delete(s)),We.resolve()}getOverlaysForCollection(e,t,s){const a=Ec(),f=t.length+1,v=new g(t.child("")),M=this.overlays.getIteratorFrom(v);for(;M.hasNext();){const B=M.getNext().value,W=B.getKey();if(!t.isPrefixOf(W.path))break;W.path.length===f&&B.largestBatchId>s&&a.set(B.getKey(),B)}return We.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let f=new yi((W,ee)=>W-ee);const v=this.overlays.getIterator();for(;v.hasNext();){const W=v.getNext().value;if(W.getKey().getCollectionGroup()===t&&W.largestBatchId>s){let ee=f.get(W.largestBatchId);null===ee&&(ee=Ec(),f=f.insert(W.largestBatchId,ee)),ee.set(W.getKey(),W)}}const M=Ec(),B=f.getIterator();for(;B.hasNext()&&(B.getNext().value.forEach((W,ee)=>M.set(W,ee)),!(M.size()>=a)););return We.resolve(M)}ce(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const v=this.ss.get(a.largestBatchId).delete(s.key);this.ss.set(a.largestBatchId,v)}this.overlays=this.overlays.insert(s.key,new Hm(t,s));let f=this.ss.get(t);void 0===f&&(f=yr(),this.ss.set(t,f)),this.ss.set(t,f.add(s.key))}}class Tg{constructor(){this.rs=new Pi(_a.os),this.us=new Pi(_a.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const s=new _a(e,t);this.rs=this.rs.add(s),this.us=this.us.add(s)}hs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ls(new _a(e,t))}fs(e,t){e.forEach(s=>this.removeReference(s,t))}ds(e){const t=new g(new Hr([])),s=new _a(t,e),a=new _a(t,e+1),f=[];return this.us.forEachInRange([s,a],v=>{this.ls(v),f.push(v.key)}),f}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new g(new Hr([])),s=new _a(t,e),a=new _a(t,e+1);let f=yr();return this.us.forEachInRange([s,a],v=>{f=f.add(v.key)}),f}containsKey(e){const t=new _a(e,0),s=this.rs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class _a{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return g.comparator(e.key,t.key)||qn(e.gs,t.gs)}static cs(e,t){return qn(e.gs,t.gs)||g.comparator(e.key,t.key)}}class Mw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new Pi(_a.os)}checkEmpty(e){return We.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const f=this.ys;this.ys++;const v=new $m(f,t,s,a);this.mutationQueue.push(v);for(const M of a)this.ps=this.ps.add(new _a(M.key,f)),this.indexManager.addToCollectionParentIndex(e,M.key.path.popLast());return We.resolve(v)}lookupMutationBatch(e,t){return We.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.Ts(t+1),f=a<0?0:a;return We.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return We.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return We.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new _a(t,0),a=new _a(t,Number.POSITIVE_INFINITY),f=[];return this.ps.forEachInRange([s,a],v=>{const M=this.Is(v.gs);f.push(M)}),We.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Pi(qn);return t.forEach(a=>{const f=new _a(a,0),v=new _a(a,Number.POSITIVE_INFINITY);this.ps.forEachInRange([f,v],M=>{s=s.add(M.gs)})}),We.resolve(this.Es(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let f=s;g.isDocumentKey(f)||(f=f.child(""));const v=new _a(new g(f),0);let M=new Pi(qn);return this.ps.forEachWhile(B=>{const W=B.key.path;return!!s.isPrefixOf(W)&&(W.length===a&&(M=M.add(B.gs)),!0)},v),We.resolve(this.Es(M))}Es(e){const t=[];return e.forEach(s=>{const a=this.Is(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){Cn(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let s=this.ps;return We.forEach(t.mutations,a=>{const f=new _a(a.key,t.batchId);return s=s.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.ps=s})}bn(e){}containsKey(e,t){const s=new _a(t,0),a=this.ps.firstAfterOrEqual(s);return We.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return We.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Rw{constructor(e){this.Rs=e,this.docs=new yi(g.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),f=a?a.size:0,v=this.Rs(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:v}),this.size+=v-f,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return We.resolve(s?s.document.mutableCopy():zi.newInvalidDocument(t))}getEntries(e,t){let s=qu();return t.forEach(a=>{const f=this.docs.get(a);s=s.insert(a,f?f.document.mutableCopy():zi.newInvalidDocument(a))}),We.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let f=qu();const v=t.path,M=new g(v.child("")),B=this.docs.getIteratorFrom(M);for(;B.hasNext();){const{key:W,value:{document:ee}}=B.getNext();if(!v.isPrefixOf(W.path))break;W.path.length>v.length+1||eu(Mn(ee),s)<=0||(a.has(ee.key)||Yf(t,ee))&&(f=f.insert(ee.key,ee.mutableCopy()))}return We.resolve(f)}getAllFromCollectionGroup(e,t,s,a){_n()}bs(e,t){return We.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Nw(this)}getSize(e){return We.resolve(this.size)}}class Nw extends cv{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Xn.addEntry(e,a)):this.Xn.removeEntry(s)}),We.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class mv{constructor(e){this.persistence=e,this.vs=new Td(t=>eh(t),Wf),this.lastRemoteSnapshotVersion=bn.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new Tg,this.targetCount=0,this.Ss=mh.Vn()}forEachTarget(e,t){return this.vs.forEach((s,a)=>t(a)),We.resolve()}getLastRemoteSnapshotVersion(e){return We.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return We.resolve(this.Ps)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),We.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ps&&(this.Ps=t),We.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new mh(t),this.highestTargetId=t),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,We.resolve()}updateTargetData(e,t){return this.xn(t),We.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,We.resolve()}removeTargets(e,t,s){let a=0;const f=[];return this.vs.forEach((v,M)=>{M.sequenceNumber<=t&&null===s.get(M.targetId)&&(this.vs.delete(v),f.push(this.removeMatchingKeysForTargetId(e,M.targetId)),a++)}),We.waitFor(f).next(()=>a)}getTargetCount(e){return We.resolve(this.targetCount)}getTargetData(e,t){const s=this.vs.get(t)||null;return We.resolve(s)}addMatchingKeys(e,t,s){return this.Vs.hs(t,s),We.resolve()}removeMatchingKeys(e,t,s){this.Vs.fs(t,s);const a=this.persistence.referenceDelegate,f=[];return a&&t.forEach(v=>{f.push(a.markPotentiallyOrphaned(e,v))}),We.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),We.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Vs.ws(t);return We.resolve(s)}containsKey(e,t){return We.resolve(this.Vs.containsKey(t))}}class dp{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new Pu(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new mv(this),this.indexManager=new uf,this.remoteDocumentCache=new Rw(s=>this.referenceDelegate.ks(s)),this.Tt=new Xy(t),this.Os=new pv(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ds[e.toKey()];return s||(s=new Mw(t,this.referenceDelegate),this.Ds[e.toKey()]=s),s}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(e,t,s){Dt("MemoryPersistence","Starting transaction:",e);const a=new _v(this.Cs.next());return this.referenceDelegate.Ms(),s(a).next(f=>this.referenceDelegate.Fs(a).next(()=>f)).toPromise().then(f=>(a.raiseOnCommittedEvent(),f))}$s(e,t){return We.or(Object.values(this.Ds).map(s=>()=>s.containsKey(e,t)))}}class _v extends Kd{constructor(e){super(),this.currentSequenceNumber=e}}class hp{constructor(e){this.persistence=e,this.Bs=new Tg,this.Ls=null}static qs(e){return new hp(e)}get Us(){if(this.Ls)return this.Ls;throw _n()}addReference(e,t,s){return this.Bs.addReference(s,t),this.Us.delete(s.toString()),We.resolve()}removeReference(e,t,s){return this.Bs.removeReference(s,t),this.Us.add(s.toString()),We.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),We.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(a=>this.Us.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(f=>this.Us.add(f.toString()))}).next(()=>s.removeTargetData(e,t))}Ms(){this.Ls=new Set}Fs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return We.forEach(this.Us,s=>{const a=g.fromPath(s);return this.Ks(e,a).next(f=>{f||t.removeEntry(a,bn.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(s=>{s?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return We.or([()=>We.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.$s(e,t)])}}class yv{constructor(e){this.Tt=e}$(e,t,s,a){const f=new El("createOrUpgrade",t);var M;s<1&&a>=1&&(e.createObjectStore("owner"),(M=e).createObjectStore("mutationQueues",{keyPath:"userId"}),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zy,{unique:!0}),M.createObjectStore("documentMutations"),Jm(e),function(M){M.createObjectStore("remoteDocuments")}(e));let v=We.resolve();return s<3&&a>=3&&(0!==s&&(function(M){M.deleteObjectStore("targetDocuments"),M.deleteObjectStore("targets"),M.deleteObjectStore("targetGlobal")}(e),Jm(e)),v=v.next(()=>function(M){const B=M.store("targetGlobal"),W={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bn.min().toTimestamp(),targetCount:0};return B.put("targetGlobalKey",W)}(f))),s<4&&a>=4&&(0!==s&&(v=v.next(()=>function(M,B){return B.store("mutations").W().next(W=>{M.deleteObjectStore("mutations"),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zy,{unique:!0});const ee=B.store("mutations"),de=W.map(ke=>ee.put(ke));return We.waitFor(de)})}(e,f))),v=v.next(()=>{!function(M){M.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(v=v.next(()=>this.Gs(f))),s<6&&a>=6&&(v=v.next(()=>(function(M){M.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(f)))),s<7&&a>=7&&(v=v.next(()=>this.js(f))),s<8&&a>=8&&(v=v.next(()=>this.zs(e,f))),s<9&&a>=9&&(v=v.next(()=>{!function(M){M.objectStoreNames.contains("remoteDocumentChanges")&&M.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(v=v.next(()=>this.Ws(f))),s<11&&a>=11&&(v=v.next(()=>{(function(M){M.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(M){M.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(v=v.next(()=>{!function(M){const B=M.createObjectStore("documentOverlays",{keyPath:Yy});B.createIndex("collectionPathOverlayIndex",jm,{unique:!1}),B.createIndex("collectionGroupOverlayIndex",Hc,{unique:!1})}(e)})),s<13&&a>=13&&(v=v.next(()=>function(M){const B=M.createObjectStore("remoteDocumentsV14",{keyPath:Iw});B.createIndex("documentKeyIndex",Cw),B.createIndex("collectionGroupIndex",dg)}(e)).next(()=>this.Hs(e,f)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(v=v.next(()=>this.Js(e,f))),s<15&&a>=15&&(v=v.next(()=>function(M){M.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),M.createObjectStore("indexState",{keyPath:rI}).createIndex("sequenceNumberIndex",qy,{unique:!1}),M.createObjectStore("indexEntries",{keyPath:Zy}).createIndex("documentKeyIndex",Ky,{unique:!1})}(e))),v}Qs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=up(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Gs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(a=>We.forEach(a,f=>{const v=IDBKeyRange.bound([f.userId,-1],[f.userId,f.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",v).next(M=>We.forEach(M,B=>{Cn(B.userId===f.userId);const W=dh(this.Tt,B);return Wm(e,f.userId,W).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const f=[];return s.X((v,M)=>{const B=new Hr(v),W=[0,iu(B)];f.push(t.get(W).next(ee=>ee?We.resolve():t.put({targetId:0,path:iu(B),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>We.waitFor(f))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:Bm});const s=t.store("collectionParents"),a=new xd,f=v=>{if(a.add(v)){const M=v.lastSegment(),B=v.popLast();return s.put({collectionId:M,parent:iu(B)})}};return t.store("remoteDocuments").X({Z:!0},(v,M)=>{const B=new Hr(v);return f(B.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([v,M,B],W)=>{const ee=Ql(M);return f(ee.popLast())}))}Ws(e){const t=e.store("targets");return t.X((s,a)=>{const f=nf(a),v=mg(this.Tt,f);return t.put(v)})}Hs(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((f,v)=>{const M=t.store("remoteDocumentsV14"),B=(W=v,W.document?new g(Hr.fromString(W.document.name).popFirst(5)):W.noDocument?g.fromSegments(W.noDocument.path):W.unknownDocument?g.fromSegments(W.unknownDocument.path):_n()).path.toArray();var W;const ee={prefixPath:B.slice(0,B.length-2),collectionGroup:B[B.length-2],documentId:B[B.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};a.push(M.put(ee))}).next(()=>We.waitFor(a))}Js(e,t){const s=t.store("mutations"),a=cp(this.Tt),f=new dp(hp.qs,this.Tt.oe);return s.W().next(v=>{const M=new Map;return v.forEach(B=>{var W;let ee=null!==(W=M.get(B.userId))&&void 0!==W?W:yr();dh(this.Tt,B).keys().forEach(de=>ee=ee.add(de)),M.set(B.userId,ee)}),We.forEach(M,(B,W)=>{const ee=new as(W),de=_g.ue(this.Tt,ee),ke=f.getIndexManager(ee),Qe=lp.ue(ee,this.Tt,ke,f.referenceDelegate);return new fv(a,Qe,de,ke).recalculateAndSaveOverlaysForDocumentKeys(new pg(t,Pu.at),B).next()})})}}function Jm(n){n.createObjectStore("targetDocuments",{keyPath:hg}).createIndex("documentTargetsIndex",nI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Vm,{unique:!0}),n.createObjectStore("targetGlobal")}const Dg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Sg{constructor(e,t,s,a,f,v,M,B,W,ee,de=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Ys=f,this.window=v,this.document=M,this.Zs=W,this.Xs=ee,this.ti=de,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=ke=>Promise.resolve(),!Sg.C())throw new Et(Ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ig(this,a),this.oi=t+"main",this.Tt=new Xy(B),this.ui=new nu(this.oi,this.ti,new yv(this.Tt)),this.Ns=new Aw(this.referenceDelegate,this.Tt),this.remoteDocumentCache=cp(this.Tt),this.Os=new Tw,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===ee&&_i("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Et(Ye.FAILED_PRECONDITION,Dg);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Pu(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var s=(0,_e.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,_e.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>fp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(tl(e))return Dt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Dt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return hf(e).get("owner").next(t=>We.resolve(this.yi(t)))}pi(e){return fp(e).delete(this.clientId)}Ii(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Ba(s,"clientMetadata");return a.W().next(f=>{const v=e.Ei(f,18e5),M=f.filter(B=>-1===v.indexOf(B));return We.forEach(M,B=>a.delete(B.clientId)).next(()=>M)})}).catch(()=>[]);if(e.ci)for(const s of t)e.ci.removeItem(e.Ai(s.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?We.resolve(!0):hf(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Et(Ye.FAILED_PRECONDITION,Dg);return!1}}return!(!this.networkEnabled||!this.inForeground)||fp(e).W().next(s=>void 0===this.Ei(s,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Dt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.xs=!1,e.bi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.Pi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new pg(t,Pu.at);return e.mi(s).next(()=>e.pi(s))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(s=>this.Ti(s.updateTimeMs,t)&&!this.Ri(s.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>fp(e).W().next(t=>this.Ei(t,18e5).map(s=>s.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return lp.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lf(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return _g.ue(this.Tt,e)}getBundleCache(){return this.Os}runTransaction(e,t,s){Dt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",f=15===(v=this.ti)?Jy:14===v?Qy:13===v?tf:12===v?fg:11===v?sp:void _n();var v;let M;return this.ui.runTransaction(e,a,f,B=>(M=new pg(B,this.Cs?this.Cs.next():Pu.at),"readwrite-primary"===t?this._i(M).next(W=>!!W||this.wi(M)).next(W=>{if(!W)throw _i(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Et(Ye.FAILED_PRECONDITION,mc);return s(M)}).next(W=>this.gi(M).next(()=>W)):this.Di(M).next(()=>s(M)))).then(B=>(M.raiseOnCommittedEvent(),B))}Di(e){return hf(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Et(Ye.FAILED_PRECONDITION,Dg)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hf(e).put("owner",t)}static C(){return nu.C()}mi(e){const t=hf(e);return t.get("owner").next(s=>this.yi(s)?(Dt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):We.resolve())}Ti(e,t){const s=Date.now();return!(e<s-t||e>s&&(_i(`Detected an update time that is in the future: ${e} > ${s}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.bi(),(0,Xe.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}Pi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const s=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Dt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return _i("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}bi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){_i("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hf(n){return Ba(n,"owner")}function fp(n){return Ba(n,"clientMetadata")}function ff(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Tc{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Ci=s,this.xi=a}static Ni(e,t){let s=yr(),a=yr();for(const f of t.docChanges)switch(f.type){case 0:s=s.add(f.doc.key);break;case 1:a=a.add(f.doc.key)}return new Tc(e,t.fromCache,s,a)}}class vv{constructor(){this.ki=!1}initialize(e,t){this.Oi=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Mi(e,t).next(f=>f||this.Fi(e,t,a,s)).next(f=>f||this.$i(e,t))}Mi(e,t){if(ow(t))return We.resolve(null);let s=Eu(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Zf(t,null,"F"),s=Eu(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(f=>{const v=yr(...f);return this.Oi.getDocuments(e,v).next(M=>this.indexManager.getMinOffset(e,s).next(B=>{const W=this.Bi(t,M);return this.Li(t,W,v,B.readTime)?this.Mi(e,Zf(t,null,"F")):this.qi(e,W,t,B)}))})))}Fi(e,t,s,a){return ow(t)||a.isEqual(bn.min())?this.$i(e,t):this.Oi.getDocuments(e,s).next(f=>{const v=this.Bi(t,f);return this.Li(t,v,s,a)?this.$i(e,t):(Bl()<=ks.in.DEBUG&&Dt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),sl(t)),this.qi(e,v,t,$n(a,-1)))})}Bi(e,t){let s=new Pi(Iy(e));return t.forEach((a,f)=>{Yf(e,f)&&(s=s.add(f))}),s}Li(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const f="F"===e.limitType?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(a)>0)}$i(e,t){return Bl()<=ks.in.DEBUG&&Dt("QueryEngine","Using full collection scan to execute query:",sl(t)),this.Oi.getDocumentsMatchingQuery(e,t,si.min())}qi(e,t,s,a){return this.Oi.getDocumentsMatchingQuery(e,s,a).next(f=>(t.forEach(v=>{f=f.insert(v.key,v)}),f))}}class Pw{constructor(e,t,s,a){this.persistence=e,this.Ui=t,this.Tt=a,this.Ki=new yi(qn),this.Gi=new Td(f=>eh(f),Wf),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.Os=e.getBundleCache(),this.zi(s)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fv(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function Ag(n,e,t,s){return new Pw(n,e,t,s)}function Md(n,e){return pp.apply(this,arguments)}function pp(){return pp=(0,_e.Z)(function*(n,e){const t=Wt(n);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(f=>(a=f,t.zi(e),t.mutationQueue.getAllMutationBatches(s))).next(f=>{const v=[],M=[];let B=yr();for(const W of a){v.push(W.batchId);for(const ee of W.mutations)B=B.add(ee.key)}for(const W of f){M.push(W.batchId);for(const ee of W.mutations)B=B.add(ee.key)}return t.localDocuments.getDocuments(s,B).next(W=>({Wi:W,removedBatchIds:v,addedBatchIds:M}))})})}),pp.apply(this,arguments)}function Ow(n,e){const t=Wt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),f=t.ji.newChangeBuffer({trackRemovals:!0});return function(v,M,B,W){const ee=B.batch,de=ee.keys();let ke=We.resolve();return de.forEach(Qe=>{ke=ke.next(()=>W.getEntry(M,Qe)).next(ht=>{const Bt=B.docVersions.get(Qe);Cn(null!==Bt),ht.version.compareTo(Bt)<0&&(ee.applyToRemoteDocument(ht,B),ht.isValidDocument()&&(ht.setReadTime(B.commitVersion),W.addEntry(ht)))})}),ke.next(()=>v.mutationQueue.removeMutationBatch(M,ee))}(t,s,e,f).next(()=>f.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(v){let M=yr();for(let B=0;B<v.mutationResults.length;++B)v.mutationResults[B].transformResults.length>0&&(M=M.add(v.batch.mutations[B].key));return M}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function xg(n){const e=Wt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function sI(n,e){const t=Wt(n),s=e.snapshotVersion;let a=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const v=t.ji.newChangeBuffer({trackRemovals:!0});a=t.Ki;const M=[];e.targetChanges.forEach((ee,de)=>{const ke=a.get(de);if(!ke)return;M.push(t.Ns.removeMatchingKeys(f,ee.removedDocuments,de).next(()=>t.Ns.addMatchingKeys(f,ee.addedDocuments,de)));let Qe=ke.withSequenceNumber(f.currentSequenceNumber);var ht,Bt,Jt;e.targetMismatches.has(de)?Qe=Qe.withResumeToken(Qr.EMPTY_BYTE_STRING,bn.min()).withLastLimboFreeSnapshotVersion(bn.min()):ee.resumeToken.approximateByteSize()>0&&(Qe=Qe.withResumeToken(ee.resumeToken,s)),a=a.insert(de,Qe),Bt=Qe,Jt=ee,(0===(ht=ke).resumeToken.approximateByteSize()||Bt.snapshotVersion.toMicroseconds()-ht.snapshotVersion.toMicroseconds()>=3e8||Jt.addedDocuments.size+Jt.modifiedDocuments.size+Jt.removedDocuments.size>0)&&M.push(t.Ns.updateTargetData(f,Qe))});let B=qu(),W=yr();if(e.documentUpdates.forEach(ee=>{e.resolvedLimboDocuments.has(ee)&&M.push(t.persistence.referenceDelegate.updateLimboDocument(f,ee))}),M.push(kw(f,v,e.documentUpdates).next(ee=>{B=ee.Hi,W=ee.Ji})),!s.isEqual(bn.min())){const ee=t.Ns.getLastRemoteSnapshotVersion(f).next(de=>t.Ns.setTargetsMetadata(f,f.currentSequenceNumber,s));M.push(ee)}return We.waitFor(M).next(()=>v.apply(f)).next(()=>t.localDocuments.getLocalViewOfDocuments(f,B,W)).next(()=>B)}).then(f=>(t.Ki=a,f))}function kw(n,e,t){let s=yr(),a=yr();return t.forEach(f=>s=s.add(f)),e.getEntries(n,s).next(f=>{let v=qu();return t.forEach((M,B)=>{const W=f.get(M);B.isFoundDocument()!==W.isFoundDocument()&&(a=a.add(M)),B.isNoDocument()&&B.version.isEqual(bn.min())?(e.removeEntry(M,B.readTime),v=v.insert(M,B)):!W.isValidDocument()||B.version.compareTo(W.version)>0||0===B.version.compareTo(W.version)&&W.hasPendingWrites?(e.addEntry(B),v=v.insert(M,B)):Dt("LocalStore","Ignoring outdated watch update for ",M,". Current version:",W.version," Watch version:",B.version)}),{Hi:v,Ji:a}})}function Fw(n,e){const t=Wt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function pf(n,e){const t=Wt(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Ns.getTargetData(s,e).next(f=>f?(a=f,We.resolve(a)):t.Ns.allocateTargetId(s).next(v=>(a=new uh(e,v,0,s.currentSequenceNumber),t.Ns.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ki.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(s.targetId,s),t.Gi.set(e,s.targetId)),s})}function yh(n,e,t){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,_e.Z)(function*(n,e,t){const s=Wt(n),a=s.Ki.get(e),f=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",f,v=>s.persistence.referenceDelegate.removeTarget(v,a)))}catch(v){if(!tl(v))throw v;Dt("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}s.Ki=s.Ki.remove(e),s.Gi.delete(a.target)}),Xm.apply(this,arguments)}function _o(n,e,t){const s=Wt(n);let a=bn.min(),f=yr();return s.persistence.runTransaction("Execute query","readonly",v=>function(M,B,W){const ee=Wt(M),de=ee.Gi.get(W);return void 0!==de?We.resolve(ee.Ki.get(de)):ee.Ns.getTargetData(B,W)}(s,v,Eu(e)).next(M=>{if(M)return a=M.lastLimboFreeSnapshotVersion,s.Ns.getMatchingKeysForTargetId(v,M.targetId).next(B=>{f=B})}).next(()=>s.Ui.getDocumentsMatchingQuery(v,e,t?a:bn.min(),t?f:yr())).next(M=>(Ev(s,wm(e),M),{documents:M,Yi:f})))}function e_(n,e){const t=Wt(n),s=Wt(t.Ns),a=t.Ki.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",f=>s.ie(f,e).next(v=>v?v.target:null))}function wv(n,e){const t=Wt(n),s=t.Qi.get(e)||bn.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.ji.getAllFromCollectionGroup(a,e,$n(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Ev(t,e,a),a))}function Ev(n,e,t){let s=n.Qi.get(e)||bn.min();t.forEach((a,f)=>{f.readTime.compareTo(s)>0&&(s=f.readTime)}),n.Qi.set(e,s)}function t_(){return t_=(0,_e.Z)(function*(n,e,t,s){const a=Wt(n);let f=yr(),v=qu();for(const W of t){const ee=e.Zi(W.metadata.name);W.document&&(f=f.add(ee));const de=e.Xi(W);de.setReadTime(e.tr(W.metadata.readTime)),v=v.insert(ee,de)}const M=a.ji.newChangeBuffer({trackRemovals:!0}),B=yield pf(a,(W=s,Eu(Kh(Hr.fromString(`__bundle__/docs/${W}`)))));var W;return a.persistence.runTransaction("Apply bundle documents","readwrite",W=>kw(W,M,v).next(ee=>(M.apply(W),ee)).next(ee=>a.Ns.removeMatchingKeysForTargetId(W,B.targetId).next(()=>a.Ns.addMatchingKeys(W,f,B.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(W,ee.Hi,ee.Ji)).next(()=>ee.Hi)))}),t_.apply(this,arguments)}function Cv(n,e){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,_e.Z)(function*(n,e,t=yr()){const s=yield pf(n,Eu(Gm(e.bundledQuery))),a=Wt(n);return a.persistence.runTransaction("Save named query","readwrite",f=>{const v=mo(e.readTime);if(s.snapshotVersion.compareTo(v)>=0)return a.Os.saveNamedQuery(f,e);const M=s.withResumeToken(Qr.EMPTY_BYTE_STRING,v);return a.Ki=a.Ki.insert(M.targetId,M),a.Ns.updateTargetData(f,M).next(()=>a.Ns.removeMatchingKeysForTargetId(f,s.targetId)).next(()=>a.Ns.addMatchingKeys(f,t,s.targetId)).next(()=>a.Os.saveNamedQuery(f,e))})}),Mg.apply(this,arguments)}function vh(n,e){return`firestore_clients_${n}_${e}`}function bv(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function n_(n,e){return`firestore_targets_${n}_${e}`}class gp{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static er(e,t,s){const a=JSON.parse(s);let f,v="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return v&&a.error&&(v="string"==typeof a.error.message&&"string"==typeof a.error.code,v&&(f=new Et(a.error.code,a.error.message))),v?new gp(e,t,a.state,f):(_i("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mp{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static er(e,t){const s=JSON.parse(t);let a,f="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return f&&s.error&&(f="string"==typeof s.error.message&&"string"==typeof s.error.code,f&&(a=new Et(s.error.code,s.error.message))),f?new mp(e,s.state,a):(_i("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _p{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,f=Mm();for(let v=0;a&&v<s.activeTargetIds.length;++v)a=Yp(s.activeTargetIds[v]),f=f.add(s.activeTargetIds[v]);return a?new _p(e,f):(_i("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Tv{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Tv(t.clientId,t.onlineState):(_i("SharedClientState",`Failed to parse online state: ${e}`),null)}}class yp{constructor(){this.activeTargetIds=Mm()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vp{constructor(e,t,s,a,f){this.window=e,this.Ys=t,this.persistenceKey=s,this.rr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new yi(qn),this.started=!1,this.hr=[];const v=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=f,this.lr=vh(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new yp),this._r=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(M){return`firestore_bundle_loaded_v2_${M}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Si();for(const a of t){if(a===e.rr)continue;const f=e.getItem(vh(e.persistenceKey,a));if(f){const v=_p.er(a,f);v&&(e.ar=e.ar.insert(v.clientId,v))}}e.pr();const s=e.storage.getItem(e.gr);if(s){const a=e.Ir(s);a&&e.Tr(a)}for(const a of e.hr)e.cr(a);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,s){this.Ar(e,t,s),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(n_(this.persistenceKey,e));if(s){const a=mp.er(e,s);a&&(t=a.state)}}return this.br.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.br.ir(e),this.pr()}isLocalQueryTarget(e){return this.br.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(n_(this.persistenceKey,e))}updateQueryState(e,t,s){this.vr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Rr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Dt("SharedClientState","READ",e,t),t}setItem(e,t){Dt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Dt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Dt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.lr)return void _i("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==s.key)if(t._r.test(s.key)){if(null==s.newValue){const a=t.Sr(s.key);return t.Dr(a,null)}{const a=t.Cr(s.key,s.newValue);if(a)return t.Dr(a.clientId,a)}}else if(t.wr.test(s.key)){if(null!==s.newValue){const a=t.Nr(s.key,s.newValue);if(a)return t.kr(a)}}else if(t.mr.test(s.key)){if(null!==s.newValue){const a=t.Or(s.key,s.newValue);if(a)return t.Mr(a)}}else if(s.key===t.gr){if(null!==s.newValue){const a=t.Ir(s.newValue);if(a)return t.Tr(a)}}else if(s.key===t.dr){const a=function(f){let v=Pu.at;if(null!=f)try{const M=JSON.parse(f);Cn("number"==typeof M),v=M}catch(M){_i("SharedClientState","Failed to read sequence number from WebStorage",M)}return v}(s.newValue);a!==Pu.at&&t.sequenceNumberHandler(a)}else if(s.key===t.yr){const a=t.Fr(s.newValue);yield Promise.all(a.map(f=>t.syncEngine.$r(f)))}}else t.hr.push(s)}))}}get br(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.br.nr())}Ar(e,t,s){const a=new gp(this.currentUser,e,t,s),f=bv(this.persistenceKey,this.currentUser,e);this.setItem(f,a.nr())}Rr(e){const t=bv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,s){const a=n_(this.persistenceKey,e),f=new mp(e,t,s);this.setItem(a,f.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const s=this.Sr(e);return _p.er(s,t)}Nr(e,t){const s=this.wr.exec(e),a=Number(s[1]);return gp.er(new as(void 0!==s[2]?s[2]:null),a,t)}Or(e,t){const s=this.mr.exec(e),a=Number(s[1]);return mp.er(a,t)}Ir(e){return Tv.er(e)}Fr(e){return JSON.parse(e)}kr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);Dt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const s=t?this.ar.insert(e,t):this.ar.remove(e),a=this.Er(this.ar),f=this.Er(s),v=[],M=[];return f.forEach(B=>{a.has(B)||v.push(B)}),a.forEach(B=>{f.has(B)||M.push(B)}),this.syncEngine.qr(v,M).then(()=>{this.ar=s})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=Mm();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class ec{constructor(){this.Ur=new yp,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,s){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new yp,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Lw{Gr(e){}shutdown(){}}class r_{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Dt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Dt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Dc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tc{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}class nc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,s,a,f){const v=this.fo(e,t);Dt("RestConnection","Sending: ",v,s);const M={};return this._o(M,a,f),this.wo(e,v,M,s).then(B=>(Dt("RestConnection","Received: ",B),B),B=>{throw Hu("RestConnection",`${e} failed with error: `,B,"url: ",v,"request:",s),B})}mo(e,t,s,a,f,v){return this.lo(e,t,s,a,f)}_o(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+el,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,f)=>e[f]=a),s&&s.headers.forEach((a,f)=>e[f]=a)}fo(e,t){return`${this.co}/v1/${t}:${Dc[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,s,a){return new Promise((f,v)=>{const M=new La;M.setWithCredentials(!0),M.listenOnce(zd.COMPLETE,()=>{try{switch(M.getLastErrorCode()){case fc.NO_ERROR:const W=M.getResponseJson();Dt("Connection","XHR received:",JSON.stringify(W)),f(W);break;case fc.TIMEOUT:Dt("Connection",'RPC "'+e+'" timed out'),v(new Et(Ye.DEADLINE_EXCEEDED,"Request time out"));break;case fc.HTTP_ERROR:const ee=M.getStatus();if(Dt("Connection",'RPC "'+e+'" failed with status:',ee,"response text:",M.getResponseText()),ee>0){let de=M.getResponseJson();Array.isArray(de)&&(de=de[0]);const ke=de?.error;if(ke&&ke.status&&ke.message){const Qe=function(ht){const Bt=ht.toLowerCase().replace(/_/g,"-");return Object.values(Ye).indexOf(Bt)>=0?Bt:Ye.UNKNOWN}(ke.status);v(new Et(Qe,ke.message))}else v(new Et(Ye.UNKNOWN,"Server responded with status "+M.getStatus()))}else v(new Et(Ye.UNAVAILABLE,"Connection failed."));break;default:_n()}}finally{Dt("Connection",'RPC "'+e+'" completed.')}});const B=JSON.stringify(a);M.send(t,"POST",B,s,15)})}yo(e,t,s){const a=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=gl(),v=Vl(),M={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(M.xmlHttpFactory=new _l({})),this._o(M.initMessageHeaders,t,s),M.encodeInitMessageHeaders=!0;const B=a.join("");Dt("Connection","Creating WebChannel: "+B,M);const W=f.createWebChannel(B,M);let ee=!1,de=!1;const ke=new tc({Yr:ht=>{de?Dt("Connection","Not sending because WebChannel is closed:",ht):(ee||(Dt("Connection","Opening WebChannel transport."),W.open(),ee=!0),Dt("Connection","WebChannel sending:",ht),W.send(ht))},Zr:()=>W.close()}),Qe=(ht,Bt,Jt)=>{ht.listen(Bt,ei=>{try{Jt(ei)}catch(li){setTimeout(()=>{throw li},0)}})};return Qe(W,yl.EventType.OPEN,()=>{de||Dt("Connection","WebChannel transport opened.")}),Qe(W,yl.EventType.CLOSE,()=>{de||(de=!0,Dt("Connection","WebChannel transport closed"),ke.oo())}),Qe(W,yl.EventType.ERROR,ht=>{de||(de=!0,Hu("Connection","WebChannel transport errored:",ht),ke.oo(new Et(Ye.UNAVAILABLE,"The operation could not be completed")))}),Qe(W,yl.EventType.MESSAGE,ht=>{var Bt;if(!de){const Jt=ht.data[0];Cn(!!Jt);const li=Jt.error||(null===(Bt=Jt[0])||void 0===Bt?void 0:Bt.error);if(li){Dt("Connection","WebChannel received error:",li);const Qn=li.status;let xr=function(Mr){const $s=Uo[Mr];if(void 0!==$s)return Dm($s)}(Qn),Lr=li.message;void 0===xr&&(xr=Ye.INTERNAL,Lr="Unknown error status: "+Qn+" with message "+li.message),de=!0,ke.oo(new Et(xr,Lr)),W.close()}else Dt("Connection","WebChannel received:",Jt),ke.uo(Jt)}}),Qe(v,Xa.STAT_EVENT,ht=>{ht.stat===ml.PROXY?Dt("Connection","Detected buffering proxy"):ht.stat===ml.NOPROXY&&Dt("Connection","Detected no buffering proxy")}),setTimeout(()=>{ke.ro()},0),ke}}function i_(){return typeof window<"u"?window:null}function wp(){return typeof document<"u"?document:null}function Ep(n){return new Py(n,!0)}class s_{constructor(e,t,s=1e3,a=1.5,f=6e4){this.Ys=e,this.timerId=t,this.po=s,this.Io=a,this.To=f,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.Po()),s=Math.max(0,Date.now()-this.Ro),a=Math.max(0,t-s);a>0&&Dt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,a,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}class Dv{constructor(e,t,s,a,f,v,M,B){this.Ys=e,this.So=s,this.Do=a,this.connection=f,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=M,this.listener=B,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new s_(e,t)}Oo(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Fo()}stop(){var e=this;return(0,_e.Z)(function*(){e.Oo()&&(yield e.close(0))})()}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,_e.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var s=this;return(0,_e.Z)(function*(){s.Uo(),s.Ko(),s.ko.cancel(),s.Co++,4!==e?s.ko.reset():t&&t.code===Ye.RESOURCE_EXHAUSTED?(_i(t.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),s.ko.bo()):t&&t.code===Ye.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Go(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Co===t&&this.jo(s,a)},s=>{e(()=>{const a=new Et(Ye.UNKNOWN,"Fetching auth token failed: "+s.message);return this.zo(a)})})}jo(e,t){const s=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{s(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(a=>{s(()=>this.zo(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Fo(){var e=this;this.state=5,this.ko.vo((0,_e.Z)(function*(){e.state=0,e.start()}))}zo(e){return Dt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(Dt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Uw extends Dv{constructor(e,t,s,a,f,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,v),this.Tt=f}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function _w(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(B=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===B?1:"REMOVE"===B?2:"CURRENT"===B?3:"RESET"===B?4:_n(),a=e.targetChange.targetIds||[],f=function(B,W){return B.yt?(Cn(void 0===W||"string"==typeof W),Qr.fromBase64String(W||"")):(Cn(void 0===W||W instanceof Uint8Array),Qr.fromUint8Array(W||new Uint8Array))}(n,e.targetChange.resumeToken),v=e.targetChange.cause,M=v&&function(B){const W=void 0===B.code?Ye.UNKNOWN:Dm(B.code);return new Et(W,B.message||"")}(v);t=new Ry(s,a,f,M||null)}else if("documentChange"in e){const s=e.documentChange,a=Kl(n,s.document.name),f=mo(s.document.updateTime),v=s.document.createTime?mo(s.document.createTime):bn.min(),M=new Va({mapValue:{fields:s.document.fields}}),B=zi.newFoundDocument(a,f,v,M);t=new ig(s.targetIds||[],s.removedTargetIds||[],B.key,B)}else if("documentDelete"in e){const s=e.documentDelete,a=Kl(n,s.document),f=s.readTime?mo(s.readTime):bn.min(),v=zi.newNoDocument(a,f);t=new ig([],s.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const s=e.documentRemove,a=Kl(n,s.document);t=new ig([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return _n();{const s=e.filter,f=new pw(s.count||0);t=new Rm(s.targetId,f)}}var B;return t}(this.Tt,e),s=function(a){if(!("targetChange"in a))return bn.min();const f=a.targetChange;return f.targetIds&&f.targetIds.length?bn.min():f.readTime?mo(f.readTime):bn.min()}(e);return this.listener.Ho(t,s)}Jo(e){const t={};t.database=Xh(this.Tt),t.addTarget=function(a,f){let v;const M=f.target;return v=tg(M)?{documents:Vy(a,M)}:{query:Fm(a,M)},v.targetId=f.targetId,f.resumeToken.approximateByteSize()>0?v.resumeToken=ug(a,f.resumeToken):f.snapshotVersion.compareTo(bn.min())>0&&(v.readTime=Dd(a,f.snapshotVersion.toTimestamp())),v}(this.Tt,e);const s=function jy(n,e){const t=function(s,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _n()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.qo(t)}Yo(e){const t={};t.database=Xh(this.Tt),t.removeTarget=e,this.qo(t)}}class o_ extends Dv{constructor(e,t,s,a,f,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,v),this.Tt=f,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(Cn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function Uy(n,e){return n&&n.length>0?(Cn(void 0!==e),n.map(t=>function(s,a){let f=mo(s.updateTime?s.updateTime:a);return f.isEqual(bn.min())&&(f=mo(a)),new eI(f,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=mo(e.commitTime);return this.listener.eu(s,t)}return Cn(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=Xh(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>lg(this.Tt,s))};this.qo(t)}}class Ip extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.Tt=a,this.iu=!1}ru(){if(this.iu)throw new Et(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,s){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,f])=>this.connection.lo(e,t,s,a,f)).catch(a=>{throw"FirebaseError"===a.name?(a.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Et(Ye.UNKNOWN,a.toString())})}mo(e,t,s,a){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,v])=>this.connection.mo(e,t,s,f,v,a)).catch(f=>{throw"FirebaseError"===f.name?(f.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Et(Ye.UNKNOWN,f.toString())})}terminate(){this.iu=!0}}class Bw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(_i(t),this.cu=!1):Dt("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class Sv{constructor(e,t,s,a,f){var v=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=f,this.yu.Gr(M=>{s.enqueueAndForget((0,_e.Z)(function*(){var B;Sc(v)&&(Dt("RemoteStore","Restarting streams for network reachability change."),yield(B=(0,_e.Z)(function*(W){const ee=Wt(W);ee.mu.add(4),yield _f(ee),ee.pu.set("Unknown"),ee.mu.delete(4),yield gf(ee)}),function(W){return B.apply(this,arguments)})(v))}))}),this.pu=new Bw(s,a)}}function gf(n){return mf.apply(this,arguments)}function mf(){return mf=(0,_e.Z)(function*(n){if(Sc(n))for(const e of n.gu)yield e(!0)}),mf.apply(this,arguments)}function _f(n){return Ng.apply(this,arguments)}function Ng(){return Ng=(0,_e.Z)(function*(n){for(const e of n.gu)yield e(!1)}),Ng.apply(this,arguments)}function Cp(n,e){const t=Wt(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),kg(t)?Og(t):Eh(t).Mo()&&yf(t,e))}function wh(n,e){const t=Wt(n),s=Eh(t);t.wu.delete(e),s.Mo()&&Pg(t,e),0===t.wu.size&&(s.Mo()?s.Bo():Sc(t)&&t.pu.set("Unknown"))}function yf(n,e){n.Iu.Ft(e.targetId),Eh(n).Jo(e)}function Pg(n,e){n.Iu.Ft(e),Eh(n).Yo(e)}function Og(n){n.Iu=new sg({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),Eh(n).start(),n.pu.au()}function kg(n){return Sc(n)&&!Eh(n).Oo()&&n.wu.size>0}function Sc(n){return 0===Wt(n).mu.size}function a_(n){n.Iu=void 0}function Av(n){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,_e.Z)(function*(n){n.wu.forEach((e,t)=>{yf(n,e)})}),Fg.apply(this,arguments)}function xv(n,e){return u_.apply(this,arguments)}function u_(){return u_=(0,_e.Z)(function*(n,e){a_(n),kg(n)?(n.pu.fu(e),Og(n)):n.pu.set("Unknown")}),u_.apply(this,arguments)}function jw(n,e,t){return l_.apply(this,arguments)}function l_(){return l_=(0,_e.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof Ry&&2===e.state&&e.cause)try{yield(s=(0,_e.Z)(function*(a,f){const v=f.cause;for(const M of f.targetIds)a.wu.has(M)&&(yield a.remoteSyncer.rejectListen(M,v),a.wu.delete(M),a.Iu.removeTarget(M))}),function(a,f){return s.apply(this,arguments)})(n,e)}catch(s){Dt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Lg(n,s)}else if(e instanceof ig?n.Iu.Qt(e):e instanceof Rm?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(bn.min()))try{const s=yield xg(n.localStore);t.compareTo(s)>=0&&(yield function(a,f){const v=a.Iu.ee(f);return v.targetChanges.forEach((M,B)=>{if(M.resumeToken.approximateByteSize()>0){const W=a.wu.get(B);W&&a.wu.set(B,W.withResumeToken(M.resumeToken,f))}}),v.targetMismatches.forEach(M=>{const B=a.wu.get(M);if(!B)return;a.wu.set(M,B.withResumeToken(Qr.EMPTY_BYTE_STRING,B.snapshotVersion)),Pg(a,M);const W=new uh(B.target,M,1,B.sequenceNumber);yf(a,W)}),a.remoteSyncer.applyRemoteEvent(v)}(n,t))}catch(s){Dt("RemoteStore","Failed to raise snapshot:",s),yield Lg(n,s)}var s}),l_.apply(this,arguments)}function Lg(n,e,t){return c_.apply(this,arguments)}function c_(){return c_=(0,_e.Z)(function*(n,e,t){if(!tl(e))throw e;n.mu.add(1),yield _f(n),n.pu.set("Offline"),t||(t=()=>xg(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Dt("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield gf(n)}))}),c_.apply(this,arguments)}function Mv(n,e){return e().catch(t=>Lg(n,t,e))}function vf(n){return d_.apply(this,arguments)}function d_(){return d_=(0,_e.Z)(function*(n){const e=Wt(n),t=Yc(e);let s=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;$w(e);)try{const a=yield Fw(e.localStore,s);if(null===a){0===e._u.length&&t.Bo();break}s=a.batchId,Hw(e,a)}catch(a){yield Lg(e,a)}Rv(e)&&Nv(e)}),d_.apply(this,arguments)}function $w(n){return Sc(n)&&n._u.length<10}function Hw(n,e){n._u.push(e);const t=Yc(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function Rv(n){return Sc(n)&&!Yc(n).Oo()&&n._u.length>0}function Nv(n){Yc(n).start()}function Gw(n){return h_.apply(this,arguments)}function h_(){return h_=(0,_e.Z)(function*(n){Yc(n).su()}),h_.apply(this,arguments)}function zw(n){return f_.apply(this,arguments)}function f_(){return f_=(0,_e.Z)(function*(n){const e=Yc(n);for(const t of n._u)e.tu(t.mutations)}),f_.apply(this,arguments)}function Ww(n,e,t){return p_.apply(this,arguments)}function p_(){return p_=(0,_e.Z)(function*(n,e,t){const s=n._u.shift(),a=ah.from(s,e,t);yield Mv(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield vf(n)}),p_.apply(this,arguments)}function Pv(n,e){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,_e.Z)(function*(n,e){var t;e&&Yc(n).Xo&&(yield(t=(0,_e.Z)(function*(s,a){if(xy(f=a.code)&&f!==Ye.ABORTED){const v=s._u.shift();Yc(s).$o(),yield Mv(s,()=>s.remoteSyncer.rejectFailedWrite(v.batchId,a)),yield vf(s)}var f}),function(s,a){return t.apply(this,arguments)})(n,e)),Rv(n)&&Nv(n)}),Ug.apply(this,arguments)}function g_(n,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,_e.Z)(function*(n,e){const t=Wt(n);t.asyncQueue.verifyOperationInProgress(),Dt("RemoteStore","RemoteStore received new credentials");const s=Sc(t);t.mu.add(3),yield _f(t),s&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield gf(t)}),Vg.apply(this,arguments)}function Bg(n,e){return jg.apply(this,arguments)}function jg(){return jg=(0,_e.Z)(function*(n,e){const t=Wt(n);e?(t.mu.delete(2),yield gf(t)):e||(t.mu.add(2),yield _f(t),t.pu.set("Unknown"))}),jg.apply(this,arguments)}function Eh(n){return n.Tu||(n.Tu=function(e,t,s){const a=Wt(e);return a.ru(),new Uw(t,a.connection,a.authCredentials,a.appCheckCredentials,a.Tt,s)}(n.datastore,n.asyncQueue,{Xr:Av.bind(null,n),no:xv.bind(null,n),Ho:jw.bind(null,n)}),n.gu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Tu.$o(),kg(n)?Og(n):n.pu.set("Unknown")):(yield n.Tu.stop(),a_(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function Yc(n){return n.Eu||(n.Eu=function(e,t,s){const a=Wt(e);return a.ru(),new o_(t,a.connection,a.authCredentials,a.appCheckCredentials,a.Tt,s)}(n.datastore,n.asyncQueue,{Xr:Gw.bind(null,n),no:Pv.bind(null,n),nu:zw.bind(null,n),eu:Ww.bind(null,n)}),n.gu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Eu.$o(),yield vf(n)):(yield n.Eu.stop(),n._u.length>0&&(Dt("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class $g{constructor(e,t,s,a,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=f,this.deferred=new ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,t,s,a,f){const v=Date.now()+s,M=new $g(e,t,v,a,f);return M.start(s),M}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Et(Ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ih(n,e){if(_i("AsyncQueue",`${e}: ${n}`),tl(n))return new Et(Ye.UNAVAILABLE,`${e}: ${n}`);throw n}class Rd{constructor(e){this.comparator=e?(t,s)=>e(t,s)||g.comparator(t.key,s.key):(t,s)=>g.comparator(t.key,s.key),this.keyedMap=ep(),this.sortedSet=new yi(this.comparator)}static emptySet(e){return new Rd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,f=s.getNext().key;if(!a.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Rd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Nd{constructor(){this.Au=new yi(g.comparator)}track(e){const t=e.doc.key,s=this.Au.get(t);s?0!==e.type&&3===s.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==s.type?this.Au=this.Au.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Au=this.Au.remove(t):1===e.type&&2===s.type?this.Au=this.Au.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):_n():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,s)=>{e.push(s)}),e}}class wf{constructor(e,t,s,a,f,v,M,B,W){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=f,this.fromCache=v,this.syncStateChanged=M,this.excludesMetadataChanges=B,this.hasCachedResults=W}static fromInitialDocuments(e,t,s,a,f){const v=[];return t.forEach(M=>{v.push({type:0,doc:M})}),new wf(e,t,Rd.emptySet(t),v,s,a,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class qw{constructor(){this.bu=void 0,this.listeners=[]}}class Ef{constructor(){this.queries=new Td(e=>Ey(e),Kf),this.onlineState="Unknown",this.vu=new Set}}function Ov(n,e){return bp.apply(this,arguments)}function bp(){return bp=(0,_e.Z)(function*(n,e){const t=Wt(n),s=e.query;let a=!1,f=t.queries.get(s);if(f||(a=!0,f=new qw),a)try{f.bu=yield t.onListen(s)}catch(v){const M=Ih(v,`Initialization of query '${sl(e.query)}' failed`);return void e.onError(M)}t.queries.set(s,f),f.listeners.push(e),e.Pu(t.onlineState),f.bu&&e.Vu(f.bu)&&Gn(t)}),bp.apply(this,arguments)}function kv(n,e){return Hg.apply(this,arguments)}function Hg(){return Hg=(0,_e.Z)(function*(n,e){const t=Wt(n),s=e.query;let a=!1;const f=t.queries.get(s);if(f){const v=f.listeners.indexOf(e);v>=0&&(f.listeners.splice(v,1),a=0===f.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Hg.apply(this,arguments)}function Fv(n,e){const t=Wt(n);let s=!1;for(const a of e){const v=t.queries.get(a.query);if(v){for(const M of v.listeners)M.Vu(a)&&(s=!0);v.bu=a}}s&&Gn(t)}function oI(n,e,t){const s=Wt(n),a=s.queries.get(e);if(a)for(const f of a.listeners)f.onError(t);s.queries.delete(e)}function Gn(n){n.vu.forEach(e=>{e.next()})}class m_{constructor(e,t,s){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=s||{}}Vu(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new wf(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.Ou||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=wf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class Zw{constructor(e,t){this.Mu=e,this.byteLength=t}Fu(){return"metadata"in this.Mu}}class Lv{constructor(e){this.Tt=e}Zi(e){return Kl(this.Tt,e)}Xi(e){return e.metadata.exists?Zu(this.Tt,e.document,!1):zi.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return mo(e)}}class If{constructor(e,t,s){this.$u=e,this.localStore=t,this.Tt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Uv(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const s=Hr.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,s=new Lv(this.Tt);for(const a of e)if(a.metadata.queries){const f=s.Zi(a.metadata.name);for(const v of a.metadata.queries){const M=(t.get(v)||yr()).add(f);t.set(v,M)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function Iv(n,e,t,s){return t_.apply(this,arguments)}(e.localStore,new Lv(e.Tt),e.documents,e.$u.id),s=e.Lu(e.documents);for(const a of e.queries)yield Cv(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function Uv(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Tp{constructor(e){this.key=e}}class Dp{constructor(e){this.key=e}}class io{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=yr(),this.mutatedKeys=yr(),this.ju=Iy(e),this.zu=new Rd(this.ju)}get Wu(){return this.Ku}Hu(e,t){const s=t?t.Ju:new Nd,a=t?t.zu:this.zu;let f=t?t.mutatedKeys:this.mutatedKeys,v=a,M=!1;const B="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,W="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((ee,de)=>{const ke=a.get(ee),Qe=Yf(this.query,de)?de:null,ht=!!ke&&this.mutatedKeys.has(ke.key),Bt=!!Qe&&(Qe.hasLocalMutations||this.mutatedKeys.has(Qe.key)&&Qe.hasCommittedMutations);let Jt=!1;ke&&Qe?ke.data.isEqual(Qe.data)?ht!==Bt&&(s.track({type:3,doc:Qe}),Jt=!0):this.Yu(ke,Qe)||(s.track({type:2,doc:Qe}),Jt=!0,(B&&this.ju(Qe,B)>0||W&&this.ju(Qe,W)<0)&&(M=!0)):!ke&&Qe?(s.track({type:0,doc:Qe}),Jt=!0):ke&&!Qe&&(s.track({type:1,doc:ke}),Jt=!0,(B||W)&&(M=!0)),Jt&&(Qe?(v=v.add(Qe),f=Bt?f.add(ee):f.delete(ee)):(v=v.delete(ee),f=f.delete(ee)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const ee="F"===this.query.limitType?v.last():v.first();v=v.delete(ee.key),f=f.delete(ee.key),s.track({type:1,doc:ee})}return{zu:v,Ju:s,Li:M,mutatedKeys:f}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const f=e.Ju.Ru();f.sort((W,ee)=>function(de,ke){const Qe=ht=>{switch(ht){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _n()}};return Qe(de)-Qe(ke)}(W.type,ee.type)||this.ju(W.doc,ee.doc)),this.Zu(s);const v=t?this.Xu():[],M=0===this.Qu.size&&this.current?1:0,B=M!==this.Gu;return this.Gu=M,0!==f.length||B?{snapshot:new wf(this.query,e.zu,a,f,e.mutatedKeys,0===M,B,!1,!!s&&s.resumeToken.approximateByteSize()>0),tc:v}:{tc:v}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new Nd,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=yr(),this.zu.forEach(s=>{this.ec(s.key)&&(this.Qu=this.Qu.add(s.key))});const t=[];return e.forEach(s=>{this.Qu.has(s)||t.push(new Dp(s))}),this.Qu.forEach(s=>{e.has(s)||t.push(new Tp(s))}),t}nc(e){this.Ku=e.Yi,this.Qu=yr();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return wf.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class aI{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Vv{constructor(e){this.key=e,this.ic=!1}}class Bv{constructor(e,t,s,a,f,v){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=f,this.maxConcurrentLimboResolutions=v,this.rc={},this.oc=new Td(M=>Ey(M),Kf),this.uc=new Map,this.cc=new Set,this.ac=new yi(g.comparator),this.hc=new Map,this.lc=new Tg,this.fc={},this.dc=new Map,this._c=mh.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function Kw(n,e){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,_e.Z)(function*(n,e){const t=M_(n);let s,a;const f=t.oc.get(e);if(f)s=f.targetId,t.sharedClientState.addLocalQueryTarget(s),a=f.view.sc();else{const v=yield pf(t.localStore,Eu(e));t.isPrimaryClient&&Cp(t.remoteStore,v);const M=t.sharedClientState.addLocalQueryTarget(v.targetId);s=v.targetId,a=yield zg(t,e,s,"current"===M,v.resumeToken)}return a}),Gg.apply(this,arguments)}function zg(n,e,t,s,a){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,_e.Z)(function*(n,e,t,s,a){n.mc=(de,ke,Qe)=>{return(ht=(0,_e.Z)(function*(Bt,Jt,ei,li){let Qn=Jt.view.Hu(ei);Qn.Li&&(Qn=yield _o(Bt.localStore,Jt.query,!1).then(({documents:Mr})=>Jt.view.Hu(Mr,Qn)));const xr=li&&li.targetChanges.get(Jt.targetId),Lr=Jt.view.applyChanges(Qn,Bt.isPrimaryClient,xr);return Zg(Bt,Jt.targetId,Lr.tc),Lr.snapshot}),function(Bt,Jt,ei,li){return ht.apply(this,arguments)})(n,de,ke,Qe);var ht};const f=yield _o(n.localStore,e,!0),v=new io(e,f.Yi),M=v.Hu(f.documents),B=Jh.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState,a),W=v.applyChanges(M,n.isPrimaryClient,B);Zg(n,t,W.tc);const ee=new aI(e,t,v);return n.oc.set(e,ee),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),W.snapshot}),Wg.apply(this,arguments)}function jv(n,e){return __.apply(this,arguments)}function __(){return __=(0,_e.Z)(function*(n,e){const t=Wt(n),s=t.oc.get(e),a=t.uc.get(s.targetId);if(a.length>1)return t.uc.set(s.targetId,a.filter(f=>!Kf(f,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield yh(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),wh(t.remoteStore,s.targetId),Tf(t,s.targetId)}).catch(tu))):(Tf(t,s.targetId),yield yh(t.localStore,s.targetId,!0))}),__.apply(this,arguments)}function y_(){return y_=(0,_e.Z)(function*(n,e,t){const s=Th(n);try{const a=yield function(f,v){const M=Wt(f),B=Gi.now(),W=v.reduce((ke,Qe)=>ke.add(Qe.key),yr());let ee,de;return M.persistence.runTransaction("Locally write mutations","readwrite",ke=>{let Qe=qu(),ht=yr();return M.ji.getEntries(ke,W).next(Bt=>{Qe=Bt,Qe.forEach((Jt,ei)=>{ei.isValidDocument()||(ht=ht.add(Jt))})}).next(()=>M.localDocuments.getOverlayedDocuments(ke,Qe)).next(Bt=>{ee=Bt;const Jt=[];for(const ei of v){const li=dw(ei,ee.get(ei.key).overlayedDocument);null!=li&&Jt.push(new Cd(ei.key,li,eg(li.value.mapValue),Ds.exists(!0)))}return M.mutationQueue.addMutationBatch(ke,B,Jt,v)}).next(Bt=>{de=Bt;const Jt=Bt.applyToLocalDocumentSet(ee,ht);return M.documentOverlayCache.saveOverlays(ke,Bt.batchId,Jt)})}).then(()=>({batchId:de.batchId,changes:Sm(ee)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(f,v,M){let B=f.fc[f.currentUser.toKey()];B||(B=new yi(qn)),B=B.insert(v,M),f.fc[f.currentUser.toKey()]=B}(s,a.batchId,t),yield Ac(s,a.changes),yield vf(s.remoteStore)}catch(a){const f=Ih(a,"Failed to persist write");t.reject(f)}}),y_.apply(this,arguments)}function Cf(n,e){return v_.apply(this,arguments)}function v_(){return v_=(0,_e.Z)(function*(n,e){const t=Wt(n);try{const s=yield sI(t.localStore,e);e.targetChanges.forEach((a,f)=>{const v=t.hc.get(f);v&&(Cn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?v.ic=!0:a.modifiedDocuments.size>0?Cn(v.ic):a.removedDocuments.size>0&&(Cn(v.ic),v.ic=!1))}),yield Ac(t,s,e)}catch(s){yield tu(s)}}),v_.apply(this,arguments)}function $v(n,e,t){const s=Wt(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.oc.forEach((f,v)=>{const M=v.view.Pu(e);M.snapshot&&a.push(M.snapshot)}),function(f,v){const M=Wt(f);M.onlineState=v;let B=!1;M.queries.forEach((W,ee)=>{for(const de of ee.listeners)de.Pu(v)&&(B=!0)}),B&&Gn(M)}(s.eventManager,e),a.length&&s.rc.Ho(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function Qw(n,e,t){return bf.apply(this,arguments)}function bf(){return bf=(0,_e.Z)(function*(n,e,t){const s=Wt(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.hc.get(e),f=a&&a.key;if(f){let v=new yi(g.comparator);v=v.insert(f,zi.newNoDocument(f,bn.min()));const M=yr().add(f),B=new Ic(bn.min(),new Map,new Pi(qn),v,M);yield Cf(s,B),s.ac=s.ac.remove(f),s.hc.delete(e),b_(s)}else yield yh(s.localStore,e,!1).then(()=>Tf(s,e,t)).catch(tu)}),bf.apply(this,arguments)}function Hv(n,e){return qg.apply(this,arguments)}function qg(){return qg=(0,_e.Z)(function*(n,e){const t=Wt(n),s=e.batch.batchId;try{const a=yield Ow(t.localStore,e);I_(t,s,null),E_(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Ac(t,a)}catch(a){yield tu(a)}}),qg.apply(this,arguments)}function Gv(n,e,t){return w_.apply(this,arguments)}function w_(){return w_=(0,_e.Z)(function*(n,e,t){const s=Wt(n);try{const a=yield function(f,v){const M=Wt(f);return M.persistence.runTransaction("Reject batch","readwrite-primary",B=>{let W;return M.mutationQueue.lookupMutationBatch(B,v).next(ee=>(Cn(null!==ee),W=ee.keys(),M.mutationQueue.removeMutationBatch(B,ee))).next(()=>M.mutationQueue.performConsistencyCheck(B)).next(()=>M.documentOverlayCache.removeOverlaysForBatchId(B,W,v)).next(()=>M.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(B,W)).next(()=>M.localDocuments.getDocuments(B,W))})}(s.localStore,e);I_(s,e,t),E_(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Ac(s,a)}catch(a){yield tu(a)}}),w_.apply(this,arguments)}function Ch(){return Ch=(0,_e.Z)(function*(n,e){const t=Wt(n);Sc(t.remoteStore)||Dt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(f){const v=Wt(f);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",M=>v.mutationQueue.getHighestUnacknowledgedBatchId(M))}(t.localStore);if(-1===s)return void e.resolve();const a=t.dc.get(s)||[];a.push(e),t.dc.set(s,a)}catch(s){const a=Ih(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Ch.apply(this,arguments)}function E_(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function I_(n,e,t){const s=Wt(n);let a=s.fc[s.currentUser.toKey()];if(a){const f=a.get(e);f&&(t?f.reject(t):f.resolve(),a=a.remove(e)),s.fc[s.currentUser.toKey()]=a}}function Tf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.uc.get(e))n.oc.delete(s),t&&n.rc.gc(s,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(s=>{n.lc.containsKey(s)||C_(n,s)})}function C_(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(wh(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),b_(n))}function Zg(n,e,t){for(const s of t)s instanceof Tp?(n.lc.addReference(s.key,e),zv(n,s)):s instanceof Dp?(Dt("SyncEngine","Document no longer in limbo: "+s.key),n.lc.removeReference(s.key,e),n.lc.containsKey(s.key)||C_(n,s.key)):_n()}function zv(n,e){const t=e.key,s=t.path.canonicalString();n.ac.get(t)||n.cc.has(s)||(Dt("SyncEngine","New document in limbo: "+t),n.cc.add(s),b_(n))}function b_(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new g(Hr.fromString(e)),s=n._c.next();n.hc.set(s,new Vv(t)),n.ac=n.ac.insert(t,s),Cp(n.remoteStore,new uh(Eu(Kh(t.path)),s,2,Pu.at))}}function Ac(n,e,t){return T_.apply(this,arguments)}function T_(){return T_=(0,_e.Z)(function*(n,e,t){const s=Wt(n),a=[],f=[],v=[];var M;s.oc.isEmpty()||(s.oc.forEach((M,B)=>{v.push(s.mc(B,e,t).then(W=>{if((W||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(B.targetId,W?.fromCache?"not-current":"current"),W){a.push(W);const ee=Tc.Ni(B.targetId,W);f.push(ee)}}))}),yield Promise.all(v),s.rc.Ho(a),yield(M=(0,_e.Z)(function*(B,W){const ee=Wt(B);try{yield ee.persistence.runTransaction("notifyLocalViewChanges","readwrite",de=>We.forEach(W,ke=>We.forEach(ke.Ci,Qe=>ee.persistence.referenceDelegate.addReference(de,ke.targetId,Qe)).next(()=>We.forEach(ke.xi,Qe=>ee.persistence.referenceDelegate.removeReference(de,ke.targetId,Qe)))))}catch(de){if(!tl(de))throw de;Dt("LocalStore","Failed to update sequence numbers: "+de)}for(const de of W){const ke=de.targetId;if(!de.fromCache){const Qe=ee.Ki.get(ke),Bt=Qe.withLastLimboFreeSnapshotVersion(Qe.snapshotVersion);ee.Ki=ee.Ki.insert(ke,Bt)}}}),function(B,W){return M.apply(this,arguments)})(s.localStore,f))}),T_.apply(this,arguments)}function Jw(n,e){return Wv.apply(this,arguments)}function Wv(){return Wv=(0,_e.Z)(function*(n,e){const t=Wt(n);if(!t.currentUser.isEqual(e)){Dt("SyncEngine","User change. New user:",e.toKey());const s=yield Md(t.localStore,e);t.currentUser=e,(a=t).dc.forEach(v=>{v.forEach(M=>{M.reject(new Et(Ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.dc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Ac(t,s.Wi)}var a}),Wv.apply(this,arguments)}function uI(n,e){const t=Wt(n),s=t.hc.get(e);if(s&&s.ic)return yr().add(s.key);{let a=yr();const f=t.uc.get(e);if(!f)return a;for(const v of f){const M=t.oc.get(v);a=a.unionWith(M.view.Wu)}return a}}function lI(n,e){return qv.apply(this,arguments)}function qv(){return qv=(0,_e.Z)(function*(n,e){const t=Wt(n),s=yield _o(t.localStore,e.query,!0),a=e.view.nc(s);return t.isPrimaryClient&&Zg(t,e.targetId,a.tc),a}),qv.apply(this,arguments)}function Zv(n,e){return Df.apply(this,arguments)}function Df(){return Df=(0,_e.Z)(function*(n,e){const t=Wt(n);return wv(t.localStore,e).then(s=>Ac(t,s))}),Df.apply(this,arguments)}function Xw(n,e,t,s){return D_.apply(this,arguments)}function D_(){return D_=(0,_e.Z)(function*(n,e,t,s){const a=Wt(n),f=yield function(v,M){const B=Wt(v),W=Wt(B.mutationQueue);return B.persistence.runTransaction("Lookup mutation documents","readonly",ee=>W.An(ee,M).next(de=>de?B.localDocuments.getDocuments(ee,de):We.resolve(null)))}(a.localStore,e);var M;null!==f?("pending"===t?yield vf(a.remoteStore):"acknowledged"===t||"rejected"===t?(I_(a,e,s||null),E_(a,e),M=e,Wt(Wt(a.localStore).mutationQueue).bn(M)):_n(),yield Ac(a,f)):Dt("SyncEngine","Cannot apply mutation batch with id: "+e)}),D_.apply(this,arguments)}function bh(){return bh=(0,_e.Z)(function*(n,e){const t=Wt(n);if(M_(t),Th(t),!0===e&&!0!==t.wc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Yv(t,s.toArray());t.wc=!0,yield Bg(t.remoteStore,!0);for(const f of a)Cp(t.remoteStore,f)}else if(!1===e&&!1!==t.wc){const s=[];let a=Promise.resolve();t.uc.forEach((f,v)=>{t.sharedClientState.isLocalQueryTarget(v)?s.push(v):a=a.then(()=>(Tf(t,v),yh(t.localStore,v,!0))),wh(t.remoteStore,v)}),yield a,yield Yv(t,s),function(f){const v=Wt(f);v.hc.forEach((M,B)=>{wh(v.remoteStore,B)}),v.lc._s(),v.hc=new Map,v.ac=new yi(g.comparator)}(t),t.wc=!1,yield Bg(t.remoteStore,!1)}}),bh.apply(this,arguments)}function Yv(n,e,t){return S_.apply(this,arguments)}function S_(){return S_=(0,_e.Z)(function*(n,e,t){const s=Wt(n),a=[],f=[];for(const v of e){let M;const B=s.uc.get(v);if(B&&0!==B.length){M=yield pf(s.localStore,Eu(B[0]));for(const W of B){const ee=s.oc.get(W),de=yield lI(s,ee);de.snapshot&&f.push(de.snapshot)}}else{const W=yield e_(s.localStore,v);M=yield pf(s.localStore,W),yield zg(s,Qv(W),v,!1,M.resumeToken)}a.push(M)}return s.rc.Ho(f),a}),S_.apply(this,arguments)}function Qv(n){return yy(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function eE(n){const e=Wt(n);return Wt(Wt(e.localStore).persistence).Si()}function cI(n,e,t,s){return A_.apply(this,arguments)}function A_(){return A_=(0,_e.Z)(function*(n,e,t,s){const a=Wt(n);if(a.wc)return void Dt("SyncEngine","Ignoring unexpected query state notification.");const f=a.uc.get(e);if(f&&f.length>0)switch(t){case"current":case"not-current":{const v=yield wv(a.localStore,wm(f[0])),M=Ic.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Qr.EMPTY_BYTE_STRING);yield Ac(a,v,M);break}case"rejected":yield yh(a.localStore,e,!0),Tf(a,e,s);break;default:_n()}}),A_.apply(this,arguments)}function Jv(n,e,t){return x_.apply(this,arguments)}function x_(){return x_=(0,_e.Z)(function*(n,e,t){const s=M_(n);if(s.wc){for(const a of e){if(s.uc.has(a)){Dt("SyncEngine","Adding an already active target "+a);continue}const f=yield e_(s.localStore,a),v=yield pf(s.localStore,f);yield zg(s,Qv(f),v.targetId,!1,v.resumeToken),Cp(s.remoteStore,v)}for(const a of t)s.uc.has(a)&&(yield yh(s.localStore,a,!1).then(()=>{wh(s.remoteStore,a),Tf(s,a)}).catch(tu))}}),x_.apply(this,arguments)}function M_(n){const e=Wt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qw.bind(null,e),e.rc.Ho=Fv.bind(null,e.eventManager),e.rc.gc=oI.bind(null,e.eventManager),e}function Th(n){const e=Wt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Gv.bind(null,e),e}class R_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.Tt=Ep(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return Ag(this.persistence,new vv,e.initialUser,this.Tt)}Tc(e){return new dp(hp.qs,this.Tt)}Ic(e){return new ec}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Xv extends R_{constructor(e,t,s){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,_e.Z)(function*(){yield t().call(s,e),yield s.bc.initialize(s,e),yield Th(s.bc.syncEngine),yield vf(s.bc.remoteStore),yield s.persistence.di(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return Ag(this.persistence,new vv,e.initialUser,this.Tt)}Ac(e,t){return new xw(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const s=new Kp(t,this.persistence);return new gy(e.asyncQueue,s)}Tc(e){const t=ff(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ku.withCacheSize(this.cacheSizeBytes):ku.DEFAULT;return new Sg(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,i_(),wp(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new ec}}class e0 extends Xv{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,_e.Z)(function*(){yield t().call(s,e);const a=s.bc.syncEngine;s.sharedClientState instanceof vp&&(s.sharedClientState.syncEngine={Br:Xw.bind(null,a),Lr:cI.bind(null,a),qr:Jv.bind(null,a),Si:eE.bind(null,a),$r:Zv.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.di(function(){var f=(0,_e.Z)(function*(v){yield function Kv(n,e){return bh.apply(this,arguments)}(s.bc.syncEngine,v),s.gcScheduler&&(v&&!s.gcScheduler.started?s.gcScheduler.start():v||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(v&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():v||s.indexBackfillerScheduler.stop())});return function(v){return f.apply(this,arguments)}}())})()}Ic(e){const t=i_();if(!vp.C(t))throw new Et(Ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=ff(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vp(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class N_{initialize(e,t){var s=this;return(0,_e.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>$v(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=Jw.bind(null,s.syncEngine),yield Bg(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ef}createDatastore(e){const t=Ep(e.databaseInfo.databaseId),s=new nc(e.databaseInfo);return new Ip(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,f=M=>$v(this.syncEngine,M,0),v=r_.C()?new r_:new Lw,new Sv(t,s,a,f,v);var t,s,a,f,v}createSyncEngine(e,t){return function(s,a,f,v,M,B,W){const ee=new Bv(s,a,f,v,M,B);return W&&(ee.wc=!0),ee}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const s=Wt(t);Dt("RemoteStore","RemoteStore shutting down."),s.mu.add(5),yield _f(s),s.yu.shutdown(),s.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function P_(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Kg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):_i("Uncaught Error in snapshot listener:",e.toString())}Pc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class O_{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new ys,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(s=>{s&&s.Fu()?this.metadata.resolve(s.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Mu)}`))},s=>this.metadata.reject(s))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const s=e.Sc.decode(t),a=Number(s);isNaN(a)&&e.xc(`length string (${s}) is not valid number`);const f=yield e.Nc(a);return new Zw(JSON.parse(f),t.length+a)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,_e.Z)(function*(){for(;e.kc()<0&&!(yield e.Oc()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Nc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Oc())&&t.xc("Reached the end of bundle when more is expected.");const s=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}Oc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class nE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Et(Ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,_e.Z)(function*(f,v){const M=Wt(f),B=Xh(M.Tt)+"/documents",W={documents:v.map(Qe=>rp(M.Tt,Qe))},ee=yield M.mo("BatchGetDocuments",B,W,v.length),de=new Map;ee.forEach(Qe=>{const ht=function Ly(n,e){return"found"in e?function(t,s){Cn(!!s.found);const a=Kl(t,s.found.name),f=mo(s.found.updateTime),v=s.found.createTime?mo(s.found.createTime):bn.min(),M=new Va({mapValue:{fields:s.found.fields}});return zi.newFoundDocument(a,f,v,M)}(n,e):"missing"in e?function(t,s){Cn(!!s.missing),Cn(!!s.readTime);const a=Kl(t,s.missing),f=mo(s.readTime);return zi.newNoDocument(a,f)}(n,e):_n()}(M.Tt,Qe);de.set(ht.key.toString(),ht)});const ke=[];return v.forEach(Qe=>{const ht=de.get(Qe.toString());Cn(!!ht),ke.push(ht)}),ke}),function(f,v){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const f=g.fromPath(a);e.mutations.push(new bd(f,e.precondition(f)))}),yield(s=(0,_e.Z)(function*(a,f){const v=Wt(a),M=Xh(v.Tt)+"/documents",B={writes:f.map(W=>lg(v.Tt,W))};yield v.lo("Commit",M,B)}),function(a,f){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _n();t=bn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Et(Ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(bn.min())?Ds.exists(!1):Ds.updateTime(t):Ds.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bn.min()))throw new Et(Ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ds.updateTime(t)}return Ds.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class t0{constructor(e,t,s,a,f){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=f,this.Mc=s.maxAttempts,this.ko=new s_(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Fc()}Fc(){var e=this;this.ko.vo((0,_e.Z)(function*(){const t=new nE(e.datastore),s=e.$c(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(f=>{e.Bc(f)}))}).catch(a=>{e.Bc(a)})}))}$c(e){try{const t=this.updateFunction(e);return!us(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Fc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!xy(t)}return!1}}class n0{constructor(e,t,s,a){var f=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=as.UNAUTHENTICATED,this.clientId=gc.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var v=(0,_e.Z)(function*(M){Dt("FirestoreClient","Received user=",M.uid),yield f.authCredentialListener(M),f.user=M});return function(M){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(s,v=>(Dt("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Et(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=Ih(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function r0(n,e){return k_.apply(this,arguments)}function k_(){return k_=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Dt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,_e.Z)(function*(f){s.isEqual(f)||(yield Md(e.localStore,f),s=f)});return function(f){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),k_.apply(this,arguments)}function s0(n,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield F_(n);Dt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield e.initialize(t,s),n.setCredentialChangeListener(a=>g_(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,f)=>g_(e.remoteStore,f)),n.onlineComponents=e}),Ap.apply(this,arguments)}function F_(n){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,_e.Z)(function*(n){return n.offlineComponents||(Dt("FirestoreClient","Using default OfflineComponentProvider"),yield r0(n,new R_)),n.offlineComponents}),Yg.apply(this,arguments)}function Qg(n){return L_.apply(this,arguments)}function L_(){return L_=(0,_e.Z)(function*(n){return n.onlineComponents||(Dt("FirestoreClient","Using default OnlineComponentProvider"),yield s0(n,new N_)),n.onlineComponents}),L_.apply(this,arguments)}function o0(n){return F_(n).then(e=>e.persistence)}function Jg(n){return F_(n).then(e=>e.localStore)}function U_(n){return Qg(n).then(e=>e.remoteStore)}function V_(n){return Qg(n).then(e=>e.syncEngine)}function Sf(n){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,_e.Z)(function*(n){const e=yield Qg(n),t=e.eventManager;return t.onListen=Kw.bind(null,e.syncEngine),t.onUnlisten=jv.bind(null,e.syncEngine),t}),Xg.apply(this,arguments)}function B_(n,e,t={}){const s=new ys;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(a,f,v,M,B){const W=new Kg({next:de=>{f.enqueueAndForget(()=>kv(a,ee));const ke=de.docs.has(v);!ke&&de.fromCache?B.reject(new Et(Ye.UNAVAILABLE,"Failed to get document because the client is offline.")):ke&&de.fromCache&&M&&"server"===M.source?B.reject(new Et(Ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):B.resolve(de)},error:de=>B.reject(de)}),ee=new m_(Kh(v.path),W,{includeMetadataChanges:!0,Ou:!0});return Ov(a,ee)}(yield Sf(n),n.asyncQueue,e,t,s)})),s.promise}function l0(n,e,t={}){const s=new ys;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(a,f,v,M,B){const W=new Kg({next:de=>{f.enqueueAndForget(()=>kv(a,ee)),de.fromCache&&"server"===M.source?B.reject(new Et(Ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):B.resolve(de)},error:de=>B.reject(de)}),ee=new m_(v,W,{includeMetadataChanges:!0,Ou:!0});return Ov(a,ee)}(yield Sf(n),n.asyncQueue,e,t,s)})),s.promise}const H_=new Map;function xp(n,e,t){if(!t)throw new Et(Ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function c0(n,e,t,s){if(!0===e&&!0===s)throw new Et(Ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function d0(n){if(!g.isDocumentKey(n))throw new Et(Ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function em(n){if(g.isDocumentKey(n))throw new Et(Ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tm(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":_n()}function Xr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Et(Ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tm(n);throw new Et(Ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Dh(n,e){if(e<=0)throw new Et(Ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class G_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Et(Ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Et(Ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,c0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mp{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Et(Ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Et(Ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G_(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new fd;switch(t.type){case"gapi":return new qd(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Et(Ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=H_.get(e);t&&(Dt("ComponentProvider","Removing Datastore"),H_.delete(e),t.terminate())}(this),Promise.resolve()}}class vs{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vs(this.firestore,e,this._key)}}class ya{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ya(this.firestore,e,this._query)}}class xc extends ya{constructor(e,t,s){super(e,t,Kh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vs(this.firestore,null,new g(e))}withConverter(e){return new xc(this.firestore,e,this._path)}}function nm(n,e,...t){if(n=(0,Xe.m9)(n),xp("collection","path",e),n instanceof Mp){const s=Hr.fromString(e,...t);return em(s),new xc(n,null,s)}{if(!(n instanceof vs||n instanceof xc))throw new Et(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Hr.fromString(e,...t));return em(s),new xc(n.firestore,null,s)}}function Rp(n,e,...t){if(n=(0,Xe.m9)(n),1===arguments.length&&(e=gc.R()),xp("doc","path",e),n instanceof Mp){const s=Hr.fromString(e,...t);return d0(s),new vs(n,null,new g(s))}{if(!(n instanceof vs||n instanceof xc))throw new Et(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Hr.fromString(e,...t));return d0(s),new vs(n.firestore,n instanceof xc?n.converter:null,new g(s))}}function rm(n,e){return n=(0,Xe.m9)(n),e=(0,Xe.m9)(e),(n instanceof vs||n instanceof xc)&&(e instanceof vs||e instanceof xc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function im(n,e){return n=(0,Xe.m9)(n),e=(0,Xe.m9)(e),n instanceof ya&&e instanceof ya&&n.firestore===e.firestore&&Kf(n._query,e._query)&&n.converter===e.converter}class h0{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new s_(this,"async_queue_retry"),this.Hc=()=>{const t=wp();t&&Dt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=wp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=wp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new ys;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!tl(t))throw t;Dt("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(s=>{throw this.Qc=s,this.jc=!1,_i("INTERNAL UNHANDLED ERROR: ",function(f){let v=f.message||"";return f.stack&&(v=f.stack.includes(f.message)?f.stack:f.message+"\n"+f.stack),v}(s)),s}).then(s=>(this.jc=!1,s))));return this.qc=t,t}enqueueAfterDelay(e,t,s){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const a=$g.createAndSchedule(this,e,t,s,f=>this.Xc(f));return this.Gc.push(a),a}Jc(){this.Qc&&_n()}verifyOperationInProgress(){}ta(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function sm(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(n)}class f0{constructor(){this._progressObserver={},this._taskCompletionResolver=new ys,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ss extends Mp{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new h0,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||cE(this),this._firestoreClient.terminate()}}function yo(n){return n._firestoreClient||cE(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function cE(n){var e;const t=n._freezeSettings(),s=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new gm(n._databaseId,f,n._persistenceKey,(M=t).host,M.ssl,M.experimentalForceLongPolling,M.experimentalAutoDetectLongPolling,M.useFetchStreams));var f,M;n._firestoreClient=new n0(n._authCredentials,n._appCheckCredentials,n._queue,s)}function g0(n,e,t){const s=new ys;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield r0(n,t),yield s0(n,e),s.resolve()}catch(a){const f=a;if(!("FirebaseError"===(v=f).name?v.code===Ye.FAILED_PRECONDITION||v.code===Ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&v instanceof DOMException)||22===v.code||20===v.code||11===v.code))throw f;Hu("Error enabling offline persistence. Falling back to persistence disabled: "+f),s.reject(f)}var v})).then(()=>s.promise)}function m0(n){if(n._initialized||n._terminated)throw new Et(Ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Mc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mc(Qr.fromBase64String(e))}catch(t){throw new Et(Ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Mc(Qr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Et(Ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new p(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rc{constructor(e){this._methodName=e}}class Pp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Et(Ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Et(Ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qn(this._lat,e._lat)||qn(this._long,e._long)}}const _0=/^__.*__$/;class y0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Cd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xf(e,this.data,t,this.fieldTransforms)}}class z_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Cd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function W_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _n()}}class Op{constructor(e,t,s,a,f,v){this.settings=e,this.databaseId=t,this.Tt=s,this.ignoreUndefinedProperties=a,void 0===f&&this.ia(),this.fieldTransforms=f||[],this.fieldMask=v||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new Op(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.oa({path:s,ca:!1});return a.aa(e),a}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.oa({path:s,ca:!1});return a.ia(),a}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return um(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(W_(this.ra)&&_0.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class vE{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=s||Ep(e)}wa(e,t,s,a=!1){return new Op({ra:e,methodName:t,_a:s,path:p.emptyPath(),ca:!1,da:a},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Af(n){const e=n._freezeSettings(),t=Ep(n._databaseId);return new vE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function om(n,e,t,s,a,f={}){const v=n.wa(f.merge||f.mergeFields?2:0,e,t,a);Z_("Data must be an object, but it was:",v,s);const M=Mf(s,v);let B,W;if(f.merge)B=new wu(v.fieldMask),W=v.fieldTransforms;else if(f.mergeFields){const ee=[];for(const de of f.mergeFields){const ke=Lp(e,de,t);if(!v.contains(ke))throw new Et(Ye.INVALID_ARGUMENT,`Field '${ke}' is specified in your field mask but missing from your input data.`);I0(ee,ke)||ee.push(ke)}B=new wu(ee),W=v.fieldTransforms.filter(de=>B.covers(de.field))}else B=null,W=v.fieldTransforms;return new y0(new Va(M),B,W)}class xf extends rc{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xf}}function v0(n,e,t){return new Op({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class q_ extends rc{_toFieldTransform(e){return new Qf(e.path,new nh)}isEqual(e){return e instanceof q_}}class wE extends rc{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=v0(this,e,!0),s=this.ma.map(f=>Jc(f,t)),a=new Id(s);return new Qf(e.path,a)}isEqual(e){return this===e}}class kp extends rc{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=v0(this,e,!0),s=this.ma.map(f=>Jc(f,t)),a=new rh(s);return new Qf(e.path,a)}isEqual(e){return this===e}}class EE extends rc{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new ih(e.Tt,Em(e.Tt,this.ga));return new Qf(e.path,t)}isEqual(e){return this===e}}function Fp(n,e,t,s){const a=n.wa(1,e,t);Z_("Data must be an object, but it was:",a,s);const f=[],v=Va.empty();Gl(s,(B,W)=>{const ee=Sh(e,B,t);W=(0,Xe.m9)(W);const de=a.ha(ee);if(W instanceof xf)f.push(ee);else{const ke=Jc(W,de);null!=ke&&(f.push(ee),v.set(ee,ke))}});const M=new wu(f);return new z_(v,M,a.fieldTransforms)}function bl(n,e,t,s,a,f){const v=n.wa(1,e,t),M=[Lp(e,s,t)],B=[a];if(f.length%2!=0)throw new Et(Ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ke=0;ke<f.length;ke+=2)M.push(Lp(e,f[ke])),B.push(f[ke+1]);const W=[],ee=Va.empty();for(let ke=M.length-1;ke>=0;--ke)if(!I0(W,M[ke])){const Qe=M[ke];let ht=B[ke];ht=(0,Xe.m9)(ht);const Bt=v.ha(Qe);if(ht instanceof xf)W.push(Qe);else{const Jt=Jc(ht,Bt);null!=Jt&&(W.push(Qe),ee.set(Qe,Jt))}}const de=new wu(W);return new z_(ee,de,v.fieldTransforms)}function w0(n,e,t,s=!1){return Jc(t,n.wa(s?4:3,e))}function Jc(n,e){if(E0(n=(0,Xe.m9)(n)))return Z_("Unsupported field value:",e,n),Mf(n,e);if(n instanceof rc)return function(t,s){if(!W_(s.ra))throw s.fa(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.fa(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,s){const a=[];let f=0;for(const v of t){let M=Jc(v,s.la(f));null==M&&(M={nullValue:"NULL_VALUE"}),a.push(M),f++}return{arrayValue:{values:a}}}(n,e)}return function(t,s){if(null===(t=(0,Xe.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Em(s.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Gi.fromDate(t);return{timestampValue:Dd(s.Tt,a)}}if(t instanceof Gi){const a=new Gi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Dd(s.Tt,a)}}if(t instanceof Pp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Mc)return{bytesValue:ug(s.Tt,t._byteString)};if(t instanceof vs){const a=s.databaseId,f=t.firestore._databaseId;if(!f.isEqual(a))throw s.fa(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:np(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.fa(`Unsupported field value: ${tm(t)}`)}(n,e)}function Mf(n,e){const t={};return $f(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gl(n,(s,a)=>{const f=Jc(a,e.ua(s));null!=f&&(t[s]=f)}),{mapValue:{fields:t}}}function E0(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Gi||n instanceof Pp||n instanceof Mc||n instanceof vs||n instanceof rc)}function Z_(n,e,t){if(!E0(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=tm(t);throw e.fa("an object"===s?n+" a custom object":n+" "+s)}var s}function Lp(n,e,t){if((e=(0,Xe.m9)(e))instanceof Qc)return e._internalPath;if("string"==typeof e)return Sh(n,e);throw um("Field path arguments must be of type string or ",n,!1,void 0,t)}const am=new RegExp("[~\\*/\\[\\]]");function Sh(n,e,t){if(e.search(am)>=0)throw um(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qc(...e.split("."))._internalPath}catch{throw um(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function um(n,e,t,s,a){const f=s&&!s.isEmpty(),v=void 0!==a;let M=`Function ${e}() called with invalid data`;t&&(M+=" (via `toFirestore()`)"),M+=". ";let B="";return(f||v)&&(B+=" (found",f&&(B+=` in field ${s}`),v&&(B+=` in document ${a}`),B+=")"),new Et(Ye.INVALID_ARGUMENT,M+n+B)}function I0(n,e){return n.some(t=>t.isEqual(e))}class Rf{constructor(e,t,s,a,f){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new vs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new C0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Nf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class C0 extends Rf{data(){return super.data()}}function Nf(n,e){return"string"==typeof e?Sh(n,e):e instanceof Qc?e._internalPath:e._delegate._internalPath}function K_(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Et(Ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Up{}class Ah extends Up{}function Xc(n,e,...t){let s=[];e instanceof Up&&s.push(e),s=s.concat(t),function(a){const f=a.filter(M=>M instanceof Pf).length,v=a.filter(M=>M instanceof xh).length;if(f>1||f>0&&v>0)throw new Et(Ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)n=a._apply(n);return n}class xh extends Ah{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new xh(e,t,s)}_apply(e){const t=this._parse(e);return Mh(e._query,t),new ya(e.firestore,e.converter,vm(e._query,t))}_parse(e){const t=Af(e.firestore);return function(a,f,v,M,B,W,ee){let de;if(B.isKeyField()){if("array-contains"===W||"array-contains-any"===W)throw new Et(Ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${W}' queries on documentId().`);if("in"===W||"not-in"===W){Iu(ee,W);const ke=[];for(const Qe of ee)ke.push(A0(M,a,Qe));de={arrayValue:{values:ke}}}else de=A0(M,a,ee)}else"in"!==W&&"not-in"!==W&&"array-contains-any"!==W||Iu(ee,W),de=w0(v,"where",ee,"in"===W||"not-in"===W);return Gr.create(B,W,de)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Pf extends Up{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Pf(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Ci.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let f=s;const v=a.getFlattenedFilters();for(const M of v)Mh(f,M),f=vm(f,M)}(e._query,t),new ya(e.firestore,e.converter,vm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Q_ extends Ah{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Q_(e,t)}_apply(e){const t=function(s,a,f){if(null!==s.startAt)throw new Et(Ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Et(Ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new Or(a,f);return function(M,B){if(null===vy(M)){const W=qf(M);null!==W&&x0(0,W,B.field)}}(s,v),v}(e._query,this._field,this._direction);return new ya(e.firestore,e.converter,function(s,a){const f=s.explicitOrderBy.concat([a]);return new ru(s.path,s.collectionGroup,f,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Of extends Ah{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Of(e,t,s)}_apply(e){return new ya(e.firestore,e.converter,Zf(e._query,this._limit,this._limitType))}}class Vp extends Ah{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Vp(e,t,s)}_apply(e){const t=J_(e,this.type,this._docOrFields,this._inclusive);return new ya(e.firestore,e.converter,(a=t,new ru((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class Bp extends Ah{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Bp(e,t,s)}_apply(e){const t=J_(e,this.type,this._docOrFields,this._inclusive);return new ya(e.firestore,e.converter,(a=t,new ru((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function J_(n,e,t,s){if(t[0]=(0,Xe.m9)(t[0]),t[0]instanceof Rf)return function(a,f,v,M,B){if(!M)throw new Et(Ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const W=[];for(const ee of Ed(a))if(ee.field.isKeyField())W.push(_d(f,M.key));else{const de=M.data.field(ee.field);if(Jp(de))throw new Et(Ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ee.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===de){const ke=ee.field.canonicalString();throw new Et(Ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ke}' (used as the orderBy) does not exist.`)}W.push(de)}return new il(W,B)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const a=Af(n.firestore);return function(f,v,M,B,W,ee){const de=f.explicitOrderBy;if(W.length>de.length)throw new Et(Ye.INVALID_ARGUMENT,`Too many arguments provided to ${B}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ke=[];for(let Qe=0;Qe<W.length;Qe++){const ht=W[Qe];if(de[Qe].field.isKeyField()){if("string"!=typeof ht)throw new Et(Ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${B}(), but got a ${typeof ht}`);if(!wy(f)&&-1!==ht.indexOf("/"))throw new Et(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${B}() must be a plain document ID, but '${ht}' contains a slash.`);const Bt=f.path.child(Hr.fromString(ht));if(!g.isDocumentKey(Bt))throw new Et(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${B}() must result in a valid document path, but '${Bt}' is not because it contains an odd number of segments.`);const Jt=new g(Bt);ke.push(_d(v,Jt))}else{const Bt=w0(M,B,ht);ke.push(Bt)}}return new il(ke,ee)}(n._query,n.firestore._databaseId,a,e,t,s)}}function A0(n,e,t){if("string"==typeof(t=(0,Xe.m9)(t))){if(""===t)throw new Et(Ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wy(e)&&-1!==t.indexOf("/"))throw new Et(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Hr.fromString(t));if(!g.isDocumentKey(s))throw new Et(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return _d(n,new g(s))}if(t instanceof vs)return _d(n,t._key);throw new Et(Ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tm(t)}.`)}function Iu(n,e){if(!Array.isArray(n)||0===n.length)throw new Et(Ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mh(n,e){if(e.isInequality()){const s=qf(n),a=e.field;if(null!==s&&!s.isEqual(a))throw new Et(Ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const f=vy(n);null!==f&&x0(0,a,f)}const t=function(s,a){for(const f of s)for(const v of f.getFlattenedFilters())if(a.indexOf(v.op)>=0)return v.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Et(Ye.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function x0(n,e,t){if(!t.isEqual(e))throw new Et(Ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class R0{convertValue(e,t="none"){switch(yc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_c(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw _n()}}convertObject(e,t){const s={};return Gl(e.fields,(a,f)=>{s[a]=this.convertValue(f,t)}),s}convertGeoPoint(e){return new Pp(Bs(e.latitude),Bs(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=mm(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ua(e));default:return null}}convertTimestamp(e){const t=Gu(e);return new Gi(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Hr.fromString(e);Cn(Yl(s));const a=new nl(s.get(1),s.get(3)),f=new g(s.popFirst(5));return a.isEqual(t)||_i(`Document ${f} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}function X_(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class N0 extends R0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vs(this.firestore,null,t)}}class Pd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ed extends Rf{constructor(e,t,s,a,f,v){super(e,t,s,a,v),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Nf("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class jp extends ed{data(e={}){return super.data(e)}}class Od{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Pd(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new jp(this._firestore,this._userDataWriter,s.key,s,new Pd(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Et(Ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let f=0;return s._snapshot.docChanges.map(v=>({type:"added",doc:new jp(s._firestore,s._userDataWriter,v.doc.key,v.doc,new Pd(s._snapshot.mutatedKeys.has(v.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:f++}))}{let f=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(v=>a||3!==v.type).map(v=>{const M=new jp(s._firestore,s._userDataWriter,v.doc.key,v.doc,new Pd(s._snapshot.mutatedKeys.has(v.doc.key),s._snapshot.fromCache),s.query.converter);let B=-1,W=-1;return 0!==v.type&&(B=f.indexOf(v.doc.key),f=f.delete(v.doc.key)),1!==v.type&&(f=f.add(v.doc),W=f.indexOf(v.doc.key)),{type:ey(v.type),doc:M,oldIndex:B,newIndex:W}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ey(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _n()}}function ty(n,e){return n instanceof ed&&e instanceof ed?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Od&&e instanceof Od&&n._firestore===e._firestore&&im(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ic extends R0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vs(this.firestore,null,t)}}function Rh(n,e,t){n=Xr(n,vs);const s=Xr(n.firestore,Ss),a=X_(n.converter,e,t);return $p(s,[om(Af(s),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Ds.none())])}function L0(n,e,t,...s){n=Xr(n,vs);const a=Xr(n.firestore,Ss),f=Af(a);let v;return v="string"==typeof(e=(0,Xe.m9)(e))||e instanceof Qc?bl(f,"updateDoc",n._key,e,t,s):Fp(f,"updateDoc",n._key,e),$p(a,[v.toMutation(n._key,Ds.exists(!0))])}function AE(n,...e){var t,s,a;n=(0,Xe.m9)(n);let f={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||sm(e[v])||(f=e[v],v++);const M={includeMetadataChanges:f.includeMetadataChanges};if(sm(e[v])){const de=e[v];e[v]=null===(t=de.next)||void 0===t?void 0:t.bind(de),e[v+1]=null===(s=de.error)||void 0===s?void 0:s.bind(de),e[v+2]=null===(a=de.complete)||void 0===a?void 0:a.bind(de)}let B,W,ee;if(n instanceof vs)W=Xr(n.firestore,Ss),ee=Kh(n._key.path),B={next:de=>{e[v]&&e[v](iy(W,n,de))},error:e[v+1],complete:e[v+2]};else{const de=Xr(n,ya);W=Xr(de.firestore,Ss),ee=de._query;const ke=new ic(W);B={next:Qe=>{e[v]&&e[v](new Od(W,ke,de,Qe))},error:e[v+1],complete:e[v+2]},K_(n._query)}return function(de,ke,Qe,ht){const Bt=new Kg(ht),Jt=new m_(ke,Bt,Qe);return de.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Ov(yield Sf(de),Jt)})),()=>{Bt.Pc(),de.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return kv(yield Sf(de),Jt)}))}}(yo(W),ee,M,B)}function $p(n,e){return function(t,s){const a=new ys;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function Yw(n,e,t){return y_.apply(this,arguments)}(yield V_(t),s,a)})),a.promise}(yo(n),e)}function iy(n,e,t){const s=t.docs.get(e._key),a=new ic(n);return new ed(n,a,e._key,s,new Pd(t.hasPendingWrites,t.fromCache),e.converter)}const V0={maxAttempts:5};class sy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Af(e)}set(e,t,s){this._verifyNotCommitted();const a=kd(e,this._firestore),f=X_(a.converter,t,s),v=om(this._dataReader,"WriteBatch.set",a._key,f,null!==a.converter,s);return this._mutations.push(v.toMutation(a._key,Ds.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const f=kd(e,this._firestore);let v;return v="string"==typeof(t=(0,Xe.m9)(t))||t instanceof Qc?bl(this._dataReader,"WriteBatch.update",f._key,t,s,a):Fp(this._dataReader,"WriteBatch.update",f._key,t),this._mutations.push(v.toMutation(f._key,Ds.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=kd(e,this._firestore);return this._mutations=this._mutations.concat(new Yh(t._key,Ds.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Et(Ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kd(n,e){if((n=(0,Xe.m9)(n)).firestore!==e)throw new Et(Ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class B0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Af(e)}get(e){const t=kd(e,this._firestore),s=new N0(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return _n();const f=a[0];if(f.isFoundDocument())return new Rf(this._firestore,s,f.key,f,t.converter);if(f.isNoDocument())return new Rf(this._firestore,s,t._key,null,t.converter);throw _n()})}set(e,t,s){const a=kd(e,this._firestore),f=X_(a.converter,t,s),v=om(this._dataReader,"Transaction.set",a._key,f,null!==a.converter,s);return this._transaction.set(a._key,v),this}update(e,t,s,...a){const f=kd(e,this._firestore);let v;return v="string"==typeof(t=(0,Xe.m9)(t))||t instanceof Qc?bl(this._dataReader,"Transaction.update",f._key,t,s,a):Fp(this._dataReader,"Transaction.update",f._key,t),this._transaction.update(f._key,v),this}delete(e){const t=kd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=kd(e,this._firestore),s=new ic(this._firestore);return super.get(e).then(a=>new ed(this._firestore,s,t._key,a._document,new Pd(!1,!1),t.converter))}}function G0(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Et("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ay(){if(typeof Uint8Array>"u")throw new Et("unimplemented","Uint8Arrays are not available in this environment.")}function UE(){if(!function zl(){return typeof atob<"u"}())throw new Et("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){el=Ct.SDK_VERSION,(0,Ct._registerComponent)(new Rt.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const f=t.getProvider("app").getImmediate(),v=new Ss(new Wd(t.getProvider("auth-internal")),new Zd(t.getProvider("app-check-internal")),function(M,B){if(!Object.prototype.hasOwnProperty.apply(M.options,["projectId"]))throw new Et(Ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(M.options.projectId,B)}(f,s),f);return a=Object.assign({useFetchStreams:e},a),v._setSettings(a),v},"PUBLIC").setMultipleInstances(!0)),(0,Ct.registerVersion)(Ru,"3.8.4",n),(0,Ct.registerVersion)(Ru,"3.8.4","esm2017")}();class cm{constructor(e){this._delegate=e}static fromBase64String(e){return UE(),new cm(Mc.fromBase64String(e))}static fromUint8Array(e){return ay(),new cm(Mc.fromUint8Array(e))}toBase64(){return UE(),this._delegate.toBase64()}toUint8Array(){return ay(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function z0(n){return function wI(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(n,["next","error","complete"])}class EI{enableIndexedDbPersistence(e,t){return function p0(n,e){m0(n=Xr(n,Ss));const t=yo(n),s=n._freezeSettings(),a=new N_;return g0(t,a,new Xv(a,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function dE(n){m0(n=Xr(n,Ss));const e=yo(n),t=n._freezeSettings(),s=new N_;return g0(e,s,new e0(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function fI(n){if(n._initialized&&!n._terminated)throw new Et(Ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ys;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(s){if(!nu.C())return Promise.resolve();const a=s+"main";yield nu.delete(a)}),function(s){return t.apply(this,arguments)})(ff(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class VE{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof nl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Hu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function aE(n,e,t,s={}){var a;const f=(n=Xr(n,Mp))._getSettings();if("firestore.googleapis.com"!==f.host&&f.host!==e&&Hu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},f),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let v,M;if("string"==typeof s.mockUserToken)v=s.mockUserToken,M=as.MOCK_USER;else{v=(0,Xe.Sg)(s.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const B=s.mockUserToken.sub||s.mockUserToken.user_id;if(!B)throw new Et(Ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");M=new as(B)}n._authCredentials=new vl(new pc(v,M))}}(this._delegate,e,t,s)}enableNetwork(){return function fE(n){return function u0(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield o0(n),t=yield U_(n);return e.setNetworkEnabled(!0),function(s){const a=Wt(s);return a.mu.delete(0),gf(a)}(t)}))}(yo(n=Xr(n,Ss)))}(this._delegate)}disableNetwork(){return function pE(n){return function rE(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield o0(n),t=yield U_(n);return e.setNetworkEnabled(!1),(s=(0,_e.Z)(function*(a){const f=Wt(a);f.mu.add(0),yield _f(f),f.pu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(yo(n=Xr(n,Ss)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,c0("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function hE(n){return function(e){const t=new ys;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function Sp(n,e){return Ch.apply(this,arguments)}(yield V_(e),t)})),t.promise}(yo(n=Xr(n,Ss)))}(this._delegate)}onSnapshotsInSync(e){return function xE(n,e){return function oE(n,e){const t=new Kg(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return s=yield Sf(n),a=t,Wt(s).vu.add(a),void a.next();var s,a})),()=>{t.Pc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return s=yield Sf(n),a=t,void Wt(s).vu.delete(a);var s,a}))}}(yo(n=Xr(n,Ss)),sm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Et("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Gp(this,nm(this._delegate,e))}catch(t){throw Cu(t,"collection()","Firestore.collection()")}}doc(e){try{return new Fu(this,Rp(this._delegate,e))}catch(t){throw Cu(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Lu(this,function uE(n,e){if(n=Xr(n,Mp),xp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Et(Ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ya(n,null,(t=e,new ru(Hr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Cu(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function j0(n,e,t){n=Xr(n,Ss);const s=Object.assign(Object.assign({},V0),t);return function(a){if(a.maxAttempts<1)throw new Et(Ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,f,v){const M=new ys;return a.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const B=yield function a0(n){return Qg(n).then(e=>e.datastore)}(a);new t0(a.asyncQueue,B,v,f,M).run()})),M.promise}(yo(n),a=>e(new B0(n,a)),s)}(this._delegate,t=>e(new Hp(this,t)))}batch(){return yo(this._delegate),new BE(new sy(this._delegate,e=>$p(this._delegate,e)))}loadBundle(e){return function mE(n,e){const t=yo(n=Xr(n,Ss)),s=new f0;return function j_(n,e,t,s){const a=function(f,v){let M;return M="string"==typeof f?(new TextEncoder).encode(f):f,B=function(B,W){if(B instanceof Uint8Array)return P_(B,W);if(B instanceof ArrayBuffer)return P_(new Uint8Array(B),W);if(B instanceof ReadableStream)return B.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(M),new O_(B,v);var B}(t,Ep(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function tE(n,e,t){const s=Wt(n);var a;(a=(0,_e.Z)(function*(f,v,M){try{const B=yield v.getMetadata();if(yield function(ke,Qe){const ht=Wt(ke),Bt=mo(Qe.createTime);return ht.persistence.runTransaction("hasNewerBundle","readonly",Jt=>ht.Os.getBundleMetadata(Jt,Qe.id)).then(Jt=>!!Jt&&Jt.createTime.compareTo(Bt)>=0)}(f.localStore,B))return yield v.close(),M._completeWith({taskState:"Success",documentsLoaded:(ke=B).totalDocuments,bytesLoaded:ke.totalBytes,totalDocuments:ke.totalDocuments,totalBytes:ke.totalBytes}),Promise.resolve(new Set);M._updateProgress(Uv(B));const W=new If(B,f.localStore,v.Tt);let ee=yield v.yc();for(;ee;){const ke=yield W.Bu(ee);ke&&M._updateProgress(ke),ee=yield v.yc()}const de=yield W.complete();return yield Ac(f,de.Uu,void 0),yield function(ke,Qe){const ht=Wt(ke);return ht.persistence.runTransaction("Save bundle","readwrite",Bt=>ht.Os.saveBundleMetadata(Bt,Qe))}(f.localStore,B),M._completeWith(de.progress),Promise.resolve(de.qu)}catch(B){return Hu("SyncEngine",`Loading bundle failed with ${B}`),M._failWith(B),Promise.resolve(new Set)}var ke}),function(f,v,M){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield V_(n),a,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function _E(n,e){return function $_(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,s){const a=Wt(t);return a.persistence.runTransaction("Get named query","readonly",f=>a.Os.getNamedQuery(f,s))}(yield Jg(n),e)}))}(yo(n=Xr(n,Ss)),e).then(t=>t?new ya(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Lu(this,t):null)}}class uy extends R0{constructor(e){super(),this.firestore=e}convertBytes(e){return new cm(new Mc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Fu.forKey(t,this.firestore,null)}}class Hp{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uy(e)}get(e){const t=Ph(e);return this._delegate.get(t).then(s=>new Nh(this._firestore,new ed(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=Ph(e);return s?(G0("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const f=Ph(e);return 2===arguments.length?this._delegate.update(f,t):this._delegate.update(f,t,s,...a),this}delete(e){const t=Ph(e);return this._delegate.delete(t),this}}class BE{constructor(e){this._delegate=e}set(e,t,s){const a=Ph(e);return s?(G0("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const f=Ph(e);return 2===arguments.length?this._delegate.update(f,t):this._delegate.update(f,t,s,...a),this}delete(e){const t=Ph(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Fd{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new jp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kf(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Fd.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let f=a.get(t);return f||(f=new Fd(e,new uy(e),t),a.set(t,f)),f}}Fd.INSTANCES=new WeakMap;class Fu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uy(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Et("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Fu(t,new vs(t._delegate,s,new g(e)))}static forKey(e,t,s){return new Fu(t,new vs(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Gp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Gp(this.firestore,nm(this._delegate,e))}catch(t){throw Cu(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Xe.m9)(e))instanceof vs&&rm(this._delegate,e)}set(e,t){t=G0("DocumentReference.set",t);try{return t?Rh(this._delegate,e,t):Rh(this._delegate,e)}catch(s){throw Cu(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?L0(this._delegate,e):L0(this._delegate,e,t,...s)}catch(a){throw Cu(a,"updateDoc()","DocumentReference.update()")}}delete(){return function U0(n){return $p(Xr(n.firestore,Ss),[new Yh(n._key,Ds.none())])}(this._delegate)}onSnapshot(...e){const t=ly(e),s=jE(e,a=>new Nh(this.firestore,new ed(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return AE(this._delegate,t,s)}get(e){let t;return t="cache"===e?.source?function ny(n){n=Xr(n,vs);const e=Xr(n.firestore,Ss),t=yo(e),s=new ic(e);return function iE(n,e){const t=new ys;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(s=(0,_e.Z)(function*(a,f,v){try{const M=yield function(B,W){const ee=Wt(B);return ee.persistence.runTransaction("read document","readonly",de=>ee.localDocuments.getDocument(de,W))}(a,f);M.isFoundDocument()?v.resolve(M):M.isNoDocument()?v.resolve(null):v.reject(new Et(Ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(M){const B=Ih(M,`Failed to get document '${f} from cache`);v.reject(B)}}),function(a,f,v){return s.apply(this,arguments)})(yield Jg(n),e,t);var s})),t.promise}(t,n._key).then(a=>new ed(e,s,n._key,a,new Pd(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function yI(n){n=Xr(n,vs);const e=Xr(n.firestore,Ss);return B_(yo(e),n._key,{source:"server"}).then(t=>iy(e,n,t))}(this._delegate):function O0(n){n=Xr(n,vs);const e=Xr(n.firestore,Ss);return B_(yo(e),n._key).then(t=>iy(e,n,t))}(this._delegate),t.then(s=>new Nh(this.firestore,new ed(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Fu(this.firestore,this._delegate.withConverter(e?Fd.getInstance(this.firestore,e):null))}}function Cu(n,e,t){return n.message=n.message.replace(e,t),n}function ly(n){for(const e of n)if("object"==typeof e&&!z0(e))return e;return{}}function jE(n,e){var t,s;let a;return a=z0(n[0])?n[0]:z0(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:f=>{a.next&&a.next(e(f))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class Nh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Fu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ty(this._delegate,e._delegate)}}class kf extends Nh{data(e){const t=this._delegate.data(e);return function Uc(n,e){n||_n()}(void 0!==t),t}}class Lu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uy(e)}where(e,t,s){try{return new Lu(this.firestore,Xc(this._delegate,function Y_(n,e,t){const s=e,a=Nf("where",n);return xh._create(a,s,t)}(e,t,s)))}catch(a){throw Cu(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Lu(this.firestore,Xc(this._delegate,function b0(n,e="asc"){const t=e,s=Nf("orderBy",n);return Q_._create(s,t)}(e,t)))}catch(s){throw Cu(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Lu(this.firestore,Xc(this._delegate,function T0(n){return Dh("limit",n),Of._create("limit",n,"F")}(e)))}catch(t){throw Cu(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Lu(this.firestore,Xc(this._delegate,function IE(n){return Dh("limitToLast",n),Of._create("limitToLast",n,"L")}(e)))}catch(t){throw Cu(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Lu(this.firestore,Xc(this._delegate,function D0(...n){return Vp._create("startAt",n,!0)}(...e)))}catch(t){throw Cu(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Lu(this.firestore,Xc(this._delegate,function CE(...n){return Vp._create("startAfter",n,!1)}(...e)))}catch(t){throw Cu(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Lu(this.firestore,Xc(this._delegate,function S0(...n){return Bp._create("endBefore",n,!1)}(...e)))}catch(t){throw Cu(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Lu(this.firestore,Xc(this._delegate,function bE(...n){return Bp._create("endAt",n,!0)}(...e)))}catch(t){throw Cu(t,"endAt()","Query.endAt()")}}isEqual(e){return im(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function SE(n){n=Xr(n,ya);const e=Xr(n.firestore,Ss),t=yo(e),s=new ic(e);return function sE(n,e){const t=new ys;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(s=(0,_e.Z)(function*(a,f,v){try{const M=yield _o(a,f,!0),B=new io(f,M.Yi),W=B.Hu(M.documents),ee=B.applyChanges(W,!1);v.resolve(ee.snapshot)}catch(M){const B=Ih(M,`Failed to execute query '${f} against cache`);v.reject(B)}}),function(a,f,v){return s.apply(this,arguments)})(yield Jg(n),e,t);var s})),t.promise}(t,n._query).then(a=>new Od(e,s,n,a))}(this._delegate):"server"===e?.source?function F0(n){n=Xr(n,ya);const e=Xr(n.firestore,Ss),t=yo(e),s=new ic(e);return l0(t,n._query,{source:"server"}).then(a=>new Od(e,s,n,a))}(this._delegate):function k0(n){n=Xr(n,ya);const e=Xr(n.firestore,Ss),t=yo(e),s=new ic(e);return K_(n._query),l0(t,n._query).then(a=>new Od(e,s,n,a))}(this._delegate),t.then(s=>new q0(this.firestore,new Od(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=ly(e),s=jE(e,a=>new q0(this.firestore,new Od(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return AE(this._delegate,t,s)}withConverter(e){return new Lu(this.firestore,this._delegate.withConverter(e?Fd.getInstance(this.firestore,e):null))}}class W0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new kf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class q0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Lu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new kf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new W0(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new kf(this._firestore,s))})}isEqual(e){return ty(this._delegate,e._delegate)}}class Gp extends Lu{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Fu(this.firestore,e):null}doc(e){try{return new Fu(this.firestore,void 0===e?Rp(this._delegate):Rp(this._delegate,e))}catch(t){throw Cu(t,"doc()","CollectionReference.doc()")}}add(e){return function ry(n,e){const t=Xr(n.firestore,Ss),s=Rp(n),a=X_(n.converter,e);return $p(t,[om(Af(n.firestore),"addDoc",s._key,a,null!==n.converter,{}).toMutation(s._key,Ds.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Fu(this.firestore,t))}isEqual(e){return rm(this._delegate,e._delegate)}withConverter(e){return new Gp(this.firestore,this._delegate.withConverter(e?Fd.getInstance(this.firestore,e):null))}}function Ph(n){return Xr(n,vs)}class cy{constructor(...e){this._delegate=new Qc(...e)}static documentId(){return new cy(p.keyField().canonicalString())}isEqual(e){return(e=(0,Xe.m9)(e))instanceof Qc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Rc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function NE(){return new q_("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Rc(e)}static delete(){const e=function RE(){return new xf("deleteField")}();return e._methodName="FieldValue.delete",new Rc(e)}static arrayUnion(...e){const t=function $0(...n){return new wE("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Rc(t)}static arrayRemove(...e){const t=function PE(...n){return new kp("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Rc(t)}static increment(e){const t=function H0(n){return new EE("increment",n)}(e);return t._methodName="FieldValue.increment",new Rc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const $E={Firestore:VE,GeoPoint:Pp,Timestamp:Gi,Blob:cm,Transaction:Hp,WriteBatch:BE,DocumentReference:Fu,DocumentSnapshot:Nh,Query:Lu,QueryDocumentSnapshot:kf,QuerySnapshot:q0,CollectionReference:Gp,FieldPath:cy,FieldValue:Rc,setLogLevel:function II(n){!function $h(n){Fo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Z0(n,e){return function TI(n,e=Tt.z){return new gt.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{s?.()}})}(n,e)}function dy(n,e){return Z0(n,e).pipe((0,we.U)(t=>({payload:t,type:"query"})))}function hy(n,e){return dy(n,e).pipe((0,Fi.O)(void 0),Ks(),(0,we.U)(([t,s])=>{const a=s.payload.docChanges(),f=a.map(v=>({type:v.type,payload:v}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((v,M)=>{const B=a.find(ee=>ee.doc.ref.isEqual(v.ref)),W=t?.payload.docs.find(ee=>ee.ref.isEqual(v.ref));B&&JSON.stringify(B.doc.metadata)===JSON.stringify(v.metadata)||!B&&W&&JSON.stringify(W.metadata)===JSON.stringify(v.metadata)||f.push({type:"modified",payload:{oldIndex:M,newIndex:M,type:"modified",doc:v}})}),f}))}function K0(n,e,t){return hy(n,t).pipe((0,Os.R)((s,a)=>function Y0(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function DI(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return dm(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return dm(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dm(n,e.oldIndex,1)}return n}(n,s))}),n}(s,a.map(f=>f.payload),e),[]),(0,Ys.x)(),(0,we.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function dm(n,e,t,...s){const a=n.slice();return a.splice(e,t,...s),a}function Tl(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function bI(n){(function CI(n,e){n.INTERNAL.registerComponent(new Rt.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},$E)))})(n,(e,t)=>new VE(e,t,new EI)),n.registerVersion("@firebase/firestore-compat","0.3.4")}(Ue.Z);class Q0{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=hy(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,we.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,Fi.O)(void 0),Ks(),(0,Sa.h)(([s,a])=>a.length>0||!s),(0,we.U)(([s,a])=>a),Ie.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Os.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Tl(e);return K0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(e={}){return dy(this.query,this.afs.schedulers.outsideAngular).pipe((0,we.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Ie.iC)}get(e){return(0,Je.D)(this.query.get(e)).pipe(Ie.iC)}add(e){return this.ref.add(e)}doc(e){return new hm(this.ref.doc(e),this.afs)}}class hm{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:f}=J0(s,t);return new Q0(a,f,this.afs)}snapshotChanges(){return function HE(n,e){return Z0(n,e).pipe((0,Fi.O)(void 0),Ks(),(0,we.U)(([t,s])=>s.exists?t?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,we.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Je.D)(this.ref.get(e)).pipe(Ie.iC)}}class GE{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?hy(this.query,this.afs.schedulers.outsideAngular).pipe((0,we.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,Sa.h)(t=>t.length>0),Ie.iC):hy(this.query,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Os.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Tl(e);return K0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(e={}){return dy(this.query,this.afs.schedulers.outsideAngular).pipe((0,we.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Ie.iC)}get(e){return(0,Je.D)(this.query.get(e)).pipe(Ie.iC)}}const zE=new O.OlP("angularfire2.enableFirestorePersistence"),al=new O.OlP("angularfire2.firestore.persistenceSettings"),WE=new O.OlP("angularfire2.firestore.settings"),fy=new O.OlP("angularfire2.firestore.use-emulator");function J0(n,e=(t=>t)){return{query:e(n),ref:n}}let qE=(()=>{class n{constructor(t,s,a,f,v,M,B,W,ee,de,ke,Qe,ht,Bt,Jt,ei,li){this.schedulers=B;const Qn=(0,et.on)(t,M,s),xr=ee;de&&(0,yt.nw)(Qn,M,ke,ht,Bt,Jt,Qe,ei),[this.firestore,this.persistenceEnabled$]=(0,et.cc)(`${Qn.name}.firestore`,"AngularFirestore",Qn.name,()=>{const Lr=M.runOutsideAngular(()=>Qn.firestore());if(f&&Lr.settings(f),xr&&Lr.useEmulator(...xr),a&&!(0,xe.PM)(v)){const Mr=()=>{try{return(0,Je.D)(Lr.enablePersistence(W||void 0).then(()=>!0,()=>!1))}catch($s){return typeof console<"u"&&console.warn($s),(0,it.of)(!1)}};return[Lr,M.runOutsideAngular(Mr)]}return[Lr,(0,it.of)(!1)]},[f,xr,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:f,query:v}=J0(a,s),M=this.schedulers.ngZone.run(()=>f);return new Q0(M,v,this)}collectionGroup(t,s){const a=s||(v=>v),f=this.firestore.collectionGroup(t);return new GE(a(f),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new hm(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(O.LFG(et.Dh),O.LFG(et.xv,8),O.LFG(zE,8),O.LFG(WE,8),O.LFG(O.Lbi),O.LFG(O.R0b),O.LFG(Ie.HU),O.LFG(al,8),O.LFG(fy,8),O.LFG(yt.zQ,8),O.LFG(yt.Qv,8),O.LFG(yt.L6,8),O.LFG(yt._Q,8),O.LFG(yt.rT,8),O.LFG(yt.lh,8),O.LFG(yt.f7,8),O.LFG(ar.nm,8))},n.\u0275prov=O.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),py=(()=>{class n{constructor(){Da.Z.registerVersion("angularfire",Ie.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:zE,useValue:!0},{provide:al,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=O.oAB({type:n}),n.\u0275inj=O.cJS({providers:[qE]}),n})();var X0=Y(5197);class Ff{}Ff.\u0275fac=function(e){return new(e||Ff)},Ff.\u0275mod=O.oAB({type:Ff,bootstrap:[Ze]}),Ff.\u0275inj=O.cJS({imports:[A.b2,Ht,ft.InfoBlinkModule,et.hO.initializeApp({apiKey:"AIzaSyDQniFv0MVk-P6av15M29jGCCthbXwk_DE",authDomain:"infoblink-8a750.firebaseapp.com",databaseURL:"https://infoblink-8a750-default-rtdb.firebaseio.com",projectId:"infoblink-8a750",storageBucket:"infoblink-8a750.appspot.com",messagingSenderId:"847119905541",appId:"1:847119905541:web:50896fbc5d85a5338e3d6c",measurementId:"G-MD5VB7MNDS"}),yt.ww,py,gi,X0.JS]}),A.q6().bootstrapModule(Ff).catch(n=>console.error(n))},9751:(Kt,qe,Y)=>{Y.d(qe,{y:()=>Fe});var A=Y(930),y=Y(727),O=Y(8822),xe=Y(9635),Se=Y(2416),Me=Y(576),Le=Y(2806);let Fe=(()=>{class De{constructor(pt){pt&&(this._subscribe=pt)}lift(pt){const At=new De;return At.source=this,At.operator=pt,At}subscribe(pt,At,Ht){const Ze=function ge(De){return De&&De instanceof A.Lv||function fe(De){return De&&(0,Me.m)(De.next)&&(0,Me.m)(De.error)&&(0,Me.m)(De.complete)}(De)&&(0,y.Nn)(De)}(pt)?pt:new A.Hp(pt,At,Ht);return(0,Le.x)(()=>{const{operator:ft,source:et}=this;Ze.add(ft?ft.call(Ze,et):et?this._subscribe(Ze):this._trySubscribe(Ze))}),Ze}_trySubscribe(pt){try{return this._subscribe(pt)}catch(At){pt.error(At)}}forEach(pt,At){return new(At=Be(At))((Ht,Ze)=>{const ft=new A.Hp({next:et=>{try{pt(et)}catch(yt){Ze(yt),ft.unsubscribe()}},error:Ze,complete:Ht});this.subscribe(ft)})}_subscribe(pt){var At;return null===(At=this.source)||void 0===At?void 0:At.subscribe(pt)}[O.L](){return this}pipe(...pt){return(0,xe.U)(pt)(this)}toPromise(pt){return new(pt=Be(pt))((At,Ht)=>{let Ze;this.subscribe(ft=>Ze=ft,ft=>Ht(ft),()=>At(Ze))})}}return De.create=mt=>new De(mt),De})();function Be(De){var mt;return null!==(mt=De??Se.v.Promise)&&void 0!==mt?mt:Promise}},7579:(Kt,qe,Y)=>{Y.d(qe,{x:()=>Le});var A=Y(9751),y=Y(727);const xe=(0,Y(3888).d)(Be=>function(){Be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Se=Y(8737),Me=Y(2806);let Le=(()=>{class Be extends A.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ge){const De=new Fe(this,this);return De.operator=ge,De}_throwIfClosed(){if(this.closed)throw new xe}next(ge){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const De of this.currentObservers)De.next(ge)}})}error(ge){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ge;const{observers:De}=this;for(;De.length;)De.shift().error(ge)}})}complete(){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ge}=this;for(;ge.length;)ge.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ge;return(null===(ge=this.observers)||void 0===ge?void 0:ge.length)>0}_trySubscribe(ge){return this._throwIfClosed(),super._trySubscribe(ge)}_subscribe(ge){return this._throwIfClosed(),this._checkFinalizedStatuses(ge),this._innerSubscribe(ge)}_innerSubscribe(ge){const{hasError:De,isStopped:mt,observers:pt}=this;return De||mt?y.Lc:(this.currentObservers=null,pt.push(ge),new y.w0(()=>{this.currentObservers=null,(0,Se.P)(pt,ge)}))}_checkFinalizedStatuses(ge){const{hasError:De,thrownError:mt,isStopped:pt}=this;De?ge.error(mt):pt&&ge.complete()}asObservable(){const ge=new A.y;return ge.source=this,ge}}return Be.create=(fe,ge)=>new Fe(fe,ge),Be})();class Fe extends Le{constructor(fe,ge){super(),this.destination=fe,this.source=ge}next(fe){var ge,De;null===(De=null===(ge=this.destination)||void 0===ge?void 0:ge.next)||void 0===De||De.call(ge,fe)}error(fe){var ge,De;null===(De=null===(ge=this.destination)||void 0===ge?void 0:ge.error)||void 0===De||De.call(ge,fe)}complete(){var fe,ge;null===(ge=null===(fe=this.destination)||void 0===fe?void 0:fe.complete)||void 0===ge||ge.call(fe)}_subscribe(fe){var ge,De;return null!==(De=null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(fe))&&void 0!==De?De:y.Lc}}},930:(Kt,qe,Y)=>{Y.d(qe,{Hp:()=>Ht,Lv:()=>De});var A=Y(576),y=Y(727),O=Y(2416),xe=Y(7849),Se=Y(5032);const Me=Be("C",void 0,void 0);function Be(gt,it,Je){return{kind:gt,value:it,error:Je}}var fe=Y(3410),ge=Y(2806);class De extends y.w0{constructor(it){super(),this.isStopped=!1,it?(this.destination=it,(0,y.Nn)(it)&&it.add(this)):this.destination=yt}static create(it,Je,Tt){return new Ht(it,Je,Tt)}next(it){this.isStopped?et(function Fe(gt){return Be("N",gt,void 0)}(it),this):this._next(it)}error(it){this.isStopped?et(function Le(gt){return Be("E",void 0,gt)}(it),this):(this.isStopped=!0,this._error(it))}complete(){this.isStopped?et(Me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(it){this.destination.next(it)}_error(it){try{this.destination.error(it)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function pt(gt,it){return mt.call(gt,it)}class At{constructor(it){this.partialObserver=it}next(it){const{partialObserver:Je}=this;if(Je.next)try{Je.next(it)}catch(Tt){Ze(Tt)}}error(it){const{partialObserver:Je}=this;if(Je.error)try{Je.error(it)}catch(Tt){Ze(Tt)}else Ze(it)}complete(){const{partialObserver:it}=this;if(it.complete)try{it.complete()}catch(Je){Ze(Je)}}}class Ht extends De{constructor(it,Je,Tt){let wt;if(super(),(0,A.m)(it)||!it)wt={next:it??void 0,error:Je??void 0,complete:Tt??void 0};else{let z;this&&O.v.useDeprecatedNextContext?(z=Object.create(it),z.unsubscribe=()=>this.unsubscribe(),wt={next:it.next&&pt(it.next,z),error:it.error&&pt(it.error,z),complete:it.complete&&pt(it.complete,z)}):wt=it}this.destination=new At(wt)}}function Ze(gt){O.v.useDeprecatedSynchronousErrorHandling?(0,ge.O)(gt):(0,xe.h)(gt)}function et(gt,it){const{onStoppedNotification:Je}=O.v;Je&&fe.z.setTimeout(()=>Je(gt,it))}const yt={closed:!0,next:Se.Z,error:function ft(gt){throw gt},complete:Se.Z}},727:(Kt,qe,Y)=>{Y.d(qe,{Lc:()=>Me,w0:()=>Se,Nn:()=>Le});var A=Y(576);const O=(0,Y(3888).d)(Be=>function(ge){Be(this),this.message=ge?`${ge.length} errors occurred during unsubscription:\n${ge.map((De,mt)=>`${mt+1}) ${De.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ge});var xe=Y(8737);class Se{constructor(fe){this.initialTeardown=fe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let fe;if(!this.closed){this.closed=!0;const{_parentage:ge}=this;if(ge)if(this._parentage=null,Array.isArray(ge))for(const pt of ge)pt.remove(this);else ge.remove(this);const{initialTeardown:De}=this;if((0,A.m)(De))try{De()}catch(pt){fe=pt instanceof O?pt.errors:[pt]}const{_finalizers:mt}=this;if(mt){this._finalizers=null;for(const pt of mt)try{Fe(pt)}catch(At){fe=fe??[],At instanceof O?fe=[...fe,...At.errors]:fe.push(At)}}if(fe)throw new O(fe)}}add(fe){var ge;if(fe&&fe!==this)if(this.closed)Fe(fe);else{if(fe instanceof Se){if(fe.closed||fe._hasParent(this))return;fe._addParent(this)}(this._finalizers=null!==(ge=this._finalizers)&&void 0!==ge?ge:[]).push(fe)}}_hasParent(fe){const{_parentage:ge}=this;return ge===fe||Array.isArray(ge)&&ge.includes(fe)}_addParent(fe){const{_parentage:ge}=this;this._parentage=Array.isArray(ge)?(ge.push(fe),ge):ge?[ge,fe]:fe}_removeParent(fe){const{_parentage:ge}=this;ge===fe?this._parentage=null:Array.isArray(ge)&&(0,xe.P)(ge,fe)}remove(fe){const{_finalizers:ge}=this;ge&&(0,xe.P)(ge,fe),fe instanceof Se&&fe._removeParent(this)}}Se.EMPTY=(()=>{const Be=new Se;return Be.closed=!0,Be})();const Me=Se.EMPTY;function Le(Be){return Be instanceof Se||Be&&"closed"in Be&&(0,A.m)(Be.remove)&&(0,A.m)(Be.add)&&(0,A.m)(Be.unsubscribe)}function Fe(Be){(0,A.m)(Be)?Be():Be.unsubscribe()}},2416:(Kt,qe,Y)=>{Y.d(qe,{v:()=>A});const A={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Kt,qe,Y)=>{Y.d(qe,{z:()=>Se});var A=Y(8189),O=Y(7669),xe=Y(8996);function Se(...Me){return function y(){return(0,A.J)(1)}()((0,xe.D)(Me,(0,O.yG)(Me)))}},515:(Kt,qe,Y)=>{Y.d(qe,{E:()=>y});const y=new(Y(9751).y)(Se=>Se.complete())},8996:(Kt,qe,Y)=>{Y.d(qe,{D:()=>it});var A=Y(8421),y=Y(5363),O=Y(9468),Me=Y(9751),Fe=Y(2202),Be=Y(576),fe=Y(9672);function De(Je,Tt){if(!Je)throw new Error("Iterable cannot be null");return new Me.y(wt=>{(0,fe.f)(wt,Tt,()=>{const z=Je[Symbol.asyncIterator]();(0,fe.f)(wt,Tt,()=>{z.next().then(tt=>{tt.done?wt.complete():wt.next(tt.value)})},0,!0)})})}var mt=Y(3670),pt=Y(8239),At=Y(1144),Ht=Y(6495),Ze=Y(2206),ft=Y(4532),et=Y(3260);function it(Je,Tt){return Tt?function gt(Je,Tt){if(null!=Je){if((0,mt.c)(Je))return function xe(Je,Tt){return(0,A.Xf)(Je).pipe((0,O.R)(Tt),(0,y.Q)(Tt))}(Je,Tt);if((0,At.z)(Je))return function Le(Je,Tt){return new Me.y(wt=>{let z=0;return Tt.schedule(function(){z===Je.length?wt.complete():(wt.next(Je[z++]),wt.closed||this.schedule())})})}(Je,Tt);if((0,pt.t)(Je))return function Se(Je,Tt){return(0,A.Xf)(Je).pipe((0,O.R)(Tt),(0,y.Q)(Tt))}(Je,Tt);if((0,Ze.D)(Je))return De(Je,Tt);if((0,Ht.T)(Je))return function ge(Je,Tt){return new Me.y(wt=>{let z;return(0,fe.f)(wt,Tt,()=>{z=Je[Fe.h](),(0,fe.f)(wt,Tt,()=>{let tt,we;try{({value:tt,done:we}=z.next())}catch(Te){return void wt.error(Te)}we?wt.complete():wt.next(tt)},0,!0)}),()=>(0,Be.m)(z?.return)&&z.return()})}(Je,Tt);if((0,et.L)(Je))return function yt(Je,Tt){return De((0,et.Q)(Je),Tt)}(Je,Tt)}throw(0,ft.z)(Je)}(Je,Tt):(0,A.Xf)(Je)}},8421:(Kt,qe,Y)=>{Y.d(qe,{Xf:()=>mt});var A=Y(655),y=Y(1144),O=Y(8239),xe=Y(9751),Se=Y(3670),Me=Y(2206),Le=Y(4532),Fe=Y(6495),Be=Y(3260),fe=Y(576),ge=Y(7849),De=Y(8822);function mt(gt){if(gt instanceof xe.y)return gt;if(null!=gt){if((0,Se.c)(gt))return function pt(gt){return new xe.y(it=>{const Je=gt[De.L]();if((0,fe.m)(Je.subscribe))return Je.subscribe(it);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(gt);if((0,y.z)(gt))return function At(gt){return new xe.y(it=>{for(let Je=0;Je<gt.length&&!it.closed;Je++)it.next(gt[Je]);it.complete()})}(gt);if((0,O.t)(gt))return function Ht(gt){return new xe.y(it=>{gt.then(Je=>{it.closed||(it.next(Je),it.complete())},Je=>it.error(Je)).then(null,ge.h)})}(gt);if((0,Me.D)(gt))return ft(gt);if((0,Fe.T)(gt))return function Ze(gt){return new xe.y(it=>{for(const Je of gt)if(it.next(Je),it.closed)return;it.complete()})}(gt);if((0,Be.L)(gt))return function et(gt){return ft((0,Be.Q)(gt))}(gt)}throw(0,Le.z)(gt)}function ft(gt){return new xe.y(it=>{(function yt(gt,it){var Je,Tt,wt,z;return(0,A.mG)(this,void 0,void 0,function*(){try{for(Je=(0,A.KL)(gt);!(Tt=yield Je.next()).done;)if(it.next(Tt.value),it.closed)return}catch(tt){wt={error:tt}}finally{try{Tt&&!Tt.done&&(z=Je.return)&&(yield z.call(Je))}finally{if(wt)throw wt.error}}it.complete()})})(gt,it).catch(Je=>it.error(Je))})}},6451:(Kt,qe,Y)=>{Y.d(qe,{T:()=>Me});var A=Y(8189),y=Y(8421),O=Y(515),xe=Y(7669),Se=Y(8996);function Me(...Le){const Fe=(0,xe.yG)(Le),Be=(0,xe._6)(Le,1/0),fe=Le;return fe.length?1===fe.length?(0,y.Xf)(fe[0]):(0,A.J)(Be)((0,Se.D)(fe,Fe)):O.E}},9646:(Kt,qe,Y)=>{Y.d(qe,{of:()=>O});var A=Y(7669),y=Y(8996);function O(...xe){const Se=(0,A.yG)(xe);return(0,y.D)(xe,Se)}},5403:(Kt,qe,Y)=>{Y.d(qe,{x:()=>y});var A=Y(930);function y(xe,Se,Me,Le,Fe){return new O(xe,Se,Me,Le,Fe)}class O extends A.Lv{constructor(Se,Me,Le,Fe,Be,fe){super(Se),this.onFinalize=Be,this.shouldUnsubscribe=fe,this._next=Me?function(ge){try{Me(ge)}catch(De){Se.error(De)}}:super._next,this._error=Fe?function(ge){try{Fe(ge)}catch(De){Se.error(De)}finally{this.unsubscribe()}}:super._error,this._complete=Le?function(){try{Le()}catch(ge){Se.error(ge)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Me}=this;super.unsubscribe(),!Me&&(null===(Se=this.onFinalize)||void 0===Se||Se.call(this))}}}},6590:(Kt,qe,Y)=>{Y.d(qe,{d:()=>O});var A=Y(4482),y=Y(5403);function O(xe){return(0,A.e)((Se,Me)=>{let Le=!1;Se.subscribe((0,y.x)(Me,Fe=>{Le=!0,Me.next(Fe)},()=>{Le||Me.next(xe),Me.complete()}))})}},1884:(Kt,qe,Y)=>{Y.d(qe,{x:()=>xe});var A=Y(4671),y=Y(4482),O=Y(5403);function xe(Me,Le=A.y){return Me=Me??Se,(0,y.e)((Fe,Be)=>{let fe,ge=!0;Fe.subscribe((0,O.x)(Be,De=>{const mt=Le(De);(ge||!Me(fe,mt))&&(ge=!1,fe=mt,Be.next(De))}))})}function Se(Me,Le){return Me===Le}},9300:(Kt,qe,Y)=>{Y.d(qe,{h:()=>O});var A=Y(4482),y=Y(5403);function O(xe,Se){return(0,A.e)((Me,Le)=>{let Fe=0;Me.subscribe((0,y.x)(Le,Be=>xe.call(Se,Be,Fe++)&&Le.next(Be)))})}},590:(Kt,qe,Y)=>{Y.d(qe,{P:()=>Le});var A=Y(6805),y=Y(9300),O=Y(5698),xe=Y(6590),Se=Y(8068),Me=Y(4671);function Le(Fe,Be){const fe=arguments.length>=2;return ge=>ge.pipe(Fe?(0,y.h)((De,mt)=>Fe(De,mt,ge)):Me.y,(0,O.q)(1),fe?(0,xe.d)(Be):(0,Se.T)(()=>new A.K))}},4004:(Kt,qe,Y)=>{Y.d(qe,{U:()=>O});var A=Y(4482),y=Y(5403);function O(xe,Se){return(0,A.e)((Me,Le)=>{let Fe=0;Me.subscribe((0,y.x)(Le,Be=>{Le.next(xe.call(Se,Be,Fe++))}))})}},8189:(Kt,qe,Y)=>{Y.d(qe,{J:()=>O});var A=Y(5577),y=Y(4671);function O(xe=1/0){return(0,A.z)(y.y,xe)}},5577:(Kt,qe,Y)=>{Y.d(qe,{z:()=>Fe});var A=Y(4004),y=Y(8421),O=Y(4482),xe=Y(9672),Se=Y(5403),Le=Y(576);function Fe(Be,fe,ge=1/0){return(0,Le.m)(fe)?Fe((De,mt)=>(0,A.U)((pt,At)=>fe(De,pt,mt,At))((0,y.Xf)(Be(De,mt))),ge):("number"==typeof fe&&(ge=fe),(0,O.e)((De,mt)=>function Me(Be,fe,ge,De,mt,pt,At,Ht){const Ze=[];let ft=0,et=0,yt=!1;const gt=()=>{yt&&!Ze.length&&!ft&&fe.complete()},it=Tt=>ft<De?Je(Tt):Ze.push(Tt),Je=Tt=>{pt&&fe.next(Tt),ft++;let wt=!1;(0,y.Xf)(ge(Tt,et++)).subscribe((0,Se.x)(fe,z=>{mt?.(z),pt?it(z):fe.next(z)},()=>{wt=!0},void 0,()=>{if(wt)try{for(ft--;Ze.length&&ft<De;){const z=Ze.shift();At?(0,xe.f)(fe,At,()=>Je(z)):Je(z)}gt()}catch(z){fe.error(z)}}))};return Be.subscribe((0,Se.x)(fe,it,()=>{yt=!0,gt()})),()=>{Ht?.()}}(De,mt,Be,ge)))}},5363:(Kt,qe,Y)=>{Y.d(qe,{Q:()=>xe});var A=Y(9672),y=Y(4482),O=Y(5403);function xe(Se,Me=0){return(0,y.e)((Le,Fe)=>{Le.subscribe((0,O.x)(Fe,Be=>(0,A.f)(Fe,Se,()=>Fe.next(Be),Me),()=>(0,A.f)(Fe,Se,()=>Fe.complete(),Me),Be=>(0,A.f)(Fe,Se,()=>Fe.error(Be),Me)))})}},5026:(Kt,qe,Y)=>{Y.d(qe,{R:()=>xe});var A=Y(4482),y=Y(5403);function O(Se,Me,Le,Fe,Be){return(fe,ge)=>{let De=Le,mt=Me,pt=0;fe.subscribe((0,y.x)(ge,At=>{const Ht=pt++;mt=De?Se(mt,At,Ht):(De=!0,At),Fe&&ge.next(mt)},Be&&(()=>{De&&ge.next(mt),ge.complete()})))}}function xe(Se,Me){return(0,A.e)(O(Se,Me,arguments.length>=2,!0))}},3099:(Kt,qe,Y)=>{Y.d(qe,{B:()=>Se});var A=Y(8421),y=Y(7579),O=Y(930),xe=Y(4482);function Se(Le={}){const{connector:Fe=(()=>new y.x),resetOnError:Be=!0,resetOnComplete:fe=!0,resetOnRefCountZero:ge=!0}=Le;return De=>{let mt,pt,At,Ht=0,Ze=!1,ft=!1;const et=()=>{pt?.unsubscribe(),pt=void 0},yt=()=>{et(),mt=At=void 0,Ze=ft=!1},gt=()=>{const it=mt;yt(),it?.unsubscribe()};return(0,xe.e)((it,Je)=>{Ht++,!ft&&!Ze&&et();const Tt=At=At??Fe();Je.add(()=>{Ht--,0===Ht&&!ft&&!Ze&&(pt=Me(gt,ge))}),Tt.subscribe(Je),!mt&&Ht>0&&(mt=new O.Hp({next:wt=>Tt.next(wt),error:wt=>{ft=!0,et(),pt=Me(yt,Be,wt),Tt.error(wt)},complete:()=>{Ze=!0,et(),pt=Me(yt,fe),Tt.complete()}}),(0,A.Xf)(it).subscribe(mt))})(De)}}function Me(Le,Fe,...Be){if(!0===Fe)return void Le();if(!1===Fe)return;const fe=new O.Hp({next:()=>{fe.unsubscribe(),Le()}});return(0,A.Xf)(Fe(...Be)).subscribe(fe)}},8675:(Kt,qe,Y)=>{Y.d(qe,{O:()=>xe});var A=Y(7272),y=Y(7669),O=Y(4482);function xe(...Se){const Me=(0,y.yG)(Se);return(0,O.e)((Le,Fe)=>{(Me?(0,A.z)(Se,Le,Me):(0,A.z)(Se,Le)).subscribe(Fe)})}},9468:(Kt,qe,Y)=>{Y.d(qe,{R:()=>y});var A=Y(4482);function y(O,xe=0){return(0,A.e)((Se,Me)=>{Me.add(O.schedule(()=>Se.subscribe(Me),xe))})}},3900:(Kt,qe,Y)=>{Y.d(qe,{w:()=>xe});var A=Y(8421),y=Y(4482),O=Y(5403);function xe(Se,Me){return(0,y.e)((Le,Fe)=>{let Be=null,fe=0,ge=!1;const De=()=>ge&&!Be&&Fe.complete();Le.subscribe((0,O.x)(Fe,mt=>{Be?.unsubscribe();let pt=0;const At=fe++;(0,A.Xf)(Se(mt,At)).subscribe(Be=(0,O.x)(Fe,Ht=>Fe.next(Me?Me(mt,Ht,At,pt++):Ht),()=>{Be=null,De()}))},()=>{ge=!0,De()}))})}},5698:(Kt,qe,Y)=>{Y.d(qe,{q:()=>xe});var A=Y(515),y=Y(4482),O=Y(5403);function xe(Se){return Se<=0?()=>A.E:(0,y.e)((Me,Le)=>{let Fe=0;Me.subscribe((0,O.x)(Le,Be=>{++Fe<=Se&&(Le.next(Be),Se<=Fe&&Le.complete())}))})}},8505:(Kt,qe,Y)=>{Y.d(qe,{b:()=>Se});var A=Y(576),y=Y(4482),O=Y(5403),xe=Y(4671);function Se(Me,Le,Fe){const Be=(0,A.m)(Me)||Le||Fe?{next:Me,error:Le,complete:Fe}:Me;return Be?(0,y.e)((fe,ge)=>{var De;null===(De=Be.subscribe)||void 0===De||De.call(Be);let mt=!0;fe.subscribe((0,O.x)(ge,pt=>{var At;null===(At=Be.next)||void 0===At||At.call(Be,pt),ge.next(pt)},()=>{var pt;mt=!1,null===(pt=Be.complete)||void 0===pt||pt.call(Be),ge.complete()},pt=>{var At;mt=!1,null===(At=Be.error)||void 0===At||At.call(Be,pt),ge.error(pt)},()=>{var pt,At;mt&&(null===(pt=Be.unsubscribe)||void 0===pt||pt.call(Be)),null===(At=Be.finalize)||void 0===At||At.call(Be)}))}):xe.y}},8068:(Kt,qe,Y)=>{Y.d(qe,{T:()=>xe});var A=Y(6805),y=Y(4482),O=Y(5403);function xe(Me=Se){return(0,y.e)((Le,Fe)=>{let Be=!1;Le.subscribe((0,O.x)(Fe,fe=>{Be=!0,Fe.next(fe)},()=>Be?Fe.complete():Fe.error(Me())))})}function Se(){return new A.K}},4408:(Kt,qe,Y)=>{Y.d(qe,{o:()=>Se});var A=Y(727);class y extends A.w0{constructor(Le,Fe){super()}schedule(Le,Fe=0){return this}}const O={setInterval(Me,Le,...Fe){const{delegate:Be}=O;return Be?.setInterval?Be.setInterval(Me,Le,...Fe):setInterval(Me,Le,...Fe)},clearInterval(Me){const{delegate:Le}=O;return(Le?.clearInterval||clearInterval)(Me)},delegate:void 0};var xe=Y(8737);class Se extends y{constructor(Le,Fe){super(Le,Fe),this.scheduler=Le,this.work=Fe,this.pending=!1}schedule(Le,Fe=0){var Be;if(this.closed)return this;this.state=Le;const fe=this.id,ge=this.scheduler;return null!=fe&&(this.id=this.recycleAsyncId(ge,fe,Fe)),this.pending=!0,this.delay=Fe,this.id=null!==(Be=this.id)&&void 0!==Be?Be:this.requestAsyncId(ge,this.id,Fe),this}requestAsyncId(Le,Fe,Be=0){return O.setInterval(Le.flush.bind(Le,this),Be)}recycleAsyncId(Le,Fe,Be=0){if(null!=Be&&this.delay===Be&&!1===this.pending)return Fe;null!=Fe&&O.clearInterval(Fe)}execute(Le,Fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Be=this._execute(Le,Fe);if(Be)return Be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Le,Fe){let fe,Be=!1;try{this.work(Le)}catch(ge){Be=!0,fe=ge||new Error("Scheduled action threw falsy error")}if(Be)return this.unsubscribe(),fe}unsubscribe(){if(!this.closed){const{id:Le,scheduler:Fe}=this,{actions:Be}=Fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,xe.P)(Be,this),null!=Le&&(this.id=this.recycleAsyncId(Fe,Le,null)),this.delay=null,super.unsubscribe()}}}},7565:(Kt,qe,Y)=>{Y.d(qe,{v:()=>O});var A=Y(6063);class y{constructor(Se,Me=y.now){this.schedulerActionCtor=Se,this.now=Me}schedule(Se,Me=0,Le){return new this.schedulerActionCtor(this,Se).schedule(Le,Me)}}y.now=A.l.now;class O extends y{constructor(Se,Me=y.now){super(Se,Me),this.actions=[],this._active=!1}flush(Se){const{actions:Me}=this;if(this._active)return void Me.push(Se);let Le;this._active=!0;do{if(Le=Se.execute(Se.state,Se.delay))break}while(Se=Me.shift());if(this._active=!1,Le){for(;Se=Me.shift();)Se.unsubscribe();throw Le}}}},4986:(Kt,qe,Y)=>{Y.d(qe,{z:()=>O});var A=Y(4408);const O=new(Y(7565).v)(A.o)},6063:(Kt,qe,Y)=>{Y.d(qe,{l:()=>A});const A={now:()=>(A.delegate||Date).now(),delegate:void 0}},3410:(Kt,qe,Y)=>{Y.d(qe,{z:()=>A});const A={setTimeout(y,O,...xe){const{delegate:Se}=A;return Se?.setTimeout?Se.setTimeout(y,O,...xe):setTimeout(y,O,...xe)},clearTimeout(y){const{delegate:O}=A;return(O?.clearTimeout||clearTimeout)(y)},delegate:void 0}},2202:(Kt,qe,Y)=>{Y.d(qe,{h:()=>y});const y=function A(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Kt,qe,Y)=>{Y.d(qe,{L:()=>A});const A="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Kt,qe,Y)=>{Y.d(qe,{K:()=>y});const y=(0,Y(3888).d)(O=>function(){O(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Kt,qe,Y)=>{Y.d(qe,{_6:()=>Me,jO:()=>xe,yG:()=>Se});var A=Y(576);function O(Le){return Le[Le.length-1]}function xe(Le){return(0,A.m)(O(Le))?Le.pop():void 0}function Se(Le){return function y(Le){return Le&&(0,A.m)(Le.schedule)}(O(Le))?Le.pop():void 0}function Me(Le,Fe){return"number"==typeof O(Le)?Le.pop():Fe}},4742:(Kt,qe,Y)=>{Y.d(qe,{D:()=>Se});const{isArray:A}=Array,{getPrototypeOf:y,prototype:O,keys:xe}=Object;function Se(Le){if(1===Le.length){const Fe=Le[0];if(A(Fe))return{args:Fe,keys:null};if(function Me(Le){return Le&&"object"==typeof Le&&y(Le)===O}(Fe)){const Be=xe(Fe);return{args:Be.map(fe=>Fe[fe]),keys:Be}}}return{args:Le,keys:null}}},8737:(Kt,qe,Y)=>{function A(y,O){if(y){const xe=y.indexOf(O);0<=xe&&y.splice(xe,1)}}Y.d(qe,{P:()=>A})},3888:(Kt,qe,Y)=>{function A(y){const xe=y(Se=>{Error.call(Se),Se.stack=(new Error).stack});return xe.prototype=Object.create(Error.prototype),xe.prototype.constructor=xe,xe}Y.d(qe,{d:()=>A})},1810:(Kt,qe,Y)=>{function A(y,O){return y.reduce((xe,Se,Me)=>(xe[Se]=O[Me],xe),{})}Y.d(qe,{n:()=>A})},2806:(Kt,qe,Y)=>{Y.d(qe,{O:()=>xe,x:()=>O});var A=Y(2416);let y=null;function O(Se){if(A.v.useDeprecatedSynchronousErrorHandling){const Me=!y;if(Me&&(y={errorThrown:!1,error:null}),Se(),Me){const{errorThrown:Le,error:Fe}=y;if(y=null,Le)throw Fe}}else Se()}function xe(Se){A.v.useDeprecatedSynchronousErrorHandling&&y&&(y.errorThrown=!0,y.error=Se)}},9672:(Kt,qe,Y)=>{function A(y,O,xe,Se=0,Me=!1){const Le=O.schedule(function(){xe(),Me?y.add(this.schedule(null,Se)):this.unsubscribe()},Se);if(y.add(Le),!Me)return Le}Y.d(qe,{f:()=>A})},4671:(Kt,qe,Y)=>{function A(y){return y}Y.d(qe,{y:()=>A})},1144:(Kt,qe,Y)=>{Y.d(qe,{z:()=>A});const A=y=>y&&"number"==typeof y.length&&"function"!=typeof y},2206:(Kt,qe,Y)=>{Y.d(qe,{D:()=>y});var A=Y(576);function y(O){return Symbol.asyncIterator&&(0,A.m)(O?.[Symbol.asyncIterator])}},576:(Kt,qe,Y)=>{function A(y){return"function"==typeof y}Y.d(qe,{m:()=>A})},3670:(Kt,qe,Y)=>{Y.d(qe,{c:()=>O});var A=Y(8822),y=Y(576);function O(xe){return(0,y.m)(xe[A.L])}},6495:(Kt,qe,Y)=>{Y.d(qe,{T:()=>O});var A=Y(2202),y=Y(576);function O(xe){return(0,y.m)(xe?.[A.h])}},8239:(Kt,qe,Y)=>{Y.d(qe,{t:()=>y});var A=Y(576);function y(O){return(0,A.m)(O?.then)}},3260:(Kt,qe,Y)=>{Y.d(qe,{L:()=>xe,Q:()=>O});var A=Y(655),y=Y(576);function O(Se){return(0,A.FC)(this,arguments,function*(){const Le=Se.getReader();try{for(;;){const{value:Fe,done:Be}=yield(0,A.qq)(Le.read());if(Be)return yield(0,A.qq)(void 0);yield yield(0,A.qq)(Fe)}}finally{Le.releaseLock()}})}function xe(Se){return(0,y.m)(Se?.getReader)}},4482:(Kt,qe,Y)=>{Y.d(qe,{A:()=>y,e:()=>O});var A=Y(576);function y(xe){return(0,A.m)(xe?.lift)}function O(xe){return Se=>{if(y(Se))return Se.lift(function(Me){try{return xe(Me,this)}catch(Le){this.error(Le)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Kt,qe,Y)=>{Y.d(qe,{Z:()=>xe});var A=Y(4004);const{isArray:y}=Array;function xe(Se){return(0,A.U)(Me=>function O(Se,Me){return y(Me)?Se(...Me):Se(Me)}(Se,Me))}},5032:(Kt,qe,Y)=>{function A(){}Y.d(qe,{Z:()=>A})},9635:(Kt,qe,Y)=>{Y.d(qe,{U:()=>O,z:()=>y});var A=Y(4671);function y(...xe){return O(xe)}function O(xe){return 0===xe.length?A.y:1===xe.length?xe[0]:function(Me){return xe.reduce((Le,Fe)=>Fe(Le),Me)}}},7849:(Kt,qe,Y)=>{Y.d(qe,{h:()=>O});var A=Y(2416),y=Y(3410);function O(xe){y.z.setTimeout(()=>{const{onUnhandledError:Se}=A.v;if(!Se)throw xe;Se(xe)})}},4532:(Kt,qe,Y)=>{function A(y){return new TypeError(`You provided ${null!==y&&"object"==typeof y?"an invalid object":`'${y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}Y.d(qe,{z:()=>A})},655:(Kt,qe,Y)=>{function xe(we,Te){var Ie={};for(var Ue in we)Object.prototype.hasOwnProperty.call(we,Ue)&&Te.indexOf(Ue)<0&&(Ie[Ue]=we[Ue]);if(null!=we&&"function"==typeof Object.getOwnPropertySymbols){var _e=0;for(Ue=Object.getOwnPropertySymbols(we);_e<Ue.length;_e++)Te.indexOf(Ue[_e])<0&&Object.prototype.propertyIsEnumerable.call(we,Ue[_e])&&(Ie[Ue[_e]]=we[Ue[_e]])}return Ie}function Fe(we,Te,Ie,Ue){return new(Ie||(Ie=Promise))(function(Ct,Xe){function Rt(jt){try{Nt(Ue.next(jt))}catch(Ot){Xe(Ot)}}function cn(jt){try{Nt(Ue.throw(jt))}catch(Ot){Xe(Ot)}}function Nt(jt){jt.done?Ct(jt.value):function _e(Ct){return Ct instanceof Ie?Ct:new Ie(function(Xe){Xe(Ct)})}(jt.value).then(Rt,cn)}Nt((Ue=Ue.apply(we,Te||[])).next())})}function Ze(we){return this instanceof Ze?(this.v=we,this):new Ze(we)}function ft(we,Te,Ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,Ue=Ie.apply(we,Te||[]),Ct=[];return _e={},Xe("next"),Xe("throw"),Xe("return"),_e[Symbol.asyncIterator]=function(){return this},_e;function Xe(dn){Ue[dn]&&(_e[dn]=function(Gt){return new Promise(function(un,nn){Ct.push([dn,Gt,un,nn])>1||Rt(dn,Gt)})})}function Rt(dn,Gt){try{!function cn(dn){dn.value instanceof Ze?Promise.resolve(dn.value.v).then(Nt,jt):Ot(Ct[0][2],dn)}(Ue[dn](Gt))}catch(un){Ot(Ct[0][3],un)}}function Nt(dn){Rt("next",dn)}function jt(dn){Rt("throw",dn)}function Ot(dn,Gt){dn(Gt),Ct.shift(),Ct.length&&Rt(Ct[0][0],Ct[0][1])}}function yt(we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,Te=we[Symbol.asyncIterator];return Te?Te.call(we):(we=function De(we){var Te="function"==typeof Symbol&&Symbol.iterator,Ie=Te&&we[Te],Ue=0;if(Ie)return Ie.call(we);if(we&&"number"==typeof we.length)return{next:function(){return we&&Ue>=we.length&&(we=void 0),{value:we&&we[Ue++],done:!we}}};throw new TypeError(Te?"Object is not iterable.":"Symbol.iterator is not defined.")}(we),Ie={},Ue("next"),Ue("throw"),Ue("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie);function Ue(Ct){Ie[Ct]=we[Ct]&&function(Xe){return new Promise(function(Rt,cn){!function _e(Ct,Xe,Rt,cn){Promise.resolve(cn).then(function(Nt){Ct({value:Nt,done:Rt})},Xe)}(Rt,cn,(Xe=we[Ct](Xe)).done,Xe.value)})}}}Y.d(qe,{FC:()=>ft,KL:()=>yt,_T:()=>xe,mG:()=>Fe,qq:()=>Ze})},6895:(Kt,qe,Y)=>{Y.d(qe,{Do:()=>et,EM:()=>Bo,HT:()=>xe,JF:()=>Ca,JJ:()=>Rs,K0:()=>Me,Mx:()=>br,O5:()=>Hs,PM:()=>Ia,S$:()=>Ht,V_:()=>Be,Ye:()=>yt,b0:()=>ft,bD:()=>$a,ez:()=>sa,q:()=>O,sg:()=>ai,w_:()=>Se});var A=Y(4650);let y=null;function O(){return y}function xe(k){y||(y=k)}class Se{}const Me=new A.OlP("DocumentToken");let Le=(()=>{class k{historyGo(L){throw new Error("Not implemented")}}return k.\u0275fac=function(L){return new(L||k)},k.\u0275prov=A.Yz7({token:k,factory:function(){return function Fe(){return(0,A.LFG)(fe)}()},providedIn:"platform"}),k})();const Be=new A.OlP("Location Initialized");let fe=(()=>{class k extends Le{constructor(L){super(),this._doc=L,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(L){const Q=O().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("popstate",L,!1),()=>Q.removeEventListener("popstate",L)}onHashChange(L){const Q=O().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("hashchange",L,!1),()=>Q.removeEventListener("hashchange",L)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(L){this._location.pathname=L}pushState(L,Q,ce){ge()?this._history.pushState(L,Q,ce):this._location.hash=ce}replaceState(L,Q,ce){ge()?this._history.replaceState(L,Q,ce):this._location.hash=ce}forward(){this._history.forward()}back(){this._history.back()}historyGo(L=0){this._history.go(L)}getState(){return this._history.state}}return k.\u0275fac=function(L){return new(L||k)(A.LFG(Me))},k.\u0275prov=A.Yz7({token:k,factory:function(){return function De(){return new fe((0,A.LFG)(Me))}()},providedIn:"platform"}),k})();function ge(){return!!window.history.pushState}function mt(k,K){if(0==k.length)return K;if(0==K.length)return k;let L=0;return k.endsWith("/")&&L++,K.startsWith("/")&&L++,2==L?k+K.substring(1):1==L?k+K:k+"/"+K}function pt(k){const K=k.match(/#|\?|$/),L=K&&K.index||k.length;return k.slice(0,L-("/"===k[L-1]?1:0))+k.slice(L)}function At(k){return k&&"?"!==k[0]?"?"+k:k}let Ht=(()=>{class k{historyGo(L){throw new Error("Not implemented")}}return k.\u0275fac=function(L){return new(L||k)},k.\u0275prov=A.Yz7({token:k,factory:function(){return(0,A.f3M)(ft)},providedIn:"root"}),k})();const Ze=new A.OlP("appBaseHref");let ft=(()=>{class k extends Ht{constructor(L,Q){super(),this._platformLocation=L,this._removeListenerFns=[],this._baseHref=Q??this._platformLocation.getBaseHrefFromDOM()??(0,A.f3M)(Me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}prepareExternalUrl(L){return mt(this._baseHref,L)}path(L=!1){const Q=this._platformLocation.pathname+At(this._platformLocation.search),ce=this._platformLocation.hash;return ce&&L?`${Q}${ce}`:Q}pushState(L,Q,ce,ze){const lt=this.prepareExternalUrl(ce+At(ze));this._platformLocation.pushState(L,Q,lt)}replaceState(L,Q,ce,ze){const lt=this.prepareExternalUrl(ce+At(ze));this._platformLocation.replaceState(L,Q,lt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}}return k.\u0275fac=function(L){return new(L||k)(A.LFG(Le),A.LFG(Ze,8))},k.\u0275prov=A.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),et=(()=>{class k extends Ht{constructor(L,Q){super(),this._platformLocation=L,this._baseHref="",this._removeListenerFns=[],null!=Q&&(this._baseHref=Q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}path(L=!1){let Q=this._platformLocation.hash;return null==Q&&(Q="#"),Q.length>0?Q.substring(1):Q}prepareExternalUrl(L){const Q=mt(this._baseHref,L);return Q.length>0?"#"+Q:Q}pushState(L,Q,ce,ze){let lt=this.prepareExternalUrl(ce+At(ze));0==lt.length&&(lt=this._platformLocation.pathname),this._platformLocation.pushState(L,Q,lt)}replaceState(L,Q,ce,ze){let lt=this.prepareExternalUrl(ce+At(ze));0==lt.length&&(lt=this._platformLocation.pathname),this._platformLocation.replaceState(L,Q,lt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}}return k.\u0275fac=function(L){return new(L||k)(A.LFG(Le),A.LFG(Ze,8))},k.\u0275prov=A.Yz7({token:k,factory:k.\u0275fac}),k})(),yt=(()=>{class k{constructor(L){this._subject=new A.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=L;const Q=this._locationStrategy.getBaseHref();this._basePath=function Tt(k){if(new RegExp("^(https?:)?//").test(k)){const[,L]=k.split(/\/\/[^\/]+/);return L}return k}(pt(Je(Q))),this._locationStrategy.onPopState(ce=>{this._subject.emit({url:this.path(!0),pop:!0,state:ce.state,type:ce.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(L=!1){return this.normalize(this._locationStrategy.path(L))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(L,Q=""){return this.path()==this.normalize(L+At(Q))}normalize(L){return k.stripTrailingSlash(function it(k,K){return k&&new RegExp(`^${k}([/;?#]|$)`).test(K)?K.substring(k.length):K}(this._basePath,Je(L)))}prepareExternalUrl(L){return L&&"/"!==L[0]&&(L="/"+L),this._locationStrategy.prepareExternalUrl(L)}go(L,Q="",ce=null){this._locationStrategy.pushState(ce,"",L,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+At(Q)),ce)}replaceState(L,Q="",ce=null){this._locationStrategy.replaceState(ce,"",L,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+At(Q)),ce)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(L=0){this._locationStrategy.historyGo?.(L)}onUrlChange(L){return this._urlChangeListeners.push(L),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Q=>{this._notifyUrlChangeListeners(Q.url,Q.state)})),()=>{const Q=this._urlChangeListeners.indexOf(L);this._urlChangeListeners.splice(Q,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(L="",Q){this._urlChangeListeners.forEach(ce=>ce(L,Q))}subscribe(L,Q,ce){return this._subject.subscribe({next:L,error:Q,complete:ce})}}return k.normalizeQueryParams=At,k.joinWithSlash=mt,k.stripTrailingSlash=pt,k.\u0275fac=function(L){return new(L||k)(A.LFG(Ht))},k.\u0275prov=A.Yz7({token:k,factory:function(){return function gt(){return new yt((0,A.LFG)(Ht))}()},providedIn:"root"}),k})();function Je(k){return k.replace(/\/index.html$/,"")}var z=(()=>((z=z||{})[z.Decimal=0]="Decimal",z[z.Percent=1]="Percent",z[z.Currency=2]="Currency",z[z.Scientific=3]="Scientific",z))(),Ue=(()=>((Ue=Ue||{})[Ue.Decimal=0]="Decimal",Ue[Ue.Group=1]="Group",Ue[Ue.List=2]="List",Ue[Ue.PercentSign=3]="PercentSign",Ue[Ue.PlusSign=4]="PlusSign",Ue[Ue.MinusSign=5]="MinusSign",Ue[Ue.Exponential=6]="Exponential",Ue[Ue.SuperscriptingExponent=7]="SuperscriptingExponent",Ue[Ue.PerMille=8]="PerMille",Ue[Ue.Infinity=9]="Infinity",Ue[Ue.NaN=10]="NaN",Ue[Ue.TimeSeparator=11]="TimeSeparator",Ue[Ue.CurrencyDecimal=12]="CurrencyDecimal",Ue[Ue.CurrencyGroup=13]="CurrencyGroup",Ue))();function nn(k,K){const L=(0,A.cg1)(k),Q=L[A.wAp.NumberSymbols][K];if(typeof Q>"u"){if(K===Ue.CurrencyDecimal)return L[A.wAp.NumberSymbols][Ue.Decimal];if(K===Ue.CurrencyGroup)return L[A.wAp.NumberSymbols][Ue.Group]}return Q}const xn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function es(k){const K=parseInt(k);if(isNaN(K))throw new Error("Invalid integer literal when parsing "+k);return K}function br(k,K){K=encodeURIComponent(K);for(const L of k.split(";")){const Q=L.indexOf("="),[ce,ze]=-1==Q?[L,""]:[L.slice(0,Q),L.slice(Q+1)];if(ce.trim()===K)return decodeURIComponent(ze)}return null}class dr{constructor(K,L,Q,ce){this.$implicit=K,this.ngForOf=L,this.index=Q,this.count=ce}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ai=(()=>{class k{set ngForOf(L){this._ngForOf=L,this._ngForOfDirty=!0}set ngForTrackBy(L){this._trackByFn=L}get ngForTrackBy(){return this._trackByFn}constructor(L,Q,ce){this._viewContainer=L,this._template=Q,this._differs=ce,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(L){L&&(this._template=L)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const L=this._ngForOf;!this._differ&&L&&(this._differ=this._differs.find(L).create(this.ngForTrackBy))}if(this._differ){const L=this._differ.diff(this._ngForOf);L&&this._applyChanges(L)}}_applyChanges(L){const Q=this._viewContainer;L.forEachOperation((ce,ze,lt)=>{if(null==ce.previousIndex)Q.createEmbeddedView(this._template,new dr(ce.item,this._ngForOf,-1,-1),null===lt?void 0:lt);else if(null==lt)Q.remove(null===ze?void 0:ze);else if(null!==ze){const Vt=Q.get(ze);Q.move(Vt,lt),tr(Vt,ce)}});for(let ce=0,ze=Q.length;ce<ze;ce++){const Vt=Q.get(ce).context;Vt.index=ce,Vt.count=ze,Vt.ngForOf=this._ngForOf}L.forEachIdentityChange(ce=>{tr(Q.get(ce.currentIndex),ce)})}static ngTemplateContextGuard(L,Q){return!0}}return k.\u0275fac=function(L){return new(L||k)(A.Y36(A.s_b),A.Y36(A.Rgc),A.Y36(A.ZZ4))},k.\u0275dir=A.lG2({type:k,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),k})();function tr(k,K){k.context.$implicit=K.item}let Hs=(()=>{class k{constructor(L,Q){this._viewContainer=L,this._context=new Un,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Q}set ngIf(L){this._context.$implicit=this._context.ngIf=L,this._updateView()}set ngIfThen(L){so("ngIfThen",L),this._thenTemplateRef=L,this._thenViewRef=null,this._updateView()}set ngIfElse(L){so("ngIfElse",L),this._elseTemplateRef=L,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(L,Q){return!0}}return k.\u0275fac=function(L){return new(L||k)(A.Y36(A.s_b),A.Y36(A.Rgc))},k.\u0275dir=A.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),k})();class Un{constructor(){this.$implicit=null,this.ngIf=null}}function so(k,K){if(K&&!K.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,A.AaK)(K)}'.`)}let Rs=(()=>{class k{constructor(L){this._locale=L}transform(L,Q,ce){if(!function Co(k){return!(null==k||""===k||k!=k)}(L))return null;ce=ce||this._locale;try{return function wa(k,K,L){return function ri(k,K,L,Q,ce,ze,lt=!1){let Vt="",Xn=!1;if(isFinite(k)){let Yn=function Ea(k){let Q,ce,ze,lt,Vt,K=Math.abs(k)+"",L=0;for((ce=K.indexOf("."))>-1&&(K=K.replace(".","")),(ze=K.search(/e/i))>0?(ce<0&&(ce=ze),ce+=+K.slice(ze+1),K=K.substring(0,ze)):ce<0&&(ce=K.length),ze=0;"0"===K.charAt(ze);ze++);if(ze===(Vt=K.length))Q=[0],ce=1;else{for(Vt--;"0"===K.charAt(Vt);)Vt--;for(ce-=ze,Q=[],lt=0;ze<=Vt;ze++,lt++)Q[lt]=Number(K.charAt(ze))}return ce>22&&(Q=Q.splice(0,21),L=ce-1,ce=1),{digits:Q,exponent:L,integerLen:ce}}(k);lt&&(Yn=function wo(k){if(0===k.digits[0])return k;const K=k.digits.length-k.integerLen;return k.exponent?k.exponent+=2:(0===K?k.digits.push(0,0):1===K&&k.digits.push(0),k.integerLen+=2),k}(Yn));let ur=K.minInt,jn=K.minFrac,Yr=K.maxFrac;if(ze){const Yi=ze.match(xn);if(null===Yi)throw new Error(`${ze} is not a valid digit info`);const Xs=Yi[1],Ra=Yi[3],xo=Yi[5];null!=Xs&&(ur=es(Xs)),null!=Ra&&(jn=es(Ra)),null!=xo?Yr=es(xo):null!=Ra&&jn>Yr&&(Yr=jn)}!function Zr(k,K,L){if(K>L)throw new Error(`The minimum number of digits after fraction (${K}) is higher than the maximum (${L}).`);let Q=k.digits,ce=Q.length-k.integerLen;const ze=Math.min(Math.max(K,ce),L);let lt=ze+k.integerLen,Vt=Q[lt];if(lt>0){Q.splice(Math.max(k.integerLen,lt));for(let jn=lt;jn<Q.length;jn++)Q[jn]=0}else{ce=Math.max(0,ce),k.integerLen=1,Q.length=Math.max(1,lt=ze+1),Q[0]=0;for(let jn=1;jn<lt;jn++)Q[jn]=0}if(Vt>=5)if(lt-1<0){for(let jn=0;jn>lt;jn--)Q.unshift(0),k.integerLen++;Q.unshift(1),k.integerLen++}else Q[lt-1]++;for(;ce<Math.max(0,ze);ce++)Q.push(0);let Xn=0!==ze;const Yn=K+k.integerLen,ur=Q.reduceRight(function(jn,Yr,rr,mi){return mi[rr]=(Yr+=jn)<10?Yr:Yr-10,Xn&&(0===mi[rr]&&rr>=Yn?mi.pop():Xn=!1),Yr>=10?1:0},0);ur&&(Q.unshift(ur),k.integerLen++)}(Yn,jn,Yr);let rr=Yn.digits,mi=Yn.integerLen;const _r=Yn.exponent;let bs=[];for(Xn=rr.every(Yi=>!Yi);mi<ur;mi++)rr.unshift(0);for(;mi<0;mi++)rr.unshift(0);mi>0?bs=rr.splice(mi,rr.length):(bs=rr,rr=[0]);const Js=[];for(rr.length>=K.lgSize&&Js.unshift(rr.splice(-K.lgSize,rr.length).join(""));rr.length>K.gSize;)Js.unshift(rr.splice(-K.gSize,rr.length).join(""));rr.length&&Js.unshift(rr.join("")),Vt=Js.join(nn(L,Q)),bs.length&&(Vt+=nn(L,ce)+bs.join("")),_r&&(Vt+=nn(L,Ue.Exponential)+"+"+_r)}else Vt=nn(L,Ue.Infinity);return Vt=k<0&&!Xn?K.negPre+Vt+K.negSuf:K.posPre+Vt+K.posSuf,Vt}(k,function mr(k,K="-"){const L={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Q=k.split(";"),ce=Q[0],ze=Q[1],lt=-1!==ce.indexOf(".")?ce.split("."):[ce.substring(0,ce.lastIndexOf("0")+1),ce.substring(ce.lastIndexOf("0")+1)],Vt=lt[0],Xn=lt[1]||"";L.posPre=Vt.substring(0,Vt.indexOf("#"));for(let ur=0;ur<Xn.length;ur++){const jn=Xn.charAt(ur);"0"===jn?L.minFrac=L.maxFrac=ur+1:"#"===jn?L.maxFrac=ur+1:L.posSuf+=jn}const Yn=Vt.split(",");if(L.gSize=Yn[1]?Yn[1].length:0,L.lgSize=Yn[2]||Yn[1]?(Yn[2]||Yn[1]).length:0,ze){const ur=ce.length-L.posPre.length-L.posSuf.length,jn=ze.indexOf("#");L.negPre=ze.substring(0,jn).replace(/'/g,""),L.negSuf=ze.slice(jn+ur).replace(/'/g,"")}else L.negPre=K+L.posPre,L.negSuf=L.posSuf;return L}(function En(k,K){return(0,A.cg1)(k)[A.wAp.NumberFormats][K]}(K,z.Decimal),nn(K,Ue.MinusSign)),K,Ue.Group,Ue.Decimal,L)}(function zs(k){if("string"==typeof k&&!isNaN(Number(k)-parseFloat(k)))return Number(k);if("number"!=typeof k)throw new Error(`${k} is not a number`);return k}(L),ce,Q)}catch(ze){throw function be(k,K){return new A.vHH(2100,!1)}()}}}return k.\u0275fac=function(L){return new(L||k)(A.Y36(A.soG,16))},k.\u0275pipe=A.Yjl({name:"number",type:k,pure:!0,standalone:!0}),k})();let sa=(()=>{class k{}return k.\u0275fac=function(L){return new(L||k)},k.\u0275mod=A.oAB({type:k}),k.\u0275inj=A.cJS({}),k})();const $a="browser";function Ia(k){return"server"===k}let Bo=(()=>{class k{}return k.\u0275prov=(0,A.Yz7)({token:k,providedIn:"root",factory:()=>new Ai((0,A.LFG)(Me),window)}),k})();class Ai{constructor(K,L){this.document=K,this.window=L,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(K){this.supportsScrolling()&&this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){if(!this.supportsScrolling())return;const L=function ao(k,K){const L=k.getElementById(K)||k.getElementsByName(K)[0];if(L)return L;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const Q=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let ce=Q.currentNode;for(;ce;){const ze=ce.shadowRoot;if(ze){const lt=ze.getElementById(K)||ze.querySelector(`[name="${K}"]`);if(lt)return lt}ce=Q.nextNode()}}return null}(this.document,K);L&&(this.scrollToElement(L),L.focus())}setHistoryScrollRestoration(K){if(this.supportScrollRestoration()){const L=this.window.history;L&&L.scrollRestoration&&(L.scrollRestoration=K)}}scrollToElement(K){const L=K.getBoundingClientRect(),Q=L.left+this.window.pageXOffset,ce=L.top+this.window.pageYOffset,ze=this.offset();this.window.scrollTo(Q-ze[0],ce-ze[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const K=Ws(this.window.history)||Ws(Object.getPrototypeOf(this.window.history));return!(!K||!K.writable&&!K.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ws(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class Ca{}},4650:(Kt,qe,Y)=>{Y.d(qe,{$8M:()=>ha,$WT:()=>Ln,$Z:()=>Jh,AFp:()=>Cu,ALo:()=>Op,AaK:()=>Fe,AsE:()=>Pg,BQk:()=>cp,CHM:()=>Da,CRH:()=>D0,CZH:()=>Fu,CqO:()=>Qm,D6c:()=>iC,EJc:()=>$E,EiD:()=>jf,EpF:()=>Ym,F4k:()=>df,FYo:()=>Lo,FiY:()=>ro,GfV:()=>Pi,Gpc:()=>ge,JOm:()=>ka,JVY:()=>Pe,JZr:()=>Ht,KtG:()=>co,L6k:()=>ot,LAX:()=>zt,LFG:()=>xt,Lbi:()=>Lu,Lck:()=>Mp,MAs:()=>Zc,MGl:()=>dp,MMx:()=>nm,NdJ:()=>bg,OlP:()=>ln,Oqu:()=>wh,P3R:()=>_c,PXZ:()=>Qe,Q6J:()=>wg,QGY:()=>Kc,Qsj:()=>yi,R0b:()=>al,RDi:()=>wl,Rgc:()=>Mf,SBq:()=>Rn,Sil:()=>HE,Suo:()=>Vp,TTD:()=>Bi,TgZ:()=>Eg,Tol:()=>r_,Udp:()=>yp,VKq:()=>gE,X6Q:()=>BI,XFs:()=>kt,Xpm:()=>ri,Xts:()=>Il,Y36:()=>Ic,YKP:()=>G_,YNc:()=>_h,Yjl:()=>es,Yz7:()=>nn,Z0I:()=>gr,ZZ4:()=>JE,_Bn:()=>Xr,_UZ:()=>cf,_Vd:()=>ut,_c5:()=>nC,_uU:()=>Cp,aQg:()=>XE,c2e:()=>Ph,cJS:()=>ti,cg1:()=>bp,d8E:()=>Rd,dDg:()=>t,dqk:()=>fn,eBb:()=>Ft,eFA:()=>li,ekj:()=>vp,eoX:()=>s,f3M:()=>Pt,g9A:()=>kf,h0i:()=>Dh,hGG:()=>rC,hij:()=>yf,iGM:()=>T0,ifc:()=>yn,ip1:()=>Fd,jDz:()=>Rp,kL8:()=>Hg,lG2:()=>Zr,lqb:()=>Zl,lri:()=>n,mCW:()=>tu,n5z:()=>Vu,oAB:()=>mr,oJD:()=>md,oxw:()=>_a,pB0:()=>$n,q3G:()=>us,q4F:()=>_m,qLn:()=>zi,qOj:()=>mg,qZA:()=>Ig,qzn:()=>Z,rWj:()=>e,sBO:()=>jI,s_b:()=>Sh,soG:()=>Rc,tb:()=>W0,tp0:()=>H,uIk:()=>af,vHH:()=>Ze,vpe:()=>bl,wAp:()=>Gn,xi3:()=>xf,xp6:()=>nh,ynx:()=>Cg,z2F:()=>tw,z3N:()=>S,zSh:()=>Hf,zs3:()=>wc});var A=Y(7579),y=Y(727),O=Y(9751),xe=Y(6451),Se=Y(3099);function Me(r){for(let i in r)if(r[i]===Me)return i;throw Error("Could not find renamed property on target object.")}function Le(r,i){for(const o in i)i.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=i[o])}function Fe(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Fe).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function Be(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const fe=Me({__forward_ref__:Me});function ge(r){return r.__forward_ref__=ge,r.toString=function(){return Fe(this())},r}function De(r){return mt(r)?r():r}function mt(r){return"function"==typeof r&&r.hasOwnProperty(fe)&&r.__forward_ref__===ge}function pt(r){return r&&!!r.\u0275providers}const Ht="https://g.co/ng/security#xss";class Ze extends Error{constructor(i,o){super(function ft(r,i){return`NG0${Math.abs(r)}${i?": "+i.trim():""}`}(i,o)),this.code=i}}function et(r){return"string"==typeof r?r:null==r?"":String(r)}function Tt(r,i){throw new Ze(-201,!1)}function jt(r,i){null==r&&function Ot(r,i,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function nn(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function ti(r){return{providers:r.providers||[],imports:r.imports||[]}}function Ur(r){return Zn(r,Er)||Zn(r,Tn)}function gr(r){return null!==Ur(r)}function Zn(r,i){return r.hasOwnProperty(i)?r[i]:null}function zr(r){return r&&(r.hasOwnProperty(lr)||r.hasOwnProperty(Ir))?r[lr]:null}const Er=Me({\u0275prov:Me}),lr=Me({\u0275inj:Me}),Tn=Me({ngInjectableDef:Me}),Ir=Me({ngInjectorDef:Me});var kt=(()=>((kt=kt||{})[kt.Default=0]="Default",kt[kt.Host=1]="Host",kt[kt.Self=2]="Self",kt[kt.SkipSelf=4]="SkipSelf",kt[kt.Optional=8]="Optional",kt))();let ls;function On(r){const i=ls;return ls=r,i}function hi(r,i,o){const u=Ur(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&kt.Optional?null:void 0!==i?i:void Tt(Fe(r))}const fn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),zn={},Wr="__NG_DI_FLAG__",Rr="ngTempTokenPath",qr=/\n/gm,bi="__source";let Pn;function pn(r){const i=Pn;return Pn=r,i}function Vr(r,i=kt.Default){if(void 0===Pn)throw new Ze(-203,!1);return null===Pn?hi(r,void 0,i):Pn.get(r,i&kt.Optional?null:void 0,i)}function xt(r,i=kt.Default){return(function Wi(){return ls}()||Vr)(De(r),i)}function Pt(r,i=kt.Default){return xt(r,vn(i))}function vn(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function qt(r){const i=[];for(let o=0;o<r.length;o++){const u=De(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Ze(900,!1);let d,_=kt.Default;for(let C=0;C<u.length;C++){const N=u[C],U=ni(N);"number"==typeof U?-1===U?d=N.token:_|=U:d=N}i.push(xt(d,_))}else i.push(xt(u))}return i}function Dn(r,i){return r[Wr]=i,r.prototype[Wr]=i,r}function ni(r){return r[Wr]}function Ce(r){return{toString:r}.toString()}var st=(()=>((st=st||{})[st.OnPush=0]="OnPush",st[st.Default=1]="Default",st))(),yn=(()=>{return(r=yn||(yn={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",yn;var r})();const xn={},ve=[],ye=Me({\u0275cmp:Me}),oe=Me({\u0275dir:Me}),Ae=Me({\u0275pipe:Me}),_t=Me({\u0275mod:Me}),Zt=Me({\u0275fac:Me}),Vn=Me({__NG_ELEMENT_ID__:Me});let fi=0;function ri(r){return Ce(()=>{const o=!0===r.standalone,u={},d={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===st.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||ve,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||yn.Emulated,id:"c"+fi++,styles:r.styles||ve,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},_=r.dependencies,C=r.features;return d.inputs=Ea(r.inputs,u),d.outputs=Ea(r.outputs),C&&C.forEach(N=>N(d)),d.directiveDefs=_?()=>("function"==typeof _?_():_).map(ds).filter(wa):null,d.pipeDefs=_?()=>("function"==typeof _?_():_).map(Br).filter(wa):null,d})}function ds(r){return sr(r)||Dr(r)}function wa(r){return null!==r}function mr(r){return Ce(()=>({type:r.type,bootstrap:r.bootstrap||ve,declarations:r.declarations||ve,imports:r.imports||ve,exports:r.exports||ve,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function Ea(r,i){if(null==r)return xn;const o={};for(const u in r)if(r.hasOwnProperty(u)){let d=r[u],_=d;Array.isArray(d)&&(_=d[1],d=d[0]),o[d]=u,i&&(i[d]=_)}return o}const Zr=ri;function es(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function sr(r){return r[ye]||null}function Dr(r){return r[oe]||null}function Br(r){return r[Ae]||null}function Ln(r){const i=sr(r)||Dr(r)||Br(r);return null!==i&&i.standalone}function br(r,i){const o=r[_t]||null;if(!o&&!0===i)throw new Error(`Type ${Fe(r)} does not have '\u0275mod' property.`);return o}function di(r){return Array.isArray(r)&&"object"==typeof r[1]}function Kr(r){return Array.isArray(r)&&!0===r[1]}function Di(r){return 0!=(4&r.flags)}function nr(r){return r.componentOffset>-1}function Bn(r){return 1==(1&r.flags)}function or(r){return null!==r.template}function ou(r){return 0!=(256&r[2])}function rs(r,i){return r.hasOwnProperty(Zt)?r[Zt]:null}class Ns{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Bi(){return Bo}function Bo(r){return r.type.prototype.ngOnChanges&&(r.setInput=Ws),Ai}function Ai(){const r=qs(this),i=r?.current;if(i){const o=r.previous;if(o===xn)r.previous=i;else for(let u in i)o[u]=i[u];r.current=null,this.ngOnChanges(i)}}function Ws(r,i,o,u){const d=this.declaredInputs[o],_=qs(r)||function Ca(r,i){return r[ao]=i}(r,{previous:xn,current:null}),C=_.current||(_.current={}),N=_.previous,U=N[d];C[d]=new Ns(U&&U.currentValue,i,N===xn),r[u]=i}Bi.ngInherit=!0;const ao="__ngSimpleChanges__";function qs(r){return r[ao]||null}function xi(r){for(;Array.isArray(r);)r=r[0];return r}function oa(r,i){return xi(i[r])}function ji(r,i){return xi(i[r.index])}function ba(r,i){return r.data[i]}function Ta(r,i){return r[i]}function Mi(r,i){const o=i[r];return di(o)?o:o[0]}function pi(r){return 64==(64&r[2])}function ki(r,i){return null==i?null:r[i]}function kn(r){r[18]=0}function $o(r,i){r[5]+=i;let o=r,u=r[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const An={lFrame:Su(null),bindingsEnabled:!0};function Ha(){return An.bindingsEnabled}function nt(){return An.lFrame.lView}function ar(){return An.lFrame.tView}function Da(r){return An.lFrame.contextLView=r,r[8]}function co(r){return An.lFrame.contextLView=null,r}function $i(){let r=Is();for(;null!==r&&64===r.type;)r=r.parent;return r}function Is(){return An.lFrame.currentTNode}function ms(r,i){const o=An.lFrame;o.currentTNode=r,o.isParent=i}function Ga(){return An.lFrame.isParent}function zo(){An.lFrame.isParent=!1}function gi(){const r=An.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}function Os(){return An.lFrame.bindingIndex++}function Ys(r){const i=An.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,o}function ks(r,i){const o=An.lFrame;o.bindingIndex=o.bindingRootIndex=r,Fs(i)}function Fs(r){An.lFrame.currentDirectiveIndex=r}function Yt(r){const i=An.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}function Ls(){return An.lFrame.currentQueryIndex}function Fn(r){An.lFrame.currentQueryIndex=r}function So(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function lu(r,i,o){if(o&kt.SkipSelf){let d=i,_=r;for(;!(d=d.parent,null!==d||o&kt.Host||(d=So(_),null===d||(_=_[15],10&d.type))););if(null===d)return!1;i=d,r=_}const u=An.lFrame=Du();return u.currentTNode=i,u.lView=r,!0}function wi(r){const i=Du(),o=r[1];An.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Du(){const r=An.lFrame,i=null===r?null:r.child;return null===i?Su(r):i}function Su(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Ao(){const r=An.lFrame;return An.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Zo=Ao;function Wa(){const r=Ao();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Kn(){return An.lFrame.selectedIndex}function Hi(r){An.lFrame.selectedIndex=r}function jr(){const r=An.lFrame;return ba(r.tView,r.selectedIndex)}function ho(r,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const _=r.data[o].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:N,ngAfterViewInit:U,ngAfterViewChecked:q,ngOnDestroy:ne}=_;C&&(r.contentHooks||(r.contentHooks=[])).push(-o,C),N&&((r.contentHooks||(r.contentHooks=[])).push(o,N),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,N)),U&&(r.viewHooks||(r.viewHooks=[])).push(-o,U),q&&((r.viewHooks||(r.viewHooks=[])).push(o,q),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,q)),null!=ne&&(r.destroyHooks||(r.destroyHooks=[])).push(o,ne)}}function k(r,i,o){Q(r,i,3,o)}function K(r,i,o,u){(3&r[2])===o&&Q(r,i,o,u)}function L(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function Q(r,i,o,u){const _=u??-1,C=i.length-1;let N=0;for(let U=void 0!==u?65535&r[18]:0;U<C;U++)if("number"==typeof i[U+1]){if(N=i[U],null!=u&&N>=u)break}else i[U]<0&&(r[18]+=65536),(N<_||-1==_)&&(ce(r,o,i,U),r[18]=(4294901760&r[18])+U+2),U++}function ce(r,i,o,u){const d=o[u]<0,_=o[u+1],N=r[d?-o[u]:o[u]];if(d){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{_.call(N)}finally{}}}else try{_.call(N)}finally{}}class lt{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function _r(r,i,o){let u=0;for(;u<o.length;){const d=o[u];if("number"==typeof d){if(0!==d)break;u++;const _=o[u++],C=o[u++],N=o[u++];r.setAttribute(i,C,N,_)}else{const _=d,C=o[++u];Js(_)?r.setProperty(i,_,C):r.setAttribute(i,_,C),u++}}return u}function bs(r){return 3===r||4===r||6===r}function Js(r){return 64===r.charCodeAt(0)}function Yi(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const d=i[u];"number"==typeof d?o=d:0===o||Xs(r,o,d,null,-1===o||2===o?i[++u]:null)}}return r}function Xs(r,i,o,u,d){let _=0,C=r.length;if(-1===i)C=-1;else for(;_<r.length;){const N=r[_++];if("number"==typeof N){if(N===i){C=-1;break}if(N>i){C=_-1;break}}}for(;_<r.length;){const N=r[_];if("number"==typeof N)break;if(N===o){if(null===u)return void(null!==d&&(r[_+1]=d));if(u===r[_+1])return void(r[_+2]=d)}_++,null!==u&&_++,null!==d&&_++}-1!==C&&(r.splice(C,0,i),_=C+1),r.splice(_++,0,o),null!==u&&r.splice(_++,0,u),null!==d&&r.splice(_++,0,d)}function Ra(r){return-1!==r}function xo(r){return 32767&r}function eo(r,i){let o=function Uu(r){return r>>16}(r),u=i;for(;o>0;)u=u[15],o--;return u}let Mo=!0;function qa(r){const i=Mo;return Mo=r,i}let xu=0;const Ei={};function Qo(r,i){const o=la(r,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(r.injectorIndex=i.length,Jo(u.data,r),Jo(i,null),Jo(u.blueprint,null));const d=cu(r,i),_=r.injectorIndex;if(Ra(d)){const C=xo(d),N=eo(d,i),U=N[1].data;for(let q=0;q<8;q++)i[_+q]=N[C+q]|U[C+q]}return i[_+8]=d,_}function Jo(r,i){r.push(0,0,0,0,0,0,0,0,i)}function la(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function cu(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,d=i;for(;null!==d;){if(u=Ya(d),null===u)return-1;if(o++,d=d[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function ca(r,i,o){!function ua(r,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Vn)&&(u=o[Vn]),null==u&&(u=o[Vn]=xu++);const d=255&u;i.data[r+(d>>5)]|=1<<d}(r,i,o)}function Pa(r,i,o){if(o&kt.Optional||void 0!==r)return r;Tt()}function du(r,i,o,u){if(o&kt.Optional&&void 0===u&&(u=null),!(o&(kt.Self|kt.Host))){const d=r[9],_=On(void 0);try{return d?d.get(i,u,o&kt.Optional):hi(i,u,o&kt.Optional)}finally{On(_)}}return Pa(u,0,o)}function Ku(r,i,o,u=kt.Default,d){if(null!==r){if(1024&i[2]){const C=function Ka(r,i,o,u,d){let _=r,C=i;for(;null!==_&&null!==C&&1024&C[2]&&!(256&C[2]);){const N=to(_,C,o,u|kt.Self,Ei);if(N!==Ei)return N;let U=_.parent;if(!U){const q=C[21];if(q){const ne=q.get(o,Ei,u);if(ne!==Ei)return ne}U=Ya(C),C=C[15]}_=U}return d}(r,i,o,u,Ei);if(C!==Ei)return C}const _=to(r,i,o,u,Ei);if(_!==Ei)return _}return du(i,o,u,d)}function to(r,i,o,u,d){const _=function da(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(Vn)?r[Vn]:void 0;return"number"==typeof i?i>=0?255&i:hu:i}(o);if("function"==typeof _){if(!lu(i,r,u))return u&kt.Host?Pa(d,0,u):du(i,o,u,d);try{const C=_(u);if(null!=C||u&kt.Optional)return C;Tt()}finally{Zo()}}else if("number"==typeof _){let C=null,N=la(r,i),U=-1,q=u&kt.Host?i[16][6]:null;for((-1===N||u&kt.SkipSelf)&&(U=-1===N?cu(r,i):i[N+8],-1!==U&&kr(u,!1)?(C=i[1],N=xo(U),i=eo(U,i)):N=-1);-1!==N;){const ne=i[1];if(Oa(_,N,ne.data)){const ae=Za(N,i,o,C,u,q);if(ae!==Ei)return ae}U=i[N+8],-1!==U&&kr(u,i[1].data[N+8]===q)&&Oa(_,N,i)?(C=ne,N=xo(U),i=eo(U,i)):N=-1}}return d}function Za(r,i,o,u,d,_){const C=i[1],N=C.data[r+8],ne=Mu(N,C,o,null==u?nr(N)&&Mo:u!=C&&0!=(3&N.type),d&kt.Host&&_===N);return null!==ne?Nr(i,C,ne,N):Ei}function Mu(r,i,o,u,d){const _=r.providerIndexes,C=i.data,N=1048575&_,U=r.directiveStart,ne=_>>20,Ne=d?N+ne:r.directiveEnd;for(let He=u?N:N+ne;He<Ne;He++){const vt=C[He];if(He<U&&o===vt||He>=U&&vt.type===o)return He}if(d){const He=C[U];if(He&&or(He)&&He.type===o)return U}return null}function Nr(r,i,o,u){let d=r[o];const _=i.data;if(function Vt(r){return r instanceof lt}(d)){const C=d;C.resolving&&function gt(r,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${r}`:"";throw new Ze(-200,`Circular dependency in DI detected for ${r}${o}`)}(function yt(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():et(r)}(_[o]));const N=qa(C.canSeeViewProviders);C.resolving=!0;const U=C.injectImpl?On(C.injectImpl):null;lu(r,u,kt.Default);try{d=r[o]=C.factory(void 0,_,r,u),i.firstCreatePass&&o>=u.directiveStart&&function Ma(r,i,o){const{ngOnChanges:u,ngOnInit:d,ngDoCheck:_}=i.type.prototype;if(u){const C=Bo(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,C),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,C)}d&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,d),_&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,_),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,_))}(o,_[o],i)}finally{null!==U&&On(U),qa(N),C.resolving=!1,Zo()}}return d}function Oa(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function kr(r,i){return!(r&kt.Self||r&kt.Host&&i)}class Pr{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return Ku(this._tNode,this._lView,i,vn(u),o)}}function hu(){return new Pr($i(),nt())}function Vu(r){return Ce(()=>{const i=r.prototype.constructor,o=i[Zt]||ul(i),u=Object.prototype;let d=Object.getPrototypeOf(r.prototype).constructor;for(;d&&d!==u;){const _=d[Zt]||ul(d);if(_&&_!==o)return _;d=Object.getPrototypeOf(d)}return _=>new _})}function ul(r){return mt(r)?()=>{const i=ul(De(r));return i&&i()}:rs(r)}function Ya(r){const i=r[1],o=i.type;return 2===o?i.declTNode:1===o?r[6]:null}function ha(r){return function Na(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const u=o.length;let d=0;for(;d<u;){const _=o[d];if(bs(_))break;if(0===_)d+=2;else if("number"==typeof _)for(d++;d<u&&"string"==typeof o[d];)d++;else{if(_===i)return o[d+1];d+=2}}}return null}($i(),r)}const R="__parameters__";function le(r,i,o){return Ce(()=>{const u=function j(r){return function(...o){if(r){const u=r(...o);for(const d in u)this[d]=u[d]}}}(i);function d(..._){if(this instanceof d)return u.apply(this,_),this;const C=new d(..._);return N.annotation=C,N;function N(U,q,ne){const ae=U.hasOwnProperty(R)?U[R]:Object.defineProperty(U,R,{value:[]})[R];for(;ae.length<=ne;)ae.push(null);return(ae[ne]=ae[ne]||[]).push(C),U}}return o&&(d.prototype=Object.create(o.prototype)),d.prototype.ngMetadataName=r,d.annotationCls=d,d})}class ln{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=nn({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function no(r,i){r.forEach(o=>Array.isArray(o)?no(o,i):i(o))}function No(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function Po(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function b(r,i,o){let u=E(r,i);return u>=0?r[1|u]=o:(u=~u,function $u(r,i,o,u){let d=r.length;if(d==i)r.push(o,u);else if(1===d)r.push(u,r[0]),r[0]=o;else{for(d--,r.push(r[d-1],r[d]);d>i;)r[d]=r[d-2],d--;r[i]=o,r[i+1]=u}}(r,u,i,o)),u}function x(r,i){const o=E(r,i);if(o>=0)return r[1|o]}function E(r,i){return function $(r,i,o){let u=0,d=r.length>>o;for(;d!==u;){const _=u+(d-u>>1),C=r[_<<o];if(i===C)return _<<o;C>i?d=_:u=_+1}return~(d<<o)}(r,i,1)}const ro=Dn(le("Optional"),8),H=Dn(le("SkipSelf"),4);var ka=(()=>((ka=ka||{})[ka.Important=1]="Important",ka[ka.DashCase=2]="DashCase",ka))();const na=new Map;let Lh=0;const Ji="__ngContext__";function Oo(r,i){di(i)?(r[Ji]=i[20],function cl(r){na.set(r[20],r)}(i)):r[Ji]=i}function dl(r,i){return undefined(r,i)}function Ju(r){const i=r[3];return Kr(i)?i[3]:i}function Xu(r){return hl(r[13])}function Hd(r){return hl(r[4])}function hl(r){for(;null!==r&&!Kr(r);)r=r[4];return r}function ko(r,i,o,u,d){if(null!=u){let _,C=!1;Kr(u)?_=u:di(u)&&(C=!0,u=u[0]);const N=xi(u);0===r&&null!==o?null==d?Vl(i,o,N):gl(i,o,N,d||null,!0):1===r&&null!==o?gl(i,o,N,d||null,!0):2===r?function _i(r,i,o){const u=ml(r,i);u&&function zd(r,i,o,u){r.removeChild(i,o,u)}(r,u,i,o)}(i,N,C):3===r&&i.destroyNode(N),null!=_&&function Uc(r,i,o,u,d){const _=o[7];_!==xi(o)&&ko(i,r,u,_,d);for(let N=10;N<o.length;N++){const U=o[N];jl(U[1],U,r,i,u,_)}}(i,r,_,o,d)}}function Fl(r,i,o){return r.createElement(i,o)}function pl(r,i){const o=r[9],u=o.indexOf(i),d=i[3];512&i[2]&&(i[2]&=-513,$o(d,-1)),o.splice(u,1)}function dc(r,i){if(r.length<=10)return;const o=10+i,u=r[o];if(u){const d=u[17];null!==d&&d!==r&&pl(d,u),i>0&&(r[o-1][4]=u[4]);const _=Po(r,10+i);!function Ll(r,i){jl(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const C=_[19];null!==C&&C.detachView(_[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Gd(r,i){if(!(128&i[2])){const o=i[11];o.destroyNode&&jl(r,i,o,3,null,null),function Fc(r){let i=r[13];if(!i)return hc(r[1],r);for(;i;){let o=null;if(di(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==r;)di(i)&&hc(i[1],i),i=i[3];null===i&&(i=r),di(i)&&hc(i[1],i),o=i&&i[4]}i=o}}(i)}}function hc(r,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function jh(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const d=i[o[u]];if(!(d instanceof lt)){const _=o[u+1];if(Array.isArray(_))for(let C=0;C<_.length;C+=2){const N=d[_[C]],U=_[C+1];try{U.call(N)}finally{}}else try{_.call(d)}finally{}}}}(r,i),function ra(r,i){const o=r.cleanup,u=i[7];let d=-1;if(null!==o)for(let _=0;_<o.length-1;_+=2)if("string"==typeof o[_]){const C=o[_+3];C>=0?u[d=C]():u[d=-C].unsubscribe(),_+=2}else{const C=u[d=o[_+1]];o[_].call(C)}if(null!==u){for(let _=d+1;_<u.length;_++)(0,u[_])();i[7]=null}}(r,i),1===i[1].type&&i[11].destroy();const o=i[17];if(null!==o&&Kr(i[3])){o!==i[3]&&pl(o,i);const u=i[19];null!==u&&u.detachView(r)}!function ma(r){na.delete(r[20])}(i)}}function hd(r,i,o){return function Ul(r,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];{const{componentOffset:d}=u;if(d>-1){const{encapsulation:_}=r.data[u.directiveStart+d];if(_===yn.None||_===yn.Emulated)return null}return ji(u,o)}}(r,i.parent,o)}function gl(r,i,o,u,d){r.insertBefore(i,o,u,d)}function Vl(r,i,o){r.appendChild(i,o)}function fc(r,i,o,u,d){null!==u?gl(r,i,o,u,d):Vl(r,i,o)}function ml(r,i){return r.parentNode(i)}let pc,Zd,gc,Ru=function La(r,i,o){return 40&r.type?ji(r,o):null};function Fo(r,i,o,u){const d=hd(r,u,i),_=i[11],N=function yl(r,i,o){return Ru(r,i,o)}(u.parent||i[6],u,i);if(null!=d)if(Array.isArray(o))for(let U=0;U<o.length;U++)fc(_,d,o[U],N,!1);else fc(_,d,o,N,!1)}function Bl(r,i){if(null!==i){const o=i.type;if(3&o)return ji(i,r);if(4&o)return Dt(-1,r[i.index]);if(8&o){const u=i.child;if(null!==u)return Bl(r,u);{const d=r[i.index];return Kr(d)?Dt(-1,d):xi(d)}}if(32&o)return dl(i,r)()||xi(r[i.index]);{const u=$h(r,i);return null!==u?Array.isArray(u)?u[0]:Bl(Ju(r[16]),u):Bl(r,i.next)}}return null}function $h(r,i){return null!==i?r[16][6].projection[i.projection]:null}function Dt(r,i){const o=10+r+1;if(o<i.length){const u=i[o],d=u[1].firstChild;if(null!==d)return Bl(u,d)}return i[7]}function Hu(r,i,o,u,d,_,C){for(;null!=o;){const N=u[o.index],U=o.type;if(C&&0===i&&(N&&Oo(xi(N),u),o.flags|=2),32!=(32&o.flags))if(8&U)Hu(r,i,o.child,u,d,_,!1),ko(i,r,d,N,_);else if(32&U){const q=dl(o,u);let ne;for(;ne=q();)ko(i,r,d,ne,_);ko(i,r,d,N,_)}else 16&U?Cn(r,i,u,o,d,_):ko(i,r,d,N,_);o=C?o.projectionNext:o.next}}function jl(r,i,o,u,d,_){Hu(o,u,r.firstChild,i,d,_,!1)}function Cn(r,i,o,u,d,_){const C=o[16],U=C[6].projection[u.projection];if(Array.isArray(U))for(let q=0;q<U.length;q++)ko(i,r,d,U[q],_);else Hu(r,i,U,C[3],d,_,!0)}function Et(r,i,o){""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o)}function ys(r,i,o){const{mergedAttrs:u,classes:d,styles:_}=o;null!==u&&_r(r,i,u),null!==d&&Et(r,i,d),null!==_&&function Ye(r,i,o){r.setAttribute(i,"style",o)}(r,i,_)}function vl(r){return function fd(){if(void 0===pc&&(pc=null,fn.trustedTypes))try{pc=fn.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return pc}()?.createHTML(r)||r}function wl(r){Zd=r}function qn(){if(void 0===gc&&(gc=null,fn.trustedTypes))try{gc=fn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return gc}function Hl(r){return qn()?.createHTML(r)||r}function Gi(r){return qn()?.createScriptURL(r)||r}class bn{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ht})`}}class Bc extends bn{getTypeName(){return"HTML"}}class Hr extends bn{getTypeName(){return"Style"}}class I extends bn{getTypeName(){return"Script"}}class p extends bn{getTypeName(){return"URL"}}class g extends bn{getTypeName(){return"ResourceURL"}}function S(r){return r instanceof bn?r.changingThisBreaksApplicationSecurity:r}function Z(r,i){const o=function ie(r){return r instanceof bn&&r.getTypeName()||null}(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${Ht})`)}return o===i}function Pe(r){return new Bc(r)}function ot(r){return new Hr(r)}function Ft(r){return new I(r)}function zt(r){return new p(r)}function $n(r){return new g(r)}class si{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(vl(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class eu{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=vl(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=vl(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let d=o.length-1;0<d;d--){const C=o.item(d).name;("xmlns:ns1"===C||0===C.indexOf("ns1:"))&&i.removeAttribute(C)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const Kd=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function tu(r){return(r=String(r)).match(Kd)?r:"unsafe:"+r}function vu(r){const i={};for(const o of r.split(","))i[o]=!0;return i}function We(...r){const i={};for(const o of r)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const El=vu("area,br,col,hr,img,wbr"),nu=vu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Yd=vu("rp,rt"),Nu=We(El,We(nu,vu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),We(Yd,vu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),We(Yd,nu)),gd=vu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Kp=We(gd,vu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),vu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Pu=vu("script,style,template");class pm{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let d=this.checkClobberedElement(o,o.nextSibling);if(d){o=d;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!Nu.hasOwnProperty(o))return this.sanitizedSomething=!0,!Pu.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let d=0;d<u.length;d++){const _=u.item(d),C=_.name,N=C.toLowerCase();if(!Kp.hasOwnProperty(N)){this.sanitizedSomething=!0;continue}let U=_.value;gd[N]&&(U=tu(U)),this.buf.push(" ",C,'="',gm(U),'"')}return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();Nu.hasOwnProperty(o)&&!El.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(gm(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const Bf=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,my=/([^\#-~ |!])/g;function gm(r){return r.replace(/&/g,"&amp;").replace(Bf,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(my,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let nl;function jf(r,i){let o=null;try{nl=nl||function Mn(r){const i=new eu(r);return function mc(){try{return!!(new window.DOMParser).parseFromString(vl(""),"text/html")}catch{return!1}}()?new si(i):i}(r);let u=i?String(i):"";o=nl.getInertBodyElement(u);let d=5,_=u;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,u=_,_=o.innerHTML,o=nl.getInertBodyElement(u)}while(u!==_);return vl((new pm).sanitizeChildren(Gl(o)||o))}finally{if(o){const u=Gl(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Gl(r){return"content"in r&&function $f(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var us=(()=>((us=us||{})[us.NONE=0]="NONE",us[us.HTML=1]="HTML",us[us.STYLE=2]="STYLE",us[us.SCRIPT=3]="SCRIPT",us[us.URL=4]="URL",us[us.RESOURCE_URL=5]="RESOURCE_URL",us))();function md(r){const i=Ua();return i?Hl(i.sanitize(us.HTML,r)||""):Z(r,"HTML")?Hl(S(r)):jf(function $l(){return void 0!==Zd?Zd:typeof document<"u"?document:void 0}(),et(r))}function Qp(r){const i=Ua();return i?i.sanitize(us.URL,r)||"":Z(r,"URL")?S(r):tu(et(r))}function zl(r){const i=Ua();if(i)return Gi(i.sanitize(us.RESOURCE_URL,r)||"");if(Z(r,"ResourceURL"))return Gi(S(r));throw new Ze(904,!1)}function _c(r,i,o){return function Bs(r,i){return"src"===i&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===i&&("base"===r||"link"===r)?zl:Qp}(i,o)(r)}function Ua(){const r=nt();return r&&r[12]}const Il=new ln("ENVIRONMENT_INITIALIZER"),Qd=new ln("INJECTOR",-1),yc=new ln("INJECTOR_DEF_TYPES");class rl{get(i,o=zn){if(o===zn){const u=new Error(`NullInjectorError: No provider for ${Fe(i)}!`);throw u.name="NullInjectorError",u}return o}}function Wl(...r){return{\u0275providers:Hh(0,r),\u0275fromNgModule:!0}}function Hh(r,...i){const o=[],u=new Set;let d;return no(i,_=>{const C=_;ql(C,o,[],u)&&(d||(d=[]),d.push(C))}),void 0!==d&&vc(d,o),o}function vc(r,i){for(let o=0;o<r.length;o++){const{providers:d}=r[o];yd(d,_=>{i.push(_)})}}function ql(r,i,o,u){if(!(r=De(r)))return!1;let d=null,_=zr(r);const C=!_&&sr(r);if(_||C){if(C&&!C.standalone)return!1;d=r}else{const U=r.ngModule;if(_=zr(U),!_)return!1;d=U}const N=u.has(d);if(C){if(N)return!1;if(u.add(d),C.dependencies){const U="function"==typeof C.dependencies?C.dependencies():C.dependencies;for(const q of U)ql(q,i,o,u)}}else{if(!_)return!1;{if(null!=_.imports&&!N){let q;u.add(d);try{no(_.imports,ne=>{ql(ne,i,o,u)&&(q||(q=[]),q.push(ne))})}finally{}void 0!==q&&vc(q,i)}if(!N){const q=rs(d)||(()=>new d);i.push({provide:d,useFactory:q,deps:ve},{provide:yc,useValue:d,multi:!0},{provide:Il,useValue:()=>xt(d),multi:!0})}const U=_.providers;null==U||N||yd(U,ne=>{i.push(ne)})}}return d!==r&&void 0!==r.providers}function yd(r,i){for(let o of r)pt(o)&&(o=o.\u0275providers),Array.isArray(o)?yd(o,i):i(o)}const Xd=Me({provide:String,useValue:Me});function Gh(r){return null!==r&&"object"==typeof r&&Xd in r}function zu(r){return"function"==typeof r}const Hf=new ln("Set Injector scope."),Wh={},Gf={};let qh;function il(){return void 0===qh&&(qh=new rl),qh}class Zl{}class zf extends Zl{get destroyed(){return this._destroyed}constructor(i,o,u,d){super(),this.parent=o,this.source=u,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,T(i,C=>this.processProvider(C)),this.records.set(Qd,h(void 0,this)),d.has("environment")&&this.records.set(Zl,h(void 0,this));const _=this.records.get(Hf);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(yc.multi,ve,kt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=pn(this),u=On(void 0);try{return i()}finally{pn(o),On(u)}}get(i,o=zn,u=kt.Default){this.assertNotDestroyed(),u=vn(u);const d=pn(this),_=On(void 0);try{if(!(u&kt.SkipSelf)){let N=this.records.get(i);if(void 0===N){const U=function m(r){return"function"==typeof r||"object"==typeof r&&r instanceof ln}(i)&&Ur(i);N=U&&this.injectableDefInScope(U)?h(Zh(i),Wh):null,this.records.set(i,N)}if(null!=N)return this.hydrate(i,N)}return(u&kt.Self?il():this.parent).get(i,o=u&kt.Optional&&o===zn?null:o)}catch(C){if("NullInjectorError"===C.name){if((C[Rr]=C[Rr]||[]).unshift(Fe(i)),d)throw C;return function pe(r,i,o,u){const d=r[Rr];throw i[bi]&&d.unshift(i[bi]),r.message=function he(r,i,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let d=Fe(i);if(Array.isArray(i))d=i.map(Fe).join(" -> ");else if("object"==typeof i){let _=[];for(let C in i)if(i.hasOwnProperty(C)){let N=i[C];_.push(C+":"+("string"==typeof N?JSON.stringify(N):Fe(N)))}d=`{${_.join(", ")}}`}return`${o}${u?"("+u+")":""}[${d}]: ${r.replace(qr,"\n  ")}`}("\n"+r.message,d,o,u),r.ngTokenPath=d,r[Rr]=null,r}(C,i,"R3InjectorError",this.source)}throw C}finally{On(_),pn(d)}}resolveInjectorInitializers(){const i=pn(this),o=On(void 0);try{const u=this.get(Il.multi,ve,kt.Self);for(const d of u)d()}finally{pn(i),On(o)}}toString(){const i=[],o=this.records;for(const u of o.keys())i.push(Fe(u));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ze(205,!1)}processProvider(i){let o=zu(i=De(i))?i:De(i&&i.provide);const u=function Ci(r){return Gh(r)?h(void 0,r.useValue):h($c(r),Wh)}(i);if(zu(i)||!0!==i.multi)this.records.get(o);else{let d=this.records.get(o);d||(d=h(void 0,Wh,!0),d.factory=()=>qt(d.multi),this.records.set(o,d)),o=i,d.multi.push(i)}this.records.set(o,u)}hydrate(i,o){return o.value===Wh&&(o.value=Gf,o.value=o.factory()),"object"==typeof o.value&&o.value&&function c(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=De(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Zh(r){const i=Ur(r),o=null!==i?i.factory:rs(r);if(null!==o)return o;if(r instanceof ln)throw new Ze(204,!1);if(r instanceof Function)return function Gr(r){const i=r.length;if(i>0)throw function pa(r,i){const o=[];for(let u=0;u<r;u++)o.push(i);return o}(i,"?"),new Ze(204,!1);const o=function Vi(r){const i=r&&(r[Er]||r[Tn]);if(i){const o=function Xt(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Ze(204,!1)}function $c(r,i,o){let u;if(zu(r)){const d=De(r);return rs(d)||Zh(d)}if(Gh(r))u=()=>De(r.useValue);else if(function vd(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...qt(r.deps||[]));else if(function zh(r){return!(!r||!r.useExisting)}(r))u=()=>xt(De(r.useExisting));else{const d=De(r&&(r.useClass||r.provide));if(!function l(r){return!!r.deps}(r))return rs(d)||Zh(d);u=()=>new d(...qt(r.deps))}return u}function h(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function T(r,i){for(const o of r)Array.isArray(o)?T(o,i):o&&pt(o)?T(o.\u0275providers,i):i(o)}class F{}class G{}class rt{resolveComponentFactory(i){throw function te(r){const i=Error(`No component factory found for ${Fe(r)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=r,i}(i)}}let ut=(()=>{class r{}return r.NULL=new rt,r})();function It(){return on($i(),nt())}function on(r,i){return new Rn(ji(r,i))}let Rn=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=It,r})();function Or(r){return r instanceof Rn?r.nativeElement:r}class Lo{}let yi=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function Wu(){const r=nt(),o=Mi($i().index,r);return(di(o)?o:r)[11]}(),r})(),js=(()=>{class r{}return r.\u0275prov=nn({token:r,providedIn:"root",factory:()=>null}),r})();class Pi{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const _m=new Pi("15.1.2"),wd={};function eg(r){return r.ngOriginalError}class zi{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&eg(i);for(;o&&eg(o);)o=eg(o);return o||null}}function ru(r){return r instanceof Function?r():r}function Ed(r,i,o){let u=r.length;for(;;){const d=r.indexOf(i,o);if(-1===d)return d;if(0===d||r.charCodeAt(d-1)<=32){const _=i.length;if(d+_===u||r.charCodeAt(d+_)<=32)return d}o=d+1}}const Eu="ng-template";function vm(r,i,o){let u=0;for(;u<r.length;){let d=r[u++];if(o&&"class"===d){if(d=r[u],-1!==Ed(d.toLowerCase(),i,0))return!0}else if(1===d){for(;u<r.length&&"string"==typeof(d=r[u++]);)if(d.toLowerCase()===i)return!0;return!1}}return!1}function Zf(r){return 4===r.type&&r.value!==Eu}function Kf(r,i,o){return i===(4!==r.type||o?r.value:Eu)}function Ey(r,i,o){let u=4;const d=r.attrs||[],_=function aw(r){for(let i=0;i<r.length;i++)if(bs(r[i]))return i;return r.length}(d);let C=!1;for(let N=0;N<i.length;N++){const U=i[N];if("number"!=typeof U){if(!C)if(4&u){if(u=2|1&u,""!==U&&!Kf(r,U,o)||""===U&&1===i.length){if(sl(u))return!1;C=!0}}else{const q=8&u?U:i[++N];if(8&u&&null!==r.attrs){if(!vm(r.attrs,q,o)){if(sl(u))return!1;C=!0}continue}const ae=Yf(8&u?"class":U,d,Zf(r),o);if(-1===ae){if(sl(u))return!1;C=!0;continue}if(""!==q){let Ne;Ne=ae>_?"":d[ae+1].toLowerCase();const He=8&u?Ne:null;if(He&&-1!==Ed(He,q,0)||2&u&&q!==Ne){if(sl(u))return!1;C=!0}}}}else{if(!C&&!sl(u)&&!sl(U))return!1;if(C&&sl(U))continue;C=!1,u=U|1&u}}return sl(u)||C}function sl(r){return 0==(1&r)}function Yf(r,i,o,u){if(null===i)return-1;let d=0;if(u||!o){let _=!1;for(;d<i.length;){const C=i[d];if(C===r)return d;if(3===C||6===C)_=!0;else{if(1===C||2===C){let N=i[++d];for(;"string"==typeof N;)N=i[++d];continue}if(4===C)break;if(0===C){d+=4;continue}}d+=_?1:2}return-1}return function Cy(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,r)}function wm(r,i,o=!1){for(let u=0;u<i.length;u++)if(Ey(r,i[u],o))return!0;return!1}function Em(r,i){return r?":not("+i.trim()+")":i}function rg(r){let i=r[0],o=1,u=2,d="",_=!1;for(;o<r.length;){let C=r[o];if("string"==typeof C)if(2&u){const N=r[++o];d+="["+C+(N.length>0?'="'+N+'"':"")+"]"}else 8&u?d+="."+C:4&u&&(d+=" "+C);else""!==d&&!sl(C)&&(i+=Em(_,d),d=""),u=C,_=_||!sl(u);o++}return""!==d&&(i+=Em(_,d)),i}const pr={};function nh(r){Id(ar(),nt(),Kn()+r,!1)}function Id(r,i,o,u){if(!u)if(3==(3&i[2])){const _=r.preOrderCheckHooks;null!==_&&k(i,_,o)}else{const _=r.preOrderHooks;null!==_&&K(i,_,0,o)}Hi(o)}function Ds(r,i=null,o=null,u){const d=Jf(r,i,o,u);return d.resolveInjectorInitializers(),d}function Jf(r,i=null,o=null,u,d=new Set){const _=[o||ve,Wl(r)];return u=u||("object"==typeof r?void 0:Fe(r)),new zf(_,i||il(),u||null,d)}let wc=(()=>{class r{static create(o,u){if(Array.isArray(o))return Ds({name:""},u,o,"");{const d=o.name??"";return Ds({name:d},o.parent,o.providers,d)}}}return r.THROW_IF_NOT_FOUND=zn,r.NULL=new rl,r.\u0275prov=nn({token:r,providedIn:"any",factory:()=>xt(Qd)}),r.__NG_ELEMENT_ID__=-1,r})();function Ic(r,i=kt.Default){const o=nt();return null===o?xt(r,i):Ku($i(),o,De(r),i)}function Jh(){throw new Error("invalid")}function Rm(r,i){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const _=o[u+1];if(-1!==_){const C=r.data[_];Fn(o[u]),C.contentQueries(2,i[_],_)}}}function sg(r,i,o,u,d,_,C,N,U,q,ne){const ae=i.blueprint.slice();return ae[0]=d,ae[2]=76|u,(null!==ne||r&&1024&r[2])&&(ae[2]|=1024),kn(ae),ae[3]=ae[15]=r,ae[8]=o,ae[10]=C||r&&r[10],ae[11]=N||r&&r[11],ae[12]=U||r&&r[12]||null,ae[9]=q||r&&r[9]||null,ae[6]=_,ae[20]=function uc(){return Lh++}(),ae[21]=ne,ae[16]=2==i.type?r[16]:ae,ae}function oh(r,i,o,u,d){let _=r.data[i];if(null===_)_=function og(r,i,o,u,d){const _=Is(),C=Ga(),U=r.data[i]=function Om(r,i,o,u,d,_){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?_:_&&_.parent,o,i,u,d);return null===r.firstChild&&(r.firstChild=U),null!==_&&(C?null==_.child&&null!==U.parent&&(_.child=U):null===_.next&&(_.next=U)),U}(r,i,o,u,d),function Sa(){return An.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=o,_.value=u,_.attrs=d;const C=function uu(){const r=An.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();_.injectorIndex=null===C?-1:C.injectorIndex}return ms(_,!0),_}function tp(r,i,o,u){if(0===o)return-1;const d=i.length;for(let _=0;_<o;_++)i.push(u),r.blueprint.push(u),r.data.push(null);return d}function Nm(r,i,o){wi(i);try{const u=r.viewQuery;null!==u&&Bm(1,u,o);const d=r.template;null!==d&&Py(r,i,d,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Rm(r,i),r.staticViewQueries&&Bm(2,r.viewQuery,o);const _=r.components;null!==_&&function Ny(r,i){for(let o=0;o<i.length;o++)Iw(r,i[o])}(i,_)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[2]&=-5,Wa()}}function ag(r,i,o,u){const d=i[2];if(128!=(128&d)){wi(i);try{kn(i),function Ks(r){return An.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&Py(r,i,o,2,u);const C=3==(3&d);if(C){const q=r.preOrderCheckHooks;null!==q&&k(i,q,null)}else{const q=r.preOrderHooks;null!==q&&K(i,q,0,null),L(i,0)}if(function cg(r){for(let i=Xu(r);null!==i;i=Hd(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const d=o[u];512&d[2]||$o(d[3],1),d[2]|=512}}}(i),function zy(r){for(let i=Xu(r);null!==i;i=Hd(i))for(let o=10;o<i.length;o++){const u=i[o],d=u[1];pi(u)&&ag(d,u,d.template,u[8])}}(i),null!==r.contentQueries&&Rm(r,i),C){const q=r.contentCheckHooks;null!==q&&k(i,q)}else{const q=r.contentHooks;null!==q&&K(i,q,1),L(i,1)}!function ig(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const d=o[u];if(d<0)Hi(~d);else{const _=d,C=o[++u],N=o[++u];ks(C,_),N(2,i[_])}}}finally{Hi(-1)}}(r,i);const N=r.components;null!==N&&function Ry(r,i){for(let o=0;o<i.length;o++)Wy(r,i[o])}(i,N);const U=r.viewQuery;if(null!==U&&Bm(2,U,u),C){const q=r.viewCheckHooks;null!==q&&k(i,q)}else{const q=r.viewHooks;null!==q&&K(i,q,2),L(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,$o(i[3],-1))}finally{Wa()}}}function Py(r,i,o,u,d){const _=Kn(),C=2&u;try{Hi(-1),C&&i.length>22&&Id(r,i,22,!1),o(u,d)}finally{Hi(_)}}function Dd(r,i,o){if(Di(i)){const d=i.directiveEnd;for(let _=i.directiveStart;_<d;_++){const C=r.data[_];C.contentQueries&&C.contentQueries(1,o[_],_)}}}function ug(r,i,o){Ha()&&(function By(r,i,o,u){const d=o.directiveStart,_=o.directiveEnd;nr(o)&&function ww(r,i,o){const u=ji(i,r),d=mo(o),_=r[10],C=dg(r,sg(r,d,null,o.onPush?32:16,u,i,_,_.createRenderer(u,o),null,null,null));r[i.index]=C}(i,o,r.data[d+o.componentOffset]),r.firstCreatePass||Qo(o,i),Oo(u,i);const C=o.initialInputs;for(let N=d;N<_;N++){const U=r.data[N],q=Nr(i,r,N,o);Oo(q,i),null!==C&&Ew(0,N-d,q,U,0,C),or(U)&&(Mi(o.index,i)[8]=Nr(i,r,N,o))}}(r,i,o,ji(o,i)),64==(64&o.flags)&&jy(r,i,o))}function Pm(r,i,o=ji){const u=i.localNames;if(null!==u){let d=i.index+1;for(let _=0;_<u.length;_+=2){const C=u[_+1],N=-1===C?o(i,r):r[C];r[d++]=N}}}function mo(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=np(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function np(r,i,o,u,d,_,C,N,U,q){const ne=22+u,ae=ne+d,Ne=function Oy(r,i){const o=[];for(let u=0;u<i;u++)o.push(u<r?null:pr);return o}(ne,ae),He="function"==typeof q?q():q;return Ne[1]={type:r,blueprint:Ne,template:o,queries:null,viewQuery:N,declTNode:i,data:Ne.slice().fill(null,ne),bindingStartIndex:ne,expandoStartIndex:ae,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:U,consts:He,incompleteFirstPass:!1}}function Kl(r,i,o,u){const d=qy(i);null===o?d.push(u):(d.push(o),r.firstCreatePass&&Zy(r).push(u,d.length-1))}function km(r,i,o,u){for(let d in r)if(r.hasOwnProperty(d)){o=null===o?{}:o;const _=r[d];null===u?Xh(o,i,d,_):u.hasOwnProperty(d)&&Xh(o,i,u[d],_)}return o}function Xh(r,i,o,u){r.hasOwnProperty(o)?r[o].push(i,u):r[o]=[i,u]}function Zu(r,i,o,u,d,_,C,N){const U=ji(i,o);let ne,q=i.inputs;!N&&null!=q&&(ne=q[u])?(jm(r,o,ne,u,d),nr(i)&&Ly(o,i.index)):3&i.type&&(u=function Fy(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),d=null!=C?C(d,i.value||"",u):d,_.setProperty(U,u,d))}function Ly(r,i){const o=Mi(i,r);16&o[2]||(o[2]|=32)}function ip(r,i,o,u){let d=!1;if(Ha()){const _=null===u?null:{"":-1},C=function yw(r,i){const o=r.directiveRegistry;let u=null,d=null;if(o)for(let _=0;_<o.length;_++){const C=o[_];if(wm(i,C.selectors,!1))if(u||(u=[]),or(C))if(null!==C.findHostDirectiveDefs){const N=[];d=d||new Map,C.findHostDirectiveDefs(C,N,d),u.unshift(...N,C),Lm(r,i,N.length)}else u.unshift(C),Lm(r,i,0);else d=d||new Map,C.findHostDirectiveDefs?.(C,u,d),u.push(C)}return null===u?null:[u,d]}(r,o);let N,U;null===C?N=U=null:[N,U]=C,null!==N&&(d=!0,Uy(r,i,o,N,_,U)),_&&function vw(r,i,o){if(i){const u=r.localNames=[];for(let d=0;d<i.length;d+=2){const _=o[i[d+1]];if(null==_)throw new Ze(-301,!1);u.push(i[d],_)}}}(o,u,_)}return o.mergedAttrs=Yi(o.mergedAttrs,o.attrs),d}function Uy(r,i,o,u,d,_){for(let q=0;q<u.length;q++)ca(Qo(o,i),r,u[q].type);!function ef(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}(o,r.data.length,u.length);for(let q=0;q<u.length;q++){const ne=u[q];ne.providersResolver&&ne.providersResolver(ne)}let C=!1,N=!1,U=tp(r,i,u.length,null);for(let q=0;q<u.length;q++){const ne=u[q];o.mergedAttrs=Yi(o.mergedAttrs,ne.hostAttrs),Hy(r,o,i,U,ne),Sd(U,ne,d),null!==ne.contentQueries&&(o.flags|=4),(null!==ne.hostBindings||null!==ne.hostAttrs||0!==ne.hostVars)&&(o.flags|=64);const ae=ne.type.prototype;!C&&(ae.ngOnChanges||ae.ngOnInit||ae.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),C=!0),!N&&(ae.ngOnChanges||ae.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),N=!0),U++}!function ky(r,i,o){const d=i.directiveEnd,_=r.data,C=i.attrs,N=[];let U=null,q=null;for(let ne=i.directiveStart;ne<d;ne++){const ae=_[ne],Ne=o?o.get(ae):null,vt=Ne?Ne.outputs:null;U=km(ae.inputs,ne,U,Ne?Ne.inputs:null),q=km(ae.outputs,ne,q,vt);const Lt=null===U||null===C||Zf(i)?null:Gy(U,ne,C);N.push(Lt)}null!==U&&(U.hasOwnProperty("class")&&(i.flags|=8),U.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=N,i.inputs=U,i.outputs=q}(r,o,_)}function jy(r,i,o){const u=o.directiveStart,d=o.directiveEnd,_=o.index,C=function Aa(){return An.lFrame.currentDirectiveIndex}();try{Hi(_);for(let N=u;N<d;N++){const U=r.data[N],q=i[N];Fs(N),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&$y(U,q)}}finally{Hi(-1),Fs(C)}}function $y(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function Lm(r,i,o){i.componentOffset=o,(r.components||(r.components=[])).push(i.index)}function Sd(r,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=r;or(i)&&(o[""]=r)}}function Hy(r,i,o,u,d){r.data[u]=d;const _=d.factory||(d.factory=rs(d.type)),C=new lt(_,or(d),Ic);r.blueprint[u]=C,o[u]=C,function Vy(r,i,o,u,d){const _=d.hostBindings;if(_){let C=r.hostBindingOpCodes;null===C&&(C=r.hostBindingOpCodes=[]);const N=~i.index;(function Fm(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(C)!=N&&C.push(N),C.push(o,u,_)}}(r,i,u,tp(r,o,d.hostVars,pr),d)}function Yl(r,i,o,u,d,_){const C=ji(r,i);!function iu(r,i,o,u,d,_,C){if(null==_)r.removeAttribute(i,d,o);else{const N=null==C?et(_):C(_,u||"",d);r.setAttribute(i,d,N,o)}}(i[11],C,_,r.value,o,u,d)}function Ew(r,i,o,u,d,_){const C=_[i];if(null!==C){const N=u.setInput;for(let U=0;U<C.length;){const q=C[U++],ne=C[U++],ae=C[U++];null!==N?u.setInput(o,ae,q,ne):o[ne]=ae}}}function Gy(r,i,o){let u=null,d=0;for(;d<o.length;){const _=o[d];if(0!==_)if(5!==_){if("number"==typeof _)break;if(r.hasOwnProperty(_)){null===u&&(u=[]);const C=r[_];for(let N=0;N<C.length;N+=2)if(C[N]===i){u.push(_,C[N+1],o[d+1]);break}}d+=2}else d+=2;else d+=4}return u}function Ql(r,i,o,u){return[r,!0,!1,i,null,0,u,o,null,null]}function Wy(r,i){const o=Mi(i,r);if(pi(o)){const u=o[1];48&o[2]?ag(u,o,u.template,o[8]):o[5]>0&&Um(o)}}function Um(r){for(let u=Xu(r);null!==u;u=Hd(u))for(let d=10;d<u.length;d++){const _=u[d];if(pi(_))if(512&_[2]){const C=_[1];ag(C,_,C.template,_[8])}else _[5]>0&&Um(_)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const d=Mi(o[u],r);pi(d)&&d[5]>0&&Um(d)}}function Iw(r,i){const o=Mi(i,r),u=o[1];(function Cw(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(u,o),Nm(u,o,o[8])}function dg(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function Vm(r){for(;r;){r[2]|=32;const i=Ju(r);if(ou(r)&&!i)return r;r=i}return null}function hg(r,i,o,u=!0){const d=i[10];d.begin&&d.begin();try{ag(r,i,r.template,o)}catch(C){throw u&&Yy(i,C),C}finally{d.end&&d.end()}}function Bm(r,i,o){Fn(0),i(r,o)}function qy(r){return r[7]||(r[7]=[])}function Zy(r){return r.cleanup||(r.cleanup=[])}function Yy(r,i){const o=r[9],u=o?o.get(zi,null):null;u&&u.handleError(i)}function jm(r,i,o,u,d){for(let _=0;_<o.length;){const C=o[_++],N=o[_++],U=i[C],q=r.data[C];null!==q.setInput?q.setInput(U,d,u,N):U[N]=d}}function Hc(r,i,o){const u=oa(i,r);!function Oc(r,i,o){r.setValue(i,o)}(r[11],u,o)}function sp(r,i,o){let u=o?r.styles:null,d=o?r.classes:null,_=0;if(null!==i)for(let C=0;C<i.length;C++){const N=i[C];"number"==typeof N?_=N:1==_?d=Be(d,N):2==_&&(u=Be(u,N+": "+i[++C]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=d:r.classesWithoutHost=d}function fg(r,i,o,u,d=!1){for(;null!==o;){const _=i[o.index];if(null!==_&&u.push(xi(_)),Kr(_))for(let N=10;N<_.length;N++){const U=_[N],q=U[1].firstChild;null!==q&&fg(U[1],U,q,u)}const C=o.type;if(8&C)fg(r,i,o.child,u);else if(32&C){const N=dl(o,i);let U;for(;U=N();)u.push(U)}else if(16&C){const N=$h(i,o);if(Array.isArray(N))u.push(...N);else{const U=Ju(i[16]);fg(U[1],U,N,u,!0)}}o=d?o.projectionNext:o.next}return u}class tf{get rootNodes(){const i=this._lView,o=i[1];return fg(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Kr(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(dc(i,u),Po(o,u))}this._attachedToViewContainer=!1}Gd(this._lView[1],this._lView)}onDestroy(i){Kl(this._lView[1],this._lView,null,i)}markForCheck(){Vm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){hg(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ze(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kc(r,i){jl(r,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Ze(902,!1);this._appRef=i}}class Qy extends tf{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;hg(i[1],i,i[8],!1)}checkNoChanges(){}get context(){return null}}class Jy extends ut{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=sr(i);return new ah(o,this.ngModule)}}function pg(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}class $m{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,u){u=vn(u);const d=this.injector.get(i,wd,u);return d!==wd||o===wd?d:this.parentInjector.get(i,o,u)}}class ah extends G{get inputs(){return pg(this.componentDef.inputs)}get outputs(){return pg(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function uw(r){return r.map(rg).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,u,d){let _=(d=d||this.ngModule)instanceof Zl?d:d?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const C=_?new $m(i,_):i,N=C.get(Lo,null);if(null===N)throw new Ze(407,!1);const U=C.get(js,null),q=N.createRenderer(null,this.componentDef),ne=this.componentDef.selectors[0][0]||"div",ae=u?function rp(r,i,o){return r.selectRootElement(i,o===yn.ShadowDom)}(q,u,this.componentDef.encapsulation):Fl(q,ne,function Ba(r){const i=r.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(ne)),Ne=this.componentDef.onPush?288:272,He=np(0,null,null,1,0,null,null,null,null,null),vt=sg(null,He,null,Ne,null,null,N,q,U,C,null);let Lt,hn;wi(vt);try{const Nn=this.componentDef;let er,Mt=null;Nn.findHostDirectiveDefs?(er=[],Mt=new Map,Nn.findHostDirectiveDefs(Nn,er,Mt),er.push(Nn)):er=[Nn];const wr=function Xy(r,i){const o=r[1];return r[22]=i,oh(o,22,2,"#host",null)}(vt,ae),vo=function bw(r,i,o,u,d,_,C,N){const U=d[1];!function ev(r,i,o,u){for(const d of r)i.mergedAttrs=Yi(i.mergedAttrs,d.hostAttrs);null!==i.mergedAttrs&&(sp(i,i.mergedAttrs,!0),null!==o&&ys(u,o,i))}(u,r,i,C);const q=_.createRenderer(i,o),ne=sg(d,mo(o),null,o.onPush?32:16,d[r.index],r,_,q,N||null,null,null);return U.firstCreatePass&&Lm(U,r,u.length-1),dg(d,ne),d[r.index]=ne}(wr,ae,Nn,er,vt,N,q);hn=ba(He,22),ae&&function lh(r,i,o,u){if(u)_r(r,o,["ng-version",_m.full]);else{const{attrs:d,classes:_}=function lw(r){const i=[],o=[];let u=1,d=2;for(;u<r.length;){let _=r[u];if("string"==typeof _)2===d?""!==_&&i.push(_,r[++u]):8===d&&o.push(_);else{if(!sl(d))break;d=_}u++}return{attrs:i,classes:o}}(i.selectors[0]);d&&_r(r,o,d),_&&_.length>0&&Et(r,o,_.join(" "))}}(q,Nn,ae,u),void 0!==o&&function ch(r,i,o){const u=r.projection=[];for(let d=0;d<i.length;d++){const _=o[d];u.push(null!=_?Array.from(_):null)}}(hn,this.ngContentSelectors,o),Lt=function gg(r,i,o,u,d,_){const C=$i(),N=d[1],U=ji(C,d);Uy(N,d,C,o,null,u);for(let ne=0;ne<o.length;ne++)Oo(Nr(d,N,C.directiveStart+ne,C),d);jy(N,d,C),U&&Oo(U,d);const q=Nr(d,N,C.directiveStart+C.componentOffset,C);if(r[8]=d[8]=q,null!==_)for(const ne of _)ne(q,i);return Dd(N,C,r),q}(vo,Nn,er,Mt,vt,[dh]),Nm(He,vt,null)}finally{Wa()}return new Hm(this.componentType,Lt,on(hn,vt),vt,hn)}}class Hm extends F{constructor(i,o,u,d,_){super(),this.location=u,this._rootLView=d,this._tNode=_,this.instance=o,this.hostView=this.changeDetectorRef=new Qy(d),this.componentType=i}setInput(i,o){const u=this._tNode.inputs;let d;if(null!==u&&(d=u[i])){const _=this._rootLView;jm(_[1],_,d,i,o),Ly(_,this._tNode.index)}}get injector(){return new Pr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function dh(){const r=$i();ho(nt()[1],r)}function mg(r){let i=function nf(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const u=[r];for(;i;){let d;if(or(r))d=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Ze(903,!1);d=i.\u0275dir}if(d){if(o){u.push(d);const C=r;C.inputs=op(r.inputs),C.declaredInputs=op(r.declaredInputs),C.outputs=op(r.outputs);const N=d.hostBindings;N&&Tw(r,N);const U=d.viewQuery,q=d.contentQueries;if(U&&tv(r,U),q&&nv(r,q),Le(r.inputs,d.inputs),Le(r.declaredInputs,d.declaredInputs),Le(r.outputs,d.outputs),or(d)&&d.data.animation){const ne=r.data;ne.animation=(ne.animation||[]).concat(d.data.animation)}}const _=d.features;if(_)for(let C=0;C<_.length;C++){const N=_[C];N&&N.ngInherit&&N(r),N===mg&&(o=!1)}}i=Object.getPrototypeOf(i)}!function Gm(r){let i=0,o=null;for(let u=r.length-1;u>=0;u--){const d=r[u];d.hostVars=i+=d.hostVars,d.hostAttrs=Yi(d.hostAttrs,o=Yi(o,d.hostAttrs))}}(u)}function op(r){return r===xn?{}:r===ve?[]:r}function tv(r,i){const o=r.viewQuery;r.viewQuery=o?(u,d)=>{i(u,d),o(u,d)}:i}function nv(r,i){const o=r.contentQueries;r.contentQueries=o?(u,d,_)=>{i(u,d,_),o(u,d,_)}:i}function Tw(r,i){const o=r.hostBindings;r.hostBindings=o?(u,d)=>{i(u,d),o(u,d)}:i}let yg=null;function Jl(){if(!yg){const r=fn.Symbol;if(r&&r.iterator)yg=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(yg=u)}}}return yg}function Xl(r){return!!vg(r)&&(Array.isArray(r)||!(r instanceof Map)&&Jl()in r)}function vg(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Cl(r,i,o){return r[i]=o}function su(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function Gc(r,i,o,u){const d=su(r,i,o);return su(r,i+1,u)||d}function af(r,i,o,u){const d=nt();return su(d,Os(),i)&&(ar(),Yl(jr(),d,r,i,o,u)),af}function xd(r,i,o,u){return su(r,Os(),o)?i+et(o)+u:pr}function zc(r,i,o,u,d,_){const N=Gc(r,function Fi(){return An.lFrame.bindingIndex}(),o,d);return Ys(2),N?i+et(o)+u+et(d)+_:pr}function _h(r,i,o,u,d,_,C,N){const U=nt(),q=ar(),ne=r+22,ae=q.firstCreatePass?function Aw(r,i,o,u,d,_,C,N,U){const q=i.consts,ne=oh(i,r,4,C||null,ki(q,N));ip(i,o,ne,ki(q,U)),ho(i,ne);const ae=ne.tViews=np(2,ne,u,d,_,i.directiveRegistry,i.pipeRegistry,null,i.schemas,q);return null!==i.queries&&(i.queries.template(i,ne),ae.queries=i.queries.embeddedTView(ne)),ne}(ne,q,U,i,o,u,d,_,C):q.data[ne];ms(ae,!1);const Ne=U[11].createComment("");Fo(q,U,Ne,ae),Oo(Ne,U),dg(U,U[ne]=Ql(Ne,U,Ne,ae)),Bn(ae)&&ug(q,U,ae),null!=C&&Pm(U,ae,N)}function Zc(r){return Ta(function Wo(){return An.lFrame.contextLView}(),22+r)}function wg(r,i,o){const u=nt();return su(u,Os(),i)&&Zu(ar(),jr(),u,r,i,u[11],o,!1),wg}function Km(r,i,o,u,d){const C=d?"class":"style";jm(r,o,i.inputs[C],C,u)}function Eg(r,i,o,u){const d=nt(),_=ar(),C=22+r,N=d[11],U=d[C]=Fl(N,i,function Au(){return An.lFrame.currentNamespace}()),q=_.firstCreatePass?function xw(r,i,o,u,d,_,C){const N=i.consts,q=oh(i,r,2,d,ki(N,_));return ip(i,o,q,ki(N,C)),null!==q.attrs&&sp(q,q.attrs,!1),null!==q.mergedAttrs&&sp(q,q.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,q),q}(C,_,d,0,i,o,u):_.data[C];return ms(q,!0),ys(N,U,q),32!=(32&q.flags)&&Fo(_,d,U,q),0===function Go(){return An.lFrame.elementDepthCount}()&&Oo(U,d),function To(){An.lFrame.elementDepthCount++}(),Bn(q)&&(ug(_,d,q),Dd(_,q,d)),null!==u&&Pm(d,q),Eg}function Ig(){let r=$i();Ga()?zo():(r=r.parent,ms(r,!1));const i=r;!function lo(){An.lFrame.elementDepthCount--}();const o=ar();return o.firstCreatePass&&(ho(o,r),Di(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function jn(r){return 0!=(8&r.flags)}(i)&&Km(o,i,nt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Yr(r){return 0!=(16&r.flags)}(i)&&Km(o,i,nt(),i.stylesWithoutHost,!1),Ig}function cf(r,i,o,u){return Eg(r,i,o,u),Ig(),cf}function Cg(r,i,o){const u=nt(),d=ar(),_=r+22,C=d.firstCreatePass?function cv(r,i,o,u,d){const _=i.consts,C=ki(_,u),N=oh(i,r,8,"ng-container",C);return null!==C&&sp(N,C,!0),ip(i,o,N,ki(_,d)),null!==i.queries&&i.queries.elementStart(i,N),N}(_,d,u,i,o):d.data[_];ms(C,!0);const N=u[_]=u[11].createComment("");return Fo(d,u,N,C),Oo(N,u),Bn(C)&&(ug(d,u,C),Dd(d,C,u)),null!=o&&Pm(u,C),Cg}function cp(){let r=$i();const i=ar();return Ga()?zo():(r=r.parent,ms(r,!1)),i.firstCreatePass&&(ho(i,r),Di(r)&&i.queries.elementEnd(r)),cp}function Ym(){return nt()}function Kc(r){return!!r&&"function"==typeof r.then}function df(r){return!!r&&"function"==typeof r.subscribe}const Qm=df;function bg(r,i,o,u){const d=nt(),_=ar(),C=$i();return function pv(r,i,o,u,d,_,C){const N=Bn(u),q=r.firstCreatePass&&Zy(r),ne=i[8],ae=qy(i);let Ne=!0;if(3&u.type||C){const Lt=ji(u,i),hn=C?C(Lt):Lt,Nn=ae.length,er=C?wr=>C(xi(wr[u.index])):u.index;let Mt=null;if(!C&&N&&(Mt=function fv(r,i,o,u){const d=r.cleanup;if(null!=d)for(let _=0;_<d.length-1;_+=2){const C=d[_];if(C===o&&d[_+1]===u){const N=i[7],U=d[_+2];return N.length>U?N[U]:null}"string"==typeof C&&(_+=2)}return null}(r,i,d,u.index)),null!==Mt)(Mt.__ngLastListenerFn__||Mt).__ngNextListenerFn__=_,Mt.__ngLastListenerFn__=_,Ne=!1;else{_=Tg(u,i,ne,_,!1);const wr=o.listen(hn,d,_);ae.push(_,wr),q&&q.push(d,er,Nn,Nn+1)}}else _=Tg(u,i,ne,_,!1);const He=u.outputs;let vt;if(Ne&&null!==He&&(vt=He[d])){const Lt=vt.length;if(Lt)for(let hn=0;hn<Lt;hn+=2){const vo=i[vt[hn]][vt[hn+1]].subscribe(_),va=ae.length;ae.push(_,vo),q&&q.push(d,u.index,va,-(va+1))}}}(_,d,d[11],C,r,i,u),bg}function gv(r,i,o,u){try{return!1!==o(u)}catch(d){return Yy(r,d),!1}}function Tg(r,i,o,u,d){return function _(C){if(C===Function)return u;Vm(r.componentOffset>-1?Mi(r.index,i):i);let U=gv(i,0,u,C),q=_.__ngNextListenerFn__;for(;q;)U=gv(i,0,q,C)&&U,q=q.__ngNextListenerFn__;return d&&!1===U&&(C.preventDefault(),C.returnValue=!1),U}}function _a(r=1){return function ii(r){return(An.lFrame.contextLView=function Cs(r,i){for(;r>0;)i=i[15],r--;return i}(r,An.lFrame.contextLView))[8]}(r)}function dp(r,i,o,u,d){const _=nt(),C=xd(_,i,o,u);return C!==pr&&Zu(ar(),jr(),_,r,C,_[11],d,!1),dp}function ff(r,i){return r<<17|i<<2}function Tc(r){return r>>17&32767}function Ag(r){return 2|r}function Md(r){return(131068&r)>>2}function pp(r,i){return-131069&r|i<<2}function xg(r){return 1|r}function yh(r,i,o,u,d){const _=r[o+1],C=null===i;let N=u?Tc(_):Md(_),U=!1;for(;0!==N&&(!1===U||C);){const ne=r[N+1];Xm(r[N],i)&&(U=!0,r[N+1]=u?xg(ne):Ag(ne)),N=u?Tc(ne):Md(ne)}U&&(r[o+1]=u?Ag(_):xg(_))}function Xm(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&E(r,i)>=0}const _o={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function e_(r){return r.substring(_o.key,_o.keyEnd)}function Iv(r,i){const o=_o.textEnd;return o===i?-1:(i=_o.keyEnd=function bv(r,i,o){for(;i<o&&r.charCodeAt(i)>32;)i++;return i}(r,_o.key=i,o),vh(r,i,o))}function vh(r,i,o){for(;i<o&&r.charCodeAt(i)<=32;)i++;return i}function yp(r,i,o){return tc(r,i,o,!1),yp}function vp(r,i){return tc(r,i,null,!0),vp}function r_(r){!function nc(r,i,o,u){const d=ar(),_=Ys(2);d.firstUpdatePass&&wp(d,null,_,u);const C=nt();if(o!==pr&&su(C,_,o)){const N=d.data[Kn()];if(Ng(N,u)&&!i_(d,_)){let U=u?N.classesWithoutHost:N.stylesWithoutHost;null!==U&&(o=Be(U,o||"")),Km(d,N,C,o,u)}else!function Bw(r,i,o,u,d,_,C,N){d===pr&&(d=ve);let U=0,q=0,ne=0<d.length?d[0]:null,ae=0<_.length?_[0]:null;for(;null!==ne||null!==ae;){const Ne=U<d.length?d[U+1]:void 0,He=q<_.length?_[q+1]:void 0;let Lt,vt=null;ne===ae?(U+=2,q+=2,Ne!==He&&(vt=ae,Lt=He)):null===ae||null!==ne&&ne<ae?(U+=2,vt=ne):(q+=2,vt=ae,Lt=He),null!==vt&&Sv(r,i,o,u,vt,Lt,C,N),ne=U<d.length?d[U]:null,ae=q<_.length?_[q]:null}}(d,N,C,C[11],C[_+1],C[_+1]=function Vw(r,i,o){if(null==o||""===o)return ve;const u=[],d=S(o);if(Array.isArray(d))for(let _=0;_<d.length;_++)r(u,d[_],!0);else if("object"==typeof d)for(const _ in d)d.hasOwnProperty(_)&&r(u,_,d[_]);else"string"==typeof d&&i(u,d);return u}(r,i,o),u,_)}}(b,Dc,r,!0)}function Dc(r,i){for(let o=function Ev(r){return function Mg(r){_o.key=0,_o.keyEnd=0,_o.value=0,_o.valueEnd=0,_o.textEnd=r.length}(r),Iv(r,vh(r,0,_o.textEnd))}(i);o>=0;o=Iv(i,o))b(r,e_(i),!0)}function tc(r,i,o,u){const d=nt(),_=ar(),C=Ys(2);_.firstUpdatePass&&wp(_,r,C,u),i!==pr&&su(d,C,i)&&Sv(_,_.data[Kn()],d,d[11],r,d[C+1]=function _f(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=Fe(S(r)))),r}(i,o),u,C)}function i_(r,i){return i>=r.expandoStartIndex}function wp(r,i,o,u){const d=r.data;if(null===d[o+1]){const _=d[Kn()],C=i_(r,o);Ng(_,u)&&null===i&&!C&&(i=!1),i=function Ep(r,i,o,u){const d=Yt(r);let _=u?i.residualClasses:i.residualStyles;if(null===d)0===(u?i.classBindings:i.styleBindings)&&(o=Ip(o=o_(null,r,i,o,u),i.attrs,u),_=null);else{const C=i.directiveStylingLast;if(-1===C||r[C]!==d)if(o=o_(d,r,i,o,u),null===_){let U=function s_(r,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==Md(u))return r[Tc(u)]}(r,i,u);void 0!==U&&Array.isArray(U)&&(U=o_(null,r,i,U[1],u),U=Ip(U,i.attrs,u),function Dv(r,i,o,u){r[Tc(o?i.classBindings:i.styleBindings)]=u}(r,i,u,U))}else _=function Uw(r,i,o){let u;const d=i.directiveEnd;for(let _=1+i.directiveStylingLast;_<d;_++)u=Ip(u,r[_].hostAttrs,o);return Ip(u,i.attrs,o)}(r,i,u)}return void 0!==_&&(u?i.residualClasses=_:i.residualStyles=_),o}(d,_,i,u),function Fw(r,i,o,u,d,_){let C=_?i.classBindings:i.styleBindings,N=Tc(C),U=Md(C);r[u]=o;let ne,q=!1;if(Array.isArray(o)?(ne=o[1],(null===ne||E(o,ne)>0)&&(q=!0)):ne=o,d)if(0!==U){const Ne=Tc(r[N+1]);r[u+1]=ff(Ne,N),0!==Ne&&(r[Ne+1]=pp(r[Ne+1],u)),r[N+1]=function Pw(r,i){return 131071&r|i<<17}(r[N+1],u)}else r[u+1]=ff(N,0),0!==N&&(r[N+1]=pp(r[N+1],u)),N=u;else r[u+1]=ff(U,0),0===N?N=u:r[U+1]=pp(r[U+1],u),U=u;q&&(r[u+1]=Ag(r[u+1])),yh(r,ne,u,!0),yh(r,ne,u,!1),function pf(r,i,o,u,d){const _=d?r.residualClasses:r.residualStyles;null!=_&&"string"==typeof i&&E(_,i)>=0&&(o[u+1]=xg(o[u+1]))}(i,ne,r,u,_),C=ff(N,U),_?i.classBindings=C:i.styleBindings=C}(d,_,i,o,C,u)}}function o_(r,i,o,u,d){let _=null;const C=o.directiveEnd;let N=o.directiveStylingLast;for(-1===N?N=o.directiveStart:N++;N<C&&(_=i[N],u=Ip(u,_.hostAttrs,d),_!==r);)N++;return null!==r&&(o.directiveStylingLast=N),u}function Ip(r,i,o){const u=o?1:2;let d=-1;if(null!==i)for(let _=0;_<i.length;_++){const C=i[_];"number"==typeof C?d=C:d===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),b(r,C,!!o||i[++_]))}return void 0===r?null:r}function Sv(r,i,o,u,d,_,C,N){if(!(3&i.type))return;const U=r.data,q=U[N+1],ne=function Ow(r){return 1==(1&r)}(q)?gf(U,i,o,d,Md(q),C):void 0;mf(ne)||(mf(_)||function vv(r){return 2==(2&r)}(q)&&(_=gf(U,null,o,d,N,C)),function Wt(r,i,o,u,d){if(i)d?r.addClass(o,u):r.removeClass(o,u);else{let _=-1===u.indexOf("-")?void 0:ka.DashCase;null==d?r.removeStyle(o,u,_):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),_|=ka.Important),r.setStyle(o,u,d,_))}}(u,C,oa(Kn(),o),d,_))}function gf(r,i,o,u,d,_){const C=null===i;let N;for(;d>0;){const U=r[d],q=Array.isArray(U),ne=q?U[1]:U,ae=null===ne;let Ne=o[d+1];Ne===pr&&(Ne=ae?ve:void 0);let He=ae?x(Ne,u):ne===u?Ne:void 0;if(q&&!mf(He)&&(He=x(U,u)),mf(He)&&(N=He,C))return N;const vt=r[d+1];d=C?Tc(vt):Md(vt)}if(null!==i){let U=_?i.residualClasses:i.residualStyles;null!=U&&(N=x(U,u))}return N}function mf(r){return void 0!==r}function Ng(r,i){return 0!=(r.flags&(i?8:16))}function Cp(r,i=""){const o=nt(),u=ar(),d=r+22,_=u.firstCreatePass?oh(u,d,1,i,null):u.data[d],C=o[d]=function cd(r,i){return r.createText(i)}(o[11],i);Fo(u,o,C,_),ms(_,!1)}function wh(r){return yf("",r,""),wh}function yf(r,i,o){const u=nt(),d=xd(u,r,i,o);return d!==pr&&Hc(u,Kn(),d),yf}function Pg(r,i,o,u,d){const _=nt(),C=zc(_,r,i,o,u,d);return C!==pr&&Hc(_,Kn(),C),Pg}function Rd(r,i,o){const u=nt();if(su(u,Os(),i)){const _=ar(),C=jr();Zu(_,C,u,r,i,function Ky(r,i,o){return(null===r||or(r))&&(o=function Tu(r){for(;Array.isArray(r);){if("object"==typeof r[1])return r;r=r[0]}return null}(o[i.index])),o[11]}(Yt(_.data),C,u),o,!0)}return Rd}const Nd=void 0;var qw=["en",[["a","p"],["AM","PM"],Nd],[["AM","PM"],Nd,Nd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nd,"{1} 'at' {0}",Nd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wf(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Ef={};function bp(r){const i=function m_(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=Fv(i);if(o)return o;const u=i.split("-")[0];if(o=Fv(u),o)return o;if("en"===u)return qw;throw new Ze(701,!1)}function Hg(r){return bp(r)[Gn.PluralCase]}function Fv(r){return r in Ef||(Ef[r]=fn.ng&&fn.ng.common&&fn.ng.common.locales&&fn.ng.common.locales[r]),Ef[r]}var Gn=(()=>((Gn=Gn||{})[Gn.LocaleId=0]="LocaleId",Gn[Gn.DayPeriodsFormat=1]="DayPeriodsFormat",Gn[Gn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Gn[Gn.DaysFormat=3]="DaysFormat",Gn[Gn.DaysStandalone=4]="DaysStandalone",Gn[Gn.MonthsFormat=5]="MonthsFormat",Gn[Gn.MonthsStandalone=6]="MonthsStandalone",Gn[Gn.Eras=7]="Eras",Gn[Gn.FirstDayOfWeek=8]="FirstDayOfWeek",Gn[Gn.WeekendRange=9]="WeekendRange",Gn[Gn.DateFormat=10]="DateFormat",Gn[Gn.TimeFormat=11]="TimeFormat",Gn[Gn.DateTimeFormat=12]="DateTimeFormat",Gn[Gn.NumberSymbols=13]="NumberSymbols",Gn[Gn.NumberFormats=14]="NumberFormats",Gn[Gn.CurrencyCode=15]="CurrencyCode",Gn[Gn.CurrencySymbol=16]="CurrencySymbol",Gn[Gn.CurrencyName=17]="CurrencyName",Gn[Gn.Currencies=18]="Currencies",Gn[Gn.Directionality=19]="Directionality",Gn[Gn.PluralCase=20]="PluralCase",Gn[Gn.ExtraData=21]="ExtraData",Gn))();const If="en-US";let Vv=If;function j_(r,i,o,u,d){if(r=De(r),Array.isArray(r))for(let _=0;_<r.length;_++)j_(r[_],i,o,u,d);else{const _=ar(),C=nt();let N=zu(r)?r:De(r.provide),U=$c(r);const q=$i(),ne=1048575&q.providerIndexes,ae=q.directiveStart,Ne=q.providerIndexes>>20;if(zu(r)||!r.multi){const He=new lt(U,d,Ic),vt=xp(N,i,d?ne:ne+Ne,ae);-1===vt?(ca(Qo(q,C),_,N),$_(_,r,i.length),i.push(N),q.directiveStart++,q.directiveEnd++,d&&(q.providerIndexes+=1048576),o.push(He),C.push(He)):(o[vt]=He,C[vt]=He)}else{const He=xp(N,i,ne+Ne,ae),vt=xp(N,i,ne,ne+Ne),hn=vt>=0&&o[vt];if(d&&!hn||!d&&!(He>=0&&o[He])){ca(Qo(q,C),_,N);const Nn=function tm(r,i,o,u,d){const _=new lt(r,o,Ic);return _.multi=[],_.index=i,_.componentProviders=0,H_(_,d,u&&!o),_}(d?d0:c0,o.length,d,u,U);!d&&hn&&(o[vt].providerFactory=Nn),$_(_,r,i.length,0),i.push(N),q.directiveStart++,q.directiveEnd++,d&&(q.providerIndexes+=1048576),o.push(Nn),C.push(Nn)}else $_(_,r,He>-1?He:vt,H_(o[d?vt:He],U,!d&&u));!d&&u&&hn&&o[vt].componentProviders++}}}function $_(r,i,o,u){const d=zu(i),_=function Xp(r){return!!r.useClass}(i);if(d||_){const U=(_?De(i.useClass):i).prototype.ngOnDestroy;if(U){const q=r.destroyHooks||(r.destroyHooks=[]);if(!d&&i.multi){const ne=q.indexOf(o);-1===ne?q.push(o,[u,U]):q[ne+1].push(u,U)}else q.push(o,U)}}}function H_(r,i,o){return o&&r.componentProviders++,r.multi.push(i)-1}function xp(r,i,o,u){for(let d=o;d<u;d++)if(i[d]===r)return d;return-1}function c0(r,i,o,u){return em(this.multi,[])}function d0(r,i,o,u){const d=this.multi;let _;if(this.providerFactory){const C=this.providerFactory.componentProviders,N=Nr(o,o[1],this.providerFactory.index,u);_=N.slice(0,C),em(d,_);for(let U=C;U<N.length;U++)_.push(N[U])}else _=[],em(d,_);return _}function em(r,i){for(let o=0;o<r.length;o++)i.push((0,r[o])());return i}function Xr(r,i=[]){return o=>{o.providersResolver=(u,d)=>function oE(r,i,o){const u=ar();if(u.firstCreatePass){const d=or(r);j_(o,u.data,u.blueprint,d,!0),j_(i,u.data,u.blueprint,d,!1)}}(u,d?d(r):r,i)}}class Dh{}class G_{}function Mp(r,i){return new vs(r,i??null)}class vs extends Dh{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jy(this);const u=br(i);this._bootstrapComponents=ru(u.bootstrap),this._r3Injector=Jf(i,o,[{provide:Dh,useValue:this},{provide:ut,useValue:this.componentFactoryResolver}],Fe(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class ya extends G_{constructor(i){super(),this.moduleType=i}create(i){return new vs(this.moduleType,i)}}class xc extends Dh{constructor(i,o,u){super(),this.componentFactoryResolver=new Jy(this),this.instance=null;const d=new zf([...i,{provide:Dh,useValue:this},{provide:ut,useValue:this.componentFactoryResolver}],o||il(),u,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function nm(r,i,o=null){return new xc(r,i,o).injector}let uE=(()=>{class r{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=Hh(0,o.type),d=u.length>0?nm([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,d)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=nn({token:r,providedIn:"environment",factory:()=>new r(xt(Zl))}),r})();function Rp(r){r.getStandaloneInjector=i=>i.get(uE).getOrCreateStandaloneInjector(r)}function gE(r,i,o,u){return function Pp(r,i,o,u,d,_){const C=i+o;return su(r,C,d)?Cl(r,C+1,_?u.call(_,d):u(d)):rc(r,C+1)}(nt(),gi(),r,i,o,u)}function rc(r,i){const o=r[i];return o===pr?void 0:o}function Op(r,i){const o=ar();let u;const d=r+22;o.firstCreatePass?(u=function vE(r,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(r===u.name)return u}}(i,o.pipeRegistry),o.data[d]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(d,u.onDestroy)):u=o.data[d];const _=u.factory||(u.factory=rs(u.type)),C=On(Ic);try{const N=qa(!1),U=_();return qa(N),function lv(r,i,o,u){o>=r.data.length&&(r.data[o]=null,r.blueprint[o]=null),i[o]=u}(o,nt(),d,U),U}finally{On(C)}}function xf(r,i,o,u){const d=r+22,_=nt(),C=Ta(_,d);return function kp(r,i){return r[1].data[i].pure}(_,d)?function _0(r,i,o,u,d,_,C){const N=i+o;return Gc(r,N,d,_)?Cl(r,N+2,C?u.call(C,d,_):u(d,_)):rc(r,N+2)}(_,gi(),i,C.transform,o,u,C):C.transform(o,u)}function Fp(r){return i=>{setTimeout(r,void 0,i)}}const bl=class EE extends A.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){let d=i,_=o||(()=>null),C=u;if(i&&"object"==typeof i){const U=i;d=U.next?.bind(U),_=U.error?.bind(U),C=U.complete?.bind(U)}this.__isAsync&&(_=Fp(_),d&&(d=Fp(d)),C&&(C=Fp(C)));const N=super.subscribe({next:d,error:_,complete:C});return i instanceof y.w0&&i.add(N),N}};function w0(){return this._results[Jl()]()}class Jc{get changes(){return this._changes||(this._changes=new bl)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Jl(),u=Jc.prototype;u[o]||(u[o]=w0)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const d=function Vs(r){return r.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Us(r,i,o){if(r.length!==i.length)return!1;for(let u=0;u<r.length;u++){let d=r[u],_=i[u];if(o&&(d=o(d),_=o(_)),_!==d)return!1}return!0}(u._results,d,o))&&(u._results=d,u.length=d.length,u.last=d[this.length-1],u.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Mf=(()=>{class r{}return r.__NG_ELEMENT_ID__=Lp,r})();const E0=Mf,Z_=class extends E0{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i,o){const u=this._declarationTContainer.tViews,d=sg(this._declarationLView,u,i,16,null,u.declTNode,null,null,null,null,o||null);d[17]=this._declarationLView[this._declarationTContainer.index];const C=this._declarationLView[19];return null!==C&&(d[19]=C.createEmbeddedView(u)),Nm(u,d,i),new tf(d)}};function Lp(){return am($i(),nt())}function am(r,i){return 4&r.type?new Z_(i,r,on(r,i)):null}let Sh=(()=>{class r{}return r.__NG_ELEMENT_ID__=um,r})();function um(){return K_($i(),nt())}const I0=Sh,Rf=class extends I0{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return on(this._hostTNode,this._hostLView)}get injector(){return new Pr(this._hostTNode,this._hostLView)}get parentInjector(){const i=cu(this._hostTNode,this._hostLView);if(Ra(i)){const o=eo(i,this._hostLView),u=xo(i);return new Pr(o[1].data[u+8],o)}return new Pr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=C0(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){let d,_;"number"==typeof u?d=u:null!=u&&(d=u.index,_=u.injector);const C=i.createEmbeddedView(o||{},_);return this.insert(C,d),C}createComponent(i,o,u,d,_){const C=i&&!function ju(r){return"function"==typeof r}(i);let N;if(C)N=o;else{const ae=o||{};N=ae.index,u=ae.injector,d=ae.projectableNodes,_=ae.environmentInjector||ae.ngModuleRef}const U=C?i:new ah(sr(i)),q=u||this.parentInjector;if(!_&&null==U.ngModule){const Ne=(C?q:this.parentInjector).get(Zl,null);Ne&&(_=Ne)}const ne=U.create(q,d,void 0,_);return this.insert(ne.hostView,N),ne}insert(i,o){const u=i._lView,d=u[1];if(function ws(r){return Kr(r[3])}(u)){const ne=this.indexOf(i);if(-1!==ne)this.detach(ne);else{const ae=u[3],Ne=new Rf(ae,ae[6],ae[3]);Ne.detach(Ne.indexOf(i))}}const _=this._adjustIndex(o),C=this._lContainer;!function fl(r,i,o,u){const d=10+u,_=o.length;u>0&&(o[d-1][4]=i),u<_-10?(i[4]=o[d],No(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const C=i[17];null!==C&&o!==C&&function Lc(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(C,i);const N=i[19];null!==N&&N.insertView(r),i[2]|=64}(d,u,C,_);const N=Dt(_,C),U=u[11],q=ml(U,C[7]);return null!==q&&function dd(r,i,o,u,d,_){u[0]=d,u[6]=i,jl(r,u,o,1,d,_)}(d,C[6],U,u,q,N),i.attachToViewContainerRef(),No(Nf(C),_,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=C0(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=dc(this._lContainer,o);u&&(Po(Nf(this._lContainer),o),Gd(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=dc(this._lContainer,o);return u&&null!=Po(Nf(this._lContainer),o)?new tf(u):null}_adjustIndex(i,o=0){return i??this.length+o}};function C0(r){return r[8]}function Nf(r){return r[8]||(r[8]=[])}function K_(r,i){let o;const u=i[r.index];if(Kr(u))o=u;else{let d;if(8&r.type)d=xi(u);else{const _=i[11];d=_.createComment("");const C=ji(r,i);gl(_,ml(_,C),d,function _l(r,i){return r.nextSibling(i)}(_,C),!1)}i[r.index]=o=Ql(u,i,d,r),dg(i,o)}return new Rf(o,r,i)}class Up{constructor(i){this.queryList=i,this.matches=null}clone(){return new Up(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ah{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,d=[];for(let _=0;_<u;_++){const C=o.getByIndex(_);d.push(this.queries[C.indexInDeclarationView].clone())}return new Ah(d)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==J_(i,o).matches&&this.queries[o].setDirty()}}class Xc{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class xh{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const d=null!==o?o.length:0,_=this.getByIndex(u).embeddedTView(i,d);_&&(_.indexInDeclarationView=u,null!==o?o.push(_):o=[_])}return null!==o?new xh(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Y_{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new Y_(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let d=0;d<u.length;d++){const _=u[d];this.matchTNodeWithReadOption(i,o,Pf(o,_)),this.matchTNodeWithReadOption(i,o,Mu(o,i,_,!1,!1))}else u===Mf?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,Mu(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const d=this.metadata.read;if(null!==d)if(d===Rn||d===Sh||d===Mf&&4&o.type)this.addMatch(o.index,-2);else{const _=Mu(o,i,d,!1,!1);null!==_&&this.addMatch(o.index,_)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function Pf(r,i){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function mI(r,i,o,u){return-1===o?function gI(r,i){return 11&r.type?on(r,i):4&r.type?am(r,i):null}(i,r):-2===o?function Q_(r,i,o){return o===Rn?on(i,r):o===Mf?am(i,r):o===Sh?K_(i,r):void 0}(r,i,u):Nr(r,r[1],o,i)}function b0(r,i,o,u){const d=i[19].queries[u];if(null===d.matches){const _=r.data,C=o.matches,N=[];for(let U=0;U<C.length;U+=2){const q=C[U];N.push(q<0?null:mI(i,_[q],C[U+1],o.metadata.read))}d.matches=N}return d.matches}function Of(r,i,o,u){const d=r.queries.getByIndex(o),_=d.matches;if(null!==_){const C=b0(r,i,d,o);for(let N=0;N<_.length;N+=2){const U=_[N];if(U>0)u.push(C[N/2]);else{const q=_[N+1],ne=i[-U];for(let ae=10;ae<ne.length;ae++){const Ne=ne[ae];Ne[17]===Ne[3]&&Of(Ne[1],Ne,q,u)}if(null!==ne[9]){const ae=ne[9];for(let Ne=0;Ne<ae.length;Ne++){const He=ae[Ne];Of(He[1],He,q,u)}}}}}return u}function T0(r){const i=nt(),o=ar(),u=Ls();Fn(u+1);const d=J_(o,u);if(r.dirty&&function Zs(r){return 4==(4&r[2])}(i)===(2==(2&d.metadata.flags))){if(null===d.matches)r.reset([]);else{const _=d.crossesNgTemplate?Of(o,i,u,[]):b0(o,i,d,u);r.reset(_,Or),r.notifyOnChanges()}return!0}return!1}function Vp(r,i,o,u){const d=ar();if(d.firstCreatePass){const _=$i();(function S0(r,i,o){null===r.queries&&(r.queries=new xh),r.queries.track(new Y_(i,o))})(d,new Xc(i,o,u),_.index),function bE(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(d,r),2==(2&o)&&(d.staticContentQueries=!0)}!function Bp(r,i,o){const u=new Jc(4==(4&o));Kl(r,i,u,u.destroy),null===i[19]&&(i[19]=new Ah),i[19].queries.push(new Up(u))}(d,nt(),o)}function D0(){return function CE(r,i){return r[19].queries[i].queryList}(nt(),Ls())}function J_(r,i){return r.queries.getByIndex(i)}function Hp(...r){}const Fd=new ln("Application Initializer");let Fu=(()=>{class r{constructor(o){this.appInits=o,this.resolve=Hp,this.reject=Hp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,d)=>{this.resolve=u,this.reject=d})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const _=this.appInits[d]();if(Kc(_))o.push(_);else if(Qm(_)){const C=new Promise((N,U)=>{_.subscribe({complete:N,error:U})});o.push(C)}}Promise.all(o).then(()=>{u()}).catch(d=>{this.reject(d)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(xt(Fd,8))},r.\u0275prov=nn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Cu=new ln("AppId",{providedIn:"root",factory:function ly(){return`${Nh()}${Nh()}${Nh()}`}});function Nh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const kf=new ln("Platform Initializer"),Lu=new ln("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),W0=new ln("appBootstrapListener");let Ph=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=nn({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const Rc=new ln("LocaleId",{providedIn:"root",factory:()=>Pt(Rc,kt.Optional|kt.SkipSelf)||function cy(){return typeof $localize<"u"&&$localize.locale||If}()}),$E=new ln("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Z0{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let HE=(()=>{class r{compileModuleSync(o){return new ya(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),_=ru(br(o).declarations).reduce((C,N)=>{const U=sr(N);return U&&C.push(new ah(U)),C},[]);return new Z0(u,_)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=nn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Q0=(()=>Promise.resolve(0))();function hm(r){typeof Zone>"u"?Q0.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class al{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bl(!1),this.onMicrotaskEmpty=new bl(!1),this.onStable=new bl(!1),this.onError=new bl(!1),typeof Zone>"u")throw new Ze(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!u&&o,d.shouldCoalesceRunChangeDetection=u,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function GE(){let r=fn.requestAnimationFrame,i=fn.cancelAnimationFrame;if(typeof Zone<"u"&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function qE(r){const i=()=>{!function J0(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(fn,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,py(r),r.isCheckStableRunning=!0,fy(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),py(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,d,_,C,N)=>{try{return X0(r),o.invokeTask(d,_,C,N)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||r.shouldCoalesceRunChangeDetection)&&i(),ew(r)}},onInvoke:(o,u,d,_,C,N,U)=>{try{return X0(r),o.invoke(d,_,C,N,U)}finally{r.shouldCoalesceRunChangeDetection&&i(),ew(r)}},onHasTask:(o,u,d,_)=>{o.hasTask(d,_),u===d&&("microTask"==_.change?(r._hasPendingMicrotasks=_.microTask,py(r),fy(r)):"macroTask"==_.change&&(r.hasPendingMacrotasks=_.macroTask))},onHandleError:(o,u,d,_)=>(o.handleError(d,_),r.runOutsideAngular(()=>r.onError.emit(_)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!al.isInAngularZone())throw new Ze(909,!1)}static assertNotInAngularZone(){if(al.isInAngularZone())throw new Ze(909,!1)}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,d){const _=this._inner,C=_.scheduleEventTask("NgZoneEvent: "+d,i,WE,Hp,Hp);try{return _.runTask(C,o,u)}finally{_.cancelTask(C)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const WE={};function fy(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function py(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function X0(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function ew(r){r._nesting--,fy(r)}class Ff{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bl,this.onMicrotaskEmpty=new bl,this.onStable=new bl,this.onError=new bl}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,d){return i.apply(o,u)}}const n=new ln(""),e=new ln("");let f,t=(()=>{class r{constructor(o,u,d){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,f||(function a(r){f=r}(d),d.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{al.assertNotInAngularZone(),hm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hm(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,d){let _=-1;u&&u>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==_),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:_,updateCb:d})}whenStable(o,u,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,d){return[]}}return r.\u0275fac=function(o){return new(o||r)(xt(al),xt(s),xt(e))},r.\u0275prov=nn({token:r,factory:r.\u0275fac}),r})(),s=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return f?.findTestabilityInTree(this,o,u)??null}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=nn({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),v=null;const M=new ln("AllowMultipleToken"),B=new ln("PlatformDestroyListeners");class Qe{constructor(i,o){this.name=i,this.token=o}}function li(r,i,o=[]){const u=`Platform: ${i}`,d=new ln(u);return(_=[])=>{let C=Mr();if(!C||C.injector.get(M,!1)){const N=[...o,..._,{provide:d,useValue:!0}];r?r(N):function ht(r){if(v&&!v.get(M,!1))throw new Ze(400,!1);v=r;const i=r.get($s);(function Jt(r){const i=r.get(kf,null);i&&i.forEach(o=>o())})(r)}(function xr(r=[],i){return wc.create({name:i,providers:[{provide:Hf,useValue:"platform"},{provide:B,useValue:new Set([()=>v=null])},...r]})}(N,u))}return function Qn(r){const i=Mr();if(!i)throw new Ze(401,!1);return i}()}}function Mr(){return v?.get($s)??null}let $s=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const d=function fm(r,i){let o;return o="noop"===r?new Ff:("zone.js"===r?void 0:r)||new al(i),o}(u?.ngZone,function Dl(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(u)),_=[{provide:al,useValue:d}];return d.run(()=>{const C=wc.create({providers:_,parent:this.injector,name:o.moduleType.name}),N=o.create(C),U=N.injector.get(zi,null);if(!U)throw new Ze(402,!1);return d.runOutsideAngular(()=>{const q=d.onError.subscribe({next:ne=>{U.handleError(ne)}});N.onDestroy(()=>{nw(this._modules,N),q.unsubscribe()})}),function SI(r,i,o){try{const u=o();return Kc(u)?u.catch(d=>{throw i.runOutsideAngular(()=>r.handleError(d)),d}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(U,d,()=>{const q=N.injector.get(Fu);return q.runInitializers(),q.donePromise.then(()=>(function Bv(r){jt(r,"Expected localeId to be defined"),"string"==typeof r&&(Vv=r.toLowerCase().replace(/_/g,"-"))}(N.injector.get(Rc,If)||If),this._moduleDoBootstrap(N),N))})})}bootstrapModule(o,u=[]){const d=AI({},u);return function ee(r,i,o){const u=new ya(o);return Promise.resolve(u)}(0,0,o).then(_=>this.bootstrapModuleFactory(_,d))}_moduleDoBootstrap(o){const u=o.injector.get(tw);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(d=>u.bootstrap(d));else{if(!o.instance.ngDoBootstrap)throw new Ze(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ze(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(B,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(xt(wc))},r.\u0275prov=nn({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function AI(r,i){return Array.isArray(i)?i.reduce(AI,r):{...r,...i}}let tw=(()=>{class r{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,u,d){this._zone=o,this._injector=u,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),C=new O.y(N=>{let U;this._zone.runOutsideAngular(()=>{U=this._zone.onStable.subscribe(()=>{al.assertNotInAngularZone(),hm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const q=this._zone.onUnstable.subscribe(()=>{al.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{U.unsubscribe(),q.unsubscribe()}});this.isStable=(0,xe.T)(_,C.pipe((0,Se.B)()))}bootstrap(o,u){const d=o instanceof G;if(!this._injector.get(Fu).done)throw!d&&Ln(o),new Ze(405,false);let C;C=d?o:this._injector.get(ut).resolveComponentFactory(o),this.componentTypes.push(C.componentType);const N=function ke(r){return r.isBoundToModule}(C)?void 0:this._injector.get(Dh),q=C.create(wc.NULL,[],u||C.selector,N),ne=q.location.nativeElement,ae=q.injector.get(n,null);return ae?.registerApplication(ne),q.onDestroy(()=>{this.detachView(q.hostView),nw(this.components,q),ae?.unregisterApplication(ne)}),this._loadComponent(q),q}tick(){if(this._runningTick)throw new Ze(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;nw(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(W0,[]);u.push(...this._bootstrapListeners),u.forEach(d=>d(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>nw(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Ze(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(o){return new(o||r)(xt(al),xt(Zl),xt(zi))},r.\u0275prov=nn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function nw(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}function BI(){return!1}let jI=(()=>{class r{}return r.__NG_ELEMENT_ID__=$I,r})();function $I(r){return function HI(r,i,o){if(nr(r)&&!o){const u=Mi(r.index,i);return new tf(u,u)}return 47&r.type?new tf(i[16],i):null}($i(),nt(),16==(16&r))}class PI{constructor(){}supports(i){return Xl(i)}create(i){return new KI(i)}}const ZI=(r,i)=>i;class KI{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||ZI}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,d=0,_=null;for(;o||u;){const C=!u||o&&o.currentIndex<kI(u,d,_)?o:u,N=kI(C,d,_),U=C.currentIndex;if(C===u)d--,u=u._nextRemoved;else if(o=o._next,null==C.previousIndex)d++;else{_||(_=[]);const q=N-d,ne=U-d;if(q!=ne){for(let Ne=0;Ne<q;Ne++){const He=Ne<_.length?_[Ne]:_[Ne]=0,vt=He+Ne;ne<=vt&&vt<q&&(_[Ne]=He+1)}_[C.previousIndex]=ne-q}}N!==U&&i(C,N,U)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Xl(i))throw new Ze(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let d,_,C,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let N=0;N<this.length;N++)_=i[N],C=this._trackByFn(N,_),null!==o&&Object.is(o.trackById,C)?(u&&(o=this._verifyReinsertion(o,_,C,N)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,C,N),u=!0),o=o._next}else d=0,function Dw(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[Jl()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,N=>{C=this._trackByFn(d,N),null!==o&&Object.is(o.trackById,C)?(u&&(o=this._verifyReinsertion(o,N,C,d)),Object.is(o.item,N)||this._addIdentityChange(o,N)):(o=this._mismatch(o,N,C,d),u=!0),o=o._next,d++}),this.length=d;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,d){let _;return null===i?_=this._itTail:(_=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,_,d)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,d))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,_,d)):i=this._addAfter(new YI(o,u),_,d),i}_verifyReinsertion(i,o,u,d){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==_?i=this._reinsertAfter(_,i._prev,d):i.currentIndex!=d&&(i.currentIndex=d,this._addToMoves(i,d)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const d=i._prevRemoved,_=i._nextRemoved;return null===d?this._removalsHead=_:d._nextRemoved=_,null===_?this._removalsTail=d:_._prevRemoved=d,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const d=null===o?this._itHead:o._next;return i._next=d,i._prev=o,null===d?this._itTail=i:d._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new OI),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new OI),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class YI{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class OI{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new QI,this.map.set(o,u)),u.add(i)}get(i,o){const d=this.map.get(i);return d?d.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kI(r,i,o){const u=r.previousIndex;if(null===u)return u;let d=0;return o&&u<o.length&&(d=o[u]),u+i+d}class FI{constructor(){}supports(i){return i instanceof Map||vg(i)}create(){return new JI}}class JI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||vg(i)))throw new Ze(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,d)=>{if(o&&o.key===d)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const _=this._getOrCreateRecordForKey(d,u);o=this._insertBeforeOrAppend(o,_)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const d=this._records.get(i);this._maybeAddToChanges(d,o);const _=d._prev,C=d._next;return _&&(_._next=C),C&&(C._prev=_),d._next=null,d._prev=null,d}const u=new XI(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class XI{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function LI(){return new JE([new PI])}let JE=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const d=u.factories.slice();o=o.concat(d)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||LI()),deps:[[r,new H,new ro]]}}find(o){const u=this.factories.find(d=>d.supports(o));if(null!=u)return u;throw new Ze(901,!1)}}return r.\u0275prov=nn({token:r,providedIn:"root",factory:LI}),r})();function UI(){return new XE([new FI])}let XE=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const d=u.factories.slice();o=o.concat(d)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||UI()),deps:[[r,new H,new ro]]}}find(o){const u=this.factories.find(d=>d.supports(o));if(u)return u;throw new Ze(901,!1)}}return r.\u0275prov=nn({token:r,providedIn:"root",factory:UI}),r})();const nC=li(null,"core",[]);let rC=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(xt(tw))},r.\u0275mod=mr({type:r}),r.\u0275inj=ti({}),r})();function iC(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},1481:(Kt,qe,Y)=>{Y.d(qe,{Dx:()=>hi,H7:()=>je,b2:()=>Ir,q6:()=>zr});var A=Y(6895),y=Y(4650);class O extends A.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class xe extends O{static makeCurrent(){(0,A.HT)(new xe)}onAndCancel(ye,oe,Ae){return ye.addEventListener(oe,Ae,!1),()=>{ye.removeEventListener(oe,Ae,!1)}}dispatchEvent(ye,oe){ye.dispatchEvent(oe)}remove(ye){ye.parentNode&&ye.parentNode.removeChild(ye)}createElement(ye,oe){return(oe=oe||this.getDefaultDocument()).createElement(ye)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ye){return ye.nodeType===Node.ELEMENT_NODE}isShadowRoot(ye){return ye instanceof DocumentFragment}getGlobalEventTarget(ye,oe){return"window"===oe?window:"document"===oe?ye:"body"===oe?ye.body:null}getBaseHref(ye){const oe=function Me(){return Se=Se||document.querySelector("base"),Se?Se.getAttribute("href"):null}();return null==oe?null:function Fe(ve){Le=Le||document.createElement("a"),Le.setAttribute("href",ve);const ye=Le.pathname;return"/"===ye.charAt(0)?ye:`/${ye}`}(oe)}resetBaseElement(){Se=null}getUserAgent(){return window.navigator.userAgent}getCookie(ye){return(0,A.Mx)(document.cookie,ye)}}let Le,Se=null;const Be=new y.OlP("TRANSITION_ID"),ge=[{provide:y.ip1,useFactory:function fe(ve,ye,oe){return()=>{oe.get(y.CZH).donePromise.then(()=>{const Ae=(0,A.q)(),_t=ye.querySelectorAll(`style[ng-transition="${ve}"]`);for(let Zt=0;Zt<_t.length;Zt++)Ae.remove(_t[Zt])})}},deps:[Be,A.K0,y.zs3],multi:!0}];let mt=(()=>{class ve{build(){return new XMLHttpRequest}}return ve.\u0275fac=function(oe){return new(oe||ve)},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const pt=new y.OlP("EventManagerPlugins");let At=(()=>{class ve{constructor(oe,Ae){this._zone=Ae,this._eventNameToPlugin=new Map,oe.forEach(_t=>_t.manager=this),this._plugins=oe.slice().reverse()}addEventListener(oe,Ae,_t){return this._findPluginFor(Ae).addEventListener(oe,Ae,_t)}addGlobalEventListener(oe,Ae,_t){return this._findPluginFor(Ae).addGlobalEventListener(oe,Ae,_t)}getZone(){return this._zone}_findPluginFor(oe){const Ae=this._eventNameToPlugin.get(oe);if(Ae)return Ae;const _t=this._plugins;for(let Zt=0;Zt<_t.length;Zt++){const Vn=_t[Zt];if(Vn.supports(oe))return this._eventNameToPlugin.set(oe,Vn),Vn}throw new Error(`No event manager plugin found for event ${oe}`)}}return ve.\u0275fac=function(oe){return new(oe||ve)(y.LFG(pt),y.LFG(y.R0b))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class Ht{constructor(ye){this._doc=ye}addGlobalEventListener(ye,oe,Ae){const _t=(0,A.q)().getGlobalEventTarget(this._doc,ye);if(!_t)throw new Error(`Unsupported event target ${_t} for event ${oe}`);return this.addEventListener(_t,oe,Ae)}}let Ze=(()=>{class ve{constructor(){this._stylesSet=new Set}addStyles(oe){const Ae=new Set;oe.forEach(_t=>{this._stylesSet.has(_t)||(this._stylesSet.add(_t),Ae.add(_t))}),this.onStylesAdded(Ae)}onStylesAdded(oe){}getAllStyles(){return Array.from(this._stylesSet)}}return ve.\u0275fac=function(oe){return new(oe||ve)},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})(),ft=(()=>{class ve extends Ze{constructor(oe){super(),this._doc=oe,this._hostNodes=new Map,this._hostNodes.set(oe.head,[])}_addStylesToHost(oe,Ae,_t){oe.forEach(Zt=>{const Vn=this._doc.createElement("style");Vn.textContent=Zt,_t.push(Ae.appendChild(Vn))})}addHost(oe){const Ae=[];this._addStylesToHost(this._stylesSet,oe,Ae),this._hostNodes.set(oe,Ae)}removeHost(oe){const Ae=this._hostNodes.get(oe);Ae&&Ae.forEach(et),this._hostNodes.delete(oe)}onStylesAdded(oe){this._hostNodes.forEach((Ae,_t)=>{this._addStylesToHost(oe,_t,Ae)})}ngOnDestroy(){this._hostNodes.forEach(oe=>oe.forEach(et))}}return ve.\u0275fac=function(oe){return new(oe||ve)(y.LFG(A.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();function et(ve){(0,A.q)().remove(ve)}const yt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gt=/%COMP%/g;function we(ve,ye){return ye.flat(100).map(oe=>oe.replace(gt,ve))}function Te(ve){return ye=>{if("__ngUnwrap__"===ye)return ve;!1===ve(ye)&&(ye.preventDefault(),ye.returnValue=!1)}}let Ie=(()=>{class ve{constructor(oe,Ae,_t){this.eventManager=oe,this.sharedStylesHost=Ae,this.appId=_t,this.rendererByCompId=new Map,this.defaultRenderer=new Ue(oe)}createRenderer(oe,Ae){if(!oe||!Ae)return this.defaultRenderer;switch(Ae.encapsulation){case y.ifc.Emulated:{let _t=this.rendererByCompId.get(Ae.id);return _t||(_t=new Rt(this.eventManager,this.sharedStylesHost,Ae,this.appId),this.rendererByCompId.set(Ae.id,_t)),_t.applyToHost(oe),_t}case y.ifc.ShadowDom:return new cn(this.eventManager,this.sharedStylesHost,oe,Ae);default:if(!this.rendererByCompId.has(Ae.id)){const _t=we(Ae.id,Ae.styles);this.sharedStylesHost.addStyles(_t),this.rendererByCompId.set(Ae.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ve.\u0275fac=function(oe){return new(oe||ve)(y.LFG(At),y.LFG(ft),y.LFG(y.AFp))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class Ue{constructor(ye){this.eventManager=ye,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ye,oe){return oe?document.createElementNS(yt[oe]||oe,ye):document.createElement(ye)}createComment(ye){return document.createComment(ye)}createText(ye){return document.createTextNode(ye)}appendChild(ye,oe){(Xe(ye)?ye.content:ye).appendChild(oe)}insertBefore(ye,oe,Ae){ye&&(Xe(ye)?ye.content:ye).insertBefore(oe,Ae)}removeChild(ye,oe){ye&&ye.removeChild(oe)}selectRootElement(ye,oe){let Ae="string"==typeof ye?document.querySelector(ye):ye;if(!Ae)throw new Error(`The selector "${ye}" did not match any elements`);return oe||(Ae.textContent=""),Ae}parentNode(ye){return ye.parentNode}nextSibling(ye){return ye.nextSibling}setAttribute(ye,oe,Ae,_t){if(_t){oe=_t+":"+oe;const Zt=yt[_t];Zt?ye.setAttributeNS(Zt,oe,Ae):ye.setAttribute(oe,Ae)}else ye.setAttribute(oe,Ae)}removeAttribute(ye,oe,Ae){if(Ae){const _t=yt[Ae];_t?ye.removeAttributeNS(_t,oe):ye.removeAttribute(`${Ae}:${oe}`)}else ye.removeAttribute(oe)}addClass(ye,oe){ye.classList.add(oe)}removeClass(ye,oe){ye.classList.remove(oe)}setStyle(ye,oe,Ae,_t){_t&(y.JOm.DashCase|y.JOm.Important)?ye.style.setProperty(oe,Ae,_t&y.JOm.Important?"important":""):ye.style[oe]=Ae}removeStyle(ye,oe,Ae){Ae&y.JOm.DashCase?ye.style.removeProperty(oe):ye.style[oe]=""}setProperty(ye,oe,Ae){ye[oe]=Ae}setValue(ye,oe){ye.nodeValue=oe}listen(ye,oe,Ae){return"string"==typeof ye?this.eventManager.addGlobalEventListener(ye,oe,Te(Ae)):this.eventManager.addEventListener(ye,oe,Te(Ae))}}function Xe(ve){return"TEMPLATE"===ve.tagName&&void 0!==ve.content}class Rt extends Ue{constructor(ye,oe,Ae,_t){super(ye),this.component=Ae;const Zt=we(_t+"-"+Ae.id,Ae.styles);oe.addStyles(Zt),this.contentAttr=function z(ve){return"_ngcontent-%COMP%".replace(gt,ve)}(_t+"-"+Ae.id),this.hostAttr=function tt(ve){return"_nghost-%COMP%".replace(gt,ve)}(_t+"-"+Ae.id)}applyToHost(ye){super.setAttribute(ye,this.hostAttr,"")}createElement(ye,oe){const Ae=super.createElement(ye,oe);return super.setAttribute(Ae,this.contentAttr,""),Ae}}class cn extends Ue{constructor(ye,oe,Ae,_t){super(ye),this.sharedStylesHost=oe,this.hostEl=Ae,this.shadowRoot=Ae.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Zt=we(_t.id,_t.styles);for(let Vn=0;Vn<Zt.length;Vn++){const fi=document.createElement("style");fi.textContent=Zt[Vn],this.shadowRoot.appendChild(fi)}}nodeOrShadowRoot(ye){return ye===this.hostEl?this.shadowRoot:ye}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ye,oe){return super.appendChild(this.nodeOrShadowRoot(ye),oe)}insertBefore(ye,oe,Ae){return super.insertBefore(this.nodeOrShadowRoot(ye),oe,Ae)}removeChild(ye,oe){return super.removeChild(this.nodeOrShadowRoot(ye),oe)}parentNode(ye){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ye)))}}let Nt=(()=>{class ve extends Ht{constructor(oe){super(oe)}supports(oe){return!0}addEventListener(oe,Ae,_t){return oe.addEventListener(Ae,_t,!1),()=>this.removeEventListener(oe,Ae,_t)}removeEventListener(oe,Ae,_t){return oe.removeEventListener(Ae,_t)}}return ve.\u0275fac=function(oe){return new(oe||ve)(y.LFG(A.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const jt=["alt","control","meta","shift"],Ot={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dn={alt:ve=>ve.altKey,control:ve=>ve.ctrlKey,meta:ve=>ve.metaKey,shift:ve=>ve.shiftKey};let Gt=(()=>{class ve extends Ht{constructor(oe){super(oe)}supports(oe){return null!=ve.parseEventName(oe)}addEventListener(oe,Ae,_t){const Zt=ve.parseEventName(Ae),Vn=ve.eventCallback(Zt.fullKey,_t,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,A.q)().onAndCancel(oe,Zt.domEventName,Vn))}static parseEventName(oe){const Ae=oe.toLowerCase().split("."),_t=Ae.shift();if(0===Ae.length||"keydown"!==_t&&"keyup"!==_t)return null;const Zt=ve._normalizeKey(Ae.pop());let Vn="",fi=Ae.indexOf("code");if(fi>-1&&(Ae.splice(fi,1),Vn="code."),jt.forEach(oi=>{const ds=Ae.indexOf(oi);ds>-1&&(Ae.splice(ds,1),Vn+=oi+".")}),Vn+=Zt,0!=Ae.length||0===Zt.length)return null;const ri={};return ri.domEventName=_t,ri.fullKey=Vn,ri}static matchEventFullKeyCode(oe,Ae){let _t=Ot[oe.key]||oe.key,Zt="";return Ae.indexOf("code.")>-1&&(_t=oe.code,Zt="code."),!(null==_t||!_t)&&(_t=_t.toLowerCase()," "===_t?_t="space":"."===_t&&(_t="dot"),jt.forEach(Vn=>{Vn!==_t&&(0,dn[Vn])(oe)&&(Zt+=Vn+".")}),Zt+=_t,Zt===Ae)}static eventCallback(oe,Ae,_t){return Zt=>{ve.matchEventFullKeyCode(Zt,oe)&&_t.runGuarded(()=>Ae(Zt))}}static _normalizeKey(oe){return"esc"===oe?"escape":oe}}return ve.\u0275fac=function(oe){return new(oe||ve)(y.LFG(A.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const zr=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:A.bD},{provide:y.g9A,useValue:function gr(){xe.makeCurrent()},multi:!0},{provide:A.K0,useFactory:function Vi(){return(0,y.RDi)(document),document},deps:[]}]),Er=new y.OlP(""),lr=[{provide:y.rWj,useClass:class De{addToWindow(ye){y.dqk.getAngularTestability=(Ae,_t=!0)=>{const Zt=ye.findTestabilityInTree(Ae,_t);if(null==Zt)throw new Error("Could not find testability for element.");return Zt},y.dqk.getAllAngularTestabilities=()=>ye.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>ye.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(Ae=>{const _t=y.dqk.getAllAngularTestabilities();let Zt=_t.length,Vn=!1;const fi=function(ri){Vn=Vn||ri,Zt--,0==Zt&&Ae(Vn)};_t.forEach(function(ri){ri.whenStable(fi)})})}findTestabilityInTree(ye,oe,Ae){return null==oe?null:ye.getTestability(oe)??(Ae?(0,A.q)().isShadowRoot(oe)?this.findTestabilityInTree(ye,oe.host,!0):this.findTestabilityInTree(ye,oe.parentElement,!0):null)}},deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],Tn=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function Zn(){return new y.qLn},deps:[]},{provide:pt,useClass:Nt,multi:!0,deps:[A.K0,y.R0b,y.Lbi]},{provide:pt,useClass:Gt,multi:!0,deps:[A.K0]},{provide:Ie,useClass:Ie,deps:[At,ft,y.AFp]},{provide:y.FYo,useExisting:Ie},{provide:Ze,useExisting:ft},{provide:ft,useClass:ft,deps:[A.K0]},{provide:At,useClass:At,deps:[pt,y.R0b]},{provide:A.JF,useClass:mt,deps:[]},[]];let Ir=(()=>{class ve{constructor(oe){}static withServerTransition(oe){return{ngModule:ve,providers:[{provide:y.AFp,useValue:oe.appId},{provide:Be,useExisting:y.AFp},ge]}}}return ve.\u0275fac=function(oe){return new(oe||ve)(y.LFG(Er,12))},ve.\u0275mod=y.oAB({type:ve}),ve.\u0275inj=y.cJS({providers:[...Tn,...lr],imports:[A.ez,y.hGG]}),ve})(),hi=(()=>{class ve{constructor(oe){this._doc=oe}getTitle(){return this._doc.title}setTitle(oe){this._doc.title=oe||""}}return ve.\u0275fac=function(oe){return new(oe||ve)(y.LFG(A.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:function(oe){let Ae=null;return Ae=oe?new oe:function On(){return new hi((0,y.LFG)(A.K0))}(),Ae},providedIn:"root"}),ve})();typeof window<"u"&&window;let je=(()=>{class ve{}return ve.\u0275fac=function(oe){return new(oe||ve)},ve.\u0275prov=y.Yz7({token:ve,factory:function(oe){let Ae=null;return Ae=oe?new(oe||ve):y.LFG(yn),Ae},providedIn:"root"}),ve})(),yn=(()=>{class ve extends je{constructor(oe){super(),this._doc=oe}sanitize(oe,Ae){if(null==Ae)return null;switch(oe){case y.q3G.NONE:return Ae;case y.q3G.HTML:return(0,y.qzn)(Ae,"HTML")?(0,y.z3N)(Ae):(0,y.EiD)(this._doc,String(Ae)).toString();case y.q3G.STYLE:return(0,y.qzn)(Ae,"Style")?(0,y.z3N)(Ae):Ae;case y.q3G.SCRIPT:if((0,y.qzn)(Ae,"Script"))return(0,y.z3N)(Ae);throw new Error("unsafe value used in a script context");case y.q3G.URL:return(0,y.qzn)(Ae,"URL")?(0,y.z3N)(Ae):(0,y.mCW)(String(Ae));case y.q3G.RESOURCE_URL:if((0,y.qzn)(Ae,"ResourceURL"))return(0,y.z3N)(Ae);throw new Error(`unsafe value used in a resource URL context (see ${y.JZr})`);default:throw new Error(`Unexpected SecurityContext ${oe} (see ${y.JZr})`)}}bypassSecurityTrustHtml(oe){return(0,y.JVY)(oe)}bypassSecurityTrustStyle(oe){return(0,y.L6k)(oe)}bypassSecurityTrustScript(oe){return(0,y.eBb)(oe)}bypassSecurityTrustUrl(oe){return(0,y.LAX)(oe)}bypassSecurityTrustResourceUrl(oe){return(0,y.pB0)(oe)}}return ve.\u0275fac=function(oe){return new(oe||ve)(y.LFG(A.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:function(oe){let Ae=null;return Ae=oe?new oe:function en(ve){return new yn(ve.get(A.K0))}(y.LFG(y.zs3)),Ae},providedIn:"root"}),ve})()},9051:(Kt,qe,Y)=>{Y.d(qe,{gz:()=>oo,F0:()=>Nr,rH:()=>Oa,Od:()=>kr,Bz:()=>Vs,lC:()=>Ps});var A=Y(4650),y=Y(8996),O=Y(9646),xe=Y(7579);class Se extends xe.x{constructor(x){super(),this._value=x}get value(){return this.getValue()}_subscribe(x){const E=super._subscribe(x);return!E.closed&&x.next(this._value),E}getValue(){const{hasError:x,thrownError:E,_value:P}=this;if(x)throw E;return this._throwIfClosed(),P}next(x){super.next(this._value=x)}}var Me=Y(6805),Le=Y(9751),Fe=Y(4742),Be=Y(4671),fe=Y(3268),ge=Y(7669),De=Y(1810),mt=Y(5403),pt=Y(9672);function At(...b){const x=(0,ge.yG)(b),E=(0,ge.jO)(b),{args:P,keys:$}=(0,Fe.D)(b);if(0===P.length)return(0,y.D)([],x);const J=new Le.y(function Ht(b,x,E=Be.y){return P=>{Ze(x,()=>{const{length:$}=b,J=new Array($);let re=$,Re=$;for(let ct=0;ct<$;ct++)Ze(x,()=>{const tn=(0,y.D)(b[ct],x);let Qt=!1;tn.subscribe((0,mt.x)(P,fr=>{J[ct]=fr,Qt||(Qt=!0,Re--),Re||P.next(E(J.slice()))},()=>{--re||P.complete()}))},P)},P)}}(P,x,$?re=>(0,De.n)($,re):Be.y));return E?J.pipe((0,fe.Z)(E)):J}function Ze(b,x,E){b?(0,pt.f)(E,b,x):x()}var ft=Y(7272),et=Y(8421);function yt(b){return new Le.y(x=>{(0,et.Xf)(b()).subscribe(x)})}var gt=Y(9635),it=Y(576);function Je(b,x){const E=(0,it.m)(b)?b:()=>b,P=$=>$.error(E());return new Le.y(x?$=>x.schedule(P,0,$):P)}var Tt=Y(515),wt=Y(727),z=Y(4482);function tt(){return(0,z.e)((b,x)=>{let E=null;b._refCount++;const P=(0,mt.x)(x,void 0,void 0,void 0,()=>{if(!b||b._refCount<=0||0<--b._refCount)return void(E=null);const $=b._connection,J=E;E=null,$&&(!J||$===J)&&$.unsubscribe(),x.unsubscribe()});b.subscribe(P),P.closed||(E=b.connect())})}class we extends Le.y{constructor(x,E){super(),this.source=x,this.subjectFactory=E,this._subject=null,this._refCount=0,this._connection=null,(0,z.A)(x)&&(this.lift=x.lift)}_subscribe(x){return this.getSubject().subscribe(x)}getSubject(){const x=this._subject;return(!x||x.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:x}=this;this._subject=this._connection=null,x?.unsubscribe()}connect(){let x=this._connection;if(!x){x=this._connection=new wt.w0;const E=this.getSubject();x.add(this.source.subscribe((0,mt.x)(E,void 0,()=>{this._teardown(),E.complete()},P=>{this._teardown(),E.error(P)},()=>this._teardown()))),x.closed&&(this._connection=null,x=wt.w0.EMPTY)}return x}refCount(){return tt()(this)}}var Te=Y(6895),Ie=Y(4004),Ue=Y(3900),_e=Y(5698),Ct=Y(8675),Xe=Y(9300),Rt=Y(5577),cn=Y(590);function Nt(b,x){return(0,it.m)(x)?(0,Rt.z)(b,x,1):(0,Rt.z)(b,1)}var jt=Y(8505);function Ot(b){return(0,z.e)((x,E)=>{let J,P=null,$=!1;P=x.subscribe((0,mt.x)(E,void 0,void 0,re=>{J=(0,et.Xf)(b(re,Ot(b)(x))),P?(P.unsubscribe(),P=null,J.subscribe(E)):$=!0})),$&&(P.unsubscribe(),P=null,J.subscribe(E))})}var dn=Y(5026);function Gt(b){return b<=0?()=>Tt.E:(0,z.e)((x,E)=>{let P=[];x.subscribe((0,mt.x)(E,$=>{P.push($),b<P.length&&P.shift()},()=>{for(const $ of P)E.next($);E.complete()},void 0,()=>{P=null}))})}var un=Y(8068),nn=Y(6590);function En(b,x){const E=arguments.length>=2;return P=>P.pipe(b?(0,Xe.h)(($,J)=>b($,J,P)):Be.y,Gt(1),E?(0,nn.d)(x):(0,un.T)(()=>new Me.K))}function gr(b){return(0,z.e)((x,E)=>{try{x.subscribe(E)}finally{E.add(b)}})}var Zn=Y(8189),Vi=Y(1481);const Xt="primary",zr=Symbol("RouteTitle");class Er{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const E=this.params[x];return Array.isArray(E)?E[0]:E}return null}getAll(x){if(this.has(x)){const E=this.params[x];return Array.isArray(E)?E:[E]}return[]}get keys(){return Object.keys(this.params)}}function lr(b){return new Er(b)}function Tn(b,x,E){const P=E.path.split("/");if(P.length>b.length||"full"===E.pathMatch&&(x.hasChildren()||P.length<b.length))return null;const $={};for(let J=0;J<P.length;J++){const re=P[J],Re=b[J];if(re.startsWith(":"))$[re.substring(1)]=Re;else if(re!==Re.path)return null}return{consumed:b.slice(0,P.length),posParams:$}}function kt(b,x){const E=b?Object.keys(b):void 0,P=x?Object.keys(x):void 0;if(!E||!P||E.length!=P.length)return!1;let $;for(let J=0;J<E.length;J++)if($=E[J],!ls(b[$],x[$]))return!1;return!0}function ls(b,x){if(Array.isArray(b)&&Array.isArray(x)){if(b.length!==x.length)return!1;const E=[...b].sort(),P=[...x].sort();return E.every(($,J)=>P[J]===$)}return b===x}function Wi(b){return Array.prototype.concat.apply([],b)}function On(b){return b.length>0?b[b.length-1]:null}function Cr(b,x){for(const E in b)b.hasOwnProperty(E)&&x(b[E],E)}function fn(b){return(0,A.CqO)(b)?b:(0,A.QGY)(b)?(0,y.D)(Promise.resolve(b)):(0,O.of)(b)}const an=!1,rn={exact:function Rr(b,x,E){if(!at(b.segments,x.segments)||!bi(b.segments,x.segments,E)||b.numberOfChildren!==x.numberOfChildren)return!1;for(const P in x.children)if(!b.children[P]||!Rr(b.children[P],x.children[P],E))return!1;return!0},subset:qr},cs={exact:function Wr(b,x){return kt(b,x)},subset:function Tr(b,x){return Object.keys(x).length<=Object.keys(b).length&&Object.keys(x).every(E=>ls(b[E],x[E]))},ignored:()=>!0};function zn(b,x,E){return rn[E.paths](b.root,x.root,E.matrixParams)&&cs[E.queryParams](b.queryParams,x.queryParams)&&!("exact"===E.fragment&&b.fragment!==x.fragment)}function qr(b,x,E){return Jn(b,x,x.segments,E)}function Jn(b,x,E,P){if(b.segments.length>E.length){const $=b.segments.slice(0,E.length);return!(!at($,E)||x.hasChildren()||!bi($,E,P))}if(b.segments.length===E.length){if(!at(b.segments,E)||!bi(b.segments,E,P))return!1;for(const $ in x.children)if(!b.children[$]||!qr(b.children[$],x.children[$],P))return!1;return!0}{const $=E.slice(0,b.segments.length),J=E.slice(b.segments.length);return!!(at(b.segments,$)&&bi(b.segments,$,P)&&b.children[Xt])&&Jn(b.children[Xt],x,J,P)}}function bi(b,x,E){return x.every((P,$)=>cs[E](b[$].parameters,P.parameters))}class Pn{constructor(x=new pn([],{}),E={},P=null){this.root=x,this.queryParams=E,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lr(this.queryParams)),this._queryParamMap}toString(){return Dn.serialize(this)}}class pn{constructor(x,E){this.segments=x,this.children=E,this.parent=null,Cr(E,(P,$)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ni(this)}}class Vr{constructor(x,E){this.path=x,this.parameters=E}get parameterMap(){return this._parameterMap||(this._parameterMap=lr(this.parameters)),this._parameterMap}toString(){return xn(this)}}function at(b,x){return b.length===x.length&&b.every((E,P)=>E.path===x[P].path)}let vn=(()=>{class b{}return b.\u0275fac=function(E){return new(E||b)},b.\u0275prov=A.Yz7({token:b,factory:function(){return new qt},providedIn:"root"}),b})();class qt{parse(x){const E=new ri(x);return new Pn(E.parseRootSegment(),E.parseQueryParams(),E.parseFragment())}serialize(x){const E=`/${pe(x.root,!0)}`,P=function ye(b){const x=Object.keys(b).map(E=>{const P=b[E];return Array.isArray(P)?P.map($=>`${Ce(E)}=${Ce($)}`).join("&"):`${Ce(E)}=${Ce(P)}`}).filter(E=>!!E);return x.length?`?${x.join("&")}`:""}(x.queryParams);return`${E}${P}${"string"==typeof x.fragment?`#${function st(b){return encodeURI(b)}(x.fragment)}`:""}`}}const Dn=new qt;function ni(b){return b.segments.map(x=>xn(x)).join("/")}function pe(b,x){if(!b.hasChildren())return ni(b);if(x){const E=b.children[Xt]?pe(b.children[Xt],!1):"",P=[];return Cr(b.children,($,J)=>{J!==Xt&&P.push(`${J}:${pe($,!1)}`)}),P.length>0?`${E}(${P.join("//")})`:E}{const E=function Pt(b,x){let E=[];return Cr(b.children,(P,$)=>{$===Xt&&(E=E.concat(x(P,$)))}),Cr(b.children,(P,$)=>{$!==Xt&&(E=E.concat(x(P,$)))}),E}(b,(P,$)=>$===Xt?[pe(b.children[Xt],!1)]:[`${$}:${pe(P,!1)}`]);return 1===Object.keys(b.children).length&&null!=b.children[Xt]?`${ni(b)}/${E[0]}`:`${ni(b)}/(${E.join("//")})`}}function he(b){return encodeURIComponent(b).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ce(b){return he(b).replace(/%3B/gi,";")}function je(b){return he(b).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function en(b){return decodeURIComponent(b)}function yn(b){return en(b.replace(/\+/g,"%20"))}function xn(b){return`${je(b.path)}${function ve(b){return Object.keys(b).map(x=>`;${je(x)}=${je(b[x])}`).join("")}(b.parameters)}`}const oe=/^[^\/()?;=#]+/;function Ae(b){const x=b.match(oe);return x?x[0]:""}const _t=/^[^=?&#]+/,Vn=/^[^&#]+/;class ri{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let E={};this.peekStartsWith("/(")&&(this.capture("/"),E=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(x.length>0||Object.keys(E).length>0)&&(P[Xt]=new pn(x,E)),P}parseSegment(){const x=Ae(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new A.vHH(4009,an);return this.capture(x),new Vr(en(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const E=Ae(this.remaining);if(!E)return;this.capture(E);let P="";if(this.consumeOptional("=")){const $=Ae(this.remaining);$&&(P=$,this.capture(P))}x[en(E)]=en(P)}parseQueryParam(x){const E=function Zt(b){const x=b.match(_t);return x?x[0]:""}(this.remaining);if(!E)return;this.capture(E);let P="";if(this.consumeOptional("=")){const re=function fi(b){const x=b.match(Vn);return x?x[0]:""}(this.remaining);re&&(P=re,this.capture(P))}const $=yn(E),J=yn(P);if(x.hasOwnProperty($)){let re=x[$];Array.isArray(re)||(re=[re],x[$]=re),re.push(J)}else x[$]=J}parseParens(x){const E={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=Ae(this.remaining),$=this.remaining[P.length];if("/"!==$&&")"!==$&&";"!==$)throw new A.vHH(4010,an);let J;P.indexOf(":")>-1?(J=P.slice(0,P.indexOf(":")),this.capture(J),this.capture(":")):x&&(J=Xt);const re=this.parseChildren();E[J]=1===Object.keys(re).length?re[Xt]:new pn([],re),this.consumeOptional("//")}return E}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new A.vHH(4011,an)}}function oi(b){return b.segments.length>0?new pn([],{[Xt]:b}):b}function ds(b){const x={};for(const P of Object.keys(b.children)){const J=ds(b.children[P]);(J.segments.length>0||J.hasChildren())&&(x[P]=J)}return function wa(b){if(1===b.numberOfChildren&&b.children[Xt]){const x=b.children[Xt];return new pn(b.segments.concat(x.segments),x.children)}return b}(new pn(b.segments,x))}function mr(b){return b instanceof Pn}function sr(b,x,E,P,$){if(0===E.length)return Ln(x.root,x.root,x.root,P,$);const J=function $t(b){if("string"==typeof b[0]&&1===b.length&&"/"===b[0])return new ts(!0,0,b);let x=0,E=!1;const P=b.reduce(($,J,re)=>{if("object"==typeof J&&null!=J){if(J.outlets){const Re={};return Cr(J.outlets,(ct,tn)=>{Re[tn]="string"==typeof ct?ct.split("/"):ct}),[...$,{outlets:Re}]}if(J.segmentPath)return[...$,J.segmentPath]}return"string"!=typeof J?[...$,J]:0===re?(J.split("/").forEach((Re,ct)=>{0==ct&&"."===Re||(0==ct&&""===Re?E=!0:".."===Re?x++:""!=Re&&$.push(Re))}),$):[...$,J]},[]);return new ts(E,x,P)}(E);return J.toRoot()?Ln(x.root,x.root,new pn([],{}),P,$):function re(ct){const tn=function vi(b,x,E,P){if(b.isAbsolute)return new Sn(x.root,!0,0);if(-1===P)return new Sn(E,E===x.root,0);return function qi(b,x,E){let P=b,$=x,J=E;for(;J>$;){if(J-=$,P=P.parent,!P)throw new A.vHH(4005,!1);$=P.segments.length}return new Sn(P,!1,$-J)}(E,P+(Dr(b.commands[0])?0:1),b.numberOfDoubleDots)}(J,x,b.snapshot?._urlSegment,ct),Qt=tn.processChildren?tr(tn.segmentGroup,tn.index,J.commands):ai(tn.segmentGroup,tn.index,J.commands);return Ln(x.root,tn.segmentGroup,Qt,P,$)}(b.snapshot?._lastPathIndex)}function Dr(b){return"object"==typeof b&&null!=b&&!b.outlets&&!b.segmentPath}function Br(b){return"object"==typeof b&&null!=b&&b.outlets}function Ln(b,x,E,P,$){let re,J={};P&&Cr(P,(ct,tn)=>{J[tn]=Array.isArray(ct)?ct.map(Qt=>`${Qt}`):`${ct}`}),re=b===x?E:br(b,x,E);const Re=oi(ds(re));return new Pn(Re,J,$)}function br(b,x,E){const P={};return Cr(b.children,($,J)=>{P[J]=$===x?E:br($,x,E)}),new pn(b.segments,P)}class ts{constructor(x,E,P){if(this.isAbsolute=x,this.numberOfDoubleDots=E,this.commands=P,x&&P.length>0&&Dr(P[0]))throw new A.vHH(4003,!1);const $=P.find(Br);if($&&$!==On(P))throw new A.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Sn{constructor(x,E,P){this.segmentGroup=x,this.processChildren=E,this.index=P}}function ai(b,x,E){if(b||(b=new pn([],{})),0===b.segments.length&&b.hasChildren())return tr(b,x,E);const P=function Eo(b,x,E){let P=0,$=x;const J={match:!1,pathIndex:0,commandIndex:0};for(;$<b.segments.length;){if(P>=E.length)return J;const re=b.segments[$],Re=E[P];if(Br(Re))break;const ct=`${Re}`,tn=P<E.length-1?E[P+1]:null;if($>0&&void 0===ct)break;if(ct&&tn&&"object"==typeof tn&&void 0===tn.outlets){if(!Gs(ct,tn,re))return J;P+=2}else{if(!Gs(ct,{},re))return J;P++}$++}return{match:!0,pathIndex:$,commandIndex:P}}(b,x,E),$=E.slice(P.commandIndex);if(P.match&&P.pathIndex<b.segments.length){const J=new pn(b.segments.slice(0,P.pathIndex),{});return J.children[Xt]=new pn(b.segments.slice(P.pathIndex),b.children),tr(J,0,$)}return P.match&&0===$.length?new pn(b.segments,{}):P.match&&!b.hasChildren()?Hs(b,x,E):P.match?tr(b,0,$):Hs(b,x,E)}function tr(b,x,E){if(0===E.length)return new pn(b.segments,{});{const P=function dr(b){return Br(b[0])?b[0].outlets:{[Xt]:b}}(E),$={};return!P[Xt]&&b.children[Xt]&&1===b.numberOfChildren&&0===b.children[Xt].segments.length?tr(b.children[Xt],x,E):(Cr(P,(J,re)=>{"string"==typeof J&&(J=[J]),null!==J&&($[re]=ai(b.children[re],x,J))}),Cr(b.children,(J,re)=>{void 0===P[re]&&($[re]=J)}),new pn(b.segments,$))}}function Hs(b,x,E){const P=b.segments.slice(0,x);let $=0;for(;$<E.length;){const J=E[$];if(Br(J)){const ct=Un(J.outlets);return new pn(P,ct)}if(0===$&&Dr(E[0])){P.push(new Vr(b.segments[x].path,so(E[0]))),$++;continue}const re=Br(J)?J.outlets[Xt]:`${J}`,Re=$<E.length-1?E[$+1]:null;re&&Re&&Dr(Re)?(P.push(new Vr(re,so(Re))),$+=2):(P.push(new Vr(re,{})),$++)}return new pn(P,{})}function Un(b){const x={};return Cr(b,(E,P)=>{"string"==typeof E&&(E=[E]),null!==E&&(x[P]=Hs(new pn([],{}),0,E))}),x}function so(b){const x={};return Cr(b,(E,P)=>x[P]=`${E}`),x}function Gs(b,x,E){return b==E.path&&kt(x,E.parameters)}const Vo="imperative";class ci{constructor(x,E){this.id=x,this.url=E}}class Ti extends ci{constructor(x,E,P="imperative",$=null){super(x,E),this.type=0,this.navigationTrigger=P,this.restoredState=$}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hs extends ci{constructor(x,E,P){super(x,E),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class As extends ci{constructor(x,E,P,$){super(x,E),this.reason=P,this.code=$,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fs extends ci{constructor(x,E,P,$){super(x,E),this.reason=P,this.code=$,this.type=16}}class xs extends ci{constructor(x,E,P,$){super(x,E),this.error=P,this.target=$,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ms extends ci{constructor(x,E,P,$){super(x,E),this.urlAfterRedirects=P,this.state=$,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ee extends ci{constructor(x,E,P,$){super(x,E),this.urlAfterRedirects=P,this.state=$,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class be extends ci{constructor(x,E,P,$,J){super(x,E),this.urlAfterRedirects=P,this.state=$,this.shouldActivate=J,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ve extends ci{constructor(x,E,P,$){super(x,E),this.urlAfterRedirects=P,this.state=$,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ge extends ci{constructor(x,E,P,$){super(x,E),this.urlAfterRedirects=P,this.state=$,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dt{constructor(x){this.route=x,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class St{constructor(x){this.route=x,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wn{constructor(x){this.snapshot=x,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ut{constructor(x){this.snapshot=x,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hr{constructor(x){this.snapshot=x,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class di{constructor(x){this.snapshot=x,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kr{constructor(x,E,P){this.routerEvent=x,this.position=E,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Bn=(()=>{class b{createUrlTree(E,P,$,J,re,Re){return sr(E||P.root,$,J,re,Re)}}return b.\u0275fac=function(E){return new(E||b)},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac}),b})(),ou=(()=>{class b{}return b.\u0275fac=function(E){return new(E||b)},b.\u0275prov=A.Yz7({token:b,factory:function(x){return Bn.\u0275fac(x)},providedIn:"root"}),b})();class ja{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const E=this.pathFromRoot(x);return E.length>1?E[E.length-2]:null}children(x){const E=ns(x,this._root);return E?E.children.map(P=>P.value):[]}firstChild(x){const E=ns(x,this._root);return E&&E.children.length>0?E.children[0].value:null}siblings(x){const E=Zi(x,this._root);return E.length<2?[]:E[E.length-2].children.map($=>$.value).filter($=>$!==x)}pathFromRoot(x){return Zi(x,this._root).map(E=>E.value)}}function ns(b,x){if(b===x.value)return x;for(const E of x.children){const P=ns(b,E);if(P)return P}return null}function Zi(b,x){if(b===x.value)return[x];for(const E of x.children){const P=Zi(b,E);if(P.length)return P.unshift(x),P}return[]}class Oi{constructor(x,E){this.value=x,this.children=E}toString(){return`TreeNode(${this.value})`}}function Si(b){const x={};return b&&b.children.forEach(E=>x[E.value.outlet]=E),x}class Io extends ja{constructor(x,E){super(x),this.snapshot=E,sa(this,x)}toString(){return this.snapshot.toString()}}function Rs(b,x){const E=function ia(b,x){const re=new ps([],{},{},"",{},Xt,x,null,b.root,-1,{});return new bu("",new Oi(re,[]))}(b,x),P=new Se([new Vr("",{})]),$=new Se({}),J=new Se({}),re=new Se({}),Re=new Se(""),ct=new oo(P,$,re,Re,J,Xt,x,E.root);return ct.snapshot=E.root,new Io(new Oi(ct,[]),E)}class oo{constructor(x,E,P,$,J,re,Re,ct){this.url=x,this.params=E,this.queryParams=P,this.fragment=$,this.data=J,this.outlet=re,this.component=Re,this.title=this.data?.pipe((0,Ie.U)(tn=>tn[zr]))??(0,O.of)(void 0),this._futureSnapshot=ct}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ie.U)(x=>lr(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ie.U)(x=>lr(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Co(b,x="emptyOnly"){const E=b.pathFromRoot;let P=0;if("always"!==x)for(P=E.length-1;P>=1;){const $=E[P],J=E[P-1];if($.routeConfig&&""===$.routeConfig.path)P--;else{if(J.component)break;P--}}return function zs(b){return b.reduce((x,E)=>({params:{...x.params,...E.params},data:{...x.data,...E.data},resolve:{...E.data,...x.resolve,...E.routeConfig?.data,...E._resolvedData}}),{params:{},data:{},resolve:{}})}(E.slice(P))}class ps{get title(){return this.data?.[zr]}constructor(x,E,P,$,J,re,Re,ct,tn,Qt,fr){this.url=x,this.params=E,this.queryParams=P,this.fragment=$,this.data=J,this.outlet=re,this.component=Re,this.routeConfig=ct,this._urlSegment=tn,this._lastPathIndex=Qt,this._resolve=fr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bu extends ja{constructor(x,E){super(E),this.url=x,sa(this,E)}toString(){return $a(this._root)}}function sa(b,x){x.value._routerState=b,x.children.forEach(E=>sa(b,E))}function $a(b){const x=b.children.length>0?` { ${b.children.map($a).join(", ")} } `:"";return`${b.value}${x}`}function ui(b){if(b.snapshot){const x=b.snapshot,E=b._futureSnapshot;b.snapshot=E,kt(x.queryParams,E.queryParams)||b.queryParams.next(E.queryParams),x.fragment!==E.fragment&&b.fragment.next(E.fragment),kt(x.params,E.params)||b.params.next(E.params),function Ir(b,x){if(b.length!==x.length)return!1;for(let E=0;E<b.length;++E)if(!kt(b[E],x[E]))return!1;return!0}(x.url,E.url)||b.url.next(E.url),kt(x.data,E.data)||b.data.next(E.data)}else b.snapshot=b._futureSnapshot,b.data.next(b._futureSnapshot.data)}function Hn(b,x){const E=kt(b.params,x.params)&&function xt(b,x){return at(b,x)&&b.every((E,P)=>kt(E.parameters,x[P].parameters))}(b.url,x.url);return E&&!(!b.parent!=!x.parent)&&(!b.parent||Hn(b.parent,x.parent))}function bo(b,x,E){if(E&&b.shouldReuseRoute(x.value,E.value.snapshot)){const P=E.value;P._futureSnapshot=x.value;const $=function Ia(b,x,E){return x.children.map(P=>{for(const $ of E.children)if(b.shouldReuseRoute(P.value,$.value.snapshot))return bo(b,P,$);return bo(b,P)})}(b,x,E);return new Oi(P,$)}{if(b.shouldAttach(x.value)){const J=b.retrieve(x.value);if(null!==J){const re=J.route;return re.value._futureSnapshot=x.value,re.children=x.children.map(Re=>bo(b,Re)),re}}const P=function rs(b){return new oo(new Se(b.url),new Se(b.params),new Se(b.queryParams),new Se(b.fragment),new Se(b.data),b.outlet,b.component,b)}(x.value),$=x.children.map(J=>bo(b,J));return new Oi(P,$)}}const Ns="ngNavigationCancelingError";function Bi(b,x){const{redirectTo:E,navigationBehaviorOptions:P}=mr(x)?{redirectTo:x,navigationBehaviorOptions:void 0}:x,$=Bo(!1,0,x);return $.url=E,$.navigationBehaviorOptions=P,$}function Bo(b,x,E){const P=new Error("NavigationCancelingError: "+(b||""));return P[Ns]=!0,P.cancellationCode=x,E&&(P.url=E),P}function Ai(b){return Ws(b)&&mr(b.url)}function Ws(b){return b&&b[Ns]}class ao{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new qs,this.attachRef=null}}let qs=(()=>{class b{constructor(){this.contexts=new Map}onChildOutletCreated(E,P){const $=this.getOrCreateContext(E);$.outlet=P,this.contexts.set(E,$)}onChildOutletDestroyed(E){const P=this.getContext(E);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let P=this.getContext(E);return P||(P=new ao,this.contexts.set(E,P)),P}getContext(E){return this.contexts.get(E)||null}}return b.\u0275fac=function(E){return new(E||b)},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const Ca=!1;let Ps=(()=>{class b{constructor(){this.activated=null,this._activatedRoute=null,this.name=Xt,this.activateEvents=new A.vpe,this.deactivateEvents=new A.vpe,this.attachEvents=new A.vpe,this.detachEvents=new A.vpe,this.parentContexts=(0,A.f3M)(qs),this.location=(0,A.f3M)(A.s_b),this.changeDetector=(0,A.f3M)(A.sBO),this.environmentInjector=(0,A.f3M)(A.lqb)}ngOnChanges(E){if(E.name){const{firstChange:P,previousValue:$}=E.name;if(P)return;this.isTrackedInParentContexts($)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed($)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(E){return this.parentContexts.getContext(E)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const E=this.parentContexts.getContext(this.name);E?.route&&(E.attachRef?this.attach(E.attachRef,E.route):this.activateWith(E.route,E.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A.vHH(4012,Ca);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A.vHH(4012,Ca);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A.vHH(4012,Ca);this.location.detach();const E=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(E.instance),E}attach(E,P){this.activated=E,this._activatedRoute=P,this.location.insert(E.hostView),this.attachEvents.emit(E.instance)}deactivate(){if(this.activated){const E=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,P){if(this.isActivated)throw new A.vHH(4013,Ca);this._activatedRoute=E;const $=this.location,re=E.snapshot.component,Re=this.parentContexts.getOrCreateContext(this.name).children,ct=new jo(E,Re,$.injector);if(P&&function gs(b){return!!b.resolveComponentFactory}(P)){const tn=P.resolveComponentFactory(re);this.activated=$.createComponent(tn,$.length,ct)}else this.activated=$.createComponent(re,{index:$.length,injector:ct,environmentInjector:P??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return b.\u0275fac=function(E){return new(E||b)},b.\u0275dir=A.lG2({type:b,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[A.TTD]}),b})();class jo{constructor(x,E,P){this.route=x,this.childContexts=E,this.parent=P}get(x,E){return x===oo?this.route:x===qs?this.childContexts:this.parent.get(x,E)}}let Sr=(()=>{class b{}return b.\u0275fac=function(E){return new(E||b)},b.\u0275cmp=A.Xpm({type:b,selectors:[["ng-component"]],standalone:!0,features:[A.jDz],decls:1,vars:0,template:function(E,P){1&E&&A._UZ(0,"router-outlet")},dependencies:[Ps],encapsulation:2}),b})();function uo(b,x){return b.providers&&!b._injector&&(b._injector=(0,A.MMx)(b.providers,x,`Route: ${b.path}`)),b._injector??x}function Zs(b){const x=b.children&&b.children.map(Zs),E=x?{...b,children:x}:{...b};return!E.component&&!E.loadComponent&&(x||E.loadChildren)&&E.outlet&&E.outlet!==Xt&&(E.component=Sr),E}function pi(b){return b.outlet||Xt}function ws(b,x){const E=b.filter(P=>pi(P)===x);return E.push(...b.filter(P=>pi(P)!==x)),E}function ki(b){if(!b)return null;if(b.routeConfig?._injector)return b.routeConfig._injector;for(let x=b.parent;x;x=x.parent){const E=x.routeConfig;if(E?._loadedInjector)return E._loadedInjector;if(E?._injector)return E._injector}return null}class $o{constructor(x,E,P,$){this.routeReuseStrategy=x,this.futureState=E,this.currState=P,this.forwardEvent=$}activate(x){const E=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(E,P,x),ui(this.futureState.root),this.activateChildRoutes(E,P,x)}deactivateChildRoutes(x,E,P){const $=Si(E);x.children.forEach(J=>{const re=J.value.outlet;this.deactivateRoutes(J,$[re],P),delete $[re]}),Cr($,(J,re)=>{this.deactivateRouteAndItsChildren(J,P)})}deactivateRoutes(x,E,P){const $=x.value,J=E?E.value:null;if($===J)if($.component){const re=P.getContext($.outlet);re&&this.deactivateChildRoutes(x,E,re.children)}else this.deactivateChildRoutes(x,E,P);else J&&this.deactivateRouteAndItsChildren(E,P)}deactivateRouteAndItsChildren(x,E){x.value.component&&this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,E):this.deactivateRouteAndOutlet(x,E)}detachAndStoreRouteSubtree(x,E){const P=E.getContext(x.value.outlet),$=P&&x.value.component?P.children:E,J=Si(x);for(const re of Object.keys(J))this.deactivateRouteAndItsChildren(J[re],$);if(P&&P.outlet){const re=P.outlet.detach(),Re=P.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:re,route:x,contexts:Re})}}deactivateRouteAndOutlet(x,E){const P=E.getContext(x.value.outlet),$=P&&x.value.component?P.children:E,J=Si(x);for(const re of Object.keys(J))this.deactivateRouteAndItsChildren(J[re],$);P&&P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated(),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(x,E,P){const $=Si(E);x.children.forEach(J=>{this.activateRoutes(J,$[J.value.outlet],P),this.forwardEvent(new di(J.value.snapshot))}),x.children.length&&this.forwardEvent(new Ut(x.value.snapshot))}activateRoutes(x,E,P){const $=x.value,J=E?E.value:null;if(ui($),$===J)if($.component){const re=P.getOrCreateContext($.outlet);this.activateChildRoutes(x,E,re.children)}else this.activateChildRoutes(x,E,P);else if($.component){const re=P.getOrCreateContext($.outlet);if(this.routeReuseStrategy.shouldAttach($.snapshot)){const Re=this.routeReuseStrategy.retrieve($.snapshot);this.routeReuseStrategy.store($.snapshot,null),re.children.onOutletReAttached(Re.contexts),re.attachRef=Re.componentRef,re.route=Re.route.value,re.outlet&&re.outlet.attach(Re.componentRef,Re.route.value),ui(Re.route.value),this.activateChildRoutes(x,null,re.children)}else{const Re=ki($.snapshot),ct=Re?.get(A._Vd)??null;re.attachRef=null,re.route=$,re.resolver=ct,re.injector=Re,re.outlet&&re.outlet.activateWith($,re.injector),this.activateChildRoutes(x,null,re.children)}}else this.activateChildRoutes(x,null,P)}}class An{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class Ho{constructor(x,E){this.component=x,this.route=E}}function vr(b,x,E){const P=b._root;return lo(P,x?x._root:null,E,[P.value])}function To(b,x){const E=Symbol(),P=x.get(b,E);return P===E?"function"!=typeof b||(0,A.Z0I)(b)?x.get(b):b:P}function lo(b,x,E,P,$={canDeactivateChecks:[],canActivateChecks:[]}){const J=Si(x);return b.children.forEach(re=>{(function Ha(b,x,E,P,$={canDeactivateChecks:[],canActivateChecks:[]}){const J=b.value,re=x?x.value:null,Re=E?E.getContext(b.value.outlet):null;if(re&&J.routeConfig===re.routeConfig){const ct=function aa(b,x,E){if("function"==typeof E)return E(b,x);switch(E){case"pathParamsChange":return!at(b.url,x.url);case"pathParamsOrQueryParamsChange":return!at(b.url,x.url)||!kt(b.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hn(b,x)||!kt(b.queryParams,x.queryParams);default:return!Hn(b,x)}}(re,J,J.routeConfig.runGuardsAndResolvers);ct?$.canActivateChecks.push(new An(P)):(J.data=re.data,J._resolvedData=re._resolvedData),lo(b,x,J.component?Re?Re.children:null:E,P,$),ct&&Re&&Re.outlet&&Re.outlet.isActivated&&$.canDeactivateChecks.push(new Ho(Re.outlet.component,re))}else re&&Es(x,Re,$),$.canActivateChecks.push(new An(P)),lo(b,null,J.component?Re?Re.children:null:E,P,$)})(re,J[re.value.outlet],E,P.concat([re.value]),$),delete J[re.value.outlet]}),Cr(J,(re,Re)=>Es(re,E.getContext(Re),$)),$}function Es(b,x,E){const P=Si(b),$=b.value;Cr(P,(J,re)=>{Es(J,$.component?x?x.children.getContext(re):null:x,E)}),E.canDeactivateChecks.push(new Ho($.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,$))}function nt(b){return"function"==typeof b}function zo(b){return b instanceof Me.K||"EmptyError"===b?.name}const Wo=Symbol("INITIAL_VALUE");function Do(){return(0,Ue.w)(b=>At(b.map(x=>x.pipe((0,_e.q)(1),(0,Ct.O)(Wo)))).pipe((0,Ie.U)(x=>{for(const E of x)if(!0!==E){if(E===Wo)return Wo;if(!1===E||E instanceof Pn)return E}return!0}),(0,Xe.h)(x=>x!==Wo),(0,_e.q)(1)))}function Aa(b){return(0,gt.z)((0,jt.b)(x=>{if(mr(x))throw Bi(0,x)}),(0,Ie.U)(x=>!0===x))}const Yt={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ls(b,x,E,P,$){const J=Fn(b,x,E);return J.matched?function Fs(b,x,E,P){const $=x.canMatch;if(!$||0===$.length)return(0,O.of)(!0);const J=$.map(re=>{const Re=To(re,b);return fn(function uu(b){return b&&nt(b.canMatch)}(Re)?Re.canMatch(x,E):b.runInContext(()=>Re(x,E)))});return(0,O.of)(J).pipe(Do(),Aa())}(P=uo(x,P),x,E).pipe((0,Ie.U)(re=>!0===re?J:{...Yt})):(0,O.of)(J)}function Fn(b,x,E){if(""===x.path)return"full"===x.pathMatch&&(b.hasChildren()||E.length>0)?{...Yt}:{matched:!0,consumedSegments:[],remainingSegments:E,parameters:{},positionalParamSegments:{}};const $=(x.matcher||Tn)(E,b,x);if(!$)return{...Yt};const J={};Cr($.posParams,(Re,ct)=>{J[ct]=Re.path});const re=$.consumed.length>0?{...J,...$.consumed[$.consumed.length-1].parameters}:J;return{matched:!0,consumedSegments:$.consumed,remainingSegments:E.slice($.consumed.length),parameters:re,positionalParamSegments:$.posParams??{}}}function So(b,x,E,P){if(E.length>0&&function Du(b,x,E){return E.some(P=>Ao(b,x,P)&&pi(P)!==Xt)}(b,E,P)){const J=new pn(x,function wi(b,x,E,P){const $={};$[Xt]=P,P._sourceSegment=b,P._segmentIndexShift=x.length;for(const J of E)if(""===J.path&&pi(J)!==Xt){const re=new pn([],{});re._sourceSegment=b,re._segmentIndexShift=x.length,$[pi(J)]=re}return $}(b,x,P,new pn(E,b.children)));return J._sourceSegment=b,J._segmentIndexShift=x.length,{segmentGroup:J,slicedSegments:[]}}if(0===E.length&&function Su(b,x,E){return E.some(P=>Ao(b,x,P))}(b,E,P)){const J=new pn(b.segments,function lu(b,x,E,P,$){const J={};for(const re of P)if(Ao(b,E,re)&&!$[pi(re)]){const Re=new pn([],{});Re._sourceSegment=b,Re._segmentIndexShift=x.length,J[pi(re)]=Re}return{...$,...J}}(b,x,E,P,b.children));return J._sourceSegment=b,J._segmentIndexShift=x.length,{segmentGroup:J,slicedSegments:E}}const $=new pn(b.segments,b.children);return $._sourceSegment=b,$._segmentIndexShift=x.length,{segmentGroup:$,slicedSegments:E}}function Ao(b,x,E){return(!(b.hasChildren()||x.length>0)||"full"!==E.pathMatch)&&""===E.path}function Zo(b,x,E,P){return!!(pi(b)===P||P!==Xt&&Ao(x,E,b))&&("**"===b.path||Fn(x,b,E).matched)}function Wa(b,x,E){return 0===x.length&&!b.children[E]}const ii=!1;class Cs{constructor(x){this.segmentGroup=x||null}}class Kn{constructor(x){this.urlTree=x}}function Hi(b){return Je(new Cs(b))}function jr(b){return Je(new Kn(b))}class Li{constructor(x,E,P,$,J){this.injector=x,this.configLoader=E,this.urlSerializer=P,this.urlTree=$,this.config=J,this.allowRedirects=!0}apply(){const x=So(this.urlTree.root,[],[],this.config).segmentGroup,E=new pn(x.segments,x.children);return this.expandSegmentGroup(this.injector,this.config,E,Xt).pipe((0,Ie.U)(J=>this.createUrlTree(ds(J),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ot(J=>{if(J instanceof Kn)return this.allowRedirects=!1,this.match(J.urlTree);throw J instanceof Cs?this.noMatchError(J):J}))}match(x){return this.expandSegmentGroup(this.injector,this.config,x.root,Xt).pipe((0,Ie.U)($=>this.createUrlTree(ds($),x.queryParams,x.fragment))).pipe(Ot($=>{throw $ instanceof Cs?this.noMatchError($):$}))}noMatchError(x){return new A.vHH(4002,ii)}createUrlTree(x,E,P){const $=oi(x);return new Pn($,E,P)}expandSegmentGroup(x,E,P,$){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(x,E,P).pipe((0,Ie.U)(J=>new pn([],J))):this.expandSegment(x,P,E,P.segments,$,!0)}expandChildren(x,E,P){const $=[];for(const J of Object.keys(P.children))"primary"===J?$.unshift(J):$.push(J);return(0,y.D)($).pipe(Nt(J=>{const re=P.children[J],Re=ws(E,J);return this.expandSegmentGroup(x,Re,re,J).pipe((0,Ie.U)(ct=>({segment:ct,outlet:J})))}),(0,dn.R)((J,re)=>(J[re.outlet]=re.segment,J),{}),En())}expandSegment(x,E,P,$,J,re){return(0,y.D)(P).pipe(Nt(Re=>this.expandSegmentAgainstRoute(x,E,P,Re,$,J,re).pipe(Ot(tn=>{if(tn instanceof Cs)return(0,O.of)(null);throw tn}))),(0,cn.P)(Re=>!!Re),Ot((Re,ct)=>{if(zo(Re))return Wa(E,$,J)?(0,O.of)(new pn([],{})):Hi(E);throw Re}))}expandSegmentAgainstRoute(x,E,P,$,J,re,Re){return Zo($,E,J,re)?void 0===$.redirectTo?this.matchSegmentAgainstRoute(x,E,$,J,re):Re&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,E,P,$,J,re):Hi(E):Hi(E)}expandSegmentAgainstRouteUsingRedirect(x,E,P,$,J,re){return"**"===$.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,P,$,re):this.expandRegularSegmentAgainstRouteUsingRedirect(x,E,P,$,J,re)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,E,P,$){const J=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?jr(J):this.lineralizeSegments(P,J).pipe((0,Rt.z)(re=>{const Re=new pn(re,{});return this.expandSegment(x,Re,E,re,$,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,E,P,$,J,re){const{matched:Re,consumedSegments:ct,remainingSegments:tn,positionalParamSegments:Qt}=Fn(E,$,J);if(!Re)return Hi(E);const fr=this.applyRedirectCommands(ct,$.redirectTo,Qt);return $.redirectTo.startsWith("/")?jr(fr):this.lineralizeSegments($,fr).pipe((0,Rt.z)(Ii=>this.expandSegment(x,E,P,Ii.concat(tn),re,!1)))}matchSegmentAgainstRoute(x,E,P,$,J){return"**"===P.path?(x=uo(P,x),P.loadChildren?(P._loadedRoutes?(0,O.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):this.configLoader.loadChildren(x,P)).pipe((0,Ie.U)(Re=>(P._loadedRoutes=Re.routes,P._loadedInjector=Re.injector,new pn($,{})))):(0,O.of)(new pn($,{}))):Ls(E,P,$,x).pipe((0,Ue.w)(({matched:re,consumedSegments:Re,remainingSegments:ct})=>re?this.getChildConfig(x=P._injector??x,P,$).pipe((0,Rt.z)(Qt=>{const fr=Qt.injector??x,Ii=Qt.routes,{segmentGroup:_s,slicedSegments:ro}=So(E,Re,ct,Ii),V=new pn(_s.segments,_s.children);if(0===ro.length&&V.hasChildren())return this.expandChildren(fr,Ii,V).pipe((0,Ie.U)(Oe=>new pn(Re,Oe)));if(0===Ii.length&&0===ro.length)return(0,O.of)(new pn(Re,{}));const H=pi(P)===J;return this.expandSegment(fr,V,Ii,ro,H?Xt:J,!0).pipe((0,Ie.U)(ue=>new pn(Re.concat(ue.segments),ue.children)))})):Hi(E)))}getChildConfig(x,E,P){return E.children?(0,O.of)({routes:E.children,injector:x}):E.loadChildren?void 0!==E._loadedRoutes?(0,O.of)({routes:E._loadedRoutes,injector:E._loadedInjector}):function ks(b,x,E,P){const $=x.canLoad;if(void 0===$||0===$.length)return(0,O.of)(!0);const J=$.map(re=>{const Re=To(re,b);return fn(function Da(b){return b&&nt(b.canLoad)}(Re)?Re.canLoad(x,E):b.runInContext(()=>Re(x,E)))});return(0,O.of)(J).pipe(Do(),Aa())}(x,E,P).pipe((0,Rt.z)($=>$?this.configLoader.loadChildren(x,E).pipe((0,jt.b)(J=>{E._loadedRoutes=J.routes,E._loadedInjector=J.injector})):function xa(b){return Je(Bo(ii,3))}())):(0,O.of)({routes:[],injector:x})}lineralizeSegments(x,E){let P=[],$=E.root;for(;;){if(P=P.concat($.segments),0===$.numberOfChildren)return(0,O.of)(P);if($.numberOfChildren>1||!$.children[Xt])return Je(new A.vHH(4e3,ii));$=$.children[Xt]}}applyRedirectCommands(x,E,P){return this.applyRedirectCreateUrlTree(E,this.urlSerializer.parse(E),x,P)}applyRedirectCreateUrlTree(x,E,P,$){const J=this.createSegmentGroup(x,E.root,P,$);return new Pn(J,this.createQueryParams(E.queryParams,this.urlTree.queryParams),E.fragment)}createQueryParams(x,E){const P={};return Cr(x,($,J)=>{if("string"==typeof $&&$.startsWith(":")){const Re=$.substring(1);P[J]=E[Re]}else P[J]=$}),P}createSegmentGroup(x,E,P,$){const J=this.createSegments(x,E.segments,P,$);let re={};return Cr(E.children,(Re,ct)=>{re[ct]=this.createSegmentGroup(x,Re,P,$)}),new pn(J,re)}createSegments(x,E,P,$){return E.map(J=>J.path.startsWith(":")?this.findPosParam(x,J,$):this.findOrReturn(J,P))}findPosParam(x,E,P){const $=P[E.path.substring(1)];if(!$)throw new A.vHH(4001,ii);return $}findOrReturn(x,E){let P=0;for(const $ of E){if($.path===x.path)return E.splice(P),$;P++}return x}}class ho{}class L{constructor(x,E,P,$,J,re,Re){this.injector=x,this.rootComponentType=E,this.config=P,this.urlTree=$,this.url=J,this.paramsInheritanceStrategy=re,this.urlSerializer=Re}recognize(){const x=So(this.urlTree.root,[],[],this.config.filter(E=>void 0===E.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,x,Xt).pipe((0,Ie.U)(E=>{if(null===E)return null;const P=new ps([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xt,this.rootComponentType,null,this.urlTree.root,-1,{}),$=new Oi(P,E),J=new bu(this.url,$);return this.inheritParamsAndData(J._root),J}))}inheritParamsAndData(x){const E=x.value,P=Co(E,this.paramsInheritanceStrategy);E.params=Object.freeze(P.params),E.data=Object.freeze(P.data),x.children.forEach($=>this.inheritParamsAndData($))}processSegmentGroup(x,E,P,$){return 0===P.segments.length&&P.hasChildren()?this.processChildren(x,E,P):this.processSegment(x,E,P,P.segments,$)}processChildren(x,E,P){return(0,y.D)(Object.keys(P.children)).pipe(Nt($=>{const J=P.children[$],re=ws(E,$);return this.processSegmentGroup(x,re,J,$)}),(0,dn.R)(($,J)=>$&&J?($.push(...J),$):null),function ti(b,x=!1){return(0,z.e)((E,P)=>{let $=0;E.subscribe((0,mt.x)(P,J=>{const re=b(J,$++);(re||x)&&P.next(J),!re&&P.complete()}))})}($=>null!==$),(0,nn.d)(null),En(),(0,Ie.U)($=>{if(null===$)return null;const J=lt($);return function Q(b){b.sort((x,E)=>x.value.outlet===Xt?-1:E.value.outlet===Xt?1:x.value.outlet.localeCompare(E.value.outlet))}(J),J}))}processSegment(x,E,P,$,J){return(0,y.D)(E).pipe(Nt(re=>this.processSegmentAgainstRoute(re._injector??x,re,P,$,J)),(0,cn.P)(re=>!!re),Ot(re=>{if(zo(re))return Wa(P,$,J)?(0,O.of)([]):(0,O.of)(null);throw re}))}processSegmentAgainstRoute(x,E,P,$,J){if(E.redirectTo||!Zo(E,P,$,J))return(0,O.of)(null);let re;if("**"===E.path){const Re=$.length>0?On($).parameters:{},ct=Yn(P)+$.length,tn=new ps($,Re,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jn(E),pi(E),E.component??E._loadedComponent??null,E,Xn(P),ct,Yr(E));re=(0,O.of)({snapshot:tn,consumedSegments:[],remainingSegments:[]})}else re=Ls(P,E,$,x).pipe((0,Ie.U)(({matched:Re,consumedSegments:ct,remainingSegments:tn,parameters:Qt})=>{if(!Re)return null;const fr=Yn(P)+ct.length;return{snapshot:new ps(ct,Qt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jn(E),pi(E),E.component??E._loadedComponent??null,E,Xn(P),fr,Yr(E)),consumedSegments:ct,remainingSegments:tn}}));return re.pipe((0,Ue.w)(Re=>{if(null===Re)return(0,O.of)(null);const{snapshot:ct,consumedSegments:tn,remainingSegments:Qt}=Re;x=E._injector??x;const fr=E._loadedInjector??x,Ii=function ce(b){return b.children?b.children:b.loadChildren?b._loadedRoutes:[]}(E),{segmentGroup:_s,slicedSegments:ro}=So(P,tn,Qt,Ii.filter(H=>void 0===H.redirectTo));if(0===ro.length&&_s.hasChildren())return this.processChildren(fr,Ii,_s).pipe((0,Ie.U)(H=>null===H?null:[new Oi(ct,H)]));if(0===Ii.length&&0===ro.length)return(0,O.of)([new Oi(ct,[])]);const V=pi(E)===J;return this.processSegment(fr,Ii,_s,ro,V?Xt:J).pipe((0,Ie.U)(H=>null===H?null:[new Oi(ct,H)]))}))}}function ze(b){const x=b.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function lt(b){const x=[],E=new Set;for(const P of b){if(!ze(P)){x.push(P);continue}const $=x.find(J=>P.value.routeConfig===J.value.routeConfig);void 0!==$?($.children.push(...P.children),E.add($)):x.push(P)}for(const P of E){const $=lt(P.children);x.push(new Oi(P.value,$))}return x.filter(P=>!E.has(P))}function Xn(b){let x=b;for(;x._sourceSegment;)x=x._sourceSegment;return x}function Yn(b){let x=b,E=x._segmentIndexShift??0;for(;x._sourceSegment;)x=x._sourceSegment,E+=x._segmentIndexShift??0;return E-1}function jn(b){return b.data||{}}function Yr(b){return b.resolve||{}}function Xs(b){return"string"==typeof b.title||null===b.title}function Ra(b){return(0,Ue.w)(x=>{const E=b(x);return E?(0,y.D)(E).pipe((0,Ie.U)(()=>x)):(0,O.of)(x)})}const eo=new A.OlP("ROUTES");let Mo=(()=>{class b{constructor(E,P){this.injector=E,this.compiler=P,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(E){if(this.componentLoaders.get(E))return this.componentLoaders.get(E);if(E._loadedComponent)return(0,O.of)(E._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(E);const P=fn(E.loadComponent()).pipe((0,Ie.U)(Ko),(0,jt.b)(J=>{this.onLoadEndListener&&this.onLoadEndListener(E),E._loadedComponent=J}),gr(()=>{this.componentLoaders.delete(E)})),$=new we(P,()=>new xe.x).pipe(tt());return this.componentLoaders.set(E,$),$}loadChildren(E,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,O.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const J=this.loadModuleFactoryOrRoutes(P.loadChildren).pipe((0,Ie.U)(Re=>{this.onLoadEndListener&&this.onLoadEndListener(P);let ct,tn,Qt=!1;Array.isArray(Re)?tn=Re:(ct=Re.create(E).injector,tn=Wi(ct.get(eo,[],A.XFs.Self|A.XFs.Optional)));return{routes:tn.map(Zs),injector:ct}}),gr(()=>{this.childrenLoaders.delete(P)})),re=new we(J,()=>new xe.x).pipe(tt());return this.childrenLoaders.set(P,re),re}loadModuleFactoryOrRoutes(E){return fn(E()).pipe((0,Ie.U)(Ko),(0,Rt.z)($=>$ instanceof A.YKP||Array.isArray($)?(0,O.of)($):(0,y.D)(this.compiler.compileModuleAsync($))))}}return b.\u0275fac=function(E){return new(E||b)(A.LFG(A.zs3),A.LFG(A.Sil))},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Ko(b){return function qa(b){return b&&"object"==typeof b&&"default"in b}(b)?b.default:b}let Ts=(()=>{class b{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new xe.x,this.configLoader=(0,A.f3M)(Mo),this.environmentInjector=(0,A.f3M)(A.lqb),this.urlSerializer=(0,A.f3M)(vn),this.rootContexts=(0,A.f3M)(qs),this.navigationId=0,this.afterPreactivation=()=>(0,O.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=$=>this.events.next(new St($)),this.configLoader.onLoadStartListener=$=>this.events.next(new dt($))}complete(){this.transitions?.complete()}handleNavigationRequest(E){const P=++this.navigationId;this.transitions?.next({...this.transitions.value,...E,id:P})}setupNavigations(E){return this.transitions=new Se({id:0,targetPageId:0,currentUrlTree:E.currentUrlTree,currentRawUrl:E.currentUrlTree,extractedUrl:E.urlHandlingStrategy.extract(E.currentUrlTree),urlAfterRedirects:E.urlHandlingStrategy.extract(E.currentUrlTree),rawUrl:E.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Vo,restoredState:null,currentSnapshot:E.routerState.snapshot,targetSnapshot:null,currentRouterState:E.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Xe.h)(P=>0!==P.id),(0,Ie.U)(P=>({...P,extractedUrl:E.urlHandlingStrategy.extract(P.rawUrl)})),(0,Ue.w)(P=>{let $=!1,J=!1;return(0,O.of)(P).pipe((0,jt.b)(re=>{this.currentNavigation={id:re.id,initialUrl:re.rawUrl,extractedUrl:re.extractedUrl,trigger:re.source,extras:re.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ue.w)(re=>{const Re=E.browserUrlTree.toString(),ct=!E.navigated||re.extractedUrl.toString()!==Re||Re!==E.currentUrlTree.toString();if(!ct&&"reload"!==(re.extras.onSameUrlNavigation??E.onSameUrlNavigation)){const Qt="";return this.events.next(new fs(re.id,E.serializeUrl(P.rawUrl),Qt,0)),E.rawUrlTree=re.rawUrl,re.resolve(null),Tt.E}if(E.urlHandlingStrategy.shouldProcessUrl(re.rawUrl))return xu(re.source)&&(E.browserUrlTree=re.extractedUrl),(0,O.of)(re).pipe((0,Ue.w)(Qt=>{const fr=this.transitions?.getValue();return this.events.next(new Ti(Qt.id,this.urlSerializer.serialize(Qt.extractedUrl),Qt.source,Qt.restoredState)),fr!==this.transitions?.getValue()?Tt.E:Promise.resolve(Qt)}),function Au(b,x,E,P){return(0,Ue.w)($=>function Ki(b,x,E,P,$){return new Li(b,x,E,P,$).apply()}(b,x,E,$.extractedUrl,P).pipe((0,Ie.U)(J=>({...$,urlAfterRedirects:J}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,E.config),(0,jt.b)(Qt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Qt.urlAfterRedirects},P.urlAfterRedirects=Qt.urlAfterRedirects}),function rr(b,x,E,P,$){return(0,Rt.z)(J=>function K(b,x,E,P,$,J,re="emptyOnly"){return new L(b,x,E,P,$,re,J).recognize().pipe((0,Ue.w)(Re=>null===Re?function k(b){return new Le.y(x=>x.error(b))}(new ho):(0,O.of)(Re)))}(b,x,E,J.urlAfterRedirects,P.serialize(J.urlAfterRedirects),P,$).pipe((0,Ie.U)(re=>({...J,targetSnapshot:re}))))}(this.environmentInjector,this.rootComponentType,E.config,this.urlSerializer,E.paramsInheritanceStrategy),(0,jt.b)(Qt=>{if(P.targetSnapshot=Qt.targetSnapshot,"eager"===E.urlUpdateStrategy){if(!Qt.extras.skipLocationChange){const Ii=E.urlHandlingStrategy.merge(Qt.urlAfterRedirects,Qt.rawUrl);E.setBrowserUrl(Ii,Qt)}E.browserUrlTree=Qt.urlAfterRedirects}const fr=new Ms(Qt.id,this.urlSerializer.serialize(Qt.extractedUrl),this.urlSerializer.serialize(Qt.urlAfterRedirects),Qt.targetSnapshot);this.events.next(fr)}));if(ct&&E.urlHandlingStrategy.shouldProcessUrl(E.rawUrlTree)){const{id:Qt,extractedUrl:fr,source:Ii,restoredState:_s,extras:ro}=re,V=new Ti(Qt,this.urlSerializer.serialize(fr),Ii,_s);this.events.next(V);const H=Rs(fr,this.rootComponentType).snapshot;return P={...re,targetSnapshot:H,urlAfterRedirects:fr,extras:{...ro,skipLocationChange:!1,replaceUrl:!1}},(0,O.of)(P)}{const Qt="";return this.events.next(new fs(re.id,E.serializeUrl(P.extractedUrl),Qt,1)),E.rawUrlTree=re.rawUrl,re.resolve(null),Tt.E}}),(0,jt.b)(re=>{const Re=new Ee(re.id,this.urlSerializer.serialize(re.extractedUrl),this.urlSerializer.serialize(re.urlAfterRedirects),re.targetSnapshot);this.events.next(Re)}),(0,Ie.U)(re=>P={...re,guards:vr(re.targetSnapshot,re.currentSnapshot,this.rootContexts)}),function za(b,x){return(0,Rt.z)(E=>{const{targetSnapshot:P,currentSnapshot:$,guards:{canActivateChecks:J,canDeactivateChecks:re}}=E;return 0===re.length&&0===J.length?(0,O.of)({...E,guardsResult:!0}):function gi(b,x,E,P){return(0,y.D)(b).pipe((0,Rt.z)($=>function qo(b,x,E,P,$){const J=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!J||0===J.length)return(0,O.of)(!0);const re=J.map(Re=>{const ct=ki(x)??$,tn=To(Re,ct);return fn(function Is(b){return b&&nt(b.canDeactivate)}(tn)?tn.canDeactivate(b,x,E,P):ct.runInContext(()=>tn(b,x,E,P))).pipe((0,cn.P)())});return(0,O.of)(re).pipe(Do())}($.component,$.route,E,x,P)),(0,cn.P)($=>!0!==$,!0))}(re,P,$,b).pipe((0,Rt.z)(Re=>Re&&function ar(b){return"boolean"==typeof b}(Re)?function Fi(b,x,E,P){return(0,y.D)(x).pipe(Nt($=>(0,ft.z)(function Os(b,x){return null!==b&&x&&x(new wn(b)),(0,O.of)(!0)}($.route.parent,P),function Ks(b,x){return null!==b&&x&&x(new hr(b)),(0,O.of)(!0)}($.route,P),function Sa(b,x,E){const P=x[x.length-1],J=x.slice(0,x.length-1).reverse().map(re=>function Go(b){const x=b.routeConfig?b.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:b,guards:x}:null}(re)).filter(re=>null!==re).map(re=>yt(()=>{const Re=re.guards.map(ct=>{const tn=ki(re.node)??E,Qt=To(ct,tn);return fn(function $i(b){return b&&nt(b.canActivateChild)}(Qt)?Qt.canActivateChild(P,b):tn.runInContext(()=>Qt(P,b))).pipe((0,cn.P)())});return(0,O.of)(Re).pipe(Do())}));return(0,O.of)(J).pipe(Do())}(b,$.path,E),function Ys(b,x,E){const P=x.routeConfig?x.routeConfig.canActivate:null;if(!P||0===P.length)return(0,O.of)(!0);const $=P.map(J=>yt(()=>{const re=ki(x)??E,Re=To(J,re);return fn(function co(b){return b&&nt(b.canActivate)}(Re)?Re.canActivate(x,b):re.runInContext(()=>Re(x,b))).pipe((0,cn.P)())}));return(0,O.of)($).pipe(Do())}(b,$.route,E))),(0,cn.P)($=>!0!==$,!0))}(P,J,b,x):(0,O.of)(Re)),(0,Ie.U)(Re=>({...E,guardsResult:Re})))})}(this.environmentInjector,re=>this.events.next(re)),(0,jt.b)(re=>{if(P.guardsResult=re.guardsResult,mr(re.guardsResult))throw Bi(0,re.guardsResult);const Re=new be(re.id,this.urlSerializer.serialize(re.extractedUrl),this.urlSerializer.serialize(re.urlAfterRedirects),re.targetSnapshot,!!re.guardsResult);this.events.next(Re)}),(0,Xe.h)(re=>!!re.guardsResult||(E.restoreHistory(re),this.cancelNavigationTransition(re,"",3),!1)),Ra(re=>{if(re.guards.canActivateChecks.length)return(0,O.of)(re).pipe((0,jt.b)(Re=>{const ct=new Ve(Re.id,this.urlSerializer.serialize(Re.extractedUrl),this.urlSerializer.serialize(Re.urlAfterRedirects),Re.targetSnapshot);this.events.next(ct)}),(0,Ue.w)(Re=>{let ct=!1;return(0,O.of)(Re).pipe(function mi(b,x){return(0,Rt.z)(E=>{const{targetSnapshot:P,guards:{canActivateChecks:$}}=E;if(!$.length)return(0,O.of)(E);let J=0;return(0,y.D)($).pipe(Nt(re=>function _r(b,x,E,P){const $=b.routeConfig,J=b._resolve;return void 0!==$?.title&&!Xs($)&&(J[zr]=$.title),function bs(b,x,E,P){const $=function Js(b){return[...Object.keys(b),...Object.getOwnPropertySymbols(b)]}(b);if(0===$.length)return(0,O.of)({});const J={};return(0,y.D)($).pipe((0,Rt.z)(re=>function Yi(b,x,E,P){const $=ki(x)??P,J=To(b,$);return fn(J.resolve?J.resolve(x,E):$.runInContext(()=>J(x,E)))}(b[re],x,E,P).pipe((0,cn.P)(),(0,jt.b)(Re=>{J[re]=Re}))),Gt(1),function Ur(b){return(0,Ie.U)(()=>b)}(J),Ot(re=>zo(re)?Tt.E:Je(re)))}(J,b,x,P).pipe((0,Ie.U)(re=>(b._resolvedData=re,b.data=Co(b,E).resolve,$&&Xs($)&&(b.data[zr]=$.title),null)))}(re.route,P,b,x)),(0,jt.b)(()=>J++),Gt(1),(0,Rt.z)(re=>J===$.length?(0,O.of)(E):Tt.E))})}(E.paramsInheritanceStrategy,this.environmentInjector),(0,jt.b)({next:()=>ct=!0,complete:()=>{ct||(E.restoreHistory(Re),this.cancelNavigationTransition(Re,"",2))}}))}),(0,jt.b)(Re=>{const ct=new Ge(Re.id,this.urlSerializer.serialize(Re.extractedUrl),this.urlSerializer.serialize(Re.urlAfterRedirects),Re.targetSnapshot);this.events.next(ct)}))}),Ra(re=>{const Re=ct=>{const tn=[];ct.routeConfig?.loadComponent&&!ct.routeConfig._loadedComponent&&tn.push(this.configLoader.loadComponent(ct.routeConfig).pipe((0,jt.b)(Qt=>{ct.component=Qt}),(0,Ie.U)(()=>{})));for(const Qt of ct.children)tn.push(...Re(Qt));return tn};return At(Re(re.targetSnapshot.root)).pipe((0,nn.d)(),(0,_e.q)(1))}),Ra(()=>this.afterPreactivation()),(0,Ie.U)(re=>{const Re=function au(b,x,E){const P=bo(b,x._root,E?E._root:void 0);return new Io(P,x)}(E.routeReuseStrategy,re.targetSnapshot,re.currentRouterState);return P={...re,targetRouterState:Re}}),(0,jt.b)(re=>{E.currentUrlTree=re.urlAfterRedirects,E.rawUrlTree=E.urlHandlingStrategy.merge(re.urlAfterRedirects,re.rawUrl),E.routerState=re.targetRouterState,"deferred"===E.urlUpdateStrategy&&(re.extras.skipLocationChange||E.setBrowserUrl(E.rawUrlTree,re),E.browserUrlTree=re.urlAfterRedirects)}),((b,x,E)=>(0,Ie.U)(P=>(new $o(x,P.targetRouterState,P.currentRouterState,E).activate(b),P)))(this.rootContexts,E.routeReuseStrategy,re=>this.events.next(re)),(0,jt.b)({next:re=>{$=!0,this.lastSuccessfulNavigation=this.currentNavigation,E.navigated=!0,this.events.next(new hs(re.id,this.urlSerializer.serialize(re.extractedUrl),this.urlSerializer.serialize(E.currentUrlTree))),E.titleStrategy?.updateTitle(re.targetRouterState.snapshot),re.resolve(!0)},complete:()=>{$=!0}}),gr(()=>{$||J||this.cancelNavigationTransition(P,"",1),this.currentNavigation?.id===P.id&&(this.currentNavigation=null)}),Ot(re=>{if(J=!0,Ws(re)){Ai(re)||(E.navigated=!0,E.restoreHistory(P,!0));const Re=new As(P.id,this.urlSerializer.serialize(P.extractedUrl),re.message,re.cancellationCode);if(this.events.next(Re),Ai(re)){const ct=E.urlHandlingStrategy.merge(re.url,E.rawUrlTree),tn={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===E.urlUpdateStrategy||xu(P.source)};E.scheduleNavigation(ct,Vo,null,tn,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{E.restoreHistory(P,!0);const Re=new xs(P.id,this.urlSerializer.serialize(P.extractedUrl),re,P.targetSnapshot??void 0);this.events.next(Re);try{P.resolve(E.errorHandler(re))}catch(ct){P.reject(ct)}}return Tt.E}))}))}cancelNavigationTransition(E,P,$){const J=new As(E.id,this.urlSerializer.serialize(E.extractedUrl),P,$);this.events.next(J),E.resolve(!1)}}return b.\u0275fac=function(E){return new(E||b)},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function xu(b){return b!==Vo}let Ei=(()=>{class b{buildTitle(E){let P,$=E.root;for(;void 0!==$;)P=this.getResolvedTitleForRoute($)??P,$=$.children.find(J=>J.outlet===Xt);return P}getResolvedTitleForRoute(E){return E.data[zr]}}return b.\u0275fac=function(E){return new(E||b)},b.\u0275prov=A.Yz7({token:b,factory:function(){return(0,A.f3M)(ua)},providedIn:"root"}),b})(),ua=(()=>{class b extends Ei{constructor(E){super(),this.title=E}updateTitle(E){const P=this.buildTitle(E);void 0!==P&&this.title.setTitle(P)}}return b.\u0275fac=function(E){return new(E||b)(A.LFG(Vi.Dx))},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),Qo=(()=>{class b{}return b.\u0275fac=function(E){return new(E||b)},b.\u0275prov=A.Yz7({token:b,factory:function(){return(0,A.f3M)(la)},providedIn:"root"}),b})();class Jo{shouldDetach(x){return!1}store(x,E){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,E){return x.routeConfig===E.routeConfig}}let la=(()=>{class b extends Jo{}return b.\u0275fac=function(){let x;return function(P){return(x||(x=A.n5z(b)))(P||b)}}(),b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const ca=new A.OlP("",{providedIn:"root",factory:()=>({})});let Na=(()=>{class b{}return b.\u0275fac=function(E){return new(E||b)},b.\u0275prov=A.Yz7({token:b,factory:function(){return(0,A.f3M)(Pa)},providedIn:"root"}),b})(),Pa=(()=>{class b{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,P){return E}}return b.\u0275fac=function(E){return new(E||b)},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Ku(b){throw b}function to(b,x,E){return x.parse("/")}const Za={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Mu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Nr=(()=>{class b{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,A.f3M)(A.c2e),this.isNgZoneEnabled=!1,this.options=(0,A.f3M)(ca,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Ku,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||to,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,A.f3M)(Na),this.routeReuseStrategy=(0,A.f3M)(Qo),this.urlCreationStrategy=(0,A.f3M)(ou),this.titleStrategy=(0,A.f3M)(Ei),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Wi((0,A.f3M)(eo,{optional:!0})??[]),this.navigationTransitions=(0,A.f3M)(Ts),this.urlSerializer=(0,A.f3M)(vn),this.location=(0,A.f3M)(Te.Ye),this.isNgZoneEnabled=(0,A.f3M)(A.R0b)instanceof A.R0b&&A.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Pn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Rs(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(E=>{this.lastSuccessfulId=E.id,this.currentPageId=E.targetPageId},E=>{this.console.warn(`Unhandled Navigation Error: ${E}`)})}resetRootComponentType(E){this.routerState.root.component=E,this.navigationTransitions.rootComponentType=E}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const E=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Vo,E)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(E=>{const P="popstate"===E.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{this.navigateToSyncWithBrowser(E.url,P,E.state)},0)}))}navigateToSyncWithBrowser(E,P,$){const J={replaceUrl:!0},re=$?.navigationId?$:null;if($){const ct={...$};delete ct.navigationId,delete ct.\u0275routerPageId,0!==Object.keys(ct).length&&(J.state=ct)}const Re=this.parseUrl(E);this.scheduleNavigation(Re,P,re,J)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(E){this.config=E.map(Zs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(E,P={}){const{relativeTo:$,queryParams:J,fragment:re,queryParamsHandling:Re,preserveFragment:ct}=P,tn=ct?this.currentUrlTree.fragment:re;let Qt=null;switch(Re){case"merge":Qt={...this.currentUrlTree.queryParams,...J};break;case"preserve":Qt=this.currentUrlTree.queryParams;break;default:Qt=J||null}return null!==Qt&&(Qt=this.removeEmptyProps(Qt)),this.urlCreationStrategy.createUrlTree($,this.routerState,this.currentUrlTree,E,Qt,tn??null)}navigateByUrl(E,P={skipLocationChange:!1}){const $=mr(E)?E:this.parseUrl(E),J=this.urlHandlingStrategy.merge($,this.rawUrlTree);return this.scheduleNavigation(J,Vo,null,P)}navigate(E,P={skipLocationChange:!1}){return function da(b){for(let x=0;x<b.length;x++){if(null==b[x])throw new A.vHH(4008,!1)}}(E),this.navigateByUrl(this.createUrlTree(E,P),P)}serializeUrl(E){return this.urlSerializer.serialize(E)}parseUrl(E){let P;try{P=this.urlSerializer.parse(E)}catch($){P=this.malformedUriErrorHandler($,this.urlSerializer,E)}return P}isActive(E,P){let $;if($=!0===P?{...Za}:!1===P?{...Mu}:P,mr(E))return zn(this.currentUrlTree,E,$);const J=this.parseUrl(E);return zn(this.currentUrlTree,J,$)}removeEmptyProps(E){return Object.keys(E).reduce((P,$)=>{const J=E[$];return null!=J&&(P[$]=J),P},{})}scheduleNavigation(E,P,$,J,re){if(this.disposed)return Promise.resolve(!1);let Re,ct,tn,Qt;return re?(Re=re.resolve,ct=re.reject,tn=re.promise):tn=new Promise((fr,Ii)=>{Re=fr,ct=Ii}),Qt="computed"===this.canceledNavigationResolution?$&&$.\u0275routerPageId?$.\u0275routerPageId:J.replaceUrl||J.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Qt,source:P,restoredState:$,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:E,extras:J,resolve:Re,reject:ct,promise:tn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),tn.catch(fr=>Promise.reject(fr))}setBrowserUrl(E,P){const $=this.urlSerializer.serialize(E),J={...P.extras.state,...this.generateNgRouterState(P.id,P.targetPageId)};this.location.isCurrentPathEqualTo($)||P.extras.replaceUrl?this.location.replaceState($,"",J):this.location.go($,"",J)}restoreHistory(E,P=!1){if("computed"===this.canceledNavigationResolution){const $=this.currentPageId-E.targetPageId;"popstate"!==E.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===$?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===$&&(this.resetState(E),this.browserUrlTree=E.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo($)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(E),this.resetUrlToCurrentUrlTree())}resetState(E){this.routerState=E.currentRouterState,this.currentUrlTree=E.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,E.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(E,P){return"computed"===this.canceledNavigationResolution?{navigationId:E,\u0275routerPageId:P}:{navigationId:E}}}return b.\u0275fac=function(E){return new(E||b)},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),Oa=(()=>{class b{constructor(E,P,$,J,re,Re){this.router=E,this.route=P,this.tabIndexAttribute=$,this.renderer=J,this.el=re,this.locationStrategy=Re,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new xe.x;const ct=re.nativeElement.tagName;this.isAnchorElement="A"===ct||"AREA"===ct,this.isAnchorElement?this.subscription=E.events.subscribe(tn=>{tn instanceof hs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(E){this._preserveFragment=(0,A.D6c)(E)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(E){this._skipLocationChange=(0,A.D6c)(E)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(E){this._replaceUrl=(0,A.D6c)(E)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(E){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",E)}ngOnChanges(E){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(E){null!=E?(this.commands=Array.isArray(E)?E:[E],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(E,P,$,J,re){return!!(null===this.urlTree||this.isAnchorElement&&(0!==E||P||$||J||re||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const E=null===this.href?null:(0,A.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",E)}applyAttributeValue(E,P){const $=this.renderer,J=this.el.nativeElement;null!==P?$.setAttribute(J,E,P):$.removeAttribute(J,E)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return b.\u0275fac=function(E){return new(E||b)(A.Y36(Nr),A.Y36(oo),A.$8M("tabindex"),A.Y36(A.Qsj),A.Y36(A.SBq),A.Y36(Te.S$))},b.\u0275dir=A.lG2({type:b,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(E,P){1&E&&A.NdJ("click",function(J){return P.onClick(J.button,J.ctrlKey,J.shiftKey,J.altKey,J.metaKey)}),2&E&&A.uIk("target",P.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[A.TTD]}),b})(),kr=(()=>{class b{get isActive(){return this._isActive}constructor(E,P,$,J,re){this.router=E,this.element=P,this.renderer=$,this.cdr=J,this.link=re,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new A.vpe,this.routerEventsSubscription=E.events.subscribe(Re=>{Re instanceof hs&&this.update()})}ngAfterContentInit(){(0,O.of)(this.links.changes,(0,O.of)(null)).pipe((0,Zn.J)()).subscribe(E=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const E=[...this.links.toArray(),this.link].filter(P=>!!P).map(P=>P.onChanges);this.linkInputChangesSubscription=(0,y.D)(E).pipe((0,Zn.J)()).subscribe(P=>{this._isActive!==this.isLinkActive(this.router)(P)&&this.update()})}set routerLinkActive(E){const P=Array.isArray(E)?E:E.split(" ");this.classes=P.filter($=>!!$)}ngOnChanges(E){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const E=this.hasActiveLinks();this._isActive!==E&&(this._isActive=E,this.cdr.markForCheck(),this.classes.forEach(P=>{E?this.renderer.addClass(this.element.nativeElement,P):this.renderer.removeClass(this.element.nativeElement,P)}),E&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(E))})}isLinkActive(E){const P=function Pr(b){return!!b.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return $=>!!$.urlTree&&E.isActive($.urlTree,P)}hasActiveLinks(){const E=this.isLinkActive(this.router);return this.link&&E(this.link)||this.links.some(E)}}return b.\u0275fac=function(E){return new(E||b)(A.Y36(Nr),A.Y36(A.SBq),A.Y36(A.Qsj),A.Y36(A.sBO),A.Y36(Oa,8))},b.\u0275dir=A.lG2({type:b,selectors:[["","routerLinkActive",""]],contentQueries:function(E,P,$){if(1&E&&A.Suo($,Oa,5),2&E){let J;A.iGM(J=A.CRH())&&(P.links=J)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[A.TTD]}),b})();class hu{}let Ka=(()=>{class b{constructor(E,P,$,J,re){this.router=E,this.injector=$,this.preloadingStrategy=J,this.loader=re}setUpPreloading(){this.subscription=this.router.events.pipe((0,Xe.h)(E=>E instanceof hs),Nt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(E,P){const $=[];for(const J of P){J.providers&&!J._injector&&(J._injector=(0,A.MMx)(J.providers,E,`Route: ${J.path}`));const re=J._injector??E,Re=J._loadedInjector??re;J.loadChildren&&!J._loadedRoutes&&void 0===J.canLoad||J.loadComponent&&!J._loadedComponent?$.push(this.preloadConfig(re,J)):(J.children||J._loadedRoutes)&&$.push(this.processRoutes(Re,J.children??J._loadedRoutes))}return(0,y.D)($).pipe((0,Zn.J)())}preloadConfig(E,P){return this.preloadingStrategy.preload(P,()=>{let $;$=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(E,P):(0,O.of)(null);const J=$.pipe((0,Rt.z)(re=>null===re?(0,O.of)(void 0):(P._loadedRoutes=re.routes,P._loadedInjector=re.injector,this.processRoutes(re.injector??E,re.routes))));if(P.loadComponent&&!P._loadedComponent){const re=this.loader.loadComponent(P);return(0,y.D)([J,re]).pipe((0,Zn.J)())}return J})}}return b.\u0275fac=function(E){return new(E||b)(A.LFG(Nr),A.LFG(A.Sil),A.LFG(A.lqb),A.LFG(hu),A.LFG(Mo))},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const Ya=new A.OlP("");let ha=(()=>{class b{constructor(E,P,$,J,re={}){this.urlSerializer=E,this.transitions=P,this.viewportScroller=$,this.zone=J,this.options=re,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},re.scrollPositionRestoration=re.scrollPositionRestoration||"disabled",re.anchorScrolling=re.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(E=>{E instanceof Ti?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=E.navigationTrigger,this.restoredId=E.restoredState?E.restoredState.navigationId:0):E instanceof hs&&(this.lastId=E.id,this.scheduleScrollEvent(E,this.urlSerializer.parse(E.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(E=>{E instanceof Kr&&(E.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(E.position):E.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(E.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(E,P){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Kr(E,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return b.\u0275fac=function(E){A.$Z()},b.\u0275prov=A.Yz7({token:b,factory:b.\u0275fac}),b})();function w(b,x){return{\u0275kind:b,\u0275providers:x}}function ln(){const b=(0,A.f3M)(A.zs3);return x=>{const E=b.get(A.z2F);if(x!==E.components[0])return;const P=b.get(Nr),$=b.get(Fr);1===b.get(Ri)&&P.initialNavigation(),b.get(fo,null,A.XFs.Optional)?.setUpPreloading(),b.get(Ya,null,A.XFs.Optional)?.init(),P.resetRootComponentType(E.componentTypes[0]),$.closed||($.next(),$.unsubscribe())}}const Fr=new A.OlP("",{factory:()=>new xe.x}),Ri=new A.OlP("",{providedIn:"root",factory:()=>1});const fo=new A.OlP("");function Qa(b){return w(0,[{provide:fo,useExisting:Ka},{provide:hu,useExisting:b}])}const Bu=new A.OlP("ROUTER_FORROOT_GUARD"),ju=[Te.Ye,{provide:vn,useClass:qt},Nr,qs,{provide:oo,useFactory:function D(b){return b.routerState.root},deps:[Nr]},Mo,[]];function Us(){return new A.PXZ("Router",Nr)}let Vs=(()=>{class b{constructor(E){}static forRoot(E,P){return{ngModule:b,providers:[ju,[],{provide:eo,multi:!0,useValue:E},{provide:Bu,useFactory:pa,deps:[[Nr,new A.FiY,new A.tp0]]},{provide:ca,useValue:P||{}},P?.useHash?{provide:Te.S$,useClass:Te.Do}:{provide:Te.S$,useClass:Te.b0},{provide:Ya,useFactory:()=>{const b=(0,A.f3M)(Te.EM),x=(0,A.f3M)(A.R0b),E=(0,A.f3M)(ca),P=(0,A.f3M)(Ts),$=(0,A.f3M)(vn);return E.scrollOffset&&b.setOffset(E.scrollOffset),new ha($,P,b,x,E)}},P?.preloadingStrategy?Qa(P.preloadingStrategy).\u0275providers:[],{provide:A.PXZ,multi:!0,useFactory:Us},P?.initialNavigation?ss(P):[],[{provide:Nc,useFactory:ln},{provide:A.tb,multi:!0,useExisting:Nc}]]}}static forChild(E){return{ngModule:b,providers:[{provide:eo,multi:!0,useValue:E}]}}}return b.\u0275fac=function(E){return new(E||b)(A.LFG(Bu,8))},b.\u0275mod=A.oAB({type:b}),b.\u0275inj=A.cJS({imports:[Sr]}),b})();function pa(b){return"guarded"}function ss(b){return["disabled"===b.initialNavigation?w(3,[{provide:A.ip1,multi:!0,useFactory:()=>{const x=(0,A.f3M)(Nr);return()=>{x.setUpLocationChangeListener()}}},{provide:Ri,useValue:2}]).\u0275providers:[],"enabledBlocking"===b.initialNavigation?w(2,[{provide:Ri,useValue:0},{provide:A.ip1,multi:!0,deps:[A.zs3],useFactory:x=>{const E=x.get(Te.V_,Promise.resolve());return()=>E.then(()=>new Promise($=>{const J=x.get(Nr),re=x.get(Fr);(function P($){x.get(Nr).events.pipe((0,Xe.h)(re=>re instanceof hs||re instanceof As||re instanceof xs),(0,Ie.U)(re=>re instanceof hs||re instanceof As&&(0===re.code||1===re.code)&&null),(0,Xe.h)(re=>null!==re),(0,_e.q)(1)).subscribe(()=>{$()})})(()=>{$(!0)}),x.get(Ts).afterPreactivation=()=>($(!0),re.closed?(0,O.of)(void 0):re),J.initialNavigation()}))}}]).\u0275providers:[]]}const Nc=new A.OlP("")},3942:(Kt,qe,Y)=>{Y.d(qe,{Z:()=>At});var A=Y(2090),y=Y(4859),O=Y(9681),xe=Y(1877);class Se{constructor(Ze,ft){this._delegate=Ze,this.firebase=ft,(0,O._addComponent)(Ze,new y.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Ze,ft=O._DEFAULT_ENTRY_NAME){var et;this._delegate.checkDestroyed();const yt=this._delegate.container.getProvider(Ze);return!yt.isInitialized()&&"EXPLICIT"===(null===(et=yt.getComponent())||void 0===et?void 0:et.instantiationMode)&&yt.initialize(),yt.getImmediate({identifier:ft})}_removeServiceInstance(Ze,ft=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(ft)}_addComponent(Ze){(0,O._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,O._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Le=new A.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),fe=function Be(){const Ht=function Fe(Ht){const Ze={},ft={__esModule:!0,initializeApp:function gt(wt,z={}){const tt=O.initializeApp(wt,z);if((0,A.r3)(Ze,tt.name))return Ze[tt.name];const we=new Ht(tt,ft);return Ze[tt.name]=we,we},app:yt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Je(wt){const z=wt.name,tt=z.replace("-compat","");if(O._registerComponent(wt)&&"PUBLIC"===wt.type){const we=(Te=yt())=>{if("function"!=typeof Te[tt])throw Le.create("invalid-app-argument",{appName:z});return Te[tt]()};void 0!==wt.serviceProps&&(0,A.ZB)(we,wt.serviceProps),ft[tt]=we,Ht.prototype[tt]=function(...Te){return this._getService.bind(this,z).apply(this,wt.multipleInstances?Te:[])}}return"PUBLIC"===wt.type?ft[tt]:null},removeApp:function et(wt){delete Ze[wt]},useAsService:function Tt(wt,z){return"serverAuth"===z?null:z},modularAPIs:O}};function yt(wt){if(!(0,A.r3)(Ze,wt=wt||O._DEFAULT_ENTRY_NAME))throw Le.create("no-app",{appName:wt});return Ze[wt]}return ft.default=ft,Object.defineProperty(ft,"apps",{get:function it(){return Object.keys(Ze).map(wt=>Ze[wt])}}),yt.App=Ht,ft}(Se);return Ht.INTERNAL=Object.assign(Object.assign({},Ht.INTERNAL),{createFirebaseNamespace:Be,extendNamespace:function Ze(ft){(0,A.ZB)(Ht,ft)},createSubscribe:A.ne,ErrorFactory:A.LL,deepExtend:A.ZB}),Ht}(),ge=new xe.Yd("@firebase/app-compat");if((0,A.jU)()&&void 0!==self.firebase){ge.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ht=self.firebase.SDK_VERSION;Ht&&Ht.indexOf("LITE")>=0&&ge.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const At=fe;!function pt(Ht){(0,O.registerVersion)("@firebase/app-compat","0.2.4",Ht)}()},9681:(Kt,qe,Y)=>{Y.r(qe),Y.d(qe,{FirebaseError:()=>xe.ZR,SDK_VERSION:()=>Vi,_DEFAULT_ENTRY_NAME:()=>cn,_addComponent:()=>dn,_addOrOverwriteComponent:()=>Gt,_apps:()=>jt,_clearComponents:()=>ti,_components:()=>Ot,_getProvider:()=>nn,_registerComponent:()=>un,_removeServiceInstance:()=>En,deleteApp:()=>lr,getApp:()=>zr,getApps:()=>Er,initializeApp:()=>Xt,onLog:()=>kt,registerVersion:()=>Ir,setLogLevel:()=>ls});var A=Y(5861),y=Y(4859),O=Y(1877),xe=Y(2090),Se=Y(8766);class Me{constructor(at){this.container=at}getPlatformInfoString(){return this.container.getProviders().map(Pt=>{if(function Le(xt){return"VERSION"===xt.getComponent()?.type}(Pt)){const vn=Pt.getImmediate();return`${vn.library}/${vn.version}`}return null}).filter(Pt=>Pt).join(" ")}}const Fe="@firebase/app",fe=new O.Yd("@firebase/app"),cn="[DEFAULT]",Nt={[Fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},jt=new Map,Ot=new Map;function dn(xt,at){try{xt.container.addComponent(at)}catch(Pt){fe.debug(`Component ${at.name} failed to register with FirebaseApp ${xt.name}`,Pt)}}function Gt(xt,at){xt.container.addOrOverwriteComponent(at)}function un(xt){const at=xt.name;if(Ot.has(at))return fe.debug(`There were multiple attempts to register component ${at}.`),!1;Ot.set(at,xt);for(const Pt of jt.values())dn(Pt,xt);return!0}function nn(xt,at){const Pt=xt.container.getProvider("heartbeat").getImmediate({optional:!0});return Pt&&Pt.triggerHeartbeat(),xt.container.getProvider(at)}function En(xt,at,Pt=cn){nn(xt,at).clearInstance(Pt)}function ti(){Ot.clear()}const gr=new xe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zn{constructor(at,Pt,vn){this._isDeleted=!1,this._options=Object.assign({},at),this._config=Object.assign({},Pt),this._name=Pt.name,this._automaticDataCollectionEnabled=Pt.automaticDataCollectionEnabled,this._container=vn,this.container.addComponent(new y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(at){this.checkDestroyed(),this._automaticDataCollectionEnabled=at}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(at){this._isDeleted=at}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}}const Vi="9.17.2";function Xt(xt,at={}){let Pt=xt;"object"!=typeof at&&(at={name:at});const vn=Object.assign({name:cn,automaticDataCollectionEnabled:!1},at),qt=vn.name;if("string"!=typeof qt||!qt)throw gr.create("bad-app-name",{appName:String(qt)});if(Pt||(Pt=(0,xe.aH)()),!Pt)throw gr.create("no-options");const Dn=jt.get(qt);if(Dn){if((0,xe.vZ)(Pt,Dn.options)&&(0,xe.vZ)(vn,Dn.config))return Dn;throw gr.create("duplicate-app",{appName:qt})}const ni=new y.H0(qt);for(const he of Ot.values())ni.addComponent(he);const pe=new Zn(Pt,vn,ni);return jt.set(qt,pe),pe}function zr(xt=cn){const at=jt.get(xt);if(!at&&xt===cn)return Xt();if(!at)throw gr.create("no-app",{appName:xt});return at}function Er(){return Array.from(jt.values())}function lr(xt){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,A.Z)(function*(xt){const at=xt.name;jt.has(at)&&(jt.delete(at),yield Promise.all(xt.container.getProviders().map(Pt=>Pt.delete())),xt.isDeleted=!0)})).apply(this,arguments)}function Ir(xt,at,Pt){var vn;let qt=null!==(vn=Nt[xt])&&void 0!==vn?vn:xt;Pt&&(qt+=`-${Pt}`);const Dn=qt.match(/\s|\//),ni=at.match(/\s|\//);if(Dn||ni){const pe=[`Unable to register library "${qt}" with version "${at}":`];return Dn&&pe.push(`library name "${qt}" contains illegal characters (whitespace or "/")`),Dn&&ni&&pe.push("and"),ni&&pe.push(`version name "${at}" contains illegal characters (whitespace or "/")`),void fe.warn(pe.join(" "))}un(new y.wA(`${qt}-version`,()=>({library:qt,version:at}),"VERSION"))}function kt(xt,at){if(null!==xt&&"function"!=typeof xt)throw gr.create("invalid-log-argument");(0,O.Am)(xt,at)}function ls(xt){(0,O.Ub)(xt)}const hi="firebase-heartbeat-store";let Cr=null;function fn(){return Cr||(Cr=(0,Se.X3)("firebase-heartbeat-database",1,{upgrade:(xt,at)=>{0===at&&xt.createObjectStore(hi)}}).catch(xt=>{throw gr.create("idb-open",{originalErrorMessage:xt.message})})),Cr}function rn(){return(rn=(0,A.Z)(function*(xt){try{return(yield fn()).transaction(hi).objectStore(hi).get(Wr(xt))}catch(at){if(at instanceof xe.ZR)fe.warn(at.message);else{const Pt=gr.create("idb-get",{originalErrorMessage:at?.message});fe.warn(Pt.message)}}})).apply(this,arguments)}function cs(xt,at){return zn.apply(this,arguments)}function zn(){return(zn=(0,A.Z)(function*(xt,at){try{const vn=(yield fn()).transaction(hi,"readwrite");return yield vn.objectStore(hi).put(at,Wr(xt)),vn.done}catch(Pt){if(Pt instanceof xe.ZR)fe.warn(Pt.message);else{const vn=gr.create("idb-set",{originalErrorMessage:Pt?.message});fe.warn(vn.message)}}})).apply(this,arguments)}function Wr(xt){return`${xt.name}!${xt.options.appId}`}class qr{constructor(at){this.container=at,this._heartbeatsCache=null;const Pt=this.container.getProvider("app").getImmediate();this._storage=new Pn(Pt),this._heartbeatsCachePromise=this._storage.read().then(vn=>(this._heartbeatsCache=vn,vn))}triggerHeartbeat(){var at=this;return(0,A.Z)(function*(){const vn=at.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),qt=Jn();if(null===at._heartbeatsCache&&(at._heartbeatsCache=yield at._heartbeatsCachePromise),at._heartbeatsCache.lastSentHeartbeatDate!==qt&&!at._heartbeatsCache.heartbeats.some(Dn=>Dn.date===qt))return at._heartbeatsCache.heartbeats.push({date:qt,agent:vn}),at._heartbeatsCache.heartbeats=at._heartbeatsCache.heartbeats.filter(Dn=>{const ni=new Date(Dn.date).valueOf();return Date.now()-ni<=2592e6}),at._storage.overwrite(at._heartbeatsCache)})()}getHeartbeatsHeader(){var at=this;return(0,A.Z)(function*(){if(null===at._heartbeatsCache&&(yield at._heartbeatsCachePromise),null===at._heartbeatsCache||0===at._heartbeatsCache.heartbeats.length)return"";const Pt=Jn(),{heartbeatsToSend:vn,unsentEntries:qt}=function bi(xt,at=1024){const Pt=[];let vn=xt.slice();for(const qt of xt){const Dn=Pt.find(ni=>ni.agent===qt.agent);if(Dn){if(Dn.dates.push(qt.date),pn(Pt)>at){Dn.dates.pop();break}}else if(Pt.push({agent:qt.agent,dates:[qt.date]}),pn(Pt)>at){Pt.pop();break}vn=vn.slice(1)}return{heartbeatsToSend:Pt,unsentEntries:vn}}(at._heartbeatsCache.heartbeats),Dn=(0,xe.L)(JSON.stringify({version:2,heartbeats:vn}));return at._heartbeatsCache.lastSentHeartbeatDate=Pt,qt.length>0?(at._heartbeatsCache.heartbeats=qt,yield at._storage.overwrite(at._heartbeatsCache)):(at._heartbeatsCache.heartbeats=[],at._storage.overwrite(at._heartbeatsCache)),Dn})()}}function Jn(){return(new Date).toISOString().substring(0,10)}class Pn{constructor(at){this.app=at,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,A.Z)(function*(){return!!(0,xe.hl)()&&(0,xe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var at=this;return(0,A.Z)(function*(){return(yield at._canUseIndexedDBPromise)&&(yield function an(xt){return rn.apply(this,arguments)}(at.app))||{heartbeats:[]}})()}overwrite(at){var Pt=this;return(0,A.Z)(function*(){var vn;if(yield Pt._canUseIndexedDBPromise){const Dn=yield Pt.read();return cs(Pt.app,{lastSentHeartbeatDate:null!==(vn=at.lastSentHeartbeatDate)&&void 0!==vn?vn:Dn.lastSentHeartbeatDate,heartbeats:at.heartbeats})}})()}add(at){var Pt=this;return(0,A.Z)(function*(){var vn;if(yield Pt._canUseIndexedDBPromise){const Dn=yield Pt.read();return cs(Pt.app,{lastSentHeartbeatDate:null!==(vn=at.lastSentHeartbeatDate)&&void 0!==vn?vn:Dn.lastSentHeartbeatDate,heartbeats:[...Dn.heartbeats,...at.heartbeats]})}})()}}function pn(xt){return(0,xe.L)(JSON.stringify({version:2,heartbeats:xt})).length}!function Vr(xt){un(new y.wA("platform-logger",at=>new Me(at),"PRIVATE")),un(new y.wA("heartbeat",at=>new qr(at),"PRIVATE")),Ir(Fe,"0.9.4",xt),Ir(Fe,"0.9.4","esm2017"),Ir("fire-js","")}("")},4859:(Kt,qe,Y)=>{Y.d(qe,{H0:()=>Fe,wA:()=>O,zt:()=>Se});var A=Y(5861),y=Y(2090);class O{constructor(fe,ge,De){this.name=fe,this.instanceFactory=ge,this.type=De,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(fe){return this.instantiationMode=fe,this}setMultipleInstances(fe){return this.multipleInstances=fe,this}setServiceProps(fe){return this.serviceProps=fe,this}setInstanceCreatedCallback(fe){return this.onInstanceCreated=fe,this}}const xe="[DEFAULT]";class Se{constructor(fe,ge){this.name=fe,this.container=ge,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(fe){const ge=this.normalizeInstanceIdentifier(fe);if(!this.instancesDeferred.has(ge)){const De=new y.BH;if(this.instancesDeferred.set(ge,De),this.isInitialized(ge)||this.shouldAutoInitialize())try{const mt=this.getOrInitializeService({instanceIdentifier:ge});mt&&De.resolve(mt)}catch{}}return this.instancesDeferred.get(ge).promise}getImmediate(fe){var ge;const De=this.normalizeInstanceIdentifier(fe?.identifier),mt=null!==(ge=fe?.optional)&&void 0!==ge&&ge;if(!this.isInitialized(De)&&!this.shouldAutoInitialize()){if(mt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:De})}catch(pt){if(mt)return null;throw pt}}getComponent(){return this.component}setComponent(fe){if(fe.name!==this.name)throw Error(`Mismatching Component ${fe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=fe,this.shouldAutoInitialize()){if(function Le(Be){return"EAGER"===Be.instantiationMode}(fe))try{this.getOrInitializeService({instanceIdentifier:xe})}catch{}for(const[ge,De]of this.instancesDeferred.entries()){const mt=this.normalizeInstanceIdentifier(ge);try{const pt=this.getOrInitializeService({instanceIdentifier:mt});De.resolve(pt)}catch{}}}}clearInstance(fe=xe){this.instancesDeferred.delete(fe),this.instancesOptions.delete(fe),this.instances.delete(fe)}delete(){var fe=this;return(0,A.Z)(function*(){const ge=Array.from(fe.instances.values());yield Promise.all([...ge.filter(De=>"INTERNAL"in De).map(De=>De.INTERNAL.delete()),...ge.filter(De=>"_delete"in De).map(De=>De._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(fe=xe){return this.instances.has(fe)}getOptions(fe=xe){return this.instancesOptions.get(fe)||{}}initialize(fe={}){const{options:ge={}}=fe,De=this.normalizeInstanceIdentifier(fe.instanceIdentifier);if(this.isInitialized(De))throw Error(`${this.name}(${De}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const mt=this.getOrInitializeService({instanceIdentifier:De,options:ge});for(const[pt,At]of this.instancesDeferred.entries())De===this.normalizeInstanceIdentifier(pt)&&At.resolve(mt);return mt}onInit(fe,ge){var De;const mt=this.normalizeInstanceIdentifier(ge),pt=null!==(De=this.onInitCallbacks.get(mt))&&void 0!==De?De:new Set;pt.add(fe),this.onInitCallbacks.set(mt,pt);const At=this.instances.get(mt);return At&&fe(At,mt),()=>{pt.delete(fe)}}invokeOnInitCallbacks(fe,ge){const De=this.onInitCallbacks.get(ge);if(De)for(const mt of De)try{mt(fe,ge)}catch{}}getOrInitializeService({instanceIdentifier:fe,options:ge={}}){let De=this.instances.get(fe);if(!De&&this.component&&(De=this.component.instanceFactory(this.container,{instanceIdentifier:(Be=fe,Be===xe?void 0:Be),options:ge}),this.instances.set(fe,De),this.instancesOptions.set(fe,ge),this.invokeOnInitCallbacks(De,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,De)}catch{}var Be;return De||null}normalizeInstanceIdentifier(fe=xe){return this.component?this.component.multipleInstances?fe:xe:fe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(fe){this.name=fe,this.providers=new Map}addComponent(fe){const ge=this.getProvider(fe.name);if(ge.isComponentSet())throw new Error(`Component ${fe.name} has already been registered with ${this.name}`);ge.setComponent(fe)}addOrOverwriteComponent(fe){this.getProvider(fe.name).isComponentSet()&&this.providers.delete(fe.name),this.addComponent(fe)}getProvider(fe){if(this.providers.has(fe))return this.providers.get(fe);const ge=new Se(fe,this);return this.providers.set(fe,ge),ge}getProviders(){return Array.from(this.providers.values())}}},1877:(Kt,qe,Y)=>{Y.d(qe,{Am:()=>Be,Ub:()=>Fe,Yd:()=>Le,in:()=>y});const A=[];var y=(()=>{return(fe=y||(y={}))[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",y;var fe})();const O={debug:y.DEBUG,verbose:y.VERBOSE,info:y.INFO,warn:y.WARN,error:y.ERROR,silent:y.SILENT},xe=y.INFO,Se={[y.DEBUG]:"log",[y.VERBOSE]:"log",[y.INFO]:"info",[y.WARN]:"warn",[y.ERROR]:"error"},Me=(fe,ge,...De)=>{if(ge<fe.logLevel)return;const mt=(new Date).toISOString(),pt=Se[ge];if(!pt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ge})`);console[pt](`[${mt}]  ${fe.name}:`,...De)};class Le{constructor(ge){this.name=ge,this._logLevel=xe,this._logHandler=Me,this._userLogHandler=null,A.push(this)}get logLevel(){return this._logLevel}set logLevel(ge){if(!(ge in y))throw new TypeError(`Invalid value "${ge}" assigned to \`logLevel\``);this._logLevel=ge}setLogLevel(ge){this._logLevel="string"==typeof ge?O[ge]:ge}get logHandler(){return this._logHandler}set logHandler(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge}get userLogHandler(){return this._userLogHandler}set userLogHandler(ge){this._userLogHandler=ge}debug(...ge){this._userLogHandler&&this._userLogHandler(this,y.DEBUG,...ge),this._logHandler(this,y.DEBUG,...ge)}log(...ge){this._userLogHandler&&this._userLogHandler(this,y.VERBOSE,...ge),this._logHandler(this,y.VERBOSE,...ge)}info(...ge){this._userLogHandler&&this._userLogHandler(this,y.INFO,...ge),this._logHandler(this,y.INFO,...ge)}warn(...ge){this._userLogHandler&&this._userLogHandler(this,y.WARN,...ge),this._logHandler(this,y.WARN,...ge)}error(...ge){this._userLogHandler&&this._userLogHandler(this,y.ERROR,...ge),this._logHandler(this,y.ERROR,...ge)}}function Fe(fe){A.forEach(ge=>{ge.setLogLevel(fe)})}function Be(fe,ge){for(const De of A){let mt=null;ge&&ge.level&&(mt=O[ge.level]),De.userLogHandler=null===fe?null:(pt,At,...Ht)=>{const Ze=Ht.map(ft=>{if(null==ft)return null;if("string"==typeof ft)return ft;if("number"==typeof ft||"boolean"==typeof ft)return ft.toString();if(ft instanceof Error)return ft.message;try{return JSON.stringify(ft)}catch{return null}}).filter(ft=>ft).join(" ");At>=(mt??pt.logLevel)&&fe({level:y[At].toLowerCase(),message:Ze,args:Ht,type:pt.name})}}}},259:(Kt,qe,Y)=>{Y.d(qe,{C6:()=>A.getApps,Mq:()=>A.getApp});var A=Y(9681);(0,A.registerVersion)("firebase","9.17.2","app")},9260:(Kt,qe,Y)=>{Y.d(qe,{Z:()=>A.Z});var A=Y(3942);A.Z.registerVersion("firebase","9.17.2","app-compat")},4217:(Kt,qe,Y)=>{Y.r(qe);var A=Y(5861),y=Y(3942),O=Y(2090),xe=Y(9681),Se=Y(1877),Me=Y(655),Le=Y(4859);const At=function mt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ht=function pt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ze=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new Se.Yd("@firebase/auth");function yt(I,...p){et.logLevel<=Se.in.ERROR&&et.error(`Auth (${xe.SDK_VERSION}): ${I}`,...p)}function gt(I,...p){throw wt(I,...p)}function it(I,...p){return wt(I,...p)}function Je(I,p,g){const S=Object.assign(Object.assign({},Ht()),{[p]:g});return new O.LL("auth","Firebase",S).create(p,{appName:I.name})}function Tt(I,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&gt(I,"argument-error"),Je(I,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wt(I,...p){if("string"!=typeof I){const g=p[0],S=[...p.slice(1)];return S[0]&&(S[0].appName=I.name),I._errorFactory.create(g,...S)}return Ze.create(I,...p)}function z(I,p,...g){if(!I)throw wt(p,...g)}function tt(I){const p="INTERNAL ASSERTION FAILED: "+I;throw yt(p),new Error(p)}function we(I,p){I||tt(p)}const Te=new Map;function Ie(I){we(I instanceof Function,"Expected a class definition");let p=Te.get(I);return p?(we(p instanceof I,"Instance stored in cache mismatched with class"),p):(p=new I,Te.set(I,p),p)}function Ct(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function Xe(){return"http:"===Rt()||"https:"===Rt()}function Rt(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class jt{constructor(p,g){this.shortDelay=p,this.longDelay=g,we(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function cn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xe()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ot(I,p){we(I.emulator,"Emulator should always be set here");const{url:g}=I.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class dn{static initialize(p,g,S){this.fetchImpl=p,g&&(this.headersImpl=g),S&&(this.responseImpl=S)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},un=new jt(3e4,6e4);function nn(I,p){return I.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:I.tenantId}):p}function En(I,p,g,S){return ti.apply(this,arguments)}function ti(){return(ti=(0,A.Z)(function*(I,p,g,S,Z={}){return Ur(I,Z,(0,A.Z)(function*(){let ie={},Pe={};S&&("GET"===p?Pe=S:ie={body:JSON.stringify(S)});const ot=(0,O.xO)(Object.assign({key:I.config.apiKey},Pe)).slice(1),Ft=yield I._getAdditionalHeaders();return Ft["Content-Type"]="application/json",I.languageCode&&(Ft["X-Firebase-Locale"]=I.languageCode),dn.fetch()(Xt(I,I.config.apiHost,g,ot),Object.assign({method:p,headers:Ft,referrerPolicy:"no-referrer"},ie))}))})).apply(this,arguments)}function Ur(I,p,g){return gr.apply(this,arguments)}function gr(){return(gr=(0,A.Z)(function*(I,p,g){I._canInitEmulator=!1;const S=Object.assign(Object.assign({},Gt),p);try{const Z=new zr(I),ie=yield Promise.race([g(),Z.promise]);Z.clearNetworkTimeout();const Pe=yield ie.json();if("needConfirmation"in Pe)throw Er(I,"account-exists-with-different-credential",Pe);if(ie.ok&&!("errorMessage"in Pe))return Pe;{const ot=ie.ok?Pe.errorMessage:Pe.error.message,[Ft,zt]=ot.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ft)throw Er(I,"credential-already-in-use",Pe);if("EMAIL_EXISTS"===Ft)throw Er(I,"email-already-in-use",Pe);if("USER_DISABLED"===Ft)throw Er(I,"user-disabled",Pe);const $n=S[Ft]||Ft.toLowerCase().replace(/[_\s]+/g,"-");if(zt)throw Je(I,$n,zt);gt(I,$n)}}catch(Z){if(Z instanceof O.ZR)throw Z;gt(I,"internal-error",{message:String(Z)})}})).apply(this,arguments)}function Zn(I,p,g,S){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,A.Z)(function*(I,p,g,S,Z={}){const ie=yield En(I,p,g,S,Z);return"mfaPendingCredential"in ie&&gt(I,"multi-factor-auth-required",{_serverResponse:ie}),ie})).apply(this,arguments)}function Xt(I,p,g,S){const Z=`${p}${g}?${S}`;return I.config.emulator?Ot(I.config,Z):`${I.config.apiScheme}://${Z}`}class zr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,S)=>{this.timer=setTimeout(()=>S(it(this.auth,"network-request-failed")),un.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Er(I,p,g){const S={appName:I.name};g.email&&(S.email=g.email),g.phoneNumber&&(S.phoneNumber=g.phoneNumber);const Z=it(I,p,S);return Z.customData._tokenResponse=g,Z}function Tn(){return(Tn=(0,A.Z)(function*(I,p){return En(I,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Ir(I,p){return kt.apply(this,arguments)}function kt(){return(kt=(0,A.Z)(function*(I,p){return En(I,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ls(I,p){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,A.Z)(function*(I,p){return En(I,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function On(I){if(I)try{const p=new Date(Number(I));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function fn(){return(fn=(0,A.Z)(function*(I,p=!1){const g=(0,O.m9)(I),S=yield g.getIdToken(p),Z=rn(S);z(Z&&Z.exp&&Z.auth_time&&Z.iat,g.auth,"internal-error");const ie="object"==typeof Z.firebase?Z.firebase:void 0,Pe=ie?.sign_in_provider;return{claims:Z,token:S,authTime:On(an(Z.auth_time)),issuedAtTime:On(an(Z.iat)),expirationTime:On(an(Z.exp)),signInProvider:Pe||null,signInSecondFactor:ie?.sign_in_second_factor||null}})).apply(this,arguments)}function an(I){return 1e3*Number(I)}function rn(I){const[p,g,S]=I.split(".");if(void 0===p||void 0===g||void 0===S)return yt("JWT malformed, contained fewer than 3 sections"),null;try{const Z=(0,O.tV)(g);return Z?JSON.parse(Z):(yt("Failed to decode base64 JWT payload"),null)}catch(Z){return yt("Caught error parsing JWT payload as JSON",Z?.toString()),null}}function zn(I,p){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,A.Z)(function*(I,p,g=!1){if(g)return p;try{return yield p}catch(S){throw S instanceof O.ZR&&Rr(S)&&I.auth.currentUser===I&&(yield I.auth.signOut()),S}})).apply(this,arguments)}function Rr({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}class Tr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const S=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),S}{this.errorBackoff=3e4;const Z=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,Z)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const S=this.getInterval(p);this.timerId=setTimeout((0,A.Z)(function*(){yield g.iteration()}),S)}iteration(){var p=this;return(0,A.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&p.schedule(!0))}p.schedule()})()}}class qr{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=On(this.lastLoginAt),this.creationTime=On(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Jn(I){return bi.apply(this,arguments)}function bi(){return(bi=(0,A.Z)(function*(I){var p;const g=I.auth,S=yield I.getIdToken(),Z=yield zn(I,ls(g,{idToken:S}));z(Z?.users.length,g,"internal-error");const ie=Z.users[0];I._notifyReloadListener(ie);const Pe=null!==(p=ie.providerUserInfo)&&void 0!==p&&p.length?xt(ie.providerUserInfo):[],ot=Vr(I.providerData,Pe),$n=!!I.isAnonymous&&!(I.email&&ie.passwordHash||ot?.length),Mn={uid:ie.localId,displayName:ie.displayName||null,photoURL:ie.photoUrl||null,email:ie.email||null,emailVerified:ie.emailVerified||!1,phoneNumber:ie.phoneNumber||null,tenantId:ie.tenantId||null,providerData:ot,metadata:new qr(ie.createdAt,ie.lastLoginAt),isAnonymous:$n};Object.assign(I,Mn)})).apply(this,arguments)}function pn(){return(pn=(0,A.Z)(function*(I){const p=(0,O.m9)(I);yield Jn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Vr(I,p){return[...I.filter(S=>!p.some(Z=>Z.providerId===S.providerId)),...p]}function xt(I){return I.map(p=>{var{providerId:g}=p,S=(0,Me._T)(p,["providerId"]);return{providerId:g,uid:S.rawId||"",displayName:S.displayName||null,email:S.email||null,phoneNumber:S.phoneNumber||null,photoURL:S.photoUrl||null}})}function Pt(){return(Pt=(0,A.Z)(function*(I,p){const g=yield Ur(I,{},(0,A.Z)(function*(){const S=(0,O.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:Z,apiKey:ie}=I.config,Pe=Xt(I,Z,"/v1/token",`key=${ie}`),ot=yield I._getAdditionalHeaders();return ot["Content-Type"]="application/x-www-form-urlencoded",dn.fetch()(Pe,{method:"POST",headers:ot,body:S})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class vn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){z(p.idToken,"internal-error"),z(typeof p.idToken<"u","internal-error"),z(typeof p.refreshToken<"u","internal-error");const g="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function cs(I){const p=rn(I);return z(p,"internal-error"),z(typeof p.exp<"u","internal-error"),z(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var S=this;return(0,A.Z)(function*(){return z(!S.accessToken||S.refreshToken,p,"user-token-expired"),g||!S.accessToken||S.isExpired?S.refreshToken?(yield S.refresh(p,S.refreshToken),S.accessToken):null:S.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var S=this;return(0,A.Z)(function*(){const{accessToken:Z,refreshToken:ie,expiresIn:Pe}=yield function at(I,p){return Pt.apply(this,arguments)}(p,g);S.updateTokensAndExpiration(Z,ie,Number(Pe))})()}updateTokensAndExpiration(p,g,S){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*S}static fromJSON(p,g){const{refreshToken:S,accessToken:Z,expirationTime:ie}=g,Pe=new vn;return S&&(z("string"==typeof S,"internal-error",{appName:p}),Pe.refreshToken=S),Z&&(z("string"==typeof Z,"internal-error",{appName:p}),Pe.accessToken=Z),ie&&(z("number"==typeof ie,"internal-error",{appName:p}),Pe.expirationTime=ie),Pe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new vn,this.toJSON())}_performRefresh(){return tt("not implemented")}}function qt(I,p){z("string"==typeof I||typeof I>"u","internal-error",{appName:p})}class Dn{constructor(p){var{uid:g,auth:S,stsTokenManager:Z}=p,ie=(0,Me._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=S,this.stsTokenManager=Z,this.accessToken=Z.accessToken,this.displayName=ie.displayName||null,this.email=ie.email||null,this.emailVerified=ie.emailVerified||!1,this.phoneNumber=ie.phoneNumber||null,this.photoURL=ie.photoURL||null,this.isAnonymous=ie.isAnonymous||!1,this.tenantId=ie.tenantId||null,this.providerData=ie.providerData?[...ie.providerData]:[],this.metadata=new qr(ie.createdAt||void 0,ie.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,A.Z)(function*(){const S=yield zn(g,g.stsTokenManager.getToken(g.auth,p));return z(S,g.auth,"internal-error"),g.accessToken!==S&&(g.accessToken=S,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),S})()}getIdTokenResult(p){return function Cr(I){return fn.apply(this,arguments)}(this,p)}reload(){return function Pn(I){return pn.apply(this,arguments)}(this)}_assign(p){this!==p&&(z(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Dn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var S=this;return(0,A.Z)(function*(){let Z=!1;p.idToken&&p.idToken!==S.stsTokenManager.accessToken&&(S.stsTokenManager.updateFromServerResponse(p),Z=!0),g&&(yield Jn(S)),yield S.auth._persistUserIfCurrent(S),Z&&S.auth._notifyListenersIfCurrent(S)})()}delete(){var p=this;return(0,A.Z)(function*(){const g=yield p.getIdToken();return yield zn(p,function lr(I,p){return Tn.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var S,Z,ie,Pe,ot,Ft,zt,$n;const Mn=null!==(S=g.displayName)&&void 0!==S?S:void 0,si=null!==(Z=g.email)&&void 0!==Z?Z:void 0,eu=null!==(ie=g.phoneNumber)&&void 0!==ie?ie:void 0,mc=null!==(Pe=g.photoURL)&&void 0!==Pe?Pe:void 0,Kd=null!==(ot=g.tenantId)&&void 0!==ot?ot:void 0,tu=null!==(Ft=g._redirectEventId)&&void 0!==Ft?Ft:void 0,vu=null!==(zt=g.createdAt)&&void 0!==zt?zt:void 0,We=null!==($n=g.lastLoginAt)&&void 0!==$n?$n:void 0,{uid:El,emailVerified:nu,isAnonymous:Yd,providerData:jc,stsTokenManager:tl}=g;z(El&&tl,p,"internal-error");const qp=vn.fromJSON(this.name,tl);z("string"==typeof El,p,"internal-error"),qt(Mn,p.name),qt(si,p.name),z("boolean"==typeof nu,p,"internal-error"),z("boolean"==typeof Yd,p,"internal-error"),qt(eu,p.name),qt(mc,p.name),qt(Kd,p.name),qt(tu,p.name),qt(vu,p.name),qt(We,p.name);const Nu=new Dn({uid:El,auth:p,email:si,emailVerified:nu,displayName:Mn,isAnonymous:Yd,photoURL:mc,phoneNumber:eu,tenantId:Kd,stsTokenManager:qp,createdAt:vu,lastLoginAt:We});return jc&&Array.isArray(jc)&&(Nu.providerData=jc.map(gd=>Object.assign({},gd))),tu&&(Nu._redirectEventId=tu),Nu}static _fromIdTokenResponse(p,g,S=!1){return(0,A.Z)(function*(){const Z=new vn;Z.updateFromServerResponse(g);const ie=new Dn({uid:g.localId,auth:p,stsTokenManager:Z,isAnonymous:S});return yield Jn(ie),ie})()}}const pe=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,A.Z)(function*(){return!0})()}_set(g,S){var Z=this;return(0,A.Z)(function*(){Z.storage[g]=S})()}_get(g){var S=this;return(0,A.Z)(function*(){const Z=S.storage[g];return void 0===Z?null:Z})()}_remove(g){var S=this;return(0,A.Z)(function*(){delete S.storage[g]})()}_addListener(g,S){}_removeListener(g,S){}}return I.type="NONE",I})();function he(I,p,g){return`firebase:${I}:${p}:${g}`}class Ce{constructor(p,g,S){this.persistence=p,this.auth=g,this.userKey=S;const{config:Z,name:ie}=this.auth;this.fullUserKey=he(this.userKey,Z.apiKey,ie),this.fullPersistenceKey=he("persistence",Z.apiKey,ie),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,A.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?Dn._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,A.Z)(function*(){if(g.persistence===p)return;const S=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,S?g.setCurrentUser(S):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,S="authUser"){return(0,A.Z)(function*(){if(!g.length)return new Ce(Ie(pe),p,S);const Z=(yield Promise.all(g.map(function(){var zt=(0,A.Z)(function*($n){if(yield $n._isAvailable())return $n});return function($n){return zt.apply(this,arguments)}}()))).filter(zt=>zt);let ie=Z[0]||Ie(pe);const Pe=he(S,p.config.apiKey,p.name);let ot=null;for(const zt of g)try{const $n=yield zt._get(Pe);if($n){const Mn=Dn._fromJSON(p,$n);zt!==ie&&(ot=Mn),ie=zt;break}}catch{}const Ft=Z.filter(zt=>zt._shouldAllowMigration);return ie._shouldAllowMigration&&Ft.length?(ie=Ft[0],ot&&(yield ie._set(Pe,ot.toJSON())),yield Promise.all(g.map(function(){var zt=(0,A.Z)(function*($n){if($n!==ie)try{yield $n._remove(Pe)}catch{}});return function($n){return zt.apply(this,arguments)}}())),new Ce(ie,p,S)):new Ce(ie,p,S)})()}}function st(I){const p=I.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(xn(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(je(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(ye(p))return"Blackberry";if(oe(p))return"Webos";if(en(p))return"Safari";if((p.includes("chrome/")||yn(p))&&!p.includes("edge/"))return"Chrome";if(ve(p))return"Android";{const S=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===S?.length)return S[1]}return"Other"}function je(I=(0,O.z$)()){return/firefox\//i.test(I)}function en(I=(0,O.z$)()){const p=I.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function yn(I=(0,O.z$)()){return/crios\//i.test(I)}function xn(I=(0,O.z$)()){return/iemobile/i.test(I)}function ve(I=(0,O.z$)()){return/android/i.test(I)}function ye(I=(0,O.z$)()){return/blackberry/i.test(I)}function oe(I=(0,O.z$)()){return/webos/i.test(I)}function Ae(I=(0,O.z$)()){return/iphone|ipad|ipod/i.test(I)||/macintosh/i.test(I)&&/mobile/i.test(I)}function fi(I=(0,O.z$)()){return Ae(I)||ve(I)||oe(I)||ye(I)||/windows phone/i.test(I)||xn(I)}function oi(I,p=[]){let g;switch(I){case"Browser":g=st((0,O.z$)());break;case"Worker":g=`${st((0,O.z$)())}-${I}`;break;default:g=I}const S=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${xe.SDK_VERSION}/${S}`}class ds{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const S=ie=>new Promise((Pe,ot)=>{try{Pe(p(ie))}catch(Ft){ot(Ft)}});S.onAbort=g,this.queue.push(S);const Z=this.queue.length-1;return()=>{this.queue[Z]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,A.Z)(function*(){if(g.auth.currentUser===p)return;const S=[];try{for(const Z of g.queue)yield Z(p),Z.onAbort&&S.push(Z.onAbort)}catch(Z){S.reverse();for(const ie of S)try{ie()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:Z?.message})}})()}}class wa{constructor(p,g,S){this.app=p,this.heartbeatServiceProvider=g,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wo(this),this.idTokenSubscription=new wo(this),this.beforeStateQueue=new ds(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ze,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(p,g){var S=this;return g&&(this._popupRedirectResolver=Ie(g)),this._initializationPromise=this.queue((0,A.Z)(function*(){var Z,ie;if(!S._deleted&&(S.persistenceManager=yield Ce.create(S,p),!S._deleted)){if(null!==(Z=S._popupRedirectResolver)&&void 0!==Z&&Z._shouldInitProactively)try{yield S._popupRedirectResolver._initialize(S)}catch{}yield S.initializeCurrentUser(g),S.lastNotifiedUid=(null===(ie=S.currentUser)||void 0===ie?void 0:ie.uid)||null,!S._deleted&&(S._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,A.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUser(p){var g=this;return(0,A.Z)(function*(){var S;const Z=yield g.assertedPersistence.getCurrentUser();let ie=Z,Pe=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ot=null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId,Ft=ie?._redirectEventId,zt=yield g.tryRedirectSignIn(p);(!ot||ot===Ft)&&zt?.user&&(ie=zt.user,Pe=!0)}if(!ie)return g.directlySetCurrentUser(null);if(!ie._redirectEventId){if(Pe)try{yield g.beforeStateQueue.runMiddleware(ie)}catch(ot){ie=Z,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ot))}return ie?g.reloadAndSetCurrentUserOrClear(ie):g.directlySetCurrentUser(null)}return z(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===ie._redirectEventId?g.directlySetCurrentUser(ie):g.reloadAndSetCurrentUserOrClear(ie)})()}tryRedirectSignIn(p){var g=this;return(0,A.Z)(function*(){let S=null;try{S=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch{yield g._setRedirectUser(null)}return S})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,A.Z)(function*(){try{yield Jn(p)}catch(S){if("auth/network-request-failed"!==S?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Nt(){if(typeof navigator>"u")return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var p=this;return(0,A.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,A.Z)(function*(){const S=p?(0,O.m9)(p):null;return S&&z(S.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(S&&S._clone(g))})()}_updateCurrentUser(p,g=!1){var S=this;return(0,A.Z)(function*(){if(!S._deleted)return p&&z(S.tenantId===p.tenantId,S,"tenant-id-mismatch"),g||(yield S.beforeStateQueue.runMiddleware(p)),S.queue((0,A.Z)(function*(){yield S.directlySetCurrentUser(p),S.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,A.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var g=this;return this.queue((0,A.Z)(function*(){yield g.assertedPersistence.setPersistence(Ie(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new O.LL("auth","Firebase",p())}onAuthStateChanged(p,g,S){return this.registerStateListener(this.authStateSubscription,p,g,S)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,S){return this.registerStateListener(this.idTokenSubscription,p,g,S)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var S=this;return(0,A.Z)(function*(){const Z=yield S.getOrInitRedirectPersistenceManager(g);return null===p?Z.removeCurrentUser():Z.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,A.Z)(function*(){if(!g.redirectPersistenceManager){const S=p&&Ie(p)||g._popupRedirectResolver;z(S,g,"argument-error"),g.redirectPersistenceManager=yield Ce.create(g,[Ie(S._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,A.Z)(function*(){var S,Z;return g._isInitialized&&(yield g.queue((0,A.Z)(function*(){}))),(null===(S=g._currentUser)||void 0===S?void 0:S._redirectEventId)===p?g._currentUser:(null===(Z=g.redirectUser)||void 0===Z?void 0:Z._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,A.Z)(function*(){if(p===g.currentUser)return g.queue((0,A.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const S=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==S&&(this.lastNotifiedUid=S,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,S,Z){if(this._deleted)return()=>{};const ie="function"==typeof g?g:g.next.bind(g),Pe=this._isInitialized?Promise.resolve():this._initializationPromise;return z(Pe,this,"internal-error"),Pe.then(()=>ie(this.currentUser)),"function"==typeof g?p.addObserver(g,S,Z):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,A.Z)(function*(){g.currentUser&&g.currentUser!==p&&g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh(),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=oi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,A.Z)(function*(){var g;const S={"X-Client-Version":p.clientVersion};p.app.options.appId&&(S["X-Firebase-gmpid"]=p.app.options.appId);const Z=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return Z&&(S["X-Firebase-Client"]=Z),S})()}}function mr(I){return(0,O.m9)(I)}class wo{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zr(I){const p=I.indexOf(":");return p<0?"":I.substr(0,p+1)}function sr(I){if(!I)return null;const p=Number(I);return isNaN(p)?null:p}class Br{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return tt("not implemented")}_getIdTokenResponse(p){return tt("not implemented")}_linkToIdToken(p,g){return tt("not implemented")}_getReauthenticationResolver(p){return tt("not implemented")}}function Ln(I,p){return br.apply(this,arguments)}function br(){return(br=(0,A.Z)(function*(I,p){return En(I,"POST","/v1/accounts:resetPassword",nn(I,p))})).apply(this,arguments)}function ts(I,p){return $t.apply(this,arguments)}function $t(){return($t=(0,A.Z)(function*(I,p){return En(I,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Sn(I,p){return cr.apply(this,arguments)}function cr(){return(cr=(0,A.Z)(function*(I,p){return En(I,"POST","/v1/accounts:update",nn(I,p))})).apply(this,arguments)}function qi(){return(qi=(0,A.Z)(function*(I,p){return Zn(I,"POST","/v1/accounts:signInWithPassword",nn(I,p))})).apply(this,arguments)}function dr(I,p){return ai.apply(this,arguments)}function ai(){return(ai=(0,A.Z)(function*(I,p){return En(I,"POST","/v1/accounts:sendOobCode",nn(I,p))})).apply(this,arguments)}function tr(I,p){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,A.Z)(function*(I,p){return dr(I,p)})).apply(this,arguments)}function Hs(I,p){return Un.apply(this,arguments)}function Un(){return(Un=(0,A.Z)(function*(I,p){return dr(I,p)})).apply(this,arguments)}function so(I,p){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,A.Z)(function*(I,p){return dr(I,p)})).apply(this,arguments)}function Vo(I,p){return ci.apply(this,arguments)}function ci(){return(ci=(0,A.Z)(function*(I,p){return dr(I,p)})).apply(this,arguments)}function hs(){return(hs=(0,A.Z)(function*(I,p){return Zn(I,"POST","/v1/accounts:signInWithEmailLink",nn(I,p))})).apply(this,arguments)}function fs(){return(fs=(0,A.Z)(function*(I,p){return Zn(I,"POST","/v1/accounts:signInWithEmailLink",nn(I,p))})).apply(this,arguments)}class xs extends Br{constructor(p,g,S,Z=null){super("password",S),this._email=p,this._password=g,this._tenantId=Z}static _fromEmailAndPassword(p,g){return new xs(p,g,"password")}static _fromEmailAndCode(p,g,S=null){return new xs(p,g,"emailLink",S)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,A.Z)(function*(){switch(g.signInMethod){case"password":return function vi(I,p){return qi.apply(this,arguments)}(p,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ti(I,p){return hs.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:gt(p,"internal-error")}})()}_linkToIdToken(p,g){var S=this;return(0,A.Z)(function*(){switch(S.signInMethod){case"password":return ts(p,{idToken:g,returnSecureToken:!0,email:S._email,password:S._password});case"emailLink":return function As(I,p){return fs.apply(this,arguments)}(p,{idToken:g,email:S._email,oobCode:S._password});default:gt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ms(I,p){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,A.Z)(function*(I,p){return Zn(I,"POST","/v1/accounts:signInWithIdp",nn(I,p))})).apply(this,arguments)}class Ve extends Br{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new Ve(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):gt("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:S,signInMethod:Z}=g,ie=(0,Me._T)(g,["providerId","signInMethod"]);if(!S||!Z)return null;const Pe=new Ve(S,Z);return Pe.idToken=ie.idToken||void 0,Pe.accessToken=ie.accessToken||void 0,Pe.secret=ie.secret,Pe.nonce=ie.nonce,Pe.pendingToken=ie.pendingToken||null,Pe}_getIdTokenResponse(p){return Ms(p,this.buildRequest())}_linkToIdToken(p,g){const S=this.buildRequest();return S.idToken=g,Ms(p,S)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Ms(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,O.xO)(g)}return p}}function Ge(I,p){return dt.apply(this,arguments)}function dt(){return(dt=(0,A.Z)(function*(I,p){return En(I,"POST","/v1/accounts:sendVerificationCode",nn(I,p))})).apply(this,arguments)}function wn(){return(wn=(0,A.Z)(function*(I,p){return Zn(I,"POST","/v1/accounts:signInWithPhoneNumber",nn(I,p))})).apply(this,arguments)}function hr(){return(hr=(0,A.Z)(function*(I,p){const g=yield Zn(I,"POST","/v1/accounts:signInWithPhoneNumber",nn(I,p));if(g.temporaryProof)throw Er(I,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const di={USER_NOT_FOUND:"user-not-found"};function Di(){return(Di=(0,A.Z)(function*(I,p){return Zn(I,"POST","/v1/accounts:signInWithPhoneNumber",nn(I,Object.assign(Object.assign({},p),{operation:"REAUTH"})),di)})).apply(this,arguments)}class nr extends Br{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new nr({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new nr({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function St(I,p){return wn.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function Ut(I,p){return hr.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Kr(I,p){return Di.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:S,verificationCode:Z}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:S,code:Z}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:S,phoneNumber:Z,temporaryProof:ie}=p;return S||g||Z||ie?new nr({verificationId:g,verificationCode:S,phoneNumber:Z,temporaryProof:ie}):null}}class ou{constructor(p){var g,S,Z,ie,Pe,ot;const Ft=(0,O.zd)((0,O.pd)(p)),zt=null!==(g=Ft.apiKey)&&void 0!==g?g:null,$n=null!==(S=Ft.oobCode)&&void 0!==S?S:null,Mn=function Bn(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Z=Ft.mode)&&void 0!==Z?Z:null);z(zt&&$n&&Mn,"argument-error"),this.apiKey=zt,this.operation=Mn,this.code=$n,this.continueUrl=null!==(ie=Ft.continueUrl)&&void 0!==ie?ie:null,this.languageCode=null!==(Pe=Ft.languageCode)&&void 0!==Pe?Pe:null,this.tenantId=null!==(ot=Ft.tenantId)&&void 0!==ot?ot:null}static parseLink(p){const g=function or(I){const p=(0,O.zd)((0,O.pd)(I)).link,g=p?(0,O.zd)((0,O.pd)(p)).deep_link_id:null,S=(0,O.zd)((0,O.pd)(I)).deep_link_id;return(S?(0,O.zd)((0,O.pd)(S)).link:null)||S||g||p||I}(p);try{return new ou(g)}catch{return null}}}let ns=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(g,S){return xs._fromEmailAndPassword(g,S)}static credentialWithLink(g,S){const Z=ou.parseLink(S);return z(Z,"argument-error"),xs._fromEmailAndCode(g,Z.code,Z.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class Zi{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Oi extends Zi{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Si extends Oi{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return z("providerId"in g&&"signInMethod"in g,"argument-error"),Ve._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return z(p.idToken||p.accessToken,"argument-error"),Ve._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Si.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Si.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:S,oauthTokenSecret:Z,pendingToken:ie,nonce:Pe,providerId:ot}=p;if(!S&&!Z&&!g&&!ie||!ot)return null;try{return new Si(ot)._credential({idToken:g,accessToken:S,nonce:Pe,pendingToken:ie})}catch{return null}}}let Io=(()=>{class I extends Oi{constructor(){super("facebook.com")}static credential(g){return Ve._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return I.credentialFromTaggedObject(g)}static credentialFromError(g){return I.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return I.credential(g.oauthAccessToken)}catch{return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),Rs=(()=>{class I extends Oi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,S){return Ve._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:S})}static credentialFromResult(g){return I.credentialFromTaggedObject(g)}static credentialFromError(g){return I.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:S,oauthAccessToken:Z}=g;if(!S&&!Z)return null;try{return I.credential(S,Z)}catch{return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),ia=(()=>{class I extends Oi{constructor(){super("github.com")}static credential(g){return Ve._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return I.credentialFromTaggedObject(g)}static credentialFromError(g){return I.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return I.credential(g.oauthAccessToken)}catch{return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class Co extends Br{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return Ms(p,this.buildRequest())}_linkToIdToken(p,g){const S=this.buildRequest();return S.idToken=g,Ms(p,S)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Ms(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:S,signInMethod:Z,pendingToken:ie}=g;return S&&Z&&ie&&S===Z?new Co(S,ie):null}static _create(p,g){return new Co(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ps extends Zi{constructor(p){z(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return ps.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return ps.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=Co.fromJSON(p);return z(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:S}=p;if(!g||!S)return null;try{return Co._create(S,g)}catch{return null}}}let bu=(()=>{class I extends Oi{constructor(){super("twitter.com")}static credential(g,S){return Ve._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:S})}static credentialFromResult(g){return I.credentialFromTaggedObject(g)}static credentialFromError(g){return I.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:S,oauthTokenSecret:Z}=g;if(!S||!Z)return null;try{return I.credential(S,Z)}catch{return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function sa(I,p){return $a.apply(this,arguments)}function $a(){return($a=(0,A.Z)(function*(I,p){return Zn(I,"POST","/v1/accounts:signUp",nn(I,p))})).apply(this,arguments)}class ui{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,S,Z=!1){return(0,A.Z)(function*(){const ie=yield Dn._fromIdTokenResponse(p,S,Z),Pe=Hn(S);return new ui({user:ie,providerId:Pe,_tokenResponse:S,operationType:g})})()}static _forOperation(p,g,S){return(0,A.Z)(function*(){yield p._updateTokensIfNecessary(S,!0);const Z=Hn(S);return new ui({user:p,providerId:Z,_tokenResponse:S,operationType:g})})()}}function Hn(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function bo(){return(bo=(0,A.Z)(function*(I){var p;const g=mr(I);if(yield g._initializationPromise,null!==(p=g.currentUser)&&void 0!==p&&p.isAnonymous)return new ui({user:g.currentUser,providerId:null,operationType:"signIn"});const S=yield sa(g,{returnSecureToken:!0}),Z=yield ui._fromIdTokenResponse(g,"signIn",S,!0);return yield g._updateCurrentUser(Z.user),Z})).apply(this,arguments)}class Ia extends O.ZR{constructor(p,g,S,Z){var ie;super(g.code,g.message),this.operationType=S,this.user=Z,Object.setPrototypeOf(this,Ia.prototype),this.customData={appName:p.name,tenantId:null!==(ie=p.tenantId)&&void 0!==ie?ie:void 0,_serverResponse:g.customData._serverResponse,operationType:S}}static _fromErrorAndOperation(p,g,S,Z){return new Ia(p,g,S,Z)}}function rs(I,p,g,S){return("reauthenticate"===p?g._getReauthenticationResolver(I):g._getIdTokenResponse(I)).catch(ie=>{throw"auth/multi-factor-auth-required"===ie.code?Ia._fromErrorAndOperation(I,ie,p,S):ie})}function Ns(I){return new Set(I.map(({providerId:p})=>p).filter(p=>!!p))}function Bo(){return(Bo=(0,A.Z)(function*(I,p){const g=(0,O.m9)(I);yield ao(!0,g,p);const{providerUserInfo:S}=yield Ir(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),Z=Ns(S||[]);return g.providerData=g.providerData.filter(ie=>Z.has(ie.providerId)),Z.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Ai(I,p){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,A.Z)(function*(I,p,g=!1){const S=yield zn(I,p._linkToIdToken(I.auth,yield I.getIdToken()),g);return ui._forOperation(I,"link",S)})).apply(this,arguments)}function ao(I,p,g){return qs.apply(this,arguments)}function qs(){return(qs=(0,A.Z)(function*(I,p,g){yield Jn(p);const Z=!1===I?"provider-already-linked":"no-such-provider";z(Ns(p.providerData).has(g)===I,p.auth,Z)})).apply(this,arguments)}function Ca(I,p){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,A.Z)(function*(I,p,g=!1){const{auth:S}=I,Z="reauthenticate";try{const ie=yield zn(I,rs(S,Z,p,I),g);z(ie.idToken,S,"internal-error");const Pe=rn(ie.idToken);z(Pe,S,"internal-error");const{sub:ot}=Pe;return z(I.uid===ot,S,"user-mismatch"),ui._forOperation(I,Z,ie)}catch(ie){throw"auth/user-not-found"===ie?.code&&gt(S,"user-mismatch"),ie}})).apply(this,arguments)}function jo(I,p){return gs.apply(this,arguments)}function gs(){return(gs=(0,A.Z)(function*(I,p,g=!1){const S="signIn",Z=yield rs(I,S,p),ie=yield ui._fromIdTokenResponse(I,S,Z);return g||(yield I._updateCurrentUser(ie.user)),ie})).apply(this,arguments)}function Sr(I,p){return uo.apply(this,arguments)}function uo(){return(uo=(0,A.Z)(function*(I,p){return jo(mr(I),p)})).apply(this,arguments)}function xi(I,p){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,A.Z)(function*(I,p){const g=(0,O.m9)(I);return yield ao(!1,g,p.providerId),Ai(g,p)})).apply(this,arguments)}function oa(I,p){return ji.apply(this,arguments)}function ji(){return(ji=(0,A.Z)(function*(I,p){return Ca((0,O.m9)(I),p)})).apply(this,arguments)}function Ar(I,p){return ba.apply(this,arguments)}function ba(){return(ba=(0,A.Z)(function*(I,p){return Zn(I,"POST","/v1/accounts:signInWithCustomToken",nn(I,p))})).apply(this,arguments)}function Mi(){return(Mi=(0,A.Z)(function*(I,p){const g=mr(I),S=yield Ar(g,{token:p,returnSecureToken:!0}),Z=yield ui._fromIdTokenResponse(g,"signIn",S);return yield g._updateCurrentUser(Z.user),Z})).apply(this,arguments)}class Zs{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?pi._fromServerResponse(p,g):gt(p,"internal-error")}}class pi extends Zs{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new pi(g)}}function ws(I,p,g){var S;z((null===(S=g.url)||void 0===S?void 0:S.length)>0,I,"invalid-continue-uri"),z(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(z(g.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(z(g.android.packageName.length>0,I,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function kn(){return(kn=(0,A.Z)(function*(I,p,g){const S=(0,O.m9)(I),Z={requestType:"PASSWORD_RESET",email:p};g&&ws(S,Z,g),yield Hs(S,Z)})).apply(this,arguments)}function An(){return(An=(0,A.Z)(function*(I,p,g){yield Ln((0,O.m9)(I),{oobCode:p,newPassword:g})})).apply(this,arguments)}function vr(){return(vr=(0,A.Z)(function*(I,p){yield Sn((0,O.m9)(I),{oobCode:p})})).apply(this,arguments)}function Go(I,p){return To.apply(this,arguments)}function To(){return(To=(0,A.Z)(function*(I,p){const g=(0,O.m9)(I),S=yield Ln(g,{oobCode:p}),Z=S.requestType;switch(z(Z,g,"internal-error"),Z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(S.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(S.mfaInfo,g,"internal-error");default:z(S.email,g,"internal-error")}let ie=null;return S.mfaInfo&&(ie=Zs._fromServerResponse(mr(g),S.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.newEmail:S.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.email:S.newEmail)||null,multiFactorInfo:ie},operation:Z}})).apply(this,arguments)}function Ha(){return(Ha=(0,A.Z)(function*(I,p){const{data:g}=yield Go((0,O.m9)(I),p);return g.email})).apply(this,arguments)}function Es(){return(Es=(0,A.Z)(function*(I,p,g){const S=mr(I),Z=yield sa(S,{returnSecureToken:!0,email:p,password:g}),ie=yield ui._fromIdTokenResponse(S,"signIn",Z);return yield S._updateCurrentUser(ie.user),ie})).apply(this,arguments)}function Da(){return(Da=(0,A.Z)(function*(I,p,g){const S=(0,O.m9)(I),Z={requestType:"EMAIL_SIGNIN",email:p};z(g.handleCodeInApp,S,"argument-error"),g&&ws(S,Z,g),yield so(S,Z)})).apply(this,arguments)}function Is(){return(Is=(0,A.Z)(function*(I,p,g){const S=(0,O.m9)(I),Z=ns.credentialWithLink(p,g||Ct());return z(Z._tenantId===(S.tenantId||null),S,"tenant-id-mismatch"),Sr(S,Z)})).apply(this,arguments)}function uu(I,p){return ms.apply(this,arguments)}function ms(){return(ms=(0,A.Z)(function*(I,p){return En(I,"POST","/v1/accounts:createAuthUri",nn(I,p))})).apply(this,arguments)}function zo(){return(zo=(0,A.Z)(function*(I,p){const S={identifier:p,continueUri:Xe()?Ct():"http://localhost"},{signinMethods:Z}=yield uu((0,O.m9)(I),S);return Z||[]})).apply(this,arguments)}function Do(){return(Do=(0,A.Z)(function*(I,p){const g=(0,O.m9)(I),Z={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};p&&ws(g.auth,Z,p);const{email:ie}=yield tr(g.auth,Z);ie!==I.email&&(yield I.reload())})).apply(this,arguments)}function gi(){return(gi=(0,A.Z)(function*(I,p,g){const S=(0,O.m9)(I),ie={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:p};g&&ws(S.auth,ie,g);const{email:Pe}=yield Vo(S.auth,ie);Pe!==I.email&&(yield I.reload())})).apply(this,arguments)}function Fi(I,p){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,A.Z)(function*(I,p){return En(I,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ys(){return(Ys=(0,A.Z)(function*(I,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const S=(0,O.m9)(I),ie={idToken:yield S.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},Pe=yield zn(S,Fi(S.auth,ie));S.displayName=Pe.displayName||null,S.photoURL=Pe.photoUrl||null;const ot=S.providerData.find(({providerId:Ft})=>"password"===Ft);ot&&(ot.displayName=S.displayName,ot.photoURL=S.photoURL),yield S._updateTokensIfNecessary(Pe)})).apply(this,arguments)}function ks(I,p,g){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,A.Z)(function*(I,p,g){const{auth:S}=I,ie={idToken:yield I.getIdToken(),returnSecureToken:!0};p&&(ie.email=p),g&&(ie.password=g);const Pe=yield zn(I,ts(S,ie));yield I._updateTokensIfNecessary(Pe,!0)})).apply(this,arguments)}class Yt{constructor(p,g,S={}){this.isNewUser=p,this.providerId=g,this.profile=S}}class Ls extends Yt{constructor(p,g,S,Z){super(p,g,S),this.username=Z}}class Fn extends Yt{constructor(p,g){super(p,"facebook.com",g)}}class So extends Ls{constructor(p,g){super(p,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class lu extends Yt{constructor(p,g){super(p,"google.com",g)}}class wi extends Ls{constructor(p,g,S){super(p,"twitter.com",g,S)}}function Du(I){const{user:p,_tokenResponse:g}=I;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Fs(I){var p,g;if(!I)return null;const{providerId:S}=I,Z=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},ie=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!S&&I?.idToken){const Pe=null===(g=null===(p=rn(I.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(Pe)return new Yt(ie,"anonymous"!==Pe&&"custom"!==Pe?Pe:null)}if(!S)return null;switch(S){case"facebook.com":return new Fn(ie,Z);case"github.com":return new So(ie,Z);case"google.com":return new lu(ie,Z);case"twitter.com":return new wi(ie,Z,I.screenName||null);case"custom":case"anonymous":return new Yt(ie,null);default:return new Yt(ie,S,Z)}}(g)}class Qs{constructor(p,g,S){this.type=p,this.credential=g,this.auth=S}static _fromIdtoken(p,g){return new Qs("enroll",p,g)}static _fromMfaPendingCredential(p){return new Qs("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,S;if(p?.multiFactorSession){if(null!==(g=p.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Qs._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(S=p.multiFactorSession)&&void 0!==S&&S.idToken)return Qs._fromIdtoken(p.multiFactorSession.idToken)}return null}}class xa{constructor(p,g,S){this.session=p,this.hints=g,this.signInResolver=S}static _fromError(p,g){const S=mr(p),Z=g.customData._serverResponse,ie=(Z.mfaInfo||[]).map(ot=>Zs._fromServerResponse(S,ot));z(Z.mfaPendingCredential,S,"internal-error");const Pe=Qs._fromMfaPendingCredential(Z.mfaPendingCredential);return new xa(Pe,ie,function(){var ot=(0,A.Z)(function*(Ft){const zt=yield Ft._process(S,Pe);delete Z.mfaInfo,delete Z.mfaPendingCredential;const $n=Object.assign(Object.assign({},Z),{idToken:zt.idToken,refreshToken:zt.refreshToken});switch(g.operationType){case"signIn":const Mn=yield ui._fromIdTokenResponse(S,g.operationType,$n);return yield S._updateCurrentUser(Mn.user),Mn;case"reauthenticate":return z(g.user,S,"internal-error"),ui._forOperation(g.user,g.operationType,$n);default:gt(S,"internal-error")}});return function(Ft){return ot.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,A.Z)(function*(){return g.signInResolver(p)})()}}function Li(I,p){return En(I,"POST","/v2/accounts/mfaEnrollment:start",nn(I,p))}class ho{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(S=>Zs._fromServerResponse(p.auth,S)))})}static _fromUser(p){return new ho(p)}getSession(){var p=this;return(0,A.Z)(function*(){return Qs._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,g){var S=this;return(0,A.Z)(function*(){const Z=p,ie=yield S.getSession(),Pe=yield zn(S.user,Z._process(S.user.auth,ie,g));return yield S.user._updateTokensIfNecessary(Pe),S.user.reload()})()}unenroll(p){var g=this;return(0,A.Z)(function*(){const S="string"==typeof p?p:p.uid,Z=yield g.user.getIdToken();try{const ie=yield zn(g.user,function Ma(I,p){return En(I,"POST","/v2/accounts/mfaEnrollment:withdraw",nn(I,p))}(g.user.auth,{idToken:Z,mfaEnrollmentId:S}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Pe})=>Pe!==S),yield g.user._updateTokensIfNecessary(ie),yield g.user.reload()}catch(ie){throw ie}})()}}const k=new WeakMap,L="__sak";class Q{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(L,"1"),this.storage.removeItem(L),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Xn=(()=>{class I extends Q{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,S)=>this.onStorageEvent(g,S),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ce(){const I=(0,O.z$)();return en(I)||Ae(I)}()&&function ri(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fi(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const S of Object.keys(this.listeners)){const Z=this.storage.getItem(S),ie=this.localCache[S];Z!==ie&&g(S,ie,Z)}}onStorageEvent(g,S=!1){if(!g.key)return void this.forAllChangedKeys((ot,Ft,zt)=>{this.notifyListeners(ot,zt)});const Z=g.key;if(S?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ot=this.storage.getItem(Z);if(g.newValue!==ot)null!==g.newValue?this.storage.setItem(Z,g.newValue):this.storage.removeItem(Z);else if(this.localCache[Z]===g.newValue&&!S)return}const ie=()=>{const ot=this.storage.getItem(Z);!S&&this.localCache[Z]===ot||this.notifyListeners(Z,ot)},Pe=this.storage.getItem(Z);!function Vn(){return(0,O.w1)()&&10===document.documentMode}()||Pe===g.newValue||g.newValue===g.oldValue?ie():setTimeout(ie,10)}notifyListeners(g,S){this.localCache[g]=S;const Z=this.listeners[g];if(Z)for(const ie of Array.from(Z))ie(S&&JSON.parse(S))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,S,Z)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:S,newValue:Z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,S){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(S)}_removeListener(g,S){this.listeners[g]&&(this.listeners[g].delete(S),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,S){var Z=()=>super._set,ie=this;return(0,A.Z)(function*(){yield Z().call(ie,g,S),ie.localCache[g]=JSON.stringify(S)})()}_get(g){var S=()=>super._get,Z=this;return(0,A.Z)(function*(){const ie=yield S().call(Z,g);return Z.localCache[g]=JSON.stringify(ie),ie})()}_remove(g){var S=()=>super._remove,Z=this;return(0,A.Z)(function*(){yield S().call(Z,g),delete Z.localCache[g]})()}}return I.type="LOCAL",I})(),ur=(()=>{class I extends Q{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,S){}_removeListener(g,S){}}return I.type="SESSION",I})();let Yr=(()=>{class I{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const S=this.receivers.find(ie=>ie.isListeningto(g));if(S)return S;const Z=new I(g);return this.receivers.push(Z),Z}isListeningto(g){return this.eventTarget===g}handleEvent(g){var S=this;return(0,A.Z)(function*(){const Z=g,{eventId:ie,eventType:Pe,data:ot}=Z.data,Ft=S.handlersMap[Pe];if(!Ft?.size)return;Z.ports[0].postMessage({status:"ack",eventId:ie,eventType:Pe});const zt=Array.from(Ft).map(function(){var Mn=(0,A.Z)(function*(si){return si(Z.origin,ot)});return function(si){return Mn.apply(this,arguments)}}()),$n=yield function jn(I){return Promise.all(I.map(function(){var p=(0,A.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(S){return{fulfilled:!1,reason:S}}});return function(g){return p.apply(this,arguments)}}()))}(zt);Z.ports[0].postMessage({status:"done",eventId:ie,eventType:Pe,response:$n})})()}_subscribe(g,S){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(S)}_unsubscribe(g,S){this.handlersMap[g]&&S&&this.handlersMap[g].delete(S),(!S||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function rr(I="",p=10){let g="";for(let S=0;S<p;S++)g+=Math.floor(10*Math.random());return I+g}class mi{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,S=50){var Z=this;return(0,A.Z)(function*(){const ie=typeof MessageChannel<"u"?new MessageChannel:null;if(!ie)throw new Error("connection_unavailable");let Pe,ot;return new Promise((Ft,zt)=>{const $n=rr("",20);ie.port1.start();const Mn=setTimeout(()=>{zt(new Error("unsupported_event"))},S);ot={messageChannel:ie,onMessage(si){const eu=si;if(eu.data.eventId===$n)switch(eu.data.status){case"ack":clearTimeout(Mn),Pe=setTimeout(()=>{zt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Pe),Ft(eu.data.response);break;default:clearTimeout(Mn),clearTimeout(Pe),zt(new Error("invalid_response"))}}},Z.handlers.add(ot),ie.port1.addEventListener("message",ot.onMessage),Z.target.postMessage({eventType:p,eventId:$n,data:g},[ie.port2])}).finally(()=>{ot&&Z.removeMessageHandler(ot)})})()}}function _r(){return window}function Js(){return typeof _r().WorkerGlobalScope<"u"&&"function"==typeof _r().importScripts}function Xs(){return(Xs=(0,A.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Uu="firebaseLocalStorageDb",Mo="firebaseLocalStorage",qa="fbase_key";class Ko{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Yo(I,p){return I.transaction([Mo],p?"readwrite":"readonly").objectStore(Mo)}function xu(){const I=indexedDB.open(Uu,1);return new Promise((p,g)=>{I.addEventListener("error",()=>{g(I.error)}),I.addEventListener("upgradeneeded",()=>{const S=I.result;try{S.createObjectStore(Mo,{keyPath:qa})}catch(Z){g(Z)}}),I.addEventListener("success",(0,A.Z)(function*(){const S=I.result;S.objectStoreNames.contains(Mo)?p(S):(S.close(),yield function Ts(){const I=indexedDB.deleteDatabase(Uu);return new Ko(I).toPromise()}(),p(yield xu()))}))})}function Ei(I,p,g){return ua.apply(this,arguments)}function ua(){return(ua=(0,A.Z)(function*(I,p,g){const S=Yo(I,!0).put({[qa]:p,value:g});return new Ko(S).toPromise()})).apply(this,arguments)}function Jo(){return(Jo=(0,A.Z)(function*(I,p){const g=Yo(I,!1).get(p),S=yield new Ko(g).toPromise();return void 0===S?null:S.value})).apply(this,arguments)}function la(I,p){const g=Yo(I,!0).delete(p);return new Ko(g).toPromise()}const Pa=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,A.Z)(function*(){return g.db||(g.db=yield xu()),g.db})()}_withRetries(g){var S=this;return(0,A.Z)(function*(){let Z=0;for(;;)try{const ie=yield S._openDb();return yield g(ie)}catch(ie){if(Z++>3)throw ie;S.db&&(S.db.close(),S.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,A.Z)(function*(){return Js()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,A.Z)(function*(){g.receiver=Yr._getInstance(function xo(){return Js()?self:null}()),g.receiver._subscribe("keyChanged",function(){var S=(0,A.Z)(function*(Z,ie){return{keyProcessed:(yield g._poll()).includes(ie.key)}});return function(Z,ie){return S.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var S=(0,A.Z)(function*(Z,ie){return["keyChanged"]});return function(Z,ie){return S.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,A.Z)(function*(){var S,Z;if(g.activeServiceWorker=yield function Yi(){return Xs.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new mi(g.activeServiceWorker);const ie=yield g.sender._send("ping",{},800);ie&&null!==(S=ie[0])&&void 0!==S&&S.fulfilled&&null!==(Z=ie[0])&&void 0!==Z&&Z.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var S=this;return(0,A.Z)(function*(){if(S.sender&&S.activeServiceWorker&&function Ra(){var I;return(null===(I=navigator?.serviceWorker)||void 0===I?void 0:I.controller)||null}()===S.activeServiceWorker)try{yield S.sender._send("keyChanged",{key:g},S.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,A.Z)(function*(){try{if(!indexedDB)return!1;const g=yield xu();return yield Ei(g,L,"1"),yield la(g,L),!0}catch{}return!1})()}_withPendingWrite(g){var S=this;return(0,A.Z)(function*(){S.pendingWrites++;try{yield g()}finally{S.pendingWrites--}})()}_set(g,S){var Z=this;return(0,A.Z)(function*(){return Z._withPendingWrite((0,A.Z)(function*(){return yield Z._withRetries(ie=>Ei(ie,g,S)),Z.localCache[g]=S,Z.notifyServiceWorker(g)}))})()}_get(g){var S=this;return(0,A.Z)(function*(){const Z=yield S._withRetries(ie=>function Qo(I,p){return Jo.apply(this,arguments)}(ie,g));return S.localCache[g]=Z,Z})()}_remove(g){var S=this;return(0,A.Z)(function*(){return S._withPendingWrite((0,A.Z)(function*(){return yield S._withRetries(Z=>la(Z,g)),delete S.localCache[g],S.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,A.Z)(function*(){const S=yield g._withRetries(Pe=>{const ot=Yo(Pe,!1).getAll();return new Ko(ot).toPromise()});if(!S)return[];if(0!==g.pendingWrites)return[];const Z=[],ie=new Set;for(const{fbase_key:Pe,value:ot}of S)ie.add(Pe),JSON.stringify(g.localCache[Pe])!==JSON.stringify(ot)&&(g.notifyListeners(Pe,ot),Z.push(Pe));for(const Pe of Object.keys(g.localCache))g.localCache[Pe]&&!ie.has(Pe)&&(g.notifyListeners(Pe,null),Z.push(Pe));return Z})()}notifyListeners(g,S){this.localCache[g]=S;const Z=this.listeners[g];if(Z)for(const ie of Array.from(Z))ie(S)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,A.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,S){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(S)}_removeListener(g,S){this.listeners[g]&&(this.listeners[g].delete(S),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})();function du(I,p){return En(I,"POST","/v2/accounts/mfaSignIn:start",nn(I,p))}function Za(){return(Za=(0,A.Z)(function*(I){return(yield En(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nr(I){return new Promise((p,g)=>{const S=document.createElement("script");S.setAttribute("src",I),S.onload=p,S.onerror=Z=>{const ie=it("internal-error");ie.customData=Z,g(ie)},S.type="text/javascript",S.charset="UTF-8",function Mu(){var I,p;return null!==(p=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==p?p:document}().appendChild(S)})}function da(I){return`__${I}${Math.floor(1e6*Math.random())}`}const Pr=1e12;class hu{constructor(p){this.auth=p,this.counter=Pr,this._widgets=new Map}render(p,g){const S=this.counter;return this._widgets.set(S,new Vu(p,this.auth.name,g||{})),this.counter++,S}reset(p){var g;const S=p||Pr;null===(g=this._widgets.get(S))||void 0===g||g.delete(),this._widgets.delete(S)}getResponse(p){var g;return(null===(g=this._widgets.get(p||Pr))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,A.Z)(function*(){var S;return null===(S=g._widgets.get(p||Pr))||void 0===S||S.execute(),""})()}}class Vu{constructor(p,g,S){this.params=S,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Z="string"==typeof p?document.getElementById(p):p;z(Z,"argument-error",{appName:g}),this.container=Z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ul(I){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let S=0;S<I;S++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ka=da("rcb"),Ya=new jt(3e4,6e4);class Qi{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=_r().grecaptcha)||void 0===p||!p.render)}load(p,g=""){return z(function R(I){return I.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I)}(g),p,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(_r().grecaptcha):new Promise((S,Z)=>{const ie=_r().setTimeout(()=>{Z(it(p,"network-request-failed"))},Ya.get());_r()[Ka]=()=>{_r().clearTimeout(ie),delete _r()[Ka];const ot=_r().grecaptcha;if(!ot)return void Z(it(p,"internal-error"));const Ft=ot.render;ot.render=(zt,$n)=>{const Mn=Ft(zt,$n);return this.counter++,Mn},this.hostLanguage=g,S(ot)},Nr(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Ka,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(ie),Z(it(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var g;return!(null===(g=_r().grecaptcha)||void 0===g||!g.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class D{load(p){return(0,A.Z)(function*(){return new hu(p)})()}clearedOneInstance(){}}const w="recaptcha",j={theme:"light",type:"image"};class le{constructor(p,g=Object.assign({},j),S){this.parameters=g,this.type=w,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mr(S),this.isInvisible="invisible"===this.parameters.size,z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Z="string"==typeof p?document.getElementById(p):p;z(Z,this.auth,"argument-error"),this.container=Z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new D:new Qi,this.validateStartingState()}verify(){var p=this;return(0,A.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),S=p.getAssertedRecaptcha();return S.getResponse(g)||new Promise(ie=>{const Pe=ot=>{ot&&(p.tokenChangeListeners.delete(Pe),ie(ot))};p.tokenChangeListeners.add(Pe),p.isInvisible&&S.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(S=>S(g)),"function"==typeof p)p(g);else if("string"==typeof p){const S=_r()[p];"function"==typeof S&&S(g)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,A.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const S=document.createElement("div");g.appendChild(S),g=S}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,A.Z)(function*(){z(Xe()&&!Js(),p.auth,"internal-error"),yield function Ke(){let I=null;return new Promise(p=>{"complete"!==document.readyState?(I=()=>p(),window.addEventListener("load",I)):p()}).catch(p=>{throw I&&window.removeEventListener("load",I),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function to(I){return Za.apply(this,arguments)}(p.auth);z(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class sn{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=nr._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function Fr(){return(Fr=(0,A.Z)(function*(I,p,g){const S=mr(I),Z=yield fo(S,p,(0,O.m9)(g));return new sn(Z,ie=>Sr(S,ie))})).apply(this,arguments)}function is(){return(is=(0,A.Z)(function*(I,p,g){const S=(0,O.m9)(I);yield ao(!1,S,"phone");const Z=yield fo(S.auth,p,(0,O.m9)(g));return new sn(Z,ie=>xi(S,ie))})).apply(this,arguments)}function Ro(){return(Ro=(0,A.Z)(function*(I,p,g){const S=(0,O.m9)(I),Z=yield fo(S.auth,p,(0,O.m9)(g));return new sn(Z,ie=>oa(S,ie))})).apply(this,arguments)}function fo(I,p,g){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,A.Z)(function*(I,p,g){var S;const Z=yield g.verify();try{let ie;if(z("string"==typeof Z,I,"argument-error"),z(g.type===w,I,"argument-error"),ie="string"==typeof p?{phoneNumber:p}:p,"session"in ie){const Pe=ie.session;if("phoneNumber"in ie)return z("enroll"===Pe.type,I,"internal-error"),(yield Li(I,{idToken:Pe.credential,phoneEnrollmentInfo:{phoneNumber:ie.phoneNumber,recaptchaToken:Z}})).phoneSessionInfo.sessionInfo;{z("signin"===Pe.type,I,"internal-error");const ot=(null===(S=ie.multiFactorHint)||void 0===S?void 0:S.uid)||ie.multiFactorUid;return z(ot,I,"missing-multi-factor-info"),(yield du(I,{mfaPendingCredential:Pe.credential,mfaEnrollmentId:ot,phoneSignInInfo:{recaptchaToken:Z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Pe}=yield Ge(I,{phoneNumber:ie.phoneNumber,recaptchaToken:Z});return Pe}}finally{g._reset()}})).apply(this,arguments)}function Ja(){return(Ja=(0,A.Z)(function*(I,p){yield Ai((0,O.m9)(I),p)})).apply(this,arguments)}let fa=(()=>{class I{constructor(g){this.providerId=I.PROVIDER_ID,this.auth=mr(g)}verifyPhoneNumber(g,S){return fo(this.auth,g,(0,O.m9)(S))}static credential(g,S){return nr._fromVerification(g,S)}static credentialFromResult(g){return I.credentialFromTaggedObject(g)}static credentialFromError(g){return I.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:S,temporaryProof:Z}=g;return S&&Z?nr._fromTokenResponse(S,Z):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function $r(I,p){return p?Ie(p):(z(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class Bu extends Br{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ms(p,this._buildIdpRequest())}_linkToIdToken(p,g){return Ms(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return Ms(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function ju(I){return jo(I.auth,new Bu(I),I.bypassAuthState)}function Us(I){const{auth:p,user:g}=I;return z(g,p,"internal-error"),Ca(g,new Bu(I),I.bypassAuthState)}function Vs(I){return no.apply(this,arguments)}function no(){return(no=(0,A.Z)(function*(I){const{auth:p,user:g}=I;return z(g,p,"internal-error"),Ai(g,new Bu(I),I.bypassAuthState)})).apply(this,arguments)}class No{constructor(p,g,S,Z,ie=!1){this.auth=p,this.resolver=S,this.user=Z,this.bypassAuthState=ie,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,A.Z)(function*(S,Z){p.pendingPromise={resolve:S,reject:Z};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(ie){p.reject(ie)}});return function(S,Z){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,A.Z)(function*(){const{urlResponse:S,sessionId:Z,postBody:ie,tenantId:Pe,error:ot,type:Ft}=p;if(ot)return void g.reject(ot);const zt={auth:g.auth,requestUri:S,sessionId:Z,tenantId:Pe||void 0,postBody:ie||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ft)(zt))}catch($n){g.reject($n)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return ju;case"linkViaPopup":case"linkViaRedirect":return Vs;case"reauthViaPopup":case"reauthViaRedirect":return Us;default:gt(this.auth,"internal-error")}}resolve(p){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Po=new jt(2e3,1e4);function ss(){return(ss=(0,A.Z)(function*(I,p,g){const S=mr(I);Tt(I,p,Zi);const Z=$r(S,g);return new x(S,"signInViaPopup",p,Z).executeNotNull()})).apply(this,arguments)}function $u(){return($u=(0,A.Z)(function*(I,p,g){const S=(0,O.m9)(I);Tt(S.auth,p,Zi);const Z=$r(S.auth,g);return new x(S.auth,"reauthViaPopup",p,Z,S).executeNotNull()})).apply(this,arguments)}function b(){return(b=(0,A.Z)(function*(I,p,g){const S=(0,O.m9)(I);Tt(S.auth,p,Zi);const Z=$r(S.auth,g);return new x(S.auth,"linkViaPopup",p,Z,S).executeNotNull()})).apply(this,arguments)}let x=(()=>{class I extends No{constructor(g,S,Z,ie,Pe){super(g,S,ie,Pe),this.provider=Z,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var g=this;return(0,A.Z)(function*(){const S=yield g.execute();return z(S,g.auth,"internal-error"),S})()}onExecution(){var g=this;return(0,A.Z)(function*(){we(1===g.filter.length,"Popup operations only handle one event");const S=rr();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],S),g.authWindow.associatedEvent=S,g.resolver._originValidation(g.auth).catch(Z=>{g.reject(Z)}),g.resolver._isIframeWebStorageSupported(g.auth,Z=>{Z||g.reject(it(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(it(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const g=()=>{var S,Z;this.pollId=null!==(Z=null===(S=this.authWindow)||void 0===S?void 0:S.window)&&void 0!==Z&&Z.closed?window.setTimeout(()=>{this.pollId=null,this.reject(it(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Po.get())};g()}}return I.currentPopupAction=null,I})();const P=new Map;class $ extends No{constructor(p,g,S=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,S),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,A.Z)(function*(){let S=P.get(g.auth._key());if(!S){try{const ie=(yield function J(I,p){return re.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;S=()=>Promise.resolve(ie)}catch(Z){S=()=>Promise.reject(Z)}P.set(g.auth._key(),S)}return g.bypassAuthState||P.set(g.auth._key(),()=>Promise.resolve(null)),S()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,S=this;return(0,A.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(S,p);if("unknown"!==p.type){if(p.eventId){const Z=yield S.auth._redirectUserForId(p.eventId);if(Z)return S.user=Z,g().call(S,p);S.resolve(null)}}else S.resolve(null)})()}onExecution(){return(0,A.Z)(function*(){})()}cleanUp(){}}function re(){return(re=(0,A.Z)(function*(I,p){const g=Ii(p),S=fr(I);if(!(yield S._isAvailable()))return!1;const Z="true"===(yield S._get(g));return yield S._remove(g),Z})).apply(this,arguments)}function Re(I,p){return ct.apply(this,arguments)}function ct(){return(ct=(0,A.Z)(function*(I,p){return fr(I)._set(Ii(p),"true")})).apply(this,arguments)}function Qt(I,p){P.set(I._key(),p)}function fr(I){return Ie(I._redirectPersistence)}function Ii(I){return he("pendingRedirect",I.config.apiKey,I.name)}function V(){return(V=(0,A.Z)(function*(I,p,g){const S=mr(I);Tt(I,p,Zi),yield S._initializationPromise;const Z=$r(S,g);return yield Re(Z,S),Z._openRedirect(S,p,"signInViaRedirect")})).apply(this,arguments)}function ue(){return(ue=(0,A.Z)(function*(I,p,g){const S=(0,O.m9)(I);Tt(S.auth,p,Zi),yield S.auth._initializationPromise;const Z=$r(S.auth,g);yield Re(Z,S.auth);const ie=yield Wn(S);return Z._openRedirect(S.auth,p,"reauthViaRedirect",ie)})).apply(this,arguments)}function bt(){return(bt=(0,A.Z)(function*(I,p,g){const S=(0,O.m9)(I);Tt(S.auth,p,Zi),yield S.auth._initializationPromise;const Z=$r(S.auth,g);yield ao(!1,S,p.providerId),yield Re(Z,S.auth);const ie=yield Wn(S);return Z._openRedirect(S.auth,p,"linkViaRedirect",ie)})).apply(this,arguments)}function mn(){return(mn=(0,A.Z)(function*(I,p){return yield mr(I)._initializationPromise,In(I,p,!1)})).apply(this,arguments)}function In(I,p){return ir.apply(this,arguments)}function ir(){return(ir=(0,A.Z)(function*(I,p,g=!1){const S=mr(I),Z=$r(S,p),Pe=yield new $(S,Z,g).execute();return Pe&&!g&&(delete Pe.user._redirectEventId,yield S._persistUserIfCurrent(Pe.user),yield S._setRedirectUser(null,p)),Pe})).apply(this,arguments)}function Wn(I){return po.apply(this,arguments)}function po(){return(po=(0,A.Z)(function*(I){const p=rr(`${I.uid}:::`);return I._redirectEventId=p,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),p})).apply(this,arguments)}class Sl{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(S=>{this.isEventForConsumer(p,S)&&(g=!0,this.sendToConsumer(p,S),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function ta(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ea(I);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var S;if(p.error&&!ea(p)){const Z=(null===(S=p.error.code)||void 0===S?void 0:S.split("auth/")[1])||"internal-error";g.onError(it(this.auth,Z))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const S=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&S}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fu(p))}saveEventToCache(p){this.cachedEventUids.add(fu(p)),this.lastProcessedEventTime=Date.now()}}function fu(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(p=>p).join("-")}function ea({type:I,error:p}){return"unknown"===I&&"auth/no-auth-event"===p?.code}function ga(I){return pu.apply(this,arguments)}function pu(){return(pu=(0,A.Z)(function*(I,p={}){return En(I,"GET","/v1/projects",p)})).apply(this,arguments)}const Ni=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oc=/^https?/;function gu(){return(gu=(0,A.Z)(function*(I){if(I.config.emulator)return;const{authorizedDomains:p}=yield ga(I);for(const g of p)try{if(td(g))return}catch{}gt(I,"unauthorized-domain")})).apply(this,arguments)}function td(I){const p=Ct(),{protocol:g,hostname:S}=new URL(p);if(I.startsWith("chrome-extension://")){const Pe=new URL(I);return""===Pe.hostname&&""===S?"chrome-extension:"===g&&I.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&Pe.hostname===S}if(!oc.test(g))return!1;if(Ni.test(I))return S===I;const Z=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Z+"|"+Z+")$","i").test(S)}const Oh=new jt(3e4,6e4);function kh(){const I=_r().___jsl;if(I?.H)for(const p of Object.keys(I.H))if(I.H[p].r=I.H[p].r||[],I.H[p].L=I.H[p].L||[],I.H[p].r=[...I.H[p].L],I.CP)for(let g=0;g<I.CP.length;g++)I.CP[g]=null}let Al=null;function Wp(I){return Al=Al||function nd(I){return new Promise((p,g)=>{var S,Z,ie;function Pe(){kh(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{kh(),g(it(I,"network-request-failed"))},timeout:Oh.get()})}if(null!==(Z=null===(S=_r().gapi)||void 0===S?void 0:S.iframes)&&void 0!==Z&&Z.Iframe)p(gapi.iframes.getContext());else{if(null===(ie=_r().gapi)||void 0===ie||!ie.load){const ot=da("iframefcb");return _r()[ot]=()=>{gapi.load?Pe():g(it(I,"network-request-failed"))},Nr(`https://apis.google.com/js/api.js?onload=${ot}`).catch(Ft=>g(Ft))}Pe()}}).catch(p=>{throw Al=null,p})}(I),Al}const ll=new jt(5e3,15e3),Uf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xl(I){const p=I.config;z(p.authDomain,I,"auth-domain-config-required");const g=p.emulator?Ot(p,"emulator/auth/iframe"):`https://${I.config.authDomain}/__/auth/iframe`,S={apiKey:p.apiKey,appName:I.name,v:xe.SDK_VERSION},Z=Vf.get(I.config.apiHost);Z&&(S.eid=Z);const ie=I._getFrameworks();return ie.length&&(S.fw=ie.join(",")),`${g}?${(0,O.xO)(S).slice(1)}`}function rd(){return rd=(0,A.Z)(function*(I){const p=yield Wp(I),g=_r().gapi;return z(g,I,"internal-error"),p.open({where:document.body,url:xl(I),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uf,dontclear:!0},S=>new Promise(function(){var Z=(0,A.Z)(function*(ie,Pe){yield S.restyle({setHideOnLeave:!1});const ot=it(I,"network-request-failed"),Ft=_r().setTimeout(()=>{Pe(ot)},ll.get());function zt(){_r().clearTimeout(Ft),ie(S)}S.ping(zt).then(zt,()=>{Pe(ot)})});return function(ie,Pe){return Z.apply(this,arguments)}}()))}),rd.apply(this,arguments)}const Ud={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ka{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function na(I,p,g,S,Z,ie){z(I.config.authDomain,I,"auth-domain-config-required"),z(I.config.apiKey,I,"invalid-api-key");const Pe={apiKey:I.config.apiKey,appName:I.name,authType:g,redirectUrl:S,v:xe.SDK_VERSION,eventId:Z};if(p instanceof Zi){p.setDefaultLanguage(I.languageCode),Pe.providerId=p.providerId||"",(0,O.xb)(p.getCustomParameters())||(Pe.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ft,zt]of Object.entries(ie||{}))Pe[Ft]=zt}if(p instanceof Oi){const Ft=p.getScopes().filter(zt=>""!==zt);Ft.length>0&&(Pe.scopes=Ft.join(","))}I.tenantId&&(Pe.tid=I.tenantId);const ot=Pe;for(const Ft of Object.keys(ot))void 0===ot[Ft]&&delete ot[Ft];return`${function Lh({config:I}){return I.emulator?Ot(I,"emulator/auth/handler"):`https://${I.authDomain}/__/auth/handler`}(I)}?${(0,O.xO)(ot).slice(1)}`}const uc="webStorageSupport",Pl=class cl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ur,this._completeRedirectFn=In,this._overrideRedirectResult=Qt}_openPopup(p,g,S,Z){var ie=this;return(0,A.Z)(function*(){var Pe;we(null===(Pe=ie.eventManagers[p._key()])||void 0===Pe?void 0:Pe.manager,"_initialize() not called before _openPopup()");const ot=na(p,g,S,Ct(),Z);return function sd(I,p,g,S=500,Z=600){const ie=Math.max((window.screen.availHeight-Z)/2,0).toString(),Pe=Math.max((window.screen.availWidth-S)/2,0).toString();let ot="";const Ft=Object.assign(Object.assign({},Ud),{width:S.toString(),height:Z.toString(),top:ie,left:Pe}),zt=(0,O.z$)().toLowerCase();g&&(ot=yn(zt)?"_blank":g),je(zt)&&(p=p||"http://localhost",Ft.scrollbars="yes");const $n=Object.entries(Ft).reduce((si,[eu,mc])=>`${si}${eu}=${mc},`,"");if(function Zt(I=(0,O.z$)()){var p;return Ae(I)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(zt)&&"_self"!==ot)return function ac(I,p){const g=document.createElement("a");g.href=I,g.target=p;const S=document.createEvent("MouseEvent");S.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(S)}(p||"",ot),new ka(null);const Mn=window.open(p||"",ot,$n);z(Mn,I,"popup-blocked");try{Mn.focus()}catch{}return new ka(Mn)}(p,ot,rr())})()}_openRedirect(p,g,S,Z){var ie=this;return(0,A.Z)(function*(){return yield ie._originValidation(p),function bs(I){_r().location.href=I}(na(p,g,S,Ct(),Z)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:Z,promise:ie}=this.eventManagers[g];return Z?Promise.resolve(Z):(we(ie,"If manager is not set, promise should be"),ie)}const S=this.initAndGetManager(p);return this.eventManagers[g]={promise:S},S.catch(()=>{delete this.eventManagers[g]}),S}initAndGetManager(p){var g=this;return(0,A.Z)(function*(){const S=yield function Ld(I){return rd.apply(this,arguments)}(p),Z=new Sl(p);return S.register("authEvent",ie=>(z(ie?.authEvent,p,"invalid-auth-event"),{status:Z.onEvent(ie.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:Z},g.iframes[p._key()]=S,Z})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(uc,{type:uc},Z=>{var ie;const Pe=null===(ie=Z?.[0])||void 0===ie?void 0:ie[uc];void 0!==Pe&&g(!!Pe),gt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Yu(I){return gu.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return fi()||en()||Ae()}};class ma{constructor(p){this.factorId=p}_process(p,g,S){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,S);case"signin":return this._finalizeSignIn(p,g.credential);default:return tt("unexpected MultiFactorSessionType")}}}class Pc extends ma{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Pc(p)}_finalizeEnroll(p,g,S){return function Au(I,p){return En(I,"POST","/v2/accounts/mfaEnrollment:finalize",nn(I,p))}(p,{idToken:g,displayName:S,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function Ku(I,p){return En(I,"POST","/v2/accounts/mfaSignIn:finalize",nn(I,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let go=(()=>{class I{constructor(){}static assertion(g){return Pc._fromCredential(g)}}return I.FACTOR_ID="phone",I})();var Qu="@firebase/auth";class Ji{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,A.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(S=>{p(S?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);g&&(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Fa(){return window}function ad(){return(ad=(0,A.Z)(function*(I,p,g){var S;const{BuildInfo:Z}=Fa();we(p.sessionId,"AuthEvent did not contain a session ID");const ie=yield ld(p.sessionId),Pe={};return Ae()?Pe.ibi=Z.packageName:ve()?Pe.apn=Z.packageName:gt(I,"operation-not-supported-in-this-environment"),Z.displayName&&(Pe.appDisplayName=Z.displayName),Pe.sessionId=ie,na(I,g,p.type,void 0,null!==(S=p.eventId)&&void 0!==S?S:void 0,Pe)})).apply(this,arguments)}function Ol(){return(Ol=(0,A.Z)(function*(I){const{BuildInfo:p}=Fa(),g={};Ae()?g.iosBundleId=p.packageName:ve()?g.androidPackageName=p.packageName:gt(I,"operation-not-supported-in-this-environment"),yield ga(I,g)})).apply(this,arguments)}function Ju(){return(Ju=(0,A.Z)(function*(I,p,g){const{cordova:S}=Fa();let Z=()=>{};try{yield new Promise((ie,Pe)=>{let ot=null;function Ft(){var Mn;ie();const si=null===(Mn=S.plugins.browsertab)||void 0===Mn?void 0:Mn.close;"function"==typeof si&&si(),"function"==typeof g?.close&&g.close()}function zt(){ot||(ot=window.setTimeout(()=>{Pe(it(I,"redirect-cancelled-by-user"))},2e3))}function $n(){"visible"===document?.visibilityState&&zt()}p.addPassiveListener(Ft),document.addEventListener("resume",zt,!1),ve()&&document.addEventListener("visibilitychange",$n,!1),Z=()=>{p.removePassiveListener(Ft),document.removeEventListener("resume",zt,!1),document.removeEventListener("visibilitychange",$n,!1),ot&&window.clearTimeout(ot)}})}finally{Z()}})).apply(this,arguments)}function ld(I){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,A.Z)(function*(I){const p=Hd(I),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(Z=>Z.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Hd(I){if(we(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(I);const p=new ArrayBuffer(I.length),g=new Uint8Array(p);for(let S=0;S<I.length;S++)g[S]=I.charCodeAt(S);return g}(0,O.Pz)("authIdTokenMaxAge"),function lc(I){(0,xe._registerComponent)(new Le.wA("auth",(p,{options:g})=>{const S=p.getProvider("app").getImmediate(),Z=p.getProvider("heartbeat"),{apiKey:ie,authDomain:Pe}=S.options;return((ot,Ft)=>{z(ie&&!ie.includes(":"),"invalid-api-key",{appName:ot.name}),z(!Pe?.includes(":"),"argument-error",{appName:ot.name});const zt={apiKey:ie,authDomain:Pe,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oi(I)},$n=new wa(ot,Ft,zt);return function _e(I,p){const g=p?.persistence||[],S=(Array.isArray(g)?g:[g]).map(Ie);p?.errorMap&&I._updateErrorMap(p.errorMap),I._initializeWithPersistence(S,p?.popupRedirectResolver)}($n,g),$n})(S,Z)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,S)=>{p.getProvider("auth-internal").initialize()})),(0,xe._registerComponent)(new Le.wA("auth-internal",p=>{const g=mr(p.getProvider("auth").getImmediate());return new Ji(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,xe.registerVersion)(Qu,"0.21.4",function Oo(I){switch(I){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(I)),(0,xe.registerVersion)(Qu,"0.21.4","esm2017")}("Browser");class ko extends Sl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,A.Z)(function*(){yield p.initPromise})()}}function kl(I){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,A.Z)(function*(I){const p=yield kc()._get(Fc(I));return p&&(yield kc()._remove(Fc(I))),p})).apply(this,arguments)}function dd(){const I=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const S=Math.floor(Math.random()*p.length);I.push(p.charAt(S))}return I.join("")}function kc(){return Ie(Xn)}function Fc(I){return he("authEvent",I.config.apiKey,I.name)}function pl(I){if(!I?.includes("?"))return{};const[p,...g]=I.split("?");return(0,O.zd)(g.join("?"))}const hc=class Gd{constructor(){this._redirectPersistence=ur,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=In,this._overrideRedirectResult=Qt}_initialize(p){var g=this;return(0,A.Z)(function*(){const S=p._key();let Z=g.eventManagers.get(S);return Z||(Z=new ko(p),g.eventManagers.set(S,Z),g.attachCallbackListeners(p,Z)),Z})()}_openPopup(p){gt(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,S,Z){var ie=this;return(0,A.Z)(function*(){!function ud(I){var p,g,S,Z,ie,Pe,ot,Ft,zt,$n;const Mn=Fa();z("function"==typeof(null===(p=Mn?.universalLinks)||void 0===p?void 0:p.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),z(typeof(null===(g=Mn?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),z("function"==typeof(null===(ie=null===(Z=null===(S=Mn?.cordova)||void 0===S?void 0:S.plugins)||void 0===Z?void 0:Z.browsertab)||void 0===ie?void 0:ie.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(Ft=null===(ot=null===(Pe=Mn?.cordova)||void 0===Pe?void 0:Pe.plugins)||void 0===ot?void 0:ot.browsertab)||void 0===Ft?void 0:Ft.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===($n=null===(zt=Mn?.cordova)||void 0===zt?void 0:zt.InAppBrowser)||void 0===$n?void 0:$n.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const Pe=yield ie._initialize(p);yield Pe.initialized(),Pe.resetRedirect(),function tn(){P.clear()}(),yield ie._originValidation(p);const ot=function cd(I,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:dd(),postBody:null,tenantId:I.tenantId,error:it(I,"no-auth-event")}}(p,S,Z);yield function Oc(I,p){return kc()._set(Fc(I),p)}(p,ot);const Ft=yield function yu(I,p,g){return ad.apply(this,arguments)}(p,ot,g),zt=yield function dl(I){const{cordova:p}=Fa();return new Promise(g=>{p.plugins.browsertab.isAvailable(S=>{let Z=null;S?p.plugins.browsertab.openUrl(I):Z=p.InAppBrowser.open(I,function _t(I=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}()?"_blank":"_system","location=yes"),g(Z)})})}(Ft);return function Bh(I,p,g){return Ju.apply(this,arguments)}(p,Pe,zt)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Vh(I){return Ol.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:S,handleOpenURL:Z,BuildInfo:ie}=Fa(),Pe=setTimeout((0,A.Z)(function*(){yield kl(p),g.onEvent(ra())}),500),ot=function(){var $n=(0,A.Z)(function*(Mn){clearTimeout(Pe);const si=yield kl(p);let eu=null;si&&Mn?.url&&(eu=function Ll(I,p){var g,S;const Z=function Lc(I){const p=pl(I),g=p.link?decodeURIComponent(p.link):void 0,S=pl(g).link,Z=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return pl(Z).link||Z||S||g||I}(p);if(Z.includes("/__/auth/callback")){const ie=pl(Z),Pe=ie.firebaseError?function fl(I){try{return JSON.parse(I)}catch{return null}}(decodeURIComponent(ie.firebaseError)):null,ot=null===(S=null===(g=Pe?.code)||void 0===g?void 0:g.split("auth/"))||void 0===S?void 0:S[1],Ft=ot?it(ot):null;return Ft?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:Ft,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:Z,postBody:null}}return null}(si,Mn.url)),g.onEvent(eu||ra())});return function(si){return $n.apply(this,arguments)}}();typeof S<"u"&&"function"==typeof S.subscribe&&S.subscribe(null,ot);const Ft=Z,zt=`${ie.packageName.toLowerCase()}://`;Fa().handleOpenURL=function(){var $n=(0,A.Z)(function*(Mn){if(Mn.toLowerCase().startsWith(zt)&&ot({url:Mn}),"function"==typeof Ft)try{Ft(Mn)}catch(si){console.error(si)}});return function(Mn){return $n.apply(this,arguments)}}()}};function ra(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:it("no-auth-event")}}function Vl(){var I;return(null===(I=self?.location)||void 0===I?void 0:I.protocol)||null}function zd(I=(0,O.z$)()){return!("file:"!==Vl()&&"ionic:"!==Vl()&&"capacitor:"!==Vl()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function La(){try{const I=self.localStorage,p=rr();if(I)return I.setItem(p,"1"),I.removeItem(p),!function yl(I=(0,O.z$)()){return function ml(){return(0,O.w1)()&&11===document?.documentMode}()||function _l(I=(0,O.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,O.hl)()}catch{return Ru()&&(0,O.hl)()}return!1}function Ru(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function as(){return(function fc(){return"http:"===Vl()||"https:"===Vl()}()||(0,O.ru)()||zd())&&!function Xa(){return(0,O.b$)()||(0,O.UG)()}()&&La()&&!Ru()}function el(){return zd()&&typeof document<"u"}function Bl(){return(Bl=(0,A.Z)(function*(){return!!el()&&new Promise(I=>{const p=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),I(!0)})})})).apply(this,arguments)}const Dt={LOCAL:"local",NONE:"none",SESSION:"session"},_i=z,Hu="persistence";function _n(I){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,A.Z)(function*(I){yield I._initializationPromise;const p=Wt(),g=he(Hu,I.config.apiKey,I.name);p&&p.setItem(g,I._getPersistence())})).apply(this,arguments)}function Wt(){var I;try{return(null===(I=function $h(){return typeof window<"u"?window:null}())||void 0===I?void 0:I.sessionStorage)||null}catch{return null}}const Ye=z;class Et{constructor(){this.browserResolver=Ie(Pl),this.cordovaResolver=Ie(hc),this.underlyingResolver=null,this._redirectPersistence=ur,this._completeRedirectFn=In,this._overrideRedirectResult=Qt}_initialize(p){var g=this;return(0,A.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,S,Z){var ie=this;return(0,A.Z)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._openPopup(p,g,S,Z)})()}_openRedirect(p,g,S,Z){var ie=this;return(0,A.Z)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._openRedirect(p,g,S,Z)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return el()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ye(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,A.Z)(function*(){if(p.underlyingResolver)return;const g=yield function Fo(){return Bl.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function ys(I){return I.unwrap()}function fd(I){return Wd(I)}function Wd(I){const{_tokenResponse:p}=I instanceof O.ZR?I.customData:I;if(!p)return null;if(!(I instanceof O.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return fa.credentialFromResult(I);const g=p.providerId;if(!g||"password"===g)return null;let S;switch(g){case"google.com":S=Rs;break;case"facebook.com":S=Io;break;case"github.com":S=ia;break;case"twitter.com":S=bu;break;default:const{oauthIdToken:Z,oauthAccessToken:ie,oauthTokenSecret:Pe,pendingToken:ot,nonce:Ft}=p;return ie||Pe||Z||ot?ot?g.startsWith("saml.")?Co._create(g,ot):Ve._fromParams({providerId:g,signInMethod:g,pendingToken:ot,idToken:Z,accessToken:ie}):new Si(g).credential({idToken:Z,accessToken:ie,rawNonce:Ft}):null}return I instanceof O.ZR?S.credentialFromError(I):S.credentialFromResult(I)}function Xi(I,p){return p.catch(g=>{throw g instanceof O.ZR&&function vl(I,p){var g;const S=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new Zd(I,function Ki(I,p){var g;const S=(0,O.m9)(I),Z=p;return z(p.customData.operationType,S,"argument-error"),z(null===(g=Z.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,S,"argument-error"),xa._fromError(S,Z)}(I,p));else if(S){const Z=Wd(p),ie=p;Z&&(ie.credential=Z,ie.tenantId=S.tenantId||void 0,ie.email=S.email||void 0,ie.phoneNumber=S.phoneNumber||void 0)}}(I,g),g}).then(g=>{const Z=g.user;return{operationType:g.operationType,credential:fd(g),additionalUserInfo:Du(g),user:wl.getOrCreate(Z)}})}function qd(I,p){return pd.apply(this,arguments)}function pd(){return(pd=(0,A.Z)(function*(I,p){const g=yield p;return{verificationId:g.verificationId,confirm:S=>Xi(I,g.confirm(S))}})).apply(this,arguments)}class Zd{constructor(p,g){this.resolver=g,this.auth=function pc(I){return I.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Xi(ys(this.auth),this.resolver.resolveSignIn(p))}}class wl{constructor(p){this._delegate=p,this.multiFactor=function K(I){const p=(0,O.m9)(I);return k.has(p)||k.set(p,ho._fromUser(p)),k.get(p)}(p)}static getOrCreate(p){return wl.USER_MAP.has(p)||wl.USER_MAP.set(p,new wl(p)),wl.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,A.Z)(function*(){return Xi(g.auth,xi(g._delegate,p))})()}linkWithPhoneNumber(p,g){var S=this;return(0,A.Z)(function*(){return qd(S.auth,function Ri(I,p,g){return is.apply(this,arguments)}(S._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,A.Z)(function*(){return Xi(g.auth,function sc(I,p,g){return b.apply(this,arguments)}(g._delegate,p,Et))})()}linkWithRedirect(p){var g=this;return(0,A.Z)(function*(){return yield _n(mr(g.auth)),function Oe(I,p,g){return function $e(I,p,g){return bt.apply(this,arguments)}(I,p,g)}(g._delegate,p,Et)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,A.Z)(function*(){return Xi(g.auth,oa(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return qd(this.auth,function Ui(I,p,g){return Ro.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return Xi(this.auth,function Nc(I,p,g){return $u.apply(this,arguments)}(this._delegate,p,Et))}reauthenticateWithRedirect(p){var g=this;return(0,A.Z)(function*(){return yield _n(mr(g.auth)),function H(I,p,g){return function X(I,p,g){return ue.apply(this,arguments)}(I,p,g)}(g._delegate,p,Et)})()}sendEmailVerification(p){return function Wo(I,p){return Do.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,A.Z)(function*(){return yield function Bi(I,p){return Bo.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function Sa(I,p){return ks((0,O.m9)(I),p,null)}(this._delegate,p)}updatePassword(p){return function qo(I,p){return ks((0,O.m9)(I),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Xo(I,p){return Ja.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Os(I,p){return Ys.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function za(I,p,g){return gi.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}wl.USER_MAP=new WeakMap;const $l=z;let gc=(()=>{class I{constructor(g,S){if(this.app=g,S.isInitialized())return this._delegate=S.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Z}=g.options;$l(Z,"invalid-api-key",{appName:g.name}),$l(Z,"invalid-api-key",{appName:g.name});const ie=typeof window<"u"?Et:void 0;this._delegate=S.initialize({options:{persistence:Hl(Z,g.name),popupRedirectResolver:ie}}),this._delegate._updateErrorMap(At),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?wl.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,S){!function Ea(I,p,g){const S=mr(I);z(S._canInitEmulator,S,"emulator-config-failed"),z(/^https?:\/\//.test(p),S,"invalid-emulator-scheme");const Z=!!g?.disableWarnings,ie=Zr(p),{host:Pe,port:ot}=function es(I){const p=Zr(I),g=/(\/\/)?([^?#/]+)/.exec(I.substr(p.length));if(!g)return{host:"",port:null};const S=g[2].split("@").pop()||"",Z=/^(\[[^\]]+\])(:|$)/.exec(S);if(Z){const ie=Z[1];return{host:ie,port:sr(S.substr(ie.length+1))}}{const[ie,Pe]=S.split(":");return{host:ie,port:sr(Pe)}}}(p);S.config.emulator={url:`${ie}//${Pe}${null===ot?"":`:${ot}`}/`},S.settings.appVerificationDisabledForTesting=!0,S.emulatorConfig=Object.freeze({host:Pe,port:ot,protocol:ie.replace(":",""),options:Object.freeze({disableWarnings:Z})}),Z||function Dr(){function I(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",I):I())}()}(this._delegate,g,S)}applyActionCode(g){return function Ho(I,p){return vr.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Go(this._delegate,g)}confirmPasswordReset(g,S){return function $o(I,p,g){return An.apply(this,arguments)}(this._delegate,g,S)}createUserWithEmailAndPassword(g,S){var Z=this;return(0,A.Z)(function*(){return Xi(Z._delegate,function aa(I,p,g){return Es.apply(this,arguments)}(Z._delegate,g,S))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Ga(I,p){return zo.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function co(I,p){return"EMAIL_SIGNIN"===ou.parseLink(p)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,A.Z)(function*(){$l(as(),g._delegate,"operation-not-supported-in-this-environment");const S=yield function gn(I,p){return mn.apply(this,arguments)}(g._delegate,Et);return S?Xi(g._delegate,Promise.resolve(S)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function jh(I,p){mr(I)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,S,Z){const{next:ie,error:Pe,complete:ot}=qn(g,S,Z);return this._delegate.onAuthStateChanged(ie,Pe,ot)}onIdTokenChanged(g,S,Z){const{next:ie,error:Pe,complete:ot}=qn(g,S,Z);return this._delegate.onIdTokenChanged(ie,Pe,ot)}sendSignInLinkToEmail(g,S){return function ar(I,p,g){return Da.apply(this,arguments)}(this._delegate,g,S)}sendPasswordResetEmail(g,S){return function ki(I,p,g){return kn.apply(this,arguments)}(this._delegate,g,S||void 0)}setPersistence(g){var S=this;return(0,A.Z)(function*(){let Z;switch(function jl(I,p){_i(Object.values(Dt).includes(p),I,"invalid-persistence-type"),(0,O.b$)()?_i(p!==Dt.SESSION,I,"unsupported-persistence-type"):(0,O.UG)()?_i(p===Dt.NONE,I,"unsupported-persistence-type"):Ru()?_i(p===Dt.NONE||p===Dt.LOCAL&&(0,O.hl)(),I,"unsupported-persistence-type"):_i(p===Dt.NONE||La(),I,"unsupported-persistence-type")}(S._delegate,g),g){case Dt.SESSION:Z=ur;break;case Dt.LOCAL:Z=(yield Ie(Pa)._isAvailable())?Pa:Xn;break;case Dt.NONE:Z=pe;break;default:return gt("argument-error",{appName:S._delegate.name})}return S._delegate.setPersistence(Z)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Xi(this._delegate,function au(I){return bo.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Xi(this._delegate,Sr(this._delegate,g))}signInWithCustomToken(g){return Xi(this._delegate,function Ta(I,p){return Mi.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,S){return Xi(this._delegate,function nt(I,p,g){return Sr((0,O.m9)(I),ns.credential(p,g))}(this._delegate,g,S))}signInWithEmailLink(g,S){return Xi(this._delegate,function $i(I,p,g){return Is.apply(this,arguments)}(this._delegate,g,S))}signInWithPhoneNumber(g,S){return qd(this._delegate,function ln(I,p,g){return Fr.apply(this,arguments)}(this._delegate,g,S))}signInWithPopup(g){var S=this;return(0,A.Z)(function*(){return $l(as(),S._delegate,"operation-not-supported-in-this-environment"),Xi(S._delegate,function pa(I,p,g){return ss.apply(this,arguments)}(S._delegate,g,Et))})()}signInWithRedirect(g){var S=this;return(0,A.Z)(function*(){return $l(as(),S._delegate,"operation-not-supported-in-this-environment"),yield _n(S._delegate),function _s(I,p,g){return function ro(I,p,g){return V.apply(this,arguments)}(I,p,g)}(S._delegate,g,Et)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function lo(I,p){return Ha.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=Dt,I})();function qn(I,p,g){let S=I;"function"!=typeof I&&({next:S,error:p,complete:g}=I);const Z=S;return{next:Pe=>Z(Pe&&wl.getOrCreate(Pe)),error:p,complete:g}}function Hl(I,p){const g=function Uc(I,p){const g=Wt();if(!g)return[];const S=he(Hu,I,p);switch(g.getItem(S)){case Dt.NONE:return[pe];case Dt.LOCAL:return[Pa,ur];case Dt.SESSION:return[ur];default:return[]}}(I,p);if(typeof self<"u"&&!g.includes(Pa)&&g.push(Pa),typeof window<"u")for(const S of[Xn,ur])g.includes(S)||g.push(S);return g.includes(pe)||g.push(pe),g}class Vc{constructor(){this.providerId="phone",this._delegate=new fa(ys(y.Z.auth()))}static credential(p,g){return fa.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}Vc.PHONE_SIGN_IN_METHOD=fa.PHONE_SIGN_IN_METHOD,Vc.PROVIDER_ID=fa.PROVIDER_ID;const Gi=z;class bn{constructor(p,g,S=y.Z.app()){var Z;Gi(null===(Z=S.options)||void 0===Z?void 0:Z.apiKey,"invalid-api-key",{appName:S.name}),this._delegate=new le(p,g,S.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Hr(I){I.INTERNAL.registerComponent(new Le.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),S=p.getProvider("auth");return new gc(g,S)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ns,FacebookAuthProvider:Io,GithubAuthProvider:ia,GoogleAuthProvider:Rs,OAuthProvider:Si,SAMLAuthProvider:ps,PhoneAuthProvider:Vc,PhoneMultiFactorGenerator:go,RecaptchaVerifier:bn,TwitterAuthProvider:bu,Auth:gc,AuthCredential:Br,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.3.4")}(y.Z)},8766:(Kt,qe,Y)=>{Y.d(qe,{Lj:()=>gt,X3:()=>yt});var A=Y(5861);let O,xe;const Le=new WeakMap,Fe=new WeakMap,Be=new WeakMap,fe=new WeakMap,ge=new WeakMap;let pt={get(z,tt,we){if(z instanceof IDBTransaction){if("done"===tt)return Fe.get(z);if("objectStoreNames"===tt)return z.objectStoreNames||Be.get(z);if("store"===tt)return we.objectStoreNames[1]?void 0:we.objectStore(we.objectStoreNames[0])}return ft(z[tt])},set:(z,tt,we)=>(z[tt]=we,!0),has:(z,tt)=>z instanceof IDBTransaction&&("done"===tt||"store"===tt)||tt in z};function Ze(z){return"function"==typeof z?function Ht(z){return z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Me(){return xe||(xe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(z)?function(...tt){return z.apply(et(this),tt),ft(Le.get(this))}:function(...tt){return ft(z.apply(et(this),tt))}:function(tt,...we){const Te=z.call(et(this),tt,...we);return Be.set(Te,tt.sort?tt.sort():[tt]),ft(Te)}}(z):(z instanceof IDBTransaction&&function mt(z){if(Fe.has(z))return;const tt=new Promise((we,Te)=>{const Ie=()=>{z.removeEventListener("complete",Ue),z.removeEventListener("error",_e),z.removeEventListener("abort",_e)},Ue=()=>{we(),Ie()},_e=()=>{Te(z.error||new DOMException("AbortError","AbortError")),Ie()};z.addEventListener("complete",Ue),z.addEventListener("error",_e),z.addEventListener("abort",_e)});Fe.set(z,tt)}(z),((z,tt)=>tt.some(we=>z instanceof we))(z,function Se(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(z,pt):z)}function ft(z){if(z instanceof IDBRequest)return function De(z){const tt=new Promise((we,Te)=>{const Ie=()=>{z.removeEventListener("success",Ue),z.removeEventListener("error",_e)},Ue=()=>{we(ft(z.result)),Ie()},_e=()=>{Te(z.error),Ie()};z.addEventListener("success",Ue),z.addEventListener("error",_e)});return tt.then(we=>{we instanceof IDBCursor&&Le.set(we,z)}).catch(()=>{}),ge.set(tt,z),tt}(z);if(fe.has(z))return fe.get(z);const tt=Ze(z);return tt!==z&&(fe.set(z,tt),ge.set(tt,z)),tt}const et=z=>ge.get(z);function yt(z,tt,{blocked:we,upgrade:Te,blocking:Ie,terminated:Ue}={}){const _e=indexedDB.open(z,tt),Ct=ft(_e);return Te&&_e.addEventListener("upgradeneeded",Xe=>{Te(ft(_e.result),Xe.oldVersion,Xe.newVersion,ft(_e.transaction))}),we&&_e.addEventListener("blocked",()=>we()),Ct.then(Xe=>{Ue&&Xe.addEventListener("close",()=>Ue()),Ie&&Xe.addEventListener("versionchange",()=>Ie())}).catch(()=>{}),Ct}function gt(z,{blocked:tt}={}){const we=indexedDB.deleteDatabase(z);return tt&&we.addEventListener("blocked",()=>tt()),ft(we).then(()=>{})}const it=["get","getKey","getAll","getAllKeys","count"],Je=["put","add","delete","clear"],Tt=new Map;function wt(z,tt){if(!(z instanceof IDBDatabase)||tt in z||"string"!=typeof tt)return;if(Tt.get(tt))return Tt.get(tt);const we=tt.replace(/FromIndex$/,""),Te=tt!==we,Ie=Je.includes(we);if(!(we in(Te?IDBIndex:IDBObjectStore).prototype)||!Ie&&!it.includes(we))return;const Ue=function(){var _e=(0,A.Z)(function*(Ct,...Xe){const Rt=this.transaction(Ct,Ie?"readwrite":"readonly");let cn=Rt.store;return Te&&(cn=cn.index(Xe.shift())),(yield Promise.all([cn[we](...Xe),Ie&&Rt.done]))[0]});return function(Xe){return _e.apply(this,arguments)}}();return Tt.set(tt,Ue),Ue}!function At(z){pt=z(pt)}(z=>({...z,get:(tt,we,Te)=>wt(tt,we)||z.get(tt,we,Te),has:(tt,we)=>!!wt(tt,we)||z.has(tt,we)}))},5861:(Kt,qe,Y)=>{function A(O,xe,Se,Me,Le,Fe,Be){try{var fe=O[Fe](Be),ge=fe.value}catch(De){return void Se(De)}fe.done?xe(ge):Promise.resolve(ge).then(Me,Le)}function y(O){return function(){var xe=this,Se=arguments;return new Promise(function(Me,Le){var Fe=O.apply(xe,Se);function Be(ge){A(Fe,Me,Le,Be,fe,"next",ge)}function fe(ge){A(Fe,Me,Le,Be,fe,"throw",ge)}Be(void 0)})}}Y.d(qe,{Z:()=>y})}},Kt=>{Kt(Kt.s=2417)}]);